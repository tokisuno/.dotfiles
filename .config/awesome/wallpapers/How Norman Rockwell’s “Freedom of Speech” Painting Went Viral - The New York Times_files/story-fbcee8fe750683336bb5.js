!function(){try{var e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},t=(new Error).stack;t&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[t]="2df04272-541a-4baa-984c-798c1c93ac75",e._sentryDebugIdIdentifier="sentry-dbid-2df04272-541a-4baa-984c-798c1c93ac75")}catch(e){}}();var _global="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};_global.SENTRY_RELEASE={id:"b7d5640f57118d0fe7b90931962c05228002b484"},(window.webpackJsonp=window.webpackJsonp||[]).push([[155,7,12,13,20,24,68,73,97,117,162,174,175,188,191],{"+/Tm":function(e,t,n){"use strict";var i=n("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.default=r;var a=i(n("q1tI")),o=(i(n("17x9")),i(n("wXC7")));function r(e){var t=e.className,n=e.fill;return a.default.createElement("svg",{className:t,viewBox:"0 0 16 22"},a.default.createElement("path",{d:"M15.863 13.08c-.687 1.818-1.923 3.147-3.64 3.916v-3.917l2.129-1.958-2.129-1.889V6.505c1.923-.14 3.228-1.609 3.228-3.358C15.45.84 13.32 0 12.086 0c-.275 0-.55 0-.962.14v.14h.481c.824 0 1.51.42 1.51 1.189 0 .63-.48 1.189-1.304 1.189-2.129 0-4.6-1.749-7.279-1.749C2.13.91.481 2.728.481 4.546c0 1.819 1.03 2.448 2.128 2.798v-.14c-.343-.21-.618-.63-.618-1.189 0-.84.756-1.469 1.648-1.469 2.267 0 5.906 1.959 8.172 1.959h.206v2.727l-2.129 1.889 2.13 1.958v3.987c-.894.35-1.786.49-2.748.49-3.502 0-5.768-2.169-5.768-5.806 0-.839.137-1.678.344-2.518l1.785-.769v7.973l3.57-1.608V6.575L3.984 8.953c.55-1.61 1.648-2.728 2.953-3.358v-.07C3.433 6.295 0 9.023 0 13.08c0 4.686 3.914 7.974 8.446 7.974 4.807 0 7.485-3.288 7.554-7.974h-.137z",fill:n}))}r.displayName="SuperTLogo",r.defaultProps={className:void 0,fill:o.default.color.black}},"+5AW":function(e,t,n){"use strict";n.d(t,"b",(function(){return f})),n.d(t,"a",(function(){return h}));var i=n("ygvk"),a=n("7WMn"),o=n("XWHH"),r=n.n(o),s=n("A4Gh"),l=function(e,t){var n;switch(e.type){case i.a.GET_SHORT_URL_REQUEST:n=function(e,t){var n=Object(s.parse)("".concat(t,"/svc/bitly/shorten.json"));return n.query={url:e.url},Object(s.format)(n)}(e.meta,t);break;default:return null}return r()(n,{method:"GET"})},c=n("7sTW"),u=(n("cnSC"),n("cr+I")),d=function(e,t){var n="".concat(t,"/v1/current/user.json"),a={credentials:"include"};switch(e.type){case i.a.GET_PROFILE_REQUEST:a.method="GET",n="".concat(t,"/v1/current/user.json?url=").concat(e.meta.articleId);break;case i.a.UPDATE_PROFILE_REQUEST:a.method="PUT",a.headers=new Headers({"Content-Type":"application/x-www-form-urlencoded"}),a.body=Object(u.stringify)(e.meta.values);break;case i.a.UPDATE_AVATAR_REQUEST:a.method="POST",n="".concat(t,"/v1/current/avatar.json?shouldResizeAndSkipCrop=true"),a.headers=new Headers({"X-CSRF-Token":e.meta.values.csrfToken}),a.body=e.meta.values.avatar;break;default:return null}return fetch(n,a)},p=function(){return Object(a.b)()===a.a.STG},f=function(){return p()?"https://www.stg.nytimes.com":"https://www.nytimes.com"},m=function(){return p()?"https://ugc-personas.api.stg.nytimes.com":"https://ugc-personas.api.nytimes.com"};function h(e){switch(e.type){case i.a.GET_ARTICLE_REQUEST:case i.a.GET_COMMENT_LIST_REQUEST:case i.a.GET_COMMENTS_REQUEST:case i.a.CREATE_COMMENT_REQUEST:case i.a.FLAG_COMMENT_REQUEST:case i.a.GET_SUMMARY_REQUEST:case i.a.RECOMMEND_COMMENT_REQUEST:case i.a.UNRECOMMEND_COMMENT_REQUEST:case i.a.GET_REPLIES_REQUEST:return Object(c.a)(e,f());case i.a.GET_PROFILE_REQUEST:case i.a.UPDATE_PROFILE_REQUEST:case i.a.UPDATE_AVATAR_REQUEST:return d(e,m());case i.a.GET_SHORT_URL_REQUEST:return l(e,p()?"https://content.api.stg.nytimes.com":"https://content.api.nytimes.com");default:return null}}},"+8fM":function(e,t,n){"use strict";var i=n("TqRt"),a=n("cDf5");Object.defineProperty(t,"__esModule",{value:!0}),t.default=m;var o=i(n("lSNA")),r=i(n("q1tI")),s=(i(n("17x9")),n("Jqp9")),l=n("hZ4i"),c=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=a(e)&&"function"!=typeof e)return{default:e};var n=f(t);if(n&&n.has(e))return n.get(e);var i={__proto__:null},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var r in e)if("default"!==r&&{}.hasOwnProperty.call(e,r)){var s=o?Object.getOwnPropertyDescriptor(e,r):null;s&&(s.get||s.set)?Object.defineProperty(i,r,s):i[r]=e[r]}return i.default=e,n&&n.set(e,i),i}(n("ZB1J")),u=i(n("aY2f")),d=i(n("iSgW")),p=n("a6xQ");function f(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(f=function(e){return e?n:t})(e)}function m(e){var t,n,i,a,f=e.article,m=e.HomepageLink,h=(0,d.default)(),g=(0,l.getLiveAsset)(f)||{},y=g.mobileHeader,v=g.active,b=g.live,_=g.lastModified,w=g.url;try{a=y&&JSON.parse(y)}catch(e){a={}}var x=v||b,k=(0,l.isTypeOfBlogCoverageBriefing)(null===(t=a)||void 0===t?void 0:t.typeOfBlog),O=(0,l.isTypeOfBlogStorylineFeed)(null===(n=a)||void 0===n?void 0:n.typeOfBlog),T=(0,l.isInExplainerAsset)(f),C=null===(i=a)||void 0===i?void 0:i.topicLabel,E=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",i=arguments.length>3?arguments[3]:void 0;return e?n?"See more headlines from our ":"See more headlines on this topic":i?n?"Read more: ":"Read more from this story":t?n?"See more updates: ":"See more updates from this story":n?"See more from our live coverage: ":"See more from our live coverage"}(k,x,C,T,O);return r.default.createElement("div",{className:(0,s.cx)(c.menuContainerClass,p.storylinesMenuShadowClass,(0,o.default)({},p.storylinesMenuApplyShadowClass,h))},m,r.default.createElement("nav",{className:(0,s.cx)(c.scrollContainerClass,p.justifyContentClass)},r.default.createElement("a",{className:p.linkClass,href:w},x&&!k&&!O&&r.default.createElement("strong",{className:p.liveLabelClass}," LIVE "),C?r.default.createElement("span",null,E,r.default.createElement("strong",{className:p.underlineClass},C)):r.default.createElement("span",{className:p.underlineClass},E),r.default.createElement("div",{className:p.placeholderClass},_&&x&&!k&&r.default.createElement(u.default,{autoUpdate:!0,showAbsoluteTime:!1,iso:_,formatter:"elapsed",className:(0,s.cx)(p.timestampClass,(0,o.default)({},p.breakingTimestampClass,Date.now()-Number(new Date(_))<18e5))})))))}m.displayName="LiveBreakoutHeader",m.defaultProps={HomepageLink:null}},"+IMj":function(e,t,n){"use strict";var i=this&&this.__createBinding||(Object.create?function(e,t,n,i){void 0===i&&(i=n);var a=Object.getOwnPropertyDescriptor(t,n);a&&!("get"in a?!t.__esModule:a.writable||a.configurable)||(a={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,i,a)}:function(e,t,n,i){void 0===i&&(i=n),e[i]=t[n]}),a=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&i(t,e,n);return a(t,e),t},r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var s=r(n("q1tI")),l=n("Jqp9"),c=n("X6oL"),u=r(n("5UIh")),d=o(n("sCLo")),p=n("djNW"),f=n("6gWn"),m=n("etPP");t.default=function(e){var t,n,i,a,o=e.unit,r=(null===(n=o.content)||void 0===n?void 0:n.smallerText)||!1,h=(0,c.useTracking)(),g=s.default.createElement("div",{className:d.headerText},s.default.createElement("b",null,"Your access will expire soon.")),y=s.default.createElement("div",{className:(0,l.cx)(d.mainContent)},s.default.createElement("div",null,s.default.createElement("p",{className:d.header},"We’re unable to process the payment for your subscription."),s.default.createElement("p",{className:(0,l.cx)(d.subHeader,(t={},t[d.smallSubHeader]=r,t))},null===(i=o.content)||void 0===i?void 0:i.contentText)),s.default.createElement(m.Button,{className:d.button,href:null===(a=o.content)||void 0===a?void 0:a.paymentUrl,onClick:function(){var e,t;h.trackEvent({event:"moduleInteraction",eventData:{pagetype:"article",trigger:"module",type:"click"},module:{name:"dock",audience:(null===(e=o.content)||void 0===e?void 0:e.audience)||"",label:"CH_CHURN_SUB_DIGI_GRACE_224",element:{name:p.Action.Subscribe,url:null===(t=o.content)||void 0===t?void 0:t.paymentUrl}}})},component:"a",testId:"onsite-messaging-unit-update-payment","data-campaign":null==o?void 0:o.campaign,"data-audience":null==o?void 0:o.audience},"UPDATE PAYMENT"));return s.default.createElement(u.default,{testId:"onsite-messaging-unit-".concat(null===f.config||void 0===f.config?void 0:f.config.name),"data-campaign":null==o?void 0:o.campaign,"data-audience":null==o?void 0:o.audience,className:d.dockBorder,unit:o,contentID:"ADS_RES_FIRST_PARTY_SURVEY_221",dockID:"standard",header:g,card:y,isDockDismissible:!0,isDockExpandable:!1,minimized:!1})}},"+bmn":function(e,t,n){"use strict";var i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var a=i(n("q1tI")),o=i(n("17x9")),r=n("Jqp9"),s=i(n("DWJt")),l=i(n("8Ihp")),c=n("b2Qg");function u(e){var t,n=e.dockExpanded,i=e.isDockDismissible,o=e.isDockExpandable;return i?a.default.createElement(l.default,{fill:"#010101"}):a.default.createElement(s.default,{className:(0,r.cx)(c.caretClass,(t={},t[c.caretUpClass]=!n&&o,t[c.caretDownClass]=n&&o,t)),fill:"#111"})}u.propTypes={dockExpanded:o.default.bool,isDockDismissible:o.default.bool,isDockExpandable:o.default.bool},u.defaultProps={dockExpanded:!1,isDockDismissible:void 0,isDockExpandable:!0},t.default=u},"+g8y":function(e,t,n){"use strict";n.d(t,"m",(function(){return l})),n.d(t,"k",(function(){return c})),n.d(t,"l",(function(){return u})),n.d(t,"i",(function(){return d})),n.d(t,"c",(function(){return p})),n.d(t,"h",(function(){return f})),n.d(t,"j",(function(){return m})),n.d(t,"e",(function(){return h})),n.d(t,"g",(function(){return g})),n.d(t,"b",(function(){return y})),n.d(t,"f",(function(){return v})),n.d(t,"a",(function(){return b})),n.d(t,"d",(function(){return k})),n.d(t,"n",(function(){return T}));var i=n("Jqp9"),a=n("wXC7"),o=n.n(a),r=n("3sMT"),s="@media (max-width: 424px)",l=Object(i.css)(o.a.breakpoint.small,"{padding-top:0;border-top:none;margin-top:0;border-bottom:none;padding-bottom:0;margin-bottom:0;justify-content:flex-end;li{margin-right:6px;}}"),c=Object(i.css)("color:",o.a.color.gray40,";display:flex;flex-shrink:0;font-family:",o.a.font.franklinBase,";font-size:17px;margin-bottom:5px;@media print{display:none;}"),u=Object(i.css)("padding:0;margin-left:0;margin-right:0;",s,"{margin-left:-9px;margin-right:-20px;}"),d=Object(i.css)("color:",o.a.color.gray40,";display:inline;margin-right:12px;width:100%;",s,"{margin-right:6px;}> a,> button{text-decoration:none;&:focus{display:inline-block;outline:none;box-shadow:0 0 2px 1px rgb(0 95 204);}@supports selector(:focus-visible){&:focus{box-shadow:none;}&:focus-visible{box-shadow:0 0 2px 1px rgb(0 95 204);}}}> a:focus{border-radius:100%;}&:last-of-type{margin-right:0;}"),p=Object(i.css)("border-radius:100%;padding:6px;overflow:initial;vertical-align:middle;height:20px;path{fill:",r.color.content.primary,";}"),f=Object(i.css)("display:inline-block;vertical-align:middle;width:20px;"),m=Object(i.css)("position:relative;"),h=Object(i.css)("height:auto;width:auto;border-radius:100%;background-color:transparent;"),g=Object(i.css)("height:18px;width:18px;padding:7px;overflow:visible;vertical-align:middle;g{stroke-width:0.1px;}"),y=(o.a.breakpoint.mobileFullWidth,o.a.breakpoint.textBodyWidth,o.a.breakpoint.small,Object(i.css)("width:",o.a.breakpoint.mobileFullWidth,";max-width:",o.a.breakpoint.textBodyWidth,"px;margin:1.5rem auto 2rem;",o.a.breakpoint.extraLarge,"{width:",o.a.breakpoint.textBodyWidthExtralarge,"px;max-width:",o.a.breakpoint.textBodyWidthExtralarge,"px;}",o.a.breakpoint.small,"{justify-content:flex-start;}")),v=Object(i.css)("text-align:right;direction:rtl;unicode-bidi:isolate;& > ul > li:last-of-type{margin-right:12px;",s,"{margin-right:6px;}}"),b=Object(i.css)("margin-bottom:1rem;&:empty{display:none;}",o.a.breakpoint.small,"{margin-bottom:1rem;}"),_=Object(i.css)("border-bottom:1px solid ",o.a.color.gray70,";padding-bottom:25px;margin-bottom:25px;"),w=Object(i.css)("border-top:1px solid ",o.a.color.gray70,";padding-top:20px;"),x=Object(i.css)(".",c,"{margin-bottom:0;}"),k=function(e,t,n,a){return Object(i.css)(t&&!n?w:null,";",!e||t&&n?"margin-bottom: 20px;":null,";",t&&n&&x,";",e||t||a?null:_,";",a?"margin-bottom: 25px;":null,";",o.a.breakpoint.medium,"{",!e||t&&n?null:w,";",e?null:"margin-bottom: 25px;",";}")},O=function(e){var t=e.buttonBorder,n=e.buttonBorderHover,a=e.buttonBorderActive,o=e.background,r=e.backgroundHover,s=e.backgroundActive,l=e.stroke,c=e.strokeHover,u=e.strokeActive,d=e.text,p=e.textHover,f=e.textActive,m=e.dropShadow;return Object(i.css)(".actionbar-button{background:",o,";border:1px solid ",t,";color:",d,";box-shadow:",m,";svg > path{fill:",l,";}&:hover{border:1px solid ",n,";background:",r,";color:",p,";svg > path{fill:",c,";}svg > g{stroke:",c,";}}&:active,&[aria-expanded='true']{border:1px solid ",a,";background:",s,";color:",f,";svg > path{fill:",u,";}svg > g{stroke:",u,";}}&[aria-checked='true']{.saved-fill{fill:",l,";}.saved-stroke{fill:",l,";}&:hover{.saved-fill{fill:",c,";}.saved-stroke{fill:",c,";}}&:active{.saved-fill{fill:",u,";}.saved-stroke{fill:",u,";}}}&[aria-checked='false']{.saved-fill{fill:none;}.saved-stroke{fill:",l,";}&:hover{.saved-stroke{fill:",c,";}}&:active{.saved-stroke{fill:",u,";}}}&:focus{box-shadow:0 0 2px 1px rgb(0 95 204);outline:3px solid transparent;outline-offset:2px;}@supports selector(:focus-visible){&:focus{box-shadow:none;}&:focus-visible{box-shadow:0 0 2px 1px rgb(0 95 204);outline:3px solid transparent;outline-offset:2px;}}}")},T=function(e){var t=e.actionBarTheme,n=void 0===t?"":t,i=e.dropShadow,a=void 0!==i&&i,s=n.toLocaleLowerCase(),l=a?"0 0 20px black":"none";if("dark-transparent"===s){var c=r.dark.colors.background.primary.hex,u=r.dark.colors.content.primary.hex;return O({background:"transparent",backgroundHover:c,buttonBorder:c,buttonBorderHover:c,stroke:c,strokeHover:u,text:c,textHover:u,dropShadow:l,buttonBorderActive:r.color.stroke.primary,backgroundActive:"rgba(0, 0, 0, 0.6)",strokeActive:u,textActive:u})}if("light-transparent"===s){var d=r.light.colors.stroke.primary.hex,p=r.light.colors.background.primary.hex;return O({background:"transparent",backgroundHover:p,buttonBorder:p,buttonBorderHover:p,stroke:p,strokeHover:d,text:p,textHover:d,dropShadow:l,buttonBorderActive:p,backgroundActive:"rgba(255, 255, 255, 0.6)",strokeActive:d,textActive:d})}return O("dark-filled"===s?{background:r.dark.colors.background.primary.hex,backgroundHover:r.dark.colors.background.tertiary.hex,buttonBorder:r.dark.colors.stroke.quaternary.hex,buttonBorderHover:r.dark.colors.stroke.quaternary.hex,stroke:r.dark.colors.stroke.primary.hex,strokeHover:r.dark.colors.content.primary.hex,text:r.dark.colors.content.primary.hex,textHover:r.dark.colors.content.primary.hex,dropShadow:l,buttonBorderActive:"transparent",backgroundActive:r.dark.colors.stroke.quaternary.transform(o.a.setAlpha(.6)).rgba,strokeActive:r.dark.colors.content.primary.hex,textActive:r.dark.colors.content.primary.hex}:{background:r.color.background.primary,backgroundHover:r.color.background.tertiary,buttonBorder:r.color.stroke.quaternary,buttonBorderHover:r.color.stroke.quaternary,stroke:r.color.stroke.primary,strokeHover:r.color.stroke.primary,text:r.color.content.primary,textHover:r.color.content.primary,dropShadow:l,buttonBorderActive:r.color.stroke.tertiary,backgroundActive:r.light.colors.background.tertiary.transform(o.a.setAlpha(.6)).rgba,strokeActive:r.color.stroke.primary,textActive:r.color.content.prmary})}},"+gTf":function(e,t,n){"use strict";var i=n("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=n("Jqp9"),o=i(n("wXC7")),r=i(n("WThh")),s=i(n("i+0r")),l=i(n("TvEp")),c=i(n("oKgi")),u=i(n("h58Z")),d=i(n("qrZX")),p=n("0Rhs"),f=n("3sMT"),m=(0,r.default)(["medium"]),h=(0,a.themeFn)("treatment",{none:(0,a.css)("color:",f.color.content.secondary,";"),feature:function(e){return(0,a.css)("color:",f.color.content.secondary,";",m(e,{textAlign:"rightToLeft"===e.theme.languageDirection?["right"]:[void 0,"left"]}),";")},sponsored:(0,a.css)()}),g=(0,a.styled)("header",{target:"e12qa4dv0"})(o.default.headerSpacing.marginTop,";",p.headerLanguageDirectionFn," ",s.default,"{",p.labelTreatmentFn,";",o.default.print,";margin-bottom:",o.default.headerSpacing.bottom,";margin-top:0;}",l.default,"{",p.heading1TreatmentFn,";",p.heading1LanguageDirectionFn,";",(function(e){return e.hasSummary?"margin-bottom: 10px;":"margin-bottom: 20px;"}),";",o.default.breakpoint.medium,"{position:relative;}}",d.default,"{margin-bottom:3px;",o.default.breakpoint.small,"{margin-bottom:0;}}",c.default,"{",h,";",p.summaryLanguageDirectionFn,";}",u.default,"{display:inline-block;}",p.BylineTimestamp,"{margin-bottom:",o.default.grid.pageMargin,"px;color:",f.color.content.primary,";",o.default.print,";",p.bylineTimestampToneFn,";",p.bylineTimestampSectionFn,";",p.bylineTimestampLanguageDirectionFn,";}");t.default=g},"+nHC":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){var e=(0,i.keyframes)("0%{transform:translate(0,0) scale(1,1) translate(0,0);}25%{transform:translate(0,0) scale(1,0.95) translate(0,0);}50%{transform:translate(0,0) scale(1,0.9) translate(0,0);}75%{transform:translate(0,0) scale(1,0.95) translate(0,0);}100%{transform:translate(0,0) scale(1,1) translate(0,0);}"),t=(0,i.keyframes)("0%{transform:translate(0,0) translate(0,0) translate(0,0);}25%{transform:translate(0,0) translate(0,0) translate(0,5px);}50%{transform:translate(0,0) translate(0,0) translate(0,10px);}75%{transform:translate(0,0) translate(0,0) translate(0,5px);}100%{transform:translate(0,0) translate(0,0) translate(0,0);}"),n=(0,i.keyframes)("0%{transform:translate(11.329999923706055px,0) scale(1,0.95) translate(-11.329999923706055px,0);}25%{transform:translate(11.329999923706055px,0) scale(1,1) translate(-11.329999923706055px,0);}50%{transform:translate(11.329999923706055px,0) scale(1,0.95) translate(-11.329999923706055px,0);}75%{transform:translate(11.329999923706055px,0) scale(1,0.9) translate(-11.329999923706055px,0);}100%{transform:translate(11.329999923706055px,0) scale(1,0.95) translate(-11.329999923706055px,0);}"),a=(0,i.keyframes)("0%{transform:translate(11.329999923706055px,0) translate(-11.329999923706055px,0) translate(0,5px);}25%{transform:translate(11.329999923706055px,0) translate(-11.329999923706055px,0) translate(0,0);}50%{transform:translate(11.329999923706055px,0) translate(-11.329999923706055px,0) translate(0,5px);}75%{transform:translate(11.329999923706055px,0) translate(-11.329999923706055px,0) translate(0,10px);}100%{transform:translate(11.329999923706055px,0) translate(-11.329999923706055px,0) translate(0,5px);}"),o=(0,i.keyframes)("0%{transform:translate(22.670000076293945px,0) scale(1,0.9) translate(-22.670000076293945px,0);}25%{transform:translate(22.670000076293945px,0) scale(1,0.95) translate(-22.670000076293945px,0);}50%{transform:translate(22.670000076293945px,0) scale(1,1) translate(-22.670000076293945px,0);}75%{transform:translate(22.670000076293945px,0) scale(1,0.95) translate(-22.670000076293945px,0);}100%{transform:translate(22.670000076293945px,0) scale(1,0.9) translate(-22.670000076293945px,0);}"),r=(0,i.keyframes)("0%{transform:translate(22.670000076293945px,0) translate(-22.670000076293945px,0) translate(0,10px);}25%{transform:translate(22.670000076293945px,0) translate(-22.670000076293945px,0) translate(0,5px);}50%{transform:translate(22.670000076293945px,0) translate(-22.670000076293945px,0) translate(0,0);}75%{transform:translate(22.670000076293945px,0) translate(-22.670000076293945px,0) translate(0,5px);}100%{transform:translate(22.670000076293945px,0) translate(-22.670000076293945px,0) translate(0,10px);}"),s=(0,i.keyframes)("0%{transform:translate(34px,0) translate(-34px,0) translate(0,5px);}25%{transform:translate(34px,0) translate(-34px,0) translate(0,10px);}50%{transform:translate(34px,0) translate(-34px,0) translate(0,5px);}75%{transform:translate(34px,0) translate(-34px,0) translate(0,0);}100%{transform:translate(34px,0) translate(-34px,0) translate(0,5px);}"),l=(0,i.keyframes)("0%{transform:translate(34px,0) scale(1,0.95) translate(-34px,0);}25%{transform:translate(34px,0) scale(1,0.9) translate(-34px,0);}50%{transform:translate(34px,0) scale(1,0.95) translate(-34px,0);}75%{transform:translate(34px,0) scale(1,1) translate(-34px,0);}100%{transform:translate(34px,0) scale(1,0.95) translate(-34px,0);}");return{firstBarClass:(0,i.css)("animation:",e," 0.8s cubic-bezier(0,0,1,1) infinite;"),firstBarParentClass:(0,i.css)("animation:",t," 0.8s cubic-bezier(0,0,1,1) infinite;"),secondBarClass:(0,i.css)("animation:",n," 0.8s cubic-bezier(0,0,1,1) infinite;"),secondBarParentClass:(0,i.css)("animation:",a," 0.8s cubic-bezier(0,0,1,1) infinite;"),thirdBarClass:(0,i.css)("animation:",o," 0.8s cubic-bezier(0,0,1,1) infinite;"),thirdBarParentClass:(0,i.css)("animation:",r," 0.8s cubic-bezier(0,0,1,1) infinite;"),fourthBarClass:(0,i.css)("animation:",s," 0.8s cubic-bezier(0,0,1,1) infinite;"),fourthBarParentClass:(0,i.css)("animation:",l," 0.8s cubic-bezier(0,0,1,1) infinite;")}};var i=n("Jqp9")},"+rYN":function(e,t,n){"use strict";var i=n("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.visibleBodyClass=t.dismissButtonClass=t.TranscriptContainer=t.Document=t.Background=void 0;var a=n("Jqp9"),o=n("3sMT"),r=i(n("wXC7")),s=r.default.setAlpha;t.TranscriptContainer=(0,a.styled)("div",{target:"e1drnplw0"})("position:fixed;z-index:",r.default.zIndex.overlay,";top:0;left:0;right:0;bottom:0;display:flex;flex-direction:row;justify-content:center;opacity:",(function(e){return e.isVisible?"1":"0"}),";transition:opacity 0.2s;pointer-events:",(function(e){return e.isVisible?"all":"none"}),";@media print{position:static;}"),t.Background=(0,a.styled)("div",{target:"e1drnplw1"})("position:absolute;top:0;left:0;bottom:0;right:0;background-color:",o.dark.colors.overlay.black.transform(s(.8)).rgba,";z-index:1;@media print{background-color:",o.color.background.primary,";}"),t.Document=(0,a.styled)("div",{target:"e1drnplw2"})("position:absolute;top:0;bottom:0;background-color:",o.color.background.primary,";width:100%;overflow-y:scroll;-webkit-overflow-scrolling:touch;z-index:2;",r.default.breakpoint.small,"{max-width:calc(100% - 60px);width:1080px;}",r.default.breakpoint.medium,"{max-width:calc(100% - 100px);}",r.default.breakpoint.mediumLarge,"{max-width:930px;}",r.default.breakpoint.large,"{max-width:930px;}@media print{position:static;}"),t.dismissButtonClass=(0,a.css)("display:none;position:absolute;right:20px;top:20px;background-color:rgba(0,0,0,0);z-index:3;svg circle{transition:fill-opacity 0.2s;&:hover{fill-opacity:1;}}",r.default.breakpoint.large,"{display:block;}@media print{display:none;}"),t.visibleBodyClass=(0,a.css)("overflow:hidden;position:fixed;width:100%;")},"+rdV":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;t.default=function(e,t){for(var n=arguments.length,i=new Array(n>2?n-2:0),a=2;a<n;a++)i[a-2]=arguments[a];return e.includes(t)&&i.every(Boolean)}},"+tSf":function(e,t,n){"use strict";function i(e){var t,n;return(null==e||null===(t=e.url)||void 0===t?void 0:t.includes("/explain/"))&&(null==e||null===(n=e.__typename)||void 0===n?void 0:n.includes("LegacyCollection"))}function a(e){var t;return null==e||null===(t=e.collections)||void 0===t?void 0:t.find((function(e){return i(e)}))}function o(e){return!!a(e)}n.d(t,"a",(function(){return i})),n.d(t,"b",(function(){return a})),n.d(t,"c",(function(){return o}))},"+xN7":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;t.default='\nfragment onCardDeckVisualEssay on VisualEssay {\n  __typename\n  data\n  cards {\n    key\n    data\n    text {\n      key\n      content {\n        ... on TextInline {\n          text\n          __typename\n        }\n      }\n    }\n    assets {\n      ... on CreativeWork {\n        ... on Published {\n          uri\n          url\n          sourceId\n          __typename\n        }\n        ... on Image {\n          id\n          uri\n          credit\n          sourceId\n          altText\n          crops(\n            renditionNames: [\n              "videoSixteenByNine1050"\n              "videoSixteenByNine600"\n              "threeByTwoMediumAt2X"\n              "verticalTwoByThree735"\n              "square640"\n              "threeByTwoMediumAt2X"\n            ]\n          ) {\n            name\n            renditions {\n              name\n              url\n              width\n              height\n            }\n          }\n        }\n        ... on Video {\n          id\n          uri\n          advertisingProperties {\n            sensitivity\n          }\n          bylines {\n            renderedRepresentation\n          }\n          transcript\n          duration\n          renditions {\n            aspectRatio\n            type\n            url\n            width\n            height\n          }\n          isCinemagraph\n          promotionalMedia {\n            ... on Image {\n              id\n              credit\n              crops(\n                renditionNames: [\n                  "videoSixteenByNine1050"\n                  "videoSixteenByNine600"\n                  "threeByTwoMediumAt2X"\n                  "verticalTwoByThree735"\n                  "square640"\n                  "threeByTwoMediumAt2X"\n                ]\n              ) {\n                name\n                renditions {\n                  name\n                  url\n                  width\n                  height\n                }\n              }\n            }\n          }\n          summary\n        }\n      }\n    }\n    bylines {\n      key\n      byline {\n        renderedRepresentation\n      }\n    }\n  }\n}\n'},"+zxi":function(e,t,n){"use strict";n.d(t,"e",(function(){return s})),n.d(t,"d",(function(){return l})),n.d(t,"a",(function(){return c})),n.d(t,"b",(function(){return u})),n.d(t,"c",(function(){return d}));var i=n("M4XY"),a=n.n(i),o=n("t0IW"),r=n("oXTd"),s=function(e){if(!e||"string"!=typeof e)return"";var t=a()(e).replace(/[^\w-]/g,"");return a()(t)},l=function(e){return r.n[e]||"en-US"},c=function(e,t){return e?t?Object(o.a)(e,t):e:""},u=function(e){return null!=e&&e.code?{newsletterId:(null==e?void 0:e.code)||"",title:(null==e?void 0:e.name)||"",caption:(null==e?void 0:e.signupModuleSummary)||"",frequency:(null==e?void 0:e.frequency)||"",altText:(null==e?void 0:e.signupAltText)||"",sampleUrl:(null==e?void 0:e.sampleLink)||"",thumbImageUrl:(null==e?void 0:e.splashThumbImage)||"",allowedEntitlement:(null==e?void 0:e.allowedEntitlement)||"",subscriptionPageLink:(null==e?void 0:e.subscriptionPageLink)||"",isOnsiteFreeTrialEnabled:(null==e?void 0:e.isOnsiteFreeTrialEnabled)||0}:{}},d=function(e,t,n){if(null==e||!e.length)return[];if(!t)return e;var i={};return e.filter((function(e){var a,o=e.newsletterId,r=e.allowedEntitlement,s=e.isOnsiteFreeTrialEnabled;return!i[o]&&(!n||!r||s&&(!s||null!==(a=t[o])&&void 0!==a&&a.isFreeTrial)?!t[o]&&(i[o]=!0,!0):(i[o]=!0,!0))}))}},"/2LF":function(e,t,n){"use strict";var i,a=n("VkAN"),o=n.n(a),r=n("gcR/"),s=n.n(r),l=n("lSNA"),c=n.n(l),u=n("q1tI"),d=n.n(u),p=n("eFc+"),f=n.n(p),m=n("Kn2l"),h=n.n(m),g=n("XlcC"),y=n("HTd6"),v=n("369f"),b=n("Ogzn"),_=n("B2Q+"),w=n("Jqp9");function x(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}var k=function(e){var t,n,i=e.data,a=e.className,o=e.linkTrackingParamOverrides,r=e.renderRelated,l=e.isLazy,u=e.showImageCredits,p=Object(w.useTheme)().noFollowExternalLinks;if(!i)return null;var f=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?x(Object(n),!0).forEach((function(t){c()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):x(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({action:"click",module:"RelatedLinks"},o),y=Object(g.createMapInlineUnionWithOptions)({internalLinkTrackingParams:f,noFollowExternalLinks:p}),k=null!==(t=i.title)&&void 0!==t&&t.length?i.title.map(y):null,O=null!==(n=i.description)&&void 0!==n&&n.length?i.description.map(y):null,T=i.displayStyle||null,C=i.related&&i.related.map((function(e,t){var n={key:t,data:e,displayStyle:T,linkTrackingParamOverrides:o,showImageCredits:u};return d.a.createElement(r||b.a,n)}));return s()(v.a,{offset:500,isLazy:!!l&&!Object(_.b)()},void 0,s()(h.a,{className:Object(w.cx)(a,"related-links-block"),displayStyle:T,related:C},void 0,k&&s()(m.RelatedLinksHeadline,{},void 0,k),O&&s()(m.RelatedLinksDescription,{},void 0,O)))};k.displayName="RelatedLinksBlock",k.fragments={data:f()(i||(i=o()(["\n    fragment SharedRelatedLinksBlock_data on RelatedLinksBlock {\n      displayStyle: displayStyle\n      title {\n        ...TextInline_content\n      }\n      description {\n        ...TextInline_content\n      }\n      related @filterEmpty {\n        __typename\n        ...SharedRelatedLinkBlock_data\n      }\n    }\n    ","\n    ","\n  "])),y.a.fragments.content,b.a.fragments.data)},k.defaultProps={className:void 0,data:null,linkTrackingParamOverrides:{},renderRelated:void 0,isLazy:!0,showImageCredits:!1},t.a=k},"/4sL":function(e,t,n){"use strict";var i=n("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=i(n("lSNA")),o=n("fdyL"),r=i(n("odBU")),s=i(n("q1tI"));function l(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}var c=function(e){var t=e.host,n=e.onLogin,i=e.newsletter,c=e.lireParams,u=(0,o.isSubOnly)(i)?"newsletter_subonly_lire":"newsletter_free_lire",d=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?l(Object(n),!0).forEach((function(t){(0,a.default)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):l(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({redirect_uri:window.location.href,client_id:"freex",asset:"".concat(i.productCode,"-standalone"),response_type:"cookie",application:"Newsletter",display:u},c);return s.default.createElement(r.default,{host:t,params:d,onSuccess:n})};c.displayName="LireLoginForm";t.default=c},"/9TP":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=[{timezone:"A",offset:"+0100"},{timezone:"ACDT",offset:"+1030"},{timezone:"ACST",offset:"+0930"},{timezone:"ACT",offset:"-0500"},{timezone:"ACT",offset:"+0930"},{timezone:"ACWST",offset:"+0845"},{timezone:"ADT",offset:"+0300"},{timezone:"ADT",offset:"-0300"},{timezone:"AEDT",offset:"+1100"},{timezone:"AEST",offset:"+1000"},{timezone:"AET",offset:"+1000"},{timezone:"AFT",offset:"+0430"},{timezone:"AKDT",offset:"-0800"},{timezone:"AKST",offset:"-0900"},{timezone:"ALMT",offset:"+0600"},{timezone:"AMST",offset:"-0300"},{timezone:"AMST",offset:"+0500"},{timezone:"AMT",offset:"-0400"},{timezone:"AMT",offset:"+0400"},{timezone:"ANAST",offset:"+1200"},{timezone:"ANAT",offset:"+1200"},{timezone:"AQTT",offset:"+0500"},{timezone:"ART",offset:"-0300"},{timezone:"AST",offset:"+0300"},{timezone:"AST",offset:"-0400"},{timezone:"AT",offset:"-0400"},{timezone:"AWDT",offset:"+0900"},{timezone:"AWST",offset:"+0800"},{timezone:"AZOST",offset:"Z"},{timezone:"AZOT",offset:"-0100"},{timezone:"AZST",offset:"+0500"},{timezone:"AZT",offset:"+0400"},{timezone:"AoE",offset:"-1200"},{timezone:"B",offset:"+0200"},{timezone:"BNT",offset:"+0800"},{timezone:"BOT",offset:"-0400"},{timezone:"BRST",offset:"-0200"},{timezone:"BRT",offset:"-0300"},{timezone:"BST",offset:"+0600"},{timezone:"BST",offset:"+1100"},{timezone:"BST",offset:"+0100"},{timezone:"BTT",offset:"+0600"},{timezone:"C",offset:"+0300"},{timezone:"CAST",offset:"+1100"},{timezone:"CAT",offset:"+0200"},{timezone:"CCT",offset:"+0630"},{timezone:"CDT",offset:"-0500"},{timezone:"CDT",offset:"-0400"},{timezone:"CEST",offset:"+0200"},{timezone:"CET",offset:"+0100"},{timezone:"CHADT",offset:"+1345"},{timezone:"CHAST",offset:"+1245"},{timezone:"CHOST",offset:"+0900"},{timezone:"CHOT",offset:"+0800"},{timezone:"CHUT",offset:"+1000"},{timezone:"CIDST",offset:"-0400"},{timezone:"CIST",offset:"-0500"},{timezone:"CKT",offset:"-1000"},{timezone:"CLST",offset:"-0300"},{timezone:"CLT",offset:"-0400"},{timezone:"COT",offset:"-0500"},{timezone:"CST",offset:"-0600"},{timezone:"CST",offset:"+0800"},{timezone:"CST",offset:"-0500"},{timezone:"CT",offset:"-0600"},{timezone:"CVT",offset:"-0100"},{timezone:"CXT",offset:"+0700"},{timezone:"ChST",offset:"+1000"},{timezone:"D",offset:"+0400"},{timezone:"DAVT",offset:"+0700"},{timezone:"DDUT",offset:"+1000"},{timezone:"E",offset:"+0500"},{timezone:"EASST",offset:"-0500"},{timezone:"EAST",offset:"-0600"},{timezone:"EAT",offset:"+0300"},{timezone:"ECT",offset:"-0500"},{timezone:"EDT",offset:"-0400"},{timezone:"EEST",offset:"+0300"},{timezone:"EET",offset:"+0200"},{timezone:"EGST",offset:"Z"},{timezone:"EGT",offset:"-0100"},{timezone:"EST",offset:"-0500"},{timezone:"ET",offset:"-0500"},{timezone:"F",offset:"+0600"},{timezone:"FET",offset:"+0300"},{timezone:"FJST",offset:"+1300"},{timezone:"FJT",offset:"+1200"},{timezone:"FKST",offset:"-0300"},{timezone:"FKT",offset:"-0400"},{timezone:"FNT",offset:"-0200"},{timezone:"G",offset:"+0700"},{timezone:"GALT",offset:"-0600"},{timezone:"GAMT",offset:"-0900"},{timezone:"GET",offset:"+0400"},{timezone:"GFT",offset:"-0300"},{timezone:"GILT",offset:"+1200"},{timezone:"GMT",offset:"Z"},{timezone:"GST",offset:"+0400"},{timezone:"GST",offset:"-0200"},{timezone:"GYT",offset:"-0400"},{timezone:"H",offset:"+0800"},{timezone:"HADT",offset:"-0900"},{timezone:"HAST",offset:"-1000"},{timezone:"HKT",offset:"+0800"},{timezone:"HOVST",offset:"+0800"},{timezone:"HOVT",offset:"+0700"},{timezone:"I",offset:"+0900"},{timezone:"ICT",offset:"+0700"},{timezone:"IDT",offset:"+0300"},{timezone:"IOT",offset:"+0600"},{timezone:"IRDT",offset:"+0430"},{timezone:"IRKST",offset:"+0900"},{timezone:"IRKT",offset:"+0800"},{timezone:"IRST",offset:"+0330"},{timezone:"IST",offset:"+0530"},{timezone:"IST",offset:"+0100"},{timezone:"IST",offset:"+0200"},{timezone:"JST",offset:"+0900"},{timezone:"K",offset:"+1000"},{timezone:"KGT",offset:"+0600"},{timezone:"KOST",offset:"+1100"},{timezone:"KRAST",offset:"+0800"},{timezone:"KRAT",offset:"+0700"},{timezone:"KST",offset:"+0900"},{timezone:"KUYT",offset:"+0400"},{timezone:"L",offset:"+1100"},{timezone:"LHDT",offset:"+1100"},{timezone:"LHST",offset:"+1030"},{timezone:"LINT",offset:"+1400"},{timezone:"M",offset:"+1200"},{timezone:"MAGST",offset:"+1200"},{timezone:"MAGT",offset:"+1100"},{timezone:"MART",offset:"-0930"},{timezone:"MAWT",offset:"+0500"},{timezone:"MDT",offset:"-0600"},{timezone:"MHT",offset:"+1200"},{timezone:"MMT",offset:"+0630"},{timezone:"MSD",offset:"+0400"},{timezone:"MSK",offset:"+0300"},{timezone:"MST",offset:"-0700"},{timezone:"MT",offset:"-0700"},{timezone:"MUT",offset:"+0400"},{timezone:"MVT",offset:"+0500"},{timezone:"MYT",offset:"+0800"},{timezone:"N",offset:"-0100"},{timezone:"NCT",offset:"+1100"},{timezone:"NDT",offset:"-0230"},{timezone:"NFT",offset:"+1100"},{timezone:"NOVST",offset:"+0700"},{timezone:"NOVT",offset:"+0700"},{timezone:"NPT",offset:"+0545"},{timezone:"NRT",offset:"+1200"},{timezone:"NST",offset:"-0330"},{timezone:"NUT",offset:"-1100"},{timezone:"NZDT",offset:"+1300"},{timezone:"NZST",offset:"+1200"},{timezone:"O",offset:"-0200"},{timezone:"OMSST",offset:"+0700"},{timezone:"OMST",offset:"+0600"},{timezone:"ORAT",offset:"+0500"},{timezone:"P",offset:"-0300"},{timezone:"PDT",offset:"-0700"},{timezone:"PET",offset:"-0500"},{timezone:"PETST",offset:"+1200"},{timezone:"PETT",offset:"+1200"},{timezone:"PGT",offset:"+1000"},{timezone:"PHOT",offset:"+1300"},{timezone:"PHT",offset:"+0800"},{timezone:"PKT",offset:"+0500"},{timezone:"PMDT",offset:"-0200"},{timezone:"PMST",offset:"-0300"},{timezone:"PONT",offset:"+1100"},{timezone:"PST",offset:"-0800"},{timezone:"PST",offset:"-0800"},{timezone:"PT",offset:"-0800"},{timezone:"PWT",offset:"+0900"},{timezone:"PYST",offset:"-0300"},{timezone:"PYT",offset:"-0400"},{timezone:"PYT",offset:"+0830"},{timezone:"Q",offset:"-0400"},{timezone:"QYZT",offset:"+0600"},{timezone:"R",offset:"-0500"},{timezone:"RET",offset:"+0400"},{timezone:"ROTT",offset:"-0300"},{timezone:"S",offset:"-0600"},{timezone:"SAKT",offset:"+1100"},{timezone:"SAMT",offset:"+0400"},{timezone:"SAST",offset:"+0200"},{timezone:"SBT",offset:"+1100"},{timezone:"SCT",offset:"+0400"},{timezone:"SGT",offset:"+0800"},{timezone:"SRET",offset:"+1100"},{timezone:"SRT",offset:"-0300"},{timezone:"SST",offset:"-1100"},{timezone:"SYOT",offset:"+0300"},{timezone:"T",offset:"-0700"},{timezone:"TAHT",offset:"-1000"},{timezone:"TFT",offset:"+0500"},{timezone:"TJT",offset:"+0500"},{timezone:"TKT",offset:"+1300"},{timezone:"TLT",offset:"+0900"},{timezone:"TMT",offset:"+0500"},{timezone:"TOST",offset:"+1400"},{timezone:"TOT",offset:"+1300"},{timezone:"TRT",offset:"+0300"},{timezone:"TVT",offset:"+1200"},{timezone:"U",offset:"-0800"},{timezone:"ULAST",offset:"+0900"},{timezone:"ULAT",offset:"+0800"},{timezone:"UYST",offset:"-0200"},{timezone:"UYT",offset:"-0300"},{timezone:"UZT",offset:"+0500"},{timezone:"V",offset:"-0900"},{timezone:"VET",offset:"-0400"},{timezone:"VLAST",offset:"+1100"},{timezone:"VLAT",offset:"+1000"},{timezone:"VOST",offset:"+0600"},{timezone:"VUT",offset:"+1100"},{timezone:"W",offset:"-1000"},{timezone:"WAKT",offset:"+1200"},{timezone:"WARST",offset:"-0300"},{timezone:"WAST",offset:"+0200"},{timezone:"WAT",offset:"+0100"},{timezone:"WEST",offset:"+0100"},{timezone:"WET",offset:"Z"},{timezone:"WFT",offset:"+1200"},{timezone:"WGST",offset:"-0200"},{timezone:"WGT",offset:"-0300"},{timezone:"WIB",offset:"+0700"},{timezone:"WIT",offset:"+0900"},{timezone:"WITA",offset:"+0800"},{timezone:"WST",offset:"+1300"},{timezone:"WST",offset:"+0100"},{timezone:"WT",offset:"Z"},{timezone:"X",offset:"-1100"},{timezone:"Y",offset:"-1200"},{timezone:"YAKST",offset:"+1000"},{timezone:"YAKT",offset:"+0900"},{timezone:"YAPT",offset:"+1000"},{timezone:"YEKST",offset:"+0600"},{timezone:"YEKT",offset:"+0500"},{timezone:"Z",offset:"Z"}];t.default=function(e){var t=i.find((function(t){return t.timezone===e}));return void 0!==t?t.offset:"Z"}},"/Kb5":function(e,t,n){"use strict";var i=n("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=i(n("q1tI")),o=i(n("uLdf")),r=function(){return a.default.createElement("span",{className:o.default},"New")};r.displayName="NewLabel";t.default=r},"/Lu6":function(e,t,n){"use strict";var i=n("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=i(n("QILm")),o=i(n("W8MJ")),r=i(n("lwsE")),s=i(n("a1gu")),l=i(n("Nsbk")),c=i(n("7W2i")),u=i(n("uf0L")),d=["url","position","name","item"];function p(e,t,n){return t=(0,l.default)(t),(0,s.default)(e,function(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return function(){return!!e}()}()?Reflect.construct(t,n||[],(0,l.default)(e).constructor):t.apply(e,n))}var f=function(e){function t(){var e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},i=n.url,o=n.position,s=n.name,l=n.item,c=(0,a.default)(n,d);return(0,r.default)(this,t),(e=p(this,t,[c]))["@type"]="ListItem",e.url=i,e.position=o,e.name=s,e.item=l,e}return(0,c.default)(t,e),(0,o.default)(t)}(u.default);t.default=f},"/UXH":function(e,t,n){"use strict";var i=n("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=i(n("q1tI")),o=(i(n("17x9")),n("Jqp9")),r=n("FZbM"),s=function(e){var t=e.translations,n=e.className;return t&&0!==t.length?a.default.createElement("div",{className:(0,o.cx)(r.translationLinksClass,n)},t.map((function(e){return a.default.createElement("a",{className:r.translationLinkClass,href:e.url,"data-version":e.language.code,key:e.url,title:e.linkText},e.translatedLinkText?e.translatedLinkText:e.linkText)}))):null};s.displayName="TranslationLinks",s.defaultProps={className:void 0};t.default=s},"/jA0":function(e,t,n){"use strict";var i=n("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.SizePropType=t.SectionPropType=t.PositionPropType=t.CollectionsPropType=void 0;var a=i(n("lSNA")),o=i(n("q1tI")),r=i(n("17x9")),s=n("Jqp9"),l=n("6cBM"),c=n("QGGS"),u=function(e){var t,n=e.className,i=e.collectionBasedSections,r=e.collections,u=e.logos,d=e.kicker,p=e.position,f=e.section,m=e.size,h=void 0===m?"standard":m,g=e.subsection,y=e.withLink,v=e.withMarginBottom,b=(0,s.useTheme)();if(!0===b.chromeless)return null;t=p||("opinion"===b.section&&b.opinionHeaderRedesign?"center":"left");var _=v||"opinion"!==b.section||!b.opinionHeaderRedesign,w=(0,c.getPreferredSectionWithLogoAndCanonicalUrl)({collections:r,section:f,logos:u,subsection:g})||(0,c.getCollectionBasedSectionWithLogo)({collections:r,logos:u,collectionBasedSections:i||[]});if(!w)return null;var x=w.displayName,k=w.Logo,O=w.url,T=o.default.createElement(k,{className:l.brandBarLogoClass,displayName:x,kicker:d,size:h});return T?(y&&(T=o.default.createElement("a",{href:O||"#","data-testid":"story-section"},T)),o.default.createElement("div",{className:(0,s.cx)(l.brandBarClass,(0,a.default)({},l.logoMarginClass,_),n),"data-testid":"brand-bar"},o.default.createElement("div",{className:(0,s.cx)((0,a.default)({},l.brandBarCenteredClass,"center"===t))},T))):null};u.displayName="BrandBar";t.CollectionsPropType=r.default.arrayOf(r.default.shape({collectionType:r.default.string,name:r.default.string,slug:r.default.string,tagline:r.default.string,url:r.default.string})),t.PositionPropType=r.default.oneOf(["left","center"]),t.SectionPropType=r.default.shape({displayName:r.default.string,name:r.default.string,url:r.default.string}),t.SizePropType=r.default.oneOf(["standard","small"]);u.defaultProps={className:void 0,collectionBasedSections:void 0,collections:void 0,kicker:void 0,logos:void 0,position:void 0,section:void 0,size:"standard",subsection:void 0,withLink:!1,withMarginBottom:void 0};t.default=u},"/tXv":function(e,t,n){"use strict";var i=n("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.OnsiteKicker=void 0;var a=i(n("q1tI")),o=(i(n("17x9")),i(n("i+0r"))),r=n("L1jB"),s=n("AhCu"),l=t.OnsiteKicker=function(e){var t=e.isSubOnly;return a.default.createElement(r.LabelContainer,{className:s.kickerContainerClass},a.default.createElement(o.default,{id:"label-onsite-newsletter","data-testid":"newsletter-kicker-label"},t?"Subscriber-only ":"","Newsletter"))};l.displayName="OnsiteKicker",l.defaultProps={isSubOnly:!1};t.default=l},"/tu1":function(e,t,n){"use strict";n.d(t,"a",(function(){return h})),n.d(t,"b",(function(){return g})),n.d(t,"c",(function(){return y})),n.d(t,"e",(function(){return v})),n.d(t,"h",(function(){return _})),n.d(t,"d",(function(){return w})),n.d(t,"g",(function(){return x})),n.d(t,"f",(function(){return k})),n.d(t,"i",(function(){return O}));var i=n("cDf5"),a=n.n(i),o=n("gcR/"),r=n.n(o),s=n("q1tI"),l=n.n(s),c=n("cr+I"),u=n.n(c),d=n("oqc9"),p=n("JwCr"),f=n.n(p),m=n("bmDE"),h=function(e){var t=null==e?void 0:e.substring(0,e.indexOf(".")+1),n=null==e?void 0:e.substring(e.indexOf(".")+1);return(null==e?void 0:e.match(/[.]/g).length)>1?l.a.createElement(l.a.Fragment,null,r()(f.a,{},void 0,t),n):e};function g(e,t){var n={};return e.filter((function(e){if(null==e)return!1;if(t&&"object"!==a()(e))throw new Error("Cannot access property ".concat(t," of ").concat(e,". A keyBy argument can only be passed for arrays of objects."));if("object"===a()(e)&&!t)throw new Error("Arrays of objects require a keyBy argument to be passed.");var i=t?e[t]:e,o=!n[i];return o&&(n[i]=!0),o}))}var y=function(e){var t=document.querySelector("h1"),n=document.querySelector("#get-started-steps");(e=e&&e.current||e)&&e.focus?e.focus():n?n.focus():t&&(t.style.outline="none",t.tabIndex="-1",t.focus())},v=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return e.toLowerCase().replace(/ /g,"-")};function b(e){if(!e)return null;var t=new URL(e).hostname.split(".nytimes.com")[0];return m.d.includes(t)}function _(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",n=/^http[s]*:\/\/.*nytimes\.com/;return b(t)?t:null==t||null===(e=t.replace)||void 0===e?void 0:e.call(t,n,"https://www.nytimes.com")}function w(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",n=_(null==t||null===(e=t.split)||void 0===e?void 0:e.call(t,"?")[0]);return"https://nytimes.app.goo.gl/?link=".concat(n||"https://homepage","&apn=com.nytimes.android&amv=9837&ibi=com.nytimes.NYTimes&isi=284862083")}var x=function(e){var t,n;return function(e){return/.*\/(\d{4})\/(\d{2})\/(\d{2})\/(.+)(.)html/.test(e)}(e)&&-1===(null==e||null===(t=e.indexOf)||void 0===t?void 0:t.call(e,"interactive"))&&-1===(null==e||null===(n=e.indexOf)||void 0===n?void 0:n.call(e,"slideshow"))},k=function(e){return!!u.a.parse(e.search).testing&&"prd"!==vi.env.ENVIRONMENT},O=function(e,t){return function(){d.animateScroll.scrollTo(0,{smooth:!0,duration:t&&0}),null!=e&&e.current&&e.current.focus()}}},"00Pk":function(e,t,n){"use strict";var i=n("mczz"),a=n("zWrI");t.a=function(e){var t=e.location;return Object(i.e)(t,a.a.COMMENTS_PANEL)||Boolean(Object(i.b)(t,a.a.PERM_ID))}},"05yZ":function(e,t,n){"use strict";t.a="/vi-assets/static-assets/icon-cooking_144x144-5a8be1ef711d4ba5e66b0be7a2ca8bfe.webp"},"0Fvw":function(e,t,n){"use strict";var i=n("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=i(n("q1tI")),o=(i(n("17x9")),n("1gPk")),r=function(e){var t=e.children;return a.default.createElement("span",{className:o.dropcapClass},t)};r.displayName="DropcapFormat";t.default=r},"0G++":function(e,t,n){"use strict";var i,a=n("J4zp"),o=n.n(a),r=n("VkAN"),s=n.n(r),l=n("q1tI"),c=n("Kxyt"),u=n("eFc+"),d=n.n(u)()(i||(i=s()(["\n  query NewsletterPageQuery($name: String!) {\n    newsletterPage(name: $name) {\n      sections {\n        cardStyle\n        headline\n        name\n        products {\n          allowedEntitlement\n          altText\n          altTextLogo\n          authorBio\n          caption\n          captionExtended\n          figureImageUrl\n          frequency\n          isFreeTrialEnabled\n          isOnsiteFreeTrialEnabled\n          newsletterId\n          sampleUrl\n          subscriptionPageLink\n          thumbImageUrl\n          title\n          titleFont\n          titleImage\n        }\n      }\n    }\n  }\n"])));t.a=function(e){var t=Object(c.useApolloClient)(),n=Object(l.useState)(null),i=o()(n,2),a=i[0],r=i[1];return Object(l.useEffect)((function(){var n=!1;return null!=t&&t.query&&t.query({query:d,variables:{name:e}}).then((function(e){var t=e.error,i=e.loading,a=e.data.newsletterPage;if(!n&&!i){if(t)throw t;r(a||{})}})).catch((function(){return r({})})),function(){n=!0}}),[t,e]),a}},"0Jb7":function(e,t,n){"use strict";var i=this&&this.__makeTemplateObject||function(e,t){return Object.defineProperty?Object.defineProperty(e,"raw",{value:t}):e.raw=t,e};Object.defineProperty(t,"__esModule",{value:!0}),t.Strike=t.textContainerClass=t.visuallyHiddenClass=void 0;var a,o,r,s=n("Jqp9");t.visuallyHiddenClass=(0,s.css)(a||(a=i(["\n  clip: rect(0 0 0 0);\n  clip-path: inset(50%);\n  height: 1px;\n  overflow: hidden;\n  position: absolute;\n  white-space: nowrap;\n  width: 1px;\n"],["\n  clip: rect(0 0 0 0);\n  clip-path: inset(50%);\n  height: 1px;\n  overflow: hidden;\n  position: absolute;\n  white-space: nowrap;\n  width: 1px;\n"]))),t.textContainerClass=(0,s.css)(o||(o=i(["\n  display: inline-block;\n"],["\n  display: inline-block;\n"]))),t.Strike=(0,s.styled)("s")(r||(r=i(["\n  text-decoration: line-through;\n\n  ::before,\n  ::after {\n    clip: rect(0 0 0 0);\n    clip-path: inset(50%);\n    height: 1px;\n    overflow: hidden;\n    position: absolute;\n    white-space: nowrap;\n    width: 1px;\n  }\n  ::after {\n    content: ' (end of stricken text) ';\n  }\n\n  ::before {\n    content: ' (start stricken text) ';\n  }\n"],["\n  text-decoration: line-through;\n\n  ::before,\n  ::after {\n    clip: rect(0 0 0 0);\n    clip-path: inset(50%);\n    height: 1px;\n    overflow: hidden;\n    position: absolute;\n    white-space: nowrap;\n    width: 1px;\n  }\n  ::after {\n    content: ' (end of stricken text) ';\n  }\n\n  ::before {\n    content: ' (start stricken text) ';\n  }\n"])))},"0Jh6":function(e,t,n){"use strict";var i=this&&this.__createBinding||(Object.create?function(e,t,n,i){void 0===i&&(i=n);var a=Object.getOwnPropertyDescriptor(t,n);a&&!("get"in a?!t.__esModule:a.writable||a.configurable)||(a={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,i,a)}:function(e,t,n,i){void 0===i&&(i=n),e[i]=t[n]}),a=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&i(t,e,n);return a(t,e),t},r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var s=o(n("q1tI")),l=n("X6oL"),c=r(n("5UIh")),u=o(n("MzAO")),d=n("syiw"),p=n("HDG5"),f=n("djNW"),m=n("FY2l"),h=n("6gWn");t.default=function(e){var t,n,i,a,o,r,g,y=e.unit,v=(0,s.useState)(!1),b=v[0],_=v[1],w=(0,d.useMessageSelection)({config:{name:"dock"}}),x=(0,p.useUserState)(),k=(0,l.useTracking)(),O="/"===(0,m.getPathName)()?"homepage":"article",T=s.default.createElement("div",{className:u.mainText},s.default.createElement("span",null,(null===(t=null==y?void 0:y.content)||void 0===t?void 0:t.copy)||""),s.default.createElement("span",{className:u.boldText},(null===(n=null==y?void 0:y.content)||void 0===n?void 0:n.boldCopy)||""));if(w.loading)return null;if(!b){var C=null===(a=null===(i=null==w?void 0:w.response)||void 0===i?void 0:i.userstate())||void 0===a?void 0:a.messageSelectionMessageCaps,E=[];if(C)if((I=C).forEach((function(e){var t;"dock"===(null==e?void 0:e.unit)&&(null==e?void 0:e.campaign)===(null===(t=null==w?void 0:w.response)||void 0===t?void 0:t.campaign())&&E.push(e)})),E.length){var S=E[0];S.viewCount+=1,S.audience="",S.lastSeenOn=(new Date).toISOString();var P=I;E.length>1&&(P=I.filter((function(e){return!E.includes(e)}))).push(S),x.update({messageSelectionMessageCaps:P})}if(!E.length){var I=[];C&&(I=C),I.push({unit:"dock",campaign:null===(o=null==w?void 0:w.response)||void 0===o?void 0:o.campaign(),audience:null===(r=null==w?void 0:w.response)||void 0===r?void 0:r.audience(),lastSeenOn:(new Date).toISOString(),viewCount:1,dismissed:!1}),x.update({messageSelectionMessageCaps:I})}_(!0)}return"0_Control"===(null===(g=null==w?void 0:w.response)||void 0===g?void 0:g.audience())?null:s.default.createElement(c.default,{testId:"onsite-messaging-unit-".concat(null===h.config||void 0===h.config?void 0:h.config.name),"data-campaign":null==y?void 0:y.campaign,"data-audience":null==y?void 0:y.audience,unit:y,contentID:"GUAC_HD_UPSELL_DOCK_TEST_244",dockID:"standard",header:T,hideVerticleRuleInHeader:!1,headingClassName:u.headerContainer,onDockHeadingClick:function(){var e,t,n="https://www.nytimes.com/subscription/home-delivery";e="dock",t=n,k.trackEvent({event:"moduleInteraction",eventData:{pagetype:O,trigger:"module",type:"click"},module:{name:e,label:"GUAC_HD_UPSELL_DOCK_TEST_244",context:"standard",region:"1",element:{name:f.Action.Subscribe,url:t,label:"learn more"}}}),window.open(n,"_blank","noopener,noreferrer")},isDockDismissible:!0,isDockExpandable:!1,minimized:!0,overrideHeaderStyles:!0,ctaActionTextContainerStyle:"borderSpace"})}},"0Lib":function(e,t,n){"use strict";var i=n("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=i(n("q1tI")),o=(i(n("17x9")),n("boCj")),r=i(n("yEZI")),s=n("n+OA");t.default=function(e){var t=e.item,n=t.type,i=t.value,l=e.handleInView;switch(n){case"text":return a.default.createElement(o.InView,{onChange:function(e){return l(e,i)}},a.default.createElement(r.default,{className:s.paragraphClass,dangerouslySetInnerHTML:{__html:i}}));case"bulletedList":return a.default.createElement("ul",null,i.map((function(e){return a.default.createElement(o.InView,{key:e,as:"li",className:s.listItemClass,onChange:function(t){return l(t,e)}},a.default.createElement(r.default,{className:s.paragraphClass,dangerouslySetInnerHTML:{__html:e}}))})));default:return null}}},"0NOm":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getPreferredSectionWithLogoAndCanonicalUrl=void 0;var i=n("jVmZ"),a=n("DnBa"),o=n("ifco");t.getPreferredSectionWithLogoAndCanonicalUrl=function(e){var t=e.collections,n=e.logos,r=e.section,s=e.subsection,l=(0,o.getPreferredSection)({section:r,subsection:s}),c=(0,a.getSectionWithLogo)(l,n);return c&&t&&(c=(0,i.getSectionWithCanonicalUrl)(t,c)),c}},"0RI2":function(e,t,n){"use strict";var i=n("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=i(n("ALE8")),o=i(n("MzAb")),r=i(n("pfWQ"));t.default=function(e,t){(0,a.default)()&&(0,o.default)((function(){var n,i;null===(n=(i=(0,r.default)()).updateAdReq)||void 0===n||n.call(i,e,t)}))}},"0Rhs":function(e,t,n){"use strict";var i=n("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.summaryLanguageDirectionFn=t.smallMediaClass=t.labelTreatmentFn=t.heading1TreatmentFn=t.heading1LanguageDirectionFn=t.headerMediaClass=t.headerLanguageDirectionFn=t.bylineTimestampToneFn=t.bylineTimestampSectionFn=t.bylineTimestampLanguageDirectionFn=t.BylineTimestamp=void 0;var a=n("Jqp9"),o=i(n("wXC7")),r=n("3sMT");t.BylineTimestamp=(0,a.styled)("div",{target:"eakwutd0"})("width:100%;"),t.headerMediaClass=(0,a.css)("margin-top:20px;margin-bottom:32px;",o.default.breakpoint.medium,"{margin-top:25px;}"),t.smallMediaClass=(0,a.css)("margin-bottom:37px;padding-top:15px;border-top:1px solid ",r.color.stroke.quaternary,";padding-bottom:0;",o.default.breakpoint.mediumLarge,"{margin-bottom:43px;}"),t.headerLanguageDirectionFn=(0,a.themeFn)("languageDirection",{rightToLeft:(0,a.css)("text-align:right;direction:rtl;unicode-bidi:isolate;")}),t.heading1TreatmentFn=(0,a.themeFn)("treatment",{sponsoredSensitive:(0,a.css)("color:",r.color.signal.editorial,";")}),t.heading1LanguageDirectionFn=(0,a.themeFn)("languageDirection",{rightToLeft:(0,a.css)("text-align:right;direction:rtl;unicode-bidi:isolate;")}),t.labelTreatmentFn=(0,a.themeFn)("treatment",{none:(0,a.css)("color:",r.color.content.primary,";font-weight:",o.default.font.weight.bold,";line-height:",o.default.font.size(12),";"),feature:(0,a.css)("color:",r.color.content.primary,";font-weight:",o.default.font.weight.bold,";line-height:",o.default.font.size(12),";"),magazine:(0,a.css)("color:",r.color.content.primary,";font-weight:",o.default.font.weight.bold,";line-height:",o.default.font.size(12),";"),opinion:(0,a.css)("color:",r.color.content.primary,";font-weight:",o.default.font.weight.bold,";line-height:",o.default.font.size(12),";"),sponsored:(0,a.css)("font-weight:",o.default.font.weight.bold,";line-height:",o.default.font.size(12),";"),"t-magazine":(0,a.css)("color:",r.color.content.primary,";font-weight:",o.default.font.weight.book,";line-height:",o.default.font.size(12),";")}),t.bylineTimestampToneFn=(0,a.themeFn)("tone",{feature:function(e){return(0,a.css)(e.theme.breakpointMap.medium,"{","rightToLeft"===e.theme.languageDirection?"":"text-align: left;",";}")}}),t.bylineTimestampSectionFn=(0,a.themeFn)("section",{"t-magazine":function(e){return(0,a.css)(e.theme.breakpointMap.medium,"{text-align:left;}")}}),t.bylineTimestampLanguageDirectionFn=(0,a.themeFn)("languageDirection",{rightToLeft:(0,a.css)("direction:ltr;unicode-bidi:isolate;")}),t.summaryLanguageDirectionFn=(0,a.themeFn)("languageDirection",{rightToLeft:(0,a.css)("direction:rtl;text-align:right;unicode-bidi:isolate;")})},"0bZC":function(e,t,n){"use strict";var i=n("TqRt"),a=n("cDf5");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=i(n("q1tI")),r=(i(n("17x9")),n("7FfI")),s=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=a(e)&&"function"!=typeof e)return{default:e};var n=l(t);if(n&&n.has(e))return n.get(e);var i={__proto__:null},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var r in e)if("default"!==r&&{}.hasOwnProperty.call(e,r)){var s=o?Object.getOwnPropertyDescriptor(e,r):null;s&&(s.get||s.set)?Object.defineProperty(i,r,s):i[r]=e[r]}return i.default=e,n&&n.set(e,i),i}(n("xXO4"));function l(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(l=function(e){return e?n:t})(e)}var c=function(e){var t=e.episodeTitle,n=e.hostedBy,i=e.summary,a=e.pubDate;return o.default.createElement("div",{className:s.episodeMetadataClass},o.default.createElement("p",{className:s.kickerClass},"transcript"),t&&o.default.createElement("h2",{className:s.episodeTitleClass},t),n&&o.default.createElement("h3",{className:s.hostedByClass},n),i&&o.default.createElement("h4",{className:s.episodeSummaryClass},i),a&&o.default.createElement("time",{dateTime:a,className:s.episodePubdateClass},(0,r.formatDate)(new Date(a).toISOString(),"dddd, MMMM Do, YYYY")))};c.displayName="EpisodeMetadata",c.defaultProps={episodeTitle:"",hostedBy:"",summary:"",pubDate:""};t.default=c},"0e36":function(e,t,n){"use strict";var i=n("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=i(n("lSNA")),o=i(n("q1tI")),r=(i(n("17x9")),n("Jqp9")),s=i(n("Pmun")),l=n("To3l"),c=function(e){var t=e.isLive,n=e.isNew,i=e.children;return o.default.createElement(s.default,{className:(0,r.cx)(l.bulletClass,(0,a.default)((0,a.default)({},l.liveClass,t),l.newClass,n))},i)};c.displayName="BulletBriefingListItem",c.defaultProps={children:null,isLive:!1,isNew:!1};t.default=c},"0gvE":function(e,t,n){"use strict";var i=n("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.buttonWrapperClass=t.attributeWrapperClass=t.askWrapperClass=void 0;var a=n("Jqp9"),o=i(n("wXC7")),r=i(n("42vy")),s=i(n("yEZI"));t.askWrapperClass=(0,a.css)("font-family:",o.default.font.serifBase,";text-align:center;",r.default,"{font-family:inherit;font-size:",o.default.font.size(17),";font-weight:",o.default.font.weight.bold,";line-height:",o.default.font.size(24),";}",s.default,"{font-family:inherit;font-size:",o.default.font.size(15),";font-style:italic;font-weight:",o.default.font.weight.book,";line-height:",o.default.font.size(22),";}"),t.attributeWrapperClass=(0,a.css)("background-color:",o.default.color.gray100,";border:solid 1px ",o.default.color.gray70,";border-radius:3px;padding:20px;a{cursor:pointer;}p{font-size:",o.default.font.size(14),";}"),t.buttonWrapperClass=(0,a.css)("text-align:center;")},"0oBV":function(e,t,n){"use strict";var i=n("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=i(n("QILm")),o=i(n("lwsE")),r=i(n("W8MJ")),s=i(n("a1gu")),l=i(n("Nsbk")),c=i(n("7W2i")),u=i(n("q1tI")),d=(i(n("17x9")),i(n("d9qb"))),p=["article"],f=["article"],m=["article"];function h(e,t,n){return t=(0,l.default)(t),(0,s.default)(e,function(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return function(){return!!e}()}()?Reflect.construct(t,n||[],(0,l.default)(e).constructor):t.apply(e,n))}t.default=function(e){var t;return(t=function(t){function n(){return(0,o.default)(this,n),h(this,n,arguments)}return(0,c.default)(n,t),(0,r.default)(n,[{key:"shouldComponentUpdate",value:function(e,t){if(this.props.isInEditor){var n=this.props,i=(n.article,(0,a.default)(n,p)),o=(e.article,(0,a.default)(e,f));return!(0,d.default)(i,o)||!(0,d.default)(this.state,t)}return!0}},{key:"render",value:function(){var t=this.props,n=(t.article,(0,a.default)(t,m));return u.default.createElement(e,n)}}])}(u.default.Component)).defaultProps={isInEditor:!1,article:null},t}},"0p19":function(e,t,n){"use strict";var i=n("TqRt"),a=n("cDf5");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=i(n("J4zp")),r=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=a(e)&&"function"!=typeof e)return{default:e};var n=m(t);if(n&&n.has(e))return n.get(e);var i={__proto__:null},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var r in e)if("default"!==r&&{}.hasOwnProperty.call(e,r)){var s=o?Object.getOwnPropertyDescriptor(e,r):null;s&&(s.get||s.set)?Object.defineProperty(i,r,s):i[r]=e[r]}return i.default=e,n&&n.set(e,i),i}(n("q1tI")),s=n("boCj"),l=(i(n("17x9")),i(n("kvrv"))),c=i(n("RxXP")),u=i(n("M8e9")),d=n("6l3V"),p=n("7zGq"),f=i(n("VHwt"));function m(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(m=function(e){return e?n:t})(e)}function h(e){var t=e.items,n=e.parentUrl,i=e.isPeeking,a=e.trackLinkInteraction,m=e.internalLinkTrackingParams,h=e.trackImpressionEvent,g=(0,r.useState)(0),y=(0,o.default)(g,2),v=y[0],b=y[1],_=(0,r.useState)(new Set),w=(0,o.default)(_,2),x=w[0],k=w[1],O=(0,r.useRef)(null),T=t.length,C=function(e){e&&!x.has(v)&&h&&(h({event:"impression",module:{label:n},card:{index:v+1},block:{length:T}}),k((function(e){return e.add(v)})))};return r.default.createElement(r.default.Fragment,null,r.default.createElement(l.default,{ref:O,id:"storyline-context-container",a11yLabel:"Card ".concat(v+1," of ").concat(T),onSwipe:b,scrolledIndex:v,isPeeking:i},t.map((function(e){return r.default.createElement(s.InView,{onChange:C,threshold:1,key:e.subtitle},r.default.createElement(f.default,{item:e,trackLinkInteraction:a,internalLinkTrackingParams:m}))}))),r.default.createElement("div",{className:d.swiperNavClass},r.default.createElement(c.default,{index:v,length:T}),r.default.createElement(u.default,{ariaControls:"storyline-context-container",index:v,length:T,handleNavLeft:function(){return(0,p.handleNavLeft)(O.current)},handleNavRight:function(){return(0,p.handleNavRight)(O.current)}})))}h.defaultProps={trackLinkInteraction:function(){},internalLinkTrackingParams:null,trackImpressionEvent:function(){}};t.default=h},"0ryP":function(e,t,n){"use strict";var i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.config=void 0;var a=i(n("U4Wo")),o=n("djNW");t.config={name:"b2bDock",onlyTrackWhenVisible:!1,fallback:null,campaigns:{B2B_CUNY_DOCK:{component:a.default,content:function(e){return{subInfo:e.subInfo,clickThroughURI:"https://www.nytimes.com/activate-access/digitalpass",timesToShowExpanded:1,daysBeforeExpandedViewsReset:2,headLine:"Thanks for reading The Times",header:"CUNY students, New York Times subscription.",subHeader:"Know more with Times journalism and archives, courtesy of your school.",cta:"ACTIVATE NOW",backgroundColor:"#1d3a83",logoWhite:!0,buttonColor:"",textColor:"#F8F8F8",minimized:!1}},tracking:{module:{name:"dock",context:"expanded",label:"B2B_CUNY_DOCK",element:{name:o.Action.LogInOrRegister}}}},B2B_ASU_DOCK:{component:a.default,content:function(e){return{subInfo:e.subInfo,clickThroughURI:"https://nytimesineducation.com/access-nyt/arizona-state-university-main-campus-tempe-az/",timesToShowExpanded:1,daysBeforeExpandedViewsReset:2,headLine:"Thanks for reading The Times",header:"ASU students and faculty: Activate your free Times subscription.",subHeader:"Know more with Times journalism and archives, courtesy of the ASU Library.",cta:"ACTIVATE NOW",backgroundColor:"#812740",logoWhite:!0,textColor:"#F8F8F8",minimized:!1}},tracking:{module:{name:"dock",context:"expanded",label:"B2B_ASU_DOCK",element:{name:o.Action.LogInOrRegister}}}},B2B_GENERAL_DOCK:{component:a.default,audiences:{b2b_digitalpass:{content:function(e){return{subInfo:e.subInfo,clickThroughURI:"https://www.nytimes.com/activate-access/digitalpass",timesToShowExpanded:1,daysBeforeExpandedViewsReset:2,headLine:"Thanks for reading The Times",header:"Unlock your complimentary access.",subHeader:"Activate now for unlimited articles courtesy of your organization.",subHeader2:"No payment needed.",cta:"ACTIVATE NOW",logoWhite:!1,buttonColor:"#ff463c",minimized:!1}},tracking:{module:{name:"dock",context:"expanded",label:"B2B_GENERAL_DOCK",element:{name:o.Action.LogInOrRegister}}}},b2b_ippass:{content:function(e){return{subInfo:e.subInfo,clickThroughURI:"https://www.nytimes.com/activate-access/ippass",timesToShowExpanded:1,daysBeforeExpandedViewsReset:2,headLine:"Thanks for reading The Times",header:"Unlock your complimentary access.",subHeader:"Activate now for unlimited articles courtesy of your organization.",subHeader2:"No payment needed.",cta:"ACTIVATE NOW",logoWhite:!1,buttonColor:"#ff463c",minimized:!1}},tracking:{module:{name:"dock",context:"expanded",label:"b2b_ippass",element:{name:o.Action.LogInOrRegister}}}},b2b_accesspass:{content:function(e){return{subInfo:e.subInfo,clickThroughURI:"http://www.accessnyt.com",timesToShowExpanded:1,daysBeforeExpandedViewsReset:2,headLine:"Thanks for reading The Times",header:"Unlock your complimentary access.",subHeader:"Activate now for unlimited articles courtesy of your school.",subHeader2:"No payment needed.",cta:"ACTIVATE NOW",logoWhite:!1,buttonColor:"#ff463c",minimized:!1}},tracking:{module:{name:"dock",context:"expanded",label:"b2b_accesspass",element:{name:o.Action.LogInOrRegister}}}},b2b_site_license_login_required:{content:function(e){return{subInfo:e.subInfo,clickThroughURI:"https://myaccount.nytimes.com/auth/login",timesToShowExpanded:1,daysBeforeExpandedViewsReset:2,headLine:"Thanks for reading The Times",header:"Unlock your complimentary access.",subHeader:"Register now for unlimited articles courtesy of your organization.",subHeader2:"No payment needed.",cta:"REGISTER NOW",logoWhite:!1,buttonColor:"#ff463c",minimized:!1}},tracking:{module:{name:"dock",context:"expanded",label:"b2b_site_license_login_required",element:{name:o.Action.LogInOrRegister}}}}}}}}},"1/zF":function(e,t,n){"use strict";n.d(t,"d",(function(){return u})),n.d(t,"a",(function(){return d})),n.d(t,"c",(function(){return p}));var i=n("Jqp9"),a=n("wXC7"),o=n.n(a),r=n("nxVm"),s=n.n(r),l=n("jOYC"),c=Object(i.css)("margin:30px ",l.b.grid.pageMargin," ",o.a.font.size(12),";",o.a.breakpoint.medium,"{margin-top:35px;margin-left:auto;margin-right:auto;margin-bottom:",o.a.font.size(20),";}",s.a,";"),u=Object(i.css)("text-align:right;direction:rtl;unicode-bidi:isolate;"),d=Object(i.css)("position:relative;top:-75px;"),p=Object(i.css)("font-weight:",o.a.font.weight.extraBold,";font-family:",o.a.font.franklinBase,";border-top-style:solid;border-top-width:6px;text-align:left;font-size:1.45rem;line-height:1.2;padding:12px 0 0;",o.a.breakpoint.medium,"{margin-bottom:",o.a.font.size(18),";font-size:1.45rem;line-height:1.2;}");t.b=c},"11hc":function(e,t,n){"use strict";var i=n("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=i(n("lSNA")),o=i(n("QILm")),r=i(n("lwsE")),s=i(n("W8MJ")),l=i(n("a1gu")),c=i(n("Nsbk")),u=i(n("7W2i")),d=n("q1tI"),p=(i(n("17x9")),n("YFU0")),f=["children"];function m(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function h(e,t,n){return t=(0,c.default)(t),(0,l.default)(e,function(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return function(){return!!e}()}()?Reflect.construct(t,n||[],(0,c.default)(e).constructor):t.apply(e,n))}var g=t.default=function(e){function t(){var e;(0,r.default)(this,t);for(var n=arguments.length,i=new Array(n),a=0;a<n;a++)i[a]=arguments[a];return(e=h(this,t,[].concat(i))).isServer=!p.canUseDOM,e.state={apiReady:!e.isServer&&!!window.__VHS__},e.getVHS=function(){return window.__VHS__},e}return(0,u.default)(t,e),(0,s.default)(t,[{key:"componentDidMount",value:function(){var e=this;this.isServer||this.state.apiReady||(0,p.loadApi)((function(){e.setState({apiReady:!0})}))}},{key:"render",value:function(){var e=this.props,t=e.children,n=(0,o.default)(e,f);return this.state.apiReady&&"function"==typeof t?t(function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?m(Object(n),!0).forEach((function(t){(0,a.default)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):m(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({VHS:this.getVHS()},n)):null}}])}(d.Component);g.defaultProps={children:void 0},g.displayName="DependencyLoader"},"11pz":function(e,t,n){"use strict";var i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var a=i(n("q1tI")),o=n("iolA"),r=n("tHll"),s=n("0ryP");function l(){var e=(0,r.useUnit)(s.config).unit;return(null==e?void 0:e.canShow)&&(null==e?void 0:e.component)?a.default.createElement(e.component,{unit:e}):null}l.propTypes={},t.default=(0,o.withErrorBoundary)(l)},"11u6":function(e,t,n){"use strict";var i=n("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.outerCaretClass=t.labelClass=t.innerCaretClass=t.dialogWrapperClass=t.closeButtonClass=t.childrenWrapperClass=t.caretRightClass=void 0;var a=n("Jqp9"),o=i(n("wXC7")),r=n("3sMT");t.dialogWrapperClass=function(e){var t=e.x,n=e.y;return(0,a.css)("z-index:180;left:",t,"px;top:",n,"px;padding:32px;overflow:unset;box-shadow:rgb(0 0 0 / 15%) 0px 1px 3px;border-radius:4px;border:solid 1px rgb(204,204,204);position:absolute;margin:0 0 0 0;width:230px;",o.default.breakpoint.extraSmall,"{width:250px;}&::backdrop{background:transparent;}")},t.innerCaretClass=(0,a.css)("border:13px inset transparent;display:inline-block;height:0;position:absolute;width:0;border-bottom:14px solid white;bottom:-15px;left:-13px;"),t.outerCaretClass=(0,a.css)("border:12px inset transparent;display:inline-block;height:0;position:absolute;width:0;border-bottom:12px solid rgb(204,204,204);left:11px;top:-24px;"),t.caretRightClass=(0,a.css)("left:unset;right:12px;"),t.closeButtonClass=function(e){var t=e.noLabel,n=void 0!==t&&t;return(0,a.css)("height:16px;width:16px;float:right;background:transparent;position:relative;top:",n?"-12":"-5","px;right:",n?"-14":"-3","px;")},t.labelClass=(0,a.css)("font-family:",o.default.font.franklinBase,";font-size:",o.default.font.size(11),";font-weight:",o.default.font.weight.bold,";line-height:125%;letter-spacing:0.1em;text-transform:uppercase;color:",r.color.content.secondary,";margin-bottom:4px;"),t.childrenWrapperClass=function(e){var t=e.noLabel,n=void 0!==t&&t;return(0,a.css)("font-family:",o.default.font.franklinBase,";-webkit-appearance:none;background:none;text-align:unset;display:block;p{font-size:",o.default.font.size(16),";line-height:125%;color:",r.color.content.secondary,";}p:first-child{font-size:",o.default.font.size(18),";font-weight:",o.default.font.weight.bold,";line-height:130%;margin-bottom:4px;max-width:",n?"235px":"unset",";color:",r.color.content.primary,";}")}},"139F":function(e,t,n){"use strict";var i=n("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=i(n("q1tI")),o=(i(n("17x9")),i(n("Vcud"))),r=n("SbcB"),s=function(e){var t=e.dangerouslySetInnerHTML,n=e.children;return a.default.createElement(r.Credit,null,a.default.createElement(o.default,null,"Credit..."),t?a.default.createElement("span",{dangerouslySetInnerHTML:t}):a.default.createElement("span",null,n))};s.displayName="Credit",s.defaultProps={dangerouslySetInnerHTML:null,children:null};t.default=s},"1a3z":function(e,t,n){"use strict";n.d(t,"c",(function(){return O})),n.d(t,"a",(function(){return T}));var i,a=n("gcR/"),o=n.n(a),r=n("J4zp"),s=n.n(r),l=n("q1tI"),c=n.n(l),u=n("X6oL"),d=n("boCj"),p=n("fZdH"),f=n("ZKN5"),m=n("Jqp9"),h=n("wXC7"),g=n.n(h),y=Object(m.css)("width:calc(100% - 40px);max-width:600px;margin:0 auto;padding:20px;box-sizing:border-box;border:2px solid ",g.a.color.gray10,";#story &{margin-top:1.25rem;margin-bottom:1.5rem;",g.a.breakpoint.medium,"{width:unset;}}",g.a.breakpoint.medium,"{padding:24px;}"),v=Object(m.css)("font-family:",g.a.font.cheltenham,";font-size:1.375rem;font-weight:",g.a.font.weight.bold,";line-height:1.3;"),b=Object(m.css)("font-family:",g.a.font.cheltenham,";font-size:1.375rem;line-height:1.3;&:not(:last-child){margin-bottom:0.875rem;}"),_=Object(m.css)("color:",g.a.color.linkColor,";text-decoration:underline;text-decoration-thickness:1px;text-underline-offset:2px;:hover{text-decoration:none;}"),w=Object(m.css)("font-family:",g.a.font.cheltenham,";font-size:1.375rem;line-height:1.3;"),x=Object(m.css)("font-style:italic;"),k=n("IkM5"),O={name:"styln_ed_sub_messaging_0822",middleGenericVariant:{name:"1_middle_generic",campaignCode:"8HXFU"},middleSpecificVariant:{name:"2_middle_specific",campaignCode:"8WJUJ"},bottomGenericVariant:{name:"3_bottom_generic",campaignCode:"8F8U8"},bottomSpecificVariant:{name:"4_bottom_specific",campaignCode:"8RJ8W"}};function T(e){try{var t,n,i,a,o=["opinion","briefing","obituaries"],r=["Deaths (Obituaries)","Deaths (Fatalities)","Sex Crimes","Suicides and Suicide Attempts","Murders, Attempted Murders and Homicides","Sexual Harassment","Capital Punishment"],s=null==e||null===(t=e.timesTags)||void 0===t?void 0:t.some((function(e){return r.includes(null==e?void 0:e.displayName)})),l=o.includes(null==e||null===(n=e.section)||void 0===n?void 0:n.name)||o.includes(null==e||null===(i=e.subsection)||void 0===i?void 0:i.name),c="English"!==(null==e||null===(a=e.language)||void 0===a?void 0:a.name);return!s&&!l&&!c}catch(e){return!1}}function C(e){var t,n=e.asset,a=Object(u.useTracking)().trackEvent,r=Object(p.a)(),l=null==r||null===(t=r[O.name])||void 0===t?void 0:t.variant,f=null!=l&&l.includes("generic")?"generic":function(e){return"Foreign"===(null==e?void 0:e.desk)?"specific-international":"Well"===(null==e?void 0:e.desk)?"specific-well":"specific"}(n),m=null!=l&&l.includes("generic")?l:"".concat(l,"_").concat(f),h="article"===(null==n?void 0:n.__typename)?"article":"liveblog",g=Object(d.useInView)({onChange:function(e){e&&a({event:"impression",module:{name:"inlineMessage",context:"dz-5",label:m}})},triggerOnce:!0}),T=s()(g,1)[0];if(!l)return null;var C,E,S=k[f];return c.a.createElement("div",{ref:T,role:"complementary","aria-labelledby":"editorial-sub-messaging-header",className:y},o()("h3",{id:"editorial-sub-messaging-header",className:v},void 0,S.title),o()("p",{className:b},void 0,S.body," ",o()("a",{href:(C=Object.keys(O).filter((function(e){return e.includes("Variant")})).find((function(e){return O[e].name===l})),E=(O[C]||{}).campaignCode,"https://www.nytimes.com/subscribe?campaignId=".concat(E,"&EXIT_URI=").concat(encodeURIComponent(window.location))),onClick:function(e){e.preventDefault();var t=e.target.href;a({event:"moduleInteraction",eventData:{type:"click",trigger:"module",pagetype:h},module:{name:"inlineMessage",context:"dz-5",label:m,element:{name:"goto-subscribe"}},eventCallback:function(){window.location.href=t}})},className:_},void 0,S.cta)),S.signer&&o()("p",{className:w},void 0,i||(i=o()("span",{"aria-hidden":!0},void 0,"— ")),o()("span",{className:x},void 0,S.signer)))}C.displayName="EditorialSubMessaging";t.b=Object(f.a)(C)},"1cNr":function(e,t,n){"use strict";var i=n("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=i(n("q1tI")),o=i(n("ARn7")),r=i(n("aYbO"));t.default=function(e){return a.default.createElement(o.default,e,a.default.createElement(r.default,e))}},"1flQ":function(e,t,n){"use strict";var i=this&&this.__createBinding||(Object.create?function(e,t,n,i){void 0===i&&(i=n);var a=Object.getOwnPropertyDescriptor(t,n);a&&!("get"in a?!t.__esModule:a.writable||a.configurable)||(a={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,i,a)}:function(e,t,n,i){void 0===i&&(i=n),e[i]=t[n]}),a=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&i(t,e,n);return a(t,e),t},r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var s=o(n("q1tI")),l=n("Jqp9"),c=r(n("5UIh")),u=n("syiw"),d=n("HDG5"),p=o(n("5HKt")),f=n("etPP"),m=n("6gWn");t.default=function(e){var t,n,i,a,o,r,h,g,y,v,b=e.unit,_=(0,l.useTheme)().assetUrl,w=(0,s.useState)(!1),x=w[0],k=w[1],O=(0,u.useMessageSelection)({config:{name:"dock"}}),T=(0,d.useUserState)(),C=s.default.createElement("p",{className:p.headerTextClass},s.default.createElement("strong",null,"Ends soon:")," ",s.default.createElement("br",{className:p.giftingDockShowMobile}),s.default.createElement("span",{className:p.giftingDockShowDesktop},"Gift subscriptions to The Times are ",null===(t=b.content)||void 0===t?void 0:t.offer," off."),s.default.createElement("span",{className:p.giftingDockShowMobile},"Times gift subscriptions. ",null===(n=b.content)||void 0===n?void 0:n.offer," off.")),E=s.default.createElement("div",{className:p.mainContent},s.default.createElement("div",{className:p.logosDockDesktop},s.default.createElement("img",{className:p.logoClass,alt:"The New York Times",src:"".concat(_,"/NYTimes-logo.svg")})),s.default.createElement("div",{className:p.contentDockDesktop},s.default.createElement("div",{className:p.wrapRedBoxClass},s.default.createElement("img",{className:p.redBoxClass,alt:"NYT Red Box Gift",src:"".concat(_,"/NYTBox-RED.png")})),s.default.createElement("div",{className:p.wrapHeadline},s.default.createElement("h2",{className:p.headlineGiftingBF},"Save today on the gift ",s.default.createElement("br",{className:p.giftingDockShowMobile}),"they’ll enjoy all year."),s.default.createElement("div",{className:p.giftingDockShowDesktop},s.default.createElement("p",{className:p.subHeadlineGiftingBF},s.default.createElement("strong",{className:p.giftingDockShowDesktop768},"Ends soon.")," New York Times gift subscriptions. ",null===(i=b.content)||void 0===i?void 0:i.offer," off. ",s.default.createElement("br",null)," ",s.default.createElement("strong",{className:p.giftingDockShowMobile768},"Ends soon.")," ")),s.default.createElement("div",{className:p.giftingDockShowMobile},s.default.createElement("p",{className:p.subHeadlineGiftingBF},s.default.createElement("strong",null,"Ends soon.")," ",null===(a=b.content)||void 0===a?void 0:a.offer," off."," ")),s.default.createElement("div",{className:p.giftingDockShowMobile},s.default.createElement(f.Button,{href:null===(o=null==b?void 0:b.content)||void 0===o?void 0:o.url,className:p.giftingButtonClass,testId:"give-the-times-mob",component:"a"},"GIVE THE TIMES"))),s.default.createElement("div",{className:p.wrapRedBoxClassMobile},s.default.createElement("img",{className:p.redBoxClass,alt:"NYT Red Box Gift",src:"".concat(_,"/NYTBox-RED.png")}))),s.default.createElement("div",{className:p.logosDockDesktop},s.default.createElement(f.Button,{href:null===(r=null==b?void 0:b.content)||void 0===r?void 0:r.url,className:p.giftingButtonClass,testId:"give-the-times",component:"a"},"GIVE THE TIMES")));if(O.loading)return null;if(!x){var S=null===(g=null===(h=null==O?void 0:O.response)||void 0===h?void 0:h.userstate())||void 0===g?void 0:g.messageSelectionMessageCaps,P=null;if(S)if((j=S).forEach((function(e){var t,n;"dock"===(null==e?void 0:e.unit)&&(null==e?void 0:e.campaign)===(null===(t=null==O?void 0:O.response)||void 0===t?void 0:t.campaign())&&(null==e?void 0:e.audience)===(null===(n=null==O?void 0:O.response)||void 0===n?void 0:n.audience())&&(P=e)})),null!==P){var I=P,M=new Date(null==I?void 0:I.lastSeenOn).getTime(),A=(new Date).getTime();Math.abs(Math.round(A-M)/6e4)>1440?(I.viewCount=1,I.lastSeenOn=(new Date).toISOString()):I.viewCount+=1,T.update({messageSelectionMessageCaps:j})}if(!P){var j=[];S&&(j=S),j.push({unit:"dock",campaign:null===(y=null==O?void 0:O.response)||void 0===y?void 0:y.campaign(),audience:null===(v=null==O?void 0:O.response)||void 0===v?void 0:v.audience(),lastSeenOn:(new Date).toISOString(),viewCount:1,dismissed:!1}),T.update({messageSelectionMessageCaps:j})}k(!0)}return s.default.createElement(c.default,{testId:"onsite-messaging-unit-".concat(null===m.config||void 0===m.config?void 0:m.config.name),"data-campaign":null==b?void 0:b.campaign,"data-audience":null==b?void 0:b.audience,unit:b,contentID:"MWD_HOLIDAY_GIFTING_BLACK_FRIDAY_SALE_LAUNCH_2311",dockID:"Holiday Gifting Black Friday - 2311",header:C,card:E,isDockDismissible:!1,minimized:!1})}},"1gPk":function(e,t,n){"use strict";var i=n("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.superscriptClass=t.subscriptClass=t.preClass=t.linkClass=t.italicClass=t.dropcapClass=t.boldClass=void 0;var a=n("Jqp9"),o=i(n("wXC7"));t.preClass=(0,a.css)("white-space:pre-wrap;"),t.linkClass=(0,a.css)("color:",o.default.color.blue20,";text-decoration:underline;&:hover{color:",o.default.color.blue30,";}&:visited{color:",o.default.color.blue20,";}"),t.italicClass=(0,a.css)("font-style:italic;.bold{font-weight:",o.default.font.weight.bold,";font-style:italic;}"),t.boldClass=(0,a.css)("font-weight:",o.default.font.weight.bold,";.italic{font-weight:",o.default.font.weight.bold,";font-style:italic;}"),t.dropcapClass=(0,a.css)("float:left;width:auto;margin:23px 40px 20px 0;font-size:",o.default.font.size(66),";font-family:",o.default.font.magslab,",",o.default.font.magazineSansBase,";line-height:0.5;color:",o.default.color.black,";"),t.superscriptClass=(0,a.css)("vertical-align:super;font-size:smaller;line-height:0;"),t.subscriptClass=(0,a.css)("vertical-align:sub;font-size:smaller;line-height:0;")},"1jzN":function(e,t,n){"use strict";var i=n("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.default=o;var a=i(n("q1tI"));i(n("17x9"));function o(e){return a.default.createElement("svg",{id:"election2020brand",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 100 25",width:"80",height:"20","aria-label":"Election 2024",className:e.className},a.default.createElement("rect",{className:"cls-2",width:"25",height:"25",fill:"#f4564a"}),a.default.createElement("path",{className:"cls-1",d:"m17.5,19.4H7.4v-2c.8-.8,1.7-1.5,2.6-2.2.7-.6,1.3-1.1,1.9-1.7,1.3-1.2,1.7-2.1,1.7-3.1,0-.8-.4-1.5-1.3-1.5-.8,0-1.6.6-2,2l-3-.9c.9-2.8,2.9-3.8,5.2-3.8,2.6,0,4.8,1.2,4.8,4.1,0,2.7-2.5,4.6-4.6,6.1h4.7v3h.1Z",fill:"#fff"}),a.default.createElement("rect",{className:"cls-3",x:"25",width:"25",height:"25",fill:"#2b8ad8"}),a.default.createElement("path",{className:"cls-1",d:"m37.5,19.6c-3,0-5.3-2.4-5.3-6.7,0-3.9,1.9-6.7,5.3-6.7s5.3,2.9,5.3,6.7c0,4.1-2.1,6.7-5.3,6.7Zm0-10.9c-1.5,0-1.7,1.5-1.7,4.2,0,3,.3,4.1,1.7,4.1s1.7-1.1,1.7-4.1c0-2.7-.2-4.2-1.7-4.2Z",fill:"#fff"}),a.default.createElement("rect",{className:"cls-2",x:"50",width:"25",height:"25",fill:"#f4564a"}),a.default.createElement("rect",{className:"cls-3",x:"75",width:"25",height:"25",fill:"#2b8ad8"}),a.default.createElement("path",{className:"cls-1",d:"m17.5,19.4H7.4v-2c.8-.8,1.7-1.5,2.6-2.2.7-.6,1.3-1.1,1.9-1.7,1.3-1.2,1.7-2.1,1.7-3.1,0-.8-.4-1.5-1.3-1.5-.8,0-1.6.6-2,2l-3-.9c.9-2.8,2.9-3.8,5.2-3.8,2.6,0,4.8,1.2,4.8,4.1,0,2.7-2.5,4.6-4.6,6.1h4.7v3h.1Z",fill:"#fff"}),a.default.createElement("path",{className:"cls-1",d:"m67.5,19.4h-10.1v-2c.8-.8,1.7-1.5,2.6-2.2.7-.6,1.3-1.1,1.9-1.7,1.3-1.2,1.7-2.1,1.7-3.1,0-.8-.4-1.5-1.3-1.5-.8,0-1.6.6-2,2l-3-.9c.9-2.8,2.9-3.8,5.2-3.8,2.6,0,4.8,1.2,4.8,4.1,0,2.7-2.5,4.6-4.6,6.1h4.7v3h.1Z",fill:"#fff"}),a.default.createElement("path",{className:"cls-1",d:"m92.68344,16.625h-1.94824v2.79688h-3.50977v-2.79688h-5.3623v-2.5459l5.6709-7.65723h3.20117v7.6377h1.94824v2.56543Zm-5.34277-2.56543v-3.87646l-2.87402,3.87646h2.87402Z",fill:"#fff"}))}o.displayName="ElectionsLogo",o.defaultProps={className:void 0}},"1rl3":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.shouldUseHeaderV2Position=t.isVerticalOldPosition=t.isMobileTop=t.isMobileLeft=t.isMobileCenterCenter=t.isMobileCenter=t.isMobileBottom=t.isLegacyDesktopGradientPosition=t.isHorizontalOldPosition=t.isDesktopTop=t.isDesktopLeft=t.isDesktopCenterCenter=t.isDesktopCenter=t.isDesktopBottom=t.isCenter=t.VI_NAV_BAR_HEIGHT=t.STORYLINE_MENU_HEIGHT=t.SCHEMA_RELEASE_DATE=t.MOBILE_TOP_POSITIONS=t.MOBILE_TEXT_POSITIONS=t.MOBILE_OLD_POSITIONS=t.MOBILE_LEFT_POSITIONS=t.MOBILE_CENTER_POSITIONS=t.MOBILE_BOTTOM_POSITIONS=t.LEGACY_GRADIENT_POSITIONS=t.LEGACY_DESKTOP_GRADIENT_POSITIONS=t.HYBRID_NAV_BAR_HEIGHT=t.DESKTOP_TOP_POSITIONS=t.DESKTOP_TEXT_POSITIONS=t.DESKTOP_LEFT_POSITIONS=t.DESKTOP_HORIZONTAL_OLD_POSITIONS=t.DESKTOP_CENTER_POSITIONS=t.DESKTOP_BOTTOM_POSITIONS=void 0;var i=t.SCHEMA_RELEASE_DATE=new Date("2023-07-27T10:00:00.000Z"),a=(t.HYBRID_NAV_BAR_HEIGHT="126px",t.VI_NAV_BAR_HEIGHT="82px",t.STORYLINE_MENU_HEIGHT="56px",t.DESKTOP_TEXT_POSITIONS=["DESKTOP_BOTTOM_LEFT","DESKTOP_BOTTOM_CENTER","DESKTOP_CENTER_CENTER","DESKTOP_TOP_LEFT","DESKTOP_TOP_CENTER"],t.MOBILE_TEXT_POSITIONS=["MOBILE_BELOW_LEDE","MOBILE_BOTTOM_LEFT","MOBILE_TOP_LEFT","MOBILE_BOTTOM_CENTER","MOBILE_TOP_CENTER","MOBILE_CENTER_CENTER"],t.DESKTOP_CENTER_POSITIONS=new Set(["DESKTOP_BOTTOM_CENTER","DESKTOP_CENTER_CENTER","DESKTOP_TOP_CENTER"])),o=t.MOBILE_CENTER_POSITIONS=new Set(["MOBILE_BOTTOM_CENTER","MOBILE_TOP_CENTER","MOBILE_CENTER_CENTER"]),r=t.DESKTOP_LEFT_POSITIONS=new Set(["DESKTOP_BOTTOM_LEFT","DESKTOP_TOP_LEFT"]),s=t.MOBILE_LEFT_POSITIONS=new Set(["MOBILE_BELOW_LEDE","MOBILE_BOTTOM_LEFT","MOBILE_TOP_LEFT"]),l=t.DESKTOP_BOTTOM_POSITIONS=new Set(["DESKTOP_BOTTOM_LEFT","DESKTOP_BOTTOM_CENTER"]),c=t.MOBILE_BOTTOM_POSITIONS=new Set(["MOBILE_BOTTOM_LEFT","MOBILE_BOTTOM_CENTER"]),u=t.DESKTOP_HORIZONTAL_OLD_POSITIONS=new Set(["DESKTOP_BOTTOM_LEFT","DESKTOP_BOTTOM_CENTER"]),d=t.MOBILE_OLD_POSITIONS=new Set(["MOBILE_BELOW_LEDE","MOBILE_BOTTOM_LEFT"]),p=t.DESKTOP_TOP_POSITIONS=new Set(["DESKTOP_TOP_LEFT","DESKTOP_TOP_CENTER"]),f=t.MOBILE_TOP_POSITIONS=new Set(["MOBILE_TOP_LEFT","MOBILE_TOP_CENTER"]),m=t.LEGACY_GRADIENT_POSITIONS=new Set(["DESKTOP_BOTTOM_LEFT","DESKTOP_BOTTOM_CENTER","MOBILE_BOTTOM_LEFT"]),h=(t.LEGACY_DESKTOP_GRADIENT_POSITIONS=new Set(["DESKTOP_BOTTOM_LEFT","DESKTOP_BOTTOM_CENTER"]),t.isDesktopCenterCenter=function(e){return e&&"DESKTOP_CENTER_CENTER"===e.desktop}),g=(t.isDesktopTop=function(e){return e&&p.has(e.desktop)},t.isDesktopCenter=function(e){return e&&a.has(e.desktop)},t.isDesktopBottom=function(e){return e&&l.has(e.desktop)},t.isDesktopLeft=function(e){return e&&r.has(e.desktop)},t.isMobileCenterCenter=function(e){return e&&"MOBILE_CENTER_CENTER"===e.mobile},t.isMobileTop=function(e){return e&&f.has(e.mobile)},t.isMobileCenter=function(e){return e&&o.has(e.mobile)},t.isMobileBottom=function(e){return e&&c.has(e.mobile)},t.isMobileLeft=function(e){return e&&s.has(e.mobile)},t.isCenter=function(e){return e&&(a.has(e.desktop)||o.has(e.mobile))},t.isHorizontalOldPosition=function(e){return e&&(u.has(e.desktop)||d.has(e.mobile))}),y=(t.isLegacyDesktopGradientPosition=function(e){return e&&m.has(e.desktop)},t.isVerticalOldPosition=function(e){return e&&("DESKTOP_BOTTOM_LEFT"===e.desktop||d.has(e.mobile))});t.shouldUseHeaderV2Position=function(e){var t=e.textPosition,n=e.lastModified,a=e.isVertical?y(t):g(t),o=new Date(n)<i;return!!t&&(!(a&&o)||h(t))}},"24cm":function(e,t,n){"use strict";var i=n("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=i(n("jcbH")),o=i(n("J6ba")),r=i(n("+xN7")),s=i(n("Fegq")),l=i(n("I/3k"));t.default="\n".concat(a.default,"\n").concat(o.default,"\n").concat(r.default,"\n").concat(s.default,"\n").concat(l.default,"\n\nfragment onCardDeck on CardDeck {\n  __typename\n  id\n  uri\n  slug\n  sourceId\n  url\n  asset {\n    ... onCardDeckCarousel\n    ... onCardDeckCardStory\n    ... onCardDeckVisualEssay\n    ... onCardDeckReporterThread\n    ... onCardDeckPosterFeed\n  }\n}\n")},"28GZ":function(e,t,n){"use strict";var i=n("TqRt"),a=n("cDf5");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=p(n("q1tI")),r=(i(n("17x9")),i(n("1jzN"))),s=n("uVKy"),l=i(n("Zgws")),c=i(n("FHjF")),u=p(n("iPKY"));function d(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(d=function(e){return e?n:t})(e)}function p(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=a(e)&&"function"!=typeof e)return{default:e};var n=d(t);if(n&&n.has(e))return n.get(e);var i={__proto__:null},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var r in e)if("default"!==r&&{}.hasOwnProperty.call(e,r)){var s=o?Object.getOwnPropertyDescriptor(e,r):null;s&&(s.get||s.set)?Object.defineProperty(i,r,s):i[r]=e[r]}return i.default=e,n&&n.set(e,i),i}function f(e){var t=e.storyline,n=t.guide,i=n.displayName,a=n.leadIn,d=n.sections,p=t.uri,f=e.trackEvent,m=e.trackingParams,h=e.trackLinkInteraction;if(!i||null==d||!d.length)return null;var g=(0,s.isElectionStoryline)(p);return o.default.createElement("section",{id:"styln-guide",role:"complementary","aria-labelledby":"styln-guide-title",className:u.guideContainerClass},o.default.createElement(l.default,{className:u.topRuleClass}),g&&o.default.createElement(r.default,{className:u.electionLogoClass}),o.default.createElement("h2",{id:"styln-guide-title",className:u.titleClass},i),a&&o.default.createElement("h3",{className:u.leadInClass},a),d.map((function(e,t){return o.default.createElement(o.Fragment,{key:t.toString()},o.default.createElement(l.default,{className:u.sectionRuleClass}),e.items.map((function(e,t){return o.default.createElement(c.default,{item:e,trackEvent:f,trackingParams:m,trackLinkInteraction:h,key:e.__typename+t.toString()})})))})))}f.displayName="StorylineGuideV2",f.defaultProps={trackEvent:null,trackingParams:null,trackLinkInteraction:function(){}};t.default=f},"2C8b":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,t.isFakeIOS=function(){return-1!==(document&&document.location&&document.location.search.toLowerCase()||"").indexOf("forceios")},t.isIOS=d;var i="undefined"!=typeof window?window.navigator:{},a=i.platform,o=void 0===a?"":a,r=i.userAgent,s=void 0===r?"":r,l=/iphone|ipad|ipod|nytios/i,c=l.test(o),u=l.test(s);function d(){return window.config&&window.config.OS?"IOS"===window.config.OS.toUpperCase():c||u}t.default=d},"2PZ4":function(e,t,n){"use strict";n.d(t,"d",(function(){return l})),n.d(t,"f",(function(){return d})),n.d(t,"a",(function(){return f})),n.d(t,"b",(function(){return m.a})),n.d(t,"c",(function(){return y})),n.d(t,"e",(function(){return w}));var i=n("gcR/"),a=n.n(i),o=(n("q1tI"),n("wXC7")),r=n.n(o),s=function(e){var t=e.className;return a()("svg",{className:t,viewBox:"0 0 7 15",width:"7",height:"15"},void 0,a()("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M4.775 14.163V7.08h1.923l.255-2.441H4.775l.004-1.222c0-.636.06-.977.958-.977H6.94V0H5.016c-2.31 0-3.123 1.184-3.123 3.175V4.64H.453v2.44h1.44v7.083h2.882z",fill:r.a.color.black}))};s.displayName="Facebook",s.defaultProps={className:void 0};var l=s,c=function(e){var t=e.className;return a()("svg",{viewBox:"0 0 13 10",className:t,width:"13",height:"10"},void 0,a()("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M5.987 2.772l.025.425-.429-.052c-1.562-.2-2.927-.876-4.086-2.011L.93.571.784.987c-.309.927-.111 1.906.533 2.565.343.364.266.416-.327.2-.206-.07-.386-.122-.403-.096-.06.06.146.85.309 1.161.223.434.678.858 1.176 1.11l.42.199-.497.009c-.481 0-.498.008-.447.19.172.564.85 1.162 1.606 1.422l.532.182-.464.277a4.833 4.833 0 0 1-2.3.641c-.387.009-.704.044-.704.07 0 .086 1.047.572 1.657.762 1.828.564 4 .32 5.631-.641 1.159-.685 2.318-2.045 2.859-3.363.292-.702.583-1.984.583-2.6 0-.398.026-.45.507-.927.283-.277.55-.58.6-.667.087-.165.078-.165-.36-.018-.73.26-.832.226-.472-.164.266-.278.584-.78.584-.928 0-.026-.129.018-.275.096a4.79 4.79 0 0 1-.755.294l-.464.148-.42-.286C9.66.467 9.335.293 9.163.24 8.725.12 8.055.137 7.66.276c-1.074.39-1.752 1.395-1.674 2.496z",fill:r.a.color.black}))};c.displayName="Twitter",c.defaultProps={className:void 0};var u=function(e){var t=e.className;return a()("svg",{viewBox:"0 0 15 9",className:t,width:"15",height:"9"},void 0,a()("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M.906 8.418V0L5.64 4.76.906 8.419zm13 0L9.174 4.761 13.906 0v8.418zM7.407 6.539l-1.13-1.137L.907 9h13l-5.37-3.598-1.13 1.137zM1.297 0h12.22l-6.11 5.095L1.297 0z",fill:r.a.color.black}))};u.displayName="Mail",u.defaultProps={className:void 0};var d=u,p=function(e){var t=e.className,n=e.fill;return a()("svg",{className:t,viewBox:"0 0 16 13",width:"16",height:"13"},void 0,a()("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M15.406 5.359L8.978 0v3.215C3.82 3.215.406 8.107.406 12.66 1.653 9.133 4.29 7.517 8.978 7.517v3.2l6.428-5.358z",fill:n}))};p.displayName="Arrow",p.defaultProps={className:void 0,fill:r.a.color.black};var f=p,m=n("kCKD"),h=function(e){var t=e.className;return a()("svg",{className:t,width:"15",height:"15",viewBox:"0 0 15 15"},void 0,a()("path",{d:"M7.498-.017a7.364 7.364 0 0 1 5.247 2.18 7.397 7.397 0 0 1 2.171 5.258c-.002 4.016-3.198 7.3-7.174 7.429l-.244.004h-.003a7.4 7.4 0 0 1-3.545-.905L.017 14.983 1.07 11.13a7.433 7.433 0 0 1-.99-3.716C.08 3.317 3.409-.017 7.498-.017ZM7.5 1.238c-3.4 0-6.167 2.771-6.168 6.178 0 1.167.326 2.304.943 3.287l.146.234-.623 2.28 2.334-.614.225.134c.947.563 2.032.861 3.139.862h.002c3.398 0 6.164-2.772 6.166-6.178 0-1.651-.64-3.203-1.805-4.371A6.118 6.118 0 0 0 7.5 1.238ZM4.872 3.982c.123 0 .247 0 .355.005.132.005.278.011.417.32.05.114.12.279.193.456l.11.27c.127.314.243.604.268.654.047.093.078.201.016.325s-.093.201-.185.31l-.19.228-.089.097c-.092.093-.189.194-.08.38a5.6 5.6 0 0 0 1.03 1.286c.708.633 1.305.829 1.49.922.186.093.294.077.402-.047.109-.124.464-.542.587-.728.124-.186.247-.155.417-.093.068.025.255.112.466.213l.324.156.477.235c.185.093.309.14.355.217.046.078.046.45-.108.883-.154.434-.911.853-1.251.884-.34.03-.659.154-2.224-.465-1.884-.745-3.074-2.68-3.167-2.804-.092-.125-.756-1.008-.756-1.922 0-.914.478-1.363.648-1.55a.68.68 0 0 1 .495-.232Z",fill:r.a.color.black,fillRule:"nonzero"}))};h.displayName="WhatsApp",h.defaultProps={className:void 0};var g=function(e){var t=e.className;return a()("svg",{className:t,width:"13",height:"13",viewBox:"0 0 13 13",fill:"none",xmlns:"http://www.w3.org/2000/svg"},void 0,a()("path",{d:"M5.61876 7.38125C5.87501 7.625 5.87501 8.025 5.61876 8.26875C5.37501 8.5125 4.97501 8.5125 4.73126 8.26875C3.51251 7.05 3.51251 5.06875 4.73126 3.85L6.94376 1.6375C8.16251 0.418747 10.1438 0.418747 11.3625 1.6375C12.5813 2.85625 12.5813 4.8375 11.3625 6.05625L10.4313 6.9875C10.4375 6.475 10.3563 5.9625 10.1813 5.475L10.475 5.175C11.2125 4.44375 11.2125 3.25625 10.475 2.525C9.74376 1.7875 8.55626 1.7875 7.82501 2.525L5.61876 4.73125C4.88126 5.4625 4.88126 6.65 5.61876 7.38125ZM7.38126 4.73125C7.62501 4.4875 8.02501 4.4875 8.26876 4.73125C9.48751 5.95 9.48751 7.93125 8.26876 9.15L6.05626 11.3625C4.83751 12.5812 2.85626 12.5812 1.63751 11.3625C0.418762 10.1437 0.418762 8.1625 1.63751 6.94375L2.56876 6.0125C2.56251 6.525 2.64376 7.0375 2.81876 7.53125L2.52501 7.825C1.78751 8.55625 1.78751 9.74375 2.52501 10.475C3.25626 11.2125 4.44376 11.2125 5.17501 10.475L7.38126 8.26875C8.11876 7.5375 8.11876 6.35 7.38126 5.61875C7.12501 5.375 7.12501 4.975 7.38126 4.73125Z",fill:r.a.color.black}))};g.displayName="CopyLink",g.defaultProps={className:void 0};var y=g,v=function(e){var t=e.className;return a()("svg",{className:t,width:"14",height:"15",viewBox:"0 0 14 15"},void 0,a()("path",{d:"M13.75 9.573V15H7.404V9.574h6.346v-.001Zm-7.284 0V15H0V9.574h6.466v-.001ZM8.483.869C9.128.236 10.059-.172 10.948.07c.992.271 1.49 1.206 1.49 2.373 0 .696-.563 1.257-1.133 1.636h2.445v4.43H7.404V4.5h-.938V8.51H0V4.08h2.634c-.571-.379-1.135-.94-1.135-1.636 0-1.167.5-2.102 1.49-2.373.889-.243 1.822.165 2.465.798l.025.025L6.97 2.651 8.458.894 8.483.87Zm2.045.69c-.154-.043-.519.004-.912.38L7.517 4.013v.066h1.008l1.507-.703c.634-.28.81-.469.834-.837l.003-.095c0-.392-.08-.614-.15-.73-.063-.103-.129-.14-.19-.157h-.001Zm-6.206.38c-.394-.376-.757-.423-.912-.38-.062.016-.127.052-.19.157-.071.115-.15.338-.15.728 0 .433.149.629.836.933l1.505.703H6.42v-.068L4.322 1.938Z",fill:r.a.color.black,fillRule:"nonzero"}))};v.displayName="Gift",v.defaultProps={className:void 0};n("sQQE");var b,_=function(e){var t=e.className;return a()("svg",{className:t,width:"20",height:"20",viewBox:"0 0 20 20",fill:"none"},void 0,a()("g",{clipPath:"url(#clip0_694_5701)"},void 0,a()("path",{d:"M18.29 5.42H15.97C16.2933 4.91938 16.4693 4.33801 16.4782 3.74217C16.487 3.14632 16.3283 2.55998 16.02 2.05C15.7891 1.69246 15.487 1.3863 15.1326 1.1506C14.7782 0.914896 14.379 0.754704 13.96 0.68C13.096 0.522512 12.2043 0.693718 11.46 1.16C10.6617 1.7251 10.1078 2.57216 9.91 3.53C9.71897 2.5694 9.16348 1.72005 8.36 1.16C7.61954 0.693453 6.73082 0.522134 5.87 0.68C5.45058 0.753551 5.05097 0.913273 4.6964 1.14908C4.34183 1.38488 4.04001 1.69165 3.81 2.05C3.49201 2.55449 3.32327 3.13866 3.32327 3.735C3.32327 4.33134 3.49201 4.91551 3.81 5.42H1.54C1.29373 5.43451 1.06151 5.53955 0.887995 5.71491C0.714478 5.89028 0.611906 6.12359 0.599998 6.37V10.01C0.611906 10.2564 0.714478 10.4897 0.887995 10.6651C1.06151 10.8405 1.29373 10.9455 1.54 10.96H1.77V18.2C1.77261 18.5042 1.89461 18.7952 2.10971 19.0103C2.32482 19.2254 2.61581 19.3474 2.92 19.35H16.92C17.2233 19.3474 17.5132 19.225 17.7267 19.0097C17.9402 18.7943 18.06 18.5033 18.06 18.2V10.96H18.29C18.5468 10.9603 18.7938 10.8619 18.98 10.685C19.1662 10.5081 19.2772 10.2665 19.29 10.01V6.37C19.2772 6.11354 19.1662 5.87185 18.98 5.695C18.7938 5.51814 18.5468 5.41968 18.29 5.42ZM16.56 11.01V17.85H10.66V11.01H16.56ZM11.12 5.19L11.29 4.06C11.3374 3.73194 11.4504 3.41679 11.6222 3.13332C11.794 2.84985 12.0211 2.60386 12.29 2.41C12.7091 2.14514 13.2115 2.04536 13.7 2.13C13.9193 2.17076 14.1281 2.25559 14.3138 2.37934C14.4994 2.50309 14.658 2.66321 14.78 2.85C14.9907 3.23295 15.0531 3.68003 14.9553 4.10603C14.8576 4.53204 14.6065 4.90719 14.25 5.16L11.12 5.19ZM17.73 6.92V9.46H10.66V6.92H17.73ZM9.16 11.01V17.85H3.29V11.01H9.16ZM5.08 2.85C5.19863 2.66231 5.35503 2.50137 5.53924 2.37742C5.72345 2.25346 5.93145 2.1692 6.15 2.13C6.63846 2.04536 7.14094 2.14514 7.56 2.41C7.81329 2.59954 8.02607 2.83788 8.18579 3.11095C8.34551 3.38403 8.44895 3.68632 8.49 4L8.7 5.19H5.61C5.24396 4.93777 4.98622 4.55705 4.88802 4.1235C4.78983 3.68996 4.85836 3.23533 5.08 2.85ZM9.16 6.92V9.46H2.1V6.92H9.16Z",fill:r.a.color.stocksIconColor})),b||(b=a()("defs",{},void 0,a()("clipPath",{id:"clip0_694_5701"},void 0,a()("rect",{width:"18.63",height:"18.75",fill:"white",transform:"translate(0.599998 0.6)"})))))};_.displayName="GiftV2Bold",_.defaultProps={className:void 0};var w=_},"2Sf2":function(e,t,n){"use strict";var i=n("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=n("Jqp9"),o=i(n("wXC7")),r=n("3sMT"),s=(0,a.css)("margin:0 auto;.story{margin-bottom:",o.default.font.size(18),";}h4,h5,.nitf,.summary{margin:0;}p{line-height:",o.default.font.size(18),";}.nitf{font-family:",o.default.font.franklinBase,";font-weight:",o.default.font.weight.bold,";font-size:",o.default.font.size(14),";color:",r.color.content.primary,";}.summary{font-family:",o.default.font.franklinBase,";font-weight:",o.default.font.weight.medium,";font-size:",o.default.font.size(14),";color:",r.color.content.secondary,";}");t.default=s},"2XMp":function(e,t,n){"use strict";n.d(t,"a",(function(){return s})),n.d(t,"b",(function(){return l}));var i=n("J4zp"),a=n.n(i),o=n("A4Gh"),r=n.n(o),s=function(e){var t=e.html,n=e.name,i=e.variant,o=e.region,r=e.context,s=e.block,l=e.state,c=void 0===l?"default":l,u=e.pgtype,d=void 0===u?"Article":u;try{var p=Array.from(t.matchAll(/https:\/\/(www|cooking)\.(stg\.)?nytimes\.com[0-9/\w-.?=]+/g));if(!p)return t;var f=t,m=0;return p.forEach((function(e){var l=a()(e,1)[0],u=e.index,p=l.length,h=l.includes("?")?"&":"?",g="action=click&pgtype=".concat(d),y=function(e){try{var t={},n=e;"string"==typeof e&&((n=document.createElement("span")).innerHTML=e);var i=n.querySelector("div[data-tracking-params], nav[data-tracking-params]");if(i){var a,o=null===(a=i.attributes["data-tracking-params"])||void 0===a?void 0:a.value;t=JSON.parse(o||{})}return{trackingParams:t,containerHtml:i}}catch(e){return{}}}(t).trackingParams;g+="&state=".concat((null==y?void 0:y.state)||c),n&&(g+="&module=".concat(n)),i&&(g+="&variant=".concat(i)),o&&(g+="&region=".concat(o)),r&&(g+="&context=".concat(r)),s&&(g+="&block=".concat(s));var v=encodeURI(g),b="".concat(l).concat(h).concat(v),_=u+m;f="".concat(f.slice(0,_)).concat(b).concat(f.slice(_+p)),m+=b.length-p})),f}catch(e){return t}};function l(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};try{var n=r.a.parse(e),i=new URLSearchParams(t);return n.search=i.toString(),r.a.format(n)}catch(t){return e}}},"2Y8s":function(e,t,n){"use strict";t.a=function(){var e,t;return"undefined"==typeof window?{}:"function"==typeof(null===(e=window.googletag)||void 0===e?void 0:e.pubads)&&window.googletag.pubadsReady?null===(t=window.googletag)||void 0===t?void 0:t.pubads():{}}},"2cNn":function(e,t,n){"use strict";var i=n("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=i(n("q1tI")),o=(i(n("17x9")),i(n("tn1d"))),r=i(n("oKgi")),s=i(n("139F")),l=n("hMrr"),c=function(e){var t=e.media;return a.default.createElement("div",{className:l.ampContainerClass},t.map((function(e){return a.default.createElement("div",{className:l.ampContainerItemClass},a.default.createElement(r.default,{className:l.summaryClass},e.text),a.default.createElement(o.default,{size:"full",media:"Image"===e.__typename?a.default.createElement("img",{alt:"scrolling slide show",src:e.url}):a.default.createElement("video",{alt:"scrolling slide show",src:e.url,muted:!0,loop:!0,autoPlay:!0,playsinline:!0})},a.default.createElement(s.default,{className:l.ampCreditClass},e.credit)))})))};c.displayName="ScrollyIE";t.default=c},"2ccF":function(e,t,n){"use strict";n.d(t,"a",(function(){return g})),n.d(t,"b",(function(){return y})),n.d(t,"c",(function(){return v}));var i=n("RIqP"),a=n.n(i),o=n("lSNA"),r=n.n(o),s=n("cDf5"),l=n.n(s),c=n("J4zp"),u=n.n(c),d=n("q1tI"),p=n("17x9"),f=n.n(p),m=n("pjM+");function h(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}var g=864e5,y=30*g;function v(e){var t=Object(m.a)(),n=Object(d.useState)(!1),i=u()(n,2),o=i[0],s=i[1],c=Object(d.useRef)(!1),p=t.data(),f=function(){if(!e)return"useViewTracker missing config";if(null==e||!e.scope)return"useViewTracker missing scope in config";if(null==e||!e.maxStored||!Number.isInteger(e.maxStored)||e.maxStored<0)return"useViewTracker maxStored invalid in config";if(t.error())return t.error();if(!t.loading()&&!t.error()){if(!p)return"useViewTracker missing userState data";var n=p[e.scope];if("object"===l()(p)&&Object.keys(t.data()).length>0&&void 0===n)return"useViewTracker scope missing in userState data"}return null}(),g=!1===t.loading()&&!f&&"object"===l()(p)&&Object.keys(t.data()).length>0;if(!f&&o&&g&&!c.current){var y,v=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?h(Object(n),!0).forEach((function(t){r()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):h(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},p[e.scope]);null!==v&&null!==(y=v)&&void 0!==y&&y.views&&Array.isArray(v.views)||(v={views:[]});var b=void 0!==(null==e?void 0:e.now)?e.now:new Date;v.views=[].concat(a()(v.views),[b.toISOString()]),v.views.sort(),v.views=v.views.slice(-(null==e?void 0:e.maxStored));var _=r()({},e.scope,v);c.current=!0,t.update(_)}function w(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;if(f||!g)return 0;var n=p[e.scope]||{},i=n.views,a=void 0===i?[]:i;if(null===t)return a.length;var o=void 0!==(null==e?void 0:e.now)?e.now:new Date,r=new Date(o-t);return a.reduce((function(e,t){return new Date(t)>r?e+1:e}),0)}return{error:f,loaded:g,getViewsSince:w,hasAtMostViews:function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return!(f||!g)&&(!(t>=e.maxStored)&&w(n)<t)},saveView:function(){c.current||s(!0)}}}f.a.func.isRequired,f.a.func.isRequired,f.a.func.isRequired,f.a.func.isRequired,f.a.func.isRequired},"2dqY":function(e,t,n){"use strict";var i=n("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=n("Jqp9"),o=i(n("wXC7")),r=(0,a.css)("&::first-letter{margin-left:-7px;}.balancedHeadline{&::first-letter{margin-left:-7px;}}"),s=(0,a.css)("&::first-letter{margin-left:-7px;}.balancedHeadline{&::first-letter{margin-left:-7px;}}",o.default.breakpoint.medium,"{&::first-letter{margin-left:-9px;}.balancedHeadline{&::first-letter{margin-left:-9px;}}}",o.default.breakpoint.mediumLarge,"{&::first-letter{margin-left:-10px;}.balancedHeadline{&::first-letter{margin-left:-10px;}}}"),l=(0,a.css)("&::first-letter{margin-left:-8px;}.balancedHeadline{&::first-letter{margin-left:-8px;}}",o.default.breakpoint.medium,"{&::first-letter{margin-left:-10px;}.balancedHeadline{&::first-letter{margin-left:-10px;}}}"),c=(0,a.css)("&::first-letter{margin-left:-8px;}.balancedHeadline{&::first-letter{margin-left:-8px;}}",o.default.breakpoint.medium,"{&::first-letter{margin-left:-9px;}.balancedHeadline{&::first-letter{margin-left:-9px;}}}"),u=(0,a.themeFn)("treatment",{news:function(e){return(0,a.css)("singleQuote"===e.hangingPunctuationType&&r)},feature:function(e){return(0,a.css)("singleQuote"===e.hangingPunctuationType&&s)},opinion:function(e){return(0,a.css)("singleQuote"===e.hangingPunctuationType&&l)},magazine:function(e){return(0,a.css)("singleQuote"===e.hangingPunctuationType&&c)}}),d=(0,a.themeFn)("languageDirection",{rightToLeft:(0,a.css)("display:flex;flex-direction:column;")}),p=(0,a.styled)("div",{target:"ehdk2mb0"})(u," ",(function(e){return e.customOffset?e.customOffset:""})," ",d);t.default=p},"2oaX":function(e,t,n){"use strict";n.d(t,"b",(function(){return a})),n.d(t,"e",(function(){return r})),n.d(t,"f",(function(){return s})),n.d(t,"c",(function(){return l})),n.d(t,"d",(function(){return c})),n.d(t,"g",(function(){return u})),n.d(t,"a",(function(){return d})),n.d(t,"h",(function(){return p})),n.d(t,"j",(function(){return f})),n.d(t,"k",(function(){return m})),n.d(t,"i",(function(){return h})),n.d(t,"l",(function(){return g}));var i=n("uyHG"),a=function(e,t){return e.comments[t]||null},o=function(e,t){var n,i=a(e,t);return null!=i&&null!==(n=i.relationships)&&void 0!==n&&n.replies?i.relationships.replies.data:[]},r=function(e,t){var n,i=a(e,t),o=(null==i||null===(n=i.attributes)||void 0===n?void 0:n.recommendedCount)||null,r=t in e.commentActions.recommended;return null!==o?(r&&(o+=1),o):null},s=function(e,t){return t in e.commentActions.recommended},l=function(e,t){return o(e,t).map((function(e){return e.id}))},c=function(e,t){var n,i,o=a(e,t);return o&&(null===(n=o.relationships)||void 0===n||null===(i=n.replies)||void 0===i?void 0:i.replyCount)||0},u=function(e,t){var n,i=a(e,t);return null!=i&&null!==(n=i.attributes)&&void 0!==n&&n.replyToAuthorPanel?i.attributes.replyToAuthorPanel.name:null},d=function(e,t){var n,i=a(e,t);return null!=i&&null!==(n=i.attributes)&&void 0!==n&&n.authorPanel?i.attributes.authorPanel.name:null},p=function(e,t){var n,i=a(e,t);return null!=i&&null!==(n=i.relationships)&&void 0!==n&&n.replyTo?i.relationships.replyTo.data.id:null},f=(n.n(i)()((function(e,t){var n=function(e,t){var n=o(e,t).find((function(t){var n,i=a(e,t.id);return null==i||null===(n=i.attributes)||void 0===n?void 0:n.isReporterReply}));return(null==n?void 0:n.id)||null}(e,t);return d(e,n)})),function(e,t){return e.commentActions.shortUrls[t]||null}),m=function(e,t){return t in e.commentActions.flaggedComments},h=function(){return"0"},g=function(e){return"0"===e}},"2t41":function(e,t,n){"use strict";var i=n("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.instagramClass=t.default=void 0;var a=n("Jqp9"),o=i(n("wXC7")),r=t.instagramClass="instagram-media",s=(0,a.styled)("div",{target:"eyr2lxc0"})(".",r,",iframe{width:100%;}",(function(e){return e.theme.breakpointMap.medium}),"{width:",o.default.breakpoint.textBodyWidth,"px;}");t.default=s},"3+1v":function(e,t,n){"use strict";var i=n("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.titleClass=t.quoteClass=t.containerClass=void 0;var a=n("Jqp9"),o=i(n("wXC7")),r=n("3sMT");t.quoteClass=(0,a.css)("font-family:",o.default.font.franklinBase,";color:",r.color.content.secondary,";border:1px solid ",r.color.stroke.quaternary,";box-sizing:border-box;padding:25px 30px;hr{border-top:1px solid ",r.color.stroke.quaternary,";border-bottom:none;margin:1rem auto;}"),t.containerClass=(0,a.css)("padding:15px;width:",o.default.breakpoint.mobileFullWidth,";margin:",o.default.breakpoint.mobileBlockMargins,";background-color:",r.color.background.primary,";",o.default.breakpoint.small,"{padding:20px;width:100%;max-width:600px;}",o.default.breakpoint.medium,"{margin:",o.default.breakpoint.desktopStorylineMargins,";}",o.default.printHide),t.titleClass=(0,a.css)("font-weight:",o.default.font.weight.bold,";font-size:",o.default.font.size(19),";line-height:",o.default.font.size(22),";margin:0;")},"3HYe":function(e,t,n){"use strict";var i=n("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.default=r;var a=i(n("q1tI")),o=i(n("Lk5R"));function r(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;return a.default.createElement(o.default,{key:n},t)}r.displayName="linkFormatFromOak"},"3P4k":function(e,t,n){"use strict";var i=n("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.StyledAudioRelatedLinks=t.AudioRelatedLinksSeries=t.AudioRelatedLinksHeadline=t.AudioRelatedLinksDescription=void 0;var a=n("Jqp9"),o=i(n("wXC7")),r=n("6l8D"),s=i(n("WThh")),l=i(n("qp0C")),c=n("3sMT"),u=(0,s.default)(["medium","small","mediumLarge"]),d=(0,a.themeFn)("treatment",{none:function(e){var t=(0,a.css)("color:",c.color.content.secondary,";font-family:",o.default.font.franklinBase,";font-weight:",o.default.font.weight.bold,";",u(e,{fontSize:[15,16],lineHeight:[20,22]}),";a{text-decoration:underline;}a:hover{text-decoration:none;}");return"compact"===e.theme.displayStyle||"intentional"===e.theme.displayStyle?(0,a.css)("margin-right:0.4rem;",t,";"):t},sponsored:function(e){if("compact"===e.theme.displayStyle||"intentional"===e.theme.displayStyle){return(0,a.css)(u(e,{fontSize:[13.5,15],lineHeight:[16,24],fontWeight:[o.default.font.weight.mediumBold,o.default.font.weight.bold],letterSpacing:["".concat(.68/13.5,"em"),"".concat(1/15,"em")],marginRight:["".concat(8/13.5,"em"),"".concat(8/15,"em")]}),";color:",c.color.content.secondary,";font-family:",o.default.font.sponsoredBase,";text-transform:uppercase;")}return(0,a.css)("font-size:",o.default.font.size(17),";line-height:",o.default.font.size(22),";font-weight:",o.default.font.weight.bold,";color:",c.color.content.secondary,";font-family:",o.default.font.sponsoredBase,";")},atHome:(0,a.css)("font-size:19px;letter-spacing:0.4px;font-family:",o.default.font.franklinBase,";font-weight:bold;")}),p=(t.AudioRelatedLinksHeadline=(0,a.styled)("div",{target:"ear7y3d0"})((function(e){return("compact"===e.theme.displayStyle||"intentional"===e.theme.displayStyle)&&(0,a.css)("display:inline-block;")}),";",d),(0,a.themeFn)("treatment",{none:function(e){return(0,a.css)("color:",c.color.content.secondary,";font-family:",o.default.font.franklinBase,";",u(e,{fontSize:[15,16],lineHeight:[20,22]}),";")},sponsored:function(e){return"compact"===e.theme.displayStyle||"intentional"===e.theme.displayStyle?(0,a.css)(u(e,{fontSize:[13.5,19],lineHeight:[16,24]}),";color:",c.color.content.secondary,";font-family:",o.default.font.sponsoredBase,";font-style:italic;"):(0,a.css)("font-size:",o.default.font.size(17),";line-height:",o.default.font.size(24),";color:",c.color.content.secondary,";font-family:",o.default.font.sponsoredBase,";font-style:italic;")},atHome:function(e){return(0,a.css)("font-family:",l.default.cheltenham,";font-weight:100;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale;letter-spacing:0.2px;color:",c.color.content.secondary,";",u(e,{paddingRight:[0,0,"4%"],margin:[o.default.breakpoint.mobileBlockMargins,o.default.breakpoint.desktopStorylineMargins],fontSize:[27,27,45],lineHeight:[36,36,61]})," .",r.linkClass,"{text-decoration:underline;color:",c.color.content.primary,";&:hover,&:focus{text-decoration:none;}&:visited{color:",c.color.content.primary,";}}strong{color:inherit;font-weight:700;}")}})),f=(t.AudioRelatedLinksDescription=(0,a.styled)("div",{target:"ear7y3d1"})("font-weight:",o.default.font.weight.medium,";",(function(e){return("compact"===e.theme.displayStyle||"intentional"===e.theme.displayStyle)&&(0,a.css)("display:inline;")}),";.",r.linkClass,"{text-decoration:underline;&:hover{text-decoration:none;}&:focus{text-decoration:underline;}}",p,";"),(0,a.themeFn)("treatment",{none:function(e){return e.hasHeadlineorDescription&&(0,a.css)("margin-top:10px;padding-top:15px;border-top:1px solid ",c.color.stroke.quaternary,";")}})),m=(0,a.themeFn)("displayStyle",{compact:function(e){return(0,a.css)("border-top:none;margin-top:0;padding:",e.hasHeadlineorDescription?"5px 0":"0",";")},intentional:function(e){return(0,a.css)("border-top:none;margin-top:0;padding:",e.hasHeadlineorDescription?"5px 0":"0",";")}}),h=(t.AudioRelatedLinksSeries=(0,a.styled)("div",{target:"ear7y3d2"})(f,";",m),(0,a.themeFn)("treatment",{none:function(e){return(0,a.css)("box-sizing:border-box;margin:",o.default.breakpoint.mobileBlockMargins,";padding:0.9375rem;border:1px solid ",c.color.stroke.quaternary,";",e.theme.breakpointMap.medium,"{padding:1.25rem;margin:",o.default.breakpoint.desktopStorylineMargins,";}")}}));t.StyledAudioRelatedLinks=(0,a.styled)("div",{target:"ear7y3d3"})(o.default.printHide,";",h,";")},"3Rcv":function(e,t,n){"use strict";var i=this&&this.__createBinding||(Object.create?function(e,t,n,i){void 0===i&&(i=n);var a=Object.getOwnPropertyDescriptor(t,n);a&&!("get"in a?!t.__esModule:a.writable||a.configurable)||(a={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,i,a)}:function(e,t,n,i){void 0===i&&(i=n),e[i]=t[n]}),a=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&i(t,e,n);return a(t,e),t},r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var s=r(n("q1tI")),l=r(n("17x9")),c=n("Jqp9"),u=r(n("+bmn")),d=o(n("b2Qg")),p=n("etPP");function f(e){var t,n=e.contentID,i=e.dockExpanded,a=e.dockID,o=e.isDockDismissible,r=e.isDockExpandable,l=e.headerExpandedCTA,f=e.headerCollapsedCTA,m=e.onDockCTAClick,h=e.onDockHeadingClick,g=e.hideVerticleRuleInHeader,y=e.ctaIconWrapperStyle,v=e.ctaContainerStyle,b=e.dividerStyle,_=e.ctaActionTextContainerStyle,w=e.ctaActionTextClassStyle,x=e.ctaButtonStyles,k="".concat(a,"-dock-btn-selector"),O=y||d.iconWrapperClass,T=(0,c.cx)(O,((t={})[d.pointerClass]=o,t)),C=function(e){var t=e.isDockDismissible,n=e.dockExpanded,i=e.headerCollapsedCTA,a=e.headerExpandedCTA;return t?"":n?a:i}({isDockDismissible:o,dockExpanded:i,headerCollapsedCTA:f,headerExpandedCTA:l}),E=o?i?"Button to collapse the message":i?o||"gdpr"===n?"Button to close this message":"":"Button to expand the message":"Button to subscription page";return s.default.createElement("div",{className:v||d.callToActionClass},s.default.createElement("div",{className:_||d.actionTextContainerClass},s.default.createElement("p",{className:w||d.actionTextClass},C)),s.default.createElement("div",{className:(0,c.cx)(g?void 0:d.dividerClass,b||"")}),s.default.createElement(p.Button,{testId:k,type:"button",className:(0,c.cx)(T,x),onClick:m,onKeyUp:h,"aria-label":E},s.default.createElement(u.default,{dockExpanded:i,isDockDismissible:o,isDockExpandable:r})))}f.propTypes={contentID:l.default.string,dockID:l.default.string,dockExpanded:l.default.bool,isDockDismissible:l.default.bool,isDockExpandable:l.default.bool,headerExpandedCTA:l.default.string,headerCollapsedCTA:l.default.string,onDockCTAClick:l.default.func,onDockHeadingClick:l.default.func,ctaIconWrapperStyle:l.default.string,ctaContainerStyle:l.default.string,ctaActionTextClassStyle:l.default.string},f.defaultProps={contentID:"",dockID:"standard",dockExpanded:!1,isDockDismissible:void 0,isDockExpandable:!0,headerExpandedCTA:"",headerCollapsedCTA:"",onDockCTAClick:function(){},onDockHeadingClick:function(){}},t.default=f},"3VDn":function(e,t,n){"use strict";t.a="/vi-assets/static-assets/icon-games-easymode_144x144-307b8f657d987516abff44220313daae.webp"},"3WfF":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.iosClass=t.buttonClass=t.androidClass=void 0;var i=n("Jqp9"),a=t.iosClass=(0,i.css)("display:none;padding-top:1px;"),o=t.androidClass=(0,i.css)("display:none;margin:3px 2px 0 0;");t.buttonClass=(0,i.css)("display:none;.NYTApp &{display:block;.",a,"{display:inline;}}.NYTApp.ANDROID &{.",o,"{display:inline;}.",a,"{display:none;}}")},"3XBt":function(e,t,n){"use strict";var i=n("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=i(n("q1tI")),o=(i(n("17x9")),i(n("2dqY"))),r=function(e){var t=e.text,n=e.children,i=e.textAlign,r=e.customOffset,s="";return t&&"‘"===t[0]&&(s="singleQuote"),"center"===i&&(s=""),a.default.createElement(o.default,{customOffset:r,hangingPunctuationType:s},n)};r.displayName="HangingPunctuation",r.defaultProps={text:"",children:null,textAlign:"",customOffset:""};t.default=r},"3sI7":function(e,t,n){"use strict";n.d(t,"b",(function(){return d})),n.d(t,"c",(function(){return p})),n.d(t,"d",(function(){return f})),n.d(t,"e",(function(){return m})),n.d(t,"a",(function(){return g})),n.d(t,"g",(function(){return y})),n.d(t,"f",(function(){return v}));var i=n("Jqp9"),a=n("3Rk2"),o=n.n(a),r=n("3sMT"),s=n("wXC7"),l=n.n(s),c=o()([l.a.breakpoint.small,l.a.breakpoint.mediumLarge,l.a.breakpoint.extraLarge]),u=Object(i.themeFn)("languageDirection",{rightToLeft:Object(i.css)("text-align:right;direction:rtl;unicode-bidi:isolate;")}),d=Object(i.styled)("div",{target:"e89cr9k0"})("display:none;",c({display:["none",null,"flex"],marginBottom:[null,null,"40px"]}),";",u),p=Object(i.css)(l.a.breakpoint.mediumLarge,"{margin-left:auto;margin-right:30px;text-align:right;width:calc(50% - 30px);}"),f=Object(i.css)("color:",r.color.content.quaternary,";font-family:",l.a.font.serifBase,";margin-top:6px;margin-right:50px;margin-bottom:0;max-width:900px;text-align:left;",c({display:["none",null,"block"],fontSize:[l.a.font.size(14),null,null,l.a.font.size(15)],lineHeight:[l.a.font.size(18),null,null,l.a.font.size(20)],marginLeft:[l.a.grid.pageMargin,null,"50px"]}),";"),m=Object(i.css)("margin-right:7px;strong,b{font-weight:",l.a.font.weight.bold,";}i,em{font-style:italic;}sup{vertical-align:super;font-size:smaller;line-height:0;}sub{vertical-align:sub;font-size:smaller;line-height:0;}a{color:",l.a.color.linkColor,";&:visited{color:",l.a.color.linkVisitedColor,";}}&.magazine{font-family:",l.a.font.magazineSansBase,";color:",l.a.color.gray25,";}&.t-magazine{color:",l.a.color.gray20,";font-family:",l.a.font.tmagSansBase,";font-weight:",l.a.font.weight.book,";letter-spacing:0.02em;}"),h=Object(i.themeFn)("treatment",{none:Object(i.css)(),magazine:Object(i.css)("transform:none;"),tMagazine:Object(i.css)("transform:none;")}),g=Object(i.styled)("div",{target:"e89cr9k1"})("width:",l.a.breakpoint.mobileFullWidth,";margin-bottom:25px;color:",l.a.color.gray20,";",c({marginLeft:[l.a.grid.pageMargin,"auto"],marginRight:[l.a.grid.pageMargin,"auto"],maxWidth:[l.a.breakpoint.textBodyWidth,null,null,l.a.breakpoint.textBodyWidthExtralarge],textAlign:[null,null,"left"]}),";",h,";",l.a.print,";"),y=Object(i.css)(l.a.breakpoint.small,"{display:flex;margin-bottom:25px;padding-bottom:20px;gap:2%;border-bottom:1px solid ",r.color.stroke.quaternary,";flex-direction:row;}"),v=Object(i.css)("flex:54%;margin-top:20px;width:100%;",l.a.breakpoint.small,"{margin-left:0;margin-top:0;}")},"3ywf":function(e,t,n){"use strict";var i,a=n("VkAN"),o=n.n(a),r=n("gcR/"),s=n.n(r),l=(n("q1tI"),n("eFc+")),c=n.n(l),u=n("dxVN"),d=n.n(u),p=n("Jqp9"),f=n("wXC7"),m=n.n(f),h=Object(p.css)("margin:",m.a.breakpoint.mobileBlockMargins,";width:",m.a.breakpoint.mobileFullWidth,";max-width:",m.a.breakpoint.textBodyWidth,"px;",m.a.breakpoint.medium,"{margin:",m.a.breakpoint.desktopMediaMargins,";width:100%;}"),g=function(e){if(!e.data)return null;var t=e.data.instagramUrl;return t?s()(d.a,{className:h,instagramUrl:t}):null};g.displayName="InstagramEmbedBlock",g.fragments={data:c()(i||(i=o()(["\n    fragment InstagramEmbedBlock_data on InstagramEmbedBlock {\n      instagramUrl\n    }\n  "])))};t.a=g},"42oi":function(e,t,n){"use strict";n.d(t,"f",(function(){return o})),n.d(t,"h",(function(){return r})),n.d(t,"e",(function(){return s})),n.d(t,"j",(function(){return l})),n.d(t,"g",(function(){return c})),n.d(t,"i",(function(){return u})),n.d(t,"c",(function(){return d})),n.d(t,"d",(function(){return p})),n.d(t,"b",(function(){return f})),n.d(t,"a",(function(){return m}));var i=n("hZ4i"),a=n("p3S2");function o(e){return"FACTCHECK"===e||"FACT_CHECK"===e}function r(e){return"LIVE_BRIEFING"===e||"BRIEFING"===e}function s(e){return e===a.THEMES.COVERAGE_BRIEFING}function l(e){return e===a.THEMES.NEWS_BRIEFING}function c(e){return e===a.THEMES.LIVE_BLOG}function u(e){return e===a.THEMES.STORYLINE_FEED}function d(e){var t,n;return(null==e||null===(t=e.url)||void 0===t?void 0:t.includes("/live/"))&&(null==e||null===(n=e.__typename)||void 0===n?void 0:n.includes("LegacyCollection"))&&!function(e){return o(Object(i.parseUnstructuredData)(e).typeOfBlog)}(e)}function p(e){var t,n,i;if("Article"!==(null==e?void 0:e.__typename))return!1;var a=null==e||null===(t=e.sprinkledBody)||void 0===t||null===(n=t.content)||void 0===n?void 0:n.find((function(e){return"HeaderLiveBriefingBlock"===(null==e?void 0:e.__typename)}));return!!a&&"Right Now"===(null==a||null===(i=a.latestUpdate)||void 0===i?void 0:i.label)}function f(e){return!!Object(i.getLiveAsset)(e)}function m(e){var t;return null!==(t=null==e?void 0:e.find((function(e){try{var t=JSON.parse(null==e?void 0:e.mobileHeader);return r(null==t?void 0:t.typeOfBlog)}catch(e){return!1}})))&&void 0!==t?t:null}},"42vy":function(e,t,n){"use strict";var i=n("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=i(n("dmwf"));t.default=a.default},"45rh":function(e,t,n){"use strict";var i=this&&this.__createBinding||(Object.create?function(e,t,n,i){void 0===i&&(i=n);var a=Object.getOwnPropertyDescriptor(t,n);a&&!("get"in a?!t.__esModule:a.writable||a.configurable)||(a={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,i,a)}:function(e,t,n,i){void 0===i&&(i=n),e[i]=t[n]}),a=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&i(t,e,n);return a(t,e),t},r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var s=o(n("q1tI")),l=n("Jqp9"),c=r(n("5UIh")),u=n("syiw"),d=n("HDG5"),p=o(n("ZgZ1")),f=n("etPP"),m=n("6gWn");t.default=function(e){var t,n,i,a,o,r,h,g=e.unit,y=(0,l.useTheme)().assetUrl,v=(0,s.useState)(!1),b=v[0],_=v[1],w=(0,u.useMessageSelection)({config:{name:"dock"}}),x=(0,d.useUserState)(),k=s.default.createElement("p",{className:p.headerTextClass},null===(t=g.content)||void 0===t?void 0:t.headerText),O=s.default.createElement("div",{className:p.mainContent},s.default.createElement("img",{className:p.logoClass,alt:"The New York Times Audio",src:"".concat(y,"/nyt_audio_logo.svg")}),s.default.createElement("p",{className:p.contentTextClass},null===(n=g.content)||void 0===n?void 0:n.contextText),s.default.createElement(f.Button,{href:null===(i=null==g?void 0:g.content)||void 0===i?void 0:i.url,className:p.downloadButtonClass,testId:"download-link",component:"a"},s.default.createElement("img",{alt:"Arrow",src:"".concat(y,"/icon-play.svg")}),"Download App"));if(w.loading)return null;if(!b){var T=null===(o=null===(a=null==w?void 0:w.response)||void 0===a?void 0:a.userstate())||void 0===o?void 0:o.messageSelectionMessageCaps,C=null;if(T)if((S=T).forEach((function(e){var t,n;"dock"===(null==e?void 0:e.unit)&&(null==e?void 0:e.campaign)===(null===(t=null==w?void 0:w.response)||void 0===t?void 0:t.campaign())&&(null==e?void 0:e.audience)===(null===(n=null==w?void 0:w.response)||void 0===n?void 0:n.audience())&&(C=e)})),null!==C){var E=C;E.viewCount+=1,E.lastSeenOn=(new Date).toISOString(),x.update({messageSelectionMessageCaps:S})}if(!C){var S=[];T&&(S=T),S.push({unit:"dock",campaign:null===(r=null==w?void 0:w.response)||void 0===r?void 0:r.campaign(),audience:null===(h=null==w?void 0:w.response)||void 0===h?void 0:h.audience(),lastSeenOn:(new Date).toISOString(),viewCount:1,dismissed:!1}),x.update({messageSelectionMessageCaps:S})}_(!0)}return s.default.createElement(c.default,{testId:"onsite-messaging-unit-".concat(null===m.config||void 0===m.config?void 0:m.config.name),"data-campaign":null==g?void 0:g.campaign,"data-audience":null==g?void 0:g.audience,unit:g,contentID:"AUDIO_APP_DOWNLOAD_682",dockID:"Audio App Download - 682",header:k,card:O,isDockDismissible:!1,minimized:!1})}},"45t3":function(e,t,n){"use strict";var i=n("TqRt"),a=n("cDf5");Object.defineProperty(t,"__esModule",{value:!0}),t.useBulletBriefLocationContext=t.BulletBriefLocationProvider=t.BulletBriefLocationContext=void 0;var o=i(n("J4zp")),r=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=a(e)&&"function"!=typeof e)return{default:e};var n=l(t);if(n&&n.has(e))return n.get(e);var i={__proto__:null},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var r in e)if("default"!==r&&{}.hasOwnProperty.call(e,r)){var s=o?Object.getOwnPropertyDescriptor(e,r):null;s&&(s.get||s.set)?Object.defineProperty(i,r,s):i[r]=e[r]}return i.default=e,n&&n.set(e,i),i}(n("q1tI")),s=i(n("17x9"));function l(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(l=function(e){return e?n:t})(e)}s.default.bool,s.default.node;var c={showStickyNav:!1,setShowStickyNav:function(e){return e},boldItems:{},setboldItems:function(e){return e}},u=t.BulletBriefLocationContext=r.default.createContext(c),d=(t.useBulletBriefLocationContext=function(){return(0,r.useContext)(u)},t.BulletBriefLocationProvider=function(e){var t=e.value,n=void 0===t?null:t,i=e.children,a=(0,r.useState)(!1),s=(0,o.default)(a,2),l=s[0],c=s[1],d=(0,r.useState)({}),p=(0,o.default)(d,2),f=p[0],m=p[1],h=n||{showStickyNav:l,setShowStickyNav:c,boldItems:f,setboldItems:m};return r.default.createElement(u.Provider,{value:h},i)});d.displayName="BulletBriefLocationProvider",d.defaultProps={value:null}},"49hH":function(e,t,n){"use strict";var i=n("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=i(n("q1tI")),o=(i(n("17x9")),n("g4BQ")),r=i(n("lbJX")),s=i(n("zC1O")),l=function(e){var t=e.isPlaying;return a.default.createElement("div",{className:o.playbackAnimationClass},t?a.default.createElement(r.default,null):a.default.createElement(s.default,null))};l.displayName="PlaybackAnimation",l.defaultProps={isPlaying:void 0};t.default=l},"4G62":function(e,t,n){"use strict";var i=n("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=i(n("lSNA")),o=i(n("q1tI")),r=(i(n("17x9")),n("Jqp9")),s=n("U4cX");function l(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function c(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?l(Object(n),!0).forEach((function(t){(0,a.default)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):l(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var u=function(e){var t=e.className,n=e.size,i=e.children;return o.default.createElement(r.ThemeProvider,{theme:function(e){return c(c({},e),{},{mediaSize:n})}},o.default.createElement(s.StyledDiptych,{className:t},i))};u.displayName="Diptych",u.defaultProps={className:void 0,size:void 0,children:null};t.default=u},"4GNh":function(e,t,n){"use strict";var i,a,o,r=n("VkAN"),s=n.n(r),l=n("gcR/"),c=n.n(l),u=n("q1tI"),d=n.n(u),p=n("eFc+"),f=n.n(p),m=n("F0cd"),h=n.n(m),g=n("rNEd"),y=n("E8RS"),v=n("AeOL"),b=n("boCj"),_=n("fZdH"),w=n("7VSS"),x=n("X6oL"),k=n("rONy"),O=n("06b3"),T=n("Rb+W"),C=n("Jqp9"),E=n("3sMT"),S=n("wXC7"),P=n.n(S),I=Object(C.css)("font-family:",P.a.font.franklinBase,";font-style:normal;margin-bottom:1.75rem;",P.a.breakpoint.small,"{margin-bottom:0.75rem;}"),M=Object(C.css)("text-align:left;margin-left:0;color:",E.color.stroke.primary,";border:none;border-top:1px solid ",E.color.stroke.primary,";width:60px;margin-bottom:19px;"),A=Object(C.css)("a{text-decoration:underline;color:",E.color.signal.editorial,";text-decoration-thickness:1px;text-underline-offset:2px;&:hover,&:focus{text-decoration:none;}}font-size:",P.a.font.size(15),";line-height:",P.a.font.size(20),";font-weight:",P.a.font.weight.medium,";color:",E.color.content.secondary,";",P.a.breakpoint.medium,"{font-size:",P.a.font.size(16),";line-height:",P.a.font.size(22),";}"),j=Object(C.css)("margin-right:0.5rem;"),N=function(){var e,t,n=Object(_.a)(),r=Object(x.useTracking)(),s=Object(w.a)(),l=(null==n||null===(e=n.styln_trust)||void 0===e?void 0:e.allocated)&&"styln_trust",d=null==n||null===(t=n[l])||void 0===t?void 0:t.variant;if(Object(u.useEffect)((function(){if(d){var e=Object(T.f)(O.a);t=d,Object(k.a)((function(){var n,i,a,o=(null===(n=window)||void 0===n||null===(i=n.NYTD)||void 0===i||null===(a=i.PageViewId)||void 0===a?void 0:a.current)||"";window.Iterate("install","62fbffa010eae90001b94079"),window.Iterate("identify",{agentId:e},{slug:"trust-inline-module-corrections",pageviewID:o,testVariant:t})}))}var t}),[d]),!s)return i||(i=c()("p",{},void 0,"How we handle corrections"));var p={event:"impression",module:{label:d,name:"trust-corrections",context:"trust_inline_explainer"}},f=["email","push"].some((function(e){return"trust_inline_explainer".toLowerCase().startsWith(e)}));return c()(u.Fragment,{},"client-render",c()(v.a,{testName:"styln_trust",holdoutVariant:y.a},void 0,c()(b.InView,{className:I,onChange:function(e){return!f&&e?r.trackEvent(p):{}},triggerOnce:!0},void 0,a||(a=c()("hr",{className:M})),o||(o=c()("p",{className:A},void 0,"When we learn of a mistake, we acknowledge it with a correction. If you spot an error, please let us know at"," ",c()("span",{className:j},void 0,c()("a",{href:"mailto:nytnews@nytimes.com"},void 0,"nytnews@nytimes.com"),"."),c()("a",{href:"https://www.nytimes.com/explain/2022/new-york-times-journalism"},void 0,"Learn more"))))))};N.displayName="AddendumComponent";var L,D,R=d.a.memo(N),B=n("nxVm"),z=n.n(B),F=Object(C.css)("font-family:",P.a.font.serifBase,";font-style:italic;font-size:",P.a.font.size(18),";line-height:",P.a.font.size(25),";width:",P.a.breakpoint.mobileFullWidth,";max-width:",P.a.breakpoint.textBodyWidth,"px;margin:1rem auto ",P.a.font.size(12),";",P.a.breakpoint.medium,"{font-size:",P.a.font.size(20),";line-height:",P.a.font.size(30),";margin-bottom:",P.a.font.size(20),";}&:empty{display:none;}",z.a,";"),U=Object(C.css)("margin-bottom:1rem;"),H=Object(C.css)("font-weight:",P.a.font.weight.bold,";"),W=Object(C.css)(F," display:inline;font-weight:",P.a.font.weight.bold,";"),q=Object(C.css)("margin-top:1px;"),V=Object(C.css)("display:inline;"),G=function(e){var t=e.addendum;return t.showDate?t.multiCorrection?d.a.createElement(d.a.Fragment,null,c()("strong",{className:H},void 0,"Corrections were made on")," ",c()(h.a,{className:W},void 0,t.publicationDate),": "):d.a.createElement(d.a.Fragment,null,c()("strong",{className:H},void 0,"A correction was made on")," ",c()(h.a,{className:W},void 0,t.publicationDate),": "):null},Y=function(e,t){return"CORRECTION"===e.type&&e.showDate&&0===t?V:q},X=function(e){var t,n=e.data;if(null==n||null===(t=n.addendums)||void 0===t||!t.length)return null;var i=function(e){return e.forEach((function(t,n){var i=n>0?e[n-1]:{type:"",publicationDate:""};t.showDate=!("CORRECTION"===t.type&&t.type===i.type&&t.publicationDate===i.publicationDate),i.multiCorrection=!t.showDate})),e}(n.addendums),a=n.addendums.some((function(e){return"CORRECTION"===e.type}));return c()("div",{className:F},void 0,i.map((function(e){return c()("div",{className:U},e.legacyHtmlBody,"CORRECTION"!==e.type?d.a.createElement(d.a.Fragment,null,c()("strong",{className:H},void 0,"EDITORS_NOTE"===(t=e.type)?"Editors’ Note":t.charAt(0).toUpperCase()+t.slice(1).toLowerCase(),":")," ",c()(h.a,{className:W},void 0,e.publicationDate)):c()(G,{addendum:e}),e.body.content?e.body.content.map((function(t,n){return c()(g.a,{className:Y(e,n),data:t},n.toString())})):c()("div",{className:q,dangerouslySetInnerHTML:{__html:e.legacyHtmlBody?e.legacyHtmlBody:e.body.text}}));var t})),a&&(L||(L=c()(R,{}))))};X.displayName="Addendum",X.defaultProps={data:void 0},X.fragments={data:f()(D||(D=s()(["\n    fragment Addendum_data on CreativeWork {\n      addendums {\n        type\n        publicationDate\n        legacyHtmlBody\n        body {\n          text\n          content {\n            ...ParagraphBlock_data\n          }\n        }\n      }\n    }\n    ","\n  "])),g.a.fragments.data)};t.a=X},"4KWU":function(e,t,n){"use strict";t.a="/vi-assets/static-assets/icon-athletic-windup_144x144-c03f2bf7ebd88f1c239ba4a6b2228679.webp"},"4KZX":function(e,t,n){"use strict";var i=n("lSNA"),a=n.n(i),o=n("q1tI"),r=n.n(o),s=n("Jqp9"),l=n("IHYJ"),c=function(e){var t=e.uri,n=e.name,i=e.isInlineModule,o=e.isFooter,c=e.className,u={title:"ScoopHelper edit storyline button",className:Object(s.cx)("styln-edit-storyline",a()(a()(a()({},l.c,!i&&!o),l.b,i),l.a,o),c),"data-storyline-uri":t};return i?u["data-storyline-inline-module-name"]=n:u["data-storyline-module-name"]=n,r.a.createElement("span",u)};c.defaultProps={isInlineModule:!1,isFooter:!1,className:void 0},t.a=c},"4LIj":function(e,t,n){"use strict";var i=n("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i=e.text.split(s).map((function(e,n){return s.test(e)?a.default.createElement(o.default,{key:"pre-".concat(t,"-").concat(n)},e):e}));return(e.formats||[]).forEach((function(e,a){i=(0,r.default)(e,i,"format-".concat(t,"-").concat(a),n)})),i};var a=i(n("q1tI")),o=i(n("4mNl")),r=i(n("fmuu")),s=/(\r|\n|\t|[\s]{2,})/g},"4PQh":function(e,t,n){"use strict";var i=n("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.runScripts=t.replaceChildren=t.isAi2Html=t.hasBridge=t.getPriority=t.extractAndReplace=t.cloneScript=t.assembleAndOrderScripts=t.addsPlaceholderScript=t.SERVER_SCRIPT_ATTRIBUTE=void 0;var a=i(n("J4zp")),o=t.isAi2Html=function(e){return e.includes("ai2html")},r=t.SERVER_SCRIPT_ATTRIBUTE="data-attr-keep-server",s=(t.hasBridge=function(){return!!window.getInteractiveBridge},t.addsPlaceholderScript=function(e,t,n){var i=e;return{replacementToken:'<script id="'.concat(t,"-script-").concat(n,'"><\/script>'),hoistedText:i=i.replace("<script",'<script id="'.concat(t,"-script-").concat(n,'"'))}}),l=(t.extractAndReplace=function(e,t){for(var n,i=/<script[\s\S]*?>[\s\S]*?<\/script>/gi,o=0,l=e,c=[],u=0;n=i.exec(e);){var d=n,p=(0,a.default)(d,1)[0];if(p&&!p.includes(r)){var f,m=p,h=s(m,t,u);m=h.hoistedText,f=h.replacementToken,u+=1;var g=n.index-o,y=n.index+p.length-o;l="".concat(l.substring(0,g)).concat(f).concat(l.substring(y,l.length)),c.push(m),o+=p.length-f.length}}return{scriptsToRunOnClient:c,scriptlessHtml:l}},t.replaceChildren=function(e,t){for(;e.firstChild;)e.removeChild(e.firstChild);for(;t.length>0;)e.appendChild(t[0])},t.cloneScript=function(e){var t=document.createElement("script");return Array.from(e.attributes).forEach((function(e){t.setAttribute(e.name,e.value)})),t.innerHTML=e.innerHTML,t}),c=(t.runScripts=function(e,t){return new Promise((function(n){var i=Array.from(e);!function e(){if(i.length){var a=i.shift(),s=l(a);o(t)||a.hasAttribute(r)?a.parentNode.replaceChild(s,a):document.getElementById("".concat(a.id)).parentNode.appendChild(s),a.hasAttribute("src")?s.onload=e:e()}else n()}()}))},t.getPriority=function(e){var t;try{JSON.parse(e.innerHTML),t=1}catch(e){t=2}return t});t.assembleAndOrderScripts=function(e){var t=e.map((function(e){var t=document.createElement("template");return t.innerHTML=e,t.content.children[0]}));return t.sort((function(e,t){return c(e)-c(t)})),t}},"4Qil":function(e,t,n){"use strict";var i=n("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.LATEST_UPDATES_BLOCK=void 0;var a=i(n("t7Wz")),o=n("dU4i"),r=t.LATEST_UPDATES_BLOCK="LATEST_UPDATES_BLOCK";t.default=function(e){var t,n,i=e.article,s=e.inlineBlocks,l=e.isLivePost,c=void 0!==l&&l,u=[];return s.forEach((function(e){var t,n;(0,a.default)({block:e,storyline:null==i||null===(t=i.storylines)||void 0===t||null===(n=t[0])||void 0===n?void 0:n.storyline})&&u.push(e)})),!c&&(0,o.canStorylineComposeLatestUpdates)({storyline:null==i||null===(t=i.storylines)||void 0===t||null===(n=t[0])||void 0===n?void 0:n.storyline,parentUri:null==i?void 0:i.uri})&&u.push(r),u}},"4T40":function(e,t,n){"use strict";var i,a=n("VkAN"),o=n.n(a),r=n("gcR/"),s=n.n(r),l=n("lSNA"),c=n.n(l),u=(n("q1tI"),n("eFc+")),d=n.n(u),p=n("Jqp9"),f=n("s6ck"),m=n.n(f),h=n("XlcC"),g=n("V6Yu"),y=n("jOYC"),v=n("HTd6"),b=n("KzWH"),_=function(e){var t=e.data,n=e.className,i=e.firstHeading3Block,a=Object(p.useTheme)(),o=a.noFollowExternalLinks,r=t.textAlign?t.textAlign.toLowerCase():null,l="rightToLeft"===(null==a?void 0:a.languageDirection)?b.d:null,u="morning-briefing"===a.treatment&&"atHome"!==a.treatment,d="morning-briefing"!==a.treatment&&"atHome"!==a.treatment,v=Object(g.generateContentLink)(null==t?void 0:t.content),_=Object(p.cx)(c()(c()(c()({},b.c,u),b.a,d),Object(b.b)(i),a.isShortForm),y.b.layout.textAlign[r]||y.b.layout.textAlign.left,n,l),w=Object(h.createMapInlineUnionWithOptions)({noFollowExternalLinks:o});return a.isShortForm?s()(f.Heading3AsH2,{className:_,id:v},void 0,s()("span",{},void 0,t.content.map(w))):s()(m.a,{className:_,id:v},void 0,s()("span",{},void 0,t.content.map(w)))};_.displayName="Heading3Block",_.defaultProps={className:void 0,firstHeading3Block:!1},_.fragments={data:d()(i||(i=o()(["\n    fragment Heading3Block_data on Heading3Block {\n      textAlign\n      content {\n        ...TextInline_content\n      }\n    }\n    ","\n  "])),v.a.fragments.content)},t.a=_},"4TXN":function(e,t,n){"use strict";n.d(t,"c",(function(){return c})),n.d(t,"b",(function(){return k})),n.d(t,"a",(function(){return O}));var i=n("4mEQ"),a=n("XMA8"),o=function(e){return e&&Object(i.getUrl)(e.url,e.targetUrl)||""},r=function(e){if(e){var t=e.headline&&e.headline.default?e.headline.default:null;return Object(i.getHeadline)(t,e.promotionalHeadline)||""}return""},s=function(e){var t;return(null==e||null===(t=e.headline)||void 0===t?void 0:t.seo)||null};function l(e){return e&&e.promotionalHeadline?"string"!=typeof e.promotionalHeadline?"":e.promotionalHeadline:""}var c=function(e){if(e){var t=e.section&&e.section.displayName?e.section.displayName:null;return Object(i.isOpinion)(t)}return!1},u=function(e,t){if(t&&e){var n,a,o=(null===(n=t.subsection)||void 0===n?void 0:n.displayName)||(null===(a=t.section)||void 0===a?void 0:a.displayName)||null;return Object(i.themeHas)(e,{section:o})}return!1};function d(e){return e?e.__typename&&"promo"===e.__typename.toLowerCase()?null:e.firstPublished||null:null}function p(e){return e&&e.lastMajorModification?e.lastMajorModification:""}function f(e){return e&&e.firstPublished?e.firstPublished:""}function m(e){if(!e)return"";if(!e.promotionalMedia)return"";var t=Object(a.c)(e);if(t&&t.length>0){var n=t.filter((function(e){return"thumbLarge"===e.name}));if(n&&n[0]&&n[0].url)return n[0].url;if(t[0].url)return t[0].url}return""}function h(e){return e&&e.promotionalMedia?"EmbeddedInteractive"===e.promotionalMedia.__typename?e.promotionalMedia.imageWithCreditPromotionalMedia?"Image"!==e.promotionalMedia.imageWithCreditPromotionalMedia.__typename?null:void 0===e.promotionalMedia.imageWithCreditPromotionalMedia.credit?{spanImageCrops:e.promotionalMedia.imageWithCreditPromotionalMedia.spanImageCrops,caption:e.promotionalMedia.imageWithCreditPromotionalMedia.caption,credit:e.promotionalMedia.credit,__typename:"Image"}:e.promotionalMedia.imageWithCreditPromotionalMedia:null:e.promotionalMedia:null}var g=function(e){return u("opinion",e)?"Opinion":u("book review",e)?"Book Review":null};function y(e){if(!e)return null;if(!e.bylines)return null;if(!e.bylines[0])return null;if(!e.bylines[0].creators)return null;if(!e.bylines[0].creators[0])return null;var t=e.bylines[0].creators.filter((function(e){return"string"==typeof e.displayName})).map((function(e){return e.displayName}));return t&&Object(i.joinContributers)(t)||null}function v(e){if(!e)return"";if(e.__typename){var t=e.__typename.toLowerCase();if("recipe"===t)return"cooking";if("video"===t)return"video";if("slideshow"===t)return"slide show"}return""}var b=function(e){if(!e)return"";var t=v(e);return t||(c(e)?y(e):"")};function _(e){return e&&e.promotionalSummary?"string"!=typeof e.promotionalSummary?"":e.promotionalSummary:""}function w(e){if(!e)return"";if(!e.newsStatus)return"";if("string"!=typeof e.newsStatus)return"";if(e.newsStatus){var t=e.newsStatus.toLowerCase();if("live"===t)return"live";if("breaking"===t)return"breaking";if("developing"===t)return"developing"}return""}var x=function(e){return e?Object(i.getSummary)(e.summary,e.promotionalSummary):""},k=function(e){if(!e)return"";var t=e.__typename||null,n=e.section&&e.section.displayName?e.section.displayName:null,a=y(e)||null;return Object(i.getLabel)(t,n,a)||""};function O(e){var t,n,i;return{url:o(e),headline:r(e),promotionalHeadline:l(e),promotionalSummary:_(e),promotionalMedia:h(e),isOpinion:c(e),date:d(e),label:v(e),byline:y(e),lastModifiedDate:p(e),firstPublished:f(e),newsStatus:w(e),headlinePrefix:g(e),promoImageUrl:m(e),kicker:b(e),language:(null==e||null===(t=e.language)||void 0===t?void 0:t.code)||"",tone:(null==e||null===(n=e.tone)||void 0===n?void 0:n.toLowerCase())||"",section:(null==e||null===(i=e.section)||void 0===i?void 0:i.name)||"default",summary:x(e),seoHeadline:s(e)}}},"4a6l":function(e,t,n){"use strict";var i=n("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=n("3sMT"),o=n("Jqp9"),r=i(n("yEZI")),s=i(n("WThh")),l=i(n("wXC7")),c=(0,s.default)(["medium"]),u=(0,o.themeFn)("treatment",{none:function(e){return(0,o.css)("font-family:",l.default.font.serifBase,";padding-left:",l.default.font.size(15),";border-left:1px solid ",a.color.stroke.quaternary,";margin-top:0;margin-left:auto;margin-right:auto;color:",a.color.content.tertiary,";",c(e,{marginBottom:[l.default.font.size(12),l.default.font.size(20)]}),";",r.default,"{margin-right:0;margin-left:0;padding-left:0;padding-right:0;color:",a.color.content.tertiary,";",c(e,{fontSize:[17,18],lineHeight:[25,28],marginBottom:[l.default.font.size(12),l.default.font.size(20)]}),";&:last-child{margin-bottom:0;}}")},sponsored:function(e){return(0,o.css)("border-top:1px solid ",a.color.stroke.primary,";border-bottom:1px solid ",a.color.stroke.primary,";color:",a.color.content.tertiary,";font-family:",l.default.font.sponsoredBase,";font-weight:",l.default.font.weight.mediumBold,";text-align:center;",c(e,{margin:["".concat(l.default.font.size(36)," 0"),"".concat(l.default.font.size(40)," 0")],padding:["".concat(l.default.font.size(22)," 0"),"".concat(l.default.font.size(24)," 0")]}),";",r.default,"{margin-left:auto;margin-right:auto;",c(e,{fontSize:[18,22],lineHeight:[24,30],marginBottom:[l.default.font.size(18),l.default.font.size(22)]}),";&:last-child{margin-bottom:0;}}")}}),d=(0,o.styled)("blockquote",{target:"etf134l0"})("color:",a.color.content.tertiary,";",u,";");t.default=d},"4gon":function(e,t,n){"use strict";var i=n("TqRt"),a=n("cDf5");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=a(e)&&"function"!=typeof e)return{default:e};var n=s(t);if(n&&n.has(e))return n.get(e);var i={__proto__:null},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var r in e)if("default"!==r&&{}.hasOwnProperty.call(e,r)){var l=o?Object.getOwnPropertyDescriptor(e,r):null;l&&(l.get||l.set)?Object.defineProperty(i,r,l):i[r]=e[r]}return i.default=e,n&&n.set(e,i),i}(n("q1tI")),r=(i(n("17x9")),n("VXyk"));function s(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(s=function(e){return e?n:t})(e)}t.default=function(e){var t=e.item,n=e.trackLinkInteraction,i=(0,o.useCallback)((function(){return n(t.url)}),[t,n]);return o.default.createElement(o.default.Fragment,null,o.default.createElement("p",null,"“",o.default.createElement("span",{dangerouslySetInnerHTML:{__html:t.text}}),"”"),o.default.createElement("div",{className:r.bylineSectionClass},t.headshot&&o.default.createElement("div",{className:r.headshotClass},o.default.createElement("img",{src:t.headshot,alt:"headshot"})),o.default.createElement("div",{className:r.bylineContainerClass},o.default.createElement("span",{dangerouslySetInnerHTML:{__html:t.byline}}),t.url&&o.default.createElement(o.default.Fragment,null," ",o.default.createElement("a",{href:t.url,onClick:i},t.linkText)))))}},"4mEQ":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.themeHas=t.joinContributers=t.isOpinion=t.getUrl=t.getSummary=t.getLabel=t.getHeadline=t.createPrioritySelector=void 0;t.getUrl=function(e,t){return e&&"string"==typeof e?e:t&&"string"==typeof t?t:""},t.getHeadline=function(e,t){return e&&"string"==typeof e?e:t&&"string"==typeof t?t:""};var i=t.themeHas=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=[];return t.section&&"string"==typeof t.section&&n.push(t.section.toLowerCase()),t.tone&&"string"==typeof t.tone&&n.push(t.tone.toLowerCase()),t.treatment&&"string"==typeof t.treatment&&n.push(t.treatment.toLowerCase()),!!n.includes(e)},a=t.isOpinion=function(e){return i("opinion",{section:e})};t.getSummary=function(e,t){return e&&"string"==typeof e?e:t&&"string"==typeof t?t:null},t.getLabel=function(e,t,n){if(e){var i=e.toLowerCase();if("recipe"===i)return"Cooking";if("video"===i)return"Video";if("slideshow"===i)return"Slide Show"}if(a(t)){var o=n?" | ".concat(n):"";return"Opinion".concat(o)}return""},t.joinContributers=function(e){return e?0===e.length?null:e.reduce((function(t,n,i){return t+(i===e.length-1?" and ":", ")+n})):null},t.createPrioritySelector=function(e){return function(t){for(var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(e){return e},i=0;i<e.length;i+=1)for(var a=e[i],o=0;o<t.length;o+=1){var r=t[o];if(n(r)===a)return r}return null}}},"4mNl":function(e,t,n){"use strict";var i=n("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=i(n("7W2e"));t.default=a.default},"4nBj":function(e,t,n){"use strict";var i,a=n("VkAN"),o=n.n(a),r=n("gcR/"),s=n.n(r),l=(n("q1tI"),n("eFc+")),c=n.n(l),u=n("Jqp9"),d=n("Zgws"),p=n.n(d),f=function(e){var t=e.className;return s()(p.a,{className:Object(u.cx)(t)})};f.displayName="RuleBlock",f.defaultProps={className:void 0},f.fragments={data:c()(i||(i=o()(["\n    fragment RuleBlock_data on RuleBlock {\n      type\n    }\n  "])))},t.a=f},"4r6p":function(e,t,n){"use strict";var i,a=n("VkAN"),o=n.n(a),r=n("gcR/"),s=n.n(r),l=n("J4zp"),c=n.n(l),u=(n("q1tI"),n("eFc+")),d=n.n(u),p=n("Jqp9"),f=n("wXC7"),m=n.n(f),h=n("MKiQ"),g=n.n(h),y=n("y1Vo"),v=n("xGNk"),b=n.n(v),_=Object(p.css)("margin:",m.a.breakpoint.mobileBlockMargins,";width:",m.a.breakpoint.mobileFullWidth,";max-width:",m.a.breakpoint.textBodyWidth,"px;",m.a.breakpoint.medium,"{width:",m.a.breakpoint.textBodyWidth,"px;margin:",m.a.breakpoint.desktopMediaMargins,";}"),w=Object(p.css)("width:100%;height:51vw;",m.a.breakpoint.small,"{width:",m.a.breakpoint.textBodyWidth,"px;height:319px;}"),x=Object(p.css)("width:100%;height:100%;"),k=function(e){var t=e.data,n=e.styles,i=t.youTubeId,a=t.caption,o=t.credit,r=t.autoplay,l=t.mute,u=Object.entries({autoplay:r,mute:l}).reduce((function(e,t){var n=c()(t,2),i=n[0],a=n[1];if(a){var o="".concat(i,"=").concat(a);e+="".concat(e?"&":"?").concat(o)}return e}),"");return s()("figure",{className:Object(p.cx)(n,_)},void 0,s()("div",{className:w},void 0,s()("iframe",{title:"YouTube Video",className:x,src:"https://www.youtube.com/embed/".concat(i).concat(u),frameBorder:"0",allowFullScreen:!0})),s()(y.Caption,{},void 0,a&&s()(g.a,{},void 0,a),o&&s()(b.a,{},void 0,s()("span",{className:m.a.a11y.visuallyHidden},void 0,"Credit"),o)))};k.displayName="YouTubeEmbedBlock",k.fragments={data:d()(i||(i=o()(["\n    fragment YouTubeEmbedBlock_data on YouTubeEmbedBlock {\n      youTubeId\n      caption\n      credit\n    }\n  "])))},k.defaultProps={data:void 0,styles:""};t.a=k},"4uw1":function(e,t,n){"use strict";var i=n("hU1o");t.a=function(){var e=Object(i.a)().webviewEnvironment;return null==e?void 0:e.isPreloaded}},"4zjr":function(e,t,n){"use strict";var i=n("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=i(n("q1tI")),o=(i(n("17x9")),n("49re"));function r(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return e?a.default.createElement("script",{type:"application/ld+json",key:t,dangerouslySetInnerHTML:{__html:JSON.stringify(e)}}):null}r.displayName="structuredDataScriptTag";var s=function(e){var t=e.data,n=e.meteredContentClass,i=e.platform,s=e.inlineAsset,l=e.environment,c=(0,o.getStructuredData)({data:t,meteredContentClass:n,platform:i,inlineAsset:s,environment:l});return Array.isArray(c)?a.default.createElement(a.default.Fragment,null,c.map((function(e,t){return r(e,t)}))):r(c)};s.defaultProps={meteredContentClass:"",platform:"",inlineAsset:!1,environment:""};t.default=s},"510Z":function(e,t,n){"use strict";var i,a=n("gcR/"),o=n.n(a),r=(n("q1tI"),n("Jqp9")),s=n("KQYy"),l=n("MKiQ"),c=n.n(l),u=n("XlcC"),d=n("y1Vo"),p=n("xGNk"),f=n.n(p),m=n("oRP5"),h=n("3sMT"),g=n("wXC7"),y=n.n(g),v=Object(r.css)("width:100%;vertical-align:top;img{width:100%;vertical-align:top;}"),b=Object(r.css)("display:flex;background-color:",h.dark.colors.background.primary.transform(y.a.setAlpha(.6)).rgba,";justify-content:center;align-items:center;position:absolute;height:28px;width:28px;left:9px;bottom:9px;border:1px solid white;border-radius:4px;"),_=function(e){var t=e.caption,n=e.richCaption,a=e.credit,l=e.defaultCropSrc,p=e.srcSet,h=e.sizes,g=e.figureClass,y=e.containerClass,_=e.lazyLoad,w=e.lazyLoadWidth,x=e.lazyLoadHeight,k=e.imageClass,O=e.fullBleedImageStyles,T=e.imageLoadedHandler,C=e.alt,E=e.renditions,S=e.initialAspectRatio,P=e.imageContainerRef,I=e.iconType,M=e.useMobileCrop,A=e.textOverlay,j=e.className,N=Object(r.useTheme)(),L=N.noFollowExternalLinks,D=C===t,R=d.Caption;"rightToLeft"===(null==N?void 0:N.languageDirection)&&(R=d.RightToLeftCaption);var B={className:Object(r.cx)(v,k),src:l,srcSet:p,sizes:h,onLoad:T,alt:D?"":C},z=n?n.map((function(e){var t,n=Object(u.createMapInlineUnionWithOptions)({noFollowExternalLinks:L});return e.content?null==e||null===(t=e.content)||void 0===t?void 0:t.map(n):null})):null;return o()("figure",{className:Object(r.cx)(g),"aria-label":"media",role:"group"},void 0,o()("div",{className:y,"data-testid":"imageContainer-children-Image"},void 0,o()(s.a,{lazy:_,width:w,height:x,imageProps:B,renditions:E,fullBleedImageStyles:O,initialAspectRatio:S,imageContainerRef:P,useMobileCrop:M,className:j}),I&&"Video"===I&&(i||(i=o()("i",{className:b},void 0,o()(m.a,{size:"extrasmall"})))),A),o()(R,{"data-testid":"photoviewer-children-ImageCaption"},void 0,z&&o()(c.a,{},void 0,z),!z&&t&&o()(c.a,{dangerouslySetInnerHTML:{__html:t||""}}),a&&o()(f.a,{},void 0,o()("span",{dangerouslySetInnerHTML:{__html:a||""},"aria-hidden":"false"}))))};_.displayName="Image",_.defaultProps={caption:void 0,richCaption:void 0,credit:void 0,defaultCropSrc:void 0,srcSet:[],sizes:void 0,figureClass:void 0,containerClass:void 0,lazyLoad:!1,lazyLoadWidth:1,lazyLoadHeight:1,imageClass:void 0,fullBleedImageStyles:void 0,imageLoadedHandler:function(){return null},alt:"",initialAspectRatio:1,renditions:[],imageContainerRef:null,iconType:void 0,useMobileCrop:!1,textOverlay:null,className:void 0};t.a=_},"534C":function(e,t,n){"use strict";var i=n("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=i(n("q1tI")),o=i(n("qrZX"));t.default=function(e){var t=e&&e.collections&&e.collections.length>0&&e.collections.find((function(e){return"SYNDICATED"===e.collectionType&&"times_exclusives"===e.slug}));return(t?t.name:null)&&a.default.createElement(o.default,null,"The Great Read")}},"5DNu":function(e,t,n){"use strict";n.d(t,"a",(function(){return a})),n.d(t,"c",(function(){return o})),n.d(t,"b",(function(){return r}));var i=function(){var e,t=new URLSearchParams(window.location.search);return decodeURIComponent(null!==(e=t.get("region"))&&void 0!==e?e:"")||void 0},a=function(e){var t=e.clientId,n=e.newsletterName,a=e.productCode,o=e.label,r=void 0===o?"":o;return{event:"impression",module:{name:"newsletter",context:t,region:i()||"body|marginalia",label:r,element:{name:a,label:r}},newsletter:{product:a,productName:n}}},o=function(e){var t=e.clientId,n=e.newsletterName,a=e.productCode,o=e.label,r=void 0===o?"":o;return{event:"moduleInteraction",eventData:{pagetype:"article",trigger:"module",type:"click",status:"success"},module:{name:"newsletters",context:t,region:i()||"body|marginalia",element:{name:"subscribe",label:r}},newsletter:{product:a,productName:n}}},r=function(e){return{event:"moduleInteraction",eventData:{type:"response",trigger:"module"},module:{name:"newsletter-shared-ui",context:e.clientId,region:"embed",element:{name:"newsletter code invalid",label:e.productCode,url:""}}}}},"5HKt":function(e,t,n){"use strict";var i=this&&this.__makeTemplateObject||function(e,t){return Object.defineProperty?Object.defineProperty(e,"raw",{value:t}):e.raw=t,e};Object.defineProperty(t,"__esModule",{value:!0}),t.giftingButtonClass=t.wrapHeadline=t.logoClass=t.giftingDockShowMobile768=t.giftingDockShowDesktop768=t.giftingDockShowMobile=t.giftingDockShowDesktop=t.subHeadlineGiftingBF=t.headlineGiftingBF=t.contentDockDesktop=t.redBoxClass=t.wrapRedBoxClassMobile=t.wrapRedBoxClass=t.logosDockDesktop=t.mainContent=t.contentTextClass=t.headerTextClass=void 0;var a=n("Jqp9"),o=n("lVLo");t.headerTextClass=(0,a.css)(r||(r=i(["\n  font-family: ",";\n  font-size: 15px;\n  font-weight: ",";\n  margin: auto 0 auto 20px;\n  white-space: pre-wrap;\n\n  @media (min-width: ","px) {\n    white-space: unset;\n  }\n"],["\n  font-family: ",";\n  font-size: 15px;\n  font-weight: ",";\n  margin: auto 0 auto 20px;\n  white-space: pre-wrap;\n\n  @media (min-width: ","px) {\n    white-space: unset;\n  }\n"])),o.fonts.franklin,o.fontWeights.normal,o.widths.small),t.contentTextClass=(0,a.css)(s||(s=i(["\n  font-family: ",";\n  font-size: 18px;\n  font-weight: ",";\n  color: ",";\n  margin: 0 0 18px;\n"],["\n  font-family: ",";\n  font-size: 18px;\n  font-weight: ",";\n  color: ",";\n  margin: 0 0 18px;\n"])),o.fonts.cheltenham,o.fontWeights.light,o.colors.white);var r,s,l,c,u,d,p,f,m,h,g,y,v,b,_,w,x;t.mainContent=(0,a.css)(l||(l=i(["\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  background-color: #f6efdf;\n  border-radius: 6px;\n  padding: 0 ","px;\n  height: 140px;\n  margin: 0 ","px ","px;\n  width: calc(100% - (","px + ","px));\n  flex-direction: row;\n  justify-content: space-evenly;\n"],["\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  background-color: #f6efdf;\n  border-radius: 6px;\n  padding: 0 ","px;\n  height: 140px;\n  margin: 0 ","px ","px;\n  width: calc(100% - (","px + ","px));\n  flex-direction: row;\n  justify-content: space-evenly;\n"])),26,20,20,52,40),t.logosDockDesktop=(0,a.css)(c||(c=i(["\n  @media (max-width: 690px) {\n    display: none;\n  }\n"],["\n  @media (max-width: 690px) {\n    display: none;\n  }\n"]))),t.wrapRedBoxClass=(0,a.css)(u||(u=i(["\n  width: 150px;\n  @media (max-width: 1024px) {\n    width: 90px;\n  }\n  @media (max-width: 768px) {\n    width: 80px;\n  }\n  @media (max-width: 690px) {\n    display: none;\n  }\n"],["\n  width: 150px;\n  @media (max-width: 1024px) {\n    width: 90px;\n  }\n  @media (max-width: 768px) {\n    width: 80px;\n  }\n  @media (max-width: 690px) {\n    display: none;\n  }\n"]))),t.wrapRedBoxClassMobile=(0,a.css)(d||(d=i(["\n  display: none;\n  @media (max-width: 690px) {\n    display: inline-flex;\n    width: 100px;\n  }\n"],["\n  display: none;\n  @media (max-width: 690px) {\n    display: inline-flex;\n    width: 100px;\n  }\n"]))),t.redBoxClass=(0,a.css)(p||(p=i(["\n  width: 90%;\n  padding-bottom: 20px;\n  @media (max-width: 1024px) {\n    width: 100%;\n    padding-bottom: 10px;\n  }\n  @media (max-width: 768px) {\n    width: 100%;\n    padding-bottom: 0px;\n  }\n  @media (max-width: 690px) {\n    width: 130%;\n    padding-top: 30px;\n  }\n"],["\n  width: 90%;\n  padding-bottom: 20px;\n  @media (max-width: 1024px) {\n    width: 100%;\n    padding-bottom: 10px;\n  }\n  @media (max-width: 768px) {\n    width: 100%;\n    padding-bottom: 0px;\n  }\n  @media (max-width: 690px) {\n    width: 130%;\n    padding-top: 30px;\n  }\n"]))),t.contentDockDesktop=(0,a.css)(f||(f=i(["\n  display: flex;\n  flex-direction: row;\n  justify-content: space-around;\n  align-items: stretch;\n  align-items: center;\n  justify-content: center;\n"],["\n  display: flex;\n  flex-direction: row;\n  justify-content: space-around;\n  align-items: stretch;\n  align-items: center;\n  justify-content: center;\n"]))),t.headlineGiftingBF=(0,a.css)(m||(m=i(["\n  margin: 0;\n  font-size: 20px;\n  font-family: ",";\n  font-weight: ",";\n  padding-bottom: 9px;\n  @media (max-width: 768px) {\n    padding-bottom: 6px;\n    font-size: 17px;\n  }\n"],["\n  margin: 0;\n  font-size: 20px;\n  font-family: ",";\n  font-weight: ",";\n  padding-bottom: 9px;\n  @media (max-width: 768px) {\n    padding-bottom: 6px;\n    font-size: 17px;\n  }\n"])),o.fonts.cheltenham,o.fontWeights.normal),t.subHeadlineGiftingBF=(0,a.css)(h||(h=i(["\n  margin: 0;\n  font-size: 14px;\n  color: #f35850;\n  font-family: ",";\n  font-weight: ",";\n  @media (max-width: 768px) {\n    font-size: 13.5px;\n    line-height: 120%;\n  }\n"],["\n  margin: 0;\n  font-size: 14px;\n  color: #f35850;\n  font-family: ",";\n  font-weight: ",";\n  @media (max-width: 768px) {\n    font-size: 13.5px;\n    line-height: 120%;\n  }\n"])),o.fonts.franklin,o.fontWeights.normal),t.giftingDockShowDesktop=(0,a.css)(g||(g=i(["\n  display: inline;\n  @media (max-width: 690px) {\n    display: none !important;\n  }\n"],["\n  display: inline;\n  @media (max-width: 690px) {\n    display: none !important;\n  }\n"]))),t.giftingDockShowMobile=(0,a.css)(y||(y=i(["\n  display: none !important;\n  @media (max-width: 690px) {\n    display: flex !important;\n  }\n"],["\n  display: none !important;\n  @media (max-width: 690px) {\n    display: flex !important;\n  }\n"]))),t.giftingDockShowDesktop768=(0,a.css)(v||(v=i(["\n  display: inline;\n  @media (max-width: 768px) {\n    display: none !important;\n  }\n"],["\n  display: inline;\n  @media (max-width: 768px) {\n    display: none !important;\n  }\n"]))),t.giftingDockShowMobile768=(0,a.css)(b||(b=i(["\n  display: none !important;\n  @media (max-width: 768px) {\n    display: block;\n  }\n"],["\n  display: none !important;\n  @media (max-width: 768px) {\n    display: block;\n  }\n"]))),t.logoClass=(0,a.css)(_||(_=i(["\n  margin-top: 12px;\n  width: 142px;\n  svg {\n    height: 100%;\n    max-width: 100%;\n  }\n  @media (max-width: 768px) {\n    width: 120px;\n  }\n"],["\n  margin-top: 12px;\n  width: 142px;\n  svg {\n    height: 100%;\n    max-width: 100%;\n  }\n  @media (max-width: 768px) {\n    width: 120px;\n  }\n"]))),t.wrapHeadline=(0,a.css)(w||(w=i(["\n  strong {\n    font-weight: "," !important;\n  }\n"],["\n  strong {\n    font-weight: "," !important;\n  }\n"])),o.fontWeights.bold),t.giftingButtonClass=(0,a.css)(x||(x=i(["\n  display: flex;\n  align-items: baseline;\n  gap: 5px;\n  border-radius: 3px;\n  font-family: ",";\n  font-weight: ",";\n  font-size: 12px;\n  text-decoration: none;\n  background-color: ",";\n  color: ",";\n  padding: 10px 20px;\n  @media (max-width: 768px) {\n    margin-top: 10px;\n  }\n"],["\n  display: flex;\n  align-items: baseline;\n  gap: 5px;\n  border-radius: 3px;\n  font-family: ",";\n  font-weight: ",";\n  font-size: 12px;\n  text-decoration: none;\n  background-color: ",";\n  color: ",";\n  padding: 10px 20px;\n  @media (max-width: 768px) {\n    margin-top: 10px;\n  }\n"])),o.fonts.franklin,o.fontWeights.semiBold,o.colors.black,o.colors.white)},"5LTd":function(e,t,n){"use strict";var i=this&&this.__makeTemplateObject||function(e,t){return Object.defineProperty?Object.defineProperty(e,"raw",{value:t}):e.raw=t,e};Object.defineProperty(t,"__esModule",{value:!0}),t.loginLink=t.topperWrapClass=void 0;var a,o,r=n("Jqp9"),s=n("lVLo");t.topperWrapClass=(0,r.css)(a||(a=i(["\n  display: inline;\n\n  @media (min-width: ","px) {\n    display: block;\n  }\n\n  @media (min-width: ","px) {\n    display: inline;\n  }\n"],["\n  display: inline;\n\n  @media (min-width: ","px) {\n    display: block;\n  }\n\n  @media (min-width: ","px) {\n    display: inline;\n  }\n"])),s.widths.verySmall,s.widths.small),t.loginLink=(0,r.css)(o||(o=i(["\n  color: ",";\n  font-weight: 700;\n  text-decoration: none;\n"],["\n  color: ",";\n  font-weight: 700;\n  text-decoration: none;\n"])),s.colors.veryDarkGrey)},"5ON2":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.OakReader=t.ArticleReader=void 0;t.ArticleReader={getBody:function(e){var t=e.article,n=void 0===t?{}:t;return n.sprinkledBody?n.sprinkledBody.content:n.content?n.content:[]},getMatchingBlocks:function(e){var t=e.article,n=e.test;return this.getBody({article:t}).filter(n)}},t.OakReader={getMatchingBlocks:function(e){var t=e.article,n=e.test,i=[];return t.descendants((function(e){return n(e)?i.push(e):null})),i}}},"5OSB":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.hiddenA11yAnchorClass=t.adContainerClass=void 0;var i=n("Jqp9");t.hiddenA11yAnchorClass=(0,i.css)("position:absolute;width:1px;height:1px;margin:-1px;padding:0;border:0;clip:rect(0 0 0 0);overflow:hidden;text-align:center;&:focus-visible{background-color:#fff;border-radius:3px;height:auto;width:auto;clip:auto;font-family:nyt-franklin,helvetica,arial,sans-serif;font-size:0.6875rem;font-weight:700;left:50%;padding:8px 8px 6px;transform:translateX(-50%);top:5px;}"),t.adContainerClass=(0,i.css)("text-align:center;height:100%;display:block;")},"5OxE":function(e,t,n){"use strict";var i,a=n("VkAN"),o=n.n(a),r=n("gcR/"),s=n.n(r),l=n("lSNA"),c=n.n(l),u=n("q1tI"),d=n.n(u),p=n("eFc+"),f=n.n(p),m=n("InUh"),h=n.n(m),g=n("fZdH"),y=n("24cm"),v=n.n(y),b=n("4zjr"),_=n.n(b),w=n("9HCV");function x(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function k(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?x(Object(n),!0).forEach((function(t){c()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):x(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var O=h()((function(){return Promise.all([n.e(0),n.e(16),n.e(34)]).then(n.t.bind(null,"Q1ct",7))}),{loadableGenerated:{webpack:function(){return["Q1ct"]},modules:["@nyt/components/lib/CardDeck"]}});function T(e){var t=e.className,n=e.data,i=e.article,a=Object(g.a)(),o=a.SHA_cardShare_0424&&a.SHA_cardShare_0424.allocated&&"1_Share"===a.SHA_cardShare_0424.variant;if(!n.media)return null;var r=k(k({ShareButtonComponent:w.a,parentAsset:i},n.media),{},{abra:a,isInCarouselShareTest:o});return d.a.createElement(d.a.Fragment,null,s()("div",{className:t},void 0,d.a.createElement(O,r)),s()(_.a,{data:n,platform:"vi",inlineAsset:!0}))}T.fragments={data:f()(i||(i=o()(["\n    fragment CardDeckBlock_data on CardDeckBlock {\n      media {\n        id\n        ...onCardDeck\n        ... on CardDeck {\n          asset {\n            ... on CardDeckAsset {\n              cards {\n                assets {\n                  ... on Video {\n                    id\n                    firstPublished\n                    embedded\n                    headline {\n                      default\n                    }\n                  }\n                }\n              }\n            }\n          }\n        }\n      }\n    }\n\n    ","\n  "])),v.a)},t.a=T},"5UIh":function(e,t,n){"use strict";var i=this&&this.__createBinding||(Object.create?function(e,t,n,i){void 0===i&&(i=n);var a=Object.getOwnPropertyDescriptor(t,n);a&&!("get"in a?!t.__esModule:a.writable||a.configurable)||(a={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,i,a)}:function(e,t,n,i){void 0===i&&(i=n),e[i]=t[n]}),a=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&i(t,e,n);return a(t,e),t},r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var s=o(n("q1tI")),l=n("Jqp9"),c=r(n("17x9")),u=r(n("m9ia")),d=r(n("AQjK")),p=r(n("uo7y")),f=r(n("wXpe")),m=n("HDG5"),h=n("syiw");function g(e){var t,n,i,a,o=e.unit,r=e.card,c=e.className,g=e.headingClassName,y=e.contentID,v=e.dockID,b=e.header,_=e.headerCollapsedCTA,w=e.headerExpandedCTA,x=e.isDockDismissible,k=e.minimized,O=e.isDockExpandable,T=e.onDockCTAClick,C=e.onDockHeadingClick,E=e.underlayConfig,S=e.overrideHeaderStyles,P=e.overrideHeaderWidth,I=e.testId,M=e.minimizedTrackingValue,A=e.hideVerticleRuleInHeader,j=e.headingClassStyle,N=e.headingInfoContainerStyle,L=e.headingMessageClassStyle,D=e.ctaIconWrapperStyle,R=e.ctaContainerStyle,B=e.ctaActionTextContainerStyle,z=e.dividerStyle,F=e.ctaActionTextClassStyle,U=e.headerWrapperStyle,H=e.autoDismissTimeout,W=e.timesToShowExpanded,q=e.daysBeforeExpandedViewsReset,V=e.ctaButtonStyles,G=(0,s.useState)(k),Y=G[0],X=G[1],Z=(0,s.useState)(!1),J=Z[0],K=Z[1],$=(0,s.useState)(0),Q=$[0],ee=$[1],te=(0,s.useState)(0),ne=te[0],ie=te[1],ae=(0,h.useMessageSelection)({config:{name:"dock"}}),oe=(0,s.useState)(!1),re=oe[0],se=oe[1],le=(0,m.useUserState)();if((0,s.useEffect)((function(){if("undefined"!=typeof window&&"function"==typeof window.dispatchEvent&&"function"==typeof CustomEvent){var e=Boolean(!J),t=!1,n=0;e&&(t=Boolean(!Y&&!J)),t?n=Number(ne+Q):e&&(n=Number(Q)),window.dispatchEvent(new CustomEvent("dockInfo",{detail:{dockHeight:n,dockVisible:e,dockExpanded:t}}))}}),[ne,Q,Y,J]),!re&&O&&W){var ce=null===(n=null===(t=null==ae?void 0:ae.response)||void 0===t?void 0:t.userstate())||void 0===n?void 0:n.messageSelectionMessageCaps,ue=null;if(ce)if((me=ce).forEach((function(e){var t,n;"dock"===(null==e?void 0:e.unit)&&(null==e?void 0:e.campaign)===(null===(t=null==ae?void 0:ae.response)||void 0===t?void 0:t.campaign())&&(null==e?void 0:e.audience)===(null===(n=null==ae?void 0:ae.response)||void 0===n?void 0:n.audience())&&(ue=e)})),null!==ue){var de=ue,pe=new Date(null==de?void 0:de.lastSeenOn).getTime(),fe=(new Date).getTime();Math.abs(Math.round(fe-pe)/6e4)>24*(q||365)*60?(X(!1),de.viewCount=1):(de.viewCount>W&&X(!0),de.viewCount+=1),de.lastSeenOn=(new Date).toISOString(),le.update({messageSelectionMessageCaps:me})}if(!ue){var me=[];ce&&(me=ce),me.push({unit:"dock",campaign:null===(i=null==ae?void 0:ae.response)||void 0===i?void 0:i.campaign(),audience:null===(a=null==ae?void 0:ae.response)||void 0===a?void 0:a.audience(),lastSeenOn:(new Date).toISOString(),viewCount:1,dismissed:!1}),le.update({messageSelectionMessageCaps:me})}se(!0)}(0,s.useEffect)((function(){var e;H&&(e=setInterval((function(){K(!0),clearInterval(e)}),H))}),[H]);var he=Object.keys(E||{}).length>0&&!k;return s.default.createElement(s.default.Fragment,null,s.default.createElement(f.default,{id:"dock-container","data-testid":I,"data-campaign":null==o?void 0:o.campaign,"data-audience":null==o?void 0:o.audience,style:{"--heading-height":"".concat(Q,"px"),"--body-height":"".concat(ne,"px")},className:(0,l.cx)(y,{shown:Y&&!J,expanded:!Y&&!J,closed:J},c)},s.default.createElement(u.default,{className:g,contentID:y,dockExpanded:!Y,dockID:v,header:b,headerCollapsedCTA:_,headerExpandedCTA:w,isDockExpandable:O,isDockDismissible:x,onDockCTAClick:function(e){var t,n;void 0===e&&(e=new Event("",void 0));var i="button"===(null===(n=null===(t=null==e?void 0:e.currentTarget)||void 0===t?void 0:t.tagName)||void 0===n?void 0:n.toLowerCase());x&&i&&(e.stopPropagation(),null==o||o.trackInteraction(e,{extraProps:{module:{element:{name:"close",label:"close",url:""}}}}),K(!0)),T(e)},onDockHeadingClick:function(e){if(void 0===e&&(e={}),O){var t=Y;X(!Y),null==o||o.trackInteraction(e,{extraProps:{module:{element:{name:t?"expand":M||"minimize",label:t?_:w,url:""}}}})}C(e)},onResize:function(e){ee(e)},overrideHeaderStyles:S,overrideHeaderWidth:P,hideVerticleRuleInHeader:A,headingClassStyle:j,headingInfoContainerStyle:N,headingMessageClassStyle:L,ctaIconWrapperStyle:D,ctaContainerStyle:R,ctaActionTextContainerStyle:B,dividerStyle:z,ctaActionTextClassStyle:F,headerWrapperStyle:U,ctaButtonStyles:V}),s.default.createElement(d.default,{card:r,onResize:function(e){ie(e)}})),s.default.createElement(p.default,{visible:he,onClick:function(){(null==E?void 0:E.clickable)&&X(!0)}}))}g.propTypes={card:c.default.node,className:c.default.string,headingClassName:c.default.string,contentID:c.default.string.isRequired,dockID:c.default.string,header:c.default.node,headerCollapsedCTA:c.default.string,headerExpandedCTA:c.default.string,isDockDismissible:c.default.bool.isRequired,minimized:c.default.bool,isDockExpandable:c.default.bool,onDockCTAClick:c.default.func,onDockHeadingClick:c.default.func,underlayConfig:c.default.shape({clickable:c.default.bool}),overrideHeaderStyles:c.default.bool,overrideHeaderWidth:c.default.bool,testId:c.default.string,headingClassStyle:c.default.string,headingInfoContainerStyle:c.default.string,headingMessageClassStyle:c.default.string,ctaIconWrapperStyle:c.default.string,ctaContainerStyle:c.default.string,ctaActionTextContainerStyle:c.default.string,dividerStyle:c.default.string,ctaActionTextClassStyle:c.default.string,headerWrapperStyle:c.default.string,autoDismissTimeout:c.default.number,timesToShowExpanded:c.default.number,daysBeforeExpandedViewsReset:c.default.number},g.defaultProps={card:null,className:"",dockID:"standard",headingClassName:"",header:null,headerCollapsedCTA:null,headerExpandedCTA:null,minimized:!0,isDockExpandable:!0,onDockCTAClick:function(){},onDockHeadingClick:function(){},underlayConfig:null,overrideHeaderStyles:!1,overrideHeaderWidth:!1,hideVerticleRuleInHeader:!1,autoDismissTimeout:0},t.default=g},"5YwL":function(e,t,n){"use strict";var i=n("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.OldLiveBriefingProps=t.NewLiveBriefingLegacyCollectionProps=t.NewLiveBriefingFeedPublicationProps=t.LatestUpdatesStorylineProps=void 0;var a=i(n("17x9")),o=t.OldLiveBriefingProps=a.default.shape({body:a.default.shape({content:a.default.arrayOf(a.default.shape({latestUpdate:a.default.shape({content:a.default.shape({text:a.default.string})})}))})}),r=t.NewLiveBriefingLegacyCollectionProps=a.default.shape({__typename:a.default.string,url:a.default.string,headline:a.default.shape({default:a.default.string}),stream:a.default.shape({edges:a.default.arrayOf(a.default.shape({node:a.default.shape({headline:a.default.shape({default:a.default.string})})}))})}),s=t.NewLiveBriefingFeedPublicationProps=a.default.shape({__typename:a.default.string,url:a.default.string,headline:a.default.shape({default:a.default.string}),items_beta:a.default.shape({edges:a.default.arrayOf(a.default.shape({node:a.default.shape({headline:a.default.shape({default:a.default.string})})}))})});t.LatestUpdatesStorylineProps=a.default.shape({displayName:a.default.string,hubAssets:a.default.arrayOf(a.default.shape({asset:a.default.shape({__typename:a.default.string,uri:a.default.string,url:a.default.string})})),promotedLiveAssets:a.default.arrayOf(a.default.shape({displayName:a.default.string,asset:a.default.oneOfType([o,r,s])}))})},"5ZkK":function(e,t,n){"use strict";var i=n("gcR/"),a=n.n(i),o=n("q1tI"),r=n("ZKN5"),s=n("lwsE"),l=n.n(s),c=n("W8MJ"),u=n.n(c),d=n("a1gu"),p=n.n(d),f=n("Nsbk"),m=n.n(f),h=n("7W2i"),g=n.n(h),y=n("+ClL"),v=n("lSNA"),b=n.n(v),_=n("J4zp"),w=n.n(_),x=n("Jqp9"),k=n("cUQY"),O=n("WtH/"),T=n.n(O),C=n("wXC7"),E=n.n(C),S=(E.a.color.gray10,E.a.font.size(20),E.a.font.weight.bold,E.a.font.size(22),E.a.breakpoint.medium,E.a.font.size(26),E.a.font.size(30),E.a.font.weight.bold,E.a.color.gray10,E.a.font.size(20),E.a.font.size(22),E.a.breakpoint.medium,Object(x.css)("position:fixed;overflow:hidden;height:100%;width:100%;")),P=Object(x.css)("position:absolute;top:40px;height:100%;width:100%;pointer-events:none;background:linear-gradient(transparent,",E.a.color.black,");"),I=Object(x.css)("position:absolute;top:350px;height:100%;width:100%;pointer-events:none;background:linear-gradient(transparent,",E.a.color.black,");"),M=(E.a.font.franklinBase,E.a.font.weight.medium,E.a.font.franklinBase,E.a.font.weight.bold,E.a.font.size(16),E.a.font.size(24),E.a.font.weight.normal,E.a.breakpoint.medium,E.a.color.black,E.a.breakpoint.medium,E.a.font.weight.bold,E.a.font.weight.normal,E.a.zIndex.interstitialModal,n("u1H9"));function A(e){var t=e.isInteractiveRoute,n=e.children,i=Object(k.a)(),r=i.showGateway,s=i.gatewayIsEmbedded,l=i.gatewayTypeVariation,c=i.meterReady,u=i.setGatewayIsEmbedded,d=Object(o.useState)(!1),p=w()(d,2),f=p[0],m=p[1],h=null;return Object(o.useEffect)((function(){return t&&r&&!f?(f||(e=Object(M.e)()),c&&s&&!f&&(Object(M.h)(l)?Object(M.f)(l,m):u(!1)),e||function(){}):function(){};var e}),[s,l,t,c,u,r,f]),r&&c&&(h=a()(T.a,{isStatic:s,isEmbedded:s})),a()("div",{},void 0,a()("div",{className:Object(x.cx)("vi-gateway-container",b()({},S,r&&!s)),"data-testid":"vi-gateway-container"},void 0,n,r&&!s&&a()("div",{className:Object(x.cx)(b()({},P,f||!t),b()({},I,!f&&t))})),h)}A.displayName="GatewayContent",A.defaultProps={isInteractiveRoute:!1};var j=A;function N(e,t,n){return t=m()(t),p()(e,function(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return function(){return!!e}()}()?Reflect.construct(t,n||[],m()(e).constructor):t.apply(e,n))}var L=function(e){function t(){var e;l()(this,t);for(var n=arguments.length,i=new Array(n),a=0;a<n;a++)i[a]=arguments[a];return(e=N(this,t,[].concat(i))).state={error:!1},e}return g()(t,e),u()(t,[{key:"componentDidCatch",value:function(e){Object(y.a)(new Error("<GatewayContentErrorBoundary>: ".concat(e.toString())),{msg:"Gateway"}),this.setState({error:!0})}},{key:"render",value:function(){return this.state.error?this.props.children:a()(j,{isInteractiveRoute:this.props.isInteractiveRoute},void 0,this.props.children)}}])}(o.Component);L.defaultProps={children:null,component:null,isInteractiveRoute:!1},L.displayName="GatewayContentErrorBoundary";var D=L;function R(e){var t=e.isInteractiveRoute,n=e.children;return a()(D,{isInteractiveRoute:t},void 0,n)}R.displayName="Gateway",R.defaultProps={isInteractiveRoute:!1};t.a=Object(r.a)(R)},"5dFD":function(e,t,n){"use strict";var i,a=n("VkAN"),o=n.n(a),r=n("lSNA"),s=n.n(r),l=n("QILm"),c=n.n(l),u=n("q1tI"),d=n.n(u),p=n("eFc+"),f=n.n(p),m=n("KeRS"),h=n.n(m),g=n("A4Gh"),y=n("4uw1"),v=["link","children","search","disableLink","className"];function b(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function _(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?b(Object(n),!0).forEach((function(t){s()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):b(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var w={Article:!0,Image:!0,Section:!0,LegacyCollection:!0},x={cooking:!0},k={www:!0,alpha:!0,nytimes:!0},O=["www.legacy.com"],T=function(e,t){var n;t&&((null===(n=e)||void 0===n?void 0:n.indexOf("?"))>-1?e+="&".concat(null==t?void 0:t.split("?")[1]):(null==t?void 0:t.indexOf("?"))>-1?e+=t:e+="?".concat(t));return e},C=function(e){var t,n,i,a,o,r,s,l=e.link,u=e.children,p=e.search,f=e.disableLink,m=e.className,b=c()(e,v),C=Object(y.a)();if(f)return u;if(l&&l.url){var E,S,P=t=Object(g.parse)(l.url);o=P.pathname,r=P.search,s=P.hash,i=P.href;var I=null===(E=a=P.hostname)||void 0===E?void 0:E.split(".");n=null==I?void 0:I[0];var M="Article"===l.__typename&&(null===(S=a)||void 0===S?void 0:S.indexOf("blogs"))>-1;if(C&&(i=l.url),x[n]||M)return d.a.createElement("a",_({href:i,className:m},b),u)}var A=function(e,t){var n="";return t?(n+=t,e&&(n+="&".concat(e.split("?")[1]))):e&&(n+=e),n&&"?"!==n[0]&&(n="?".concat(n)),n}(p,r);if(!w[l.__typename]){var j=n&&(k[n]||0===n.indexOf("preview-"))&&!O.includes(t.hostname),N="";return N="Promo"===l.__typename?T(l.targetUrl,p):j?"".concat(o).concat(A):T(i,p),C&&(N=l.url),d.a.createElement("a",_({href:N,className:m},b),u)}C&&(o=l.url);var L={pathname:o,search:A,hash:s};return d.a.createElement(h.a,_({to:L,className:m},b),u)};C.defaultProps={className:void 0,search:null,children:null,disableLink:void 0},C.fragments={link:f()(i||(i=o()(["\n    fragment ContentLink_link on Linkable {\n      __typename\n      url\n      id\n      ... on Promo {\n        targetUrl\n      }\n    }\n  "])))},t.a=C},"5f1c":function(e,t,n){"use strict";var i=this&&this.__createBinding||(Object.create?function(e,t,n,i){void 0===i&&(i=n);var a=Object.getOwnPropertyDescriptor(t,n);a&&!("get"in a?!t.__esModule:a.writable||a.configurable)||(a={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,i,a)}:function(e,t,n,i){void 0===i&&(i=n),e[i]=t[n]}),a=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&i(t,e,n);return a(t,e),t},r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var s=r(n("q1tI")),l=o(n("znWy")),c=n("Wj/z");t.default=function(e){var t,n,i,a,o,r=e.unit;return s.default.createElement(s.default.Fragment,null,s.default.createElement("div",{className:l.topperClass,"data-testid":"onsite-messaging-unit-".concat(null===c.config||void 0===c.config?void 0:c.config.name),"data-campaign":null==r?void 0:r.campaign,"data-audience":null==r?void 0:r.audience},"null"===(null===(t=null==r?void 0:r.content)||void 0===t?void 0:t.chooseCopy)&&s.default.createElement("span",{className:l.topperWrapClass},"Your subscription does not include news."),"single"===(null===(n=null==r?void 0:r.content)||void 0===n?void 0:n.chooseCopy)&&s.default.createElement("span",{className:l.topperWrapClass},"You’re currently subscribed to ",null===(i=null==r?void 0:r.content)||void 0===i?void 0:i.productCopy," only."),"multi"===(null===(a=null==r?void 0:r.content)||void 0===a?void 0:a.chooseCopy)&&s.default.createElement("span",{className:l.topperWrapClass},"You’re currently subscribed to ",null===(o=null==r?void 0:r.content)||void 0===o?void 0:o.productCopy,".")),s.default.createElement("hr",{className:l.longHorizontalRule}))}},"5g7D":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=n("Jqp9"),a=n("wiOm");t.default=function(e){return null!=e&&e.includes("DARK_MODE_COMPATIBLE")?"":(0,i.cx)(a.noDarkModeInsetClass,a.alwaysLightClass,"noDarkModeInsetClass")}},"5qW+":function(e,t,n){"use strict";var i=n("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=i(n("q1tI")),o=i(n("JmIy")),r=n("KYDV"),s=function(e){var t=e.author,n=e.authorNameOverride,i=e.authorImageUrlOverride,s=e.linkText,l=e.linkUrl,c=e.role,u=e.slug,d=e.text,p=n||(null==t?void 0:t.name),f=i||(null==t?void 0:t.imageUrl);return a.default.createElement("div",{className:r.inlineTrustModuleClass,"data-slug":u},p&&a.default.createElement("p",{className:r.bylineClass},f&&a.default.createElement("img",{src:f,alt:p}),a.default.createElement("span",null,p,c&&" ".concat(c))),a.default.createElement("p",{className:r.moduleBodyTextClass},a.default.createElement("span",{className:r.explainerTextClass},d.doc.content.map(o.default))),l&&s&&a.default.createElement("div",{className:r.learnMoreLinkClass},a.default.createElement("a",{href:l},s)))};s.displayName="ScoopTrustModule";t.default=s},"5rKh":function(e,t,n){"use strict";n.r(t);var i,a,o=n("VkAN"),r=n.n(o),s=n("gcR/"),l=n.n(s),c=(n("q1tI"),n("eFc+")),u=n.n(c),d=n("ZKN5"),p=n("dU4i"),f=n.n(p),m=n("9i1U"),h=n("YWmT"),g=n("4KZX");function y(e){var t=e.storyline,n=e.parentUri,i=e.pageType,a=e.testName,o=e.ruleName,r=e.region;return l()(h.a,{componentName:"latest_updates",region:r,parentUri:n,testName:a,ruleName:o,pageType:i},void 0,(function(e){var i=e.trackLink,a=e.trackInteraction,o=e.trackImpression;return l()("div",{},void 0,l()(g.a,{uri:null==t?void 0:t.uri,name:"live updates",isInlineModule:!0}),l()(f.a,{storyline:t,trackEvent:o,trackLink:i,parentUri:n,trackLinkInteraction:a},o))}))}y.displayName="LatestUpdatesBlock",y.defaultProps={storyline:null,testName:null};var v=u()(i||(i=r()(["\n  fragment LatestUpdatesBlock_items on Article {\n    id\n    url\n    headline {\n      default\n      sentence\n    }\n    firstPublished\n    uri\n  }\n"])));y.fragments={storyline:u()(a||(a=r()(["\n    fragment LatestUpdatesBlock_storyline on CreativeWork {\n      ... on Published {\n        uri\n      }\n      storylines {\n        storyline {\n          uri\n          displayName\n          hubAssets {\n            asset {\n              ... on Node {\n                id\n              }\n              ... on Published {\n                uri\n                url\n              }\n            }\n          }\n          promotedLiveAssets {\n            displayName\n            asset {\n              __typename\n              ... on Published {\n                uri\n                url\n              }\n              ... on Article {\n                id\n                lastMajorModification\n                typeOfMaterials\n                body {\n                  content {\n                    ... on Heading2Block {\n                      content {\n                        ...TextInline_content\n                      }\n                    }\n                  }\n                }\n              }\n              ... on FeedPublication {\n                id\n                items_beta(first: 3) {\n                  ...Connection_pageInfo\n                  edges {\n                    node {\n                      ...LatestUpdatesBlock_items\n                    }\n                  }\n                }\n              }\n              ... on LegacyCollection {\n                id\n                stream(first: 3, exclusionMode: NONE) {\n                  ...Connection_pageInfo\n                  edges {\n                    node {\n                      ...LatestUpdatesBlock_items\n                    }\n                  }\n                }\n              }\n            }\n          }\n        }\n      }\n    }\n    ","\n    ","\n  "])),v,m.a)},t.default=Object(d.a)(y)},"5ugd":function(e,t,n){"use strict";var i=n("TqRt"),a=n("cDf5");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=i(n("lwsE")),r=i(n("W8MJ")),s=i(n("a1gu")),l=i(n("Nsbk")),c=i(n("7W2i")),u=b(n("q1tI")),d=i(n("17x9")),p=n("Jqp9"),f=i(n("9rZX")),m=i(n("wXC7")),h=i(n("aanX")),g=b(n("sj7d")),y=n("w6U+");function v(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(v=function(e){return e?n:t})(e)}function b(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=a(e)&&"function"!=typeof e)return{default:e};var n=v(t);if(n&&n.has(e))return n.get(e);var i={__proto__:null},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var r in e)if("default"!==r&&{}.hasOwnProperty.call(e,r)){var s=o?Object.getOwnPropertyDescriptor(e,r):null;s&&(s.get||s.set)?Object.defineProperty(i,r,s):i[r]=e[r]}return i.default=e,n&&n.set(e,i),i}function _(e,t,n){return t=(0,l.default)(t),(0,s.default)(e,function(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return function(){return!!e}()}()?Reflect.construct(t,n||[],(0,l.default)(e).constructor):t.apply(e,n))}d.default.func,d.default.node,d.default.string,d.default.shape,d.default.bool;var w=function(e){function t(){var e;(0,o.default)(this,t);for(var n=arguments.length,i=new Array(n),a=0;a<n;a++)i[a]=arguments[a];return(e=_(this,t,[].concat(i))).targetElement=null,e}return(0,c.default)(t,e),(0,r.default)(t,[{key:"componentDidMount",value:function(){f.default.setAppElement("body"),this.targetElement=document.querySelector("#sharedui-modal")}},{key:"componentWillUnmount",value:function(){(0,y.clearAllBodyScrollLocks)()}},{key:"componentDidUpdate",value:function(e){var t=this.props.isOpen;e.isOpen!==t&&(t?(0,y.disableBodyScroll)(this.targetElement):(0,y.enableBodyScroll)(this.targetElement))}},{key:"render",value:function(){var e=this.props,t=e.children,n=e.isOpen,i=e.handleClose,a=e.onAfterOpen,o=e.overlayClassName,r=e.className,s=e.dismissClassName,l=e.contentLabel,c=e.role,d=e.shouldFocusAfterRender,y=e.shouldCloseOnOverlayClick,v=e.shouldCloseOnEsc,b=e.shouldReturnFocusAfterClose,_=e.aria,w=e.overlayRef,x=e.contentRef,k=e.closeIconStroke;return u.default.createElement(f.default,{id:"sharedui-modal",isOpen:n,overlayClassName:(0,p.cx)(g.overlayClass,o),className:(0,p.cx)(g.modalClass,r),bodyOpenClassName:g.bodyOpenClass,onAfterOpen:a,onRequestClose:i,contentLabel:l,role:c,shouldFocusAfterRender:d,shouldCloseOnOverlayClick:y,shouldCloseOnEsc:v,shouldReturnFocusAfterClose:b,aria:_,overlayRef:w,contentRef:x,ariaHideApp:!0},t,u.default.createElement("button",{type:"button",className:(0,p.cx)(g.dismissClass,s),onClick:i},u.default.createElement("i",{className:g.dismissIconClass},u.default.createElement(h.default,{stroke:k}),u.default.createElement("span",{className:m.default.a11y.visuallyHidden},"Close Modal"))))}}])}(u.Component);w.displayName="Modal",w.defaultProps={onAfterOpen:function(){},overlayClassName:void 0,className:void 0,dismissClassName:void 0,contentLabel:"",role:"dialog",shouldFocusAfterRender:!0,shouldCloseOnOverlayClick:!0,shouldCloseOnEsc:!0,shouldReturnFocusAfterClose:!0,aria:{},overlayRef:function(){},contentRef:function(){},closeIconStroke:"#555"};t.default=w},"6/jP":function(e,t,n){"use strict";var i=n("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.summaryLanguageDirectionStyles=t.default=void 0;var a=n("Jqp9"),o=n("3sMT"),r=i(n("WThh")),s=i(n("wXC7")),l=i(n("qp0C")),c=n("6l8D"),u=(0,r.default)(["medium"]),d=function(e){return(0,a.css)("color:",o.color.content.secondary,";font-weight:",s.default.font.weight.book,";letter-spacing:0.005em;",u(e,{fontSize:[19,21],lineHeight:[25,27]}),";")},p=(0,a.themeFn)("treatment",{none:function(e){return(0,a.css)("color:",o.color.content.secondary,";font-family:",s.default.font.serifMedium,";font-weight:",s.default.font.weight.light,";",u(e,{fontSize:[20,23],lineHeight:[25,30]}),";")},magazine:function(e){return(0,a.css)("color:",o.color.content.secondary,";font-family:",s.default.font.magazineSansBase,";font-weight:",s.default.font.weight.light,";letter-spacing:0.005em;",u(e,{fontSize:[19,21],lineHeight:[25,26]}),";")},sponsored:function(e){return(0,a.css)(d(e),";font-family:",s.default.font.sponsoredBase,";")},sponsoredSensitive:function(e){return(0,a.css)(d(e),";font-family:",s.default.font.sponsoredSensitive,";")},"t-magazine":function(e){return(0,a.css)("color:",o.color.content.primary,";font-family:",s.default.font.tmagSerifDeckBase,";font-weight:",s.default.font.weight.book,";letter-spacing:0.01em;",u(e,{fontSize:[23,25],lineHeight:[30,33]}),";")},atHome:(0,a.css)("font-family:",l.default.cheltenham,";font-style:normal;font-weight:300;font-size:31px;line-height:37px;.",c.linkClass,"{text-decoration:underline;color:",o.color.content.primary,";&:hover,&:focus{text-decoration:none;}}")}),f=t.summaryLanguageDirectionStyles=(0,a.themeFn)("languageDirection",{rightToLeft:(0,a.css)("direction:rtl;text-align:right;unicode-bidi:isolate;")}),m=(0,a.themeFn)("language",{"zh-hans":(0,a.css)("font-family:",s.default.font.cheltenhamSCSerifBase,";font-weight:normal;font-style:normal;"),"zh-hant":(0,a.css)("font-family:",s.default.font.cheltenhamTCSerifBase,";font-weight:normal;font-style:normal;")}),h=(0,a.styled)("p",{target:"e1wiw3jv0"})("font-style:normal;font-stretch:normal;margin-bottom:",s.default.font.size(20),";",p,";",f,";",m,";",s.default.breakpoint.medium,"{margin-bottom:",s.default.font.size(30),";}");t.default=h},"64gi":function(e,t,n){"use strict";var i=n("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=i(n("q1tI")),o=(i(n("17x9")),n("xXO4")),r=function(e,t){return a.default.cloneElement(e,{key:"archive_".concat(t)})},s=function(e){var t=e.blocks,n=!1,i=[],s=[];return null!=t&&t.length?(t.forEach((function(e,t){var l=a.default.createElement(a.default.Fragment,null,a.default.createElement("dt",{className:o.speakerClass},e.speaker),a.default.createElement("dd",{className:o.textClass},e.text.map((function(e,n){return a.default.createElement("p",{className:o.paragraphClass,key:"".concat(t.toString,"_").concat(n.toString())},e)}))));e.isArchived?(n||(n=!0),i.push(l)):(n&&i.length&&(s.push(a.default.createElement("dl",{className:o.archivedBlocksClass},i.map(r))),n=!1,i=[]),s.push(l))})),n&&i.length&&s.push(a.default.createElement("dl",{className:o.archivedBlocksClass},i.map(r))),a.default.createElement("dl",{className:o.transcriptBlocksClass},s.map((function(e,t){return a.default.cloneElement(e,{key:t.toString()})})))):null};s.displayName="TranscriptBlocks",s.defaultProps={blocks:[]};t.default=s},"65wn":function(e,t,n){"use strict";var i=n("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=i(n("QILm")),o=i(n("W8MJ")),r=i(n("lwsE")),s=i(n("a1gu")),l=i(n("Nsbk")),c=i(n("7W2i")),u=i(n("uf0L")),d=i(n("/Lu6")),p=["items","itemsAsItems"];function f(e,t,n){return t=(0,l.default)(t),(0,s.default)(e,function(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return function(){return!!e}()}()?Reflect.construct(t,n||[],(0,l.default)(e).constructor):t.apply(e,n))}var m=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return e.map((function(e,n){var i=e.node,a=e.asset,o=i||a;return t?new d.default({position:n+1,item:o}):new d.default({url:(null==o?void 0:o.url)||(null==o?void 0:o.targetUrl),name:null==o?void 0:o.name,image:null==o?void 0:o.image,position:n+1})}))},h=function(e){function t(){var e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},i=n.items,o=n.itemsAsItems,s=void 0!==o&&o,l=(0,a.default)(n,p);return(0,r.default)(this,t),(e=f(this,t,[l]))["@type"]="ItemList",e.itemListElement=m(i,s),e.numberOfItems=i.length,e}return(0,c.default)(t,e),(0,o.default)(t)}(u.default);t.default=h},"6D+t":function(e,t){e.exports=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return'(function () { var _f=function(){var t,e,o=50,n=50;function i(t){if(!document.getElementById("3pCheckIframeId")){if(t||(t=1),!document.body){if(t>o)return;return t+=1,setTimeout(i.bind(null,t),n)}var e,a,r;e="https://static01.nyt.com/ads/tpc-check.html",a=document.body,(r=document.createElement("iframe")).src=e,r.id="3pCheckIframeId",r.style="display:none;",r.height=0,r.width=0,a.insertBefore(r,a.firstChild)}}function a(t){if("https://static01.nyt.com"===t.origin)try{"3PCookieSupported"===t.data&&googletag.cmd.push(function(){googletag.pubads().setTargeting("cookie","true")}),"3PCookieNotSupported"===t.data&&googletag.cmd.push(function(){googletag.pubads().setTargeting("cookie","false")})}catch(t){}}function r(){if(function(){if(Object.prototype.toString.call(window.HTMLElement).indexOf("Constructor")>0)return!0;if("[object SafariRemoteNotification]"===(!window.safari||safari.pushNotification).toString())return!0;try{return window.localStorage&&/Safari/.test(window.navigator.userAgent)}catch(t){return!1}}()){try{window.openDatabase(null,null,null,null)}catch(e){return t(),!0}try{localStorage.length?e():(localStorage.x=1,localStorage.removeItem("x"),e())}catch(o){navigator.cookieEnabled?t():e()}return!0}}!function(){try{googletag.cmd.push(function(){googletag.pubads().setTargeting("cookie","unknown")})}catch(t){}}(),t=function(){try{googletag.cmd.push(function(){googletag.pubads().setTargeting("cookie","private")})}catch(t){}}||function(){},e=function(){window.addEventListener("message",a,!1),i(0)}||function(){},function(){if(window.webkitRequestFileSystem)return window.webkitRequestFileSystem(window.TEMPORARY,1,e,t),!0}()||r()||function(){if(!window.indexedDB&&(window.PointerEvent||window.MSPointerEvent))return t(),!0}()||e()};;_f.apply(null, '.concat(JSON.stringify(t),"); })();")}},"6Gip":function(e,t,n){"use strict";t.a="vi-story"},"6Hb6":function(e,t){e.exports=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return'(function () { var _f=function(){const o="1_block";function n(o){return window&&window.NYTD&&window.NYTD.Abra?window.NYTD.Abra(o):""}window.adClientUtils={hasActiveToggle:function(r){return n(r)!==o},getAbraVar:n,reportExposure:function(o){window&&window.NYTD&&window.NYTD.Abra&&window.NYTD.Abra.reportExposure&&window.NYTD.Abra.reportExposure(o)}}};;_f.apply(null, '.concat(JSON.stringify(t),"); })();")}},"6L9N":function(e,t,n){"use strict";var i=this&&this.__makeTemplateObject||function(e,t){return Object.defineProperty?Object.defineProperty(e,"raw",{value:t}):e.raw=t,e},a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.billedText=t.ctaActionTextClassStyleStandard=t.standardDockCallToActionBtn=t.ctaActionTextClassStyle=t.ctaContainerStyle=t.ctaIconWrapperStyle=t.headingMessageClassStyle=t.headingInfoContainerStyle=t.headingClassStyle=t.dividerStyle=t.dockContentHeadlineIntlCAAU=t.dockContentHeadline=t.dockContentKicker=t.ctaButton=t.dockStandardHeaderStyle=t.strikeThroughPrice=t.dockWrapper=t.dockContentWrapper=t.dockOldPrice=t.dockHeaderPrice=t.dockHeaderHedCopy=t.standarDockHeader=t.dockHeader=t.dockHeaderBase=void 0;var o=n("Jqp9"),r=a(n("wXC7")),s=n("lVLo"),l=n("b2Qg");t.dockHeaderBase=(0,o.css)(c||(c=i(["\n  display: flex;\n  flex-direction: column;\n  font-weight: ",";\n  font-family: ",";\n  font-size: 16px;\n  line-height: 130%;\n  text-align: center;\n  color: #121212;\n\n  @media (min-width: ","px) {\n    flex-direction: row;\n  }\n\n  @media (max-width: ","px) {\n    flex-direction: column;\n  }\n\n  span::after {\n    display: none;\n  }\n"],["\n  display: flex;\n  flex-direction: column;\n  font-weight: ",";\n  font-family: ",";\n  font-size: 16px;\n  line-height: 130%;\n  text-align: center;\n  color: #121212;\n\n  @media (min-width: ","px) {\n    flex-direction: row;\n  }\n\n  @media (max-width: ","px) {\n    flex-direction: column;\n  }\n\n  span::after {\n    display: none;\n  }\n"])),s.fontWeights.medium,s.fonts.franklin,s.widths.small,s.widths.small),t.dockHeader=(0,o.css)(u||(u=i(["\n  transform: translateY(15px);\n  ","\n\n  @media (max-width: 535px) {\n    height: 64px;\n  }\n\n  @media (min-width: 535px) {\n    transform: translateY(0);\n  }\n"],["\n  transform: translateY(15px);\n  ","\n\n  @media (max-width: 535px) {\n    height: 64px;\n  }\n\n  @media (min-width: 535px) {\n    transform: translateY(0);\n  }\n"])),t.dockHeaderBase),t.standarDockHeader=(0,o.css)(d||(d=i(["\n  ","\n  position: absolute;\n  top: 50%;\n  left: 50%;\n  transform: translate(-50%, -50%);\n"],["\n  ","\n  position: absolute;\n  top: 50%;\n  left: 50%;\n  transform: translate(-50%, -50%);\n"])),t.dockHeaderBase),t.dockHeaderHedCopy=(0,o.css)(p||(p=i(["\n  font-weight: ",";\n"],["\n  font-weight: ",";\n"])),s.fontWeights.semiBold),t.dockHeaderPrice=(0,o.css)(f||(f=i(["\n  @media (min-width: 577px) {\n    white-space: nowrap;\n  }\n"],["\n  @media (min-width: 577px) {\n    white-space: nowrap;\n  }\n"]))),t.dockOldPrice=(0,o.css)(m||(m=i(["\n  color: #8b8b8b;\n"],["\n  color: #8b8b8b;\n"]))),t.dockContentWrapper=(0,o.css)(h||(h=i(["\n  background-color: ",";\n  border-top: 1px "," solid;\n  display: flex;\n  padding: 32px 20px;\n  flex-direction: column;\n  align-items: center;\n  align-self: stretch;\n  gap: 12px;\n\n  @media screen and (min-width: ","px) {\n    padding: 40px 20px;\n  }\n"],["\n  background-color: ",";\n  border-top: 1px "," solid;\n  display: flex;\n  padding: 32px 20px;\n  flex-direction: column;\n  align-items: center;\n  align-self: stretch;\n  gap: 12px;\n\n  @media screen and (min-width: ","px) {\n    padding: 40px 20px;\n  }\n"])),s.colors.white,s.colors.gainsboro,s.widths.mediumLarge),t.dockWrapper=(0,o.css)(g||(g=i(["\n  background-color: ",";\n  font-family: ",";\n"],["\n  background-color: ",";\n  font-family: ",";\n"])),s.colors.whiteDarkContentPrimary,s.fonts.franklin),t.strikeThroughPrice=(0,o.css)(y||(y=i(["\n  color: ",";\n  text-decoration-thickness: 0.75px;\n  text-decoration-line: underline;\n  text-underline-offset: -0.3em;\n  text-decoration-skip-ink: none;\n"],["\n  color: ",";\n  text-decoration-thickness: 0.75px;\n  text-decoration-line: underline;\n  text-underline-offset: -0.3em;\n  text-decoration-skip-ink: none;\n"])),s.colors.suvaGrey),t.dockStandardHeaderStyle=(0,o.css)(v||(v=i(["\n  display: flex;\n  align-items: center;\n  justify-content: space-between;\n  height: 56px;\n  max-width: 1605px;\n  margin: 0 20px;\n  /* stylelint-disable-next-line declaration-no-important */\n  -webkit-font-smoothing: antialiased !important;\n  outline: ",";\n\n  strong {\n    font-weight: ",";\n  }\n\n  // overrides for standard dock\n  @media (min-width: ","px) {\n    > div:nth-child(2) {\n      border-bottom: 1px solid;\n      min-width: auto;\n\n      > div:first-child {\n        margin-right: 4px;\n\n        > p {\n          font-size: 16px;\n          height: 22px;\n          line-height: 20.8px;\n          text-transform: none;\n          font-weight: ",";\n        }\n      }\n    }\n  }\n\n  @media screen and (min-width: 1650px) {\n    margin-left: auto;\n    margin-right: auto;\n  }\n"],["\n  display: flex;\n  align-items: center;\n  justify-content: space-between;\n  height: 56px;\n  max-width: 1605px;\n  margin: 0 20px;\n  /* stylelint-disable-next-line declaration-no-important */\n  -webkit-font-smoothing: antialiased !important;\n  outline: ",";\n\n  strong {\n    font-weight: ",";\n  }\n\n  // overrides for standard dock\n  @media (min-width: ","px) {\n    > div:nth-child(2) {\n      border-bottom: 1px solid;\n      min-width: auto;\n\n      > div:first-child {\n        margin-right: 4px;\n\n        > p {\n          font-size: 16px;\n          height: 22px;\n          line-height: 20.8px;\n          text-transform: none;\n          font-weight: ",";\n        }\n      }\n    }\n  }\n\n  @media screen and (min-width: 1650px) {\n    margin-left: auto;\n    margin-right: auto;\n  }\n"])),s.colors.blue,s.fontWeights.bold,s.widths.medium,s.fontWeights.semiBold),t.ctaButton=(0,o.css)(b||(b=i(["\n  background: ",";\n  border-radius: 3px;\n  color: ",";\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  gap: 8px;\n  width: 140px;\n  height: 44px;\n  font-size: 16px;\n  font-weight: ",";\n  line-height: 130%;\n  text-decoration: none;\n\n  &:link,\n  &:visited {\n    color: ",";\n    font-size: 16px;\n    text-decoration: none;\n  }\n"],["\n  background: ",";\n  border-radius: 3px;\n  color: ",";\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  gap: 8px;\n  width: 140px;\n  height: 44px;\n  font-size: 16px;\n  font-weight: ",";\n  line-height: 130%;\n  text-decoration: none;\n\n  &:link,\n  &:visited {\n    color: ",";\n    font-size: 16px;\n    text-decoration: none;\n  }\n"])),s.colors.blackDarkBackgroundPrimary,s.colors.whiteDarkContentPrimary,r.default.font.weight.mediumBold,s.colors.whiteDarkContentPrimary),t.dockContentKicker=(0,o.css)(_||(_=i(["\n  border: 1px solid #e14e5b;\n  border-radius: 100px;\n  color: #e14e5b;\n  font-family: ",";\n  font-size: 12px;\n  font-style: normal;\n  font-weight: ",";\n  line-height: 130%;\n  letter-spacing: 0.48px;\n  text-transform: uppercase;\n  padding: 6px 12px;\n"],["\n  border: 1px solid #e14e5b;\n  border-radius: 100px;\n  color: #e14e5b;\n  font-family: ",";\n  font-size: 12px;\n  font-style: normal;\n  font-weight: ",";\n  line-height: 130%;\n  letter-spacing: 0.48px;\n  text-transform: uppercase;\n  padding: 6px 12px;\n"])),s.fonts.franklin,s.fontWeights.bold);var c,u,d,p,f,m,h,g,y,v,b,_,w,x,k,O,T,C,E,S,P,I,M,A,j,N=(0,o.css)(w||(w=i(["\n  margin-top: -4px;\n  color: ",";\n  font-family: ",";\n  font-style: normal;\n  font-weight: ",";\n  line-height: 115%;\n  text-align: center;\n  display: flex;\n  flex-direction: column;\n\n  s {\n    color: #8b8b8b;\n    text-decoration: line-through;\n    text-decoration-color: rgba(139, 139, 139, 0.75);\n  }\n\n  @media (min-width: ","px) {\n    flex-direction: row;\n  }\n"],["\n  margin-top: -4px;\n  color: ",";\n  font-family: ",";\n  font-style: normal;\n  font-weight: ",";\n  line-height: 115%;\n  text-align: center;\n  display: flex;\n  flex-direction: column;\n\n  s {\n    color: #8b8b8b;\n    text-decoration: line-through;\n    text-decoration-color: rgba(139, 139, 139, 0.75);\n  }\n\n  @media (min-width: ","px) {\n    flex-direction: row;\n  }\n"])),s.colors.veryDarkGrey,s.fonts.cheltenham,s.fontWeights.light,s.widths.medium);t.dockContentHeadline=(0,o.css)(x||(x=i(["\n  ","\n  font-size: clamp(28px, 1.25vw + 1rem, 36px);\n"],["\n  ","\n  font-size: clamp(28px, 1.25vw + 1rem, 36px);\n"])),N),t.dockContentHeadlineIntlCAAU=(0,o.css)(k||(k=i(["\n  ","\n  font-size: clamp(25.5px, 1.25vw + 1rem, 36px);\n"],["\n  ","\n  font-size: clamp(25.5px, 1.25vw + 1rem, 36px);\n"])),N),t.dividerStyle=(0,o.css)(O||(O=i(["\n  display: none;\n"],["\n  display: none;\n"]))),t.headingClassStyle=(0,o.css)(T||(T=i(["\n  max-width: 1635px;\n  margin: auto;\n  /* stylelint-disable-next-line declaration-no-important */\n  -webkit-font-smoothing: antialiased !important;\n  outline: ",";\n  position: relative;\n\n  strong {\n    font-weight: ",";\n  }\n\n  @media (max-width: 535px) {\n    height: 64px;\n\n    button {\n      height: 64px;\n\n      svg {\n        margin-right: -10px;\n      }\n    }\n  }\n"],["\n  max-width: 1635px;\n  margin: auto;\n  /* stylelint-disable-next-line declaration-no-important */\n  -webkit-font-smoothing: antialiased !important;\n  outline: ",";\n  position: relative;\n\n  strong {\n    font-weight: ",";\n  }\n\n  @media (max-width: 535px) {\n    height: 64px;\n\n    button {\n      height: 64px;\n\n      svg {\n        margin-right: -10px;\n      }\n    }\n  }\n"])),s.colors.blue,s.fontWeights.bold),t.headingInfoContainerStyle=(0,o.css)(C||(C=i(["\n  width: 100%;\n  font-family: ",";\n  text-align: left;\n\n  span {\n    display: inline;\n  }\n\n  @media (min-width: ","px) {\n    text-align: center;\n  }\n"],["\n  width: 100%;\n  font-family: ",";\n  text-align: left;\n\n  span {\n    display: inline;\n  }\n\n  @media (min-width: ","px) {\n    text-align: center;\n  }\n"])),s.fonts.franklin,s.widths.mediumLarge),t.headingMessageClassStyle=(0,o.css)(E||(E=i(["\n  height: 55px;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  font-size: 15px;\n  line-height: 17px;\n  opacity: 1;\n\n  span {\n    white-space: nowrap;\n\n    &::after {\n      content: '  ';\n      white-space: pre-line;\n    }\n  }\n"],["\n  height: 55px;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  font-size: 15px;\n  line-height: 17px;\n  opacity: 1;\n\n  span {\n    white-space: nowrap;\n\n    &::after {\n      content: '  ';\n      white-space: pre-line;\n    }\n  }\n"]))),t.ctaIconWrapperStyle=(0,o.css)(S||(S=i(["\n  position: absolute;\n  top: 0px;\n  right: 0px;\n  background-color: transparent;\n  outline: ",";\n  width: ",";\n  height: ",";\n  z-index: 1;\n  border-width: 0px;\n\n  svg {\n    height: 15px;\n    margin: auto;\n    width: 15px;\n  }\n"],["\n  position: absolute;\n  top: 0px;\n  right: 0px;\n  background-color: transparent;\n  outline: ",";\n  width: ",";\n  height: ",";\n  z-index: 1;\n  border-width: 0px;\n\n  svg {\n    height: 15px;\n    margin: auto;\n    width: 15px;\n  }\n"])),s.colors.blue,l.iconHeight,l.iconHeight),t.ctaContainerStyle=(0,o.css)(P||(P=i([""],[""]))),t.ctaActionTextClassStyle=(0,o.css)(I||(I=i(["\n  cursor: pointer;\n  font-size: 12px;\n  text-transform: uppercase;\n  font-weight: ",";\n  font-family: ",";\n  letter-spacing: 0.24px;\n  line-height: calc("," + 3px);\n  white-space: nowrap;\n  margin: 0;\n  padding: 0;\n  display: none;\n  color: ",";\n\n  &."," {\n    animation: "," 400ms;\n  }\n\n  &."," {\n    animation: "," 400ms;\n  }\n\n  @media (min-width: ","px) {\n    display: block;\n  }\n"],["\n  cursor: pointer;\n  font-size: 12px;\n  text-transform: uppercase;\n  font-weight: ",";\n  font-family: ",";\n  letter-spacing: 0.24px;\n  line-height: calc("," + 3px);\n  white-space: nowrap;\n  margin: 0;\n  padding: 0;\n  display: none;\n  color: ",";\n\n  &."," {\n    animation: "," 400ms;\n  }\n\n  &."," {\n    animation: "," 400ms;\n  }\n\n  @media (min-width: ","px) {\n    display: block;\n  }\n"])),s.fontWeights.bold,s.fonts.franklin,l.iconHeight,s.colors.veryDarkGrey,l.textFadingOutClass,(0,l.fadeTextOut)(),l.textFadingInClass,(0,l.fadeTextIn)(),s.widths.mediumLarge),t.standardDockCallToActionBtn=(0,o.css)(M||(M=i(["\n  height: 22px;\n  width: 16px;\n"],["\n  height: 22px;\n  width: 16px;\n"]))),t.ctaActionTextClassStyleStandard=(0,o.css)(A||(A=i(["\n  margin: 0;\n  padding: 0;\n  white-space: nowrap;\n  font-family: ",";\n  letter-spacing: 0.24px;\n  cursor: pointer;\n  color: #121212;\n  display: none;\n\n  @media (min-width: ","px) {\n    font-size: 16px;\n    display: block;\n    height: 22px;\n    line-height: 20.8px;\n    text-transform: none;\n    font-weight: 600;\n  }\n"],["\n  margin: 0;\n  padding: 0;\n  white-space: nowrap;\n  font-family: ",";\n  letter-spacing: 0.24px;\n  cursor: pointer;\n  color: #121212;\n  display: none;\n\n  @media (min-width: ","px) {\n    font-size: 16px;\n    display: block;\n    height: 22px;\n    line-height: 20.8px;\n    text-transform: none;\n    font-weight: 600;\n  }\n"])),s.fonts.franklin,s.widths.medium),t.billedText=(0,o.css)(j||(j=i(["\n  color: ",";\n  font-size: 12px;\n  font-weight: ",";\n  font-family: ",";\n  line-height: 15.6px;\n  white-space: nowrap;\n  padding-bottom: 16px;\n\n  @media (min-width: ","px) {\n    font-size: 14px;\n    line-height: 18.2px;\n  }\n"],["\n  color: ",";\n  font-size: 12px;\n  font-weight: ",";\n  font-family: ",";\n  line-height: 15.6px;\n  white-space: nowrap;\n  padding-bottom: 16px;\n\n  @media (min-width: ","px) {\n    font-size: 14px;\n    line-height: 18.2px;\n  }\n"])),s.colors.grayLightContentContentPlaceholder,s.fontWeights.medium,s.fonts.franklin,s.widths.medium)},"6NOd":function(e,t,n){"use strict";n.d(t,"a",(function(){return a})),n.d(t,"b",(function(){return o}));var i=n("q1tI"),a=n.n(i).a.createContext({}),o=function(){return Object(i.useContext)(a)}},"6OwD":function(e,t,n){"use strict";var i=n("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=i(n("QILm")),o=i(n("W8MJ")),r=i(n("lwsE")),s=i(n("a1gu")),l=i(n("Nsbk")),c=i(n("7W2i")),u=i(n("Nz+N")),d=["height","width","embedUrl","contentUrl"];function p(e,t,n){return t=(0,l.default)(t),(0,s.default)(e,function(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return function(){return!!e}()}()?Reflect.construct(t,n||[],(0,l.default)(e).constructor):t.apply(e,n))}var f=function(e){function t(){var e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},i=n.height,o=n.width,s=n.embedUrl,l=n.contentUrl,c=(0,a.default)(n,d);return(0,r.default)(this,t),(e=p(this,t,[c]))["@type"]="MediaObject",e.height=i,e.width=o,e.embedUrl=s,e.contentUrl=l,e}return(0,c.default)(t,e),(0,o.default)(t)}(u.default);t.default=f},"6RhY":function(e,t,n){"use strict";var i=n("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.MediaFigCaptionComponent=void 0;var a=i(n("q1tI")),o=i(n("Oqnd"));(t.MediaFigCaptionComponent=function(){return a.default.createElement(o.default,null)}).displayName="MediaFigCaptionComponent";t.default=o.default},"6Y/s":function(e,t,n){"use strict";var i=this&&this.__makeTemplateObject||function(e,t){return Object.defineProperty?Object.defineProperty(e,"raw",{value:t}):e.raw=t,e};Object.defineProperty(t,"__esModule",{value:!0}),t.dockBorder=t.button=t.subscriptionText=t.salePriceExpression=t.strikeThroughExpression=t.ctaContainer=t.subHeader=t.header=t.headerContainer=t.headerLogo=t.mainContent=t.headerText=void 0;var a,o,r,s,l,c,u,d,p,f,m,h,g=n("Jqp9"),y=n("lVLo");t.headerText=(0,g.css)(a||(a=i(["\n  font-family: ",";\n  font-size: 16px;\n  font-weight: ",";\n  line-height: 130%;\n  margin: auto 0 auto 20px;\n  padding: 10px 0;\n\n  @media (min-width: ","px) {\n    margin: auto 0;\n  }\n\n  @media (min-width: ","px) {\n    padding-right: 65px;\n  }\n"],["\n  font-family: ",";\n  font-size: 16px;\n  font-weight: ",";\n  line-height: 130%;\n  margin: auto 0 auto 20px;\n  padding: 10px 0;\n\n  @media (min-width: ","px) {\n    margin: auto 0;\n  }\n\n  @media (min-width: ","px) {\n    padding-right: 65px;\n  }\n"])),y.fonts.franklin,y.fontWeights.medium,y.widths.medium,y.widths.mediumLarge),t.mainContent=(0,g.css)(o||(o=i(["\n  display: flex;\n  align-items: center;\n  background-color: ",";\n  font-family: ",";\n  border-radius: 5px;\n  padding: 20px;\n  flex-direction: column;\n  margin: 0 auto 20px;\n  align-self: flex-start;\n  width: calc(100% - 70px);\n\n  text-align: center;\n\n  @media (min-width: ","px) {\n    max-width: unset;\n    width: calc(100% - 80px);\n  }\n\n  @media (min-width: ","px) {\n    flex-direction: row;\n    max-width: 1180px;\n    padding: 21px 34px;\n    width: calc(100% - 114px);\n    justify-content: space-between;\n    text-align: left;\n  }\n"],["\n  display: flex;\n  align-items: center;\n  background-color: ",";\n  font-family: ",";\n  border-radius: 5px;\n  padding: 20px;\n  flex-direction: column;\n  margin: 0 auto 20px;\n  align-self: flex-start;\n  width: calc(100% - 70px);\n\n  text-align: center;\n\n  @media (min-width: ","px) {\n    max-width: unset;\n    width: calc(100% - 80px);\n  }\n\n  @media (min-width: ","px) {\n    flex-direction: row;\n    max-width: 1180px;\n    padding: 21px 34px;\n    width: calc(100% - 114px);\n    justify-content: space-between;\n    text-align: left;\n  }\n"])),y.colors.veryDarkGrey,y.fonts.franklin,y.widths.verySmall,y.widths.medium),t.headerLogo=(0,g.css)(r||(r=i(["\n  align-self: start;\n  display: none;\n\n  @media (min-width: ","px) {\n    display: block;\n    & > svg {\n      width: 154px;\n      height: 20px;\n    }\n  }\n"],["\n  align-self: start;\n  display: none;\n\n  @media (min-width: ","px) {\n    display: block;\n    & > svg {\n      width: 154px;\n      height: 20px;\n    }\n  }\n"])),y.widths.mediumLarge),t.headerContainer=(0,g.css)(s||(s=i(["\n  align-self: start;\n  color: ",";\n  margin: 0 auto;\n\n  @media (min-width: ","px) {\n    margin: 0;\n  }\n"],["\n  align-self: start;\n  color: ",";\n  margin: 0 auto;\n\n  @media (min-width: ","px) {\n    margin: 0;\n  }\n"])),y.colors.white,y.widths.medium),t.header=(0,g.css)(l||(l=i(["\n  font-family: ",";\n  font-size: 20px;\n  font-weight: ",";\n  line-height: 120%;\n  margin: 0;\n  margin-bottom: 8px;\n\n  @media (min-width: ","px) {\n    font-size: 22px;\n  }\n"],["\n  font-family: ",";\n  font-size: 20px;\n  font-weight: ",";\n  line-height: 120%;\n  margin: 0;\n  margin-bottom: 8px;\n\n  @media (min-width: ","px) {\n    font-size: 22px;\n  }\n"])),y.fonts.franklin,y.fontWeights.semiBold,y.widths.medium),t.subHeader=(0,g.css)(c||(c=i(["\n  font-family: ",";\n  font-size: 16px;\n  line-height: 130%;\n  font-weight: ",";\n  margin: 0;\n"],["\n  font-family: ",";\n  font-size: 16px;\n  line-height: 130%;\n  font-weight: ",";\n  margin: 0;\n"])),y.fonts.franklin,y.fontWeights.medium),t.ctaContainer=(0,g.css)(u||(u=i(["\n  display: flex;\n  flex-direction: column;\n  width: 100%;\n  align-self: start;\n  min-width: 300px;\n  margin-top: 24px;\n\n  @media (min-width: ","px) {\n    flex: 0;\n    margin-top: 0;\n  }\n"],["\n  display: flex;\n  flex-direction: column;\n  width: 100%;\n  align-self: start;\n  min-width: 300px;\n  margin-top: 24px;\n\n  @media (min-width: ","px) {\n    flex: 0;\n    margin-top: 0;\n  }\n"])),y.widths.medium),t.strikeThroughExpression=(0,g.css)(d||(d=i(["\n  color: ",";\n  text-decoration-line: line-through;\n  text-decoration-thickness: 1.5px;\n  font-family: ",";\n  font-size: 22px;\n  line-height: 120%;\n  font-weight: ",";\n"],["\n  color: ",";\n  text-decoration-line: line-through;\n  text-decoration-thickness: 1.5px;\n  font-family: ",";\n  font-size: 22px;\n  line-height: 120%;\n  font-weight: ",";\n"])),y.colors.suvaGrey,y.fonts.franklin,y.fontWeights.medium),t.salePriceExpression=(0,g.css)(p||(p=i(["\n  color: ",";\n  text-decoration: none;\n  font-family: ",";\n  font-weight: ",";\n  font-size: 22px;\n  line-height: 120%;\n"],["\n  color: ",";\n  text-decoration: none;\n  font-family: ",";\n  font-weight: ",";\n  font-size: 22px;\n  line-height: 120%;\n"])),y.colors.whiteDarkContentPrimary,y.fonts.franklin,y.fontWeights.bold),t.subscriptionText=(0,g.css)(f||(f=i(["\n  font-family: ",";\n  font-size: 16px;\n  font-weight: ",";\n  line-height: 130%;\n  color: ",";\n  margin-top: 4px;\n"],["\n  font-family: ",";\n  font-size: 16px;\n  font-weight: ",";\n  line-height: 130%;\n  color: ",";\n  margin-top: 4px;\n"])),y.fonts.franklin,y.fontWeights.medium,y.colors.whiteDarkContentPrimary),t.button=(0,g.css)(m||(m=i(["\n  text-decoration: none;\n  font-size: 16px;\n  font-weight: ",";\n  line-height: 130%;\n  color: ",";\n  background-color: ",";\n  margin-top: 8px;\n  display: flex;\n  flex-direction: column;\n  text-align: center;\n  border-radius: 3px;\n  cursor: pointer;\n  width: calc(100% - 20px);\n  height: 44px;\n  padding: 11.8px 10px;\n  letter-spacing: -0.05px;\n  flex: 0;\n\n  @media (min-width: ","px) {\n    align-self: left;\n    width: 150px;\n    height: 44px;\n    flex: 1;\n    margin-top: 7px;\n  }\n"],["\n  text-decoration: none;\n  font-size: 16px;\n  font-weight: ",";\n  line-height: 130%;\n  color: ",";\n  background-color: ",";\n  margin-top: 8px;\n  display: flex;\n  flex-direction: column;\n  text-align: center;\n  border-radius: 3px;\n  cursor: pointer;\n  width: calc(100% - 20px);\n  height: 44px;\n  padding: 11.8px 10px;\n  letter-spacing: -0.05px;\n  flex: 0;\n\n  @media (min-width: ","px) {\n    align-self: left;\n    width: 150px;\n    height: 44px;\n    flex: 1;\n    margin-top: 7px;\n  }\n"])),y.fontWeights.semiBold,y.colors.veryDarkGrey,y.colors.white,y.widths.medium),t.dockBorder=(0,g.css)(h||(h=i(["\n  border-top: 1px solid ",";\n"],["\n  border-top: 1px solid ",";\n"])),y.colors.veryDarkGrey)},"6Zrg":function(e,t,n){"use strict";n.d(t,"b",(function(){return a})),n.d(t,"a",(function(){return o}));var i=n("Rb+W");function a(e){var t={edn:"us",test:"projectvi",ver:"vi"};if(null!=e&&e.search){var n=Object(i.n)(e);n&&(t.ref=n);var a=Object(i.m)(e);a&&(t.refdom=a)}return t}function o(e,t){var n=a(e);return n.typ="hp",t&&(n=Object(i.t)(t,"large",n)),n}},"6aj0":function(e,t,n){"use strict";var i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.fallback=void 0;var a=i(n("q1tI")),o=n("djNW"),r=i(n("Ad4I"));t.fallback={component:function(e){var t=e.unit;return"PAYWALL"===t.content.gatewayType?a.default.createElement(r.default,{unit:t}):a.default.createElement("span",{"data-testid":"onsite-messaging-unit-gatewayTopper","data-campaign":"fallback","data-audience":""})},content:function(e){var t,n;return{text:"Support independent journalism with a subscription.",loggedIn:!1,gatewayType:null===(n=null===(t=e.meter)||void 0===t?void 0:t.data)||void 0===n?void 0:n.gatewayType}},tracking:function(){return{module:{name:"gatewayTopper",context:"SubconConvGatewayTopperLoggedOut234",label:"FALLBACK_PAYWALL_TOPPER",element:{name:o.Action.LogIn,label:"Log in",url:"https://myaccount.nytimes.com/auth/login?response_type=cookie&client_id=freex&asset=RegiWallStandalone&application=Free_Experience&reload=3&redirect_uri=https%3A%2F%2Fwww.nytimes.com%2Fsubscription%2Fonboarding-offer%3FcampaignID%3D7JFJX%26EXIT_URI%3Dhttps%253A%252F%252F"}}}},canShow:function(e){var t,n;if(null===(t=e.meter)||void 0===t?void 0:t.error)return!1;var i=null===(n=e.meter)||void 0===n?void 0:n.data;return!!(null==i?void 0:i.gateway)&&(!(null==i?void 0:i.granted)&&(!!(null==i?void 0:i.gatewayEligible)&&(!(null==i?void 0:i.gatewayExempt)&&"PAYWALL"===(null==i?void 0:i.gatewayType))))}}},"6bIn":function(e,t,n){"use strict";var i=n("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=n("q1tI"),o=i(n("9/5/"));t.default=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:function(){},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:500;(0,a.useEffect)((function(){if("undefined"==typeof window)return null;var n=(0,o.default)(e,t);return window.addEventListener("resize",n),function(){window.removeEventListener("resize",n)}}),[t,e])}},"6cBM":function(e,t,n){"use strict";var i=n("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.logoMarginClass=t.brandBarLogoClass=t.brandBarClass=t.brandBarCenteredClass=void 0;var a=n("Jqp9"),o=i(n("wXC7"));t.logoMarginClass=(0,a.css)("margin-bottom:",o.default.headerSpacing.bottom,";"),t.brandBarClass=(0,a.css)("align-items:center;display:flex;justify-content:space-between;margin-left:auto;margin-right:auto;max-width:",o.default.breakpoint.textBodyWidth,"px;width:calc(100% - 40px);",o.default.breakpoint.mediumLarge,"{margin-left:calc((100% - ",o.default.breakpoint.textBodyWidth,"px) / 2);margin-right:auto;width:",o.default.breakpoint.textBodyWidth,"px;}",o.default.breakpoint.extraLarge,"{margin-left:calc((100% - ",o.default.breakpoint.textBodyWidthExtralarge,"px) / 2);max-width:",o.default.breakpoint.textBodyWidthExtralarge,"px;width:",o.default.breakpoint.textBodyWidthExtralarge,"px;}@media print{display:none;}"),t.brandBarLogoClass=(0,a.css)("display:inline-block;max-width:225px;vertical-align:middle;",o.default.breakpoint.medium,"{max-width:275px;}"),t.brandBarCenteredClass=(0,a.css)("margin:auto;")},"6gWn":function(e,t,n){"use strict";var i=this&&this.__createBinding||(Object.create?function(e,t,n,i){void 0===i&&(i=n);var a=Object.getOwnPropertyDescriptor(t,n);a&&!("get"in a?!t.__esModule:a.writable||a.configurable)||(a={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,i,a)}:function(e,t,n,i){void 0===i&&(i=n),e[i]=t[n]}),a=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&i(t,e,n);return a(t,e),t},r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.config=void 0;var s=n("fCvH"),l=r(n("FrTx")),c=r(n("+IMj")),u=r(n("vkfW")),d=r(n("YPF4")),p=n("djNW"),f=r(n("kIGo")),m=o(n("FY2l")),h=r(n("45rh")),g=r(n("Hy4T")),y=r(n("dfdT")),v=r(n("1flQ")),b=r(n("gJ8K")),_=r(n("kekP")),w=r(n("UN+u")),x=r(n("0Jh6")),k=r(n("IuhB")),O=r(n("PVii")),T=r(n("Extp")),C=r(n("yhyO")),E=r(n("AHAN")),S=r(n("MSmF"));t.config={name:"dock",onlyTrackWhenVisible:!1,enableOfferEligibility:!0,fallback:null,campaigns:{ADS_RES_FIRST_PARTY_SURVEY_221:{component:l.default,audiences:{Anon:{content:function(){return{url:"https://www.marketingresearchresources.com/images/readercomp/web.asp?I.User1=10"}},tests:[{test:"MKT_first_party_data_survey"}],tracking:{module:{name:"dock",context:"standard",label:"ADS_RES_FIRST_PARTY_SURVEY_221",element:{name:p.Action.TakeSurvey}}}},Regi:{content:function(){return{url:"https://www.marketingresearchresources.com/images/readercomp/web.asp?I.User1=17"}},tests:[{test:"MKT_first_party_data_survey_regi_dock"}],tracking:{module:{name:"dock",context:"standard",label:"ADS_RES_FIRST_PARTY_SURVEY_221",element:{name:p.Action.TakeSurvey}}}},Sub:{content:function(){return{url:"https://www.marketingresearchresources.com/images/readercomp/web.asp?I.User1=18"}},tests:[{test:"MKT_first_party_data_survey_subs_dock"}],tracking:{module:{name:"dock",context:"standard",label:"ADS_RES_FIRST_PARTY_SURVEY_221",element:{name:p.Action.TakeSurvey}}}}}},CH_CHURN_SUB_DIGI_GRACE_224:{component:c.default,audiences:{HD:{content:function(){return{smallerText:!0,contentText:"Please update your information so that your New York Times Subscription won’t be canceled. If you have recently updated your payment information please disregard this message.",paymentUrl:(0,m.default)("https://myaccount.nytimes.com/get-started/manage-billing").withCampaignID({defaultCampaignID:"7R8XQ"}).toString()}},tracking:{module:{name:"Dock",context:"expanded",label:"CH_CHURN_SUB_DIGI_GRACE_224",element:{name:p.Action.Payment}}}},AllAccess:{content:function(){return{smallerText:!1,contentText:"Please update your information so that your New York Times Subscription won’t be canceled.",paymentUrl:(0,m.default)("https://myaccount.nytimes.com/get-started/manage-billing").withCampaignID({defaultCampaignID:"7JFXJ"}).toString()}},tracking:{module:{name:"Dock",context:"expanded",label:"CH_CHURN_SUB_DIGI_GRACE_224",element:{name:p.Action.Payment}}}},Games:{content:function(){return{smallerText:!1,contentText:"Please update your information so that your New York Times Subscription won’t be canceled.",paymentUrl:(0,m.default)("https://myaccount.nytimes.com/get-started/manage-billing").withCampaignID({defaultCampaignID:"9H9FQ"}).toString()}},tracking:{module:{name:"Dock",context:"expanded",label:"CH_CHURN_SUB_DIGI_GRACE_224",element:{name:p.Action.Payment}}}}}},SUBCON__BAU_ALL_ACCESS_ACQUISITION_234:{component:f.default,audiences:{CountryUnitedStatesUnitedKingdomEurope:{offer:{ada_monthly:"ae666bd5-aa06-11ec-84c9-227543ace765"},content:function(e){return{kickerText:"6-month Welcome Offer",headerText:"Enjoy unlimited access to all of The Times.",headerCta:"Learn more",fullPrice:"".concat(e.offer.allAccessAcquisitionMonthly.fullPriceWeeklyShortNoCountryAbbreviation),bodyPriceExpression:"".concat(e.offer.allAccessAcquisitionMonthly.totalDueWeeklyShort,"/week"),subscriptionURI:(0,m.default)("https://www.nytimes.com/subscription").withCampaignID({defaultCampaignID:"8QWWY"}).toString()}},tracking:{module:{name:"dock",context:"expanded",label:"SUBCON__BAU_ALL_ACCESS_ACQUISITION_234",element:{name:p.Action.Payment}}}},CountryCanadaAustraliaRestOfWorldLow:{offer:{ada_monthly:"71b93e10-0281-43c9-ac0c-8b581fca45fd"},content:function(e){return{kickerText:"6-month Welcome Offer",headerText:"Enjoy unlimited access to all of The Times.",headerCta:"Learn more",fullPrice:"".concat(e.offer.allAccessAcquisitionMonthly.fullPriceWeeklyShortNoCountryAbbreviation),bodyPriceExpression:"".concat(e.offer.allAccessAcquisitionMonthly.totalDueWeeklyShort,"/week"),subscriptionURI:(0,m.default)("https://www.nytimes.com/subscription").withCampaignID({defaultCampaignID:"8QWWY"}).toString()}},tracking:{module:{name:"dock",context:"expanded",label:"SUBCON__BAU_ALL_ACCESS_ACQUISITION_234",element:{name:p.Action.Payment}}}},CountryRowHigh:{offer:{ada_monthly:"faf323d2-2fa5-11ed-a82a-325b8501dcc4"},content:function(e){return{kickerText:"6-month Welcome Offer",headerText:"Enjoy unlimited access to all of The Times.",headerCta:"Learn more",fullPrice:"".concat(e.offer.allAccessAcquisitionMonthly.fullPriceWeeklyShortNoCountryAbbreviation),bodyPriceExpression:"".concat(e.offer.allAccessAcquisitionMonthly.totalDueWeeklyShort,"/week"),subscriptionURI:(0,m.default)("https://www.nytimes.com/subscription").withCampaignID({defaultCampaignID:"8QWWY"}).toString()}},tracking:{module:{name:"dock",context:"expanded",label:"SUBCON__BAU_ALL_ACCESS_ACQUISITION_234",element:{name:p.Action.Payment}}}},CountryIndia:{offer:{ada_annual:"e7305cef-8e4e-42cc-bfdc-ca82d17666d9"},content:function(e){return{kickerText:"Welcome Offer",headerText:"Enjoy unlimited access to all of The Times.",headerCta:"Learn more",fullPrice:"".concat(e.offer.allAccessAcquisitionAnnual.fullPriceAnnualShortNoCountryAbbreviation),bodyPriceExpression:"".concat(e.offer.allAccessAcquisitionAnnual.totalDueAnnualShort,"/year"),subscriptionURI:(0,m.default)("https://www.nytimes.com/subscription").withCampaignID({defaultCampaignID:"8QWWY"}).toString()}},tracking:{module:{name:"dock",context:"expanded",label:"SUBCON__BAU_ALL_ACCESS_ACQUISITION_234",element:{name:p.Action.Payment}}}}}},AUDIO_APP_DOWNLOAD_682:{component:h.default,audiences:{MobileRegi:{content:function(){return{url:"https://apps.apple.com/us/app/nyt-audio/id1549293936",headerText:"Download the Audio app and \nsubscribe to start listening.",contextText:"Discover new voices, daily."}},tracking:{module:{name:"Dock",context:"expanded",label:"AUDIO_APP_DOWNLOAD_682",element:{name:p.Action.AppDownloadAudio}}}},MobileNewsEntitledSub:{content:function(){return{url:"https://apps.apple.com/us/app/nyt-audio/id1549293936",headerText:"Download the Audio app, \nincluded with your subscription.",contextText:"Discover new voices, daily."}},tracking:{module:{name:"Dock",context:"expanded",label:"AUDIO_APP_DOWNLOAD_682",element:{name:p.Action.AppDownloadAudio}}}}}},ACT_CONV_NEWS_SUB_ALL_ACCESS_UPGRADE_2310:{component:u.default,audiences:{CountryUnitedStates_1Price:{offer:{allAccess:"1836d5c0-aa0b-11ec-8de1-96d53f801633"},content:function(e){var t=e.offer.allAccess.promoPriceWeeklyShortNoCountryAbbreviation,n=t.indexOf(".")>-1?(t.match(/\d+\.?\d+/g)||[])[0]:(t.match(/\d+/g)||[])[0],i=(parseFloat(n||"0")-1).toFixed(2);return{priceDisplay:"$".concat(i),strikeThroughPriceDisplay:e.offer.allAccess.totalDueShortNoCountryAbbreviation,clickThroughURI:(0,m.default)("https://www.nytimes.com/account/product-switch").withOfferID(e.offer.allAccess.offerID).withCampaignID({defaultCampaignID:"8HRFX"}).toString()}},tracking:{module:{name:"dock",context:"expanded",label:"ACT_CONV_NEWS_SUB_ALL_ACCESS_UPGRADE_2310",element:{name:p.Action.ProductSwitch}}}},CountryUnitedStates_2Price:{offer:{allAccess:"203cc375-a94e-11ec-b2de-ce44c8f6c5cb"},content:function(e){var t=e.offer.allAccess.promoPriceWeeklyShortNoCountryAbbreviation,n=t.indexOf(".")>-1?(t.match(/\d+\.?\d+/g)||[])[0]:(t.match(/\d+/g)||[])[0],i=(parseFloat(n||"0")-2).toFixed(2);return{priceDisplay:"$".concat(i),strikeThroughPriceDisplay:e.offer.allAccess.totalDueShortNoCountryAbbreviation,clickThroughURI:(0,m.default)("https://www.nytimes.com/account/product-switch").withOfferID(e.offer.allAccess.offerID).withCampaignID({defaultCampaignID:"8HRFX"}).toString()}},tracking:{module:{name:"dock",context:"expanded",label:"ACT_CONV_NEWS_SUB_ALL_ACCESS_UPGRADE_2310",element:{name:p.Action.ProductSwitch}}}},CountryUnitedStates_425Price:{offer:{allAccess:"7048b896-a94d-11ec-94dd-2e703e69da05"},content:function(e){var t=e.offer.allAccess.promoPriceWeeklyShortNoCountryAbbreviation,n=t.indexOf(".")>-1?(t.match(/\d+\.?\d+/g)||[])[0]:(t.match(/\d+/g)||[])[0],i=(parseFloat(n||"0")-4.25).toFixed(2);return{priceDisplay:"$".concat(i),strikeThroughPriceDisplay:e.offer.allAccess.totalDueShortNoCountryAbbreviation,clickThroughURI:(0,m.default)("https://www.nytimes.com/account/product-switch").withOfferID(e.offer.allAccess.offerID).withCampaignID({defaultCampaignID:"8HRFX"}).toString()}},tracking:{module:{name:"dock",context:"expanded",label:"ACT_CONV_NEWS_SUB_ALL_ACCESS_UPGRADE_2310",element:{name:p.Action.ProductSwitch}}}},CountryCanadaAustralia_1Price:{offer:{allAccess:"f8287f05-2fa4-11ed-bf28-ee36010d6d85"},content:function(e){var t=e.offer.allAccess.currency,n="CAD"===t,i="AUD"===t,a=e.offer.allAccess.promoPriceWeeklyShortNoCountryAbbreviation,o=a.indexOf(".")>-1?(a.match(/\d+\.?\d+/g)||[])[0]:(a.match(/\d+/g)||[])[0],r=(parseFloat(o||"0")-1).toFixed(2);return{priceDisplay:"".concat(n&&"$".concat(r," (Cdn)")||i&&"A$".concat(r)||"$".concat(r)),strikeThroughPriceDisplay:e.offer.allAccess.totalDueShortNoCountryAbbreviation,clickThroughURI:(0,m.default)("https://www.nytimes.com/account/product-switch").withOfferID(e.offer.allAccess.offerID).withCampaignID({defaultCampaignID:"8HRFX"}).toString()}},tracking:{module:{name:"dock",context:"expanded",label:"ACT_CONV_NEWS_SUB_ALL_ACCESS_UPGRADE_2310",element:{name:p.Action.ProductSwitch}}}},CountryCanadaAustralia_5Price:{offer:{allAccess:"e12d8664-2ee6-11ed-a82a-325b8501dcc4"},content:function(e){var t=e.offer.allAccess.currency,n="CAD"===t,i="AUD"===t,a=e.offer.allAccess.promoPriceWeeklyShortNoCountryAbbreviation,o=a.indexOf(".")>-1?(a.match(/\d+\.?\d+/g)||[])[0]:(a.match(/\d+/g)||[])[0],r=(parseFloat(o||"0")-5).toFixed(2);return{priceDisplay:"".concat(n&&"$".concat(r," (Cdn)")||i&&"A$".concat(r)||"$".concat(r)),strikeThroughPriceDisplay:e.offer.allAccess.totalDueShortNoCountryAbbreviation,clickThroughURI:(0,m.default)("https://www.nytimes.com/account/product-switch").withOfferID(e.offer.allAccess.offerID).withCampaignID({defaultCampaignID:"8HRFX"}).toString()}},tracking:{module:{name:"dock",context:"expanded",label:"ACT_CONV_NEWS_SUB_ALL_ACCESS_UPGRADE_2310",element:{name:p.Action.ProductSwitch}}}},CountryEuropeGBRestofWorldHighRestofWorldLow_1Price:{offer:{allAccess:"f8287f05-2fa4-11ed-bf28-ee36010d6d85"},content:function(e){var t=e.offer.allAccess.currency,n="EUR"===t,i="GBP"===t,a=e.offer.allAccess.promoPriceWeeklyShortNoCountryAbbreviation,o=a.indexOf(".")>-1?(a.match(/\d+\.?\d+/g)||[])[0]:(a.match(/\d+/g)||[])[0],r=(parseFloat(o||"0")-1).toFixed(2);return{priceDisplay:"".concat(n&&"€".concat(r)||i&&"£".concat(r)||"$".concat(r)),strikeThroughPriceDisplay:e.offer.allAccess.totalDueShortNoCountryAbbreviation,clickThroughURI:(0,m.default)("https://www.nytimes.com/account/product-switch").withOfferID(e.offer.allAccess.offerID).withCampaignID({defaultCampaignID:"8HRFX"}).toString()}},tracking:{module:{name:"dock",context:"expanded",label:"ACT_CONV_NEWS_SUB_ALL_ACCESS_UPGRADE_2310",element:{name:p.Action.ProductSwitch}}}},CountryEuropeGBRestofWorldHighRestofWorldLow_2Price:{offer:{allAccess:"e12d8664-2ee6-11ed-a82a-325b8501dcc4"},content:function(e){var t=e.offer.allAccess.currency,n="EUR"===t,i="GBP"===t,a=e.offer.allAccess.promoPriceWeeklyShortNoCountryAbbreviation,o=a.indexOf(".")>-1?(a.match(/\d+\.?\d+/g)||[])[0]:(a.match(/\d+/g)||[])[0],r=(parseFloat(o||"0")-2).toFixed(2);return{priceDisplay:"".concat(n&&"€".concat(r)||i&&"£".concat(r)||"$".concat(r)),strikeThroughPriceDisplay:e.offer.allAccess.totalDueShortNoCountryAbbreviation,clickThroughURI:(0,m.default)("https://www.nytimes.com/account/product-switch").withOfferID(e.offer.allAccess.offerID).withCampaignID({defaultCampaignID:"8HRFX"}).toString()}},tracking:{module:{name:"dock",context:"expanded",label:"ACT_CONV_NEWS_SUB_ALL_ACCESS_UPGRADE_2310",element:{name:p.Action.ProductSwitch}}}},OtherSubs:{component:d.default,content:function(e){return{trackingAudience:"OtherSubs",trackingLabel:"ACT_CONV_NEWS_SUB_ALL_ACCESS_UPGRADE_2310",subInfo:e.subInfo,clickThroughURI:(0,m.default)("https://www.nytimes.com/account/product-switch").withSource("vi.news-dock.other-subs").withCampaignID({defaultCampaignID:"8HRFX"}).withRedirectUri().toString()}},tracking:{module:{name:"dock",context:"expanded",label:"ACT_CONV_NEWS_SUB_ALL_ACCESS_UPGRADE_2310",element:{name:p.Action.ProductSwitch}}}}}},"ACT_CONV_STAY_LONGER_AT_YOUR_EXISTING_RATE_(SLAYER)_238":{audiences:{Slayer:{component:E.default,content:function(e){return{trackingAudience:"Slayer",trackingLabel:"ACT_CONV_STAY_LONGER_AT_YOUR_EXISTING_RATE_(SLAYER)_238",subInfo:e.subInfo,clickThroughURI:(0,m.default)("https://www.nytimes.com/change-subscription").withOfferID(e.offer.productSwitch.offerID).withSource("vi.news-dock.ada_stay_at_your_rate").toString(),offerDuration:"6 months",billingTerms:"every 4 weeks for 6 months"}},tracking:{module:{element:{name:p.Action.ProductSwitch},name:"dock",context:"expanded",label:"ACT_CONV_STAY_LONGER_AT_YOUR_EXISTING_RATE_(SLAYER)_238"}}}},tests:[{test:"CONV_GUAC_AADock_SLAYER_0324"}]},STANDCON_CONV_SALE_DOCK_ON_FOOD_ARTICLES_TEST_2311:{component:g.default,audiences:{CountryUnitedStates:{offer:{sales:"95fe8db8-5690-4d85-a8d1-c8867ffe7562"},content:function(e){return{bauPrice:e.offer.sales.fullPriceMonthlyShort,salesPrice:e.offer.sales.promoPriceMonthlyShort,frequency:e.offer.sales.billingFrequency,subscriptionURI:(0,m.default)("https://www.nytimes.com/subscription/cooking").withCampaignID({defaultCampaignID:"89RRJ"}).toString()}},tracking:{module:{name:"dock",context:"expanded",element:{name:p.Action.Subscribe}}}},CountryCanadaAustralia:{offer:{sales:"74828f62-64bf-42c7-a0ca-8e5771bfceb4"},content:function(e){return{bauPrice:e.offer.sales.fullPriceMonthlyShort,salesPrice:e.offer.sales.promoPriceMonthlyShort,frequency:e.offer.sales.billingFrequency,subscriptionURI:(0,m.default)("https://www.nytimes.com/subscription/cooking").withCampaignID({defaultCampaignID:"89RRJ"}).toString()}},tracking:{module:{name:"dock",context:"expanded",element:{name:p.Action.Subscribe}}}},CountryEuropeUnitedKingdom:{offer:{sales:"1998e1a2-f94f-11eb-a9f2-1f89fd02e93c"},content:function(e){return{bauPrice:e.offer.sales.fullPriceMonthlyShort,salesPrice:e.offer.sales.promoPriceMonthlyShort,frequency:e.offer.sales.billingFrequency,subscriptionURI:(0,m.default)("https://www.nytimes.com/subscription/cooking").withCampaignID({defaultCampaignID:"89RRJ"}).toString()}},tracking:{module:{name:"dock",context:"expanded",element:{name:p.Action.Subscribe}}}},CountryRestOfWorldHigh:{offer:{sales:"a349bf30-4332-11ed-88db-5eb262649fb8"},content:function(e){return{bauPrice:e.offer.sales.fullPriceMonthlyShort,salesPrice:e.offer.sales.promoPriceMonthlyShort,frequency:e.offer.sales.billingFrequency,subscriptionURI:(0,m.default)("https://www.nytimes.com/subscription/cooking").withCampaignID({defaultCampaignID:"89RRJ"}).toString()}},tracking:{module:{name:"dock",context:"expanded",element:{name:p.Action.Subscribe}}}},CountryRestOfWorldLow:{offer:{sales:"20cd6443-73cc-11ec-bda8-ded6ac6ccfbe"},content:function(e){return{bauPrice:e.offer.sales.fullPriceMonthlyShort,salesPrice:e.offer.sales.promoPriceMonthlyShort,frequency:e.offer.sales.billingFrequency,subscriptionURI:(0,m.default)("https://www.nytimes.com/subscription/cooking").withCampaignID({defaultCampaignID:"89RRJ"}).toString()}},tracking:{module:{name:"dock",context:"expanded",element:{name:p.Action.Subscribe}}}}}},MWD_NYT_STORE_DISCOUNT_PROMO_2311:{component:y.default,content:function(){return{url:"https://store.nytimes.com/discount/HOLIDAY2023?utm_source=nyt&utm_medium=dock&utm_campaign=bfcm"}},tracking:{module:{name:"dock",context:"standard",label:"MWD_NYT_STORE_DISCOUNT_PROMO_2311",element:{name:p.Action.Store}}}},MWD_HOLIDAY_GIFTING_BLACK_FRIDAY_SALE_LAUNCH_2311:{component:v.default,audiences:{CountryUS:{content:function(){return{url:"https://www.nytimes.com/subscription/gift?campaignId=8LWRF&source=gifting.dock",offer:"20%"}},tracking:{module:{name:"dock",context:"expanded",label:"MWD_HOLIDAY_GIFTING_BLACK_FRIDAY_SALE_LAUNCH_2311_US",element:{name:p.Action.Gift}}}},NoCountryUS:{content:function(){return{url:"https://www.nytimes.com/subscription/gift?campaignId=8LWRF&source=gifting.dock",offer:"15%"}},tracking:{module:{name:"dock",context:"expanded",label:"MWD_HOLIDAY_GIFTING_BLACK_FRIDAY_SALE_LAUNCH_2311_NO_US",element:{name:p.Action.Gift}}}}}},SUBCON_CONV_SEP_PROMO_239:{component:S.default,audiences:{eligible_for_all_access_promo_offer:{content:function(e){var t=e.offer.allAccessSaleAcquisitionMonthly;return{useSalesUrgency:!0,headerText:"with our best offer",headerCta:"Learn more",fullPrice:t.fullPriceWeeklyShortNoCountryAbbreviation,bodyPriceExpression:"".concat(t.totalDueWeeklyShort,"/week"),subscriptionURI:(0,m.default)("https://www.nytimes.com/subscription").withCampaignID({defaultCampaignID:"8QWWY"}).toString(),isInternational:(0,s.isInternational)(e.country),country:e.country,promoMonthlyPrice:t.totalDueMonthlyShort,fullMonthlyPrice:t.fullPriceMonthlyShort}},tracking:{module:{name:"dock",context:"expanded",label:"SUBCON_CONV_SEP_PROMO_239",element:{name:p.Action.Subscribe}}}}}},PAYFLOW_GIFT_SPRING_2024_DOCK_MESSAGING_244:{component:_.default,audiences:{CountryUnitedStates:{content:function(){return{topHeadline:"Gift subscriptions to The Times are 20% off.",topSubHeadline:"Times gift subscriptions. 20% off.",alt:"The New York Times",headLine:"Save today on the gift",subHeadLine:"they’ll enjoy all year.",giftCopy:"New York Times gift subscriptions.",giftCopyM:"20% off.",urgency:"Ends soon",ctaCopy:"GIVE THE TIMES",url:"https://www.nytimes.com/subscription/gift?campaignId=8LWRF&source=gifting.dock",classDock:"GIFTINGDOCK0424SALEAllAccess",classDockBody:"AllAccess"}},tracking:{module:{name:"dock",context:"expanded",label:"PAYFLOW_GIFT_SPRING_2024_DOCK_MESSAGING_244",element:{name:p.Action.Gift}}}},CountryRestOfWorld:{content:function(){return{topHeadline:"Gift subscriptions to The Times are 15% off.",topSubHeadline:"Times gift subscriptions. 15% off.",alt:"The New York Times",headLine:"Save today on the gift",subHeadLine:"they’ll enjoy all year.",giftCopy:"New York Times gift subscriptions.",giftCopyM:"15% off.",urgency:"Ends soon",ctaCopy:"GIVE THE TIMES",url:"https://www.nytimes.com/subscription/gift?campaignId=8LWRF&source=gifting.dock",classDock:"GIFTINGDOCK0424SALEAllAccess",classDockBody:"AllAccess"}},tracking:{module:{name:"dock",context:"expanded",label:"PAYFLOW_GIFT_SPRING_2024_DOCK_MESSAGING_244",element:{name:p.Action.Gift}}}}}},GM_Q4_HOLIDAY_GIFTING_DOCKS_2312:{component:_.default,audiences:{Wirecutter:{content:function(){return{topHeadline:"The best gifts for every person (and budget)",topSubHeadline:"",alt:"The New York Times Wirecutter",headLine:"Get ahead on holiday gifting",headLineM:"",subHeadLine:"There’s a perfect gift for everyone. ",giftCopy:"Wirecutter can help you find it.",giftCopyM:"",ctaCopy:"Visit Wirecutter",url:"http://nytimes.com/wirecutter/gifts/?areas=dock&campaign=WCHoliday&channel=onsite",classDock:"GMQ4HOLIDAYGIFTINGDOCKS2312Wirecutter",classDockBody:"Wirecutter"}},tracking:{module:{name:"dock",context:"expanded",label:"GM_Q4_HOLIDAY_GIFTING_DOCKS_2312_Wirecutter",element:{name:p.Action.Gift}}}},All_Access:{content:function(){return{topHeadline:"The gift that says “I get you.” ",topSubHeadline:"The New York Times.",alt:"The New York Times",headLine:"Give the gift they’ll enjoy all year —",headLineM:"Give the gift they’ll enjoy all year.",subHeadLine:"unlimited access to everything we offer.",giftCopy:"New York Times gift subscriptions.",giftCopyM:"Times gift subscriptions.",ctaCopy:"GIVE THE TIMES",url:"https://www.nytimes.com/subscription/gift?campaignId=8LWRF&source=gifting.dockallaccess",classDock:"GMQ4HOLIDAYGIFTINGDOCKS2312AllAccess",classDockBody:"AllAccess"}},tracking:{module:{name:"dock",context:"expanded",label:"GM_Q4_HOLIDAY_GIFTING_DOCKS_2312_All_Access",element:{name:p.Action.Gift}}}},Games:{content:function(){return{topHeadline:"The gift for every solver.",topSubHeadline:"New York Times Games.",alt:"The New York Times Games",headLine:"Give the gift they’ll enjoy all year —",headLineM:"Give the gift they’ll enjoy all year.",subHeadLine:"unlimited access to word and logic puzzles.",giftCopy:"Gift subscriptions to New York Times Games.",giftCopyM:"Gift subscriptions to \nNew York Times Games.",ctaCopy:"GIVE GAMES",url:"https://www.nytimes.com/subscription/games/gift?campaignId=8LWRF&source=gifting.dockgames",classDock:"GMQ4HOLIDAYGIFTINGDOCKS2312AllAccess",classDockBody:"Games"}},tracking:{module:{name:"dock",context:"expanded",label:"GM_Q4_HOLIDAY_GIFTING_DOCKS_2312_Games",element:{name:p.Action.Gift}}}},Cooking:{content:function(){return{topHeadline:"The gift for every taste.",topSubHeadline:"New York Times Cooking.",alt:"The New York Times Cooking",headLine:"Give the gift they’ll enjoy all year —",headLineM:"Give the gift they’ll enjoy all year.",subHeadLine:"unlimited access to recipes, advice and inspiration.",giftCopy:"Gift subscriptions to New York Times Cooking.",giftCopyM:"Gift subscriptions to \nNew York Times Cooking.",ctaCopy:"GIVE COOKING",url:"https://www.nytimes.com/subscription/cooking/gift?campaignId=8LWRF&source=gifting.dockcooking",classDock:"GMQ4HOLIDAYGIFTINGDOCKS2312AllAccess",classDockBody:"Cooking"}},tracking:{module:{name:"dock",context:"expanded",label:"GM_Q4_HOLIDAY_GIFTING_DOCKS_2312_Cooking",element:{name:p.Action.Gift}}}},The_Athletic:{content:function(){return{topHeadline:"The gift for every sports fan.",topSubHeadline:"The Athletic.",alt:"The Athletic.",headLine:"Give the gift they’ll enjoy all year —",headLineM:"Give the gift they’ll enjoy all year.",subHeadLine:"unlimited access to in-depth sports coverage.",giftCopy:"Gift subscriptions to The Athletic.",giftCopyM:"Gift subscriptions to The Athletic.",ctaCopy:"GIVE THE ATHLETIC",url:"https://www.nytimes.com/subscription/gift?campaignId=8LWRF&source=gifting.docktheathletic",classDock:"GMQ4HOLIDAYGIFTINGDOCKS2312AllAccess",classDockBody:"The_Athletic"}},tracking:{module:{name:"dock",context:"expanded",label:"GM_Q4_HOLIDAY_GIFTING_DOCKS_2312_The_Athletic",element:{name:p.Action.Gift}}}}},tests:[{test:"MKT_GiftOfferTest_1223"}]},CH_CHURN_CANCEL_THE_CANCEL_2112:{component:w.default,audiences:{CountryUnitedStates_News:{offer:{product:"2b0996a8-0ff1-40a9-a365-7965ba7de048"},content:function(e){var t=e.offer.product.totalDueWeeklyShort;return{boldCopy:"Reactivate for ".concat(t,"/week"),copy:" to keep your unlimited access."}}},CountryUnitedStates_AllAccess:{offer:{product:"3bca9b12-e975-11eb-b8d5-738bc22ed287"},content:function(e){var t=e.offer.product.totalDueWeeklyShort;return{boldCopy:"Reactivate for ".concat(t,"/week"),copy:" to keep your unlimited access."}}},CountriesRestOfWorld:{content:function(){return{boldCopy:"Reactivate to keep your unlimited access.",copy:""}}}},tracking:{module:{name:"dock",context:"standard",label:"CH_CHURN_CANCEL_THE_CANCEL_2112",element:{name:p.Action.Subscribe}}}},CH_AT_RISK_SUBSCRIBER_RETENTION_HIGH_0124_1_TEST:{tests:[{test:"OMA_AtRiskSubsInt_HighRisk_0124"}],component:b.default},CH_AT_RISK_SUBSCRIBER_RETENTION_HIGH_0124_0_CONTROL:{tests:[{test:"OMA_AtRiskSubsInt_HighRisk_0124"}],component:k.default},CH_AT_RISK_SUBSCRIBER_RETENTION_MED_0124_1_TEST:{tests:[{test:"OMA_AtRiskSubsInt_MedRisk_0124"}],component:b.default},CH_AT_RISK_SUBSCRIBER_RETENTION_MED_0124_0_CONTROL:{tests:[{test:"OMA_AtRiskSubsInt_MedRisk_0124"}],component:k.default},CH_AT_RISK_SUBSCRIBER_RETENTION_LOW_0124_1_TEST:{tests:[{test:"OMA_AtRiskSubsInt_LowRisk_0124"}],component:b.default},CH_AT_RISK_SUBSCRIBER_RETENTION_LOW_0124_0_CONTROL:{tests:[{test:"OMA_AtRiskSubsInt_LowRisk_0124"}],component:k.default},MX_ENGAGE_LEARNING_NETWORK_NEWSLETTER_223:{component:O.default,audiences:{NonSub:{content:function(){return{url:"https://www.nytimes.com/newsletters/signup/LN",headerText:"The Learning Network",contentText:"Free lesson plans, writing prompts and activities for students, all based on Times journalism.",cta:"Get the newsletter"}},tracking:{module:{name:"dock",context:"expanded",label:"MX_ENGAGE_LEARNING_NETWORK_NEWSLETTER_223",element:{name:p.Action.NewsLetterSignup}}}}}},SUJO_LOGGED_OUT_READ_IN_APP_0624:{component:C.default,audiences:{ReadInAppVariant:{content:function(){var e="/"===(0,m.getPathName)()?"homepage":"article";return{authUri:"https://myaccount.nytimes.com/auth/enter-email?response_type=cookie&client_id=lgcl",headerText:"Log in for access to all articles.",contentText:"Switch to the app to stay logged in and read without interruptions. ",ctaLogApp:"Log into the app",ctaLogAppTrackObj:{event:"moduleInteraction",eventData:{pagetype:e,trigger:"module",type:"click"},module:{name:"known-sub-to-app",label:"known-sub-dock-continue-in-the-app",context:"standard",region:"dock",element:{name:"log-into-app",label:"clicked-log-into-app"}}},ctaContinueWeb:"Continue on web instead",ctaContinueWebTrackObj:{event:"moduleInteraction",eventData:{pagetype:e,trigger:"module",type:"click"},module:{name:"known-sub-to-app",label:"known-sub-dock-continue-in-the-app",context:"standard",region:"dock",element:{name:"continue-on-web",label:"clicked-continue-on-web"}}}}},tests:[{test:"UJ_subx_logged_out_read_in_app_0624"}],tracking:{module:{name:"dock",context:"expanded",label:"SUJO_AUTH_KNOWN_SUB_LOG_IN_224",element:{name:p.Action.LogIn}}}}}},SUJO_AUTH_KNOWN_SUB_LOG_IN_224:{component:T.default,audiences:{ReadInAppControl:{content:function(){return{url:"https://myaccount.nytimes.com/auth/enter-email?response_type=cookie&client_id=lgcl",headerText:"Thanks for reading The Times.",contentTextPrimary:"Looks like you’re a subscriber.",contentTextSecondary:"Log in to continue reading uninterrupted.",cta:"Log in",ctaTrackObj:{event:"moduleInteraction",eventData:{pagetype:"/"===(0,m.getPathName)()?"homepage":"article",trigger:"module",type:"click"},module:{name:"known-sub-to-app",label:"known-sub-dock-continue-in-the-app",context:"standard",region:"dock",element:{name:"log-in-here",label:"clicked-log-in-here"}}}}},tests:[{test:"UJ_subx_logged_out_read_in_app_0624"}],tracking:{module:{name:"known-sub-to-app",context:"standard",label:"known-sub-dock-continue-in-the-app",region:"dock"}}},LoggedOutSub:{content:function(){var e="https://myaccount.nytimes.com/auth/enter-email?response_type=cookie&client_id=lgcl";return{url:e,headerText:"Thanks for reading The Times.",contentTextPrimary:"Looks like you’re a subscriber.",contentTextSecondary:"Log in to continue reading uninterrupted.",cta:"Log in",ctaTrackObj:{event:"moduleInteraction",eventData:{pagetype:"/"===(0,m.getPathName)()?"homepage":"article",trigger:"module",type:"click"},module:{name:"dock",label:"SUJO_AUTH_KNOWN_SUB_LOG_IN_224",element:{name:p.Action.LogIn,url:e}}}}},tracking:{module:{name:"dock",context:"expanded",label:"SUJO_AUTH_KNOWN_SUB_LOG_IN_224",element:{name:p.Action.LogIn}}}}}},GUAC_HD_UPSELL_DOCK_TEST_244:{component:x.default,content:function(){return{boldCopy:"Learn more.",copy:"Add the Sunday Times in print to your subscription. 50% off the first year. "}},tracking:{module:{name:"dock",context:"standard",label:"GUAC_HD_UPSELL_DOCK_TEST_244",region:"1",element:{name:p.Action.Subscribe,label:"learn more"}}}},GUAC_ANNUAL_SLAYER_247:{tests:[{test:"ACCT_Annual_Slayer_2405"}],tracking:{module:{name:"dock",context:"expanded",label:"GUAC_ANNUAL_SLAYER_247",element:{name:p.Action.ProductSwitch}}},audiences:{Control:{component:d.default,content:function(e){return{trackingAudience:"Control",trackingLabel:"GUAC_ANNUAL_SLAYER_247",subInfo:e.subInfo,clickThroughURI:(0,m.default)("https://www.nytimes.com/account/product-switch").withSource("vi.news-dock.annual").withCampaignID({defaultCampaignID:"8HRFX"}).withRedirectUri().toString()}}},AnnualSlayer_AA:{component:d.default,content:function(e){return{trackingAudience:"AnnualSlayer_AA",trackingLabel:"GUAC_ANNUAL_SLAYER_247",subInfo:e.subInfo,clickThroughURI:(0,m.default)("https://www.nytimes.com/account/product-switch").withSource("vi.news-dock.annual").withCampaignID({defaultCampaignID:"8HRFX"}).withRedirectUri().toString()}}},AnnualSlayer_AB:{component:E.default,content:function(e){return{trackingAudience:"AnnualSlayer_AB",trackingLabel:"GUAC_ANNUAL_SLAYER_247",subInfo:e.subInfo,clickThroughURI:(0,m.default)("https://www.nytimes.com/account/product-switch").withOfferID(e.offer.productSwitch.offerID).withSource("vi.news-dock.ada_stay_at_your_rate_annual").withRedirectUri().toString(),offerDuration:"one year",billingTerms:"for one year"}}},Control_Reset:{component:d.default,content:function(e){return{trackingAudience:"Control",trackingLabel:"GUAC_ANNUAL_SLAYER_247",subInfo:e.subInfo,clickThroughURI:(0,m.default)("https://www.nytimes.com/account/product-switch").withSource("vi.news-dock.annual").withCampaignID({defaultCampaignID:"8HRFX"}).withRedirectUri().toString()}}},AnnualSlayer_AB_Reset:{component:E.default,content:function(e){return{trackingAudience:"AnnualSlayer_AB",trackingLabel:"GUAC_ANNUAL_SLAYER_247",subInfo:e.subInfo,clickThroughURI:(0,m.default)("https://www.nytimes.com/account/product-switch").withOfferID(e.offer.productSwitch.offerID).withSource("vi.news-dock.ada_stay_at_your_rate_annual").withRedirectUri().toString(),offerDuration:"one year",billingTerms:"for one year"}}}}}}}},"6hsm":function(e,t,n){"use strict";var i=n("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.PUBLISHER_ID_OBJ=t.PUBLISHER_ID=t.NYT_ORGANIZATION_SIMPLE=t.NYT_ORGANIZATION_AMP=t.NYT_ORGANIZATION=t.NYT_LOGO=t.NYT_AMP_LOGO=t.HEADERLIVEBRIEFINGBLOCK_TYPENAME=t.DEFAULT_PROMO_IMAGES=void 0;var a=i(n("lSNA")),o=i(n("810M"));function r(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function s(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?r(Object(n),!0).forEach((function(t){(0,a.default)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):r(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}t.HEADERLIVEBRIEFINGBLOCK_TYPENAME="HeaderLiveBriefingBlock";var l=t.NYT_LOGO=new o.default({url:"https://static01.nyt.com/images/icons/t_logo_291_black.png",contentUrl:"https://static01.nyt.com/images/icons/t_logo_291_black.png",height:291,width:291,creditText:"The New York Times"}),c=t.NYT_AMP_LOGO=new o.default({url:"https://static01.nyt.com/vi-assets/amp-assets/nyt-logo.png",contentUrl:"https://static01.nyt.com/vi-assets/amp-assets/nyt-logo.png",width:365,height:60,creditText:"The New York Times"}),u=t.PUBLISHER_ID="https://www.nytimes.com/#publisher",d=(t.PUBLISHER_ID_OBJ={"@id":u,name:"The New York Times"},t.NYT_ORGANIZATION_SIMPLE={"@context":"https://schema.org","@type":"Organization",name:"The New York Times",logo:l,url:"https://www.nytimes.com/"}),p=t.NYT_ORGANIZATION=s(s({},d),{},{"@type":"NewsMediaOrganization","@id":u,diversityPolicy:"https://www.nytco.com/company/diversity-and-inclusion/",ethicsPolicy:"https://www.nytco.com/company/standards-ethics/",masthead:"https://www.nytimes.com/interactive/2023/01/28/admin/the-new-york-times-masthead.html",foundingDate:"1851-09-18",sameAs:"https://en.wikipedia.org/wiki/The_New_York_Times"});t.NYT_ORGANIZATION_AMP=s(s({},p),{},{logo:c}),t.DEFAULT_PROMO_IMAGES=[new o.default({url:"https://static01.nyt.com/vi-assets/images/share/1200x675_nameplate.png",contentUrl:"https://static01.nyt.com/vi-assets/images/share/1200x675_nameplate.png",height:675,width:1200,creditText:"The New York Times"}),new o.default({url:"https://static01.nyt.com/vi-assets/images/share/1200x900_t.png",contentUrl:"https://static01.nyt.com/vi-assets/images/share/1200x900_t.png",height:900,width:1200,creditText:"The New York Times"}),new o.default({url:"https://static01.nyt.com/vi-assets/images/share/1200x1200_t.png",contentUrl:"https://static01.nyt.com/vi-assets/images/share/1200x1200_t.png",height:1200,width:1200,creditText:"The New York Times"})]},"6l3V":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.swiperNavClass=void 0;var i=n("Jqp9");t.swiperNavClass=(0,i.css)("display:flex;flex-direction:row;justify-content:center;position:relative;min-height:40px;")},"6l8D":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.linkClass=void 0;var i=n("Jqp9"),a=n("3sMT");t.linkClass=(0,i.css)("color:",a.color.signal.editorial,";&:visited{color:",a.color.signal.editorial,";}")},"6qvD":function(e,t,n){"use strict";var i=n("TqRt"),a=n("cDf5");Object.defineProperty(t,"__esModule",{value:!0}),t.showHeadshotsTest=t.getHeadshotCount=t.fetchHeadshots=t.default=t.checkForMissingHeadshots=void 0;var o=i(n("lwsE")),r=i(n("W8MJ")),s=i(n("a1gu")),l=i(n("Nsbk")),c=i(n("7W2i")),u=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=a(e)&&"function"!=typeof e)return{default:e};var n=f(t);if(n&&n.has(e))return n.get(e);var i={__proto__:null},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var r in e)if("default"!==r&&{}.hasOwnProperty.call(e,r)){var s=o?Object.getOwnPropertyDescriptor(e,r):null;s&&(s.get||s.set)?Object.defineProperty(i,r,s):i[r]=e[r]}return i.default=e,n&&n.set(e,i),i}(n("q1tI")),d=(i(n("17x9")),n("abzs")),p=n("f/4F");function f(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(f=function(e){return e?n:t})(e)}function m(e,t,n){return t=(0,l.default)(t),(0,s.default)(e,function(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return function(){return!!e}()}()?Reflect.construct(t,n||[],(0,l.default)(e).constructor):t.apply(e,n))}t.fetchHeadshots=function(e){var t;try{t=e.creators.map((function(e){var t=e.promotionalMedia,n=e.displayName,i=e.bioUrl;return{crops:(null==t?void 0:t.crops)||[],name:n,bioUrl:i||null}}))}catch(e){return null}return t.map((function(e){var t=e.name,n=e.crops,i=e.bioUrl;return{name:t,renditions:n.map((function(e){return e.renditions})),bioUrl:i}})).map((function(e){var t=e.name,n=e.renditions,i=e.bioUrl;return{name:t,flatCrops:(0,d.flattenCropArray)(n),bioUrl:i}})).map((function(e){var t=e.name,n=e.flatCrops,i=e.bioUrl;return{name:t,crop:(0,d.get150Crop)(n),bioUrl:i}}))};var h=t.checkForMissingHeadshots=function(e){try{return 0===e.creators.length||e.creators.some((function(e){return e&&!e.promotionalMedia}))}catch(e){return!0}},g=(t.showHeadshotsTest=function(e){var t=e.hideHeadshots,n=void 0===t||t,i=e.headshotCandidate,a=void 0!==i&&i,o=e.bylines,r=void 0===o?[]:o,s=e.section,l=void 0===s?"":s,c=e.headshotCount,u=void 0===c?0:c;return!1===n&&!0===a&&r.length>0&&!1===r.some(h)&&("opinion"!==l&&u<=6||"opinion"===l&&u<=4)},t.getHeadshotCount=function(e){var t=0;return null!==e&&Array.isArray(e)?e.every((function(e){return u.default.isValidElement(e)}))?e.length:(e.forEach((function(e){e&&Array.isArray(e)&&e.forEach((function(e){null!==e&&(t+=1)}))})),t):t}),y=function(e){function t(){return(0,o.default)(this,t),m(this,t,arguments)}return(0,c.default)(t,e),(0,r.default)(t,[{key:"generateHeadshots",value:function(e){return"array"===e?this.getArrayHeadshots():this.getNodeHeadshots()}},{key:"getArrayHeadshots",value:function(){var e=this.props,t=e.headshots,n=e.headshotClassName,i=e.headshotContainerClassName,a=e.links,o=e.Headshot,r=e.inComposedByline,s=g(t);return t&&u.default.createElement(p.HeadshotsContainer,{headshotCount:s,className:i,"aria-hidden":r?"true":"false"},t.map((function(e){return Array.isArray(e)&&null!==e?e.map((function(e,t){if(null===e)return null;var i=e.name,r=void 0===i?"":i,l=e.crop,c=void 0===l?null:l,d=e.bioUrl,f=void 0===d?null:d;if(null===c)return null;var m=u.default.createElement(o,{alt:r,title:r,src:c,key:t.toString(16),headshotCount:s,className:n});return"disabled"===a||null===f?m:u.default.createElement("a",{href:f,className:p.linkImageClass,key:t.toString(16)},m)})):null})))}},{key:"getNodeHeadshots",value:function(){var e=this.props,t=e.headshots,n=e.headshotContainerClassName,i=e.inComposedByline,a=t.length;return t&&u.default.createElement(p.NodeHeadshotContainer,{headshotCount:a,className:n,"aria-hidden":i?"true":"false"},t.map((function(e){return e})))}},{key:"render",value:function(){var e=this.props.headshots,t=null==e?void 0:e.every((function(e){return u.default.isValidElement(e)})),n=null==e?void 0:e.every((function(e){return Array.isArray(e)}));if(!t&&!n)return null;var i=n?"array":"node";return this.generateHeadshots(i)}}])}(u.Component);y.displayName="Headshots",y.defaultProps={headshots:[],headshotClassName:void 0,headshotContainerClassName:void 0,links:"enabled",Headshot:p.StyledHeadshot,inComposedByline:!1};t.default=y},"6zwR":function(e,t,n){"use strict";n.d(t,"a",(function(){return m})),n.d(t,"b",(function(){return h}));var i=n("Jqp9"),a=n("i+0r"),o=n.n(a),r=n("TvEp"),s=n.n(r),l=n("42vy"),c=n.n(l),u=n("s6ck"),d=n.n(u),p=n("wXC7"),f=n.n(p),m=Object(i.css)(o.a," + ",s.a,"{margin-top:0;}",c.a," + ",d.a,"{margin-top:-0.3em;}",o.a," + ",c.a,"{margin-top:0;}",c.a," + figure{margin-top:1.2rem;}",d.a," + figure{margin-top:1.2rem;}"),h=Object(i.css)(f.a.headerSpacing.marginTop,";")},"70M3":function(e,t,n){"use strict";t.a=function(e){var t=e.sectionContent,n=e.subsectionContent,i=e.adSensitivity,a=e.taxonomyException,o=t;return a?o=a:null!=n&&(o="".concat(o,"/").concat(n)),"TRAGEDY"===i&&(o="tragedy"),"string"==typeof o&&(o=(o=o.replace(/-/g,"")).replace(/\/$/,"")),"/29390238/nyt/".concat(o)}},"74vb":function(e,t,n){"use strict";var i=n("TqRt"),a=n("cDf5");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=i(n("q1tI")),r=(i(n("17x9")),i(n("ZfOj"))),s=i(n("82Ke")),l=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=a(e)&&"function"!=typeof e)return{default:e};var n=c(t);if(n&&n.has(e))return n.get(e);var i={__proto__:null},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var r in e)if("default"!==r&&{}.hasOwnProperty.call(e,r)){var s=o?Object.getOwnPropertyDescriptor(e,r):null;s&&(s.get||s.set)?Object.defineProperty(i,r,s):i[r]=e[r]}return i.default=e,n&&n.set(e,i),i}(n("v466"));function c(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(c=function(e){return e?n:t})(e)}var u=function(e){var t=e.article,n=e.deviceType,i=e.trackCall,a=e.trackClick;return t.compatibility&&t.reviewItems&&0!==t.reviewItems.length?o.default.createElement("div",{className:l.reviewFooterClass},t.reviewItems.map((function(e,l){if(e){if(t.compatibility.isDiningReview)return o.default.createElement(s.default,{key:l.toString(),review:e,index:l,trackClick:a,trackCall:i,deviceType:n});if(t.compatibility.isMovieReview)return o.default.createElement(r.default,{key:l.toString(),review:e,index:l,trackClick:a,deviceType:n})}return null}))):null};u.displayName="ReviewFooter",u.defaultProps={deviceType:"",trackCall:function(){},trackClick:function(){}};t.default=u},7502:function(e,t,n){"use strict";var i=n("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=i(n("q1tI")),o=(i(n("17x9")),function(e){var t=e.alternateRating,n=void 0===t?"":t,i=e.claim,o=e.claimDate,r=e.claimReviewUrl,s=e.claimUrl,l=e.contentMetadata,c=e.firstPublished,u=e.rating,d={"@context":"http://schema.org","@type":"ClaimReview",claimReviewed:i,datePublished:c,url:r,reviewBody:l,itemReviewed:{"@type":"CreativeWork",author:{"@type":"Organization",name:e.source,sameAs:""},url:s,datePublished:o},author:{"@type":"Organization",name:"The New York Times"},reviewRating:{"@type":"Rating",ratingValue:u,bestRating:5,worstRating:1,alternateName:n}};return a.default.createElement("script",{type:"application/ld+json",dangerouslySetInnerHTML:{__html:JSON.stringify(d,null,2)}})});o.displayName="ClaimReviewMetadata",o.defaultProps={alternateRating:""};t.default=o},"7DZV":function(e,t,n){"use strict";var i=n("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.swiperClass=t.slideClass=t.peekingSlideContainerClass=void 0;var a=n("Jqp9"),o=i(n("3Rk2")),r=i(n("wXC7")),s=n("3sMT"),l=(0,o.default)([r.default.breakpoint.small]);t.swiperClass=(0,a.css)("position:relative;display:flex;flex:none;flex-flow:row nowrap;overflow-y:hidden;scroll-snap-type:x mandatory;-webkit-overflow-scrolling:touch;scroll-behavior:smooth;z-index:2;scrollbar-width:none;",l({marginLeft:[0,"-20px"],paddingLeft:["20px",0],width:["auto","calc(100% + 40px)"],clipPath:["none","inset(0 20px)"]})," @media (prefers-reduced-motion:reduce){scroll-behavior:auto;}&::-webkit-scrollbar{display:none;}"),t.slideClass=(0,a.css)("position:relative;scroll-snap-align:center;scroll-snap-stop:always;box-sizing:border-box;",l({border:["1px solid ".concat(s.color.stroke.quaternary),"none"],padding:["15px","0 20px 10px"]})),t.peekingSlideContainerClass=(0,a.css)("display:flex;scroll-snap-align:center;",l({flex:["0 0 80%","none"],marginRight:["20px",0],width:[null,"100%"],"&:last-child":{paddingRight:["20px",0],marginRight:0}}))},"7E81":function(e,t,n){"use strict";var i=n("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=i(n("q1tI")),o=(i(n("17x9")),n("Jqp9")),r=n("abzs"),s=i(n("139F")),l=i(n("MKiQ")),c=i(n("6RhY")),u=n("7Wk1"),d=function(e){var t=e.isInEditor,n=e.columnsMobile,i=e.columnsDesktop,d=e.gutterMobile,p=e.gutterDesktop,f=e.size,m=e.caption,h=e.credit;if(t)return a.default.createElement("div",{className:u.oakClass},a.default.createElement("div",{className:(0,o.cx)(u.oakGridContainerClass,"exp-grid-size-".concat(f))},a.default.createElement(u.StyledGridClass,{columnsMobile:n,columnsDesktop:i,gutterMobile:d,gutterDesktop:p},e.photos.map((function(e){return a.default.createElement("img",{alt:"",src:e.crops.jumbo.url})}))),a.default.createElement(c.default,null,m&&a.default.createElement(l.default,null,m),h&&a.default.createElement(s.default,null,h))));var g=e.index,y=e.media.map((function(e,t){if("Image"===e.__typename){var n=((0,r.getCrop)(e.crops,"MASTER")&&(0,r.getCrop)(e.crops,"MASTER").renditions).length;return{url:(0,r.getCrop)(e.crops,"MASTER").renditions[n-1].url,mobileUrl:(0,r.getCrop)(e.crops,"MOBILE_MASTER")?(0,r.getCrop)(e.crops,"MOBILE_MASTER").renditions[0].url:(0,r.getCrop)(e.crops,"MASTER").renditions[n-1].url,text:e.legacyHtmlCaption||e.caption.text,credit:e.credit,index:t,__typename:"Image"}}return null}));return a.default.createElement("div",{className:(0,o.cx)(u.gridContainerClass,"exp-grid-size-".concat(f.toLowerCase()))},a.default.createElement(u.StyledGridClass,{columnsMobile:n,columnsDesktop:i,gutterMobile:d,gutterDesktop:p},y.map((function(e,t){return"Image"===e.__typename?a.default.createElement("picture",{className:"grid-image-".concat(t),id:"grid-image-".concat(t,"-").concat(g),"data-credit":e.credit},a.default.createElement("source",{srcSet:"".concat(e.url,"?auto=webp&quality=90"),media:"(min-width: 600px)"}),a.default.createElement("img",{alt:"",src:"".concat(e.mobileUrl,"?auto=webp&quality=90")})):null}))),a.default.createElement(c.default,null,m&&a.default.createElement(l.default,null,m),h&&a.default.createElement(s.default,null,h)))};d.displayName="Grid",d.defaultProps={isInEditor:!1,columnsMobile:"2",columnsDesktop:"2",gutterMobile:"10",gutterDesktop:"20",size:"large",caption:"",credit:"",index:"",photos:[]};t.default=d},"7HgC":function(e,t,n){"use strict";t.a="/vi-assets/static-assets/icon-the-veggie_144x144-f99606e1ca100f88cdfd8d763bf442c5.webp"},"7IP+":function(e,t,n){"use strict";var i=n("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=i(n("SgWa"));t.default=a.default},"7TTU":function(e,t,n){"use strict";var i=n("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=i(n("q1tI")),o=(i(n("17x9")),n("1gPk")),r=function(e){var t=e.children;return a.default.createElement("sub",{className:o.subscriptClass},t)};r.displayName="SubscriptFormat";t.default=r},"7VSS":function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));var i=n("fZdH"),a=n("rWB7"),o=n("hU1o"),r=n("NW2b");function s(){var e=Object(i.a)(),t=Object(a.b)(),n=Object(o.a)().isCrawler;return Object(r.b)(e)&&t&&!n}},"7W2e":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.preClass=t.default=void 0;var i=n("Jqp9"),a=t.preClass=(0,i.css)("white-space:pre-wrap;"),o=(0,i.styled)("span",{target:"evw5hdy0"})(a,";");t.default=o},"7WMn":function(e,t,n){"use strict";n.d(t,"a",(function(){return s})),n.d(t,"b",(function(){return c}));var i=n("uyHG"),a=n.n(i),o=n("A4Gh"),r=(n("9lNb"),a()((function(){return window.__preloadedData.config}))),s={PRD:"PRD",STG:"STG"},l=["samizdat-graphql-tst.stg.iad2.nyt.net","samizdat-graphql-test.stg.nytimes.com","samizdat-graphql-prev.stg.nytimes.com","samizdat-graphql-experimental-lab.dev.nyt.net"],c=function(){var e=r().gqlUrlClient,t=Object(o.parse)(e);return l.includes(t.hostname)?s.STG:s.PRD}},"7Wk1":function(e,t,n){"use strict";var i=n("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.oakGridContainerClass=t.oakClass=t.gridContainerClass=t.StyledGridClass=void 0;var a=n("Jqp9"),o=i(n("wXC7")),r=i(n("6RhY"));t.gridContainerClass=(0,a.css)("margin:",o.default.breakpoint.mobileBlockMargins,";",o.default.breakpoint.medium,"{margin:",o.default.breakpoint.desktopMediaMargins,";}&.exp-grid-size-medium{width:100%;max-width:",o.default.breakpoint.textBodyWidth,"px;",o.default.breakpoint.small,"{width:",o.default.breakpoint.mobileFullWidth,";}",o.default.breakpoint.medium,"{width:auto;max-width:",o.default.breakpoint.textBodyWidthExtralarge,"px;}}&.exp-grid-size-large{max-width:",o.default.breakpoint.mediaMaxWidth,"px;",o.default.breakpoint.small,"{width:auto;",r.default,"{margin-left:20px;}}",o.default.breakpoint.mediumLarge,"{width:945px;",r.default,"{max-width:",o.default.breakpoint.mediumMediaExtralarge,"px;margin-left:0;}}",o.default.breakpoint.extraLarge,"{width:",o.default.breakpoint.mediaMaxWidth,"px;}}&.exp-grid-size-full{",o.default.breakpoint.medium,"{max-width:100%;}",r.default,"{max-width:",o.default.breakpoint.textBodyWidth,"px;",o.default.breakpoint.small,"{max-width:900px;","rightToLeft"===o.default.languageDirection?"margin-right: ".concat(o.default.grid.pageMargin,"px"):"margin-left: ".concat(o.default.grid.pageMargin,"px;"),";}}}"),t.StyledGridClass=(0,a.styled)("div",{target:"e170gtkt0"})("display:grid;grid-template-columns:repeat(",(function(e){return e.columnsMobile}),",1fr);gap:",(function(e){return e.gutterMobile}),"px;",o.default.breakpoint.small,"{grid-template-columns:repeat(",(function(e){return e.columnsDesktop}),",1fr);gap:",(function(e){return e.gutterDesktop}),"px;}img{display:block;width:100%;}"),t.oakClass=(0,a.css)("height:auto;max-width:100%;width:auto;"),t.oakGridContainerClass=(0,a.css)("margin-left:auto;margin-right:auto;margin-top:",o.default.font.size(37),";margin-bottom:",o.default.font.size(37),";",o.default.breakpoint.medium,"{margin-top:",o.default.font.size(43),";margin-bottom:",o.default.font.size(43),";}&.exp-grid-size-medium{margin:21px auto 20px;width:auto;max-width:calc(100% - 8rem);}&.exp-grid-size-large{max-width:1000px;width:auto;margin:43px 30px;",r.default,"{max-width:",o.default.breakpoint.mediumMediaExtralarge,"px;margin-left:0;}}&.exp-grid-size-full{",o.default.breakpoint.medium,"{max-width:100%;}",r.default,"{max-width:",o.default.breakpoint.textBodyWidth,"px;",o.default.breakpoint.small,"{max-width:900px;","rightToLeft"===o.default.languageDirection?"margin-right: ".concat(o.default.grid.pageMargin,"px"):"margin-left: ".concat(o.default.grid.pageMargin,"px;"),";}}}")},"7hBp":function(e,t,n){"use strict";var i=n("TqRt"),a=n("cDf5");Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.Context=void 0;var o=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=a(e)&&"function"!=typeof e)return{default:e};var n=r(t);if(n&&n.has(e))return n.get(e);var i={__proto__:null},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var s in e)if("default"!==s&&{}.hasOwnProperty.call(e,s)){var l=o?Object.getOwnPropertyDescriptor(e,s):null;l&&(l.get||l.set)?Object.defineProperty(i,s,l):i[s]=e[s]}return i.default=e,n&&n.set(e,i),i}(n("q1tI"));i(n("17x9"));function r(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(r=function(e){return e?n:t})(e)}var s={addImages:function(){},addSubresources:function(){},addInlinedInteractives:function(){}},l=t.Context=o.default.createContext(s),c=function(e){var t=e.children,n=e.resources,i=(0,o.useMemo)((function(){return{addImages:function(e){n.images=n.images||{},e.forEach((function(e){e.target&&(n.images["".concat(e.target).concat(e.minViewportWidth)]={crops:e})}))},addSubresources:function(e){n.subresources=n.subresources||{},n.subresources[e]={target:e}},addInlinedInteractives:function(e,t){n.inlinedInteractives=n.inlinedInteractives||{},n.inlinedInteractives[t]={html:e}}}}),[n]);return o.default.createElement(l.Provider,{value:i},t)};c.displayName="Provider",c.defaultProps={resources:{}};t.default=c},"7sTW":function(e,t,n){"use strict";n.d(t,"b",(function(){return s}));var i=function(){var e,t;return null===(e=Object({SERVER_PORT:"3000",CLIENT_PORT:"3001",PUBLIC_PATH:"/vi-assets/static-assets/",PUBLIC_DIR:"build/public",EXECUTION_ENVIRONMENT:"client",IS_BROWSER:!0,ASSETS_MANIFEST:"/drone/src/projects/vi/build/publicAssets.json",LOADABLE_MANIFEST:"/drone/src/projects/vi/build/loadable.json"}))||void 0===e||null===(t=e.PUBLIC_PATH)||void 0===t?void 0:t.includes("localhost")},a=n("ygvk"),o=n("a9ya"),r=function(e,t){var n=new URL("".concat(e,"/svc/community/V3/requestHandler")),i=new URLSearchParams(t);return n.search=i,n.toString()},s=function(e,t){if(e.nextUrl)return e.nextUrl;var n={url:e.articleId,method:"get",commentSequence:e.commentSequence?e.commentSequence.toString():"0",offset:"0",includeReplies:!0};switch(n.sort=e.sortType||o.c.NEWEST,e.listId){case o.a.HIGHLIGHTED:n.cmd="GetCommentsNYTPicks";break;case o.a.RECOMMENDED:n.cmd="GetCommentsReadersPicks",n.sort="reader";break;case o.a.REPORTER_REPLIES:n.cmd="GetCommentsNYTReplies",n.includeReplies=!1;break;default:n.cmd="GetCommentsAll"}return r(t,n)};t.a=function(e,t){var n;switch(e.type){case a.a.GET_SUMMARY_REQUEST:case a.a.GET_ARTICLE_REQUEST:n=function(e,t){return r(t,{url:e.articleUrl,cmd:"GetCommentSummary",method:"get"})}(e.meta,t);break;case a.a.GET_COMMENT_LIST_REQUEST:n=s(e.meta,t);break;case a.a.GET_COMMENTS_REQUEST:n=function(e,t){var n=e.articleId,i=e.commentId,a={url:n,method:"get",cmd:"GetCommentByPermid"};return a.permID=i,r(t,a)}(e.meta,t);break;case a.a.GET_REPLIES_REQUEST:n=function(e,t){return r(t,{url:e.articleId,method:"get",commentSequence:e.commentSequence.toString(),offset:e.offset.toString(),limit:e.limit.toString(),cmd:e.cmd})}(e.meta,t);break;case a.a.CREATE_COMMENT_REQUEST:n=function(e,t){return r(t,{postdata:encodeURIComponent(JSON.stringify(e.values)),cmd:"PostComment",method:"post"})}(e.meta,t);break;case a.a.FLAG_COMMENT_REQUEST:n=function(e,t){return r(t,{postdata:encodeURIComponent(JSON.stringify(e.values)),cmd:"FlagComment",method:"post"})}(e.meta,t);break;case a.a.RECOMMEND_COMMENT_REQUEST:case a.a.UNRECOMMEND_COMMENT_REQUEST:n=function(e,t){return r(t,{postdata:encodeURIComponent(JSON.stringify(e.values)),cmd:"PostRecommend",method:"post"})}(e.meta,t);break;default:return null}i()&&(n=new URL("".concat(n,"&cacheBuster=").concat(Date.now())));var o=new Headers({Accept:"application/json","Content-Type":"application/json"});return fetch(n,{method:"GET",credentials:"include",headers:o})}},"7yT1":function(e,t,n){"use strict";n.d(t,"b",(function(){return v})),n.d(t,"a",(function(){return _})),n.d(t,"c",(function(){return w})),n.d(t,"d",(function(){return x})),n.d(t,"f",(function(){return O})),n.d(t,"e",(function(){return T}));var i,a=n("VkAN"),o=n.n(a),r=n("T25G"),s=n("Ds/+"),l=n.n(s),c=n("tPsl"),u=n.n(c),d=n("4LjT"),p=n("oXTd"),f=n("+zxi"),m=n("eFc+"),h=n.n(m),g=n("HUmG"),y=function(e){return e.PAGE_REGI="regi",e.PAGE_SUB="sub",e}({}),v=function(e){var t=e.map((function(e){return"\n    ".concat(e,': newsletterConfig(newsletterId: "').concat(e,'") {\n      ...newsletterConf\n    }\n  ')})).join("\n\n"),n="\n  ".concat("\n  fragment newsletterConf on NewsletterConfig {\n    id\n    newsletterId\n    allowedEntitlement\n    subscriptionPageLink\n    isOnsiteFreeTrialEnabled\n  }\n","\n  query NewsletterMultiSignupQuery {\n    ").concat(t,"\n  }");return h()(n)},b=h()(i||(i=o()(["\n  ","\n"])),d.subscribeGraphql),_=function(){var e,t=new URLSearchParams(window.location.search),n="true"===t.get("newsletter_signup"),i=decodeURIComponent(null!==(e=t.get("product_codes"))&&void 0!==e?e:"").split(",").reduce((function(e,t){var n=t.trim();return null!=n&&n.length&&e.push(n),e}),[]);return n&&i.every((function(e){return Object(r.isValidNewsletterCode)(e)}))?i:[]},w=function(e){var t=e.data;return Object.values(t).filter(Boolean).map((function(e){return e.allowedEntitlement?new u.a(e):new l.a(e)}))},x=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];return e.filter((function(e){return!t.find((function(t){return(null==t?void 0:t.productCode)===e}))}))},k=function(e){return!!e.getData().allowedEntitlement},O=function(e){var t=e.newsletters,n=e.onSignup,i=e.apolloClient,a=e.user,o=e.signupFormVersion,r=void 0===o?"EmailSignup_NL_index_page":o,s=e.pageType;i.mutate({mutation:b,variables:{input:{newsletters:t.map((function(e){var t=!1,n=0;return k(e)&&(t=e.canTakeFreeTrial(a))&&(n=Math.floor(Date.now()/1e3)),{productCode:e.productCode,isFreeTrial:t,freeTrialSignupTime:n}})),signupFormVersion:r,pageType:s}}}).then((function(e){return t.forEach((function(e){var t,n=null===(t=e.getData())||void 0===t?void 0:t.subscriptionPageLink;if(k(e)&&!(null!=e&&e.canTakeFreeTrial(a))&&!e.isEligible(a)&&n){var i=Object(f.a)(n,{ref:p.j.newsletterGridIndexPage});window.location.assign(i)}})),n(e,t)}))},T=function(e){return Object(g.f)(e)?y.PAGE_SUB:y.PAGE_REGI}},"7ya4":function(e,t,n){"use strict";var i=n("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.disabledClass=t.arrowsNavClass=t.arrowRightClass=t.arrowLeftClass=void 0;var a=n("Jqp9"),o=i(n("wXC7")),r=n("3sMT"),s=(t.arrowsNavClass=(0,a.css)("justify-content:flex-end;position:absolute;display:none;z-index:1;div &{right:0;width:82px;}",o.default.breakpoint.small,"{display:flex;}"),(0,a.css)("display:inline-flex;justify-content:center;align-items:center;white-space:nowrap;width:25px;height:25px;border-radius:50%;background-color:",r.color.background.primary,";border:1px solid ",r.color.stroke.quaternary,";cursor:pointer;outline:none;::after{content:'';display:inline-block;margin-left:2px;margin-bottom:1;width:7px;height:7px;line-height:0;border-top:2px solid ",r.color.content.primary,";border-right:2px solid ",r.color.content.primary,";border-color:",r.color.content.primary,";}&:hover{background-color:",r.color.stroke.quaternary,";}"));t.arrowLeftClass=(0,a.css)(s," left:0;margin-right:10px;&::after{transform:rotate(-135deg);}"),t.arrowRightClass=(0,a.css)(s," right:0;&::after{margin-left:-2px;transform:rotate(45deg);}"),t.disabledClass=(0,a.css)("cursor:default;:hover{background-color:",r.color.background.primary,";}::after{border-color:",r.color.stroke.quaternary,";}")},"7zGq":function(e,t,n){"use strict";var i=n("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.debounce=function(e){var t;return function(){for(var n=this,i=arguments.length,a=new Array(i),o=0;o<i;o++)a[o]=arguments[o];t&&window.cancelAnimationFrame(t),t=window.requestAnimationFrame((function(){return e.apply(n,a)}))}},t.getScrolledIndex=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=Math.round(e.scrollLeft*t/e.clientWidth);return Math.min(n,e.children.length)},t.useOnScreen=t.times=t.noop=t.handleNavRight=t.handleNavLeft=t.handleButtonPress=void 0;var a=i(n("J4zp")),o=n("q1tI");t.noop=function(){};function r(e,t){var n,i=+(null==e?void 0:e.dataset.scrolledIndex)+("left"===t?-1:1),a=null==e||null===(n=e.children)||void 0===n?void 0:n[i];a&&e.scrollTo({left:a.offsetLeft})}t.handleNavLeft=function(e){return r(e,"left")},t.handleNavRight=function(e){return r(e,"right")},t.times=function(e,t){return new Array(e).fill(null).map((function(e,n){return t(n)}))},t.handleButtonPress=function(e,t){"Enter"!==e.key&&"Spacebar"!==e.key&&" "!==e.key||t()},t.useOnScreen=function(e,t){var n=(0,o.useState)(!1),i=(0,a.default)(n,2),r=i[0],s=i[1];return(0,o.useEffect)((function(){var n=e.current,i=new IntersectionObserver((function(e){var t=(0,a.default)(e,1)[0];s(t.isIntersecting)}),{root:document.getElementById(t)});return n&&i.observe(n),function(){n&&i.unobserve(n)}}),[e,t]),r}},"810M":function(e,t,n){"use strict";var i=n("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=i(n("QILm")),o=i(n("W8MJ")),r=i(n("lwsE")),s=i(n("a1gu")),l=i(n("Nsbk")),c=i(n("7W2i")),u=i(n("6OwD")),d=["caption","creditText"];function p(e,t,n){return t=(0,l.default)(t),(0,s.default)(e,function(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return function(){return!!e}()}()?Reflect.construct(t,n||[],(0,l.default)(e).constructor):t.apply(e,n))}var f=function(e){function t(e){var n,i=e.caption,o=e.creditText,s=(0,a.default)(e,d);return(0,r.default)(this,t),(n=p(this,t,[s]))["@type"]="ImageObject",n.caption=i,n.creditText=o,n}return(0,c.default)(t,e),(0,o.default)(t)}(u.default);t.default=f},"82Ke":function(e,t,n){"use strict";var i=n("TqRt"),a=n("cDf5");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=i(n("q1tI")),r=(i(n("17x9")),n("Jqp9")),s=n("ZoyY"),l=i(n("D4NZ")),c=i(n("XMNT")),u=i(n("PxMw")),d=i(n("ljg4")),p=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=a(e)&&"function"!=typeof e)return{default:e};var n=f(t);if(n&&n.has(e))return n.get(e);var i={__proto__:null},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var r in e)if("default"!==r&&{}.hasOwnProperty.call(e,r)){var s=o?Object.getOwnPropertyDescriptor(e,r):null;s&&(s.get||s.set)?Object.defineProperty(i,r,s):i[r]=e[r]}return i.default=e,n&&n.set(e,i),i}(n("v466"));function f(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(f=function(e){return e?n:t})(e)}var m=s.textConstants.CRITICS_PICK_TEXT,h=s.textConstants.PRICE_DESCRIPTIONS,g=s.textConstants.RATING_DESCRIPTIONS,y=s.textConstants.DISCLAIMER_TEXT,v=function(e){var t,n,i=e.review,a=e.index,f=e.deviceType,v=e.trackClick,b=e.trackCall,_=i.isCriticsPick,w=i.subject,x=i.overrideLabel;if(!w)return null;var k,O,T=w.name,C=w.contactDetails,E=C.addresses,S=C.phoneNumbers,P=w.accessibilityDescription,I=w.takesReservations,M=w.reservationsUrl,A=w.reservationsNote,j=w.rating,N=w.atmosphere,L=w.openStatus,D=w.priceCategory,R=w.wineList,B=w.recommendedDishes,z=w.soundLevel,F=w.alcoholDescription,U=w.openHours,H=w.coordinates,W=w.website,q=w.lastModified,V=w.singlePlatformId,G=x||T,Y=(0,l.default)(parseInt(j,10),"★"),X=g[j];W&&(O=W,(k=W.toLowerCase().replace("www.","").replace(/^https?:\/\//,"")).length>20&&(k="website"),-1===O.indexOf("http")&&(O="http://".concat(O)));var Z,J=parseInt(s.priceMap[D],10),K=(0,l.default)(J,"$"),$=h[J],Q=F||R,ee=["CLOSED_TEMPORARILY","CLOSED_PERMANENTLY"].indexOf(L)>=0;Z=null!=A&&A.trim()?A.trim():I?"Accepted":"Not Accepted";var te=E.length>0?E[0]:null,ne=S.length>0?S.find((function(e){return"MAIN"===e.type})):null,ie=te||ne||W;return o.default.createElement("aside",{className:p.wrapperClass,id:"restaurant-review-".concat(a+1)},!ee&&(null==H?void 0:H.latitude)&&H.longitude&&o.default.createElement(d.default,{latitude:H.latitude,longitude:H.longitude,title:G}),o.default.createElement("div",{className:p.reviewClass},o.default.createElement("header",null,o.default.createElement("div",null,G&&o.default.createElement("h4",{dangerouslySetInnerHTML:{__html:G}}),(_||Y||X)&&o.default.createElement("div",{className:p.ratingClass},_&&o.default.createElement("span",{className:p.criticsPickClass},o.default.createElement("i",null),o.default.createElement("span",null,m)),(Y||X)&&o.default.createElement("span",null,Y?o.default.createElement("span",{className:p.starsClass},Y):X))),!ee&&M&&o.default.createElement("div",{className:p.linkWithDisclaimerClass},o.default.createElement(u.default,{theme:"reviews",className:p.reviewButtonClass,href:M,onClick:function(){return v("restaurant")},target:"_blank",rel:"noopener noreferrer"},"Reserve a Table"),o.default.createElement("p",{className:p.disclaimerClass},y.RESTAURANT)),!ee&&!M&&!!ne&&"smartphone"===f&&o.default.createElement("div",{className:p.linkWithoutDisclaimerClass},o.default.createElement(u.default,{theme:"reviews",className:p.reviewButtonClass,href:"tel:+".concat(ne.number),onClick:b},"Call ","".concat(ne.number)))),o.default.createElement("dl",null,ee&&o.default.createElement("p",{className:"isClosed"},"This restaurant has closed"),ie&&o.default.createElement("address",null,o.default.createElement("div",null,(null===(t=te.address)||void 0===t?void 0:t.streetAddress)&&o.default.createElement("dd",{className:"street",dangerouslySetInnerHTML:{__html:te.address.streetAddress}}),te.crossStreet&&o.default.createElement("dd",{className:"crossroads",dangerouslySetInnerHTML:{__html:"(".concat(te.crossStreet,")")}}),(null===(n=te.address)||void 0===n?void 0:n.neighborhood)&&o.default.createElement("dd",{className:"neighborhood",dangerouslySetInnerHTML:{__html:te.address.neighborhood}})),ne&&o.default.createElement("dd",{className:"phone"},o.default.createElement("a",{href:"tel:+".concat(ne.number),className:p.phoneLinkClass,onClick:b},ne.number)),W&&o.default.createElement("dd",null,o.default.createElement("a",{href:O,className:p.websiteLinkClass,title:G,target:"_blank",rel:"noopener noreferrer"},k))),o.default.createElement("div",{className:p.metadataClass},N&&o.default.createElement("div",{className:"atmosphere"},o.default.createElement("dt",null,"Atmosphere"),o.default.createElement("dd",{dangerouslySetInnerHTML:{__html:N}})),z&&o.default.createElement("div",{className:"noiseLevel"},o.default.createElement("dt",null,"Noise Level"),o.default.createElement("dd",{dangerouslySetInnerHTML:{__html:z}})),V&&o.default.createElement("div",{className:"menuLink"},o.default.createElement("dt",null,"Menu"),o.default.createElement("dd",null,o.default.createElement("a",{href:"https://places.singleplatform.com/".concat(V,"/menu?ref=nyt"),target:"_blank",rel:"noopener noreferrer"},"singleplatform.com/".concat(V)))),B&&o.default.createElement("div",{className:"recommendedDishes"},o.default.createElement("dt",null,"Recommended Dishes"),o.default.createElement("dd",{dangerouslySetInnerHTML:{__html:B}})),Q&&o.default.createElement("div",{className:"alcoholInfo"},o.default.createElement("dt",null,"Drinks and Wine"),o.default.createElement("dd",{dangerouslySetInnerHTML:{__html:Q}})),K&&$&&o.default.createElement("div",null,o.default.createElement("dt",null,"Price"),o.default.createElement("dd",{className:"price"},"".concat(K," (").concat($,")"))),U&&o.default.createElement("div",null,o.default.createElement("dt",null,"Open"),o.default.createElement("dd",{className:"hours",dangerouslySetInnerHTML:{__html:U}})),Z&&o.default.createElement("div",null,o.default.createElement("dt",null,"Reservations"),o.default.createElement("dd",{className:"reservations",dangerouslySetInnerHTML:{__html:Z}})),P&&o.default.createElement("div",{className:"accessibility"},o.default.createElement("dt",null,"Wheelchair Access"),o.default.createElement("dd",{dangerouslySetInnerHTML:{__html:P}})),(Y||X)&&o.default.createElement("div",null,o.default.createElement("dt",null,"What the Stars Mean"),o.default.createElement("dd",null,"Ratings range from zero to four stars. Zero is poor, fair or satisfactory. One star, good. Two stars, very good. Three stars, excellent. Four stars, extraordinary.")),q&&o.default.createElement("p",{className:p.updatedClass},"This information was last updated on ",o.default.createElement(c.default,{className:p.timestampClass},q)))),M.indexOf("opentable")>-1&&o.default.createElement("div",{className:p.poweredByClass},o.default.createElement("div",{className:(0,r.cx)(p.logoClass,"opentable")}),o.default.createElement("p",null,"Reservations powered by OpenTable")),M.indexOf("resy")>-1&&o.default.createElement("div",{className:p.poweredByClass},o.default.createElement("div",{className:(0,r.cx)(p.logoClass,"resy")}),o.default.createElement("p",null,"Reservations powered by Resy"))))};v.displayName="RestaurantFooter",v.defaultProps={deviceType:"",trackClick:function(){},trackCall:function(){}};t.default=v},"83Mo":function(e,t,n){"use strict";t.a="/vi-assets/static-assets/icon-dealbook_144x144-28e8f71aafff426804c3a92b1b176e07.webp"},"8Ihp":function(e,t,n){"use strict";var i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var a=i(n("q1tI")),o=i(n("17x9"));function r(e){var t=e.className,n=e.fill,i=e.ariaHidden;return a.default.createElement("svg",{width:"15",height:"15",className:t,"aria-hidden":i},a.default.createElement("g",{id:"Canvas",fill:"none"},a.default.createElement("g",{id:"close"},a.default.createElement("path",{d:"M2 2l11 11",strokeWidth:"2",strokeMiterlimit:"10",strokeLinecap:"square",stroke:n,id:"Vector"}),a.default.createElement("path",{d:"M13 2L2 13",strokeWidth:"2",strokeMiterlimit:"10",strokeLinecap:"square",stroke:n,id:"Vector_2"}))))}r.propTypes={className:o.default.string,fill:o.default.string,ariaHidden:o.default.bool},r.defaultProps={className:void 0,fill:"#111",ariaHidden:!1},t.default=r},"8VGN":function(e,t,n){"use strict";var i=n("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=i(n("q1tI")),o=(i(n("17x9")),n("Jqp9")),r=n("FfcP"),s=function(e){var t=e.className,n=e.children,i=e.id;return a.default.createElement("div",{id:i,className:(0,o.cx)(t,r.answerClass)},n)};s.displayName="Answer",s.defaultProps={id:void 0,className:void 0};t.default=s},"8YpP":function(e,t,n){"use strict";var i=n("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=i(n("q1tI")),o=(i(n("17x9")),i(n("E+3E"))),r=n("stgn"),s=function(e){var t=e.spotifyEmbedUrl,n=e.playerStyle,i=(0,r.getSpotifyIframeAttributes)({spotifyEmbedUrl:t,playerStyle:n}),s=i.src,l=i.width,c=i.height;return a.default.createElement("iframe",{title:"Spotify",className:o.default,frameBorder:"0",allow:"encrypted-media",src:s,width:l,height:c})};s.displayName="SpotifyEmbed";t.default=s},"8iTF":function(e,t,n){"use strict";n.d(t,"d",(function(){return s})),n.d(t,"a",(function(){return l})),n.d(t,"b",(function(){return c})),n.d(t,"g",(function(){return u})),n.d(t,"f",(function(){return d})),n.d(t,"h",(function(){return p})),n.d(t,"c",(function(){return f})),n.d(t,"e",(function(){return m}));var i=n("J4zp"),a=n.n(i),o=n("A4Gh"),r=(n("mczz"),n("uyHG")),s=n.n(r)()((function(e){try{var t=RegExp("".concat(e,"[^;]+")).exec(document.cookie);return decodeURIComponent(t?t.toString().replace(/^[^=]+./,""):"")}catch(e){return null}})),l={ACCEPT_AND_DISPLAY_COMMENTS:"ACCEPT_AND_DISPLAY_COMMENTS",DISPLAY_COMMENTS_ONLY:"DISPLAY_COMMENTS_ONLY",NO_COMMENTS:"NO_COMMENTS"},c={COMMENTS_PANEL:"commentsContainer",PERM_ID:"permid"},u=function(e){return e===l.DISPLAY_COMMENTS_ONLY||e===l.ACCEPT_AND_DISPLAY_COMMENTS},d=function(e){return e===l.ACCEPT_AND_DISPLAY_COMMENTS},p=function(e){var t=null,n=null;if(e){var i=e.split(":"),o=a()(i,2);t=o[0];var r=o[1];n=void 0===r?null:r}return{commentId:t,replyCommentId:n}},f=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return t?"".concat(e).concat(":").concat(t):e},m=function(e,t,n){var i=Object(o.parse)(e);return i.hash="#".concat(c.PERM_ID,"=").concat(f(t,n)),Object(o.format)(i)}},"8npY":function(e,t){e.exports={SMALL:"sizeSmall",MEDIUM:"sizeMedium",LARGE:"sizeLarge",FULL:"sizeFull"}},"95Yr":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=n("f/4F");t.default=i.StyledHeadshot},"9B9F":function(e,t,n){"use strict";var i=n("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t=e.LoggedOut,n=e.LoggedInSignup,i=e.AlreadyReceiving,s=e.SignupSuccess,l=function(e){return o.default.createElement(r.default,(0,a.default)({},e,{LoggedOut:t,LoggedInSignup:n,AlreadyReceiving:i,SignupSuccess:s}))};return l.displayName="CustomEmailSignup",l};var a=i(n("pVnL")),o=i(n("q1tI")),r=i(n("lQyp"))},"9HCV":function(e,t,n){"use strict";var i=n("gcR/"),a=n.n(i),o=(n("q1tI"),n("2PZ4")),r=n("wXC7"),s=n.n(r),l=n("RZCB"),c=n.n(l),u=n("Jqp9"),d=n("SYzA"),p=n("NQ6n"),f=Object(u.css)("display:block;width:15px;margin:0 0 0 8px;"),m=function(e){var t=e.className,n=e.share,i=e.trackingParams,r={url:n.url,headline:{default:n.headline||""}};return Object(d.a)()?a()(c.a,{share:n,className:t,trackingParams:i}):a()(p.b,{share:r,buttonContent:a()(o.b,{className:f,fill:s.a.color.white}),className:t,setAriaLabel:!0,trackingRegion:"carousel",modalArrowPosition:"bottom",forceArrowPosition:!0,hasGiftArticleButtonSibling:!1,isCarouselButton:!0,stroke:void 0,fill:void 0,loadingButtonContent:void 0,isGiftArticle:void 0,handleOpen:void 0,pageType:void 0,mediaTitle:void 0,modalContent:void 0,ariaDescribedBy:void 0,suppressForcedFocus:void 0,toggleGiftArticleMenu:void 0,forceCloseModal:void 0,forceOpen:void 0,giftLinksRemainingCount:void 0,forcePopOver:void 0,menuDefaultHeight:void 0,dataTestid:void 0,buttonHoverClass:void 0,handleClose:void 0,setUpModalStyles:void 0})};m.displayName="CarouselShareButton",t.a=m},"9Wdi":function(e,t,n){"use strict";var i=n("J4zp"),a=n.n(i),o=n("QILm"),r=n.n(o),s=n("q1tI"),l=n.n(s),c=(n("ZjMX"),n("gcR/")),u=n.n(c),d=n("lSNA"),p=n.n(d),f=n("QS0n"),m=n("Jqp9"),h=n("60yG"),g=n.n(h),y=n("cr+I"),v=n.n(y),b=n("N/T0"),_=n("ZKN5"),w=n("Gs79"),x=n("00Pk"),k=n("Lkij"),O=n("eJDT"),T=n("wXC7"),C=n.n(T),E=n("hU1o"),S=n("SYzA"),P=n("u1H9"),I=n("Tonn"),M=function(e,t){var n;if("string"!=typeof e)return"";for(var i=0;i<t.length;i+=1)if("string"==typeof(n=t[i]).pattern&&"string"==typeof n.label&&new RegExp(t[i].pattern,"i").test(e))return t[i].label;return""},A=function(e,t){return M(e,[{pattern:"app_download",label:"goto-app"},{pattern:"survey",label:"goto-survey"}])||function(e){return M(e,[{pattern:"myaccount\\.([a-z]+\\.)?nytimes.com\\/auth\\/register",label:"goto-register"},{pattern:"myaccount\\.([a-z]+\\.)?nytimes.com(\\/auth\\/login)?(\\/)?((\\?|#).*)?$",label:"goto-login"}])}(t)||"goto-subscribe"},j=function(e){var t=e.contentID,n=e.isExpanded,i=e.isStandard,a=e.linkHref;return i?A(t,a):n?"collapse":"expand"},N=function(e){var t=e.isStandard,n=e.headerLink,i=e.headerOpenNewTab;t&&(i?window.open(n,"_blank","noopener,noreferrer"):window.open(n,"_self"))},L=n("lwsE"),D=n.n(L),R=n("W8MJ"),B=n.n(R),z=n("a1gu"),F=n.n(z),U=n("Nsbk"),H=n.n(U),W=n("7W2i"),q=n.n(W),V=n("s2os"),G=n("TscS"),Y=n("UyiZ");function X(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}var Z=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?X(Object(n),!0).forEach((function(t){p()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):X(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({mobileLarge:"@media (min-height: 450px) and (max-width: 600px)",mediumTablet:"@media (min-width: 720px)",tabletSize:"@media (min-width: 740) and (max-width: 1024px)"},C.a.breakpoint),J=Object.assign(C.a,{breakpoint:Z}),K=n("uwQJ"),$="".concat(K.b.dockHeaderHeight.small,"px"),Q="".concat(K.b.dockHeaderHeight.mediumLarge,"px"),ee=function(){return Object(m.keyframes)("0%{opacity:1;}50%{opacity:0;}100%{opacity:0;}")},te=function(){return Object(m.keyframes)("0%{opacity:0;}50%{opacity:0;}100%{opacity:1;}")},ne=Object(m.css)("background-color:",J.color.white,";color:",J.color.black,";"),ie=Object(m.css)("background-color:",J.color.gray20,";color:",J.color.white,";"),ae=Object(m.css)("display:flex;align-items:center;justify-content:space-between;height:100%;max-width:",J.breakpoint.mediaMaxWidth,"px;margin:auto;padding:0;-webkit-font-smoothing:antialiased !important;outline:aliceblue;strong{font-weight:",J.font.weight.bold,";}",J.breakpoint.medium,"{padding:0 20px;}"),oe=Object(m.styled)("div",{target:"e1ejehf00"})("height:",(function(e){return e.theme.dockHeaderHeight.mobileSmall}),"px;padding-bottom:",(function(e){return e.theme.dockHeaderOffset.mobileSmall}),"px;width:100%;font-family:",J.font.franklinBase,";border-radius:0;transition:background-color 250ms linear,0.15s padding ease-out;",J.breakpoint.mobileLarge,"{height:",(function(e){return e.theme.dockHeaderHeight.mobileLarge}),"px;padding-bottom:",(function(e){return e.theme.dockHeaderOffset.mobileLarge}),"px;}",J.breakpoint.small,"{height:",(function(e){return e.theme.dockHeaderHeight.small}),"px;padding-bottom:",(function(e){return e.theme.dockHeaderOffset.small}),"px;}",J.breakpoint.mediumLarge,"{height:",(function(e){return e.theme.dockHeaderHeight.mediumLarge}),"px;padding-bottom:",(function(e){return e.theme.dockHeaderOffset.mediumLarge}),"px;}"),re=Object(m.css)("padding-bottom:0;",J.breakpoint.mobileLarge,"{padding-bottom:0;}",J.breakpoint.small,"{padding-bottom:0;}",J.breakpoint.mediumLarge,"{padding-bottom:0;}"),se=Object(m.css)("width:100%;font-family:",J.font.franklinBase,";text-align:left;span{display:inline;}",J.breakpoint.mediumLarge,"{text-align:center;padding-left:190px;}"),le=Object(m.styled)("div",{target:"e1ejehf01"})("position:absolute;height:",(function(e){return e.theme.dockHeaderHeight.mobileSmall}),"px;top:0;bottom:0;right:0;left:0;margin:0 70px 0 20px;display:flex;flex-direction:column;justify-content:center;",J.breakpoint.mobileLarge,"{height:",(function(e){return e.theme.dockHeaderHeight.mobileLarge}),"px;}",J.breakpoint.small,"{height:",(function(e){return e.theme.dockHeaderHeight.small}),"px;}",J.breakpoint.medium,"{width:",(function(e){return"smallAppDLDockTheme"===e.theme.themeID&&"100%"}),";margin-left:",(function(e){return"smallAppDLDockTheme"===e.theme.themeID&&0}),";text-align:",(function(e){return"smallAppDLDockTheme"===e.theme.themeID&&"center"}),";}",J.breakpoint.mediumLarge,"{height:",(function(e){return e.theme.dockHeaderHeight.mediumLarge}),"px;margin:0;}",J.breakpoint.large,"{margin:0;}"),ce=Object(m.css)("font-size:15px;line-height:17px;opacity:1;span{white-space:nowrap;&::after{content:'  ';white-space:pre-line;}}"),ue=Object(m.css)("opacity:0;animation:",ee()," 0.5s;"),de=Object(m.css)("opacity:1;animation:",te()," 0.5s;"),pe=Object(m.css)("display:flex;justify-content:flex-end;flex-direction:row;",J.breakpoint.medium,"{min-width:160px;}"),fe=Object(m.css)("display:flex;justify-content:center;align-items:center;background-color:transparent;outline:aliceblue;width:",$,";height:",$,";z-index:1;",J.breakpoint.mediumLarge,"{height:",Q,";width:",Q,";}svg{height:15px;margin:auto;width:15px;}"),me=Object(m.css)("transition:transform 500ms ease;"),he=Object(m.css)("transform:rotate(-90deg);"),ge=Object(m.css)("transform:rotate(90deg);"),ye=Object(m.css)("margin:0 15px 0 0;display:block;",J.breakpoint.medium,"{display:block;}"),ve=Object(m.css)("cursor:pointer;font-size:12px;text-transform:uppercase;font-weight:",J.font.weight.bold,";font-family:",J.font.franklinBase,";letter-spacing:0.24px;height:",$,";line-height:calc(",$," + 3px);white-space:nowrap;margin:0;padding:0;display:none;&.",ue,"{animation:",ee()," 400ms;}&.",de,"{animation:",te()," 400ms;}",J.breakpoint.mediumLarge,"{display:block;height:",Q,";line-height:calc(",Q," + 3px);}"),be=Object(m.css)("cursor:pointer;"),_e=Object(m.css)("outline:none;"),we=Object(m.css)("border-right:1px solid ",J.color.gray55,";display:block;height:30px;margin:auto 0;",J.breakpoint.medium,"{display:none;}"),xe=function(e){var t=e.coloredHeading,n=e.dockSize,i=e.dockExpanded;if(!e.isDockDismissible)return u()(G.a,{className:Object(m.cx)(me,p()(p()({},he,"standard"!==n&&!i),ge,"standard"!==n&&i)),fill:t?C.a.color.white:"#111"});var a=t?C.a.color.white:"#010101";return u()(Y.a,{fill:a})};xe.displayName="ActionIcon",xe.defaultProps={coloredHeading:!1,dockExpanded:!1,isDockDismissible:void 0};var ke,Oe=xe,Te=function(e){var t=e.contentID,n=e.coloredHeading,i=e.dockExpanded,a=e.dockSize,o=e.isDockDismissible,r=e.headerExpandedCTA,s=e.headerCollapsedCTA,l=e.headerCTA,c=e.onDockCTAClick,d=e.onDockHeadingClick,f=e.showFocus,h=e.toggleChangedMessages,g="standard"===a,y=!i&&h,v="".concat("standard"===a?"standard":"expanded","-dock-btn-selector"),b=Object(m.cx)(fe,p()(p()({},_e,f),be,o)),_=function(e){var t=e.dockExpanded,n=e.isStandard,i=e.shouldFadeIn;return!n&&t?i?Object(m.cx)(ve,p()(p()({},ue,t),de,i)):Object(m.cx)(ve,p()(p()({},ue,!t),de,t)):ve}({dockExpanded:i,isStandard:g,shouldFadeIn:y}),w=function(e){var t=e.isDockDismissible,n=e.dockExpanded,i=e.isStandard,a=e.shouldFadeIn,o=e.headerCTA,r=e.headerCollapsedCTA,s=e.headerExpandedCTA;return t?"":i?o:!n||a?r:s}({isDockDismissible:o,dockExpanded:i,isStandard:g,shouldFadeIn:y,headerCTA:l,headerCollapsedCTA:s,headerExpandedCTA:r}),x=g&&!o?"Button to subscription page":!g&&i?"Button to collapse the message":g||i?o||"gdpr"===t?"Button to close this message":"":"Button to expand the message";return u()("div",{className:pe},void 0,u()("div",{className:ye},void 0,u()("p",{className:_},void 0,w)),ke||(ke=u()("div",{className:we})),u()("button",{"data-testid":v,type:"button",className:b,onClick:c,onKeyPress:d,"aria-label":x},void 0,u()(Oe,{dockSize:a,dockExpanded:i,coloredHeading:n,isDockDismissible:o})))};Te.displayName="CallToAction",Te.defaultProps={contentID:"",coloredHeading:!1,dockExpanded:!1,isDockDismissible:void 0,headerExpandedCTA:"",headerCollapsedCTA:"",headerCTA:void 0,onDockCTAClick:function(){},onDockHeadingClick:function(){},showFocus:!1,toggleChangedMessages:!1};var Ce=Te,Ee={seeMyOptions:"SEE MY OPTIONS",collapse:"Collapse"};function Se(e,t,n){return t=H()(t),F()(e,function(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return function(){return!!e}()}()?Reflect.construct(t,n||[],H()(e).constructor):t.apply(e,n))}var Pe=function(e){function t(){var e;D()(this,t);for(var n=arguments.length,i=new Array(n),a=0;a<n;a++)i[a]=arguments[a];return(e=Se(this,t,[].concat(i))).state={offerVisible:"standard"===e.props.dockSize,meterVisible:"standard"!==e.props.dockSize,toggleChangedMessages:!1,showFocus:!1,coloredHeading:!1},e.onDockHeadingKeyUp=function(t){9===t.keyCode&&e.setState({showFocus:!0})},e.getHeadingStyling=function(){var t=e.props,n=t.contentID,i=t.dockExpanded,a=e.state.coloredHeading,o="gdpr"===n,r="unlocked-article-regi"===n,s=p()(p()(p()({},_e,!e.state.showFocus),be,!(o||r)),re,i);return s[ne]=!a,s[ie]=a,s},e}return q()(t,e),B()(t,[{key:"render",value:function(){var e,t=this.props,n=t.className,i=t.contentID,a=t.dockSize,o=t.isDockDismissible,r=t.dockExpanded,s=t.headerCTA,l=t.header2,c=t.header1,d=t.onDockHeadingClick,f=t.onDockCTAClick,h=t.headerCollapsedCTA,g=t.headerExpandedCTA,y=this.state,v=y.offerVisible,b=y.meterVisible,_=y.toggleChangedMessages;return e="standard"===a?"standard-dock-heading-selector":"expanded-dock-heading-selector",u()(oe,{className:Object(m.cx)(this.getHeadingStyling(),n),onClick:d,onKeyPress:d,onKeyUp:this.onDockHeadingKeyUp,role:"button",tabIndex:0,"data-testid":e},void 0,u()("div",{className:ae},void 0,u()("div",{className:se},void 0,u()(le,{},void 0,u()("div",{className:Object(m.cx)(ce,p()(p()(p()({},ue,"standard"!==a&&!v),de,"standard"!==a&&v),V.b,"standard"!==a&&!v&&!_||"standard"!==a&&"app_download"===i))},void 0,l)),u()(le,{},void 0,u()("div",{className:Object(m.cx)(ce,p()(p()(p()({},ue,!("standard"===a||b||"app_download"===i)),de,"standard"!==a&&b&&_),V.b,"standard"===a))},void 0,c))),u()(Ce,{contentID:i,coloredHeading:this.state.coloredHeading,dockExpanded:r,dockSize:a,isDockDismissible:o,headerExpandedCTA:g,headerCollapsedCTA:h,headerCTA:s,onDockCTAClick:f,onDockHeadingClick:d,showFocus:this.state.showFocus,toggleChangedMessages:_})))}}],[{key:"getDerivedStateFromProps",value:function(e,t){var n=e.dockExpanded,i=t.meterVisible,a=t.offerVisible,o={};return n&&!i&&(o.meterVisible=!0,o.offerVisible=!1,o.toggleChangedMessages=!0),n||a||(o.meterVisible=!1,o.offerVisible=!0,o.toggleChangedMessages=!0),Object.keys(o).length>0?o:null}}])}(s.Component);Pe.displayName="DockHeading",Pe.defaultProps={className:void 0,contentID:"",dockExpanded:!1,headerCTA:void 0,header1:null,header2:null,headerCollapsedCTA:Ee.seeMyOptions,headerExpandedCTA:Ee.collapse,isDockDismissible:void 0,onDockHeadingClick:function(){},onDockCTAClick:function(){}};var Ie=Pe,Me=function(e){var t;return null!==(t=e.theme)&&void 0!==t&&t.useMaxHeight?"max-height":"height"},Ae=Object(m.styled)("div",{target:"e2qmvq0"})("position:relative;bottom:0;width:100%;",Me,":",(function(e){return e.theme.dockContentHeight.mobileSmall}),"px;z-index:",J.zIndex.dock,";opacity:1;background-color:",J.color.white,";padding:",(function(e){return"read-in-app-disrupter"===e.contentID?"0":"5px 20px 20px"}),";box-sizing:border-box;overflow:hidden;-webkit-font-smoothing:antialiased;border-top-left-radius:",(function(e){return"read-in-app-disrupter"===e.contentID&&"20px"}),";border-top-right-radius:",(function(e){return"read-in-app-disrupter"===e.contentID&&"20px"}),";",J.breakpoint.mobileLarge,"{",Me,":",(function(e){return e.theme.dockContentHeight.mobileLarge}),"px;}",J.breakpoint.small,"{",Me,":",(function(e){return e.theme.dockContentHeight.small}),"px;}",J.breakpoint.medium,"{width:",(function(e){return"smallAppDLDockTheme"===e.theme.themeID&&"auto"}),";}"),je=function(e){var t=e.card,n=e.contentID;return u()(Ae,{contentID:n},void 0,t)};je.displayName="DockContent",je.defaultProps={card:null};var Ne=je,Le=function(e){var t;return null!==(t=e.theme)&&void 0!==t&&t.useMaxHeight?"max-height":"height"},De=Object(m.styled)("div",{target:"efw9frv0"})("position:fixed;",Le,":",(function(e){return e.theme.dockContentHeight.mobileSmall+e.theme.dockHeaderHeight.mobileSmall+e.theme.dockHeaderOffset.mobileSmall}),"px;z-index:",J.zIndex.dock,";bottom:",(function(e){return 0-(e.theme.dockContentHeight.mobileSmall+e.theme.dockHeaderHeight.mobileSmall+e.theme.dockHeaderOffset.mobileSmall+1)}),"px;width:100%;border-top:1px solid ",J.color.gray20,";border-top-left-radius:",(function(e){return"read-in-app-disrupter"===e.contentID&&"20px"}),";border-top-right-radius:",(function(e){return"read-in-app-disrupter"===e.contentID&&"20px"}),";transition:transform ",(function(e){return e.theme.dockExpandSpeed})," ease-out;background-color:",J.color.white,";will-change:transform;",J.breakpoint.mobileLarge,"{",Le,":",(function(e){return e.theme.dockContentHeight.mobileLarge+e.theme.dockHeaderHeight.mobileLarge+e.theme.dockHeaderOffset.mobileLarge}),"px;bottom:",(function(e){return 0-(e.theme.dockContentHeight.mobileLarge+e.theme.dockHeaderHeight.mobileLarge+e.theme.dockHeaderOffset.mobileLarge+1)}),"px;}",J.breakpoint.small,"{",Le,":",(function(e){return e.theme.dockContentHeight.small+e.theme.dockHeaderHeight.small+e.theme.dockHeaderOffset.small}),"px;bottom:",(function(e){return 0-(e.theme.dockContentHeight.small+e.theme.dockHeaderHeight.small+e.theme.dockHeaderOffset.small+1)}),"px;}",J.breakpoint.medium,"{display:",(function(e){return"smallAppDLDockTheme"===e.theme.themeID&&"flex"}),";flex-direction:",(function(e){return"smallAppDLDockTheme"===e.theme.themeID&&"column"}),";align-items:",(function(e){return"smallAppDLDockTheme"===e.theme.themeID&&"center"}),";}",J.breakpoint.mediumLarge,"{",Le,":",(function(e){return e.theme.dockContentHeight.mediumLarge+e.theme.dockHeaderHeight.mediumLarge+e.theme.dockHeaderOffset.mediumLarge}),"px;bottom:",(function(e){return 0-(e.theme.dockContentHeight.mediumLarge+e.theme.dockHeaderHeight.mediumLarge+e.theme.dockHeaderOffset.mediumLarge+1)}),"px;}@media print{display:none;}.NYTApp &{display:none;}&.shown{transform:translateY( ",(function(e){return 0-e.theme.dockHeaderHeight.mobileSmall-e.theme.dockHeaderOffset.mobileSmall-1}),"px );",J.breakpoint.mobileLarge,"{transform:translateY( ",(function(e){return 0-e.theme.dockHeaderHeight.mobileLarge-e.theme.dockHeaderOffset.mobileLarge-1}),"px );}",J.breakpoint.small,"{transform:translateY( ",(function(e){return 0-e.theme.dockHeaderHeight.small-e.theme.dockHeaderOffset.small-1}),"px );}",J.breakpoint.mediumLarge,"{transform:translateY( ",(function(e){return 0-e.theme.dockHeaderHeight.mediumLarge-e.theme.dockHeaderOffset.mediumLarge-1}),"px );}}&.expanded{transform:translateY( ",(function(e){return 1-(e.theme.dockContentHeight.mobileSmall+e.theme.dockHeaderHeight.mobileSmall)}),"px );",J.breakpoint.mobileLarge,"{transform:translateY( ",(function(e){return 1-(e.theme.dockContentHeight.mobileLarge+e.theme.dockHeaderHeight.mobileLarge)}),"px );}",J.breakpoint.small,"{transform:translateY( ",(function(e){return 1-(e.theme.dockContentHeight.small+e.theme.dockHeaderHeight.small)}),"px );}",J.breakpoint.mediumLarge,"{transform:translateY( ",(function(e){return 1-(e.theme.dockContentHeight.mediumLarge+e.theme.dockHeaderHeight.mediumLarge)}),"px );}}"),Re=Object(m.css)("display:block;position:fixed;top:0;bottom:0;right:0;left:0;background:rgba(0,0,0,0.5);z-index:",C.a.zIndex.dock-1,";transition:background 2s;"),Be=Object(m.css)("overflow:hidden;"),ze=function(e){var t=e.onClick,n=e.visible;return Object(s.useEffect)((function(){return n?document.body.classList.add(Be):document.body.classList.remove(Be),function(){document.body.classList.remove(Be)}}),[n]),n?u()("div",{className:Re,onClick:t,"aria-hidden":!0}):null};ze.defaultProps={onClick:function(){},visible:!1};var Fe=ze;function Ue(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function He(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ue(Object(n),!0).forEach((function(t){p()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ue(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var We=function(e,t){return He(He({},e),t)},qe=function(e,t,n){var i,a;if("function"==typeof(null===(i=window)||void 0===i?void 0:i.dispatchEvent)&&"function"==typeof(null===(a=window)||void 0===a?void 0:a.matchMedia)){var o={dockHeight:0,dockVisible:t,dockExpanded:n},r=e.dockContentHeight,s=e.dockHeaderHeight,l=e.dockHeaderOffset;window.matchMedia(C.a.breakpoint.mobileLarge.replace("@media ","")).matches?o.dockHeight=n?r.mobileLarge+s.mobileLarge-1:l.mobileLarge+s.mobileLarge+1:window.matchMedia(C.a.breakpoint.mediumLarge.replace("@media ","")).matches?o.dockHeight=n?r.mediumLarge+s.mediumLarge-1:l.mediumLarge+s.mediumLarge+1:window.matchMedia(C.a.breakpoint.small.replace("@media ","")).matches&&(o.dockHeight=n?r.small+s.small-1:l.small+s.small+1),window.dispatchEvent(new CustomEvent("dockInfo",{detail:o}))}};function Ve(e){var t,n=e.card,i=e.className,o=e.headingClassName,r=e.contentID,c=e.dockSize,d=e.dockTheme,p=e.header1,h=e.header2,v=e.headerCollapsedCTA,_=e.headerCTA,T=e.headerExpandedCTA,C=e.headerLink,M=e.headerOpenNewTab,L=e.isDockDismissible,D=e.minimized,R=e.onDockCTAClick,B=e.onDockHeadingClick,z=e.segments,F=e.showDock,U=e.b2bIPSegmentID,H=e.underlayConfig,W=Object(f.useLocation)(),q=Object(b.a)({name:"dock",context:c,label:r,b2bIPSegmentID:U}),V=Object(w.a)(),G=Object(s.useReducer)(We,{dismissed:!1}),Y=a()(G,2),X=Y[0],Z=Y[1],J=Object(E.a)(),K=Object(S.a)(),$=V.overlays,Q=$.onetap,ee=$.swg,te=$.truncator,ne=$.dock,ie=V.setVisibility,ae=V.setMode,oe=V.registerOverlay,re=ne.visible&&"expanded"===ne.mode,se=Object(s.useCallback)((function(){var e,t,n=Object(y.parse)(W.search);if(null!==(e=J.internalPreviewConfig)&&void 0!==e&&e.meter)return"dock"===(null===(t=J.internalPreviewConfig)||void 0===t?void 0:t.meter);if(X.dismissed)return!1;if(ne.visible)return!0;if(!F)return!1;if(te.exists){if(!te.ready)return!1;if(te.visible&&"acm"!==te.mode&&"gdpr"!==r)return!1}if(Object(O.d)(n))return!1;if(K||Object(I.a)(K,W.pathname))return!1;if(Object(P.d)())return!1;if(Q.exists){if(!Q.ready)return!1;if(Q.visible)return!1}if(ee.exists){if(!ee.ready)return!1;if(ee.visible)return!1}return!0}),[r,ne.visible,W.search,Q.exists,Q.ready,Q.visible,F,X.dismissed,ee.exists,ee.ready,ee.visible,te.exists,te.mode,te.ready,te.visible,null==J||null===(t=J.internalPreviewConfig)||void 0===t?void 0:t.meter,K,W.pathname]),le=Object(s.useCallback)((function(){return!!ne.visible&&"gdpr"===r}),[r,ne.visible]),ce=Object(s.useCallback)((function(e){var t=e?se():le();ne.visible!==t&&(ie("dock",t),qe(d,t,re))}),[se,le,ne.visible]),ue=function(){ae("dock","expanded"),qe(d,ne.visible,!0)},de=Object(s.useCallback)((function(){ae("dock","standard"),qe(d,ne.visible,!1)}),[]),pe=g()((function(){q.trackImpression(),z.forEach((function(e){Object(k.b)(e.testName)}))}));Object(s.useEffect)((function(){oe("dock"),ce(!0)}),[]),Object(s.useEffect)((function(){ce(!0),ne.visible&&(D?de():ue(),pe())}),[se,le,F,ne.visible]);var fe=function(){L&&(Z({dismissed:!0},ce(!1)),qe(d,!1,re))},me=function(e){var t=e.dockSize,n=void 0===t?"standard":t,i=e.contentID,a=void 0===i?"":i;return"gdpr"===a?a:"standard"===n?n:"expanded"}({dockSize:c,contentID:r}),he="".concat(me,"-dock"),ge=Object(x.a)({location:W}),ye=Object(s.useRef)(null),ve=Object(s.useRef)(!1);Object(s.useEffect)((function(){if(!ve.current&&ye.current){var e=function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=(null==t||null===(e=t.currentTarget)||void 0===e?void 0:e.href)||t.target.href;q.trackInteraction(t,{name:A(r,n)})},t=ye.current.querySelectorAll("a, button");t.length&&(t.forEach((function(t){t.addEventListener("click",e)})),ve.current=!0)}}),[ye,q,r,ve]);var be=null;n&&(be="div"===n.type?l.a.cloneElement(n,{ref:ye}):l.a.cloneElement(n,{closeDock:fe,tracker:q,dockVisible:ne.visible}));var _e=!!H&&re;return u()(m.ThemeProvider,{theme:d},void 0,u()(De,{className:Object(m.cx)(r,{shown:ne.visible&&!ge,expanded:re&&!ge,standard:"standard"===c,"expanded-dock":"standard"!==c},i),"data-testid":he,"aria-label":"A message from The Times",contentID:r},void 0,(p||h)&&u()(Ie,{className:o,contentID:r,dockExpanded:re,dockShown:ne.visible&&!ge,dockSize:c,header1:p,header2:h,headerCollapsedCTA:v,headerCTA:_,headerExpandedCTA:T,isDockDismissible:L,onDockCTAClick:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.currentTarget,n="button"===t.tagName.toLowerCase();L&&n&&(e.stopPropagation(),q.trackInteraction(e,{name:"close",label:"Close"}),fe()),R(e)},onDockHeadingClick:B||function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.currentTarget,n=void 0===t?{}:t,i="button"===n.tagName.toLowerCase(),a=L&&i,o="gdpr"===r,s="unlocked-article-regi"===r;if(!(a||o||s)){var l="standard"===c,u=j({contentID:r,isExpanded:re,isStandard:l,linkHref:C}),d=function(){return N({isStandard:l,headerLink:C,headerOpenNewTab:M})},p=l?C:"",f="";l||(re?(f="Collapse",de()):(f="Expand",ue())),q.trackInteraction(e,He(He({},f&&{label:f}),{},{name:u,url:p}),d)}}}),u()(Ne,{tabIndex:"0",dockExpanded:re,card:be,contentID:r})),u()(Fe,{visible:_e,onClick:function(){null!=H&&H.clickable&&de()}}))}Ve.displayName="Dock",Ve.defaultProps={card:null,className:void 0,headingClassName:void 0,headerCTA:void 0,header1:null,header2:null,headerCollapsedCTA:Ee.seeMyOptions,headerExpandedCTA:Ee.collapse,headerLink:"https://www.nytimes.com",headerOpenNewTab:!1,minimized:!0,onDockCTAClick:function(){},onDockHeadingClick:null,segments:[],showDock:!1,b2bIPSegmentID:"",underlayConfig:null},Ve.displayName="Dock";var Ge=Object(_.a)(Ve),Ye=function(){return u()(Ge,{contentID:"relogin",dockSize:"standard",dockTheme:K.b,header1:"",header2:"You have been logged out because your session expired. Log in here.",headerCTA:"Log In",headerLink:Object(P.b)(),isDockDismissible:!1,showDock:!0})};Ye.displayName="Relogin";var Xe=Ye,Ze=n("PgO9"),Je=n("HUmG"),Ke=Object(m.css)("position:relative;height:100%;max-width:",J.breakpoint.mediaMaxWidth,"px;margin:auto;"),$e=Object(m.css)("font-size:15px;line-height:17px;color:",J.color.gray10,";background-color:",J.color.gray80,";display:flex;flex-flow:row wrap;align-items:center;justify-content:space-between;height:100%;box-sizing:border-box;padding:16px 20px;border-radius:6px;font-family:",J.font.franklinBase,";",J.breakpoint.small,"{font-size:18px;line-height:20px;}",J.breakpoint.medium,"{padding:20px 30px;justify-content:space-around;}",J.breakpoint.mediumLarge,"{font-size:20px;line-height:20px;padding-left:45px;padding-right:50px;justify-content:space-around;}"),Qe=Object(m.css)(J.breakpoint.medium,"{max-width:375px;}",J.breakpoint.mediumLarge,"{max-width:none;}"),et=Object(m.css)("font-weight:",J.font.weight.bold,";display:inline;",J.breakpoint.small,"{display:block;}"),tt=Object(m.css)("margin:4px 0 7px;display:inline;",J.breakpoint.small,"{margin-bottom:1px;display:block;}",J.breakpoint.mediumLarge,"{line-height:24px;}"),nt=Object(m.css)("font-size:16px;font-weight:",J.font.weight.bold,";font-family:",J.font.franklinBase,";line-height:16px;text-align:center;display:inline-block;width:100%;padding:13px 17px 11px;color:",J.color.white,";background-color:",J.color.gray10,";border-radius:3px;",J.breakpoint.small,"{max-width:248px;}"),it=function(e){var t=e.tracker,n=l.a.createElement(l.a.Fragment,null,"You have access to this article thanks to someone you know. "),i=l.a.createElement(l.a.Fragment,null,"Keep exploring The Times with a free account. "),a={asset:"unlocked_article",application:"Free_Experience"};return u()("div",{className:Ke},void 0,u()("div",{className:$e},void 0,u()("div",{className:Qe},void 0,u()("p",{className:et},void 0,n),u()("p",{className:tt},void 0,i)),u()("button",{type:"button",onClick:function(e){t.trackInteraction(e,{name:"goto-login-or-register"},(function(){window.location.href=Object(P.a)(a)}))},className:nt,"data-testid":"unlocked-artcile-btn-selector"},void 0,"Log in or create account")))};it.displayName="UnlockedArticleCard";var at,ot=it,rt=function(e){var t=e.pageCount,n=Object(Ze.a)().user,i=Object(Je.e)(n),a=i?"standard":"expanded",o=i?"unlocked-article-regi":"unlocked-article-anon",r=at||(at=u()(ot,{})),s="Shared with you by a Times subscriber.";return n?u()(Ge,{card:r,contentID:o,dockSize:a,dockTheme:K.b,header1:s,header2:s,headerCollapsedCTA:"Learn More",isDockDismissible:i,minimized:i,pageCount:t,showDock:!0}):null};rt.displayName="UnlockedArticleDock",rt.defaultProps={pageCount:null};var st,lt=rt,ct=n("l2po"),ut=n.n(ct),dt=n("11pz"),pt=n.n(dt),ft=n("yXPU"),mt=n.n(ft),ht=n("o0o1"),gt=n.n(ht),yt=(n("ls82"),n("fZdH")),vt=n("NW2b"),bt=n("DH8m"),_t=n("SpBF"),wt=n("MLAy"),xt=n("oXTd"),kt="Something went wrong. Please try again later.",Ot={scope:"emailSignupDock",limit:5,frequency:wt.d},Tt=n("VkAN"),Ct=n.n(Tt),Et=n("eFc+"),St=n.n(Et),Pt=n("Kxyt");function It(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}var Mt=St()(st||(st=Ct()(["\n  query NewsletterTitleCaptionQuery($newsletterId: String) {\n    newsletterProductData(code: $newsletterId) {\n      signupModuleHeadline\n      signupModuleSummary\n      signupPageLink\n    }\n  }\n"])));function At(e){var t,n=e.skipQuery,i=e.newsletterProductCode,a=Object(Pt.useQuery)(Mt,{skip:n||!i,variables:{newsletterId:i}}).data;if(null===(null==a||null===(t=a.newsletterProductData)||void 0===t?void 0:t.signupPageLink))return null;var o,r,s,l=null!=(o=a)&&null!==(r=o.newsletterProductData)&&void 0!==r&&r.signupModuleHeadline&&null!=o&&null!==(s=o.newsletterProductData)&&void 0!==s&&s.signupModuleSummary?{title:o.newsletterProductData.signupModuleHeadline,caption:o.newsletterProductData.signupModuleSummary}:null;return i&&l?function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?It(Object(n),!0).forEach((function(t){p()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):It(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({productCode:i},l):null}function jt(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}var Nt=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?jt(Object(n),!0).forEach((function(t){p()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):jt(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({mobileSmallCustom:"@media (min-width: 375px)",largeCustom:"@media (min-width: 1220px)"},C.a.breakpoint),Lt={themeID:"emailSignupDockTheme",useMaxHeight:!0,dockContentHeight:{mobileSmall:200,mobileLarge:200,small:160,mediumLarge:140},dockHeaderHeight:{mobileSmall:0,mobileLarge:0,small:0,mediumLarge:0},dockHeaderOffset:{mobileSmall:0,mobileLarge:0,small:0,mediumLarge:0},dockExpandSpeed:"500ms"},Dt=n("3Rk2"),Rt=n.n(Dt)()([Nt.mobileSmallCustom,Nt.small,Nt.medium,Nt.mediumLarge,Nt.largeCustom,Nt.extraLarge]),Bt=Object(m.css)("text-align:center;position:relative;margin:-5px -20px -20px;padding:16px 20px 20px;background-color:",J.color.white,";",Rt({paddingBottom:["28px",null,"20px",null]}),";&.confirmation{",Rt({paddingBottom:["22px","22px","20px",null]}),";}"),zt=Object(m.css)("display:flex;align-items:center;",Rt({display:["block",null,null,"flex"],justifyContent:[null,null,"space-between",null,"center"]}),";&.variant2{",Rt({justifyContent:[null,null,null,"center"]}),";}"),Ft=Object(m.css)("color:",J.color.black,";font-weight:",J.font.weight.medium,";font-family:",J.font.franklinBase,";line-height:",J.font.size(20),";transition:margin-bottom ","300ms ease-out",";",Rt({fontSize:[J.font.size(15),null,null,null,J.font.size(16),J.font.size(16),J.font.size(16)],textAlign:["left",null,null,"left","right"],marginRight:["0",null,"12px","40px"],margin:["0 0 12px",null,null,"0 40px 0 0"]}),";&.confirmation{margin-bottom:0;}&.expanded-error{",Rt({marginBottom:[null,null,null,"22.4px"]}),"}&.variant2{text-align:left;",Rt({maxWidth:[null,null,null,"635px"]}),"}"),Ut=Object(m.css)("font-weight:",J.font.weight.bold,";"),Ht=Object(m.css)("white-space:nowrap;",Rt({textAlign:["left",null,null,"right"],marginRight:["-20px","20px","0"]}),";"),Wt=Object(m.css)("height:38px;font-weight:",J.font.weight.mediumBold,";font-family:",J.font.franklinBase,";font-size:",J.font.size(16),";line-height:",J.font.size(16),";text-align:center;display:inline-block;border-radius:3px;",J.breakpoint.small,"{max-width:248px;}"),qt=Object(m.css)("width:162px;border:1px solid #1e1e1e;background-color:#1e1e1e;color:",J.color.white,";transition:opacity 0.15s ease-in;&.loading,&:hover.loading{opacity:0.6;}&:hover{opacity:0.9;}&:active{opacity:0.85;}"),Vt=Object(m.css)("width:89px;border:1px solid ",J.color.gray10,";margin-left:16px;background-color:",J.color.white,";color:",J.color.gray10,";transition:background-color 0.15s ease-in;&:hover{background-color:rgba(18,18,18,0.08);}&:active{background-color:rgba(18,18,18,0.12);}"),Gt=Object(m.css)("height:0;justify-content:center;"),Yt=Object(m.css)("width:35px;"),Xt=Object(m.css)("color:#a90111;height:",J.font.size(14.4),";font-weight:",J.font.weight.book,";font-family:",J.font.franklinBase,";line-height:",J.font.size(14.4),";font-size:",J.font.size(12),";text-align:left;padding-top:8px;margin-top:-","22.4px",";transition:margin-top ","300ms ease-out",";will-change:margin-top;&.expanded-error{margin-top:0;}"),Zt=Object(m.css)("max-height:0;overflow:hidden;transition:max-height ","300ms ease-out",",opacity ","300ms ease-out",";opacity:0;will-change:max-height,opacity;&.expanded-error{max-height:","22.4px",";opacity:1;}"),Jt=n("taqW"),Kt=function(){return u()(Jt.a,{color:"white",fixed:!1,wrapperClass:Gt,iconClass:Yt})};Kt.displayName="StyledSpinner";var $t=Kt,Qt=function(){return u()("div",{className:"".concat(Bt," confirmation")},void 0,u()("div",{className:zt},void 0,u()("div",{className:"".concat(Ft," confirmation")},void 0,"Thank you for signing up for this newsletter. We’ve sent you a confirmation email.")))};Qt.displayName="Confirmation";var en=Qt,tn=function(e){var t=e.title,n=e.caption;return l.a.createElement(l.a.Fragment,null,u()("strong",{className:Ut},void 0,t.replace(/\s*[:.!]\s*$/,""),".")," ",n)};tn.defaultProps={caption:void 0};var nn,an,on=tn,rn=function(e){var t=e.closeDock,n=e.subscribeHandler,i=e.trackCloseDockInteraction,o=e.subLoading,r=e.subError,l=e.subComplete,c=e.newsletterData,d=Object(s.useState)(!1),p=a()(d,2),f=p[0],h=p[1];Object(s.useEffect)((function(){!f&&l&&(h(!0),setTimeout((function(){t()}),7e3))}),[t,l,f]);return f?nn||(nn=u()(en,{})):u()("div",{className:Bt,"data-testid":"email-signup-dock-simple"},void 0,u()("div",{className:zt},void 0,u()("div",{className:Object(m.cx)(Ft,{"expanded-error":r})},void 0,u()(on,{title:c.title})),u()("div",{className:Ht},void 0,u()("button",{type:"button",onClick:n,disabled:o,className:Object(m.cx)(Wt,qt,{loading:o})},void 0,o?an||(an=u()($t,{})):"Get it in your inbox"),u()("button",{type:"button",onClick:function(){i({productCode:c.productCode,productName:c.title}),t()},className:Object(m.cx)(Wt,Vt)},void 0,"Not now"),u()("div",{className:Object(m.cx)(Zt,{"expanded-error":r})},void 0,u()("div",{className:Object(m.cx)(Xt,{"expanded-error":r})},void 0,r&&kt)))))};rn.displayName="Card",rn.defaultProps={closeDock:function(){}};var sn=rn;function ln(e){var t=e.showDock,n=e.subscribeHandler,i=e.trackCloseDockInteraction,a=e.subLoading,o=e.subError,r=e.subComplete,s=e.newsletterData;return u()(Ge,{contentID:"email-signup-dock",card:u()(sn,{subscribeHandler:n,trackCloseDockInteraction:i,subLoading:a,subError:o,subComplete:r,newsletterData:s}),dockSize:"standard",dockTheme:Lt,minimized:!1,isDockDismissible:!0,showDock:t})}ln.displayName="Variant1Dock";var cn,un,dn=ln,pn=function(e){var t=e.closeDock,n=e.subscribeHandler,i=e.trackCloseDockInteraction,o=e.subLoading,r=e.subError,l=e.subComplete,c=e.newsletterData,d=Object(s.useState)(!1),p=a()(d,2),f=p[0],h=p[1];Object(s.useEffect)((function(){!f&&l&&(h(!0),setTimeout((function(){t()}),7e3))}),[t,l,f]);return f?cn||(cn=u()(en,{})):u()("div",{className:Bt,"data-testid":"email-signup-dock-descriptive"},void 0,u()("div",{className:Object(m.cx)(zt,{variant2:!0})},void 0,u()("div",{className:Object(m.cx)(Ft,{variant2:!0,"expanded-error":r})},void 0,u()(on,{title:c.title,caption:c.caption})),u()("div",{className:Object(m.cx)(Ht,{variant2:!0})},void 0,u()("button",{type:"button",onClick:n,disabled:o,className:Object(m.cx)(Wt,qt,{loading:o})},void 0,o?un||(un=u()($t,{})):"Get it in your inbox"),u()("button",{type:"button",onClick:function(){i({productCode:c.productCode,productName:c.title}),t()},className:Object(m.cx)(Wt,Vt)},void 0,"Not now"),u()("div",{className:Object(m.cx)(Zt,{"expanded-error":r})},void 0,u()("div",{className:Object(m.cx)(Xt,{"expanded-error":r})},void 0,r&&kt)))))};pn.displayName="Card",pn.defaultProps={closeDock:function(){}};var fn=pn;function mn(e){var t=e.showDock,n=e.subscribeHandler,i=e.trackCloseDockInteraction,a=e.subLoading,o=e.subError,r=e.subComplete,s=e.newsletterData;return u()(Ge,{contentID:"email-signup-dock",card:u()(fn,{subscribeHandler:n,trackCloseDockInteraction:i,subLoading:a,subError:o,subComplete:r,newsletterData:s}),dockSize:"standard",dockTheme:Lt,minimized:!1,isDockDismissible:!0,showDock:t})}mn.displayName="Variant2Dock";var hn=mn,gn="MAPS_cwv_email_signup_dock_0322",yn="0_control",vn="1_dock_simple",bn="2_dock_descriptive",_n=gn,wn=function(e){var t;return null==e||null===(t=e[_n])||void 0===t?void 0:t.variant},xn=function(e){var t;return!(null!=e&&null!==(t=e[_n])&&void 0!==t&&t.allocated)},kn=function(e){return wn(e)===vn||wn(e)===bn},On={module:{name:"email-signup-dock",label:"email-signup-dock"}},Tn={eventData:{type:"click"},module:{element:{name:"email-signup-button",label:"get it in your inbox"}}},Cn={eventData:{type:"click"},module:{element:{name:"dismiss",label:"not now"}}},En=function(e,t){return function(n){e.trackInteraction(t.eventData,t.module.element,null,{newsletter:n})}},Sn={"Frank Bruni":"FB","Jamelle Bouie":"JBO","Maureen Dowd":"NTMD","Paul Krugman":"PK","The Conversation":"NTTC","Zeynep Tufekci":"NTZT","Tish Harrison Warren":"THW","John McWhorter":"JM","Jay Caspian Kang":"JCK","Tressie McMillan Cottom":"TMC","Kara Swisher":"KS","Peter Coy":"PC","Jane Coaston":"JC"},Pn={"The Editorial Board":"NTEB","Thomas L. Friedman":"NTTF"};function In(e){var t,n,i,a,o,r=null===(t=e.column)||void 0===t?void 0:t.name,s=Sn[r];if(s)return s;var l=null===(n=e.bylines)||void 0===n||null===(i=n[0])||void 0===i||null===(a=i.creators)||void 0===a||null===(o=a[0])||void 0===o?void 0:o.displayName,c=Pn[l];return c||null}var Mn="initial",An="loading",jn="complete",Nn="error",Ln=p()(p()({},vn,dn),bn,hn),Dn=function(e){var t=e.article,n=Object(s.useState)(Mn),i=a()(n,2),o=i[0],r=i[1],l=Object(_t.a)().subToNewsletters,c=Object(yt.a)(),d=Object(wt.e)(Ot),p=Object(bt.a)({percent:.5}).hasMetThreshold,f=Object(s.useRef)(!1),m=t&&In(t),h=At({skipQuery:!kn(c)||!m,newsletterProductCode:m}),g=p&&kn(c)&&!!h,y=Object(b.a)(On.module),v=En(y,Cn),_=En(y,Tn);if(Object(s.useEffect)((function(){Object(vt.e)(gn)}),[]),Object(s.useEffect)((function(){p&&d.increment()}),[d,p]),Object(s.useEffect)((function(){g&&!f.current&&(f.current=!0,y.trackImpression())}),[g,y]),!g)return null;var w=function(){var e=mt()(gt.a.mark((function e(){return gt.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r(An),_({productCode:h.productCode,productName:h.title}),e.prev=2,e.next=5,l([{productCode:m}],{signupFormVersion:xt.i.emailSignupDock});case 5:e.next=11;break;case 7:return e.prev=7,e.t0=e.catch(2),r(Nn),e.abrupt("return");case 11:r(jn);case 12:case"end":return e.stop()}}),e,null,[[2,7]])})));return function(){return e.apply(this,arguments)}}(),x=function(e){var t=wn(e);return Ln[t]}(c);return x?u()(x,{showDock:g,subscribeHandler:w,trackCloseDockInteraction:v,subLoading:o===An,subError:o===Nn,subComplete:o===jn,newsletterData:h}):null};Dn.defaultProps={article:void 0};var Rn,Bn,zn=Dn,Fn=n("X6oL"),Un=n("/tu1"),Hn=n("udJG"),Wn=n("2ccF"),qn=n("mbYo"),Vn=n("PCFz"),Gn=n("g+Cy"),Yn=C.a.color,Xn=C.a.font,Zn=Object(m.css)("display:flex;flex-direction:column;align-items:center;height:100%;max-width:337px;margin:auto;font-family:",Xn.franklinBase,";font-size:",Xn.size(12),";line-height:",Xn.size(18),";color:",Yn.gray10,";"),Jn=Object(m.css)("display:block;text-align:center;"),Kn=Object(m.css)("margin:26px 0 4px 0;text-align:center;font-size:",Xn.size(14),";font-weight:",Xn.weight.bold,";outline:none;"),$n=Object(m.css)("display:flex;flex-direction:row;justify-content:flex-start;align-items:center;height:55px;width:337px;margin:22px 0 14px 0;background-color:",Yn.gray90,";font-size:",Xn.size(14),";font-weight:",Xn.weight.bold,";border:1px solid ",Yn.gray60,";"),Qn=Object(m.css)("height:30px;width:23px;margin:0 54px 0 17px;"),ei=Object(m.css)("text-align:center;button{background:none;line-height:",Xn.size(18),";color:",Yn.gray20,";text-decoration:underline;}"),ti=function(e){var t=e.closeDock,n=e.redirectUri,i=e.dockVisible,a=Object(Fn.useTracking)().trackEvent,o=Object(s.useRef)(null),r=Object(s.useRef)(null),c=Object(s.useRef)(!1),d=Object(yt.a)(),p=(null==d?void 0:d["disrupter_framing_SUJO_SUBX_4-25"])||{},f=p.allocated,m=void 0===f||f,h=p.variant,g=void 0===h?null:h,y=(null==d?void 0:d[qn.h])||{},v=y.allocated,b=void 0===v||v,_=y.variant,w=void 0===_?null:_;Object(s.useEffect)((function(){i&&o.current.focus()}),[i]);var x=r.current?r.current.querySelectorAll('a[href]:not([disabled]), button:not([disabled]), textarea:not([disabled]), input[type="text"]:not([disabled]), input[type="radio"]:not([disabled]), input[type="checkbox"]:not([disabled]), select:not([disabled])'):[],k=x[0],O=x.length>0?x[x.length-1]:x[0],T="Continue reading in the app — it’s better",C="Stay logged in and get customized notifications.",E="Exploring articles will be easier, too.";return m&&b&&g&&w!==qn.g&&w!==qn.f&&(Object(vt.e)("disrupter_framing_SUJO_SUBX_4-25"),"1_get_most"===g?(T="Get the most out of your subscription.",C="The New York Times app gives you customized news",E="alerts, audio journalism, dark mode and more."):"2_not_getting"===g&&(T="You’re not getting all of your subscription benefits.",C="The New York Times app gives you customized news",E="alerts, audio journalism, dark mode and more.")),i?l.a.createElement("div",{className:Zn,"aria-modal":"true",role:"alertdialog","aria-labelledby":"dialog-label","aria-describedby":"dialog-desc",ref:r,onKeyDown:function(e){"Tab"!==e.key&&9!==e.keyCode||(c.current=!0,e.shiftKey?document.activeElement===k&&(O.focus(),e.preventDefault()):document.activeElement===O&&(k.focus(),e.preventDefault()))}},l.a.createElement("h2",{id:"dialog-label",className:Kn,tabIndex:"-1",ref:o},T),u()("div",{id:"dialog-desc"},void 0,u()("p",{className:Jn},void 0,C),u()("p",{className:Jn},void 0,E)),u()("ul",{},void 0,u()("li",{},void 0,u()(Vn.a,{redirectUri:n,className:$n,trackingObject:{event:"moduleInteraction",module:{name:"read-in-app-disrupter",label:"onboarding-read-in-app",context:"standard",version:"onboarding-read-in-app",element:{name:"read-in-app",label:"clicked-read-in-app"}}},handleClick:t},void 0,Rn||(Rn=u()(Gn.a,{className:Qn,role:"presentation"})),Bn||(Bn=u()("span",{className:"label"},void 0,"Read this article in the app")))),u()("li",{className:ei},void 0,u()("button",{type:"button",onClick:function(){if(a({event:"moduleInteraction",module:{name:"read-in-app-disrupter",label:"onboarding-read-in-app",context:"standard",version:"onboarding-read-in-app",element:{name:"no-thanks",label:"clicked-no-thanks"}}}),t(),c.current){!function e(t){if(!(t.length<=0)){var n=t.shift();n.focus(),n!==document.activeElement&&e(t)}}(Array.from(document.querySelectorAll("a[href]:not([disabled]), button:not([disabled])"))),window.scrollTo(0,0)}}},void 0,"Not right now")))):null};ti.defaultProps={closeDock:function(){},redirectUri:"https://www.nytimes.com",dockVisible:!1};var ni=ti,ii={scope:"disrupterReadInAppViews",maxStored:12},ai=function(e){var t=e.article,n=Object(s.useState)(!1),i=a()(n,2),o=i[0],r=i[1],l=Object(Fn.useTracking)().trackEvent,c=Object(wt.e)(Hn.a),d=Object(Un.d)(null==t?void 0:t.url),p=Object(yt.a)(),f=((null==p?void 0:p[qn.c])||{}).variant,m=void 0===f?null:f,h=Object(Wn.c)(ii).saveView,g=u()(ni,{redirectUri:d});return Object(s.useEffect)((function(){setTimeout((function(){l({event:"impression",eventData:{type:"impression",pageType:"article"},module:{name:"read-in-app-disrupter",label:"onboarding-read-in-app",context:"standard"}}),m===qn.e||m===qn.d?h():c.increment(),r(!0)}),7e3)}),[]),u()(Ge,{card:g,contentID:"read-in-app-disrupter",dockSize:"expanded",dockTheme:K.a,header1:"",header2:"",headerCTA:"",isDockDismissible:!0,showDock:o,minimized:!1,underlayConfig:{clickable:!1}})};ai.displayName="Disrupter",ai.defaultProps={article:{url:"https://www.nytimes.com"}};var oi=ai,ri=n("cUQY"),si=n("caSQ"),li=n("pCca"),ci=n("gojR"),ui=n("uCIn"),di=new Date("2022-09-22T00:00:00.000Z");function pi(e){var t=Object(yt.a)(),n=Object(Ze.a)().user,i=Object(S.a)(),a=Object(wt.e)(Ot);Object(s.useEffect)((function(){a.resetIfCompleteBefore(di)}),[a]);var o=e&&In(e),r=!!o,l=!n,c=!function(e){return!(null==e||!e[_n])}(t)||!xn(t)&&!function(e){return wn(e)===yn||wn(e)===vn||wn(e)===bn}(t)||!l&&!Object(Je.f)(n)||i||!r||!a.loading()&&!a.canShow(),u=xn(t)||l||a.loading(),d=c||u,p=Object(ui.a)(),f=Object(_t.a)({skipNewsletterSubscriptionsQuery:d}).newsletterSubs;if(c)return{loaded:!0,canShow:!1};if(u||!f||p.loading)return{loaded:!1};var m=f.some((function(e){return e.productCode===o})),h=p.value;return{loaded:!0,canShow:!m&&!h}}var fi=n("B2Q+"),mi=n("h+5M");function hi(e){var t=e.adSensitivity,n=e.article,i=Object(E.a)().internalPreviewConfig,a=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.article,n=Object(li.a)(),i=n.supportsTouch,a=Object(si.a)(),o=Object(Ze.a)(),r=o.user,s=o.error,l=Object(ri.a)(),c=l.meterReady,u=l.grantReason,d=l.expiredSession,p=l.extendedAccess,f=l.granted,m=l.loggedIn,h=pi(t),g=Object(Hn.b)({article:t}),y=g.readyAppDownloadTarget,v=g.inAppDownloadTarget,b=function(){return c&&(s||null!==r)&&void 0!==a&&null!==i&&h.loaded&&y?null!=p&&p.signedEntitlements||p&&!1===m&&!1===f&&"METER_LIMIT"===u?null:d?"ReloginDock":v?"Disrupter":"UNLOCKED_ARTICLE_CODE"===u?"UnlockedArticleDock":h.canShow?"EmailSignupDock":"":null},_=b();return null===_?{type:"",ready:!1}:{type:_,ready:!0}}({article:n}),o=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.adSensitivity,n=e.article,i=Object(ri.a)(),a=i.meterReady,o=i.showGateway,r=Object(E.a)(),s=r.isCrawler,l=r.internalPreviewConfig,c=Object(ci.a)(n),u=c.loading,d=c.isInVariant,p=c.isInControl,f=Object(li.a)(),m=f.deviceType,h=f.browserType,g=Object(w.a)(),y=g.overlays.onetap,v=function(){var e=y.exists&&y.ready;return!a||u||"smartphone"===m&&"CriOS"===h&&!e?null:!(!y.visible||"smartphone"!==m||"CriOS"!==h)||("off"===(null==l?void 0:l.meter)||(!(!s&&!Object(fi.b)())||(!!o||("TRAGEDY"===t||(!(!d&&!p)||!!Object(mi.a)())))))},b=v();return null===b?{skip:null,ready:!1}:{skip:b,ready:!0}}({adSensitivity:t,article:n}),r=function(){if(!(a.ready&&o.ready))return null;if("dock"===(null==i?void 0:i.meter))return"OMADock";var e=v.a.parse(window.location.search);return"prd"!==vi.env.ENVIRONMENT&&e["test-dock"]?e["test-dock"]:o.skip?"":a.type?a.type:""}();return null===r?{type:"",ready:!1,showDock:!o.skip}:{type:r,ready:!0,showDock:!o.skip}}var gi=n("syiw"),yi=["children"],bi={EmailSignupDock:zn,ReloginDock:Xe,UnlockedArticleDock:lt,OMADock:ut.a,OMAB2BDock:pt.a,Disrupter:oi};function _i(e){var t=e.children,n=r()(e,yi),i=Object(s.useRef)(null),o=Object(s.useState)(!1),c=a()(o,2),u=c[0],d=c[1],p=hi(n),f=Object(w.a)(),m=f.setVisibility,h=f.registerOverlay,g=Object(gi.useMessageSelection)({config:{name:"dock"}}),y=Object(s.useState)(void 0),v=a()(y,2),b=v[0],_=v[1],x=Object(gi.useMessageSelection)({config:{name:"b2bDock"}}),k=Object(s.useState)(void 0),O=a()(k,2),T=O[0],C=O[1],E=Object(s.useCallback)((function(){var e,t,n,i;return"undefined"!=typeof document&&("undefined"!=typeof window&&((null==g||!g.loading)&&(!(null===(e=window)||void 0===e||null===(t=e.selection)||void 0===t||!t.called)&&(null===(n=window)||void 0===n||null===(i=n.selection)||void 0===i||!i.loading))))}),[g]);return Object(s.useEffect)((function(){var e;if(void 0===b&&E()){var t=null==g||null===(e=g.response)||void 0===e?void 0:e.campaign();_(""!==t)}}),[E,g,b]),Object(s.useEffect)((function(){var e;if(void 0===T&&E()){var t=null==x||null===(e=x.response)||void 0===e?void 0:e.campaign();C(""!==t)}}),[E,x,T]),Object(s.useEffect)((function(){if(p.ready&&(!p.ready||p.showDock)&&!i.current&&void 0!==T&&void 0!==b){if(T)return i.current=bi.OMAB2BDock,d(!0),h("dock"),void m("dock",!0);if(b)return i.current=bi.OMADock,d(!0),h("dock"),void m("dock",!0);if(p.ready&&p.type){var e=p.type,t=bi[e];t&&(i.current=t,d(!0))}}}),[p,i,u,d,b,T,h,m]),i.current&&u?l.a.createElement(i.current,n,t):null}_i.defaultProps={adSensitivity:"",article:void 0,children:null},_i.displayName="FullDock";t.a=Object(_.a)(_i)},"9dx5":function(e,t,n){"use strict";var i=n("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.scrollTo=t.noop=t.mapDataToProps=t.makeSurrogateKeyMemoized=t.makeSurrogateKey=t.getSlideData=t.getImageCrops=t.createAnimation=void 0;var a=i(n("uyHG")),o=n("nosR"),r=t.makeSurrogateKey=function(){for(var e="",t=0;t<=10;t+=1)e+=String.fromCharCode(70+Math.floor(8*Math.random()));return e.toLowerCase()},s=(t.makeSurrogateKeyMemoized=(0,a.default)(r),t.noop=function(){},t.createAnimation=function(e,t,n,i,a,o){var r=i;r||(r=.75*Math.abs(t-n));var s=null,l=e;return function e(i){s||(s=i);var c,u=s-i;l.scrollLeft=(c=u,(t-n)*Math.sin(c/r*(Math.PI/2))+t),i-s<r?requestAnimationFrame(e):(l.scrollLeft=n,a&&setTimeout((function(){return a(o)}),0))}}),l=(t.scrollTo=function(e,t,n,i,a){var o=t*e.clientWidth,r=e.scrollLeft;if(n)e.scrollLeft=o;else{var l=s(e,r,o,i,a,t);requestAnimationFrame(l)}},t.getImageCrops=function(e){var t=e.find((function(e){return"THREE_BY_TWO"===e.name}))||{},n=e.find((function(e){return"MASTER"===e.name}))||{},i=(0,o.findImageRenditionOfBestFitUrl)(null==n?void 0:n.renditions,1200)||(0,o.findImageRenditionOfBestFitUrl)(null==t?void 0:t.renditions,1200),a=e.find((function(e){return"MOBILE_MASTER"===e.name}))||{},r=(null==a?void 0:a.renditions)&&a.renditions[0]&&a.renditions[0].url||(0,o.findImageRenditionOfBestFitUrl)(null==n?void 0:n.renditions,800);return{desktop:i||r,mobile:r||i}}),c=t.getSlideData=function(e,t){var n,i,a;return{caption:"amp"===t?(null==e?void 0:e.caption)&&(null===(n=e.caption)||void 0===n?void 0:n.text)&&e.caption.text:(null==e?void 0:e.legacyHtmlCaption)&&e.legacyHtmlCaption,credit:(null==e||null===(i=e.image)||void 0===i?void 0:i.credit)&&e.image.credit,images:(null==e?void 0:e.image)&&l(e.image.crops),id:(null==e||null===(a=e.image)||void 0===a?void 0:a.id)&&e.image.id}};t.mapDataToProps=function(e){var t,n,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",a=null===(t=e.headline)||void 0===t?void 0:t.default,o=null===(n=e.slides)||void 0===n?void 0:n.map((function(e){return c(e,i)}));return{title:a,images:o}}},"9i1U":function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));var i,a=n("VkAN"),o=n.n(a),r=n("eFc+"),s=Object(r.gql)(i||(i=o()(["\n  fragment Connection_pageInfo on RelayConnection {\n    pageInfo {\n      hasNextPage\n      hasPreviousPage\n      startCursor\n      endCursor\n    }\n  }\n"])))},"9jcr":function(e,t,n){"use strict";var i=n("TqRt"),a=n("cDf5");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=i(n("q1tI")),r=(i(n("17x9")),function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=a(e)&&"function"!=typeof e)return{default:e};var n=s(t);if(n&&n.has(e))return n.get(e);var i={__proto__:null},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var r in e)if("default"!==r&&{}.hasOwnProperty.call(e,r)){var l=o?Object.getOwnPropertyDescriptor(e,r):null;l&&(l.get||l.set)?Object.defineProperty(i,r,l):i[r]=e[r]}return i.default=e,n&&n.set(e,i),i}(n("+rYN")));function s(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(s=function(e){return e?n:t})(e)}var l=function(e){var t=e.onClick;return o.default.createElement("button",{tabIndex:"100",className:r.dismissButtonClass,type:"button",onClick:t,"aria-label":"close"},o.default.createElement("svg",{width:"60",height:"60",viewBox:"0 0 60 60",fill:"none"},o.default.createElement("circle",{cx:"30",cy:"30",r:"30",fill:"white",fillOpacity:"0.9"}),o.default.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M38.4844 20.1006L39.8986 21.5148L21.5138 39.8996L20.0996 38.4854L38.4844 20.1006Z",fill:"black"}),o.default.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M21.5156 20.1006L20.1014 21.5148L38.4862 39.8996L39.9004 38.4854L21.5156 20.1006Z",fill:"black"})))};l.displayName="DismissButton",l.defaultProps={onClick:void 0};t.default=l},"9qba":function(e,t){e.exports=function(){return"(function () { undefined })();"}},"9ref":function(e,t,n){"use strict";var i,a=n("VkAN"),o=n.n(a),r=n("gcR/"),s=n.n(r),l=n("lSNA"),c=n.n(l),u=n("QILm"),d=n.n(u),p=n("J4zp"),f=n.n(p),m=n("q1tI"),h=n.n(m),g=n("eFc+"),y=n.n(g),v=n("X6oL"),b=n("ZKN5"),_=n("OXmc"),w=n.n(_),x=n("4zjr"),k=n.n(x),O=n("UIP5"),T=n("sOrY"),C=["audioControls"];function E(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function S(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?E(Object(n),!0).forEach((function(t){c()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):E(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function P(e){var t,n,i,a,o,r=e.media,l=e.playerRef,c=e.playerOptions,u=e.locksmith,p=Object(v.useTracking)(),g=p.trackEvent,y=p.getTrackingData,b=Object(m.useRef)(null),_=Object(m.useReducer)(T.a,{showTranscript:!1,currentTime:0,isPlaying:!1}),x=f()(_,2),E=x[0],P=x[1],I=c||{},M=I.audioControls,A=d()(I,C);if(!r.fileUrl)return null;var j=(null===(t=(y().presentation||{}).pageType)||void 0===t?void 0:t.toLowerCase())||"homepage",N=r.promotionalHeadline||(null===(n=r.headline)||void 0===n?void 0:n.default)||"",L=S({audioControls:S({version:"v3",layout:"desktop",padding:"10px 0px",height:"55px",transcript:r.audioTranscript||null,showTranscript:r.audioTranscript&&function(e){e&&"function"==typeof e.stopPropagation&&(e.stopPropagation(),e.preventDefault()),P({showTranscript:!0})}||null},M),duration:1e3*(r.length||0),gtmTrackEvent:g,headline:N,id:r.sourceId,playerRef:function(e){l&&l(e),b.current=e,P({isPlaying:!1}),e.on(e.events.TIME_UPDATE,(function(e){P({currentTime:e})})),e.on(e.events.PLAY,(function(){P({isPlaying:!0})})),e.on(e.events.PAUSE,(function(){P({isPlaying:!1})})),u&&u.lock&&u.unlock&&e.on(e.events.READY,(function(){var t=e.props.instanceId,n=[e.events.PLAYING],i=[e.events.PAUSE,e.events.ENDED,e.events.ERROR];n.forEach((function(n){e.on(n,(function(){u.lock(t)}))})),i.forEach((function(n){e.on(n,(function(){u.unlock(t)}))}))}))},section:r.section||{},series:(null===(i=r.podcastSeries)||void 0===i?void 0:i.name)||"",src:r.fileUrl,type:j},A);return s()("div",{},void 0,r.audioTranscript&&s()(w.a,{hideTranscript:function(){P({showTranscript:!1})},audioDuration:1e3*(r.length||0),currentTime:E.currentTime,isPlaying:E.isPlaying,onPlayPause:function(){b.current&&(E.isPlaying?b.current.pause():b.current.play())},isVisible:E.showTranscript,transcript:r.audioTranscript,headline:(null===(a=r.headline)||void 0===a?void 0:a.default)||"",summary:r.summary||"",credits:r.credit,podcastName:null===(o=r.podcastSeries)||void 0===o?void 0:o.title}),h.a.createElement(O.AudioPlayer,L),s()(k.a,{data:r,platform:"vi",inlineAsset:!0}))}P.displayName="SpanAudio",P.defaultProps={playerOptions:void 0,locksmith:void 0,playerRef:void 0},P.fragments={media:y()(i||(i=o()(["\n    fragment SpanAudio_media on Audio {\n      id\n      credit\n      headline {\n        default\n      }\n      summary\n      audioTranscript: transcript {\n        transcriptFragment {\n          text\n          speaker\n          timecode {\n            start\n            end\n          }\n        }\n      }\n      promotionalHeadline\n      fileUrl\n      length\n      podcastSeries {\n        name\n      }\n      section {\n        id\n        name\n      }\n      sourceId\n    }\n  "])))},t.a=Object(b.a)(P)},"9tMe":function(e,t,n){"use strict";var i=n("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.opinionLogoTypographyFn=t.opinionLogoColorFn=t.OpinionLogo=void 0;var a=n("Jqp9"),o=i(n("3Rk2")),r=i(n("wXC7")),s=n("3sMT"),l=r.default.font.size,c=r.default.breakpoint,u=c.small,d=c.medium,p=(0,o.default)([u,d]),f=t.opinionLogoTypographyFn=(0,a.themeFn)("opinionHeaderRedesign",{none:(0,a.css)("font-family:",r.default.font.serifMedium,";font-weight:",r.default.font.weight.light,";letter-spacing:normal;",p({fontSize:[l(25),l(28)],lineHeight:[l(25),l(28)]}),";"),true:(0,a.css)("font-family:",r.default.font.serifMedium,";font-weight:",r.default.font.weight.bold,";letter-spacing:0.07em;text-transform:uppercase;",p({fontSize:[l(15),l(16)],lineHeight:[l(20),l(24)]}),";")}),m=t.opinionLogoColorFn=(0,a.themeFn)("opinionHeaderRedesign",{none:(0,a.css)("color:'#a19d9d';"),true:(0,a.css)("color:",s.color.signal.breaking,";")});t.OpinionLogo=(0,a.styled)("div",{target:"e1vbbbt70"})("align-self:center;text-decoration:none;",m,";",f,";a:hover &{text-decoration:underline;}")},AF3j:function(e,t,n){"use strict";var i=n("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.OnsiteBylineTimestamp=void 0;var a=i(n("q1tI")),o=(i(n("17x9")),i(n("/UXH"))),r=(n("EVBM"),n("z5jG")),s=n("hsyQ"),l=t.OnsiteBylineTimestamp=function(e){var t=e.bylineData,n=e.timestampBlock,i=e.lastMajorModification,l=e.translations;return a.default.createElement(a.default.Fragment,null,a.default.createElement(r.OnsiteByline,{bylineData:t}),a.default.createElement(s.OnsiteTimestamp,{timestampBlock:n,lastMajorModification:i}),a.default.createElement(o.default,{translations:l||[]}))};l.defaultProps={bylineData:null,timestampBlock:null,lastMajorModification:null,translations:null};t.default=l},AHAN:function(e,t,n){"use strict";var i=this&&this.__createBinding||(Object.create?function(e,t,n,i){void 0===i&&(i=n);var a=Object.getOwnPropertyDescriptor(t,n);a&&!("get"in a?!t.__esModule:a.writable||a.configurable)||(a={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,i,a)}:function(e,t,n,i){void 0===i&&(i=n),e[i]=t[n]}),a=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&i(t,e,n);return a(t,e),t},r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var s=o(n("q1tI")),l=n("Jqp9"),c=n("X6oL"),u=r(n("5UIh")),d=o(n("gJA+")),p=n("syiw"),f=n("HDG5"),m=n("djNW"),h=r(n("EhNO")),g=n("FY2l"),y=n("6gWn");t.default=function(e){var t,n,i,a,o,r,v,b=e.unit,_=(0,s.useState)(!1),w=_[0],x=_[1],k=(0,p.useMessageSelection)({config:{name:"dock"}}),O="news";!function(){var e,t,n,i={NEWS:{hasProduct:!1,displayName:"news"},GAMES:{hasProduct:!1,displayName:"Games"},COOKING:{hasProduct:!1,displayName:"Cooking"},WIRECUTTER:{hasProduct:!1,displayName:"Wirecutter"}};if(null===(e=b.content)||void 0===e?void 0:e.subInfo){null===(n=null===(t=b.content)||void 0===t?void 0:t.subInfo)||void 0===n||n.forEach((function(e){"ACTIVE"===e.status&&e.products.forEach((function(e){i[e]&&(i[e].hasProduct=!0)}))}));var a=Object.values(i).filter((function(e){return e.hasProduct})).map((function(e){return e.displayName}));O=a.join(", ").replace(/, ([^,]*)$/," and $1"),1===a.length&&(O="".concat(O,"-only"))}}();var T=(0,f.useUserState)(),C=(0,c.useTracking)(),E="/"===(0,g.getPathName)()?"homepage":"article",S=s.default.createElement("div",{className:d.headerText},"Get the full Times experience."),P=s.default.createElement("div",{className:(0,l.cx)(d.mainContent)},s.default.createElement("div",{className:d.headerLogo},s.default.createElement(h.default,null)),s.default.createElement("div",{className:d.headerContainer},s.default.createElement("div",{className:d.header},"You’re currently a ",O," subscriber."," ",s.default.createElement("span",{className:d.subHeader},"Upgrade to enjoy all of ",s.default.createElement("span",{className:d.nowrap},"The Times")," at no extra cost for ",s.default.createElement("span",{className:d.nowrap},null===(t=b.content)||void 0===t?void 0:t.offerDuration),"."))),s.default.createElement("div",{className:d.ctaContainer},s.default.createElement("a",{className:d.button,href:null===(n=b.content)||void 0===n?void 0:n.clickThroughURI,onClick:function(){var e,t,n;C.trackEvent({event:"moduleInteraction",eventData:{pagetype:E,trigger:"module",type:"click"},module:{name:"dock",context:"expanded",audience:null===(e=b.content)||void 0===e?void 0:e.trackingAudience,label:null===(t=b.content)||void 0===t?void 0:t.trackingLabel,region:"",element:{name:m.Action.ProductSwitch,label:"Upgrade now",url:null===(n=b.content)||void 0===n?void 0:n.clickThroughURI}}})}},"Upgrade now"),s.default.createElement("span",{className:d.billingTerms},"Billed at your current rate ",null===(i=b.content)||void 0===i?void 0:i.billingTerms,". Cancel anytime.")));if(k.loading)return null;if(!w){var I=null===(o=null===(a=null==k?void 0:k.response)||void 0===a?void 0:a.userstate())||void 0===o?void 0:o.messageSelectionMessageCaps,M=null;if(I)if((j=I).forEach((function(e){var t,n;"dock"===(null==e?void 0:e.unit)&&(null==e?void 0:e.campaign)===(null===(t=null==k?void 0:k.response)||void 0===t?void 0:t.campaign())&&(null==e?void 0:e.audience)===(null===(n=null==k?void 0:k.response)||void 0===n?void 0:n.audience())&&(M=e)})),null!==M){var A=M;A.viewCount+=1,A.lastSeenOn=(new Date).toISOString(),T.update({messageSelectionMessageCaps:j})}if(!M){var j=[];I&&(j=I),j.push({unit:"dock",campaign:null===(r=null==k?void 0:k.response)||void 0===r?void 0:r.campaign(),audience:null===(v=null==k?void 0:k.response)||void 0===v?void 0:v.audience(),lastSeenOn:(new Date).toISOString(),viewCount:1,dismissed:!1}),T.update({messageSelectionMessageCaps:j})}x(!0)}return s.default.createElement(u.default,{testId:"onsite-messaging-unit-".concat(null===y.config||void 0===y.config?void 0:y.config.name),"data-campaign":null==b?void 0:b.campaign,"data-audience":null==b?void 0:b.audience,className:d.otherSubsClassName,headingClassName:d.otherSubsHeadingClassName,headingClassStyle:d.otherSubsHeadingClassStyle,ctaIconWrapperStyle:d.otherSubsCtaIconWrapperStyle,ctaContainerStyle:d.otherSubsCtaContainerStyle,ctaActionTextContainerStyle:d.otherSubsCtaActionTextContainerStyle,dividerStyle:d.otherSubsDividerStyle,headerWrapperStyle:d.otherSubsHeaderWrapperStyle,unit:b,contentID:"ACT_CONV_STAY_LONGER_AT_YOUR_EXISTING_RATE_(SLAYER)_238",dockID:"expand",header:S,card:P,isDockDismissible:!0,isDockExpandable:!1,minimized:!1,overrideHeaderWidth:!1,overrideHeaderStyles:!0})}},AKP5:function(e,t,n){"use strict";var i=n("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.debounce=function(e){var t;return function(){for(var n=this,i=arguments.length,a=new Array(i),o=0;o<i;o++)a[o]=arguments[o];t&&window.cancelAnimationFrame(t),t=window.requestAnimationFrame((function(){return e.apply(n,a)}))}},t.getItemsWithHeadshots=function(e,t){return e?null==t?void 0:t.map((function(t,n){var i,a,o,s,l,c,u,d,p,f,m=null==e||null===(i=e.anyWorks)||void 0===i||null===(a=i[n])||void 0===a||null===(o=a.bylines)||void 0===o||null===(s=o[0])||void 0===s?void 0:s.creatorSnapshots;return!m||m.length>1?t:r(r({},t),{},{headshot:null===(l=m[0])||void 0===l||null===(c=l.promotionalMedia)||void 0===c||null===(u=c.crops)||void 0===u||null===(d=u[0])||void 0===d||null===(p=d.renditions)||void 0===p||null===(f=p[0])||void 0===f?void 0:f.url})})):[]},t.getScrolledIndex=function(e){var t=Math.round(e.scrollLeft/e.clientWidth);return Math.min(t,e.children.length)},t.times=t.noop=t.handleNavRight=t.handleNavLeft=t.handleButtonPress=void 0;var a=i(n("lSNA"));function o(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function r(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?o(Object(n),!0).forEach((function(t){(0,a.default)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):o(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}t.noop=function(){};function s(e,t){var n,i=+(null==e?void 0:e.dataset.scrolledIndex)+("left"===t?-1:1),a=null==e||null===(n=e.children)||void 0===n?void 0:n[i];a&&e.scrollTo({left:a.offsetLeft})}t.handleNavLeft=function(e){return s(e,"left")},t.handleNavRight=function(e){return s(e,"right")},t.times=function(e,t){return new Array(e).fill(null).map((function(e,n){return t(n)}))},t.handleButtonPress=function(e,t){"Enter"!==e.key&&"Spacebar"!==e.key&&" "!==e.key||t()}},"ANq+":function(e,t,n){"use strict";var i=this&&this.__makeTemplateObject||function(e,t){return Object.defineProperty?Object.defineProperty(e,"raw",{value:t}):e.raw=t,e};Object.defineProperty(t,"__esModule",{value:!0}),t.otherSubsHeaderWrapperStyle=t.otherSubsCtaIconWrapperStyle=t.otherSubsDividerStyle=t.otherSubsCtaActionTextContainerStyle=t.otherSubsCtaContainerStyle=t.otherSubsHeadingClassStyle=t.otherSubsHeadingClassName=t.otherSubsClassName=t.subHeader=t.header=t.headerLogo=t.headerContainer=t.billingTerms=t.button=t.ctaContainer=t.mainContent=t.headerText=void 0;var a,o,r,s,l,c,u,d,p,f,m,h,g,y,v,b,_,w=n("Jqp9"),x=n("lVLo");t.headerText=(0,w.css)(a||(a=i(["\n  font-family: ",";\n  font-size: 15px;\n  font-weight: ",";\n  line-height: 100%;\n  text-align: left;\n  @media (min-width: 500px) {\n    text-align: center;\n  }\n  width: 100%;\n"],["\n  font-family: ",";\n  font-size: 15px;\n  font-weight: ",";\n  line-height: 100%;\n  text-align: left;\n  @media (min-width: 500px) {\n    text-align: center;\n  }\n  width: 100%;\n"])),x.fonts.franklin,x.fontWeights.medium),t.mainContent=(0,w.css)(o||(o=i(["\n  display: flex;\n  align-items: center;\n  background-color: ",";\n  font-family: ",";\n  border-radius: 5px;\n  padding: 16px 20px 20px;\n  flex-direction: column;\n  margin: 0 auto 20px;\n  align-self: flex-start;\n  max-width: 240px;\n\n  @media (min-width: ","px) {\n    max-width: unset;\n    width: calc(100% - 80px);\n  }\n\n  @media (min-width: 500px) {\n    flex-direction: row;\n    align-items: center;\n    max-width: 1180px;\n    width: calc(100% - 80px);\n    justify-content: space-between;\n    gap: 24px;\n  }\n\n  @media (min-width: ","px) {\n    width: calc(100% - 104px);\n    padding: 32px;\n  }\n\n  @media (min-width: ","px) {\n    width: calc(100% - 120px);\n    padding: 40px;\n  }\n"],["\n  display: flex;\n  align-items: center;\n  background-color: ",";\n  font-family: ",";\n  border-radius: 5px;\n  padding: 16px 20px 20px;\n  flex-direction: column;\n  margin: 0 auto 20px;\n  align-self: flex-start;\n  max-width: 240px;\n\n  @media (min-width: ","px) {\n    max-width: unset;\n    width: calc(100% - 80px);\n  }\n\n  @media (min-width: 500px) {\n    flex-direction: row;\n    align-items: center;\n    max-width: 1180px;\n    width: calc(100% - 80px);\n    justify-content: space-between;\n    gap: 24px;\n  }\n\n  @media (min-width: ","px) {\n    width: calc(100% - 104px);\n    padding: 32px;\n  }\n\n  @media (min-width: ","px) {\n    width: calc(100% - 120px);\n    padding: 40px;\n  }\n"])),x.colors.veryDarkGrey,x.fonts.franklin,x.widths.verySmall,x.widths.medium,x.widths.mediumLarge),t.ctaContainer=(0,w.css)(r||(r=i(["\n  display: flex;\n  flex-direction: column;\n  width: 100%;\n  align-items: center;\n  min-width: 295px;\n\n  @media (min-width: 500px) {\n    min-width: unset;\n    width: 150px;\n    justify-content: center;\n    align-items: end;\n  }\n\n  @media (min-width: ","px) {\n    flex: 0;\n    margin-top: 0;\n  }\n"],["\n  display: flex;\n  flex-direction: column;\n  width: 100%;\n  align-items: center;\n  min-width: 295px;\n\n  @media (min-width: 500px) {\n    min-width: unset;\n    width: 150px;\n    justify-content: center;\n    align-items: end;\n  }\n\n  @media (min-width: ","px) {\n    flex: 0;\n    margin-top: 0;\n  }\n"])),x.widths.medium),t.button=(0,w.css)(s||(s=i(["\n  text-decoration: none;\n  font-size: 16px;\n  font-weight: ",";\n  line-height: 150%;\n  color: ",";\n  background-color: ",";\n\n  display: flex;\n  flex-direction: column;\n  text-align: center;\n  border-radius: 3px;\n  cursor: pointer;\n  width: 220px;\n  height: 44px;\n  padding: 10px;\n  letter-spacing: -0.05px;\n  flex: 0;\n  margin-bottom: 12px;\n\n  @media (min-width: ","px) {\n    width: calc(100% - 20px);\n  }\n\n  @media (min-width: 500px) {\n    width: 130px;\n  }\n\n  @media (min-width: ","px) {\n    align-self: left;\n    flex: 1;\n  }\n"],["\n  text-decoration: none;\n  font-size: 16px;\n  font-weight: ",";\n  line-height: 150%;\n  color: ",";\n  background-color: ",";\n\n  display: flex;\n  flex-direction: column;\n  text-align: center;\n  border-radius: 3px;\n  cursor: pointer;\n  width: 220px;\n  height: 44px;\n  padding: 10px;\n  letter-spacing: -0.05px;\n  flex: 0;\n  margin-bottom: 12px;\n\n  @media (min-width: ","px) {\n    width: calc(100% - 20px);\n  }\n\n  @media (min-width: 500px) {\n    width: 130px;\n  }\n\n  @media (min-width: ","px) {\n    align-self: left;\n    flex: 1;\n  }\n"])),x.fontWeights.semiBold,x.colors.veryDarkGrey,x.colors.white,x.widths.verySmall,x.widths.medium),t.billingTerms=(0,w.css)(l||(l=i(["\n  width: 100%;\n  font-family: ",";\n  font-weight: 500;\n  line-height: 18.2px;\n  font-size: 14px;\n  color: ",";\n  text-align: left;\n\n  @media (min-width: ","px) {\n    text-align: center;\n  }\n"],["\n  width: 100%;\n  font-family: ",";\n  font-weight: 500;\n  line-height: 18.2px;\n  font-size: 14px;\n  color: ",";\n  text-align: left;\n\n  @media (min-width: ","px) {\n    text-align: center;\n  }\n"])),x.fonts.franklin,x.colors.gainsboro,x.widths.medium),t.headerContainer=(0,w.css)(c||(c=i(["\n  align-self: start;\n  color: ",";\n  margin: 0 auto 16px;\n\n  @media (min-width: ","px) {\n    margin: 0;\n  }\n\n  @media (min-width: 768px) {\n    max-width: 640px;\n  }\n"],["\n  align-self: start;\n  color: ",";\n  margin: 0 auto 16px;\n\n  @media (min-width: ","px) {\n    margin: 0;\n  }\n\n  @media (min-width: 768px) {\n    max-width: 640px;\n  }\n"])),x.colors.white,x.widths.medium),t.headerLogo=(0,w.css)(u||(u=i(["\n  display: none;\n\n  @media (min-width: 845px) {\n    display: block;\n    & > svg {\n      width: 154px;\n      height: 20px;\n    }\n  }\n"],["\n  display: none;\n\n  @media (min-width: 845px) {\n    display: block;\n    & > svg {\n      width: 154px;\n      height: 20px;\n    }\n  }\n"]))),t.header=(0,w.css)(d||(d=i(["\n  font-family: ",";\n  font-size: 16px;\n  font-weight: ",";\n  line-height: 131.25%;\n  margin-top: 0;\n  margin-bottom: 0;\n\n  text-align: left;\n  display: inline-block;\n\n  @media (min-width: 500px) {\n    margin-bottom: 0px;\n  }\n\n  @media (min-width: ","px) {\n    font-size: 21px;\n    line-height: 119%;\n  }\n"],["\n  font-family: ",";\n  font-size: 16px;\n  font-weight: ",";\n  line-height: 131.25%;\n  margin-top: 0;\n  margin-bottom: 0;\n\n  text-align: left;\n  display: inline-block;\n\n  @media (min-width: 500px) {\n    margin-bottom: 0px;\n  }\n\n  @media (min-width: ","px) {\n    font-size: 21px;\n    line-height: 119%;\n  }\n"])),x.fonts.franklin,x.fontWeights.semiBold,x.widths.medium),t.subHeader=(0,w.css)(p||(p=i(["\n  display: inline;\n  font-family: ",";\n  font-size: 16px;\n  line-height: 131.25%;\n  font-weight: ",";\n\n  @media (min-width: ","px) {\n    font-size: 21px;\n    line-height: 119%;\n  }\n"],["\n  display: inline;\n  font-family: ",";\n  font-size: 16px;\n  line-height: 131.25%;\n  font-weight: ",";\n\n  @media (min-width: ","px) {\n    font-size: 21px;\n    line-height: 119%;\n  }\n"])),x.fonts.franklin,x.fontWeights.light,x.widths.medium),t.otherSubsClassName=(0,w.css)(f||(f=i(["\n  border-top: 1px solid ",";\n  right: 0px;\n"],["\n  border-top: 1px solid ",";\n  right: 0px;\n"])),x.colors.veryDarkGrey),t.otherSubsHeadingClassName=(0,w.css)(m||(m=i(["\n  width: 100%;\n  font-family: ",";\n  border-radius: 0;\n  transition:\n    background-color 250ms linear,\n    0.15s padding ease-out;\n"],["\n  width: 100%;\n  font-family: ",";\n  border-radius: 0;\n  transition:\n    background-color 250ms linear,\n    0.15s padding ease-out;\n"])),x.fonts.franklin),t.otherSubsHeadingClassStyle=(0,w.css)(h||(h=i(["\n  display: flex;\n  align-items: center;\n  justify-content: space-between;\n  height: 100%;\n  min-width: 244px;\n  max-width: 1248px;\n  /* stylelint-disable-next-line declaration-no-important */\n  -webkit-font-smoothing: antialiased !important;\n\n  margin: 0 20px;\n\n  @media (min-width: ","px) {\n    margin: 0 23px;\n  }\n\n  @media (min-width: 1262px) {\n    margin: 0 auto;\n  }\n"],["\n  display: flex;\n  align-items: center;\n  justify-content: space-between;\n  height: 100%;\n  min-width: 244px;\n  max-width: 1248px;\n  /* stylelint-disable-next-line declaration-no-important */\n  -webkit-font-smoothing: antialiased !important;\n\n  margin: 0 20px;\n\n  @media (min-width: ","px) {\n    margin: 0 23px;\n  }\n\n  @media (min-width: 1262px) {\n    margin: 0 auto;\n  }\n"])),x.widths.medium),t.otherSubsCtaContainerStyle=(0,w.css)(g||(g=i(["\n  display: flex;\n  justify-content: space-between;\n  flex-direction: row;\n\n  width: 36px;\n\n  @media (min-width: ","px) {\n    width: 44.5px;\n  }\n\n  @media (min-width: 500px) {\n    width: 16px;\n  }\n"],["\n  display: flex;\n  justify-content: space-between;\n  flex-direction: row;\n\n  width: 36px;\n\n  @media (min-width: ","px) {\n    width: 44.5px;\n  }\n\n  @media (min-width: 500px) {\n    width: 16px;\n  }\n"])),x.widths.verySmall),t.otherSubsCtaActionTextContainerStyle=(0,w.css)(y||(y=i(["\n  display: none;\n"],["\n  display: none;\n"]))),t.otherSubsDividerStyle=(0,w.css)(v||(v=i(["\n  @media (min-width: 500px) {\n    display: none;\n  }\n"],["\n  @media (min-width: 500px) {\n    display: none;\n  }\n"]))),t.otherSubsCtaIconWrapperStyle=(0,w.css)(b||(b=i(["\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  background-color: transparent;\n\n  height: 55px;\n  z-index: 1;\n  border-width: 0px;\n  padding-inline: 0px;\n\n  svg {\n    height: 16px;\n    margin: auto 0px auto auto;\n    width: 16px;\n  }\n"],["\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  background-color: transparent;\n\n  height: 55px;\n  z-index: 1;\n  border-width: 0px;\n  padding-inline: 0px;\n\n  svg {\n    height: 16px;\n    margin: auto 0px auto auto;\n    width: 16px;\n  }\n"]))),t.otherSubsHeaderWrapperStyle=(0,w.css)(_||(_=i(["\n  width: 100%;\n"],["\n  width: 100%;\n"])))},AQjK:function(e,t,n){"use strict";var i=this&&this.__createBinding||(Object.create?function(e,t,n,i){void 0===i&&(i=n);var a=Object.getOwnPropertyDescriptor(t,n);a&&!("get"in a?!t.__esModule:a.writable||a.configurable)||(a={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,i,a)}:function(e,t,n,i){void 0===i&&(i=n),e[i]=t[n]}),a=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&i(t,e,n);return a(t,e),t},r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var s=o(n("q1tI")),l=r(n("17x9")),c=r(n("6bIn")),u=o(n("NGmU"));function d(e){var t=e.card,n=e.onResize,i=s.default.useRef(null);return(0,c.default)((function(){i.current&&n&&n(i.current.clientHeight)}),300),(0,s.useEffect)((function(){i.current&&n&&n(i.current.clientHeight)}),[i,n]),s.default.createElement("div",{ref:i,className:u.styledDockContent},t)}d.propTypes={card:l.default.node,onResize:l.default.func},d.defaultProps={card:null,onResize:function(){}},t.default=d},ARn7:function(e,t,n){"use strict";var i=n("TqRt"),a=n("cDf5");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=i(n("lwsE")),r=i(n("W8MJ")),s=i(n("a1gu")),l=i(n("Nsbk")),c=i(n("7W2i")),u=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=a(e)&&"function"!=typeof e)return{default:e};var n=p(t);if(n&&n.has(e))return n.get(e);var i={__proto__:null},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var r in e)if("default"!==r&&{}.hasOwnProperty.call(e,r)){var s=o?Object.getOwnPropertyDescriptor(e,r):null;s&&(s.get||s.set)?Object.defineProperty(i,r,s):i[r]=e[r]}return i.default=e,n&&n.set(e,i),i}(n("q1tI")),d=(i(n("17x9")),i(n("FQbI")));function p(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(p=function(e){return e?n:t})(e)}function f(e,t,n){return t=(0,l.default)(t),(0,s.default)(e,function(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return function(){return!!e}()}()?Reflect.construct(t,n||[],(0,l.default)(e).constructor):t.apply(e,n))}var m=t.default=function(e){function t(){var e;(0,o.default)(this,t);for(var n=arguments.length,i=new Array(n),a=0;a<n;a++)i[a]=arguments[a];return(e=f(this,t,[].concat(i))).state={hasError:!1},e}return(0,c.default)(t,e),(0,r.default)(t,[{key:"componentDidCatch",value:function(){this.setState({hasError:!0})}},{key:"render",value:function(){return this.state.hasError?u.default.createElement(d.default,{ratio:this.props.ratio,width:this.props.width,height:this.props.height}):this.props.children}}])}(u.Component);m.defaultProps={ratio:"16:9",width:"600px",height:"auto"},m.displayName="ErrorBoundary"},ATQY:function(e,t,n){"use strict";var i=n("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.isAnyWorkLive=c,t.isWebkit=function(){var e,t,n=null===(e=navigator)||void 0===e?void 0:e.userAgent;return/\b(iPad|iPhone|iPod)\b/.test(n)&&/WebKit/.test(n)&&!/Edge/.test(n)&&!(null!==(t=window)&&void 0!==t&&t.MSStream)},t.withDerivedLiveStatus=function(e){if(null==e?void 0:e.some((function(e){return(null==e?void 0:e.status)===r.PrimaryAssetStatus.LIVE})))return e;var t=null==e?void 0:e.findIndex((function(e){return c(null==e?void 0:e.asset)&&!(null!=e&&e.status)}));if(-1!==t){var n=(0,o.default)(e);return n[t]=l(l({},e[t]),{},{status:r.PrimaryAssetStatus.LIVE}),n}return e};var a=i(n("lSNA")),o=i(n("RIqP")),r=n("D5MC");function s(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function l(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?s(Object(n),!0).forEach((function(t){(0,a.default)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function c(e){var t;return Boolean((null==e?void 0:e.live)||(null==e?void 0:e.active)&&(null==e||null===(t=e.url)||void 0===t?void 0:t.includes("/live/")))}},AWLv:function(e,t,n){"use strict";var i=n("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=i(n("J4zp")),o=n("q1tI");t.default=function(e){var t=e.root,n=void 0===t?null:t,i=e.rootMargin,r=e.threshold,s=void 0===r?0:r,l=(0,o.useState)({}),c=(0,a.default)(l,2),u=c[0],d=c[1],p=(0,o.useState)(null),f=(0,a.default)(p,2),m=f[0],h=f[1],g="undefined"!=typeof window?(0,o.useRef)(new IntersectionObserver((function(e){var t=(0,a.default)(e,1)[0];return d(t)}),{root:n,rootMargin:i,threshold:s})):null;return(0,o.useEffect)((function(){var e=null==g?void 0:g.current;return null==e||e.disconnect(),m&&(null==e||e.observe(m)),function(){return null==e?void 0:e.disconnect()}}),[m,g]),[h,u]}},AWWW:function(e,t,n){"use strict";var i=n("TqRt"),a=n("cDf5");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=i(n("lwsE")),r=i(n("W8MJ")),s=i(n("a1gu")),l=i(n("Nsbk")),c=i(n("7W2i")),u=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=a(e)&&"function"!=typeof e)return{default:e};var n=h(t);if(n&&n.has(e))return n.get(e);var i={__proto__:null},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var r in e)if("default"!==r&&{}.hasOwnProperty.call(e,r)){var s=o?Object.getOwnPropertyDescriptor(e,r):null;s&&(s.get||s.set)?Object.defineProperty(i,r,s):i[r]=e[r]}return i.default=e,n&&n.set(e,i),i}(n("q1tI")),d=(i(n("17x9")),i(n("PxMw"))),p=i(n("0oBV")),f=n("X+xt"),m=n("0gvE");function h(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(h=function(e){return e?n:t})(e)}function g(e,t,n){return t=(0,l.default)(t),(0,s.default)(e,function(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return function(){return!!e}()}()?Reflect.construct(t,n||[],(0,l.default)(e).constructor):t.apply(e,n))}var y=function(e){function t(){var e;(0,o.default)(this,t);for(var n=arguments.length,i=new Array(n),a=0;a<n;a++)i[a]=arguments[a];return(e=g(this,t,[].concat(i))).handleMessage=function(t){var n=e.props.setAttrs,i=t.data;t.origin===(0,f.getAttributeHost)()&&i&&e.intervalId&&i.postbackId===e.intervalId&&("received"===i.status?clearInterval(e.intervalId):"created"===i.status&&i.slug&&(n({attributeSlug:i.slug}),e.attributeWindow.close()))},e.postToAttribute=function(){e.attributeWindow=(0,f.openAttribute)(),e.intervalId=setInterval((function(){null!==e.attributeWindow.window?e.attributeWindow.postMessage((0,f.getAttributeConfig)(e.intervalId),(0,f.getAttributeHost)()):clearInterval(e.intervalId)}),1e3)},e}return(0,c.default)(t,e),(0,r.default)(t,[{key:"componentDidMount",value:function(){window.addEventListener("message",this.handleMessage)}},{key:"componentWillUnmount",value:function(){window.removeEventListener("message",this.handleMessage)}},{key:"render",value:function(){var e=this.props,t=e.attributeSlug,n=e.children,i=e.isInAMP,a=e.isInHybrid;return i||a?null:u.default.createElement("div",null,u.default.createElement("div",{className:m.askWrapperClass},n),u.default.createElement("div",{className:m.attributeWrapperClass},t?u.default.createElement(u.default.Fragment,null,u.default.createElement("p",null,u.default.createElement("strong",null,"Attribute slug"),":"," ",t),u.default.createElement("p",null,"Change the existing Attribute slug by clicking the button below."),u.default.createElement("div",{className:m.buttonWrapperClass},u.default.createElement(d.default,{theme:"action",onClick:this.postToAttribute},"Update Attribute Slug"))):u.default.createElement(u.default.Fragment,null,u.default.createElement("p",null,u.default.createElement("strong",null,"No Attribute slug yet!")),u.default.createElement("p",null,"To complete the Ask block, click the button below to open Attribute, where you’ll be prompted to type a slug. Once you’ve completed that step, the Attribute window will close and Oak will be updated with the slug you created."),u.default.createElement("div",{className:m.buttonWrapperClass},u.default.createElement(d.default,{theme:"action",onClick:this.postToAttribute},"Get Attribute Slug")))))}}])}(u.Component);y.defaultProps={attributeSlug:null,isInAMP:!1,isInHybrid:!1},y.displayName="Ask";t.default=(0,p.default)(y)},Ad4I:function(e,t,n){"use strict";var i=this&&this.__createBinding||(Object.create?function(e,t,n,i){void 0===i&&(i=n);var a=Object.getOwnPropertyDescriptor(t,n);a&&!("get"in a?!t.__esModule:a.writable||a.configurable)||(a={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,i,a)}:function(e,t,n,i){void 0===i&&(i=n),e[i]=t[n]}),a=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&i(t,e,n);return a(t,e),t},r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var s=r(n("q1tI")),l=r(n("BfjZ")),c=o(n("CLqb")),u=n("Wj/z");t.default=function(e){var t,n=e.unit;return s.default.createElement(s.default.Fragment,null,s.default.createElement("div",{className:c.topperClass,"data-testid":"onsite-messaging-unit-".concat(null===u.config||void 0===u.config?void 0:u.config.name),"data-campaign":null==n?void 0:n.campaign,"data-audience":null==n?void 0:n.audience},s.default.createElement("span",{className:c.topperWrapClass},null===(t=null==n?void 0:n.content)||void 0===t?void 0:t.text),s.default.createElement(l.default,null)),s.default.createElement("hr",{className:c.longHorizontalRule}))}},Ae6e:function(e,t,n){"use strict";var i=n("TqRt"),a=n("cDf5");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=i(n("lSNA")),r=i(n("J4zp")),s=y(n("q1tI")),l=(i(n("17x9")),n("Jqp9")),c=i(n("aanX")),u=n("3sMT"),d=n("p3S2"),p=i(n("ZHMA")),f=i(n("7GK/")),m=i(n("JwCr")),h=y(n("a/Il"));function g(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(g=function(e){return e?n:t})(e)}function y(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=a(e)&&"function"!=typeof e)return{default:e};var n=g(t);if(n&&n.has(e))return n.get(e);var i={__proto__:null},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var r in e)if("default"!==r&&{}.hasOwnProperty.call(e,r)){var s=o?Object.getOwnPropertyDescriptor(e,r):null;s&&(s.get||s.set)?Object.defineProperty(i,r,s):i[r]=e[r]}return i.default=e,n&&n.set(e,i),i}function v(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function b(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?v(Object(n),!0).forEach((function(t){(0,o.default)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):v(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var _=(0,s.forwardRef)((function(e,t){var n=e.arrowPosition,i=e.onCloseTooltip,a=e.storageKey,g=e.tooltipOpen,y=e.setTooltipOpen,v=e.className,_=e.totalTimesToShow,w=e.frequencyInHours,x=(0,s.useState)(!1),k=(0,r.default)(x,2),O=k[0],T=k[1],C=(0,s.useState)(!1),E=(0,r.default)(C,2),S=E[0],P=E[1],I=a||d.LIVE_ALERT_TOGGLE_DEFAULTS.tooltipStorageKey;(0,s.useEffect)((function(){var e;null!==(e=document)&&void 0!==e&&e.querySelector(".ANDROID")&&T(!0)}),[]);var M=(0,s.useCallback)((function(e){if(null==e||e.stopPropagation(),y(!1),!p.default)return null;var t=p.default.getItem(I),n={};return t&&(n=b(b({},n=JSON.parse(t)),{},{dismissed:!0})),i&&i(),p.default.setItem(I,JSON.stringify(n))}),[I,i,y]),A=(0,s.useCallback)((function(){var e,t={},n=p.default.getItem(I);return n?(t=JSON.parse(n)).seen<_&&(e=t.lastSeen,(0,f.default)().diff(e,"h")>=w)&&!t.dismissed&&(t={seen:t.seen+1,lastSeen:(0,f.default)(),dismissed:t.dismissed},p.default.setItem(I,JSON.stringify(t)),!0):(t={seen:1,dismissed:!1,lastSeen:(0,f.default)()},p.default.setItem(I,JSON.stringify(t)),!0)}),[I,w,_]);return(0,s.useEffect)((function(){S||(A()&&y(!0),P(!0))}),[S,A,y]),(0,s.useImperativeHandle)(t,(function(){return{closeTooltip:M}}),[M]),g&&s.default.createElement("div",{className:(0,l.cx)(h.tooltipClass,(0,o.default)({},h.arrowTopPositionClass,"top"===n),v)},s.default.createElement("div",{className:h.tooltipContentWrapperClass},s.default.createElement("p",{className:h.tooltipContentClass},"Turn on notifications to ",s.default.createElement(m.default,null,"receive alerts as stories develop")," in real-time."," ",O?"":"You can manage alerts in your app’s settings."),s.default.createElement("button",{type:"button",className:h.closeIconButtonClass,onClick:M,"aria-label":"close alert toggle tooltip"},s.default.createElement(c.default,{className:h.closeIconClass,stroke:u.color.content.primary,strokeWidth:"1.5"}))))}));_.defaultProps={arrowPosition:"bottom",storageKey:void 0,onCloseTooltip:void 0,className:void 0,frequencyInHours:24,totalTimesToShow:3};t.default=_},AeOL:function(e,t,n){"use strict";var i=n("gcR/"),a=n.n(i),o=n("q1tI"),r=n("fZdH"),s=n("boCj"),l=n("7VSS"),c=n("Lkij"),u=function(e){var t,n=e.testName,i=e.holdoutVariant,u=e.className,d=e.children,p=Object(r.a)(),f=Object(l.a)(),m=(null!==(t=null==p?void 0:p[n])&&void 0!==t?t:{}).variant,h=Object(o.useMemo)((function(){return new RegExp(i).test(m)}),[i,m]);if(!f)return a()("div",{className:u},void 0,d);return"function"==typeof d?a()(s.InView,{className:u,triggerOnce:!0},void 0,(function(e){var t=e.ref,n=e.inView;return d({isHoldout:h,ref:t,inView:n})})):a()(s.InView,{onChange:function(e){e&&Object(c.b)(n)},className:u,triggerOnce:!0},void 0,h?null:d)};u.displayName="WithHoldout",u.defaultProps={testName:void 0,className:void 0},t.a=u},AfrD:function(e,t,n){"use strict";var i=n("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=i(n("wnaz"));t.default=a.default},AhCu:function(e,t,n){"use strict";var i=n("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.opinionClass=t.newsletterNameContainerClass=t.newsletterNameClass=t.kickerContainerClass=t.headingClass=t.headerContainerClass=t.ampNewsletterNameClass=void 0;var a=n("Jqp9"),o=i(n("wXC7")),r=n("3sMT");t.headerContainerClass=(0,a.css)("#header-onsite-newsletter-container{margin-top:0;",o.default.breakpoint.medium,"{margin-top:35px;}}"),t.newsletterNameClass=(0,a.css)("font-family:",o.default.font.karnakBase,";font-weight:normal;text-transform:capitalize;font-size:",o.default.font.size(20.8),";line-height:",o.default.font.size(20.8),";margin-bottom:25px;text-align:center;",o.default.breakpoint.small,"{font-size:",o.default.font.size(24),";}"),t.ampNewsletterNameClass=(0,a.css)("margin-top:0;"),t.newsletterNameContainerClass=(0,a.css)("border-bottom:1px solid ",r.color.stroke.quaternary,";display:flex;flex-direction:column;margin-bottom:25px;align-items:center;"),t.kickerContainerClass=(0,a.css)("display:flex;flex-direction:column;align-items:center;margin-bottom:2px;#label-onsite-newsletter{font-family:",o.default.font.franklinBase,";font-size:",o.default.font.size(13),";line-height:",o.default.font.size(24),";",o.default.breakpoint.small,"{line-height:",o.default.font.size(14.4),";}}"),t.opinionClass=(0,a.css)("& [href*='opinion']{margin-bottom:13px;display:inline-block;}margin-bottom:13px;"),t.headingClass=(0,a.css)("#header-onsite-newsletter-headline h1::before{display:none;}")},ApQM:function(e,t,n){"use strict";var i=n("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.showNewsStatus=t.default=void 0;var a=i(n("q1tI")),o=(i(n("17x9")),i(n("I0Yx"))),r=["BREAKING","DEVELOPING"],s=t.showNewsStatus=function(e){return e&&r.includes(e.toUpperCase())},l=function(e){var t=e.newsStatus;return s(t)?a.default.createElement(o.default,null,t):null};l.defaultProps={newsStatus:"STANDARD"};t.default=l},AtQq:function(e,t,n){"use strict";n.d(t,"a",(function(){return qi})),n.d(t,"c",(function(){return Vi})),n.d(t,"b",(function(){return Gi}));var i,a=n("VkAN"),o=n.n(a),r=n("eFc+"),s=n.n(r),l=n("JtDR"),c=n("NVrK"),u=n("C+GW"),d=n("Ymd4"),p=n("EssT"),f=n("4T40"),m=n("gcR/"),h=n.n(m),g=n("q1tI"),y=n.n(g),v=n("7E81"),b=n.n(v),_=function(e){var t=e.data;return t?h()(b.a,{columnsMobile:t.columnsMobile,gutterMobile:t.gutterMobile,columnsDesktop:t.columnsDesktop,gutterDesktop:t.gutterDesktop,size:t.size,caption:t.caption,credit:t.credit,media:t.gridMedia}):null};_.displayName="GridBlock",_.fragments={data:s()(i||(i=o()(['\n    fragment GridBlock_data on GridBlock {\n      columnsMobile\n      gutterMobile\n      columnsDesktop\n      gutterDesktop\n      size\n      caption\n      credit\n      gridMedia: media {\n        id\n        ... on Image {\n          __typename\n          id\n          imageType\n          url\n          uri\n          credit\n          legacyHtmlCaption\n          altText\n          crops(\n            renditionNames: [\n              "articleLarge"\n              "jumbo"\n              "superJumbo"\n              "popup"\n              "square320"\n              "mobileMasterAt3x"\n            ]\n          ) {\n            name\n            renditions {\n              url\n              name\n              width\n              height\n            }\n          }\n          caption {\n            text\n          }\n        }\n      }\n    }\n  '])))};var w,x=_,k=n("WPUH"),O=n("3ywf"),T=n("H1QR"),C=n("IX5K"),E=n("wB9J"),S=n("pVnL"),P=n.n(S),I=n("tA6d"),M=n.n(I),A=n("Kn2l"),j=n("Ogzn"),N=n("369f"),L=n("B2Q+"),D=n("XlcC"),R=n.n(D),B=n("HTd6"),z=function(e,t){if(!Array.isArray(e)||!e.length)return null;var n=Object(D.createMapInlineUnionWithOptions)({internalLinkTrackingParams:t});return e.map(n)},F=function(e){var t,n,i,a=e.data,o=e.className,r=e.linkTrackingParamOverrides,s=e.renderRelated,l=e.isLazy,c=e.showImageCredits;if(!a)return null;var u,d={displayStyle:(null==a||null===(t=a.editableRelatedLinksDisplayStyle)||void 0===t?void 0:t.toLowerCase())||"standard",title:z(null==a||null===(n=a.header)||void 0===n?void 0:n.title),description:z(null==a||null===(i=a.header)||void 0===i?void 0:i.description),related:(u=null==a?void 0:a.writtenThruRelated,Array.isArray(u)?!u.length>0?[]:null==u?void 0:u.map((function(e){var t,n=(null==e?void 0:e.related)||null;if(!n)return null;var i=(null==n?void 0:n.promotionalMedia)||null,a=(null==n?void 0:n.promotionalHeadline)||"",o=(null==n?void 0:n.promotionalSummary)||"",r=(null==n?void 0:n.headline)||{default:"",seo:""},s=(null==n?void 0:n.url)||"",l=(null==n?void 0:n.summary)||"",c=null==n?void 0:n.targetUrl,u=null==n?void 0:n.firstPublished,d=(null==e||null===(t=e.writeThruHeadline)||void 0===t?void 0:t.map((function(e){return e.text})).join(""))||null;return{headline:{default:d||(null==r?void 0:r.default),seo:d||(null==r?void 0:r.seo)},summary:l,promotionalHeadline:a,promotionalSummary:o,targetUrl:c,url:s,firstPublished:u,promotionalMedia:i}})).filter((function(e){return null!==e})):[])},p={className:o,linkTrackingParamOverrides:r,renderRelated:s,isLazy:l,showImageCredits:c,data:d},f=p.data,m=f.displayStyle,g=f.title,v=f.description,b=f.related;if(!b.length>0)return null;var _=b.map((function(e){var t,n,i,a,o,r=(null==e||null===(t=e.promotionalMedia)||void 0===t?void 0:t.credit)||(null==e||null===(n=e.promotionalMedia)||void 0===n||null===(i=n.promotionalMedia)||void 0===i?void 0:i.credit),s=(null==e||null===(a=e.headline)||void 0===a?void 0:a.default)||(null==e?void 0:e.promotionalHeadline),l=null==e?void 0:e.url,c=null==e?void 0:e.firstPublished;return y.a.createElement(j.a,P()({},p,{displayStyle:m,headline:s,summary:null,media:null===(o=Object(j.b)(e))||void 0===o?void 0:o.url,caption:r,url:l,pubDate:c}))}));return h()(N.a,{offset:500,isLazy:!!l&&!Object(L.b)()},void 0,y.a.createElement(M.a,P()({},p,{related:_,displayStyle:m,className:o}),g&&h()(A.RelatedLinksHeadline,{},void 0,g),v&&h()(A.RelatedLinksDescription,{},void 0,v)))};F.displayName="EditableRelatedLinksBlock",F.defaultProps={data:null,className:void 0,linkTrackingParamOverrides:{},renderRelated:void 0,isLazy:!0,showImageCredits:!1},F.fragments={data:s()(w||(w=o()(["\n    fragment EditableRelatedLinksBlock_data on EditableRelatedLinksBlock {\n      linkCount\n      editableRelatedLinksDisplayStyle: displayStyle\n      header {\n        isDisplayed\n        title {\n          ...TextInline_content\n        }\n        description {\n          ...TextInline_content\n        }\n      }\n      writtenThruRelated {\n        kicker\n        related {\n          ...SharedRelatedLinkBlock_data\n        }\n        promotionalProperties {\n          media {\n            __typename\n          }\n        }\n        writeThruHeadline {\n          ...TextInline_content\n        }\n      }\n    }\n    ","\n    ","\n  "])),B.a.fragments.content,j.a.fragments.data)};var U,H=F,W=n("4nBj"),q=n("uoyi"),V=n("Oc+P"),G=n("uc/3"),Y=n("4r6p"),X=n("Vn11"),Z=n("DpJz"),J=n("rNEd"),K=n("yEZI"),$=n.n(K);function Q(e){var t=e.data.legacyTableHtml,n=e.className;return h()($.a,{className:n},void 0,h()("div",{dangerouslySetInnerHTML:{__html:t}}))}Q.displayName="LegacyTableBlock",Q.defaultProps={data:null,className:void 0},Q.fragments={data:s()(U||(U=o()(["\n    fragment LegacyTableBlock_data on LegacyTableBlock {\n      legacyTableHtml: html\n    }\n  "])))};var ee,te=n("5OxE"),ne=n("aVGo"),ie=n.n(ne),ae=n("Jqp9"),oe=n("V7ea"),re={ImageBlock:k.a,VideoBlock:G.a},se=Object(ae.cx)(oe.vsMediaClass,oe.vsMediaImageBlockCreditClass),le=function(e){var t=e.data,n=Object(ae.useTheme)();if(!t)return null;var i=re[t.__typename];return function(e){return"ImageBlock"===e.__typename}(t)?y.a.createElement(i,{data:t,className:se,imageBlockClass:se,imageClass:se,containerClass:se,showCaption:!1,smallNoCaptionClass:oe.vsMediaSmallNoCaptionClass({theme:n})}):function(e){return"VideoBlock"===e.__typename}(t)?y.a.createElement(i,{data:t,className:oe.vsMediaClass,creditClass:oe.vsMediaViVideoBlockCreditClass,showCaption:!1}):null};le.fragments={data:s()(ee||(ee=o()(["\n    fragment VisualStackBlockMedia_data on VisualStackBlockMedia {\n      __typename\n      ...ImageBlock_data\n      ...VideoBlock_data\n    }\n\n    ","\n    ","\n  "])),k.a.fragments.data,G.a.fragments.data)};var ce,ue=le,de=n("1/zF"),pe=n("KzWH"),fe=function(e){var t,n,i=e.data;if(!i||!(i.content&&i.content.length>0||i.vsMedia||i.vsLabel||i.heading))return null;var a=i.heading,o=i.vsLabel,r=i.content,s=i.vsMedia,l=null!=a&&a.content&&a.content.length>0?null===(t=a.content[0])||void 0===t?void 0:t.text:"",c=null!=o&&o.content&&o.content.length>0?null===(n=o.content[0])||void 0===n?void 0:n.text:"";return h()(ie.a,{content:r,heading:l,label:c,headingBaseStyle:de.b,labelBaseStyle:pe.a},void 0,h()(ue,{data:s}))};fe.displayName="VisualStackBlock",fe.fragments={data:s()(ce||(ce=o()(["\n    fragment VisualStackBlock_data on VisualStackBlock {\n      content {\n        __typename\n        ...ParagraphBlock_data\n      }\n      vsMedia: media {\n        __typename\n        ...VisualStackBlockMedia_data\n      }\n      heading {\n        __typename\n        ...Heading2Block_data\n      }\n      vsLabel: label {\n        __typename\n        ...ParagraphBlock_data\n      }\n    }\n\n    ","\n  "])),ue.fragments.data)};var me,he=fe,ge=n("kVbu"),ye=n.n(ge),ve=function(e){var t,n,i,a,o=e.data;if(null==o||null===(t=o.content)||void 0===t||!t.length)return null;var r=o.dtTitle,s=o.dtCaption,l=o.content,c=o.media,u=o.dtSource,d=o.pageNumber,p=null==r||null===(n=r.content[0])||void 0===n?void 0:n.text,f=null==s||null===(i=s.content[0])||void 0===i?void 0:i.text,m=null==u||null===(a=u.content[0])||void 0===a?void 0:a.text,g=null==c?void 0:c.url;return h()(ye.a,{title:p,caption:f,content:l,source:m,sourceUrl:g,pageNumber:null!=d?d:void 0})};ve.displayName="DocumentTearBlock",ve.fragments={data:s()(me||(me=o()(["\n    fragment DocumentTearBlock_data on DocumentTearBlock {\n      content {\n        __typename\n        ...ParagraphBlock_data\n      }\n      dtTitle: title {\n        __typename\n        ...Heading3Block_data\n      }\n      dtCaption: caption {\n        __typename\n        ...DetailBlock_data\n      }\n      dtSource: source {\n        __typename\n        ...DetailBlock_data\n      }\n      media {\n        id\n        ... on Interactive {\n          headline {\n            default\n          }\n          url\n        }\n      }\n      pageNumber\n    }\n  "])))};var be,_e,we=ve,xe=n("VUHb"),ke=n("zIxd"),Oe=n("P3/q"),Te=n("Yh38"),Ce=n("lSNA"),Ee=n.n(Ce),Se=n("qf1F"),Pe=n.n(Se);function Ie(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function Me(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ie(Object(n),!0).forEach((function(t){Ee()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ie(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Ae=function(e){var t=e.data,n=e.article,i=e.className,a=n.url,o=n.firstPublished;return y.a.createElement(Pe.a,Me(Me({className:i},t),{},{claimReviewUrl:a,firstPublished:o,content:t.content.map(R.a),contentMetadata:t.content.map((function(e){return e.text})).join("")}))};Ae.defaultProps={article:null,className:void 0},Ae.fragments={article:s()(be||(be=o()(["\n    fragment ClaimReviewBlock_article on Article {\n      id\n      url\n      firstPublished\n    }\n  "]))),data:s()(_e||(_e=o()(["\n    fragment ClaimReviewBlock_data on ClaimReviewBlock {\n      alternateRating\n      claim\n      claimDate\n      claimReviewUrl\n      claimUrl\n      content {\n        ...TextInline_content\n      }\n      firstPublished\n      hideClaim\n      rating\n      source\n    }\n    ","\n  "])),B.a.fragments.content)};var je=Ae,Ne=n("J4zp"),Le=n.n(Ne),De=n("xHA4"),Re=n("4mEQ"),Be=n("fZdH"),ze=n("pCca"),Fe=n("boCj"),Ue=n("6NOd"),He=n("6Gip"),We=n("NW2b"),qe=n("Gs79"),Ve=n("d3NK");function Ge(e){var t=e.dropzone,n=Object(qe.a)().overlays.truncator,i=Object(ze.a)().deviceType,a=void 0===i?"smartphone":i,o=Object(Ue.b)(),r=Object(g.useState)(!1),s=Le()(r,2),l=s[0],c=s[1],u=Object(g.useState)(!1),d=Le()(u,2),p=d[0],f=d[1],m=Object(g.useState)(0),y=Le()(m,2),v=y[0],b=y[1],_=Object(g.useState)(0),w=Le()(_,2),x=w[0],k=w[1];if(Object(g.useEffect)((function(){window.matchMedia("(min-width: ".concat("730px",")")).matches||!t.adsDesktop||t.adsMobile?(t.adsDesktop||t.adsMobile)&&(t.adsDesktop&&(o.adCounter.desktopAdPosition+=1,k(o.adCounter.desktopAdPosition)),t.adsMobile&&(o.adCounter.mobileAdPosition+=1,b(o.adCounter.mobileAdPosition)),f(!0)):c(!0)}),[o.adCounter,t.adsDesktop,t.adsMobile]),Object(g.useEffect)((function(){return function(){v&&(o.adCounter.mobileAdPosition-=1),x&&(o.adCounter.desktopAdPosition-=1)}}),[x,v,o.adCounter]),l)return null;if(!p)return null;if(null!=n&&n.exists&&(null==n||!n.ready||"acm"===(null==n?void 0:n.mode)&&null!=n&&n.visible))return null;var O="smartphone"===a;if(O&&t.adsMobile||!O&&t.adsDesktop){var T=O?v:x;return h()(Ve.a,{sequence:T,dropzone:t})}return null}Ge.defaultProps={dropzone:{}};var Ye,Xe=Ge,Ze=De.storyPageTests.ONE_MODULE_TEST;function Je(e){var t,n=e.data,i=e.sequence,a=e.supplementalCount,o=e.dropzoneContents,r=e.article,s=e.welcomeBannerSubsDZComponent,l=e.welcomeBannerRegiDZComponent,c=Object(Be.a)(),u=Object(ze.a)().deviceType,d=void 0===u?"smartphone":u,p=Object(Ue.b)(),f=p.setCompanionFlags,m=p.getCompanionFlags,v=p.welcomeBanners,b=Object(g.useState)(!1),_=Le()(b,2),w=_[0],x=_[1],k="smartphone"===d;Object(g.useEffect)((function(){x(!0)}),[]);var O=null==c||null===(t=c[Ze.name])||void 0===t?void 0:t.variant,T=m();if(n.adsDesktop&&null===T.placedFirstAd&&f({placedFirstAd:{position:a,dropzoneIndex:n.index}}),w){var C,E,S,P;if("smartphone"===d&&n.adsMobile||"smartphone"!==d&&n.adsDesktop)null===v.regiDZIndex&&n.index>(null===(C=T.placedFirstAd)||void 0===C?void 0:C.dropzoneIndex)&&(v.regiDZIndex=n.index);if(n.adsMobile||n.adsDesktop)return null!=s&&null!==(E=s.props)&&void 0!==E&&E.showWelcomeBannerSubs&&T.placedFirstAd.dropzoneIndex===n.index&&(k&&n.adsMobile||!k&&n.adsDesktop)?y.a.cloneElement(s,{messageCap:s.props.messageCap,parentUrl:null==r?void 0:r.url,parentUri:null==r?void 0:r.uri,pageType:He.a}):null!=l&&null!==(S=l.props)&&void 0!==S&&S.showWelcomeBannerRegi&&n.index===v.regiDZIndex&&(k&&n.adsMobile||!k&&n.adsDesktop)?y.a.cloneElement(l,{messageCap:l.props.messageCap,parentUrl:null==r?void 0:r.url,parentUri:null==r?void 0:r.uri,pageType:He.a}):"podcasts"===(null==r||null===(P=r.section)||void 0===P?void 0:P.name)?null:h()(Xe,{sequence:i,dropzone:n})}var I=o[n.index.toString()];return I?h()(Fe.InView,{onChange:function(e){Boolean(O)&&!Object(Re.isOpinion)(null==r?void 0:r.section)&&e&&Object(We.e)(Ze.name)},triggerOnce:!0},void 0,I):null}Je.fragments={data:s()(Ye||(Ye=o()(["\n    fragment Dropzone_data on Dropzone {\n      index\n      bad\n      adsMobile\n      adsDesktop\n    }\n  "])))},Je.defaultProps={sequence:null,supplementalCount:9999,dropzoneContents:{},article:{},welcomeBannerSubsDZComponent:null,welcomeBannerRegiDZComponent:null};var Ke,$e=Je,Qe=n("X6oL"),et=n("4uw1"),tt=n("gX7T"),nt=n.n(tt),it=n("0Rhs"),at=n("534C"),ot=n.n(at),rt=n("Zc/f"),st=n.n(rt),lt=n("z0L9"),ct=n.n(lt),ut=n("xn0n"),dt=n("LXPD"),pt=n("OLAn"),ft=n("axlb"),mt=n("hU1o"),ht=n("cUQY"),gt=n("MLAy"),yt=n("mGV9"),vt=n("jOYC"),bt=n("XMNT"),_t=n.n(bt),wt=Object(ae.themeFn)("languageDirection",{none:Object(ae.css)("margin-right:1rem;"),rightToLeft:Object(ae.css)("margin-left:1rem;")}),xt=Object(ae.styled)(_t.a,{target:"ep4cyha0"})("display:block;margin:0;",(function(e){return e.inHeader?null:"margin-bottom: 1rem;"}),";",wt,";"),kt=function(e){var t=e.data,n=e.className,i=e.lastMajorModification,a=e.inHeader;if(!t)return null;var o=t.align?t.align.toLowerCase():null;return h()(xt,{className:Object(ae.cx)(n,vt.b.layout.textAlign[o]||null),lastMajorModification:i,inHeader:a},void 0,t.timestamp)};kt.displayName="TimestampBlock",kt.defaultProps={className:void 0,lastMajorModification:null,inHeader:!1},kt.fragments={data:s()(Ke||(Ke=o()(["\n    fragment TimestampBlock_data on TimestampBlock {\n      timestamp\n      align\n      showUpdatedTimestamp\n    }\n  "])))};var Ot,Tt,Ct=kt,Et=n("InUh"),St=n.n(Et),Pt=n("MKiQ"),It=n.n(Pt),Mt=n("XMA8"),At=n("pVYW"),jt=n("y1Vo"),Nt=n("8npY"),Lt=n.n(Nt),Dt=n("ZKN5"),Rt=n("60yG"),Bt=n.n(Rt),zt=n("9dx5"),Ft=(n("QLXK"),n("wXC7")),Ut=n.n(Ft),Ht=n("3sMT"),Wt=Object(ae.css)("margin:30px auto;border-bottom:1px solid ",Ht.color.stroke.quaternary,";",Ut.a.breakpoint.small,"{border-bottom:1px solid transparent;}"),qt=St()((function(){return Promise.all([n.e(186),n.e(153)]).then(n.bind(null,"qOx7"))}),{loadableGenerated:{webpack:function(){return["qOx7"]},modules:["./SharedSlideshowInline"]}});function Vt(e){var t=e.data,n=Object(g.useRef)(null),i=Object(Qe.useTracking)({module:{name:"Slideshow"},version:"Inline"}),a=i.Track,o=i.trackEvent,r=function(e){(function(){try{return navigator.userAgent.ua.indexOf("MSIE ")>-1||navigator.userAgent.ua.indexOf("Trident/")>-1}catch(e){return!1}})()||setTimeout((function(){o(e)}),500)},s={slideView:function(e){var n,i=e.onImg,a=e.prevImg,o=e.numOfSlides,s=e.numOfSwipes,l=e.entrySlide;r({event:"moduleInteraction",eventData:{type:"click"},module:{region:"body"},slideshow:{currentSlide:i,previousSlide:a,lengthOfSlide:o,numOfSwipes:s,entrySlide:l,slideShowTitle:null===(n=t.media.headline)||void 0===n?void 0:n.default}})},view:function(){var e;r({event:"impression",module:{region:"body"},slideshow:{slideShowTitle:null===(e=t.media.headline)||void 0===e?void 0:e.default}})}};if(Object(g.useEffect)((function(){var e=Bt()(s.view),t=n.current,i=new IntersectionObserver((function(t){return!!Le()(t,1)[0].isIntersecting&&e()}),{rootMargin:"0px",threshold:.9});return t&&i.observe(t),function(){t&&i.unobserve(t)}}),[]),!t||!t.media)return null;var l=Object(zt.mapDataToProps)(t.media),c=l.title,u=l.images;if(u.length<1)return null;var d=Lt.a[t.size];return h()(a,{},void 0,y.a.createElement("div",{className:Object(ae.cx)(At.c,d),ref:n},h()(qt,{title:c,images:u,track:s})),Ot||(Ot=h()("div",{className:Wt})))}Vt.displayName="SlideshowEmbedded",Vt.fragments={data:s()(Tt||(Tt=o()(["\n    fragment SlideshowEmbedded_data on SlideshowSlide {\n      legacyHtmlCaption\n      image {\n        id\n        credit\n        summary\n        uri\n        crops(cropNames: [MASTER, THREE_BY_TWO, MOBILE_MASTER]) {\n          name\n          renditions {\n            url\n            name\n            width\n            height\n          }\n        }\n      }\n    }\n  "])))};var Gt,Yt=Object(Dt.a)(Vt),Xt=Object(ae.css)(Ut.a.breakpoint.small,"{border-top:1px solid ",Ht.dark.colors.stroke.primary.transform(Ut.a.setAlpha(.33)).rgba,";padding-top:24px;}"),Zt=Object(ae.css)("position:relative;"),Jt=Object(ae.styled)(k.a,{target:"ewenx680"})("width:100%;opacity:1;transition:opacity 0.15s;backface-visibility:hidden;z-index:0;margin-bottom:0;margin-top:15px;",Ut.a.breakpoint.small,"{margin:15px auto 0;width:100%;&.sizeMedium{margin:15px auto 0;width:100%;}}"),Kt=Object(ae.css)("width:100%;height:100%;max-height:150px;position:absolute;z-index:1;left:0;right:0;bottom:0;background:linear-gradient( transparent,",Ht.dark.colors.overlay.black.transform(Ut.a.setAlpha(.7)).rgba," );@media (max-width:",Ut.a.breakpoint.width.small,"px){background:linear-gradient( transparent,",Ht.dark.colors.overlay.black.transform(Ut.a.setAlpha(.7)).rgba," );}"),$t=Object(ae.css)("position:absolute;width:90%;bottom:51px;z-index:2;left:0;right:0;margin:auto;@media (max-width:",Ut.a.breakpoint.width.small,"px){bottom:45px;}"),Qt=Object(ae.css)("color:",Ht.dark.colors.content.primary.hex,";font-family:",Ut.a.font.serifMedium,";font-size:",Ut.a.font.size(22),";line-height:",Ut.a.font.size(24),";font-weight:",Ut.a.font.weight.medium,";margin-bottom:12px;-webkit-font-smoothing:antialiased;",Ut.a.breakpoint.medium,"{font-size:",Ut.a.font.size(24),";line-height:",Ut.a.font.size(28),";margin-bottom:19px;}"),en=Object(ae.css)("font-family:",Ut.a.font.franklinBase,";font-size:",Ut.a.font.size(13),";line-height:",Ut.a.font.size(13),";color:",Ht.dark.colors.content.primary.hex,";font-weight:",Ut.a.font.weight.medium,";display:inline-block;padding-right:0.75rem;vertical-align:middle;position:relative;letter-spacing:0.03em;&:first-child{background-image:url('","/vi-assets/static-assets/icon-slideshow-47beff4d2fe2169a60e0c3f92e469bc9.svg","');background-repeat:no-repeat;display:inline-block;width:24px;height:20px;",Ut.a.breakpoint.medium,"{width:30px;height:25px;font-size:",Ut.a.font.size(15),";line-height:",Ut.a.font.size(15),";}}&:last-child{border-left:1px solid ",Ht.dark.colors.stroke.primary.transform(Ut.a.setAlpha(.33)).rgba,";padding-left:0.75rem;}"),tn=Object(ae.css)("font-size:1rem;vertical-align:middle;position:absolute;right:4px;bottom:0;transition:right 0.18s ease-out;"),nn=Object(ae.styled)("div",{target:"ewenx681"})("position:relative;&:hover{",Jt,"{opacity:0.8;}.",tn,"{right:0;}}"),an=St()((function(){return Promise.all([n.e(182),n.e(140)]).then(n.bind(null,"RZh6"))}),{loadableGenerated:{webpack:function(){return["RZh6"]},modules:["shared/ProducerNotes"]}}),on=nn,rn=Jt,sn=jt.Caption.withComponent("div",{target:"efyb8hk0"}),ln=function(e){var t,n=e.article,i=e.data,a=e.className,o=e.lazyLoad;if(!(i.size&&i.media&&i.media.slides&&i.media.promotionalMedia))return null;var r=null==n||null===(t=n.section)||void 0===t?void 0:t.name,s=i.media,l=s.displayProperties,c=void 0===l?{}:l,u=s.promotionalMedia;if(!Object(Mt.h)(u,"slideshowCrops"))return null;if("Embedded-Only Slideshow"===c.template)return h()("the-weekly"===r?an:Yt,{data:i});var d=i.media.slides.length,p=Lt.a[i.size],f=u.credit||"",m=u.slideshowCrops[0].renditions,g=m[m.length-1].url,y=u.slideshowCrops[0].renditions[0],v=y.height>=y.width?"layoutVertical":"layoutHorizontal",b={media:{caption:{text:""},crops:u.slideshowCrops,id:i.id,imageType:"photo",url:g},size:i.size,__typename:i.__typename};return h()(on,{className:Object(ae.cx)(At.c,p,v,a)},void 0,h()("a",{href:i.media.url},void 0,h()("div",{className:$t},void 0,h()("h2",{className:Qt},void 0,i.media.headline.default),h()("div",{className:Xt},void 0,h()("p",{className:en}),h()("p",{className:en},void 0,"".concat(d," Photos")),h()("p",{className:en},void 0,"View Slide Show ",h()("span",{className:tn},void 0,"›")))),h()("div",{className:Zt},void 0,h()("div",{className:Kt}),h()(rn,{data:b,lazyLoad:o,useResponsiveMedia:!0}))),h()(sn,{},void 0,h()(It.a,{},void 0,f)))};ln.displayName="SlideshowBlock",ln.defaultProps={className:void 0,lazyLoad:!0},ln.fragments={data:s()(Gt||(Gt=o()(['\n    fragment SlideshowBlock_data on SlideshowBlock {\n      size\n      media {\n        id\n        displayProperties {\n          template\n        }\n        promotionalMedia {\n          ... on Image {\n            id\n            credit\n            url\n            slideshowCrops: crops(renditionNames: ["articleLarge", "jumbo", "superJumbo"]) {\n              renditions {\n                url\n                width\n                height\n              }\n            }\n          }\n        }\n        url\n        headline {\n          default\n        }\n        summary\n        slides {\n          ...SlideshowEmbedded_data\n        }\n      }\n    }\n    ',"\n  "])),Yt.fragments.data)};var cn,un,dn,pn=ln,fn=n("Q3jP");function mn(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function hn(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?mn(Object(n),!0).forEach((function(t){Ee()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):mn(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var gn={ImageBlock:k.a,VideoBlock:G.a,SlideshowBlock:pn,InteractiveBlock:T.a,CardDeckBlock:te.a};function yn(e){var t,n,i=e.article,a=e.data,o=e.showDatelessTimestamp,r=e.truncated,s=Object(ht.a)().granted,l=Object(et.a)(),c=Object(Qe.useTracking)({module:{region:"header"}}).Track,u=Object(mt.a)(),d=u.getReferrer,p=u.fastlyAbraConfig,f=Object(ae.useTheme)(),m=Object(Be.a)(),y=ct()({abra:m,reportExposure:We.e}),v=Le()(y,2),b=v[0],_=v[1],w=Object(gt.e)({scope:"synthVoiceTestWeb",limit:1}),x=a.ledeMedia&&gn[a.ledeMedia.__typename]?gn[a.ledeMedia.__typename]:"",k=a.ledeMedia&&"ImageBlock"===a.ledeMedia.__typename,O=i.lastMajorModification,T="";i&&(T=i.newsStatus);var C=i&&i.collections,E=h()(ot.a,{collections:C}),S="1_synth",P=p["STYLN_synth_voice_web"],I=P===S||l,M=Object(g.useRef)(!1);P&&!M.current&&(M.current=!0,Object(We.f)(p,d()));var A=h()(dt.a,{share:i,isOpinion:"opinion"===(null==f?void 0:f.section),hasMedia:!(!a.ledeMedia||!gn[a.ledeMedia.__typename])||void 0,hasSyntheticAudio:!(null!=i&&i.associatedNewsletter)&&I&&"SYNTHETIC_NARRATION"===(null==i||null===(t=i.featuredAudio)||void 0===t||null===(n=t.asset)||void 0===n?void 0:n.audioContentType)}),j=h()(x,{className:it.headerMediaClass,data:a.ledeMedia,lede:!0,useResponsiveMedia:!0,usePhotoViewer:k,imageNumber:k?1:null,lazyLoad:!1,useMobileCrop:k}),N=o?hn(hn({},a.timestampBlock),{},{timestamp:O}):a.timestampBlock;return h()(c,{},void 0,h()(nt.a,{isOak:!0,article:i,byline:a.byline,headline:a.headline,timestampBlock:N,lastMajorModification:O,summary:a.summary,latestUpdate:a.latestUpdate,shareTools:A,label:a.label,image:a.ledeMedia,media:j,newsStatus:T,timesExclusive:E,translations:i.translations,sponsoredByAd:cn||(cn=h()(Ve.a,{id:"sponsor"})),brandBar:h()(ut.a,{asset:i}),associatedNewsletter:i.associatedNewsletter,showReadingTime:_,readingTimeRef:b,uri:i.uri,featuredAudio:I?i.featuredAudio:{},granted:s,messageCap:w,useOverlayContext:qe.a,truncated:r,isHybrid:l,isInPreloadedWebview:l}),i.reviewItems&&i.reviewItems.length>0&&h()(fn.a,{article:i}),!(null!=f&&f.isShortForm)&&h()(ft.a,{region:st.a.ABOVE_MAIN_CONTENT,associatedAssets:i.associatedAssets}))}yn.displayName="HeaderBasic",yn.fragments={data:s()(un||(un=o()(["\n    fragment HeaderBasicBlock_data on HeaderBasicBlock {\n      label {\n        ...LabelBlock_data\n      }\n      headline {\n        ...Heading1Block_data\n      }\n      summary {\n        ...SummaryBlock_data\n      }\n      ledeMedia {\n        __typename\n        ...ImageBlock_data\n        ...VideoBlock_data\n        ...SlideshowBlock_data\n        ...InteractiveBlock_data\n        ...CardDeckBlock_data\n      }\n      byline {\n        ...BylineBlock_data\n        ... on BylineBlock {\n          bylines {\n            prefix\n          }\n        }\n      }\n      summary {\n        ...SummaryBlock_data\n      }\n      timestampBlock {\n        ...TimestampBlock_data\n        showUpdatedTimestamp\n      }\n    }\n    ","\n    ","\n    ","\n    ","\n    ","\n    ","\n    ","\n    ","\n    ","\n    ","\n  "])),yt.a.fragments.data,d.a.fragments.data,q.a.fragments.data,k.a.fragments.data,T.a.fragments.data,te.a.fragments.data,G.a.fragments.data,Te.a.fragments.data,Ct.fragments.data,pn.fragments.data),article:s()(dn||(dn=o()(["\n    fragment HeaderBasic_article on Article {\n      id\n      translations {\n        ...TranslationLinks_translations\n      }\n      collections @filterEmpty {\n        id\n        type\n        slug\n        collectionType\n      }\n      ...ReviewHeader_article\n      ...ShareToolbar_share\n      featuredAudio {\n        source\n        asset {\n          id\n          audioContentType\n          sourceId\n          uri\n          headline {\n            default\n          }\n          fileUrl\n          length\n        }\n      }\n    }\n    ","\n    ","\n    ","\n  "])),dt.a.fragments.share,fn.a.fragments.article,pt.a.fragments.translations)},yn.defaultProps={article:null,showDatelessTimestamp:!1,truncated:!1};var vn,bn,_n,wn=yn,xn=n("OB6K"),kn=n.n(xn),On=n("B05M"),Tn=n.n(On),Cn=n("JJ2H"),En=Object(ae.css)("margin-bottom:20px;"),Sn=Object(ae.css)("margin-bottom:0;"),Pn=Object(ae.css)("max-width:600px;width:calc(100% - 40px);margin:35px 20px 16px;font-family:",Ut.a.font.serifBase,";font-size:",Ut.a.font.size(18),";line-height:",Ut.a.font.size(25),";",Ut.a.breakpoint.small,"{width:100%;margin:50px auto 16px;font-size:",Ut.a.font.size(20),";line-height:",Ut.a.font.size(30),";}"),In=Object(ae.css)("font-style:italic;text-decoration:underline;color:",Ht.color.signal.editorial,";&:hover{text-decoration:none;}"),Mn={ImageBlock:k.a,VideoBlock:G.a,InteractiveBlock:T.a,SlideshowBlock:pn};function An(e){var t=e.article,n=e.data,i=e.className,a=e.truncated,o=Object(Qe.useTracking)({module:{region:"header"}}).Track,r=Object(ae.useTheme)(),s=n.ledeMedia&&Mn[n.ledeMedia.__typename]?Mn[n.ledeMedia.__typename]:"",l=!!s,c=s&&"ImageBlock"===n.ledeMedia.__typename?n.ledeMedia.size:"",u=l&&"ImageBlock"===n.ledeMedia.__typename,p=r&&r.section||"default",f=!!n.summary,m=t&&t.displayProperties&&t.displayProperties.serveAsNyt4,g=t&&t.url,v=t.lastMajorModification,b=g?"https://archive.nytimes.com/".concat(g.replace(/^https?:\/\//,"")):"",_="";t&&(_=t.newsStatus);var w=t&&t.collections,x=h()(ot.a,{collections:w}),k=h()(it.BylineTimestamp,{"data-testid":"byline-timestamp",className:i},void 0,n.byline&&h()(Te.a,{data:n.byline,article:t,timestamp:n.timestampBlock,headerPresent:"Legacy"}),!n.byline&&n.timestampBlock&&h()(Ct,{data:n.timestampBlock,lastMajorModification:v,inHeader:!0}),t.translations&&h()(pt.a,{translations:t.translations})),O=t.reviewItems&&t.reviewItems.length>0,T=n.ledeMedia&&l&&h()(s,{data:n.ledeMedia,lazyLoad:!1,className:Object(ae.cx)(it.headerMediaClass,Ee()(Ee()(Ee()({},En,O),it.smallMediaClass,"SMALL"===c),Sn,!O&&"SMALL"===c)),lede:!0,useResponsiveMedia:!0,usePhotoViewer:u,imageNumber:u?1:null}),C=function(e){if(!e.label)return!1;var t,n;try{if(1!==e.byline.bylines[0].creators.length)return!0;t=e.label.content[0].text,n=e.byline.bylines[0].creators[0].displayName}catch(e){return!0}return t!==n}(n);return h()(kn.a,{theme:{opinionHeaderRedesign:!1}},void 0,h()(o,{},void 0,h()(Tn.a,{hasSummary:f},void 0,vn||(vn=h()(Ve.a,{id:"sponsor"})),h()(ut.a,{asset:t}),C&&h()(yt.a,{data:n.label,className:i,newsStatus:_,timesExclusive:x}),n.headline&&h()(d.a,{data:n.headline,className:i}),a?null:y.a.createElement(y.a.Fragment,null,n.summary&&h()(q.a,{data:n.summary,className:i}),"SMALL"===c||"opinion"===p?y.a.createElement(y.a.Fragment,null,k,h()(dt.a,{share:t,position:Cn.a.HEADER,className:i,isOpinion:!0,hasMedia:n.ledeMedia&&l}),T,O&&h()(fn.a,{article:t})):y.a.createElement(y.a.Fragment,null,h()(dt.a,{share:t,position:Cn.a.HEADER,className:i,isOpinion:!0,hasMedia:n.ledeMedia&&l}),T,O&&h()(fn.a,{article:t}),k),m&&h()("div",{className:Pn},void 0,h()("a",{className:In,href:b},void 0,"See how this article appeared when it was originally published on NYTimes.com."))))))}An.displayName="HeaderLegacy",An.defaultProps={article:null,data:{},className:void 0,truncated:!1},An.fragments={data:s()(bn||(bn=o()(["\n    fragment HeaderLegacyBlock_data on HeaderLegacyBlock {\n      subhead {\n        ...Heading2Block_data\n      }\n      label {\n        ...LabelBlock_data\n      }\n      headline {\n        ...Heading1Block_data\n      }\n      ledeMedia {\n        __typename\n        ... on ImageBlock {\n          size\n        }\n        ...ImageBlock_data\n        ...VideoBlock_data\n        ...InteractiveBlock_data\n        ...SlideshowBlock_data\n      }\n      byline {\n        ...BylineBlock_data\n        ... on BylineBlock {\n          bylines {\n            prefix\n          }\n        }\n      }\n      timestampBlock {\n        ...TimestampBlock_data\n      }\n    }\n    ","\n    ","\n    ","\n    ","\n    ","\n    ","\n    ","\n    ","\n    ","\n  "])),T.a.fragments.data,pn.fragments.data,d.a.fragments.data,p.a.fragments.data,yt.a.fragments.data,k.a.fragments.data,G.a.fragments.data,Te.a.fragments.data,Ct.fragments.data),article:s()(_n||(_n=o()(["\n    fragment HeaderLegacyBlock_article on Article {\n      id\n      url\n      newsStatus\n      displayProperties {\n        serveAsNyt4\n      }\n      ...BylineBlock_article\n      ...ReviewHeader_article\n      ...ShareToolbar_share\n      translations {\n        ...TranslationLinks_translations\n      }\n      ...BrandBar_asset\n    }\n    ","\n    ","\n    ","\n    ","\n    ","\n  "])),Te.a.fragments.article,fn.a.fragments.article,dt.a.fragments.share,pt.a.fragments.translations,ut.a.fragments.asset)};var jn,Nn,Ln,Dn=An,Rn=n("o+dK"),Bn=n("i9lO"),zn=n("shGR"),Fn=(n("7FfI"),n("06b3")),Un=n("HChe"),Hn=n("rONy"),Wn=n("Rb+W"),qn=St()((function(){return n.e(110).then(n.bind(null,"sdmx"))}),{loadableGenerated:{webpack:function(){return["sdmx"]},modules:["./SharedHeaderLiveBriefing"]}}),Vn=Object(Un.a)(),Gn=Object(Wn.f)(Fn.a);function Yn(e){var t=e.article,n=e.data,i=Object(Qe.useTracking)({module:{region:"header"}}).Track;return Object(g.useEffect)((function(){Object(Hn.a)((function(){window.Iterate("install","5daa046efdd6a200014a9433"),window.Iterate("identify",{agentId:Gn,referrerUrl:document.referrer,referrerPage:document.location,device:Vn})}))}),[]),n?h()(i,{},void 0,h()(qn,{isOak:!0,firstPublished:t.firstPublished,lastModified:t.lastModified,byline:n.byline,headline:n.headline,summary:n.summary,latestUpdate:n.latestUpdate,translations:t.translations,sponsoredByAd:jn||(jn=h()(Ve.a,{id:"sponsor"}))})):null}Yn.displayName="HeaderLiveBriefing",Yn.fragments={data:s()(Nn||(Nn=o()(["\n    fragment HeaderLiveBriefingBlock_data on HeaderLiveBriefingBlock {\n      label {\n        ...LabelBlock_data\n      }\n      headline {\n        ...Heading1Block_data\n      }\n      summary {\n        ...SummaryBlock_data\n      }\n      byline {\n        ...BylineBlock_data\n        ... on BylineBlock {\n          bylines {\n            prefix\n          }\n        }\n      }\n      latestUpdate {\n        label\n        content {\n          ...TextInline_content\n        }\n      }\n    }\n    ","\n    ","\n    ","\n    ","\n    ","\n  "])),yt.a.fragments.data,d.a.fragments.data,q.a.fragments.data,Te.a.fragments.data,B.a.fragments.content),article:s()(Ln||(Ln=o()(["\n    fragment HeaderLiveBriefing_article on Article {\n      id\n      lastModified\n      firstPublished\n      translations {\n        ...TranslationLinks_translations\n      }\n    }\n    ","\n  "])),pt.a.fragments.translations)},Yn.defaultProps={data:void 0,article:null};var Xn,Zn=Yn,Jn=n("QILm"),Kn=n.n(Jn),$n=n("/2LF"),Qn=n("4TXN"),ei=["data"];function ti(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}var ni=function(e){var t=e.data,n=Kn()(e,ei);return y.a.createElement($n.a,P()({},n,{data:t,linkTrackingParamOverrides:{pgtype:"Article"},renderRelated:function(e){var t=e.data;return y.a.createElement(j.a,P()({},e,{isOpinion:Object(Qn.c)(t),label:Object(Qn.b)(t)}))}}))};ni.displayName="RelatedLinksBlock",ni.defaultProps=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ti(Object(n),!0).forEach((function(t){Ee()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ti(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},$n.a.defaultProps),ni.fragments={data:s()(Xn||(Xn=o()(["\n    fragment StoryRelatedLinksBlock_data on RelatedLinksBlock {\n      ...SharedRelatedLinksBlock_data\n      related @filterEmpty {\n        ... on CreativeWork {\n          __typename\n          section {\n            id\n            displayName\n          }\n        }\n        ... on Article {\n          id\n          bylines {\n            creators {\n              ... on Person {\n                id\n                displayName\n              }\n            }\n          }\n        }\n      }\n    }\n    ","\n  "])),$n.a.fragments.data)};var ii,ai,oi,ri=ni,si=n("Uc1u"),li=n.n(si),ci=n("JoI/"),ui=n.n(ci),di=n("voDd"),pi=function(e){var t=null==e?void 0:e.find((function(e){var t;return null==e||null===(t=e.slug)||void 0===t?void 0:t.startsWith("audio-app-show")}));if(t)return t.name;var n=null==e?void 0:e.find((function(e){var t;return null==e||null===(t=e.slug)||void 0===t?void 0:t.startsWith("audio-app-publisher")}));return n?n.name:""},fi=function(e){var t,n=e.data,i=e.displayStyle,a=e.className;if(!n)return null;var o=n.url,r=n.headline,s=n.summary,l=n.promotionalImage,c=n.promotions,u=n.audio,d=n.collections,p=null==c||null===(t=c.find((function(e){return"audio-app"===e.name})))||void 0===t?void 0:t.promotionalProperties,f=(null==p?void 0:p.media)||(null==l?void 0:l.image),m=u||Object(di.getAudioFromBody)(n),h=Math.max(6e4,1e3*(null==m?void 0:m.length));return y.a.createElement(ui.a,{displayStyle:i,headline:(null==p?void 0:p.headline)||r.default,summary:(null==p?void 0:p.summary)||s,url:Object(di.getAudioDeepLink)(o),media:null==f?void 0:f.crops[0].renditions[0].url,caption:null==f?void 0:f.credit,duration:h,label:pi(d),className:a})},mi=s()(ii||(ii=o()(['\n  fragment AudioRelatedLinkImageFields on Image {\n    id\n    credit\n    url\n    crops(renditionNames: ["threeByTwoSmallAt2X"]) {\n      renditions {\n        url\n        name\n        width\n      }\n    }\n  }\n']))),hi=s()(ai||(ai=o()(["\n  fragment AudioRelatedLinkAudioFields on Audio {\n    id\n    length\n  }\n"])));fi.fragments={data:s()(oi||(oi=o()(["\n    fragment AudioRelatedLinkBlock_data on HasPromotionalProperties {\n      ... on Article {\n        id\n        url\n        headline {\n          default\n        }\n        summary\n        promotionalImage {\n          image {\n            id\n            ...AudioRelatedLinkImageFields\n          }\n        }\n        promotions {\n          name\n          promotionalProperties {\n            headline\n            summary\n            media {\n              ...AudioRelatedLinkImageFields\n            }\n          }\n        }\n        collections {\n          id\n          slug\n          name\n        }\n        body {\n          content {\n            __typename\n            ... on AudioBlock {\n              media {\n                id\n                ...AudioRelatedLinkAudioFields\n              }\n            }\n            ... on HeaderMultimediaBlock {\n              media {\n                ... on AudioBlock {\n                  media {\n                    id\n                    ...AudioRelatedLinkAudioFields\n                  }\n                }\n              }\n            }\n          }\n        }\n      }\n      ... on AudioContainer {\n        id\n        url\n        headline {\n          default\n        }\n        summary\n        promotionalImage {\n          image {\n            id\n            ...AudioRelatedLinkImageFields\n          }\n        }\n        collections {\n          id\n          slug\n          name\n        }\n        audio {\n          id\n          ...AudioRelatedLinkAudioFields\n        }\n      }\n    }\n    ","\n    ","\n  "])),mi,hi)},fi.defaultProps={data:null,displayStyle:"standard",className:void 0};var gi,yi=fi,bi=function(e){var t,n,i=e.data,a=e.className,o=Object(ae.useTheme)().noFollowExternalLinks;if(!i)return null;var r=Object(D.createMapInlineUnionWithOptions)({noFollowExternalLinks:o}),s=null!==(t=i.title)&&void 0!==t&&t.length?i.title.map(r):null,l=null!==(n=i.description)&&void 0!==n&&n.length?i.description.map(r):null,c=i.audioRelatedLinksBlockDisplayStyle||null,u=i.related&&i.related.map((function(e,t){var n={key:t,data:e,displayStyle:c};return y.a.createElement(yi,n)}));return h()(li.a,{className:Object(ae.cx)(a,"audio-related-links-block"),displayStyle:c,related:u},void 0,s&&h()(si.AudioRelatedLinksHeadline,{},void 0,s),l&&h()(si.AudioRelatedLinksDescription,{},void 0,l))};bi.displayName="AudioRelatedLinksBlock",bi.fragments={data:s()(gi||(gi=o()(["\n    fragment AudioRelatedLinksBlock_data on AudioRelatedLinksBlock {\n      audioRelatedLinksBlockDisplayStyle: displayStyle\n      title {\n        ...TextInline_content\n      }\n      description {\n        ...TextInline_content\n      }\n      related @filterEmpty {\n        __typename\n        ...AudioRelatedLinkBlock_data\n      }\n    }\n    ","\n    ","\n  "])),B.a.fragments.content,yi.fragments.data)},bi.defaultProps={className:void 0,data:null};var _i,wi=bi,xi=Object(ae.css)("margin:37px auto;",Ut.a.breakpoint.small,"{margin:43px auto;width:",Ut.a.breakpoint.textBodyWidth,"px;}",Ut.a.breakpoint.extraLarge,"{width:",Ut.a.breakpoint.textBodyWidthExtralarge,"px;}"),ki=function(e){var t=e.data,n=e.className,i=t.html;return h()("figure",{className:Object(ae.cx)(xi,n),dangerouslySetInnerHTML:{__html:i}})};ki.displayName="SoundcloudEmbedBlock",ki.fragments={data:s()(_i||(_i=o()(["\n    fragment SoundcloudEmbedBlock_data on SoundcloudEmbedBlock {\n      soundcloudUrl\n      html\n    }\n  "])))},ki.defaultProps={className:void 0};var Oi,Ti,Ci=Object(Dt.a)(ki),Ei=n("cDf5"),Si=n.n(Ei),Pi=n("RIqP"),Ii=n.n(Pi),Mi=n("CKk2"),Ai=n("qGEe"),ji=n.n(Ai);function Ni(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function Li(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ni(Object(n),!0).forEach((function(t){Ee()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ni(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Di=St()((function(){return n.e(57).then(n.bind(null,"RwY4"))}),{loadableGenerated:{webpack:function(){return["RwY4"]},modules:["../Ask"]}});var Ri=function(e,t){var n={eventData:{type:e}};return"object"===Si()(t)&&(n=Li(Li({},n),t)),n},Bi=function(e){var t=e.className,n=e.article,i=e.data,a=i.dataType,o=i.data,r=i.mediaRefs,s=Object(Qe.useTracking)({event:"moduleInteraction",module:{name:"ExperimentalBlock",element:{name:Object(Mi.getComponentType)(a)}}});try{var l=Object(Mi.getComponentType)(a),c=ji.a[l];if(!c)throw new Error("No component [".concat(l,"] found. Available experimental blocks are: ").concat(Object.keys(ji.a).join(" "),"."));var u={},d=function(e,t){var n=e,i=e.match(/nyt[^,\]"]*/g);return i&&(n=(i=Ii()(new Set(i))).reduce((function(e,n){return e.replace(new RegExp('"'.concat(n,'"'),"g"),"".concat(JSON.stringify(t.find((function(e){return(null==e?void 0:e.uri)===n}))||{})))}),e)),JSON.parse(n)}(o,r),p=Li(Li({},e),{},{tracking:s,article:n,index:e.elementCount});return Object.assign(u,p),Object.assign(u,d),d.content&&d.content.length>0&&(Object.assign(u,Object(Mi.contentToProps)(d.content)),delete u.content),"Ask"===l?y.a.createElement(Di,u):y.a.createElement(c,Li(Li({},u),{},{handleEvent:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};s.trackEvent(Ri(e,t))},className:t}))}catch(e){return function(e){if("production"!==vi.env.NODE_ENV)throw new Error(e)}(e),null}};Bi.fragments={article:s()(Oi||(Oi=o()(["\n    fragment UnstructuredBlock_article on Article {\n      id\n      sprinkledBody {\n        content @filterEmpty {\n          __typename\n          ...AudioBlock_data\n          ...BlockquoteBlock_data\n          ...BylineBlock_data\n          ...ClaimReviewBlock_data\n          ...DetailBlock_data\n          ...DiptychBlock_data\n          ...Dropzone_data\n          ...HeaderBasicBlock_data\n          ...HeaderLiveBriefingBlock_data\n          ...Heading1Block_data\n          ...Heading2Block_data\n          ...Heading3Block_data\n          ...ImageBlock_data\n          ...InstagramEmbedBlock_data\n          ...InteractiveBlock_data\n          ...HeaderLegacyBlock_data\n          ...LabelBlock_data\n          ...ListBlock_data\n          ...ParagraphBlock_data\n          ...SlideshowBlock_data\n          ...SoundcloudEmbedBlock_data\n          ...SummaryBlock_data\n          ...RuleBlock_data\n          ...StoryRelatedLinksBlock_data\n          ...TimestampBlock_data\n          ...TwitterEmbedBlock_data\n          ...UnstructuredBlock_data\n          ...VideoBlock_data\n          ...YouTubeEmbedBlock_data\n          ...HeaderFullBleedHorizontalBlock_data\n          ...HeaderMultimediaBlock_data\n          ... on HeaderFullBleedHorizontalBlock {\n            displayOverride\n            byline {\n              ...BylineBlock_data\n              ... on BylineBlock {\n                bylines {\n                  prefix\n                }\n              }\n            }\n            timestampBlock {\n              ...TimestampBlock_data\n            }\n          }\n          ...HeaderFullBleedVerticalBlock_data\n          ... on HeaderFullBleedVerticalBlock {\n            displayOverride\n            alignment\n            byline {\n              ...BylineBlock_data\n              ... on BylineBlock {\n                bylines {\n                  prefix\n                }\n              }\n            }\n            timestampBlock {\n              ...TimestampBlock_data\n            }\n          }\n          ... on Dropzone {\n            adsDesktop\n            adsMobile\n            index\n          }\n          ... on BlockWithFallback {\n            fallback {\n              __typename\n              ...HeaderLegacyBlock_data\n              ...TextOnlyDocumentBlock_data\n            }\n          }\n        }\n      }\n    }\n  "]))),data:s()(Ti||(Ti=o()(['\n    fragment UnstructuredBlock_data on UnstructuredBlock {\n      dataType # named type of block\n      data # JSON data\n      mediaRefs: media {\n        __typename\n        ... on Published {\n          uri\n        }\n        ... on CreativeWork {\n          headline {\n            default\n          }\n          section {\n            id\n            displayName\n          }\n        }\n        ... on HasPromotionalProperties {\n          promotionalHeadline\n          promotionalSummary\n          ... on Published {\n            url\n            firstPublished\n          }\n          promotionalMedia {\n            ... on Image {\n              id\n              crops(renditionNames: ["threeByTwoSmallAt2X", "videoLarge", "mediumThreeByTwo440"]) {\n                name\n                renditions {\n                  url\n                  name\n                }\n              }\n            }\n            ... on Video {\n              id\n              promotionalMedia {\n                ... on Image {\n                  id\n                  crops(\n                    renditionNames: ["threeByTwoSmallAt2X", "videoLarge", "mediumThreeByTwo440"]\n                  ) {\n                    name\n                    renditions {\n                      url\n                      name\n                    }\n                  }\n                }\n              }\n            }\n            ... on Slideshow {\n              id\n              promotionalMedia {\n                ... on Image {\n                  id\n                  crops(\n                    renditionNames: ["threeByTwoSmallAt2X", "videoLarge", "mediumThreeByTwo440"]\n                  ) {\n                    name\n                    renditions {\n                      url\n                      name\n                    }\n                  }\n                }\n              }\n            }\n            ... on Interactive {\n              id\n              promotionalMedia {\n                ... on Image {\n                  id\n                  crops(\n                    renditionNames: ["threeByTwoSmallAt2X", "videoLarge", "mediumThreeByTwo440"]\n                  ) {\n                    name\n                    renditions {\n                      url\n                      name\n                    }\n                  }\n                }\n              }\n            }\n            ... on EmbeddedInteractive {\n              id\n              promotionalMedia {\n                ... on Image {\n                  id\n                  crops(\n                    renditionNames: ["threeByTwoSmallAt2X", "videoLarge", "mediumThreeByTwo440"]\n                  ) {\n                    name\n                    renditions {\n                      url\n                      name\n                    }\n                  }\n                }\n              }\n            }\n          }\n          ... on Article {\n            id\n            bylines {\n              creators {\n                ... on Person {\n                  id\n                  displayName\n                }\n              }\n            }\n          }\n        }\n        ... on Image {\n          __typename\n          id\n          imageType\n          url\n          uri\n          credit\n          legacyHtmlCaption\n          altText\n          crops(\n            renditionNames: [\n              "articleLarge"\n              "jumbo"\n              "superJumbo"\n              "popup"\n              "square320"\n              "mobileMasterAt3x"\n            ]\n          ) {\n            name\n            renditions {\n              url\n              name\n              width\n              height\n            }\n          }\n          caption {\n            text\n          }\n        }\n        ... on Video {\n          id\n          __typename\n          url\n          uri\n          duration\n          sourceId\n          headline {\n            default\n          }\n          summary\n          renditions {\n            width\n            height\n            bitrate\n            url\n            type\n          }\n        }\n      }\n    }\n  '])))};var zi,Fi=Object(Dt.a)(Bi),Ui=function(e){var t=e.data,n=e.styles;return h()("div",{className:n},void 0,t.content.map((function(e,t){return h()(J.a,{data:e},t.toString())})))};Ui.displayName="TextOnlyDocumentBlock",Ui.defaultProps={styles:void 0},Ui.fragments={data:s()(zi||(zi=o()(["\n    fragment TextOnlyDocumentBlock_data on TextOnlyDocumentBlock {\n      content {\n        __typename\n        ...ParagraphBlock_data\n      }\n    }\n    ","\n  "])),J.a.fragments.data)};var Hi,Wi=Ui,qi={AudioBlock:Oe.a,BlockquoteBlock:l.a,BylineBlock:Te.a,CardDeckBlock:te.a,ClaimReviewBlock:je,DetailBlock:c.a,DiptychBlock:u.a,DocumentTearBlock:we,Dropzone:$e,EmailSignupBlock:E.a,HeaderMultimediaBlock:Bn.a,HeaderFullBleedHorizontalBlock:Rn.a,HeaderFullBleedVerticalBlock:zn.a,HeaderLegacyBlock:Dn,HeaderBasicBlock:wn,HeaderLiveBriefingBlock:Zn,Heading1Block:d.a,Heading2Block:p.a,Heading3Block:f.a,GridBlock:x,ImageBlock:k.a,InteractiveBlock:T.a,InstagramEmbedBlock:O.a,LabelBlock:yt.a,ListBlock:C.a,ParagraphBlock:J.a,LegacyTableBlock:Q,PullquoteBlock:Z.a,SlideshowBlock:pn,SoundcloudEmbedBlock:Ci,SpotifyEmbedBlock:X.a,SummaryBlock:q.a,RuleBlock:W.a,RelatedLinksBlock:ri,AudioRelatedLinksBlock:wi,TimestampBlock:Ct,TwitterEmbedBlock:V.a,UnstructuredBlock:Fi,VideoBlock:G.a,YouTubeEmbedBlock:Y.a,EditableRelatedLinksBlock:H,VisualStackBlock:he,ReadersModeGateway:xe.a,Optimistic:ke.a},Vi={SoundcloudEmbedBlock:qi.SoundcloudEmbedBlock,SpotifyEmbedBlock:qi.SpotifyEmbedBlock,TwitterEmbedBlock:qi.TwitterEmbedBlock,YouTubeEmbedBlock:qi.YouTubeEmbedBlock,InstagramEmbedBlock:qi.InstagramEmbedBlock},Gi=s()(Hi||(Hi=o()(["\n  fragment DocumentBlock_data on DocumentBlock {\n    content @filterEmpty {\n      __typename\n      ...AudioBlock_data\n      ...BlockquoteBlock_data\n      ...BylineBlock_data\n      ...CardDeckBlock_data\n      ...ClaimReviewBlock_data\n      ...DetailBlock_data\n      ...DiptychBlock_data\n      ...DocumentTearBlock_data\n      ...Dropzone_data\n      ...EmailSignupBlock_data\n      ...EditableRelatedLinksBlock_data\n      ...HeaderBasicBlock_data\n      ...HeaderLiveBriefingBlock_data\n      ...Heading1Block_data\n      ...Heading2Block_data\n      ...Heading3Block_data\n      ...GridBlock_data\n      ...ImageBlock_data\n      ...InstagramEmbedBlock_data\n      ...InteractiveBlock_data\n      ...HeaderLegacyBlock_data\n      ...LabelBlock_data\n      ...ListBlock_data\n      ...ParagraphBlock_data\n      ...LegacyTableBlock_data\n      ...PullquoteBlock_data\n      ...SlideshowBlock_data\n      ...SoundcloudEmbedBlock_data\n      ...SpotifyEmbedBlock_data\n      ...SummaryBlock_data\n      ...RuleBlock_data\n      ...StoryRelatedLinksBlock_data\n      ...AudioRelatedLinksBlock_data\n      ...TimestampBlock_data\n      ...TwitterEmbedBlock_data\n      ...UnstructuredBlock_data\n      ...VideoBlock_data\n      ...YouTubeEmbedBlock_data\n      ...HeaderFullBleedHorizontalBlock_data\n      ...HeaderMultimediaBlock_data\n      ...VisualStackBlock_data\n      ... on HeaderFullBleedHorizontalBlock {\n        displayOverride\n        byline {\n          ...BylineBlock_data\n          ... on BylineBlock {\n            bylines {\n              prefix\n            }\n          }\n        }\n        timestampBlock {\n          ...TimestampBlock_data\n        }\n      }\n      ...HeaderFullBleedVerticalBlock_data\n      ... on HeaderFullBleedVerticalBlock {\n        displayOverride\n        alignment\n        byline @filterEmpty {\n          ...BylineBlock_data\n          ... on BylineBlock {\n            bylines {\n              prefix\n            }\n          }\n        }\n        timestampBlock {\n          ...TimestampBlock_data\n        }\n      }\n      ... on Dropzone {\n        adsDesktop\n        adsMobile\n        index\n      }\n      ... on BlockWithFallback {\n        fallback {\n          __typename\n          ...HeaderLegacyBlock_data\n          ...TextOnlyDocumentBlock_data\n        }\n      }\n    }\n  }\n  ","\n  ","\n  ","\n  ","\n  ","\n  ","\n  ","\n  ","\n  ","\n  ","\n  ","\n  ","\n  ","\n  ","\n  ","\n  ","\n  ","\n  ","\n  ","\n  ","\n  ","\n  ","\n  ","\n  ","\n  ","\n  ","\n  ","\n  ","\n  ","\n  ","\n  ","\n  ","\n  ","\n  ","\n  ","\n  ","\n  ","\n  ","\n  ","\n  ","\n  ","\n  ","\n  ","\n  ","\n"])),qi.AudioBlock.fragments.data,qi.BlockquoteBlock.fragments.data,qi.BylineBlock.fragments.data,qi.CardDeckBlock.fragments.data,qi.ClaimReviewBlock.fragments.data,qi.DetailBlock.fragments.data,qi.DiptychBlock.fragments.data,qi.Dropzone.fragments.data,qi.EmailSignupBlock.fragments.data,qi.EditableRelatedLinksBlock.fragments.data,qi.HeaderMultimediaBlock.fragments.data,qi.HeaderFullBleedHorizontalBlock.fragments.data,qi.HeaderFullBleedVerticalBlock.fragments.data,qi.HeaderLegacyBlock.fragments.data,qi.HeaderBasicBlock.fragments.data,qi.HeaderLiveBriefingBlock.fragments.data,qi.Heading1Block.fragments.data,qi.Heading2Block.fragments.data,qi.Heading3Block.fragments.data,qi.GridBlock.fragments.data,qi.ImageBlock.fragments.data,qi.InteractiveBlock.fragments.data,qi.InstagramEmbedBlock.fragments.data,qi.LabelBlock.fragments.data,qi.ListBlock.fragments.data,qi.ParagraphBlock.fragments.data,qi.LegacyTableBlock.fragments.data,qi.PullquoteBlock.fragments.data,qi.SlideshowBlock.fragments.data,qi.SoundcloudEmbedBlock.fragments.data,qi.SpotifyEmbedBlock.fragments.data,qi.SummaryBlock.fragments.data,qi.RuleBlock.fragments.data,ri.fragments.data,qi.AudioRelatedLinksBlock.fragments.data,qi.TimestampBlock.fragments.data,qi.TwitterEmbedBlock.fragments.data,qi.UnstructuredBlock.fragments.data,qi.VideoBlock.fragments.data,qi.YouTubeEmbedBlock.fragments.data,qi.VisualStackBlock.fragments.data,qi.DocumentTearBlock.fragments.data,Bn.a.fragments.data,Wi.fragments.data)},AteQ:function(e,t,n){"use strict";var i=n("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.ClaimRating=t.ClaimContent=t.ClaimAttr=t.Claim=void 0;var a=n("3sMT"),o=n("Jqp9"),r=i(n("wXC7"));t.ClaimAttr=(0,o.styled)("div",{target:"e1yf5guu0"})("font-family:",r.default.font.franklinBase,";padding:0.5rem 0 0.4rem 0;font-weight:",r.default.font.weight.medium,";font-size:0.75rem;line-height:1.3125rem;letter-spacing:0.05em;text-transform:uppercase;color:",a.color.content.quaternary,";a{color:",a.color.content.quaternary,";border-bottom:1px solid ",a.color.stroke.tertiary,";&:visited{color:",a.color.content.quaternary,";}}"),t.Claim=(0,o.styled)("div",{target:"e1yf5guu1"})("font-family:",r.default.font.serifMedium,";font-weight:",r.default.font.weight.medium,";font-size:1.35rem;line-height:1.6rem;padding:1rem 0 0;a{text-decoration:none;color:",a.color.content.primary,";&:visited{color:",a.color.content.primary,";}}"),t.ClaimRating=(0,o.styled)("div",{target:"e1yf5guu2"})("color:",a.color.content.primary,";font-family:",r.default.font.franklinBase,";font-weight:",r.default.font.weight.bold,";font-size:1rem;line-height:1.25rem;padding:0.3rem 0;"),t.ClaimContent=(0,o.styled)("div",{target:"e1yf5guu3"})("font-family:",r.default.font.franklinBase,";font-size:1rem;color:",a.color.content.quaternary,";line-height:1.4rem;margin-bottom:1.5rem;",(function(e){return e.theme.breakpointMap.small}),"{line-height:1.4rem;}")},Au1T:function(e,t,n){"use strict";var i=n("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.containerClass=t.bulletClass=t.StyledTableOfContentsItem=t.StyledTableOfContents=void 0;var a=n("Jqp9"),o=i(n("42vy")),r=i(n("wXC7")),s=n("3sMT"),l=(t.containerClass=(0,a.css)("padding:1.5rem 1rem 1.5rem 2rem;border-top:1px solid ",s.color.stroke.quaternary,";border-bottom:1px solid ",s.color.stroke.quaternary,";margin-bottom:1rem;",r.default.breakpoint.medium,"{padding:1.5rem 2.5rem;margin:0 auto 1.5rem;max-width:600px;border-top:1px solid ",s.color.stroke.quaternary,";}",o.default,"{margin-bottom:1rem;font-weight:",r.default.font.weight.light,";}"),t.StyledTableOfContentsItem=(0,a.styled)("div",{target:"eg4oiy60"})("margin-bottom:1rem;width:100%;",r.default.breakpoint.small,"{width:calc(50% - 1rem);margin-right:1rem;}"));t.StyledTableOfContents=(0,a.styled)("div",{target:"eg4oiy61"})("display:flex;flex-direction:column;flex-wrap:wrap;",r.default.breakpoint.small,"{max-height:350px;}",l,"{margin-bottom:1.25rem;}"),t.bulletClass=(0,a.css)("font-family:",r.default.font.franklinBase,";font-size:17px;line-height:24px;margin-left:0;hanging-punctuation:first;a,span{font-size:16px;line-height:18px;color:",s.color.content.primary,";text-decoration:none;font-weight:",r.default.font.weight.bold,";&:hover{text-decoration:underline;}}p,div{font-size:14px;opacity:0.7;font-weight:",r.default.font.weight.medium,";&:hover{text-decoration:none;}}p{margin:0;}")},B05M:function(e,t,n){"use strict";var i=n("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=i(n("+gTf"));t.default=a.default},BFLc:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.trackTransactionSuccess=t.trackSurveyClick=t.trackOnboardingClick=t.trackCTAClick=t.trackTransactionError=t.trackSubscriptionStartEvent=void 0;t.trackSubscriptionStartEvent=function(e,t){e.trackEvent({event:"subscription",subscription:{transaction_app:"arsr_freebie",event_name:"activate",source:"arsr_dock",offer_id:"21cbed70-4962-45a9-b0d1-1bdcdd7fc770",subscription_id:t,bundle_name:"Cooking, Games, Wirecutter and The Athletic",bundle_type:"ADA_without_news",prior_bundles:"XPASS"}})};t.trackTransactionError=function(e,t,n,i){e.trackEvent({event:"moduleInteraction",eventData:{pagetype:t,trigger:"module",type:"operationError"},module:{name:"dock",context:"expanded",audience:n,label:i,region:"StartSubscription",element:{name:"",label:JSON.stringify({type:"serverSide",errorMessage:"UNEXPECTED_ERROR"})}}})};t.trackCTAClick=function(e,t,n,i){e.trackEvent({event:"moduleInteraction",eventData:{pagetype:t,trigger:"module",type:"click"},module:{name:"dock",context:"expanded",audience:n,label:i,region:"",element:{name:"StartSubscriptionBtn",label:"Start trial"}}})};t.trackOnboardingClick=function(e,t,n,i,a){e.trackEvent({event:"moduleInteraction",eventData:{pagetype:t,trigger:"module",type:"click"},module:{name:"dock",context:"expanded",audience:n,label:i,region:"",element:{name:"OnboardingLnk",label:"Get started with All Access",url:a}}})};t.trackSurveyClick=function(e,t,n,i,a){e.trackEvent({event:"moduleInteraction",eventData:{pagetype:t,trigger:"module",type:"click"},module:{name:"dock",context:"expanded",audience:n,label:i,region:"",element:{name:"SurveyLnk",label:"Not interested? Tell us why.",url:a}}})};t.trackTransactionSuccess=function(e,t,n,i,a,o){e.trackEvent({event:"moduleInteraction",eventData:{pagetype:t,trigger:"module",type:"operationSuccess"},module:{name:"dock",context:"expanded",audience:n,label:i,region:"StartSubscription",element:{name:"",label:JSON.stringify({subscriptionId:a,expirationDate:o})}}})}},BHcd:function(e,t,n){"use strict";var i=n("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.ticketmaster=t.resy=t.opentable=t.imdb=t.criticsPick=void 0;var a=i(n("wXC7"));t.criticsPick=encodeURIComponent('\n  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16">\n  <path\n    fill="'.concat(a.default.color.reviewCritPickGold,'"\n    d="M14.34,8.83,16,8l-1.66-.83,1.38-1.24-1.82-.38,1-1.55-1.74.1h0c.66-.57,1.15-1,2.65-2.18l-2.7-.84c-.48.44-.87.8-1.21,1.14L12,1.07l-1.55,1L10.07.27,8.84,1.65,8,0,7.16,1.65,5.93.27,5.55,2.09,4,1.07l.1,1.85L2.34,2.34,2.92,4.1,1.07,4l1,1.55L.27,5.93,1.66,7.17,0,8l1.66.83L.27,10.07l1.82.38L1.07,12l1.85-.1-.58,1.76,1.76-.58L4,14.93l1.55-1,.38,1.81,1.23-1.38L8,16l.84-1.65,1.23,1.38.38-1.81,1.55,1-.1-1.85,1.76.58-.58-1.76,1.85.1-1-1.55,1.82-.38ZM8,13.14a5.14,5.14,0,1,1,2.67-9.52l-.48.61a27.9,27.9,0,0,0-2.56,4L6.14,6l-1.36.82,3.08,4.52C9,9.42,9.5,8.56,10.07,7.7A18.66,18.66,0,0,1,12.2,5,5.13,5.13,0,0,1,8,13.14Z" />\n  </svg>\n')),t.imdb=encodeURIComponent('\n  <svg xmlns="http://www.w3.org/2000/svg" height="20" width="42" >\n    <g fill-rule="evenodd" fill="none">\n      <path fill="#010101" d="M2.02 0A2 2 0 0 0 0 2v16a2 2 0 0 0 2.02 2h37.96A2 2 0 0 0 42 18V2c0-1.1-.9-2-2.02-2H2.02z" />\n      <path fill="#fff"\n        d="M6 16h3V4H6v12zM15.78 3.99l-.75 5.6-.46-3.04c-.13-.98-.26-1.84-.39-2.56H10v12h2.83V8.06l1.2 7.93h2.01l1.13-8.1v8.1H20v-12h-4.22zM24.86 6.15c.12.07.2.18.24.34.04.15.05.5.05 1.04v4.65c0 .8-.05 1.29-.16 1.47-.1.18-.38.27-.83.27V6.04c.34 0 .57.04.7.11zM24.83 16c.75 0 1.32-.04 1.7-.12.37-.09.69-.23.94-.44.25-.2.44-.48.54-.85.1-.36.16-1.08.16-2.15V8.22c0-1.14-.05-1.9-.11-2.29a2.12 2.12 0 0 0-.53-1.05 2.39 2.39 0 0 0-1.23-.68c-.53-.14-1.42-.21-2.95-.21H21v12h3.83zM33.11 13.22c0 .58-.03.96-.09 1.11-.06.16-.31.23-.5.23-.2 0-.32-.07-.38-.22s-.1-.49-.1-1.03V10.1c0-.56.03-.9.09-1.04.05-.14.18-.2.36-.2.2 0 .45.08.52.23.07.16.1.5.1 1v3.13zM29 4v12.17h2.84l.2-.78c.26.32.54.55.85.7.31.16.77.24 1.13.24.5 0 .94-.13 1.3-.4.36-.26.6-.57.69-.92.1-.36.14-.9.14-1.63V9.96c0-.73 0-1.21-.04-1.44a1.65 1.65 0 0 0-1-1.23c-.3-.13-.67-.2-1.08-.2-.37 0-.83.07-1.14.22-.31.14-.6.36-.85.65V4H29z" />\n    </g>\n  </svg>\n'),t.opentable=encodeURIComponent('\n  <svg xmlns="http://www.w3.org/2000/svg" height="133.33" width="576">\n    <path\n      d="M2.67 66.66a15.83 15.83 0 1 1 31.65 0 15.83 15.83 0 0 1-31.65 0M113.8 82.5a15.83 15.83 0 1 1 0-31.66 15.83 15.83 0 0 1 0 31.66zm0-79.17a63.31 63.31 0 0 0-63.3 63.34 63.31 63.31 0 0 0 63.3 63.33 63.31 63.31 0 0 0 63.29-63.33 63.31 63.31 0 0 0-63.3-63.34"\n      fill="#dc273e" />\n    <path\n      d="M566.15 61.77c1 0 1.6-.45 1.6-1.27 0-.73-.41-1.22-1.52-1.22h-1.04v2.49zm-2.48-3.75h2.81c1.56 0 2.9.63 2.9 2.41 0 .89-.56 1.74-1.38 2.04l1.7 3.07H568l-1.3-2.59h-1.51v2.6h-1.52zm8.18 3.85c0-3.48-2.4-5.96-5.51-5.96s-5.48 2.48-5.48 5.96c0 3.52 2.37 5.93 5.48 5.93 3.1 0 5.51-2.4 5.51-5.93zm-12.48 0c0-4.33 3.15-7.3 6.97-7.3 3.85 0 7 2.97 7 7.3 0 4.34-3.15 7.3-7 7.3-3.82 0-6.97-2.96-6.97-7.3zM512.93 91.5c.94 0 1.73-.78 1.73-1.72v-6.36c0-.93-.78-1.72-1.72-1.72h-.28c-.77 0-1.55-.77-1.55-1.54V42.49c0-.86-.86-1.72-1.72-1.72h-6.32c-.86 0-1.72.86-1.72 1.72V84.2l.02 1.09c0 3.1 3.1 6.21 6.21 6.21zM234.48 50.72c8.6 0 15.87 7.3 15.87 15.94 0 8.73-7.12 15.82-15.87 15.82a15.89 15.89 0 0 1 0-31.76zm0-10.05a25.94 25.94 0 0 0-25.83 26 25.57 25.57 0 0 0 25.83 25.85 25.6 25.6 0 0 0 25.91-25.86 25.98 25.98 0 0 0-25.9-25.99zM440.6 81.2c-.47 1.33-3.28 3.83-6.49 3.83-3.35 0-5.23-2.03-5.23-5.08 0-3.2 2.27-5.16 6.4-5.16 2.9 0 5.32 1.1 5.32 1.1zm-4.22-26.65a45.58 45.58 0 0 0-12.34 1.8c-.78.23-1.49.85-1.17 2.18l.78 4.07c.15 1.1.86 1.95 2.03 1.56 2.1-.62 6.87-1.33 10.15-1.33 3.83 0 5.16 2.2 5 6.8 0 0-3.28-1.01-6.95-1.01-9.14 0-14.37 4.92-14.37 11.33 0 7.74 5 12.35 12.18 12.35 5.63 0 9.22-2.5 11.33-4.53v1.94c0 .94.78 1.72 1.72 1.72h.64l.22.01h2.65c.94 0 1.72-.78 1.72-1.72V70.26c0-9.85-2.34-15.71-13.59-15.71zm-65.58 0a14.56 14.56 0 0 0-11.6 5.2v-2.7c0-.94-.8-1.72-1.73-1.72h-4.08c-.86 0-1.72.7-1.72 1.72v32.67c0 .94.86 1.72 1.72 1.72h5.78c1.71 0 2.26-.39 2.26-1.72V69.1c.86-2.5 3.12-5.63 7.81-5.63 4.38 0 6.25 2.89 6.25 7.58v18.68c0 .94.78 1.72 1.72 1.72h6.33c.86 0 1.71-.78 1.71-1.72V71.04c0-8.75-2.96-16.5-14.45-16.5zm-86 28.84c-4.53 0-7.5-2.03-7.5-2.03v-12.9c.78-2.03 3.28-5 7.97-5 5.62 0 8.51 4.92 8.51 10s-3.04 9.93-8.98 9.93zm1.8-28.84a15.58 15.58 0 0 0-11.78 5.38v-2.88c0-.94-.79-1.72-1.72-1.72h-3.84c-.94 0-1.72.78-1.72 1.72v47.37c0 .86.78 1.72 1.72 1.72h6.32c.86 0 1.72-.86 1.72-1.72v-13.6c1.64.62 5.08 1.48 8.67 1.48 10.78 0 17.9-8.28 17.9-18.84 0-10.94-7.43-18.91-17.27-18.91zm257.6 14.3c-.16-3.52-2.97-6.25-6.95-6.25-4.38 0-7.19 2.65-7.66 6.25zm-6.72-14.3c9.37 0 16.56 6.95 16.56 16.72 0 .55-.08 1.8-.16 2.35a1.83 1.83 0 0 1-1.71 1.64h-23.13c.08 4.45 3.75 8.36 8.99 8.36 3.59 0 6.09-1.33 7.73-2.65.86-.71 1.8-.79 2.34 0l3.05 4.06c.62.7.7 1.56-.16 2.34a20.36 20.36 0 0 1-13.43 4.93c-10.78 0-18.28-8.6-18.28-18.92 0-10.16 7.5-18.83 18.2-18.83zm-61.13 28.84c-4.69 0-7.19-2.97-7.97-5v-12.9s2.97-2.03 7.5-2.03c5.94 0 8.98 4.84 8.98 9.92 0 5.09-2.89 10.01-8.51 10.01zm.86-28.84c-3.6 0-7.19.86-8.83 1.56V42.35c0-.86-.78-1.72-1.72-1.72h-6.33c-.86 0-1.71.86-1.71 1.72v47.37c0 .94.85 1.72 1.71 1.72h2.74l.16-.01h.72c.95 0 1.74-.78 1.74-1.72v-2.67l.03-.13s4.14 5.4 12.03 5.4c9.85 0 16.95-8.6 16.95-18.93 0-10.55-6.8-18.83-17.5-18.83zm-55.27-13.92H385.2c-.86 0-1.48.7-1.48 1.49v6.4c0 .79.62 1.5 1.48 1.5h13.25v39.94c0 .78.7 1.48 1.49 1.48h7.26c.78 0 1.49-.7 1.49-1.48V50h13.25c.86 0 1.49-.7 1.49-1.48v-6.41c0-.78-.63-1.49-1.49-1.49zm-87.46 28.22c-.16-3.52-2.97-6.25-6.95-6.25-4.38 0-7.19 2.65-7.66 6.25zm-6.72-14.3c9.38 0 16.56 6.95 16.56 16.72 0 .55-.08 1.8-.15 2.35a1.83 1.83 0 0 1-1.72 1.64h-23.12c.08 4.45 3.75 8.36 8.98 8.36 3.6 0 6.1-1.33 7.73-2.65.86-.71 1.8-.79 2.35 0l3.04 4.06c.63.7.7 1.56-.16 2.34a20.36 20.36 0 0 1-13.43 4.93c-10.78 0-18.28-8.6-18.28-18.92 0-10.16 7.5-18.83 18.2-18.83"\n      fill="#2e2d2d" />\n    </svg>\n'),t.ticketmaster=encodeURIComponent('\n  <svg xmlns="http://www.w3.org/2000/svg" width="540.7" height="76.7">\n    <path\n      d="M338.3 66.8c10 0 13.2-7 15.3-15.3h-4.7c-6.6 0-17.4 1.1-17.4 9.9 0 3.6 3.4 5.4 6.8 5.4m13.2.7h-.2c-4.6 5.9-9.3 9.2-16.7 9.2-9.4 0-16-5.2-16-14.8 0-17.1 19.1-18.4 31.8-18.4h4.7c.4-1.4.4-3 .4-4.4 0-5.3-5.6-6.8-10.3-6.8-6 0-11.7 1.5-17 4l1.9-10.7c5.7-2 11.5-3.1 17.6-3.1 10.3 0 20 3.8 20 16 0 6.9-5 27.2-6.3 37h-11.3l1.4-8M2.1 23.6H12L14.2 13l14.5-4.8-3.4 15.4h12.1l-2.1 9.9h-12l-5 22.6c-.3 1.2-.6 3-.6 5 0 3.2 2.1 5 5.1 5a18 18 0 0 0 6.6-1.1L27 75.4c-2.4.5-5 1.2-7.3 1.2-9.1 0-15.6-3.6-15.6-13.5C4.2 59 5 55 6 51l3.9-17.5H0l2.1-9.9M47.9 1.3h13.5l-2.9 12.9H45.1l2.8-12.9zm-5 22.3h13.5l-11 51.8H31.9l11-51.8m54.2 11.9a18.2 18.2 0 0 0-9.8-2.6c-10.8 0-16.8 10-16.8 19.8 0 6.7 2.2 13.5 11.4 13.5 3.4 0 7.5-1 11-2.6l-1.5 10.6a29 29 0 0 1-13 2.4c-13.4 0-22-9-22-22.3 0-18 12-31.9 30.6-31.9 5 0 9.8 1 13.4 2l-3.3 11.1M112 0h13.4l-9 42.4h.2l18.8-18.8H153l-24.8 23.7 15.6 28.1h-15.2L115.1 48h-.2l-5.8 27.4H95.9L112 0m89.5 23.6h9.8l2.3-10.6L228 8.2l-3.3 15.4h12l-2 9.9h-12.2L217.7 56c-.3 1.2-.6 3-.6 5 0 3.2 2.1 5 5.1 5a18 18 0 0 0 6.6-1.1l-2.3 10.4c-2.3.5-5 1.2-7.3 1.2-9.1 0-15.6-3.6-15.6-13.5 0-4 .8-8 1.7-12.1l3.9-17.5h-9.8l2.1-9.9"\n      fill="#026CDF"/>\n    <path\n      d="M197 42.1c0-13.1-8.4-19.7-21.2-19.7-17 0-29.5 15.5-29.5 31.6 0 15.4 10 22.6 25 22.6 5.5 0 11.2-1.3 16.5-2.9l1.7-10.6c-5 2.3-10.4 3.7-16 3.7-8.5 0-13.6-3-14.2-11.2l-.1-1.5V53.8c0-3.5.8-7 2.2-10.3 2.6-6.6 6.2-11.1 14.2-11.1 5.6 0 8.5 3.1 8.5 8.6 0 1.2 0 2.3-.3 3.6h-18.4c-1.2 4-1.4 6.7-1.4 9.2h31.7c.8-3.8 1.3-7.6 1.3-11.6m45.6-12.8l1.1-5.8h12.6l-1.2 7h.2c3.6-5.4 9.6-8.2 15.9-8.2 6.1 0 12.5 3.6 13.2 9.9h.2c3.4-6.8 11-9.9 18.2-9.9 7.7 0 14.4 6.4 14.4 14.2 0 4.6-1.2 9.9-2.3 14l-5.5 24.8H296l5.5-25.2c.7-3.1 1.7-8 1.7-11 0-3.9-3-6.3-6.3-6.3-9.4 0-11.7 10.9-13.4 17.9L278 75.4h-13.4l5.4-25.2a60 60 0 0 0 1.7-11c0-3.9-3-6.3-6.3-6.3-9.2 0-11.7 11-13.4 17.9l-5.3 24.6h-13.5l9.4-46m165.2 4.8a21 21 0 0 0-9-2c-4 0-9 1.2-9 5.3 0 6.6 17.5 9 17.5 21.6 0 13.5-11.8 17.5-23.3 17.5a38 38 0 0 1-15.8-3l2.9-10.8c3.8 2 7.6 4 12.9 4 4.5 0 9.2-1.5 9.2-5.8 0-8.3-17.5-9.1-17.5-22 0-12.2 11.8-16.6 22.4-16.6 5 0 10 1 12.6 1.6l-2.9 10.2m8.6-10.6h9.8l2.3-10.6L443 8.2l-3.3 15.4h12l-2 9.9h-12.2L432.6 56c-.3 1.2-.6 3-.6 5 0 3.2 2.1 5 5.2 5a18 18 0 0 0 6.5-1.1l-2.3 10.4c-2.3.5-5 1.2-7.3 1.2-9.1 0-15.6-3.6-15.6-13.5 0-4 .9-8 1.8-12.1l3.8-17.5h-9.8l2.1-9.9m91.4 7.1l1.2-7h13l-1.8 9.8h.2c2.4-5.6 9-11 15.3-11 1.7 0 3.5.1 5 .5L538 36.1c-1.5-.5-3.4-.8-5.2-.8-9.5 0-14.1 8.5-15.8 16.9l-5 23.2h-13.4l9.2-44.8m-9.3 11.5c0-13.1-8.5-19.7-21.3-19.7-17 0-29.4 15.5-29.4 31.6 0 15.4 10 22.6 25 22.6 5.4 0 11.2-1.3 16.4-2.9l1.7-10.6c-5 2.3-10.3 3.7-15.9 3.7-8.6 0-13.6-3-14.3-11.2v-1.8c0-3.5.8-7 2.1-10.3 2.6-6.6 6.3-11.1 14.2-11.1 5.7 0 8.6 3.1 8.6 8.6l-.3 3.6h-18.5c-1.2 4-1.4 6.7-1.4 9.2h31.7c.9-3.8 1.4-7.6 1.4-11.6"\n      fill="#026CDF"/>\n  </svg>\n'),t.resy=encodeURIComponent('\n  <svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="150" height="66">\n    <defs><path\n      id="a"\n      d="M0 66h150V0H0zm41.6-21c-6.3 0-11.4-4-13.1-9.6H27v9.3h-5.7V19.3H31c1.5 0 2.8.3 4 .7 1 .4 2 1 2.8 1.7.8.7 1.3 1.5 1.7 2.5.4 1 .6 2 .6 3 0 1.7-.4 3.2-1.1 4.4a7.8 7.8 0 0 1-3.2 2.8 6 6 0 0 1-1.6.7 8 8 0 0 0 7.4 4.6zm29-.3H52.4V19.4h17.2v5H58.2v4.9h8.7v4.9h-8.7v5.4h12.3zm16.9-19c0 1 .5 1.6 1.4 2.2 1 .5 2.2 1 3.8 1.3 1 .2 1.9.5 2.8 1 .9.3 1.7.8 2.4 1.5a7.2 7.2 0 0 1 2.4 5.7c0 1.1-.2 2.2-.8 3.2a8 8 0 0 1-2 2.5 12.3 12.3 0 0 1-7 2.2A15.7 15.7 0 0 1 84 44a12.8 12.8 0 0 1-4-3l3.7-4a12.2 12.2 0 0 0 2.7 2.2 8.7 8.7 0 0 0 3.9 1 4.6 4.6 0 0 0 2.5-.7l.9-1c.2-.2.3-.6.3-1 0-1-.5-1.7-1.4-2.3-1-.5-2.4-1-4.4-1.5-1-.2-1.9-.6-2.7-1-.8-.4-1.6-1-2.2-1.6a6.6 6.6 0 0 1-1.9-4.7c0-1 .2-2 .6-3a7 7 0 0 1 1.8-2.5c.7-.7 1.7-1.3 2.9-1.7 1.2-.4 2.5-.6 4.1-.6a13.4 13.4 0 0 1 6 1.3l1.8 1.2 1 .9-3.4 3.6a22.9 22.9 0 0 0-2.2-1.4c-.4-.3-1-.5-1.5-.6-.6-.2-1.1-.2-1.8-.2a4.2 4.2 0 0 0-2.3.7l-.7.7c-.2.3-.3.6-.3 1zm44.6-6.3L123 34v10.7h-5.9V34l-9-14.7h6.6l5.6 9.5 5.4-9.5zM30.8 31c1.1 0 2-.4 2.6-1 .6-.6 1-1.4 1-2.4s-.4-1.8-1-2.4c-.6-.7-1.5-1-2.6-1h-3.5V31z"/>\n      <mask id="b" fill="#fff"><use fill-rule="evenodd" xlink:href="#a"/></mask>\n    </defs>\n    <g fill="none" fill-rule="evenodd"><use xlink:href="#a"/>\n      <g fill="#ff462d" mask="url(#b)"><path d="M0 0h150v66H0z"/></g>\n    </g>\n  </svg>\n')},BHh2:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.navHiddenClass=void 0;var i=n("Jqp9");t.navHiddenClass=(0,i.css)("display:none;")},BPYT:function(e,t,n){"use strict";n.d(t,"a",(function(){return $}));var i=n("RIqP"),a=n.n(i),o=n("yXPU"),r=n.n(o),s=n("lSNA"),l=n.n(s),c=n("o0o1"),u=n.n(c),d=(n("ls82"),n("pQqS")),p=n("uj8K"),f=n("NW2b"),m=n("E7dQ"),h=n("2Y8s"),g=n("x04V");function y(e){var t,n=null===(t=document.getElementById(e))||void 0===t?void 0:t.getElementsByTagName("iframe")[0];return n?{renderedHeight:n.offsetHeight,renderedWidth:n.offsetWidth}:{renderedHeight:-1,renderedWidth:-1}}var v=[d.PUB_EVENTS.AD_RENDERED,d.PUB_EVENTS.AD_LOADED,d.PUB_EVENTS.AD_VIEWABLE];function b(e){var t,n,i;return(null===(t=window.AdSlot)||void 0===t||null===(n=t.getSlot(e))||void 0===n||null===(i=n.getResponseInformation())||void 0===i?void 0:i.advertiserId)||void 0}function _(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function w(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?_(Object(n),!0).forEach((function(t){l()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):_(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var x=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"impression",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i=e.adSlotEventName,a=void 0===i?"":i,o=e.id,r=e.position,s=e.pos,l=e.lineItemId,c=e.sourceAgnosticLineItemId,u=e.creativeId,p=e.sourceAgnosticCreativeId,f=e.timeDefined,_=e.timeCalled,x=e.timeCallSent,k=e.timeRendered,O=e.timeLoaded,T=e.timeViewed,C=e.isEmpty,E=e.slot,S=e.adElementTop,P=e.adElementBottom,I=Object(m.a)(),M=a===d.PUB_EVENTS.AD_CALLED?Object(g.b)(E,Object(h.a)()):{},A=a===d.PUB_EVENTS.AD_VIEWABLE?y(o):{},j=v.includes(a)?b(o):void 0;return{event:t,eventData:w({trigger:"ad",type:t},n),ad:w(w(w(w(w(w(w(w(w(w(w(w(w(w(w(w(w(w(w({},{adSlotEventName:a}),{pageType:I}),o&&{slotId:o}),r&&{position:r}),s&&{position:s}),j&&{advertiserId:j}),(l||c)&&{lineItemId:"".concat(l||c)}),(u||p)&&{creativeId:"".concat(u||p)}),f&&{timeDefined:f}),_&&{timeCalled:_}),x&&{timeCallSent:x}),k&&{timeRendered:k}),O&&{timeLoaded:O}),T&&{timeViewed:T}),void 0!==S&&{adElementTop:S}),void 0!==P&&{adElementBottom:P}),void 0!==C&&{isEmpty:C}),M),A)}},k=n("cKmz"),O=n.n(k),T=function(e){try{var t;return!(!e||"undefined"==typeof document||!document.body.contains(e)||"none"===(null===(t=window.getComputedStyle(e))||void 0===t?void 0:t.display))}catch(e){return!1}},C=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.id,n=e.position,i=e.AdSlotElement,a="undefined"!=typeof window?window:{},o=a.scrollY,r=void 0===o?0:o,s=i,l="function"==typeof(null==s?void 0:s.getBoundingClientRect)?s.getBoundingClientRect():{},c=l.top,u=void 0===c?0:c,d=l.bottom,p=void 0===d?0:d,f=T(s);return{slotId:t,position:n,adElementTop:Math.round(u+r),adElementBottom:Math.round(p+r),isVisible:f}},E=function(){return Math.max(document.documentElement.clientHeight,window.innerHeight||0)},S=function(e,t){return t.adElementTop>=e.adElementTop},P=function(e,t){return t.adElementTop-e.adElementBottom},I=function(e){return"number"==typeof(null==e?void 0:e.adElementBottom)&&"number"==typeof(null==e?void 0:e.adElementTop)},M=function(e,t){var n={},i=t.find((function(t){return t.slotId===e}));if(null==i||!i.isVisible)return n;var a=t.reduce((function(e,t){return t.slotId!==i.slotId&&t.isVisible&&I(i)&&I(t)&&(S(i,t)&&P(i,t)<E()||!S(i,t)&&P(t,i)<E())?[].concat(e,t.position):e}),[]);return a.length>0&&((n=x({adSlotEventName:"TwoAdsInViewport",id:i.slotId,position:i.position,adElementTop:i.adElementTop,adElementBottom:i.adElementBottom})).ad.sharesViewportWith=a.join(",")),n},A=function(e){return function(t){var n;if(null!=t&&t.id){var i=t.id,a=Object.values(O()()).map(C),o=M(i,a);null!=o&&null!==(n=o.ad)&&void 0!==n&&n.sharesViewportWith&&e(o)}}};function j(e){var t,n=document.getElementById(e);return null!==(t=null==n?void 0:n.getAttribute("data-google-query-id"))&&void 0!==t?t:""}function N(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function L(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?N(Object(n),!0).forEach((function(t){l()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):N(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var D=function(e){return function(t){if(null!=t&&t.id){var n,i,a,o=t.id,r=t.creativeId,s=t.lineItemId,l=y(o);if(i=(n=l).renderedHeight,a=n.renderedWidth,i>=0&&i<=10||a>=0&&a<=10){var c=x({adSlotEventName:"adDisplayIssue",id:o,creativeId:r,lineItemId:s}),u={googleQueryId:j(o),adDisplayIssue:"AdTooSmall"};e(L(L({},c),{},{ad:L(L(L({},c.ad),u),l)}))}}}},R={hover:new RegExp(/1_hover|4_all/)},B=function(e,t){return R.hover.test(t)&&["hover_mouse_enter","hover_mouse_leave"].includes(e)};function z(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function F(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?z(Object(n),!0).forEach((function(t){l()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):z(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var U=[d.PUB_EVENTS.AD_SLOT_READY,d.PUB_EVENTS.AD_DEFINED,d.PUB_EVENTS.AD_CALLED,d.PUB_EVENTS.AD_REQUEST_SENT,d.PUB_EVENTS.AD_RENDERED,d.PUB_EVENTS.AD_LOADED,d.PUB_EVENTS.AD_VIEWABLE,d.PUB_EVENTS.AD_EMPTY],H=function(e){return!(!e||"function"!=typeof e)},W=function(e){return U.map((function(t){return Object(p.subscriber)(t,"all",function(e,t){var n;return e===d.PUB_EVENTS.AD_LOADED?n=A(t):e===d.PUB_EVENTS.AD_VIEWABLE&&(n=D(t)),function(i){H(t)&&(t(x(F(F({},i),{},{adSlotEventName:e}))),H(n)&&n(F(F({},i),{},{adSlotEventName:e})))}}(t,e))}))},q=function(e){var t,n,i=e.ad,a=i.creativeId,o=i.lineItemId;"number"==typeof a&&(e.ad.creativeId="".concat(a)),"number"==typeof o&&(e.ad.lineItemId="".concat(o)),null===(t=window)||void 0===t||null===(n=t.dataLayer)||void 0===n||n.push(e)},V=function(e,t){q({event:"impression",eventData:{trigger:"ad",action:e,type:"impression"},ad:{slotId:t.id,position:t.position,lineItemId:t.lineItemId,creativeId:t.creativeId}})},G=function(e){return V("time_viewable_start",e)},Y=function(e){return V("time_viewable_end",e)},X=function(){var e=r()(u.a.mark((function e(t,n){var i;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,a=void 0,a=["DFP_EngMetrics"].map((function(e){return new Promise((function(t){Object(f.c)(e).subscribe((function(e){return t(null==e?void 0:e.variant)}))}))})),Promise.all(a).then((function(e){return e.some((function(e){return e}))}));case 2:if(e.sent){e.next=5;break}return e.abrupt("return");case 5:return Object(f.e)("DFP_EngMetrics"),e.next=8,new Promise((function(e){Object(f.c)("DFP_EngMetrics").subscribe((function(t){return e(null==t?void 0:t.variant)}))}));case 8:if(i=e.sent,B(t,i)){e.next=12;break}return e.abrupt("return");case 12:q({event:"moduleInteraction",eventData:{type:n.type,trigger:"ad"},ad:{slotId:n.id,position:n.position,creativeId:n.creativeId,lineItemId:n.lineItemId}});case 13:case"end":return e.stop()}var a}),e)})));return function(t,n){return e.apply(this,arguments)}}(),Z=function(e){return X("hover_mouse_enter",e)},J=function(e){return X("hover_mouse_leave",e)},K=!1,$=function(e){if("undefined"!=typeof window&&!K){K=!0;var t=W(e);p.addSubscribers.apply(void 0,a()(t).concat([Object(p.subscriber)(d.PUB_EVENTS.AD_ENTERED_VIEWPORT,"all",G),Object(p.subscriber)(d.PUB_EVENTS.AD_LEFT_VIEWPORT,"all",Y),Object(p.subscriber)(d.PUB_EVENTS.AD_MOUSE_ENTER,"all",Z),Object(p.subscriber)(d.PUB_EVENTS.AD_MOUSE_LEAVE,"all",J)]))}}},BfjZ:function(e,t,n){"use strict";var i=this&&this.__createBinding||(Object.create?function(e,t,n,i){void 0===i&&(i=n);var a=Object.getOwnPropertyDescriptor(t,n);a&&!("get"in a?!t.__esModule:a.writable||a.configurable)||(a={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,i,a)}:function(e,t,n,i){void 0===i&&(i=n),e[i]=t[n]}),a=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&i(t,e,n);return a(t,e),t},r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var s=r(n("q1tI")),l=n("tHll"),c=o(n("5LTd")),u=n("rjmw"),d=n("etPP");t.default=function(){var e,t,n=(0,l.useUnit)(u.config).unit;return(null==n?void 0:n.canShow)?(null===(e=null==n?void 0:n.content)||void 0===e?void 0:e.loggedOut)?s.default.createElement(s.default.Fragment,null," ",s.default.createElement("span",{className:c.topperWrapClass,"data-testid":"onsite-messaging-unit-".concat(null===u.config||void 0===u.config?void 0:u.config.name),"data-campaign":null==n?void 0:n.campaign,"data-audience":null==n?void 0:n.audience},"Already a subscriber?"," ",s.default.createElement(d.Button,{component:"a",testId:"login-button",className:c.loginLink,onClick:null==n?void 0:n.trackInteraction,href:null===(t=null==n?void 0:n.content)||void 0===t?void 0:t.clickThroughURI},"Log in."))):s.default.createElement("span",{"data-testid":"onsite-messaging-unit-".concat(null===u.config||void 0===u.config?void 0:u.config.name),"data-campaign":null==n?void 0:n.campaign,"data-audience":null==n?void 0:n.audience}):null}},Bi8q:function(e,t,n){"use strict";var i=n("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.heading3Selector=t.defaultHeading3Style=t.default=void 0;var a=n("Jqp9"),o=n("3sMT"),r=i(n("wXC7")),s=i(n("WThh")),l=n("6l8D"),c=(0,s.default)(["medium","mediumLarge","small"]),u=(0,a.css)("color:",o.color.content.secondary,";font-weight:",r.default.font.weight.bold,";font-size:",r.default.font.size(18),";line-height:",r.default.font.size(22),";"),d=t.defaultHeading3Style=function(e){return(0,a.css)("color:",o.color.content.secondary,";font-family:",r.default.font.franklinBase,";font-weight:",r.default.font.weight.bold,";",c(e,{fontSize:[18,20],lineHeight:[24,28]}),";")},p=(0,a.themeFn)("treatment",{none:d,magazine:function(e){return(0,a.css)("color:",o.color.content.primary,";font-family:",r.default.font.magazineSansBase,";font-weight:",r.default.font.weight.bold,";",c(e,{fontSize:[15,16],lineHeight:[20,20]}),";")},sponsored:(0,a.css)(u,";font-family:",r.default.font.sponsoredBase,";"),sponsoredSensitive:(0,a.css)(u,";font-family:",r.default.font.sponsoredSensitive,";"),"t-magazine":function(e){return(0,a.css)("color:",o.color.content.secondary,";font-family:",r.default.font.tmagSansBase,";font-weight:",r.default.font.weight.bold,";letter-spacing:0.02em;",c(e,{fontSize:[15,18],lineHeight:[20,28]}),";")},"morning-briefing":function(e){return(0,a.css)("font-size:",r.default.font.size(21),";line-height:",r.default.font.size(31),";font-family:",r.default.font.franklinBase,";margin-top:35px;margin-bottom:25px;border-top:1px solid ",o.color.stroke.quaternary,";padding-top:8px;&:last-child{margin-bottom:0;}",e.theme.breakpointMap.medium,"{margin-bottom:25px;}")},atHome:function(e){return(0,a.css)("font-style:normal;font-family:",r.default.font.imperial,";font-weight:300;letter-spacing:0.2px;color:",o.color.content.secondary,";-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale;margin:0 20px 50px;font-size:19px;line-height:30px;width:auto;",e.theme.breakpointMap.small,"{width:48%;}",e.theme.breakpointMap.medium,"{padding-right:0;font-size:19px;margin:0 20px 50px;width:48%;}",e.theme.breakpointMap.mediumLarge,"{font-size:21px;margin:0 0 70px;line-height:33px;width:48%;}.",l.linkClass,"{font-weight:bold;border-bottom:2px solid ",o.color.stroke.primary,";color:",o.color.content.primary,";&:hover,&:focus{border-bottom:0;}}strong{color:",o.color.content.primary,";}")},liveSplitLayout:(0,a.css)("color:",o.color.content.secondary,";font-family:",r.default.font.franklinBase,";font-weight:",r.default.font.weight.bold,";font-size:",r.default.font.size(18),";line-height:",r.default.font.size(24),";margin-bottom:",r.default.font.size(12),";")}),f=(0,a.themeFn)("languageDirection",{rightToLeft:(0,a.css)("text-align:right;direction:rtl;unicode-bidi:isolate;")}),m=(0,a.themeFn)("language",{"zh-hans":(0,a.css)("font-family:",r.default.font.cheltenhamSCSerifBase,";font-weight:",r.default.font.weight.bold,";font-style:normal;"),"zh-hant":(0,a.css)("font-family:",r.default.font.cheltenhamTCSerifBase,";font-weight:",r.default.font.weight.bold,";font-style:normal;")}),h=function(e){return(0,a.css)("margin-bottom:",r.default.font.size(12),";",e.theme.breakpointMap.medium,"{margin-bottom:",r.default.font.size(15),";}.",l.linkClass,"{text-decoration:underline;text-decoration-thickness:1px;text-underline-offset:2px;&:hover,&:focus{text-decoration:none;}}")},g=(t.heading3Selector=function(e){return(0,a.css)("h3{",h(e),";",p(e),";}")},(0,a.styled)("h3",{target:"e1gnsphs0"})(h,";",f,";",m,";",p,";"));t.default=g},Bk96:function(e,t,n){"use strict";n.d(t,"e",(function(){return r})),n.d(t,"a",(function(){return s})),n.d(t,"c",(function(){return l})),n.d(t,"d",(function(){return c})),n.d(t,"b",(function(){return u}));var i=n("Jqp9"),a=n("wXC7"),o=n.n(a),r=Object(i.css)("width:100%;display:flex;flex-direction:column;align-items:center;"),s=Object(i.css)("margin-top:-20px;width:100%;"),l=Object(i.css)("background:linear-gradient(180deg,hsla(0,0%,100%,0),",o.a.color.white,");position:relative;height:110px;margin-top:-126px;width:100%;"),c=Object(i.css)("position:relative;"),u=Object(i.css)("font-family:",o.a.font.franklinBase,";height:40px;width:250px;font-size:15px;font-weight:bold;background:#edf2f5;border:1px solid #93abbc;border-radius:3px;margin:10px auto;color:",o.a.color.blue20,";&:active{background:#bed0dc;border:1px solid #7399b3;}")},"C+GW":function(e,t,n){"use strict";var i,a=n("VkAN"),o=n.n(a),r=n("gcR/"),s=n.n(r),l=(n("q1tI"),n("eFc+")),c=n.n(l),u=n("4G62"),d=n.n(u),p=n("WPUH"),f=n("Jqp9"),m=n("wXC7"),h=n.n(m),g=Object(f.css)("margin:",h.a.breakpoint.mobileBlockMargins,";",h.a.breakpoint.medium,"{margin:",h.a.breakpoint.desktopMediaMargins,";}"),y=function(e){var t=e.data,n=e.usePhotoViewer;if(!t)return null;if(!t.imageOne)return null;if(!t.imageTwo)return null;var i={media:t.imageOne,size:""},a={media:t.imageTwo,size:""};return s()(d.a,{className:g,size:t.size.toLowerCase()},void 0,s()(p.a,{data:i,useMobileCrop:Boolean(i.media),diptychChild:!0,lazyLoad:!0,mediaType:"Image",usePhotoViewer:n}),s()(p.a,{data:a,useMobileCrop:Boolean(a.media),diptychChild:!0,lazyLoad:!0,mediaType:"Image",usePhotoViewer:n}))};y.displayName="DiptychBlock",y.defaultProps={usePhotoViewer:!0},y.fragments={data:c()(i||(i=o()(['\n    fragment DiptychBlock_data on DiptychBlock {\n      size\n      imageOne {\n        id\n        ... on Image {\n          id\n          imageType\n          url\n          uri\n          credit\n          legacyHtmlCaption\n          altText\n          crops(\n            renditionNames: ["articleLarge", "jumbo", "superJumbo", "popup", "mobileMasterAt3x"]\n          ) {\n            renditions {\n              url\n              name\n              width\n              height\n            }\n          }\n          caption {\n            text\n            content {\n              ... on ParagraphBlock {\n                __typename\n                content {\n                  ... on TextInline {\n                    text\n                    ...TextInline_content\n                  }\n                }\n              }\n            }\n          }\n        }\n      }\n      imageTwo {\n        id\n        ... on Image {\n          id\n          imageType\n          url\n          uri\n          credit\n          legacyHtmlCaption\n          altText\n          crops(\n            renditionNames: ["articleLarge", "jumbo", "superJumbo", "popup", "mobileMasterAt3x"]\n          ) {\n            renditions {\n              url\n              name\n              width\n              height\n            }\n          }\n          caption {\n            text\n            content {\n              ... on ParagraphBlock {\n                __typename\n                content {\n                  ... on TextInline {\n                    text\n                    ...TextInline_content\n                  }\n                }\n              }\n            }\n          }\n        }\n      }\n    }\n  '])))};t.a=y},"C/YW":function(e,t,n){"use strict";var i=n("TqRt"),a=n("cDf5");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=i(n("q1tI")),r=n("Jqp9"),s=i(n("5ugd")),l=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=a(e)&&"function"!=typeof e)return{default:e};var n=u(t);if(n&&n.has(e))return n.get(e);var i={__proto__:null},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var r in e)if("default"!==r&&{}.hasOwnProperty.call(e,r)){var s=o?Object.getOwnPropertyDescriptor(e,r):null;s&&(s.get||s.set)?Object.defineProperty(i,r,s):i[r]=e[r]}return i.default=e,n&&n.set(e,i),i}(n("crgc")),c=i(n("/4sL"));function u(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(u=function(e){return e?n:t})(e)}var d=function(e){var t=e.host,n=e.onLogin,i=e.newsletter,a=e.lireParams,u=e.isOpen,d=e.handleClose,p=e.overlayClassName,f=e.modalClassName,m=e.dismissClassName,h=e.closeIconStroke;return o.default.createElement(s.default,{isOpen:u,handleClose:d,overlayClassName:(0,r.cx)(l.overlayClass,p),className:(0,r.cx)(l.modalClass,f),dismissClassName:(0,r.cx)(l.dismissClass,m),contentLabel:"Log in and Registration",role:"dialog",closeIconStroke:h,shouldFocusAfterRender:!0,shouldReturnFocusAfterClose:!0,shouldCloseOnOverlayClick:!0,shouldCloseOnEsc:!0},o.default.createElement(c.default,{host:t,onLogin:function(){d(),n()},newsletter:i,lireParams:a}))};d.displayName="LireLoginModal";t.default=d},"C/n8":function(e,t,n){"use strict";var i=n("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=i(n("aN1B"));t.default=a.default},C2Ll:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.parseImageData=t.getTwitterCrop=t.getPromotionalMediaCrop=t.getPromoMedia=t.getPromoCropObj=t.getLedeVideoCrops=t.getCropByPriority=t.getCrop=t.get75Crop=t.get150Crop=t.flattenCropArray=t.filterCrops=t.fetchVideoThumb=t.fetchHeadshots=t.defaultPromoCrop=t.defaultCrop=t.collapsePromoMedia=void 0;t.getPromoMedia=function(e){return null!=e&&e.imageExtensions?e.imageExtensions.filteredCrops:null};var i=t.getCrop=function(e,t){return e.find((function(e){return e.name===t}))},a=t.getCropByPriority=function(e,t){if(!e)return null;for(var n=0;n<t.length;n+=1){var a=i(e,t[n]);if(null!=a&&a.url)return"images"===a.url.split("/")[0]&&(a.url="https://static01.nyt.com/".concat(a.url)),a}return null},o=t.defaultCrop="https://static01.nyt.com/images/icons/t_logo_150_black.png",r=t.defaultPromoCrop={width:365,height:60,url:"https://static01.nyt.com/images/icons/t_logo_291_black.png"},s=(t.getPromoCropObj=function(e){return a(e,["facebookJumbo","watch308","videoSixteenByNineJumbo1600","articleLarge"])||r},t.getTwitterCrop=function(e){return a(e,["videoSixteenByNineJumbo1600","articleLarge"])||o},t.get150Crop=function(e){return a(e,["thumbLarge"])||o}),l=(t.get75Crop=function(e){return a(e,["thumbStandard"])||o},t.flattenCropArray=function e(t){return t.reduce((function(t,n){return t.concat(Array.isArray(n)?e(n):n)}),[])}),c=(t.getPromotionalMediaCrop=function(e){var t;return e?e.promoCrops?e.promoCrops:null!==(t=e.promotionalMedia)&&void 0!==t&&t.promoCrops?e.promotionalMedia.promoCrops:null:null},function(e,t){var n;if(!e||!e.crops||0===e.crops.length)return{};var i=e.crops.map((function(e){return e.renditions})),a=l(i),o=a[0];t&&(o=a.find((function(e){return e.name===t}))||a[0]);var r=o,s=r.height,c=r.width,u=r.url;return{caption:(e.legacyHtmlCaption?e.legacyHtmlCaption:null===(n=e.caption)||void 0===n?void 0:n.text)||null,credit:e.credit||null,url:u,orientation:s>=c?"layoutVertical":"layoutHorizontal",height:s,width:c}});t.parseImageData=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"jumbo";return c(e,t)},t.fetchVideoThumb=function(e){return c(e,"videoSixteenByNine600")},t.fetchHeadshots=function(e){var t;try{t=e.creators.map((function(e){var t=e.promotionalMedia,n=e.displayName,i=e.bioUrl;return{crops:(null==t?void 0:t.crops)||[],name:n,bioUrl:i||null}}))}catch(e){return null}return t.map((function(e){var t=e.name,n=e.crops,i=e.bioUrl;return{name:t,renditions:n.map((function(e){return e.renditions})),bioUrl:i}})).map((function(e){var t=e.name,n=e.renditions,i=e.bioUrl;return{name:t,flatCrops:l(n),bioUrl:i}})).map((function(e){var t=e.name,n=e.flatCrops,i=e.bioUrl;return{name:t,crop:s(n),bioUrl:i}}))},t.collapsePromoMedia=function(e){var t,n=[];return null!=e&&null!==(t=e.crops)&&void 0!==t&&t.length&&e.crops.forEach((function(e){var t;null!==(t=e.renditions)&&void 0!==t&&t.length&&e.renditions.forEach((function(e){n.push(e)}))})),n},t.getLedeVideoCrops=function(e){var t;if(null!=e&&null!==(t=e.content)&&void 0!==t&&t.length)for(var n=0;n<e.content.length;n+=1){var i=e.content[n];if("HeaderLegacyBlock"===i.__typename&&i.ledeMedia&&i.ledeMedia.__typename&&"VideoBlock"===i.ledeMedia.__typename&&i.ledeMedia.media&&i.ledeMedia.media.promotionalMedia){var a=i.ledeMedia.media.promotionalMedia;if(!a||!a.crops||0===a.crops.length)break;var o=a.crops.map((function(e){return e.renditions}));return l(o)}}return[]},t.filterCrops=function(e){if(!e)return"";if(!e.promotionalMedia)return"";var t,n=e.promotionalMedia.crops||null;n||null!==(t=e.promotionalMedia.promotionalMedia)&&void 0!==t&&t.crops&&(n=e.promotionalMedia.promotionalMedia.crops);if(!n)return"";var i=n.map((function(e){return e.renditions}));if(!i)return"";var a=l(i);return a||""}},CKk2:function(e,t,n){"use strict";var i=n("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.contentToProps=function(e){var t={};return e.forEach((function(e){var n,i=o(e.type);if((null===(n=e.content)||void 0===n?void 0:n.length)>0&&"text"===e.content[0].type){var r="".concat(i,"Content");t[r]=e.content.map(s).map(a.default)}})),t},t.getComponentType=o,t.mapConstructTextInlineUnion=s,t.typeToTypename=r;var a=i(n("XlcC"));function o(e){var t=e.match(/[^_]+/g);if(null===t)throw new Error("No valid component name found for type: ".concat(e));return t[t.length-1]}function r(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return"".concat(e.charAt(0).toUpperCase()).concat(e.slice(1)).concat(t)}function s(e){var t,n=e;return n.__typename="TextInline",(null===(t=e.formats)||void 0===t?void 0:t.length)>0&&(n.formats=n.formats.map((function(e){var t=e;return t.__typename=r(e.type,"Format"),delete t.type,t}))),delete n.type,e}},CLqb:function(e,t,n){"use strict";var i=this&&this.__makeTemplateObject||function(e,t){return Object.defineProperty?Object.defineProperty(e,"raw",{value:t}):e.raw=t,e};Object.defineProperty(t,"__esModule",{value:!0}),t.loginLink=t.longHorizontalRule=t.topperWrapClass=t.topperClass=void 0;var a,o,r,s,l=n("Jqp9"),c=n("lVLo");t.topperClass=(0,l.css)(a||(a=i(["\n  font-family: ",";\n  font-weight: 500;\n  padding-top: 24px;\n  padding-bottom: 16px;\n  text-align: center;\n  line-height: 1.5;\n  font-size: 14px;\n  color: ",";\n"],["\n  font-family: ",";\n  font-weight: 500;\n  padding-top: 24px;\n  padding-bottom: 16px;\n  text-align: center;\n  line-height: 1.5;\n  font-size: 14px;\n  color: ",";\n"])),c.fonts.franklin,c.colors.black),t.topperWrapClass=(0,l.css)(o||(o=i(["\n  display: inline;\n\n  @media (min-width: ","px) {\n    display: block;\n  }\n\n  @media (min-width: ","px) {\n    display: inline;\n  }\n"],["\n  display: inline;\n\n  @media (min-width: ","px) {\n    display: block;\n  }\n\n  @media (min-width: ","px) {\n    display: inline;\n  }\n"])),c.widths.verySmall,c.widths.small),t.longHorizontalRule=(0,l.css)(r||(r=i(["\n  border: 0;\n  background-color: ",";\n  height: 1px;\n  width: 100%;\n"],["\n  border: 0;\n  background-color: ",";\n  height: 1px;\n  width: 100%;\n"])),c.colors.lineGrey),t.loginLink=(0,l.css)(s||(s=i(["\n  color: ",";\n  font-weight: 700;\n  text-decoration: none;\n"],["\n  color: ",";\n  font-weight: 700;\n  text-decoration: none;\n"])),c.colors.veryDarkGrey)},Cb8S:function(e,t,n){"use strict";var i=n("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=i(n("lwsE")),o=i(n("W8MJ")),r=i(n("a1gu")),s=i(n("Nsbk")),l=i(n("7W2i")),c=n("q1tI");n("17x9");function u(e,t,n){return t=(0,s.default)(t),(0,r.default)(e,function(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return function(){return!!e}()}()?Reflect.construct(t,n||[],(0,s.default)(e).constructor):t.apply(e,n))}var d=function(e){function t(){var e;(0,a.default)(this,t);for(var n=arguments.length,i=new Array(n),o=0;o<n;o++)i[o]=arguments[o];return(e=u(this,t,[].concat(i))).state={error:!1},e}return(0,l.default)(t,e),(0,o.default)(t,[{key:"componentDidCatch",value:function(e){console.error(e.stack),this.setState({error:!0})}},{key:"render",value:function(){return this.state.error?null:this.props.children}}])}(c.Component);d.displayName="ErrorBoundary";t.default=d},Cebk:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.handleKeyNavigation=void 0;var i=n("AKP5");t.handleKeyNavigation=function(e){return function(t){39===t.keyCode&&(0,i.handleNavRight)(e),37===t.keyCode&&(0,i.handleNavLeft)(e)}}},Cevq:function(e,t,n){"use strict";var i,a,o,r=n("gcR/"),s=n.n(r),l=n("J4zp"),c=n.n(l),u=n("q1tI"),d=n.n(u),p=n("Jqp9"),f=n("NQ6n"),m=n("JwCr"),h=n.n(m),g=n("X6oL"),y=n("WPRB"),v=n("MLAy"),b=n("sQQE"),_=n("PgO9"),w=n("Gs79"),x=n("HUmG"),k=n("PY+t"),O=n.n(k),T=n("u1H9"),C=n("+4HN"),E=n("J2sf"),S=n("wXC7"),P=n.n(S),I=n("3sMT"),M="@media (max-width: ".concat(P.a.breakpoint.maxMobileContentWidth,"px)"),A=Object(p.css)(y.d," &{text-align:left;margin-top:7px;border-top:1px solid ",I.color.stroke.tertiary,";padding:7px 0 5px;font-size:",P.a.font.size(12),";a{border-bottom:solid 1px ",I.color.stroke.tertiary,";text-decoration:none;}li{display:inline;font-weight:700;padding:0 5px;border-right:solid 0.8px black;}li:first-child{padding-left:0;}li:last-child{border-right:none;}}"),j=(y.d,Object(p.css)(y.d," &{font-size:",P.a.font.size(12),";line-height:",P.a.font.size(17),";strong{font-weight:",P.a.font.weight.bold,";}}")),N=Object(p.css)(y.d," &{font-size:",P.a.font.size(14),";margin-bottom:4px;}"),L=Object(p.css)("&",y.d,"{padding:13px 15px 12px 15px;color:",P.a.color.black,";}"),D=Object(p.css)("height:auto;width:auto;border-radius:30px;&:focus{outline:none;box-shadow:0 0 4px 1px rgb(0 95 204);}@supports selector(:focus-visible){&:focus{box-shadow:none;}&:focus-visible{box-shadow:0 0 4px 1px rgb(0 95 204);}}"),R=Object(p.css)(M,"{padding:6px 7px 5px;}border-radius:30px;padding:6px 10px 6px;font-size:",P.a.font.size(12),";font-family:",P.a.font.franklinBase,";line-height:",P.a.font.size(15),";text-align:right;font-weight:500;svg{margin-right:5px;vertical-align:-6px;height:20px;}"),B=Object(p.css)("direction:ltr;display:inline-block;vertical-align:middle;&:hover{.gift-count{background-color:#fafafa;}}");function z(){return s()("div",{className:Object(p.cx)(E.j,L),id:y.c},void 0,s()("p",{className:Object(p.cx)(j,N)},void 0,i||(i=s()("strong",{},void 0,"Subscriber benefit: give articles to anyone"))),s()("p",{className:j},void 0,"Times subscribers can give ",a||(a=s()(h.a,{},void 0,"10 gift articles"))," each month. Anyone can read them — even nonsubscribers."),s()("ul",{className:A},void 0,s()("li",{},void 0,s()(C.a,{url:Object(T.b)()},void 0,"Log in")),o||(o=s()("li",{},void 0,s()("a",{href:"https://help.nytimes.com/hc/en-us/articles/360060848652-Gift-Articles-for-New-York-Times-Subscribers",target:"_blank",rel:"noreferrer"},void 0,"Learn more"))),s()("li",{},void 0,s()(C.a,{url:Object(T.c)()},void 0,"Subscribe"))))}z.displayName="NonSubMenu";var F,U,H,W,q=z,V=n("Ck0P");t.a=function(e){var t,n=e.pageType,i=e.share,a=e.className,o=e.tooltipAlign,r=void 0===o?"left":o,l=e.forceOpen,m=void 0!==l&&l,k=e.toggleGiftArticleMenu,T=void 0===k?function(){}:k,C=e.suppressGiftArticleTooltip,E=void 0!==C&&C,S=e.trackingRegion,P=void 0===S?"default":S,I=e.menuClickFn,M=void 0===I?function(){}:I,A=Object(g.useTracking)(),j=Object(_.a)().user,N=Object(w.a)(),L=N.overlays,z=N.setVisibility,G=N.registerOverlay,Y=Object(x.f)(j)&&Object(x.d)(j),X=Object(u.useState)(!1),Z=c()(X,2),J=Z[0],K=Z[1],$=Object(u.useState)(!1),Q=c()($,2),ee=Q[0],te=Q[1],ne=Object(u.useState)(!1),ie=c()(ne,2),ae=ie[0],oe=ie[1],re=Object(u.useState)(!1),se=c()(re,2),le=se[0],ce=se[1],ue="Article"===(null==i?void 0:i.__typename),de=Object(v.e)({scope:"stickyGiftTestWeb",limit:3,frequency:v.c}),pe=function(e){A.trackEvent({event:"moduleInteraction",eventData:{trigger:"module",type:"click"},module:{name:"unlockedarticle-tooltip",region:"header",element:{name:"close",label:e}}})};Object(u.useEffect)((function(){ue&&(E||"header"===P&&Y&&de.canShow()&&!1===le&&!L.tooltip.visible&&(oe(!0),ce(!0),z("tooltip",!0),de.increment(),A.trackEvent({event:"impression",module:{name:"unlockedarticle-tooltip"}})))}),[A,E,de,ae,le,Y,L,z,ue,P]),Object(u.useEffect)((function(){G("tooltip"),window.location.hash.includes("showtip")&&oe(!0)}),[]),Object(u.useEffect)((function(){m&&(te(!0),T(!1))}),[m,T]);return d.a.createElement(d.a.Fragment,null,s()(f.b,{isGiftArticle:!0,dataTestid:"gift-article-button",buttonContent:s()("span",{className:Object(p.cx)(B,R,a)},void 0,U||(U=s()(b.a,{ariaHidden:!0})),"Share full article"),className:Object(p.cx)(D,y.b),setAriaLabel:!1,pageType:n,share:i,arrowPosition:"top",forceOpen:ee,handleOpen:function(e){e?(ee&&te(!1),ae&&oe(!1),e&&J!==e&&A.trackEvent({event:"moduleInteraction",eventData:{trigger:"module",type:"click"},module:{name:"share-tools",region:P,context:"unlocked-article-menu",element:{name:"tools-menu",label:"Tools Menu",url:i.url,uri:i.uri}}}),K(e)):K(e)},theme:{alignment:"RIGHT",isLoggedIn:!0},modalContent:Y?t||(t=s()(V.a,{share:i,pageType:n,trackingRegion:P,clickFn:M})):F||(F=s()(q,{})),stroke:void 0,fill:void 0,buttonHoverClass:void 0,mediaTitle:void 0,ariaDescribedBy:void 0,modalArrowPosition:void 0,forceArrowPosition:void 0,suppressForcedFocus:void 0,toggleGiftArticleMenu:void 0,forceCloseModal:void 0,giftLinksRemainingCount:void 0,forcePopOver:void 0,menuDefaultHeight:void 0,trackingRegion:void 0,hasGiftArticleButtonSibling:void 0,forcePointerAlignment:void 0,alignAdjust:void 0,isCarouselButton:!1,handleClose:void 0,setUpModalStyles:void 0}),!E&&ae&&s()(O.a,{onCloseX:function(){pe("x"),z("tooltip",!1),oe(!1)},onClick:function(){pe("text"),oe(!1),z("tooltip",!1),te(!0)},alignAdjust:{x:0,y:42},caretAlign:r},void 0,H||(H=s()("p",{},void 0,"Send any friend a story")),W||(W=s()("p",{},void 0,"As a subscriber, you have ",s()(h.a,{},void 0,"10 gift articles")," to give each month. Anyone can read what you share."))))}},Ck0P:function(e,t,n){"use strict";var i,a=n("gcR/"),o=n.n(a),r=n("yXPU"),s=n.n(r),l=n("J4zp"),c=n.n(l),u=n("VkAN"),d=n.n(u),p=n("lSNA"),f=n.n(p),m=n("o0o1"),h=n.n(m),g=(n("ls82"),n("q1tI")),y=n.n(g),v=n("eFc+"),b=n.n(v),_=n("Jqp9"),w=n("X6oL"),x=n("fZdH"),k=n("Kxyt"),O=n("KG2r"),T=n("J2sf"),C=n("WPRB"),E=n("2PZ4"),S=n("PgO9"),P=n("HUmG"),I=n("taqW"),M=n("bLUX"),A=n("UeuO");function j(e){var t=e.giftArticleLinksRemainingCount,n=void 0===t?null:t,a=e.url,r=void 0===a?null:a,s=e.hideShareOptions,l=void 0!==s&&s,u=Object(g.useState)(r),d=c()(u,2),p=d[0],f=d[1],m=Object(g.useRef)(null),h=i||(i=o()("span",{className:A.d},void 0,o()("a",{href:"/gift-articles"},void 0,"Learn more")));if(Object(g.useEffect)((function(){return p!==r&&(m.current=setTimeout((function(){return f(r)}),5e3)),function(){return clearTimeout(m.current)}}),[p,r]),!p&&0===n)return o()("p",{style:l?{marginBottom:"0"}:{marginBottom:"12px"}},void 0,"You will receive 10 more gift articles on the 1st of the next month. Remember: You can still share through email, messaging or social media, anytime. ",h,".");if(p)return o()("p",{},void 0,"You’ve shared this story before — thanks. Share it again and it won’t count toward your gift article limit. ",h,".");if(!p&&n&&n>0){var y=n>1?"articles":"article";return o()("p",{},void 0,"Give paywall-free access to this article. You have"," ",o()("strong",{},void 0,n," gift ",y)," ","left to share this month. ",h,".")}return null}j.defaultProps={giftArticleLinksRemainingCount:null,url:null,hideShareOptions:!1};var N,L,D,R,B=j;function z(e){var t=e.giftArticleLinksRemainingCount,n=void 0===t?null:t,i=e.url,a=void 0===i?null:i,r=Object(g.useState)(a),s=c()(r,2),l=s[0],u=s[1],d=Object(g.useRef)(null);return Object(g.useEffect)((function(){return l!==a&&(d.current=setTimeout((function(){return u(a)}),5e3)),function(){return clearTimeout(d.current)}}),[l,a]),l||0!==n?l?L||(L=o()("p",{className:A.a},void 0,"Share article again")):10===n?D||(D=o()("p",{className:A.a},void 0,"Gift articles")):!l&&n&&n>0&&n<10?R||(R=o()("p",{className:A.a},void 0,"Gift articles")):null:N||(N=o()("p",{className:A.a},void 0,"10/10 gift articles shared"))}z.defaultProps={giftArticleLinksRemainingCount:null,url:null};var F,U,H,W,q,V,G,Y,X,Z,J=z;function K(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function $(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?K(Object(n),!0).forEach((function(t){f()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):K(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Q,ee=T.a,te=$($($({},O.c),O.a),{},{email:"Email",facebook:"Facebook",twitter:"X",telegram:"Telegram",whatsapp:"WhatsApp",reddit:"Reddit",intro:"Explore this gift article from The New York Times. You can read it for free without a subscription.",shareGift:"Send this article"}),ne=b()(F||(F=d()(["\n  query getShareLink($url: NonEmptyString!) {\n    user {\n      shareCode(url: $url) {\n        __typename\n        ... on ShareCodeData {\n          remaining\n          url\n        }\n        ... on ShareCodeError {\n          code\n          message\n        }\n      }\n    }\n  }\n"]))),ie=b()(U||(U=d()(["\n  mutation createShareLink($url: NonEmptyString!, $pageId: ShareCodeOptions) {\n    createShareCode(url: $url, options: $pageId) {\n      __typename\n      ... on ShareCodeData {\n        remaining\n        url\n      }\n      ... on ShareCodeError {\n        code\n        message\n      }\n    }\n  }\n"])));function ae(e){var t,n,i,a,r=e.share,l=e.pageType,u=e.trackingRegion,d=e.clickFn,p=void 0===d?function(){}:d,m=e.renderAsNormalShareMenu,v=void 0!==m&&m,b=e.toggleGiftArticleMenu,j=e.renderGiftButton,N=void 0!==j&&j,L=e.fireOnRender,D=void 0===L?function(){}:L,R={event:"moduleInteraction",eventData:{pagetype:l,trigger:"module",type:"click"},module:{name:"share-tools",context:"unlocked-article-menu",region:u||"default",element:{url:r.url,uri:r.uri}}},z=Object(g.useRef)(null),F=Object(w.useTracking)(R).trackEvent,U=Object(x.a)();Object(g.useEffect)((function(){z.current&&z.current.focus()})),Object(g.useEffect)((function(){D()}),[D]);var Z=Object(S.a)().user,K=Object(P.f)(Z)&&Object(P.d)(Z),$=Object(g.useReducer)((function(e,t){return e[t.type]=t.loading,e}),{email:!1}),ae=c()($,2),oe=ae[0],re=ae[1],se=r.headline,le=r.summary,ce=r.uri,ue=(se||{}).default,de=Object(g.useState)(!1),pe=c()(de,2),fe=pe[0],me=pe[1],he=encodeURIComponent(ue),ge=encodeURIComponent("https://www.facebook.com/"),ye=Object(g.useRef)(null),ve=ce,be=Object(k.useQuery)(ne,{variables:{url:ve},ssr:!1,context:{queryDeduplication:!1},fetchPolicy:"cache-first"}),_e=be.loading,we=be.data,xe=be.error,ke=Object(k.useMutation)(ie,{update:function(e,t){var n=t.data,i=e.readQuery({query:ne,variables:{url:ve}});i.user.shareCode.remaining=n.createShareCode.remaining,i.user.shareCode.url=n.createShareCode.url,e.writeQuery({query:ne,data:i})}}),Oe=c()(ke,1)[0],Te=function(){F({module:{element:{name:"share-url",label:te.permalink}}})},Ce=null==we||null===(t=we.user)||void 0===t||null===(n=t.shareCode)||void 0===n?void 0:n.url,Ee=null==we||null===(i=we.user)||void 0===i||null===(a=i.shareCode)||void 0===a?void 0:a.remaining,Se=function(e){return Object(M.a)({abra:U,url:e,moreParams:{smid:"url-share"}})},Pe=function(){var e=s()(h.a.mark((function e(t){var n,i,a,o,s;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i=t.smid,!Ce){e.next=5;break}return p(),a=Object(M.a)({abra:U,url:Ce,moreParams:{smid:i}}),e.abrupt("return",Promise.resolve(a));case 5:return o=window&&(null===(n=window.nyt_et)||void 0===n?void 0:n.get_pageview_id()),s={variables:{url:r.url,pageId:{pageViewId:o}}},e.abrupt("return",Oe(s).then((function(e){var t,n,a,o;return null!=e&&null!==(t=e.data)&&void 0!==t&&null!==(n=t.createShareCode)&&void 0!==n&&n.url&&(null==e||null===(a=e.data)||void 0===a||null===(o=a.createShareCode)||void 0===o?void 0:o.remaining)>=0?(p(),Object(M.a)({abra:U,url:e.data.createShareCode.url,moreParams:{smid:i}})):null})).catch((function(e){console.error("Err.",e),p()})));case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Ie=function(){var e=s()(h.a.mark((function e(){var t,n;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(re({type:"copy",loading:!0}),!("undefined"!=typeof ClipboardItem&&"function"==typeof navigator.clipboard.write)){e.next=7;break}t=function(){var e=s()(h.a.mark((function e(){var t;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Pe({smid:"url-share"});case 2:return t=e.sent,e.abrupt("return",new Blob([Se(t)],{type:"text/plain"}));case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),navigator.clipboard.write([new ClipboardItem({"text/plain":t()})]).then((function(){re({type:"copy",loading:!1}),me(!0),Te(),ye.current&&clearTimeout(ye.current),ye.current=setTimeout((function(){return me(!1)}),5e3)})).catch((function(e){console.error("copy err!",e)})),e.next=23;break;case 7:return e.next=9,Pe({smid:"url-share"});case 9:return n=e.sent,e.prev=10,e.next=13,navigator.clipboard.writeText(Se(n));case 13:re({type:"copy",loading:!1}),me(!0),Te(),ye.current&&clearTimeout(ye.current),ye.current=setTimeout((function(){return me(!1)}),5e3),e.next=23;break;case 20:e.prev=20,e.t0=e.catch(10),console.error("copy err!",e.t0);case 23:case"end":return e.stop()}}),e,null,[[10,20]])})));return function(){return e.apply(this,arguments)}}(),Me=function(){var e=s()(h.a.mark((function e(){var t;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Pe({smid:"em-share"});case 2:if(t=e.sent){e.next=5;break}return e.abrupt("return",{});case 5:return e.abrupt("return",{subject:encodeURIComponent("".concat(te.nytdotcom,": ").concat(ue)),body:encodeURIComponent("".concat(te.intro,"\n\n").concat(ue,"\n\n").concat(le,"\n\n").concat(t))});case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),Ae=!Ce&&0===Ee,je=function(){return H||(H=o()("div",{className:A.i,"data-testid":"gift-spinner"},void 0,o()(I.a,{fixed:!1})))};if(_e||xe||!we)return W||(W=o()(I.a,{fixed:!1}));var Ne=N?{paddingBottom:0}:{};return o()("div",{className:T.j,id:C.e,style:Ne},void 0,v&&o()("div",{className:T.m},void 0,te.share),!v&&y.a.createElement(y.a.Fragment,null,o()("div",{className:Object(_.cx)(T.m,A.h)},void 0,o()(J,{giftArticleLinksRemainingCount:Ee,url:Ce}),o()("span",{className:Object(_.cx)(A.g,A.c)},void 0,Ee,"/10")),o()("div",{className:A.f},void 0,o()(B,{giftArticleLinksRemainingCount:Ee,url:Ce,hideShareOptions:Ae}),o()("span",{className:Object(_.cx)(A.g,A.b),"data-testid":"remainingCount"},void 0,Ee,"/10"))),!Ae&&o()("ul",{className:T.n,"data-testid":"gift-share-list"},void 0,o()("li",{className:T.f},void 0,y.a.createElement("button",{ref:z,type:"button","aria-label":O.a.copy,onClick:Ie,id:"giftcopyUrlId","data-testid":"giftcopyUrlId",className:T.h},o()(E.c,{className:Object(_.cx)(T.e,T.b)}),o()("div",{className:Object(_.cx)(T.i,f()({},T.c,fe)),"aria-live":"polite"},void 0,fe?te.copied:te.copy,oe.copy&&je()))),o()("li",{className:T.f},void 0,o()("a",{role:"button",href:"mailto:",target:"_blank",rel:"noopener noreferrer","aria-label":O.a.email,onClick:function(){var e=s()(h.a.mark((function e(t){var n,i;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.persist(),"mailto:"!==(n=t.currentTarget).href){e.next=15;break}return t.preventDefault(),re({type:"email",loading:!0}),e.next=7,Me();case 7:if(i=e.sent,re({type:"email",loading:!1}),i.body){e.next=11;break}return e.abrupt("return");case 11:n.href="mailto:?subject=".concat(i.subject,"&body=").concat(i.body),n.click(),re({type:"email",loading:!1}),F({module:{element:{name:"share-email",label:te.email}}});case 15:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},void 0,o()(E.f,{className:Object(_.cx)(T.e,T.b)}),o()("div",{className:T.i},void 0,te.email),oe.email&&je())),o()("li",{className:T.f},void 0,o()("button",{className:A.e,type:"button","aria-label":O.a.facebook,rel:"noopener noreferrer",onClick:s()(h.a.mark((function e(){var t;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return re({type:"facebook",loading:!0}),Q=window.open("","shareWinFB"),e.next=4,Pe({smid:"fb-share"});case 4:if(t=e.sent,re({type:"facebook",loading:!1}),t){e.next=8;break}return e.abrupt("return");case 8:Q.location.assign("https://www.facebook.com/dialog/share?app_id=9869919170&href=".concat(encodeURIComponent(t),"&name=").concat(he,"&redirect_uri=").concat(ge,"&quote=").concat(encodeURIComponent(te.intro))),Q.focus(),F({module:{element:{name:"share-facebook",label:te.facebook}}});case 11:case"end":return e.stop()}}),e)})))},void 0,o()(E.d,{className:Object(_.cx)(T.e,T.b)}),o()("div",{className:T.i},void 0,te.facebook),oe.facebook&&je())),o()("li",{className:T.f},void 0,o()("button",{className:A.e,type:"button","aria-label":O.a.twitter,"data-testid":"giftTwitter",rel:"noopener noreferrer",onClick:s()(h.a.mark((function e(){var t;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Q=window.open("","shareWinTW"),e.next=3,Pe({smid:"em-share"});case 3:if(t=e.sent,re({type:"twitter",loading:!1}),t){e.next=7;break}return e.abrupt("return");case 7:Q.location.assign("https://twitter.com/intent/tweet?url=".concat(encodeURIComponent(t),"&text=").concat(te.intro)),F({module:{element:{name:"share-twitter",label:te.twitter}}});case 9:case"end":return e.stop()}}),e)})))},void 0,q||(q=o()(ee,{xTwitter:!0})),o()("div",{className:T.i},void 0,te.twitter),oe.twitter&&je())),o()("li",{className:T.f},void 0,o()("button",{className:A.e,type:"button","aria-label":O.a.telegram,"data-testid":"giftTelegram",rel:"noopener noreferrer",onClick:s()(h.a.mark((function e(){var t;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Q=window.open("","shareWinTel"),e.next=3,Pe({smid:"tel-share"});case 3:if(t=e.sent,re({type:"telegram",loading:!1}),t){e.next=7;break}return e.abrupt("return");case 7:Q.location.assign("https://t.me/share/url?url=".concat(encodeURIComponent(t),"&text=").concat(te.intro)),F({module:{element:{name:"share-telegram",label:te.telegram}}});case 9:case"end":return e.stop()}}),e)})))},void 0,V||(V=o()(ee,{telegram:!0})),o()("div",{className:T.i},void 0,te.telegram),oe.telegram&&je())),o()("li",{className:T.f},void 0,o()("button",{className:A.e,type:"button","aria-label":O.a.whatsapp,"data-testid":"giftWhatsapp",rel:"noopener noreferrer",onClick:s()(h.a.mark((function e(){var t;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Q=window.open("","shareWinWa"),e.next=3,Pe({smid:"wa-share"});case 3:if(t=e.sent,re({type:"whatsapp",loading:!1}),t){e.next=7;break}return e.abrupt("return");case 7:Q.location.assign("https://api.whatsapp.com/send?text=".concat(he,"%20").concat(encodeURIComponent(t))),F({module:{element:{name:"share-whatsapp",label:te.whatsapp}}});case 9:case"end":return e.stop()}}),e)})))},void 0,G||(G=o()(ee,{whatsapp:!0})),o()("div",{className:T.i},void 0,te.whatsapp),oe.whatsapp&&je())),o()("li",{className:T.f},void 0,o()("button",{className:A.e,type:"button","aria-label":O.a.reddit,"data-testid":"giftReddit",rel:"noopener noreferrer",onClick:s()(h.a.mark((function e(){var t;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Q=window.open("","shareWinRed"),e.next=3,Pe({smid:"re-share"});case 3:if(t=e.sent,re({type:"reddit",loading:!1}),t){e.next=7;break}return e.abrupt("return");case 7:Q.location.assign("http://www.reddit.com/submit?url=".concat(encodeURIComponent(t),"&title=").concat(he)),F({module:{element:{name:"share-reddit",label:te.reddit}}});case 9:case"end":return e.stop()}}),e)})))},void 0,Y||(Y=o()(ee,{reddit:!0})),o()("div",{className:T.i},void 0,te.reddit),oe.reddit&&je())),K&&N&&v&&o()("li",{className:Object(_.cx)(T.f,T.o,T.g)},void 0,o()("button",{type:"button",onClick:function(){b&&b(!0),F({module:{element:{name:"open-unlocked-menu",label:te.gift}}})}},void 0,o()("span",{className:T.q},void 0,o()(E.e,{className:T.e})),o()("div",{className:Object(_.cx)(T.p,f()({},T.d,!K))},void 0,o()("p",{},void 0,te.gift),X||(X=o()("p",{},void 0,"Give paywall-free access to this article.")))))))}ae.displayName="GiftArticleMenu",ae.fragments={share:b()(Z||(Z=d()(["\n    fragment ShareLinkMenu_share on CreativeWork {\n      headline {\n        default\n      }\n      summary\n      ... on Published {\n        url\n      }\n    }\n  "])))};t.a=ae},CsDw:function(e,t,n){"use strict";n.d(t,"m",(function(){return i})),n.d(t,"b",(function(){return a})),n.d(t,"a",(function(){return o})),n.d(t,"c",(function(){return r})),n.d(t,"d",(function(){return s})),n.d(t,"g",(function(){return l})),n.d(t,"e",(function(){return c})),n.d(t,"i",(function(){return u})),n.d(t,"h",(function(){return d})),n.d(t,"f",(function(){return p})),n.d(t,"j",(function(){return f})),n.d(t,"k",(function(){return m})),n.d(t,"l",(function(){return h}));var i="typ",a="bt",o="als_test_clientside",r=[i,"pos","ver","prop","plat","vp"],s={AD_REQUEST:"adRequest",AD_NO_FILL:"adFetchNoFill",AD_FETCH_SUCCESS:"adFetchSuccess",AD_FETCH_ERROR:"adFetchError",AD_EMPTY_OTHER:"adEmpty"},l="hasBT",c="hasClientside",u="hasCriticalTargeting",d="has_bt",p="has_als_test_clientside",f="has_critical_kvps",m="is_alice_cache",h="is_bt_empty"},CzSb:function(e,t,n){"use strict";var i=n("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=i(n("q1tI")),o=(i(n("17x9")),i(n("yEZI"))),r=n("O9F4"),s=function(e){var t=e.reporterHeadshot,n=e.children;return a.default.createElement("div",{className:r.bodyClass},a.default.createElement("div",{className:r.reporterContainerClass},a.default.createElement("div",{className:r.headshotContainerClass},a.default.createElement("div",{className:r.headshotClass},t)),a.default.createElement("div",{className:r.textClass},a.default.createElement(o.default,{className:r.textClass},n))))};s.displayName="FeaturedReporterBase",s.defaultProps={reporterHeadshot:void 0};t.default=s},"D/my":function(e,t,n){"use strict";var i=n("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.OnsiteNewsletterName=void 0;var a=i(n("q1tI")),o=(i(n("17x9")),i(n("42vy"))),r=n("Jqp9"),s=n("L1jB"),l=n("AhCu"),c=t.OnsiteNewsletterName=function(e){var t=e.isInAMP,n=e.newsletterName,i=t?l.ampNewsletterNameClass:"";return a.default.createElement(s.LabelContainer,{className:l.newsletterNameContainerClass},a.default.createElement(o.default,{className:(0,r.cx)(l.newsletterNameClass,i),"data-testid":"newsletter-name-label"},n))};c.displayName="OnsiteNewsletterName",c.defaultProps={isInAMP:!1};t.default=c},D3tI:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t=e.storyline,n=e.block;if(!n||!t)return!1;var a=n.type,o=n.version,r=(0,i.deserializeExperimentalJsonBlob)(t);return!!(0,i.getExperimentalAssetBlock)(r,a,o)};var i=n("uJd7")},D5MC:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.StorylineTone=t.PrimaryAssetStatusMap=t.PrimaryAssetStatus=void 0;t.StorylineTone={News:"NEWS",Feature:"FEATURE",Opinion:"OPINION",None:"NO_TONE_SET"},t.PrimaryAssetStatusMap={BREAKING:"breaking",UPCOMING:"upcoming",LIVE:"live",NEW:"New",UNSET:""},t.PrimaryAssetStatus={BREAKING:"BREAKING",UPCOMING:"UPCOMING",LIVE:"LIVE",NEW:"NEW",UNSET:"UNSET"}},DH8m:function(e,t,n){"use strict";n.d(t,"a",(function(){return l}));var i=n("J4zp"),a=n.n(i),o=n("q1tI"),r=n("hKI/"),s=n.n(r);function l(e){var t=e.percent,n=Object(o.useState)(!1),i=a()(n,2),r=i[0],l=i[1],c=Object(o.useRef)(!1);return Object(o.useEffect)((function(){var e=s()((function(){var e=document.documentElement.scrollHeight-window.innerHeight,n=window.pageYOffset/e>=t;n&&(c.current=!0),n!==r&&l(n)}),300);return window.addEventListener("scroll",e),function(){window.removeEventListener("scroll",e)}}),[r,t]),{hasMetThreshold:c.current,isBelowThreshold:r}}},DKae:function(e,t,n){"use strict";var i=this&&this.__createBinding||(Object.create?function(e,t,n,i){void 0===i&&(i=n);var a=Object.getOwnPropertyDescriptor(t,n);a&&!("get"in a?!t.__esModule:a.writable||a.configurable)||(a={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,i,a)}:function(e,t,n,i){void 0===i&&(i=n),e[i]=t[n]}),a=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&i(t,e,n);return a(t,e),t},r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var s=r(n("q1tI")),l=o(n("Nq2c")),c=n("etPP"),u=n("Wj/z");function d(e){var t,n=e.unit,i=null===(t=null==n?void 0:n.content)||void 0===t?void 0:t.uri;return s.default.createElement(s.default.Fragment,null," ",s.default.createElement("span",{className:l.topperWrapClass},"Already a subscriber?"," ",s.default.createElement(c.Button,{component:"a",testId:"login-button",className:l.loginLink,onClick:function(e){null==n||n.trackInteraction(e,{extraProps:{module:{element:{url:i}}}})},href:i},"Log in.")))}t.default=function(e){var t,n=e.unit,i=!(null===(t=null==n?void 0:n.content)||void 0===t?void 0:t.loggedIn);return s.default.createElement(s.default.Fragment,null,s.default.createElement("div",{className:l.topperClass,"data-testid":"onsite-messaging-unit-".concat(null===u.config||void 0===u.config?void 0:u.config.name),"data-campaign":null==n?void 0:n.campaign,"data-audience":null==n?void 0:n.audience},s.default.createElement("span",{className:l.topperWrapClass},"Unfortunately, the gift article you clicked on has expired."),i&&s.default.createElement(d,{unit:n})),s.default.createElement("hr",{className:l.longHorizontalRule}))}},DNUX:function(e,t,n){"use strict";var i,a,o,r,s,l,c,u,d,p,f,m,h,g,y,v,b,_,w,x=n("gcR/"),k=n.n(x),O=n("J4zp"),T=n.n(O),C=n("q1tI"),E=n("XnIf"),S=n("3sMT"),P=n("Jqp9"),I=n("wXC7"),M=n.n(I),A=Object(P.css)("border-top:1px solid ",S.color.stroke.quaternary,";padding:0 20px;",M.a.breakpoint.medium,"{padding:0 13%;}",M.a.breakpoint.large,"{border-top:0;padding:0 20px;}"),j=Object(P.css)("font-family:",M.a.font.franklinBase,";font-weight:",M.a.font.weight.bold,";font-size:13px;text-transform:uppercase;letter-spacing:0.03em;padding:15px 0;"),N=Object(P.css)("border-top:1px solid ",S.color.stroke.quaternary,";padding-top:15px;"),L=Object(P.css)("font-family:",M.a.font.franklinBase,";font-size:15px;font-weight:",M.a.font.weight.medium,";padding-bottom:15px;width:100%;color:",S.color.content.quaternary,";strong{font-weight:",M.a.font.weight.bold,";}em{font-style:italic;}"),D=Object(P.css)("background-color:",S.color.background.secondary,";border:1px solid ",S.color.stroke.secondary,";border-radius:3px;box-sizing:border-box;display:inline-block;max-width:100%;margin-right:3px;margin-bottom:3px;padding:3px;vertical-align:top;"),R=Object(P.css)("appearance:none;background-color:transparent;background-image:none;border:0;box-shadow:none;box-sizing:border-box;max-width:100%;cursor:pointer;color:",S.color.content.quaternary,";font-family:",M.a.font.franklinBase,";line-height:1;padding:5px 30px 5px 8px;"),B=Object(P.css)("height:8px;margin-left:-20px;margin-top:9px;pointer-events:none;position:absolute;width:13px;"),z=Object(P.css)(M.a.button.action,";display:inline-block;font-size:14px;line-height:14px;margin-bottom:15px;padding:10px 15px 8px;"),F={33614678:"Faceboook",33597998:"Rubicon Project",30252878:"Index Exchange",39318518:"Index Exchange EBDA",32855678:"Yieldmo",21966278:"Google Ad Exchange",32074718:"Amazon",38636678:"AppNexus",33597638:"OpenX",4400775978:"OpenX EBDA"};function U(e){var t,n=e.adData,x=Object(C.useState)("(eg. slow ad, inappropriate ad)"),O=T()(x,2),P=O[0],I=O[1],M=n.deviceType,U=n.page,H=n.position,W=n.sourceAgnosticCreativeId,q=n.sourceAgnosticLineItemId,V=n.googleQueryId,G=n.advertiserId,Y=n.pageUrl,X=n.clickUrl,Z=n.size,J=F[G];t=Array.isArray(Z)?0===Z[0]?"fluid":Z.join("x"):"";var K=encodeURIComponent("Capture Ad / ".concat((new Date).toLocaleDateString("en-US")," / ").concat(q," / ").concat(P," (Experimental Only)")),$=encodeURIComponent("* * * This is currently only a tech test--no action will be taken at this time. * * *\n\nReason: ".concat(P,"\n\nScreenshot: (please attach a screenshot of the ad)\n\n-----------\n\nCreative ID: ").concat(W,"\n\nLine Item ID: ").concat(q,"\n\nQuery ID: ").concat(V,"\n\n").concat(J?"Company Name: ".concat(J,"\n\n"):"","Platform: web\n\nDevice Type: ").concat(M,"\n\nPage Type: ").concat(U,"\n\nAd Position: ").concat(H,"\n\nAd Size: ").concat(t,"\n\nPage URL: ").concat(Y,"\n\nClick-through URL: ").concat(X));return k()("section",{className:A},void 0,k()("h2",{className:j},void 0,"Debug Info"),k()("ul",{className:N},void 0,k()("li",{},void 0,k()("div",{className:D},void 0,k()("select",{className:R,onChange:function(e){I(e.target.value)}},void 0,i||(i=k()("option",{value:"(eg. slow ad, inappropriate ad)"},void 0,"Select ad behavior...")),a||(a=k()("option",{},void 0,"Content is inappropriate for the specific article")),o||(o=k()("option",{},void 0,"Ad is being targeted or recurs over and over")),r||(r=k()("option",{},void 0,"Ad creative doesn’t render properly or appears to be broken")),s||(s=k()("option",{},void 0,"Ad is intrusive or violates posted specs or industry standards")),l||(l=k()("option",{},void 0,"Ad is suspicious or malicious")),c||(c=k()("option",{},void 0,"Ad violates creative quality (offensive content)")),u||(u=k()("option",{},void 0,"Great ad! Right on target!")),d||(d=k()("option",{},void 0,"Other"))),k()(E.a,{fill:S.color.content.quaternary,className:B})),k()("a",{href:"mailto:devtest-AdFrameworks@nytimes.com?subject=".concat(K,"&body=").concat($),target:"_blank",rel:"noopener noreferrer",className:z},void 0,"Submit")),k()("li",{className:L},void 0,p||(p=k()("em",{},void 0,"Note: This is a test and is for data collection purposes—action will not be taken to remove the ad just yet.")))),k()("ul",{className:N},void 0,k()("li",{className:L},void 0,f||(f=k()("strong",{},void 0,"Creative ID: ")),W),k()("li",{className:L},void 0,m||(m=k()("strong",{},void 0,"Line Item ID: ")),q),k()("li",{className:L},void 0,h||(h=k()("strong",{},void 0,"Query ID: ")),V),J&&k()("li",{className:L},void 0,g||(g=k()("strong",{},void 0,"Company Name: ")),J)),k()("ul",{className:N},void 0,k()("li",{className:L},void 0,y||(y=k()("strong",{},void 0,"Platform: ")),"web"),k()("li",{className:L},void 0,v||(v=k()("strong",{},void 0,"Device Type: ")),M),k()("li",{className:L},void 0,b||(b=k()("strong",{},void 0,"Page Type: ")),U),k()("li",{className:L},void 0,_||(_=k()("strong",{},void 0,"Ad Position: ")),H),k()("li",{className:L},void 0,w||(w=k()("strong",{},void 0,"Ad Size: ")),t)))}U.displayName="ReportModal",U.defaultProps={adData:{deviceType:"",page:"",position:"",sourceAgnosticCreativeId:0,sourceAgnosticLineItemId:0,googleQueryId:"",advertiserId:0,pageUrl:"",clickUrl:"",size:[]}};t.a=U},DWJt:function(e,t,n){"use strict";var i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var a=i(n("q1tI")),o=i(n("17x9"));function r(e){var t,n=e.className,i=e.fill,o=e.direction;return"up"===o&&(t="rotate(-90 3.5 6.5)"),"down"===o&&(t="rotate(90 3.5 6.5)"),a.default.createElement("svg",{width:"16",height:"16",viewBox:"0 0 9 16",version:"1.1",className:n},a.default.createElement("g",{id:"Canvas",transform:"translate(-8250 -1500)"},a.default.createElement("g",{id:"Vector"},a.default.createElement("use",{xlinkHref:"#path0_stroke",transform:"translate(8251 1501.5)",fill:i}))),a.default.createElement("defs",null,a.default.createElement("path",{id:"path0_stroke",d:"M 6.5 6.5L 7.20711 7.20711L 7.91421 6.5L 7.20711 5.79289L 6.5 6.5ZM -0.707107 0.707107L 5.79289 7.20711L 7.20711 5.79289L 0.707107 -0.707107L -0.707107 0.707107ZM 5.79289 5.79289L -0.707107 12.2929L 0.707107 13.7071L 7.20711 7.20711L 5.79289 5.79289Z",transform:t})))}r.propTypes={className:o.default.string,fill:o.default.string,direction:o.default.oneOf(["up","down","right","left"])},r.defaultProps={className:void 0,fill:"#111",direction:"right"},t.default=r},DnBa:function(e,t,n){"use strict";var i=n("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.getSectionWithLogo=void 0;var a=i(n("lSNA"));function o(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function r(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?o(Object(n),!0).forEach((function(t){(0,a.default)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):o(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}t.getSectionWithLogo=function(e,t){if(e&&e.displayName&&t){var n=t[e.displayName];if(n)return r(r({},e),{},{displayName:e.displayName,Logo:n})}}},DpJz:function(e,t,n){"use strict";n.d(t,"a",(function(){return y}));var i,a=n("VkAN"),o=n.n(a),r=n("gcR/"),s=n.n(r),l=(n("q1tI"),n("eFc+")),c=n.n(l),u=n("Jqp9"),d=n("MxTu"),p=n.n(d),f=n("XlcC"),m=n("HTd6"),h=n("jOYC"),g=Object(u.css)(h.b.layout.nonInterrupterTextElementBaseClass," margin-top:2.4em;margin-bottom:2.4em;");function y(e){var t,n=e.data,i=e.className,a=Object(u.useTheme)().noFollowExternalLinks,o=Object(f.createMapInlineUnionWithOptions)({noFollowExternalLinks:a});return s()(p.a,{quote:n.quote.map(o),attribution:null===(t=n.attribution)||void 0===t?void 0:t.map(o),className:Object(u.cx)(g,i)})}y.displayName="PullquoteBlock",y.defaultProps={data:null,className:void 0},y.fragments={data:c()(i||(i=o()(["\n    fragment PullquoteBlock_data on PullquoteBlock {\n      quote {\n        ...TextInline_content\n      }\n      attribution {\n        ...TextInline_content\n      }\n    }\n    ","\n  "])),m.a.fragments.content)}},"E+3E":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=(0,n("Jqp9").css)("max-width:100%;");t.default=i},E0i8:function(e,t,n){"use strict";n.d(t,"b",(function(){return l})),n.d(t,"a",(function(){return c}));var i=n("J4zp"),a=n.n(i),o=n("q1tI"),r=n("hKI/"),s=n.n(r);function l(){var e=Object(o.useState)(!1),t=a()(e,2),n=t[0],i=t[1];return Object(o.useEffect)((function(){var e=s()((function(){window.pageYOffset>window.innerHeight&&i(!0),window.pageYOffset<window.innerHeight&&i(!1)}),300);return window.addEventListener("scroll",e),function(){window.removeEventListener("scroll",e)}}),[]),n}function c(e){return(0,e.children)(l())}},E2S6:function(e,t,n){"use strict";var i=n("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.imageCreditClass=t.containerClass=t.ampContainerClass=t.StyledQuoteContainer=t.StyledAttribution=void 0;var a=n("Jqp9"),o=i(n("wXC7")),r=n("3sMT"),s=(t.containerClass=function(e){return(0,a.css)("display:flex;flex-direction:column;align-items:center;margin:",o.default.breakpoint.mobileBlockMargins,";figure{margin:0;}img + span{margin-left:20px;}",o.default.breakpoint.small,"{img + span{margin-left:0;}}",o.default.breakpoint.medium,"{flex-direction:",e?"column":"row",";margin:",o.default.breakpoint.desktopMediaMargins,";}",o.default.breakpoint.mediumLarge,"{max-width:945px;}")},(0,a.themeFn)("treatment",{none:(0,a.css)("font-size:",o.default.font.size(16),";font-family:",o.default.font.franklinBase,";font-weight:",o.default.font.weight.bold,";"),feature:(0,a.css)("font-size:",o.default.font.size(16),";font-family:",o.default.font.franklinBase,";font-weight:",o.default.font.weight.bold,";"),magazine:(0,a.css)("font-size:",o.default.font.size(16),";font-family:",o.default.font.magazineSansBase,";font-weight:",o.default.font.weight.book,";")})),l=(t.StyledAttribution=(0,a.styled)("p",{target:"ebi488z0"})(s,";margin-top:1.5rem;color:",r.color.content.secondary,";",o.default.breakpoint.small,"{margin-top:1rem;}"),(0,a.themeFn)("treatment",{none:(0,a.css)("font-family:",o.default.font.serifMedium,";font-weight:",o.default.font.weight.extraLight,";font-size:",o.default.font.size(23),";line-height:1.3;display:flex;justify-content:center;align-items:flex-start;flex-direction:column;margin-top:0.8em;width:",o.default.breakpoint.mobileFullWidth,";max-width:600px;",o.default.breakpoint.small,"{font-size:",o.default.font.size(24),";line-height:1.2;}"),feature:(0,a.css)("font-family:",o.default.font.serifMedium,";font-weight:",o.default.font.weight.extraLight,";font-size:",o.default.font.size(23),";line-height:1.3;display:flex;justify-content:center;align-items:flex-start;flex-direction:column;margin-top:0.8em;width:",o.default.breakpoint.mobileFullWidth,";max-width:600px;",o.default.breakpoint.small,"{font-size:",o.default.font.size(24),";line-height:1.2;}"),magazine:(0,a.css)("font-family:",o.default.font.magazineSansBase,";font-weight:",o.default.font.weight.book,";font-size:",o.default.font.size(24),";line-height:",o.default.font.size(28),";display:flex;color:",r.color.content.primary,";letter-spacing:0.005em;justify-content:center;align-items:flex-start;flex-direction:column;margin-top:0.8em;width:",o.default.breakpoint.mobileFullWidth,";max-width:600px;")}));t.StyledQuoteContainer=(0,a.styled)("div",{target:"ebi488z1"})(l,";",o.default.breakpoint.small,"{padding:0.8rem 2rem 0.8em;}",o.default.breakpoint.medium,"{margin-top:0;padding:2rem;flex:0 1 50%;}"),t.imageCreditClass=(0,a.css)("margin:10px 20px 0 20px;",o.default.breakpoint.small,"{margin:10px 20px 0 20px;}",o.default.breakpoint.mediumLarge,"{margin-left:0;}"),t.ampContainerClass=(0,a.css)("width:100%;")},E7dQ:function(e,t,n){"use strict";var i=n("XiaQ"),a=n.n(i),o=n("CsDw");t.a=function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(null===(e=t.getTargeting)||void 0===e?void 0:e.call(t,o.m)[0])||a()()[o.m]||"notfound"}},E8RS:function(e,t,n){"use strict";n.d(t,"a",(function(){return i})),n.d(t,"b",(function(){return a})),n.d(t,"c",(function(){return o})),n.d(t,"d",(function(){return r}));var i=/0_.*/,a="66609ff5be2f8f0001fe2114",o="66609fec49475e0001d21147",r="665738913c2f87000145b942"},E8oU:function(e,t,n){"use strict";var i=n("TqRt"),a=n("cDf5");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=i(n("J4zp")),r=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=a(e)&&"function"!=typeof e)return{default:e};var n=f(t);if(n&&n.has(e))return n.get(e);var i={__proto__:null},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var r in e)if("default"!==r&&{}.hasOwnProperty.call(e,r)){var s=o?Object.getOwnPropertyDescriptor(e,r):null;s&&(s.get||s.set)?Object.defineProperty(i,r,s):i[r]=e[r]}return i.default=e,n&&n.set(e,i),i}(n("q1tI")),s=(i(n("17x9")),n("boCj")),l=n("xHA4"),c=i(n("eRNE")),u=i(n("cc1G")),d=i(n("sWm8")),p=n("YV1h");function f(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(f=function(e){return e?n:t})(e)}function m(e){var t=e.storyline,n=e.trackEvent,i=e.parentUrl,a=e.isPeeking,f=e.trackLinkInteraction,m=e.trackLinkInteractionV2,h=e.internalLinkTrackingParams,g=e.isUnstructuredInlineModule,y=(0,r.useState)(!1),v=(0,o.default)(y,2),b=v[0],_=v[1];if(!g&&t.context)return r.default.createElement(c.default,{parentUrl:i,storyline:t,isPeeking:a,trackLinkInteraction:m,internalLinkTrackingParams:h,trackImpressionEvent:n});var w=(0,l.getExperimentalAssetDataFromStoryline)({storyline:t,block:l.STORYLINE_BLOCKS.context});if(!w)return null;var x=w.items,k=w.title;return r.default.createElement(s.InView,{as:"section",role:"complementary",className:p.contextContainerClass,"aria-label":k,onChange:function(e){e&&!b&&n&&(n({event:"impression"}),_(!0))}},r.default.createElement("div",{className:p.contextHeaderClass},r.default.createElement("h2",{className:p.titleClass},k)),x.length<=2?r.default.createElement(u.default,{items:x,singleCard:!0}):r.default.createElement(d.default,{title:k,items:x,parentUrl:i,trackEvent:n,isPeeking:a,trackLinkInteraction:f}))}m.displayName="StorylineContext",m.defaultProps={isPeeking:!1,trackEvent:null,trackLinkInteraction:function(){},trackLinkInteractionV2:function(){},internalLinkTrackingParams:null,isUnstructuredInlineModule:!0};t.default=m},EVBM:function(e,t,n){"use strict";var i=n("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.TranslationPropTypes=t.TimestampBlockPropTypes=t.ContentShapePropTypes=t.BylinesPropTypes=void 0;var a=i(n("17x9"));t.BylinesPropTypes=a.default.shape({headshots:a.default.arrayOf(a.default.any),bylines:a.default.arrayOf(a.default.shape({creators:a.default.arrayOf(a.default.shape({displayName:a.default.string,bioUrl:a.default.string}).isRequired).isRequired,prefix:a.default.string.isRequired}).isRequired).isRequired,role:a.default.arrayOf(a.default.any)}),t.TimestampBlockPropTypes=a.default.shape({timestamp:a.default.string,showUpdatedTimestamp:a.default.oneOf([a.default.boolean,null])}),t.TranslationPropTypes=a.default.shape({language:a.default.shape({code:a.default.string.isRequired}).isRequired,url:a.default.string.isRequired,translatedLinkText:a.default.string.isRequired,linkText:a.default.string.isRequired}),t.ContentShapePropTypes=a.default.shape({content:a.default.arrayOf(a.default.shape({__typename:a.default.string.isRequired,text:a.default.string.isRequired,formats:a.default.arrayOf(a.default.any).isRequired}))})},EXHk:function(e,t,n){"use strict";t.a="/vi-assets/static-assets/NYT-TheInterview-0232c6c95d42d77941fd3d8e5d2776cb.webp"},EYBZ:function(e,t,n){"use strict";var i=n("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.getSectionUrlFromCollections=t.getPrimaryCollection=t.getCollectionType=t.getCollectionData=t.NO_FOLLOW_COLLECTIONS=void 0;var a=i(n("lSNA")),o=i(n("A4Gh"));function r(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function s(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?r(Object(n),!0).forEach((function(t){(0,a.default)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):r(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}t.getPrimaryCollection=function(e){var t=[{name:"SERIES",priority:1},{name:"NEWS_EVENT",priority:2},{name:"SPOTLIGHT",priority:3},{name:"COLUMN",priority:4},{name:"ISSUE",priority:5}];if(!e)return null;var n=[];return e.forEach((function(e){var i=e.collectionType;t.forEach((function(t){t.name===i&&n.push(s(s({},e),{},{priority:t.priority}))}))})),n.sort((function(e,t){return e.priority-t.priority})),n[0]?n[0]:null};var l=t.getCollectionType=function(e){switch(e.collectionType){case"ISSUE":return"issue";case"NEWS_EVENT":return"news-event";case"SECTION":return"section";case"SERIES":return"series";case"SPOTLIGHT":return"spotlight";default:return""}};t.getCollectionData=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t={url:"",displayName:"",slug:"",tagline:"",uri:"",type:""};if(e){if(t.url=e.url||"",e.url){var n=o.default.parse(e.url);t.uri=n.pathname||""}t.displayName=e.name||"",t.slug=e.slug||"",t.tagline=e.tagline||"",t.type=l(e)}return t},t.getSectionUrlFromCollections=function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],i=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";switch(!0){case e.includes("section/science/earth"):return"/section/climate";case e.includes("section/insider"):return"/section/reader-center";case e.includes("pages/business/international"):return"/section/business";default:return e}};return(e=t&&t.url&&t.url.includes("section/")?t:n&&n.length&&t&&n.find((function(e){return"SECTION"===e.collectionType&&(e.slug===t.name||e.name===t.displayName)&&e.url}))||t)?i(e.url||void 0):""},t.NO_FOLLOW_COLLECTIONS=["nyt://legacycollection/432e557b-f9e9-5fe1-8cff-76c602fb3410","nyt://legacycollection/08c818ad-3f50-5de2-b8a3-c3336f27d578","nyt://legacycollection/e9bc7280-968d-520b-8d9b-0f260ef96863","nyt://legacycollection/a708bb7b-59a6-5552-8eb3-efd0a70b9bda","nyt://legacycollection/e326f118-36dd-548f-bba6-1dce6c6ed110","nyt://legacycollection/be770dc6-1024-58ca-9f33-4a51f12f85a7"]},EhNO:function(e,t,n){"use strict";var i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){return a.default.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"23.7 -85.1 300 39.5",role:"none"},a.default.createElement("path",{d:"m46.2-81c0-3.2-3-4.2-5.6-4v.5c1.5 0 2.7.5 2.7 1.6 0 .7-.5 1.6-2 1.6-1.2 0-3.5-.7-5.4-1.3-2.1-.7-4-1.4-5.6-1.4-3.2 0-5.6 2.4-5.6 5.3 0 2.4 1.8 3.2 2.5 3.5l.2-.4c-.5-.3-.9-.7-.9-1.6 0-.7.6-1.8 2.3-1.8 1.5 0 3.4.7 6 1.4 2.2.6 4.7 1.2 6 1.4v5l-2.5 2.1v.2l2.5 2.2v6.9c-1.3.7-2.8.9-4 .9-2.4 0-4.6-.6-6.4-2.6l6.7-3.2v-11.1l-8.2 3.6c.9-2.2 2.6-3.6 4.3-4.7l-.1-.4c-4.9 1.3-9.3 5.8-9.3 11.3 0 6.6 5.4 11.5 11.5 11.5 6.6 0 10.8-5.2 10.7-10.6h-.4c-1 2.1-2.4 4.1-4.2 5.1v-6.8l2.6-2.1v-.2l-2.6-2.1v-5c2.3-.1 4.8-1.8 4.8-4.8zm-14.2 18-2 1c-1.1-1.5-1.9-3.5-1.9-6.2 0-1.1.1-2.5.5-3.5l3.4-1.5zm17.3 3.6-2.2 1.6.3.3 1-.7 3.6 3.3 4.9-3.3-.2-.3-1.3.8-1.6-1.6v-11.2l1.3-1 2.8 2.3v9.9c0 6.2-1.4 7.2-4.2 8.2v.4c4.6.2 8.8-1.4 8.8-9.3v-10.6l1.5-1.2-.2-.2-1.3 1-4-3.5-4.6 3.5v-13.4h-.3l-5.8 3.9v.3c.6.4 1.6.6 1.6 2.5v18.3zm29.8-1.7-4 3.1-4.1-3.3v-1.9l7.7-5.2v-.2l-3.8-5.9-8.5 4.5v10.7l-1.7 1.3.3.3 1.5-1.2 5.5 4 7.4-5.8zm-8.1-2.7v-8l.3-.2 3.6 5.6zm39.3-18.7c0-.5-.1-.9-.3-1.5h-.4c-.5 1.4-1.1 2.1-2.7 2.1-1.4 0-2.5-.9-3.1-1.5l-4.7 5.4.4.4 1.3-1.5c1 .8 1.7 1.5 4 1.6v13.5l-9.5-16.5c-.7-1.2-2-3.1-4.3-3.1-2.6 0-4.9 2.2-4.6 5.9h.5c.1-1 .6-2.1 1.7-2.1.9 0 1.7.9 2.1 1.6v5.3c-3 0-4.9 1.4-4.9 3.8 0 1.2.6 3.3 2.7 3.7v-.4c-.3-.3-.5-.6-.5-1.1 0-.9.7-1.5 1.9-1.5.2 0 .7 0 .9.1v6.9c-3.5 0-6.1 1.9-6.1 5.2 0 3.1 2.7 4.6 5.5 4.4v-.4c-1.7-.2-2.7-1-2.7-2.1 0-1.4 1-2.1 2.3-2.1s2.5.8 3.3 1.7l4.7-5.2-.4-.4-1.2 1.4c-1.8-1.6-2.8-2.2-4.9-2.5v-16.3l13.2 22.9h.9v-22.9c2.5-.1 4.9-2 4.9-4.8zm11.8 21.4-4 3.1-4.2-3.3v-1.9l7.7-5.2v-.2l-3.8-5.9-8.4 4.5v10.7l-1.7 1.3.3.3 1.5-1.2 5.5 4 7.4-5.8zm-8.2-2.7v-8l.3-.2 3.6 5.6zm34.9-8.9-1.2.9-3.1-2.6-3.6 3.3 1.5 1.4v12.3l-4-2.5v-10l1.3-.9-3.8-3.5-3.5 3.3 1.5 1.4v11.7l-.5.3-3.5-2.4v-9.8c0-2.3-1.1-2.9-2.5-3.8-1.2-.7-1.7-1.4-1.7-2.5 0-.9.9-1.5 1.4-1.7v-.4c-1.2 0-4.7 1.3-4.8 4.5 0 1.6.7 2.3 1.6 3.1.8.8 1.6 1.5 1.6 2.9v9.4l-1.7 1.4.3.4 1.6-1.2 4.3 3.4 4.1-2.8 4.5 2.8 8.7-5v-10.9l2.1-1.6zm30.2-9-1.6 1.5-3.6-3.2-5.3 4v-3.7h-.5l.1 26.4c-.5-.1-1.9-.4-3.1-.6l-.1-22.1c0-1.6-1.2-3.9-4.1-3.9-3 0-4.9 2.3-4.9 4.6h.5c.2-1 .7-1.8 1.6-1.8 1 0 1.9.6 1.9 2.8v6.4c-3 .1-4.7 1.8-4.7 3.8 0 1.3.6 3.3 2.7 3.3l.1-.4c-.7-.3-.9-.7-.9-1.1 0-.9.9-1.3 2.1-1.3h.6v10.1c-2.4.8-3.5 2.6-3.5 4.5 0 2.7 2.2 4.8 5.4 4.8 2.3 0 4.2-.4 6.3-.9 1.7-.3 3.7-.7 4.7-.7 1.2 0 1.8.6 1.8 1.5 0 1.1-.5 1.6-1.2 1.7l.1.4c2.7-.5 4.2-2.1 4.2-4.5 0-2.5-2.4-4-5-4-1.4 0-4 .4-6.1.9-2.3.5-4.5.7-5.2.7-1.1 0-2.5-.5-2.5-2.1 0-1.4 1.1-2.4 3.9-2.4 1.5 0 3.2.2 5.1.7 2 .4 3.7 1 5.4 1 2.4 0 4.5-.9 4.5-4.3v-20.1l1.9-1.6zm-6.7 10.1c-.4.5-1.1.9-1.9.9-.9 0-1.6-.5-2-.9v-7.3l1.7-1.1 2.3 2.1v6.3zm0 4.8c-.4-.4-1.1-.8-1.9-.8s-1.6.5-2 .8v-4.3c.3.3 1.1.9 2 .9s1.6-.5 1.9-.9zm0 7.6c0 1.3-.9 2.6-2.6 2.6-.3 0-1 0-1.3-.1v-9.5c.4-.4 1.1-.9 2-.9.8 0 1.5.5 1.9.9zm22.3-11.5-5.3-3.8-7.9 4.5v10.6l-1.6 1.3.2.3 1.3-1 5.2 3.8 8.1-4.9zm-8.6 10.2v-11.6l4.1 3v11.6zm24.2-13.6h-.3c-.4.4-1 .7-1.4.7-.6 0-1.4-.4-1.8-.9h-.3l-2.8 3-2.8-3-4.8 3.3.2.4 1.3-.9 1.7 1.8v10.3l-2.2 1.6.3.3 1-.7 3.9 3.3 5.1-3.4-.2-.3-1.4.9-1.9-1.7v-11.5c.8.9 1.8 1.7 2.9 1.7 2.1 0 3.3-2.4 3.5-4.9zm19.6 15.7-5.6 3.6-7.5-11.4 5.3-8.3h.3c.6.6 1.7 1.3 2.7 1.3 1.1 0 1.9-.6 2.4-1.3h.3c-.2 3.3-2.4 5.2-4.1 5.2s-2.5-.8-3.4-1.3l-.5.7 8.2 12.1 1.6-1zm-17.9-1-2.2 1.6.3.3 1-.7 3.6 3.3 4.9-3.3-.3-.3-1.2.8-1.6-1.6v-25.2h-.3l-5.9 3.9v.3c.6.3 1.7.5 1.7 2.5zm45-21.6c0-3.2-3-4.2-5.6-4v.5c1.5 0 2.7.5 2.7 1.6 0 .7-.5 1.6-2 1.6-1.2 0-3.5-.7-5.4-1.3-2.1-.7-4-1.4-5.6-1.4-3.2 0-5.6 2.4-5.6 5.3 0 2.4 1.8 3.2 2.5 3.5l.2-.4c-.5-.3-.9-.7-.9-1.6 0-.7.6-1.8 2.3-1.8 1.5 0 3.4.7 6 1.4 2.2.6 4.7 1.2 6 1.4v5l-2.5 2.1v.2l2.5 2.2v6.9c-1.3.7-2.8.9-4 .9-2.4 0-4.6-.6-6.4-2.6l6.7-3.2v-11.1l-8.2 3.7c.9-2.2 2.6-3.6 4.3-4.7l-.1-.4c-4.9 1.3-9.3 5.8-9.3 11.3 0 6.6 5.4 11.5 11.5 11.5 6.6 0 10.8-5.2 10.7-10.6h-.4c-1 2.1-2.4 4.1-4.2 5.1v-6.8l2.6-2.1v-.2l-2.6-2.1v-5c2.2-.2 4.8-1.9 4.8-4.9zm-14.2 18-2 1c-1.1-1.5-1.9-3.5-1.9-6.2 0-1.1.1-2.5.5-3.5l3.4-1.5zm19.7-19.5h-.2l-3.3 2.8v.2l2.8 3.1h.3l3.3-2.7v-.2zm5 24.1-1.2.8-1.6-1.6v-11.3l1.6-1.2-.3-.4-1.2.9-2.8-3.4-4.7 3.3.3.4 1.2-.8 1.4 1.8v10.6l-2.1 1.6.2.3 1.1-.8 3.6 3.3 4.9-3.3zm27.2-.2-1.2.8-1.7-1.6v-11.1l1.7-1.2-.3-.4-1.4 1.1-3.7-3.5-4.8 3.4-3.7-3.4-4.7 3.4-2.9-3.4-4.7 3.3.2.4 1.2-.8 1.6 1.7v10.6l-1.3 1.3 3.7 3.1 3.6-3.3-1.5-1.4v-11l1.4-.9 2.5 2.3v9.9l-1.2 1.3 3.8 3.1 3.5-3.3-1.5-1.4v-11.1l1.2-.8 2.7 2.3v9.7l-1.1 1.1 3.8 3.5 5-3.4zm14.2-2.5-4 3.1-4.2-3.3v-1.9l7.7-5.2v-.2l-3.8-5.9-8.4 4.5v11.1l5.6 4.1 7.4-5.8zm-8.2-2.7v-8l.3-.2 3.6 5.6zm23.1-1.5-3.1-2.4c2.1-1.8 2.9-4.3 2.9-5.9 0-.2 0-.7-.1-1h-.4c-.3.9-.9 1.6-2.2 1.6-1.2 0-2.1-.7-2.9-1.6l-7.3 4v5.9l2.7 2.1c-2.8 2.4-3.3 4.2-3.3 5.4 0 1.6.7 2.8 2.1 3.3l.2-.4c-.3-.3-.7-.5-.7-1.2 0-.5.7-1.3 1.9-1.3 1.6 0 2.6 1.1 3.1 1.7l7.1-4.2zm-1.8-4.9c-1.1 1.9-3.6 3.8-5 4.9l-1.8-1.4v-5.8c.7 1.6 2.4 2.9 4.3 2.9 1.1 0 1.7-.2 2.5-.6zm-2.9 13c-.8-1.8-2.7-3.1-4.7-3.1-.5 0-1.8 0-3.1.8.7-1.2 2.9-3.6 5.7-5.2l2 1.6v5.9z",fill:"#fff"}))};var a=i(n("q1tI"))},ErmU:function(e,t,n){"use strict";var i=n("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.getEmailUrl=t.encodeUrlWithSMID=t.default=void 0;var a=i(n("q1tI")),o=(i(n("17x9")),n("Jqp9")),r=i(n("p1Mg")),s=i(n("bkJC")),l=i(n("ZYXy")),c=n("dQ+W"),u=t.encodeUrlWithSMID=function(e,t){if(!e)return e;if(!t)return encodeURIComponent(e);var n=-1===e.indexOf("?")?"?":"&";return encodeURIComponent("".concat(e).concat(n,"smid=").concat(t))},d=t.getEmailUrl=function(e){if(!e)return e;var t=-1===e.indexOf("?")?"?":"&";return"".concat(e).concat(t,"smid=em-share")},p=function(e){var t=e.headline,n=e.summary,i=e.url,p=e.className,f=encodeURIComponent(t.default),m=encodeURIComponent("https://www.facebook.com/"),h={subject:encodeURIComponent("NYTimes.com: ".concat(t.default)),body:encodeURIComponent("From The New York Times:\n\n".concat(t.default,"\n\n").concat(n,"\n\n").concat(d(i)))};return a.default.createElement("div",{"data-view":"share-container","data-share-container-id":"sharetools-inline",className:(0,o.cx)("share-container","collapsed","halt","share-container-inline",p)},a.default.createElement("div",{className:"share-list-container"},a.default.createElement("ul",{className:"share-list halt"},a.default.createElement("li",{"data-share":"Facebook","data-view":"fb-link",className:"share-item "},a.default.createElement("a",{href:"https://www.facebook.com/dialog/feed?app_id=9869919170&link=".concat(u(i,"fb-share"),"&name=").concat(f,"&redirect_uri=").concat(m),target:"_blank",rel:"noopener noreferrer",className:(0,o.cx)("halt","share-link")},a.default.createElement(r.default,{fill:"white",className:c.fbIconClass}),a.default.createElement("span",{className:"visually-hidden"},"Share on Facebook"))),a.default.createElement("li",{"data-share":"Twitter",className:"share-item "},a.default.createElement("a",{href:"https://twitter.com/intent/tweet?url=".concat(u(i,"tw-share"),"&text=").concat(f),target:"_blank",className:"halt share-link",rel:"noopener noreferrer"},a.default.createElement(s.default,{fill:"white",className:c.twitterIconClass}),a.default.createElement("span",{className:"visually-hidden"},"Post on Twitter"))),a.default.createElement("li",{"data-share":"Email",className:"share-item hideOnCollapse"},a.default.createElement("a",{href:"mailto:?subject=".concat(h.subject,"&body=").concat(h.body),target:"_blank",className:"halt share-link",rel:"noopener noreferrer"},a.default.createElement(l.default,{fill:"white",className:c.mailIconClass}),a.default.createElement("span",{className:"visually-hidden"},"Mail"))))))};p.displayName="ShareTools",p.defaultProps={headline:{},summary:"",url:"",className:void 0};t.default=p},EssT:function(e,t,n){"use strict";var i=n("VkAN"),a=n.n(i),o=n("gcR/"),r=n.n(o),s=n("lSNA"),l=n.n(s),c=n("q1tI"),u=n.n(c),d=n("eFc+"),p=n.n(d),f=n("Jqp9"),m=n("V6Yu"),h=n("42vy"),g=n.n(h),y=n("XlcC"),v=n("jOYC"),b=n("hkPW"),_=n("Rb+W"),w=n("06b3"),x=Object.freeze({name:"live-briefing-post-inview",context:"live-briefing"}),k=function(e){var t=e.children,n={event:"impression",module:{name:e.name,context:e.context,region:e.region,label:e.label},user:{regiId:Object(_.f)(w.a)}},i=Object(b.a)({threshold:.1,data:n}),a=i.isTracked,o=i.ref;return u.a.createElement("div",{ref:a?null:o},t)};k.displayName="Heading2Tracking";var O,T,C=k,E=n("HTd6"),S=n("1/zF"),P=function(e){var t=e.data,n=e.className,i=e.isOldLiveBriefing,a=e.article,o=e.region,s=Object(f.useTheme)(),c=s.noFollowExternalLinks,d=t.textAlign?t.textAlign.toLowerCase():null,p="rightToLeft"===(null==s?void 0:s.languageDirection)?S.d:null,h=Object(f.cx)(n,S.b,v.b.layout.textAlign[d]||v.b.layout.textAlign.left,p,l()({},S.c,"guide"===s.treatment)),b=Object(m.generateContentLink)(null==t?void 0:t.content),_=Object(y.createMapInlineUnionWithOptions)({noFollowExternalLinks:c});return r()(g.a,{className:h,id:i?"":b},void 0,i&&u.a.createElement(u.a.Fragment,null,r()("div",{className:S.a,id:b}),r()(C,{name:null==x?void 0:x.name,context:null==x?void 0:x.context,region:o,label:a?"".concat(null==a?void 0:a.url,"#").concat(b):""},void 0,O||(O=r()("span",{height:1})))),t.content.map(_))};P.displayName="Heading2Block",P.defaultProps={className:void 0,isOldLiveBriefing:!1,article:{},region:""},P.fragments={data:p()(T||(T=a()(["\n    fragment Heading2Block_data on Heading2Block {\n      textAlign\n      content {\n        ...TextInline_content\n      }\n    }\n    ","\n  "])),E.a.fragments.content)};t.a=P},Extp:function(e,t,n){"use strict";var i=this&&this.__createBinding||(Object.create?function(e,t,n,i){void 0===i&&(i=n);var a=Object.getOwnPropertyDescriptor(t,n);a&&!("get"in a?!t.__esModule:a.writable||a.configurable)||(a={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,i,a)}:function(e,t,n,i){void 0===i&&(i=n),e[i]=t[n]}),a=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&i(t,e,n);return a(t,e),t},r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var s=o(n("q1tI")),l=n("X6oL"),c=n("etPP"),u=r(n("FY2l")),d=r(n("fdns")),p=n("6gWn"),f=r(n("5UIh")),m=o(n("WnQp"));t.default=function(e){var t,n,i,a,o,r,h,g,y=e.unit,v=(0,s.useState)(!0),b=v[0],_=v[1],w=(0,l.useTracking)(),x=(0,u.default)(null===(t=null==y?void 0:y.content)||void 0===t?void 0:t.url).withRedirectUri().toString(),k=b?s.default.createElement("p",{className:m.headerTextClass},null===(n=y.content)||void 0===n?void 0:n.headerText):s.default.createElement("p",{className:m.headerTextClass},null===(i=y.content)||void 0===i?void 0:i.contentTextPrimary," ",null===(a=y.content)||void 0===a?void 0:a.contentTextSecondary),O=s.default.createElement("div",{className:m.mainContent},s.default.createElement("div",{className:m.logoClass},s.default.createElement(d.default,null)),s.default.createElement("p",{className:m.contentTextClass},null===(o=y.content)||void 0===o?void 0:o.contentTextPrimary,s.default.createElement("strong",null,null===(r=y.content)||void 0===r?void 0:r.contentTextSecondary)),s.default.createElement(c.Button,{component:"a",testId:"dock-content-".concat(String(null===(h=null==y?void 0:y.content)||void 0===h?void 0:h.cta)),href:x,onClick:function(){var e;w.trackEvent(null===(e=null==y?void 0:y.content)||void 0===e?void 0:e.ctaTrackObj)},className:m.buttonClass},null===(g=null==y?void 0:y.content)||void 0===g?void 0:g.cta));return(null==y?void 0:y.canShow)?s.default.createElement(f.default,{testId:"onsite-messaging-unit-".concat(null===p.config||void 0===p.config?void 0:p.config.name),"data-campaign":null==y?void 0:y.campaign,"data-audience":null==y?void 0:y.audience,unit:y,contentID:"SUJO_AUTH_KNOWN_SUB_LOG_IN_224",dockID:"Logged Out Sub - 224",header:k,card:O,onDockHeadingClick:function(){_((function(e){return!e}))},isDockDismissible:!1,minimized:!1,headerCollapsedCTA:"EXPAND",headerExpandedCTA:"COLLAPSE"}):null}},F0cd:function(e,t,n){"use strict";var i=n("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=i(n("q1tI")),o=(i(n("17x9")),n("Jqp9")),r=n("7FfI"),s=n("h58Z"),l=n("XMNT"),c=function(e){var t=e.children,n=e.className,i=(0,o.useTheme)();if(!t)return null;var c=(0,r.getTimestampLocale)(null==i?void 0:i.language),u=(0,r.formatDate)(t,l.DATEONLY,c);return a.default.createElement(s.StyledPubDate,{className:n},u)};c.displayName="PubDate",c.defaultProps={children:null,className:void 0};t.default=c},F77t:function(e,t,n){"use strict";var i=n("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.getSubscriberLockedMessage=t.getSubscribeCallToActionMessage=t.getRegionLockedMessage=t.getCanNowWatchMessage=t.fullEpisodesOf=t.THE_WEEKLY=t.SUBSCRIBER_LOCKED_SECTIONS=t.REGION_LOCKED_SECTIONS=t.REGION_LOCKED_ASSETS=t.NYT_PRESENTS=t.ALLOWED_REGIONS=void 0,t.hasAssetLock=y,t.hasRegionLock=g,t.hasRegionLockClass=void 0,t.hasSubscriberLock=v,t.isAssetLocked=void 0,t.isRegionLocked=function(e){var t,n,i,a,o=g(e).hasRegionLock,r=y(e).hasAssetLock,s=null===(t=e.geolocation)||void 0===t?void 0:t.country,l=null===(n=e.data)||void 0===n||null===(i=n.media)||void 0===i||null===(a=i.media)||void 0===a?void 0:a.sourceId;return{isRegionLocked:Boolean(o&&s&&!u.includes(s)||r&&s&&m(s,l))}},t.isRegionLockedSection=t.isRegionLockedAsset=void 0,t.isSubscriberLocked=function(e,t){return{isSubscriberLocked:v(e).hasSubscriberLock&&!t}},t.regionLockElToShowClass=t.regionLockElToHideClass=t.isSubscriberLockedSection=void 0;var a=i(n("q1tI")),o=t.THE_WEEKLY="the-weekly",r=t.NYT_PRESENTS="nyt-presents",s=t.REGION_LOCKED_SECTIONS=Object.freeze([o,r]),l=t.REGION_LOCKED_ASSETS=Object.freeze([{sourceId:"",region:[""]}]),c=t.SUBSCRIBER_LOCKED_SECTIONS=s,u=t.ALLOWED_REGIONS=Object.freeze(["US"]),d=(t.regionLockElToShowClass="region-lock-el-to-show",t.regionLockElToHideClass="region-lock-el-to-hide",t.hasRegionLockClass="region-lock-has",t.fullEpisodesOf=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.capitalize,i=void 0===n||n,o=t.isOrAre,r=void 0!==o&&o,s=t.onNytimesDotCom,l=void 0!==s&&s;return e?a.default.createElement(a.default.Fragment,null,"".concat(i?"F":"f","ull episodes of ").concat(e),l&&a.default.createElement(a.default.Fragment,null," ","on ",a.default.createElement("a",{href:"https://nytimes.com"},"nytimes.com")),r&&" are"):"".concat(i?"T":"t","his video").concat(r?" is":"")}),p=(t.getRegionLockedMessage=function(e){return a.default.createElement(a.default.Fragment,null,d(e,{isOrAre:!0,onNytimesDotCom:!0})," not available in your"," ","region.")},t.getSubscriberLockedMessage=function(e){return a.default.createElement(a.default.Fragment,null,d(e,{isOrAre:!0,onNytimesDotCom:!0})," available to New York Times subscribers.")},t.getCanNowWatchMessage=function(e){return a.default.createElement(a.default.Fragment,null,"You can now watch ",d(e,{capitalize:!1}),".")},t.getSubscribeCallToActionMessage=function(e){return a.default.createElement(a.default.Fragment,null,"Subscribe to watch ",d(e,{capitalize:!1}),".")},t.isRegionLockedSection=function(e){return!!e&&s.includes(e.toLowerCase())}),f=t.isRegionLockedAsset=function(e){return!!e&&l.some((function(t){return t.sourceId===e}))},m=t.isAssetLocked=function(e,t){var n=l.find((function(e){return e.sourceId===t}));return Boolean(null==n?void 0:n.region.includes(String(e)))},h=t.isSubscriberLockedSection=function(e){return!!e&&c.includes(e.toLowerCase())};function g(e){var t,n,i;return{hasRegionLock:p(e.sectionStyle)&&"SERIES"===(null===(t=e.data)||void 0===t||null===(n=t.media)||void 0===n||null===(i=n.media)||void 0===i?void 0:i.productionType)}}function y(e){var t,n,i,a=null===(t=e.data)||void 0===t||null===(n=t.media)||void 0===n||null===(i=n.media)||void 0===i?void 0:i.sourceId;return{hasAssetLock:f(a)}}function v(e){var t,n,i;return{hasSubscriberLock:h(e.sectionStyle)&&"SERIES"===(null==e||null===(t=e.data)||void 0===t||null===(n=t.media)||void 0===n||null===(i=n.media)||void 0===i?void 0:i.productionType)}}},FHjF:function(e,t,n){"use strict";var i=n("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=i(n("q1tI")),o=(i(n("17x9")),i(n("AfrD"))),r=i(n("Pmun")),s=i(n("TB7k")),l=n("iPKY");function c(e){var t,n=e.item.content,i=e.trackEvent,c=e.trackingParams,u=e.trackLinkInteraction;if(null==n||null===(t=n.content)||void 0===t||!t.length)return null;switch(n.__typename){case"ParagraphBlock":return a.default.createElement(s.default,{text:n,trackEvent:i,trackLinkInteraction:u,internalLinkTrackingParams:c,className:l.paragraphClass});case"ListBlock":return a.default.createElement(o.default,null,n.content.map((function(e,t){return a.default.createElement(r.default,{key:t.toString(),className:l.listItemClass},e.content.map((function(e,t){return a.default.createElement(s.default,{key:t.toString(),text:e,trackEvent:i,trackLinkInteraction:u,internalLinkTrackingParams:c,className:l.paragraphClass})})))})));default:return null}}c.defaultProps={trackEvent:null,trackingParams:null,trackLinkInteraction:function(){}};t.default=c},FKYM:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.setPosition=t.removePosition=void 0;var i=0;t.setPosition=function(){return i+=1,"".concat("mid").concat(i)},t.removePosition=function(){return i-=1,"".concat("mid").concat(i)}},FQbI:function(e,t,n){"use strict";var i=n("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=i(n("lSNA")),o=i(n("q1tI")),r=(i(n("17x9")),n("3sMT")),s=n("Jqp9");function l(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function c(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?l(Object(n),!0).forEach((function(t){(0,a.default)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):l(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var u=(0,s.css)({backgroundColor:r.color.background.secondary,position:"relative",a:{color:r.color.signal.editorial,textDecoration:"underline"}}),d=function(e,t){return{width:e,height:t}},p=(0,s.css)({WebkitFontSmoothing:"antialiased",color:r.color.content.secondary,fontFamily:"'franklin', 'nyt-franklin', arial, helvetica, sans-serif",fontSize:"13px",fontWeight:"700",lineHeight:"18px",padding:"5px 30px",margin:0,boxSizing:"border-box",textAlign:"center",textRendering:"optimizeLegibility",width:"100%"}),f=function(e){var t=e.className,n=e.width,i=e.height,a=e.message,r=e.style;return o.default.createElement("div",{"data-testid":"error-slate",className:(0,s.cx)(u,t),style:c(c({},d(n,i)),r)},o.default.createElement("p",{className:p},o.default.createElement("span",{style:{fontSize:"25px",position:"relative",top:"5px"}},"⚠"),a))};f.displayName="ErrorSlate",f.defaultProps={className:void 0,width:"600px",height:"auto",message:"There was an error loading the player. Please refresh to try again.",style:{}};t.default=f},FSO8:function(e,t,n){"use strict";n.d(t,"a",(function(){return F})),n.d(t,"c",(function(){return U}));var i=n("gcR/"),a=n.n(i),o=n("J4zp"),r=n.n(o),s=n("q1tI"),l=n.n(s),c=n("0G++"),u=n("aFeP"),d=n("C/YW"),p=n.n(d),f=n("Kxyt"),m=n("HUmG"),h=n("5DNu"),g=n("X6oL"),y=n("7yT1");var v=function(e){var t,n=e.onSignup,i=e.pageLoading,o=Object(f.useApolloClient)(),l=Object(s.useRef)(n);l.current=n;var c=Object(u.a)(),d=!c,v=function(e){var t=e.user;return null!==t&&!Object(m.d)(t)}({user:{id:null==c||null===(t=c.userInfo)||void 0===t?void 0:t.regiId}}),b=Object(s.useState)(!1),_=r()(b,2),w=_[0],x=_[1],k=Object(s.useRef)({handleSignup:null}),O=Object(s.useState)([]),T=r()(O,2),C=T[0],E=T[1],S=Object(g.useTracking)().trackEvent;Object(s.useEffect)((function(){var e,t=Object(y.a)();if(null!=t&&t.length&&!d&&!i){t.forEach((function(e){return S(Object(h.a)({clientId:"",newsletterName:"",productCode:e,label:"one click"}))}));var n=Object(y.d)(t,null==c||null===(e=c.newsletterSubscriptions)||void 0===e?void 0:e.newsletters);null!=n&&n.length&&o.query({query:Object(y.b)(n)}).then(y.c).then((function(e){null!=e&&e.length&&E(e)}))}}),[o,d,i]);var P=Object(s.useRef)(!1);return Object(s.useEffect)((function(){d||null==C||!C.length||P.current||(P.current=!0,v?(k.current={handleSignup:y.f},x(!0)):Object(y.f)({newsletters:C,onSignup:l.current,apolloClient:o,user:c,pageType:Object(y.e)(c)}))}),[v,C,d,o,c]),{loginModal:Object(s.useMemo)((function(){return v&&null!=C&&C[0]?a()(p.a,{isOpen:w,handleClose:function(){return x(!1)},onLogin:function(){window.location.reload()},host:vi.env.AUTH_HOST,newsletter:C[0]}):null}),[v,w,C])}},b=n("fdyL"),_=n("lSNA"),w=n.n(_);function x(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function k(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?x(Object(n),!0).forEach((function(t){w()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):x(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var O=function(e){return e.sections.reduce((function(e,t){return t.products.forEach((function(n){e[n.newsletterId]=k(k({},n),{},{cardStyle:t.cardStyle})})),e}),{})},T=n("RIqP"),C=n.n(T);function E(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function S(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?E(Object(n),!0).forEach((function(t){w()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):E(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var P=function(e,t){var n=t.setSubscriptions,i=t.setSubscriptionMap,a=t.setShowSuccessWithId,o=t.newsletterMap,r=t.subscriptions,s=t.subscriptionMap,l={},c=[],u=e.map((function(e){var t=e.newsletterId,n=e.isFreeTrial,i=e.freeTrialSignupTime;return l[t]={isFreeTrial:n,freeTrialSignupTime:i},c.push(t),o[t]}));n([].concat(C()(r),C()(u))),i(S(S({},s),l)),a(c)},I=n("yXPU"),M=n.n(I),A=n("o0o1"),j=n.n(A),N=(n("ls82"),n("CQ4Z"));function L(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function D(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?L(Object(n),!0).forEach((function(t){w()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):L(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var R=function(){var e=M()(j.a.mark((function e(t,n,i,a){var o,r,s,l,c;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Object(N.user)();case 3:s=e.sent,l=s.data,c=(null==l||null===(o=l.user)||void 0===o||null===(r=o.newsletterSubscriptions)||void 0===r?void 0:r.newsletters)||[],t(c.map((function(e){var t=e.productCode;return a[t]}))),n(c.reduce((function(e,t){var n=t.productCode,i=t.isFreeTrial,a=t.freeTrialSignupTime;return D(D({},e),{},w()({},n,{isFreeTrial:i,freeTrialSignupTime:a}))}),{})),i(!1),e.next=15;break;case 11:e.prev=11,e.t0=e.catch(0),"prd"!==vi.env.ENVIRONMENT&&console.warn("NewsletterProvider: The Newsletter subscription endpoint had an error.",e.t0),i(!1);case 15:case"end":return e.stop()}}),e,null,[[0,11]])})));return function(t,n,i,a){return e.apply(this,arguments)}}(),B=n("rleM"),z={newsletterSectionConfigs:null,pageType:null,isLoading:!0,subscriptions:[],subscriptionMap:{},newsletterMap:null,showSuccessWithId:!1,updateSubscription:function(e){return null},turnOffSuccess:function(){return null},user:null},F=l.a.createContext(z),U=function(){return l.a.useContext(F)},H=function(e){var t=e.pageType,n=e.children,i=Object(c.a)(t),o=Object(s.useState)(!0),l=r()(o,2),d=l[0],p=l[1],f=Object(s.useState)([]),m=r()(f,2),y=m[0],_=m[1],w=Object(s.useState)({}),x=r()(w,2),k=x[0],T=x[1],C=Object(s.useState)(null),E=r()(C,2),S=E[0],I=E[1],M=Object(s.useState)(!1),A=r()(M,2),j=A[0],N=A[1],L=Object(u.a)(),D=Object(g.useTracking)().trackEvent,z=Object(s.useCallback)((function(e){return P(e,{setSubscriptions:_,setSubscriptionMap:T,setShowSuccessWithId:N,newsletterMap:S,subscriptions:y,subscriptionMap:k})}),[_,T,N,S,y,k]),U=function(e){e.forEach((function(e){var t,n=e.newsletterId;D(Object(h.c)({newsletterName:null===(t=S[n])||void 0===t?void 0:t.title,productCode:n,label:"one click"}))}))},H=Object(B.a)({onSignup:function(e,t){var n=t.productCode;U([{newsletterId:n}]),z([{newsletterId:n}]),Object(b.handleRedirectForNewsletter)(t)},pageLoading:!S}).loginModal,W=v({onSignup:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];if(null!=t&&t.length||null!=t&&t.length()){var n=t.map((function(e){return{newsletterId:e.productCode}}));U(n),z(n)}},pageLoading:!S}).loginModal,q=Object(s.useCallback)((function(){return N(!1)}),[N]);return Object(s.useEffect)((function(){var e;if(null!=i&&null!==(e=i.sections)&&void 0!==e&&e.length&&!S){var t=O(i);I(t)}}),[S,i,I]),Object(s.useEffect)((function(){S&&R(_,T,p,S)}),[_,T,p,S]),a()(F.Provider,{value:{newsletterSectionConfigs:i,pageType:t,isLoading:d,subscriptions:y,subscriptionMap:k,newsletterMap:S,showSuccessWithId:j,updateSubscription:z,turnOffSuccess:q,user:L}},void 0,n,H,W)};H.displayName="NewsletterProvider",H.defaultProps={pageType:""},H.displayName="NewsletterProvider";t.b=H},FZH6:function(e,t,n){"use strict";n.d(t,"a",(function(){return w}));var i,a=n("VkAN"),o=n.n(a),r=n("gcR/"),s=n.n(r),l=n("q1tI"),c=n("Vg22"),u=n("eFc+"),d=n.n(u),p=n("17x9"),f=n.n(p),m=n("hKNt");function h(e){var t=e.children,n=e.fetchSummary,i=e.article,a=e.clearArticle,o=Object(l.useRef)(null);return Object(l.useEffect)((function(){o.current&&o.current!==i.sourceId&&a(),o.current=i.sourceId,n(i.url)}),[i,i.sourceId,i.url,a,n]),t}h.fragments={creativeWork:d()(i||(i=o()(["\n    fragment CommentContainer_creativeWork on CreativeWork {\n      commentProperties {\n        status\n        approvedCommentsCount\n      }\n      ... on Published {\n        sourceId\n        url\n      }\n    }\n  "])))},h.propTypes={children:f.a.node,article:f.a.shape({sourceId:f.a.string,url:f.a.string,commentProperties:f.a.shape({status:f.a.string,approvedCommentsCount:f.a.number})}).isRequired,clearArticle:f.a.func.isRequired,fetchSummary:f.a.func.isRequired},h.defaultProps={children:null};var g,y=Object(c.connect)((function(){return{}}),(function(e){return{clearArticle:function(){return e(Object(m.a)())},fetchSummary:function(t){return e(Object(m.j)(t))}}}))(h),v=n("xBez"),b=n("8iTF");function _(e){var t=e.article,n=e.children;return Object(b.g)(t.commentProperties.status)?s()(c.Provider,{store:v.b},void 0,s()(y,{article:t},void 0,n)):n}_.fragments={creativeWork:d()(g||(g=o()(["\n    fragment CommentsProvider_creativeWork on CreativeWork {\n      commentProperties {\n        status\n        prompt\n      }\n      ...CommentContainer_creativeWork\n    }\n    ","\n  "])),y.fragments.creativeWork)};var w=_},FZbM:function(e,t,n){"use strict";var i=n("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.translationLinksClass=t.translationLinkClass=void 0;var a=n("Jqp9"),o=i(n("wXC7")),r=n("3sMT");t.translationLinksClass=(0,a.css)("font-family:",o.default.font.franklinBase,";font-size:",o.default.font.size(14),";line-height:",o.default.font.size(20),";display:block;width:auto;margin:5px auto 0 auto;",o.default.breakpoint.small,"{width:auto;}@media print{display:none;}"),t.translationLinkClass=(0,a.css)("display:inline-block;color:",r.color.signal.editorial,";text-decoration:none;",o.default.breakpoint.small,"{margin-top:0;}&:hover{color:",r.color.signal.editorial,";}&:visited{color:",r.color.signal.editorial,";}&::after{color:",r.color.stroke.quaternary,";content:'•';margin-left:6px;margin-right:7px;font-size:8px;}&:last-child::after{content:none;}")},Febw:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getCollectionBasedSectionWithLogo=void 0;var i=n("DnBa");t.getCollectionBasedSectionWithLogo=function(e){var t=e.collectionBasedSections,n=e.collections,a=e.logos;if(t)for(var o=0;o<t.length;o+=1){var r,s=null==t||null===(r=t[o])||void 0===r?void 0:r.call(t,n),l=(0,i.getSectionWithLogo)(s,a);if(l)return l}}},Fegq:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;t.default='\nfragment onCardDeckReporterThread on ReporterThread {\n  __typename\n  data\n  cards {\n    key\n    data\n    text {\n      key\n      content {\n        ... on TextInline {\n          text\n          __typename\n        }\n      }\n    }\n    bylines {\n      key\n      byline {\n        prefix\n        creators: creatorSnapshots {\n          ... on PersonSnapshot {\n            displayName\n            promotionalMedia {\n              ... on Image {\n                id\n                crops(renditionNames: ["thumbStandard", "thumbLarge", "mobileMasterAt3x"]) {\n                  renditions {\n                    url\n                    name\n                    width\n                    height\n                  }\n                }\n              }\n            }\n          }\n          __typename\n        }\n      }\n    }\n  }\n}\n'},FfMl:function(e,t,n){"use strict";var i=n("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.default=u;var a=i(n("lSNA")),o=i(n("q1tI")),r=n("Jqp9"),s=i(n("iSgW")),l=i(n("yQsP")),c=n("rJzx");function u(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.className,n=e.hideShadow,i=e.audioDeepLink,u=(0,s.default)();return o.default.createElement("div",{className:(0,r.cx)(c.hideOnAndroidClass,c.bannerWrapperClass,(0,a.default)({},c.withBorderClass,n||!u))},o.default.createElement("div",{className:(0,r.cx)(c.audioAppAsBannerClass,c.storylinesMenuShadowClass,(0,a.default)({},c.storylinesMenuApplyShadowClass,!n&&u),t)},o.default.createElement(l.default,{audioDeepLink:i})))}u.displayName="AudioAppBanner"},FfcP:function(e,t,n){"use strict";var i=n("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.revealClass=t.clueClass=t.answerClass=void 0;var a=n("Jqp9"),o=i(n("wXC7")),r=n("3sMT");t.revealClass=(0,a.css)("margin-bottom:1rem;.show .answer{opacity:1;}.hide .answer{opacity:0;}"),t.clueClass=(0,a.css)("font-family:",o.default.font.serifBase,";cursor:pointer;margin:0 auto 1rem;text-decoration:underline;color:",r.color.signal.editorial,";&:hover{text-decoration:none;}&:focus{outline:none;}"),t.answerClass=(0,a.css)("font-family:",o.default.font.serifBase,";transition:opacity 0.2s ease-out;opacity:0;&.show{opacity:1;}")},FrTx:function(e,t,n){"use strict";var i=this&&this.__createBinding||(Object.create?function(e,t,n,i){void 0===i&&(i=n);var a=Object.getOwnPropertyDescriptor(t,n);a&&!("get"in a?!t.__esModule:a.writable||a.configurable)||(a={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,i,a)}:function(e,t,n,i){void 0===i&&(i=n),e[i]=t[n]}),a=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&i(t,e,n);return a(t,e),t},r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var s=o(n("q1tI")),l=n("X6oL"),c=r(n("5UIh")),u=o(n("J3mF")),d=n("v5cc"),p=n("syiw"),f=n("HDG5"),m=n("djNW"),h=n("FY2l"),g=n("6gWn");t.default=function(e){var t,n,i,a,o=e.unit,r=(0,s.useState)(!1),y=r[0],v=r[1],b=(0,p.useMessageSelection)({config:{name:"dock"}}),_=(0,f.useUserState)(),w=(0,l.useTracking)(),x="/"===(0,h.getPathName)()?"homepage":"article",k=s.default.createElement("div",{className:u.mainText},"Tell us about yourself. ",s.default.createElement("b",{className:u.boldText},"Take the survey.")),O=function(e,t){w.trackEvent({event:"moduleInteraction",eventData:{pagetype:x,trigger:"module",type:"click"},module:{name:e,label:"ADS_RES_FIRST_PARTY_SURVEY_221",element:{name:m.Action.TakeSurvey,url:t}}})};if(b.loading)return null;if(!y){var T=null===(n=null===(t=null==b?void 0:b.response)||void 0===t?void 0:t.userstate())||void 0===n?void 0:n.messageSelectionMessageCaps,C=null;if(T)if((I=T).forEach((function(e){var t,n;"dock"===(null==e?void 0:e.unit)&&(null==e?void 0:e.campaign)===(null===(t=null==b?void 0:b.response)||void 0===t?void 0:t.campaign())&&(null==e?void 0:e.audience)===(null===(n=null==b?void 0:b.response)||void 0===n?void 0:n.audience())&&(C=e)})),null!==C){var E=C,S=new Date(null==E?void 0:E.lastSeenOn).getTime(),P=(new Date).getTime();Math.abs(Math.round(P-S)/6e4)>525600?E.viewCount=1:E.viewCount+=1,E.lastSeenOn=(new Date).toISOString(),_.update({messageSelectionMessageCaps:I})}if(!C){var I=[];T&&(I=T),I.push({unit:"dock",campaign:null===(i=null==b?void 0:b.response)||void 0===i?void 0:i.campaign(),audience:null===(a=null==b?void 0:b.response)||void 0===a?void 0:a.audience(),lastSeenOn:(new Date).toISOString(),viewCount:1,dismissed:!1}),_.update({messageSelectionMessageCaps:I})}v(!0)}return s.default.createElement(c.default,{testId:"onsite-messaging-unit-".concat(null===g.config||void 0===g.config?void 0:g.config.name),"data-campaign":null==o?void 0:o.campaign,"data-audience":null==o?void 0:o.audience,unit:o,contentID:"ADS_RES_FIRST_PARTY_SURVEY_221",dockID:"standard",header:k,headingClassName:u.headerContainer,onDockHeadingClick:function(){var e,t="".concat(null===(e=null==o?void 0:o.content)||void 0===e?void 0:e.url,"&agentid=").concat((0,d.getCookie)("nyt-a"));O("firstPartySurvey",t),O("dock",t),window.open(t,"_blank","noopener,noreferrer")},isDockDismissible:!1,isDockExpandable:!1,minimized:!0,headingClassStyle:u.headingClass,headingInfoContainerStyle:u.headingInfoContainer,headingMessageClassStyle:u.headingMessageClass,ctaIconWrapperStyle:u.ctaIconWrapper,ctaContainerStyle:u.ctaContainer,ctaActionTextClassStyle:u.ctaActionTextClass})}},G03P:function(e,t,n){"use strict";var i=n("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.default=l;var a=i(n("cDf5")),o=i(n("q1tI")),r=n("6l8D"),s=n("s5tu");function l(e,t){var n,i,l,c,u,d,p=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,f=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},m=null!==(n=e.url)&&void 0!==n?n:null===(i=e.attrs)||void 0===i?void 0:i.href,h=(0,s.isInternalLink)(m);if(h||(u="noopener noreferrer",d="_blank"),f.noFollowExternalLinks&&!h&&(void 0===u&&(u=""),u="".concat(u," nofollow").trim()),h&&f.internalLinkTrackingParams&&"object"===(0,a.default)(f.internalLinkTrackingParams)){var g=-1===m.indexOf("?")?"?":"&";m="".concat(m).concat(g).concat((0,s.objectToQueryParams)(f.internalLinkTrackingParams))}if(h&&"object"===(0,a.default)(f.onPageDeeplinks))try{var y=new URL(m).pathname;y&&f.onPageDeeplinks[y]&&(m=f.onPageDeeplinks[y])}catch(e){}return o.default.createElement("a",{className:r.linkClass,href:m,title:null!==(l=e.title)&&void 0!==l?l:null===(c=e.attrs)||void 0===c?void 0:c.title,key:p,rel:u,target:d},t)}l.displayName="linkFormatFromOak"},GCcl:function(e,t,n){"use strict";n.d(t,"b",(function(){return s})),n.d(t,"a",(function(){return l}));var i="UJ_AAOnboardingGamesIntervention_0624",a="1_variant_AAonb_plusbanner",o="2_variant_Gamesonb_only",r="3_variant_Gamesonb_plusbanner",s=function(e){var t,n;return(null==e||null===(t=e[i])||void 0===t?void 0:t.variant)===o||(null==e||null===(n=e[i])||void 0===n?void 0:n.variant)===r},l=function(e){var t,n;return(null==e||null===(t=e[i])||void 0===t?void 0:t.variant)===a||(null==e||null===(n=e[i])||void 0===n?void 0:n.variant)===r}},GR2s:function(e,t,n){"use strict";var i,a=n("gcR/"),o=n.n(a),r=n("q1tI"),s=n.n(r),l=n("OwL/"),c=n("FSO8"),u=n("Odck"),d=n("Jqp9"),p=n("wXC7"),f=n.n(p),m="\n  opacity: 1;\n  bottom: 50px;\n\n  ".concat(f.a.breakpoint.small," {\n    bottom: 30px;\n  }\n"),h=Object(d.css)("\n  opacity: 0;\n  bottom: 0;\n"),g=Object(d.css)(m," transition:opacity 300ms,bottom 300ms;transition-delay:500ms;"),y=Object(d.css)(m),v=Object(d.css)("\n  opacity: 0;\n  bottom: 0;\n"," transition:opacity 300ms,bottom 300ms;"),b=Object(d.css)("position:fixed;max-width:95vw;width:max-content;left:50%;padding:16px;background:",f.a.color.black,";text-align:center;color:",f.a.color.white,";font-family:",f.a.font.franklinBase,";font-size:",f.a.font.size(14),";border-radius:4px;line-height:18px;letter-spacing:0.5px;transform:translateX(-50%);box-shadow:0 2px 4px rgba(0,0,0,0.25);z-index:10000;box-sizing:border-box;display:flex;flex-direction:column;align-items:center;"),_=Object(d.css)("display:flex;flex-direction:column;flex-wrap:wrap;justify-content:center;margin-top:-3px;gap:0 ",f.a.font.size(5),";@media (min-width:350px){min-width:284px;}",f.a.breakpoint.medium,"{flex-wrap:nowrap;white-space:nowrap;max-width:100vw;}"),w=Object(d.css)("display:block;font-size:",f.a.font.size(15),";line-height:",f.a.font.size(18),";letter-spacing:",f.a.font.size(.2),";"),x=Object(d.css)("font-family:",f.a.font.karnakBase,";font-size:",f.a.font.size(19),";line-height:",f.a.font.size(22),";letter-spacing:",f.a.font.size(.6),";font-weight:",f.a.font.weight.bold,";margin-bottom:",f.a.font.size(14),";"),k=Object(d.css)("font-family:",f.a.font.franklinBase,";font-size:",f.a.font.size(11),";line-height:",f.a.font.size(11),";letter-spacing:0.09em;font-weight:",f.a.font.weight.medium,";text-transform:uppercase;margin-bottom:",f.a.font.size(14),";"),O=n("oXTd"),T=function(e){var t=e.newsletterSuccesses,n=e.turnOffSuccess;if(!t)return null;var a=function(e){if(e.every((function(e){return e.cardStyle===O.a.alert}))){if(e.length<2)return O.d;if(e.length>1)return O.e}var t=e.length>1?O.g:O.h;return e.some((function(e){return e.isFreeTrial}))?O.f:t}(t),r=function(e){return e.every((function(e){return e.cardStyle===O.a.alert}))?null:(null==e?void 0:e.length)>1?O.c:O.b}(t),l=t.map((function(e){return e.title})),c=l.length<=4?2:3,p=l.slice(0,c).join(", "),f=l.slice(c).join(", ");return o()(u.CSSTransition,{classNames:{enter:h,enterActive:g,enterDone:y,exit:y,exitActive:v},in:!(null==t||!t.length)&&t.every((function(e){return!!e.title})),mountOnEnter:!0,onEntered:function(){setTimeout((function(){return n()}),4500)},unmountOnExit:!0,timeout:{enter:800,exit:200}},void 0,o()("section",{className:b,"data-testid":"newsletter-success-toast"},void 0,o()("span",{className:Object(d.cx)(w,x)},void 0,p,f&&s.a.createElement(s.a.Fragment,null,",",i||(i=o()("br",{}))," ",f)),t.some((function(e){return e.allowedEntitlement}))&&o()("span",{className:Object(d.cx)(w,k),"data-testid":"newsletter-success-toast-kicker"},void 0,"For Times Subscribers"),o()("div",{className:_},void 0,o()("span",{className:w,"data-testid":"newsletter-success-toast-message"},void 0,a),r&&o()("span",{className:w},void 0,r))))};T.displayName="SuccessToast";var C=T,E=function(){var e=Object(c.c)(),t=e.subscriptionMap,n=e.turnOffSuccess,i=e.showSuccessWithId,a=e.newsletterMap,r=a&&i?i.map((function(e){var n,i,o,r;return{title:(null===(n=a[e])||void 0===n?void 0:n.title)||"",isFreeTrial:null==t||null===(i=t[e])||void 0===i?void 0:i.isFreeTrial,allowedEntitlement:null===(o=a[e])||void 0===o?void 0:o.allowedEntitlement,cardStyle:null===(r=a[e])||void 0===r?void 0:r.cardStyle}})):[];return o()(C,{newsletterSuccesses:r,turnOffSuccess:n})};E.displayName="SuccessToastWrapper";t.a=Object(l.a)(E)},GXCH:function(e,t,n){"use strict";var i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var a=i(n("q1tI")),o=n("tHll"),r=n("Wj/z");t.default=function(){var e=(0,o.useUnit)(r.config).unit;return(null==e?void 0:e.canShow)&&(null==e?void 0:e.component)?a.default.createElement(e.component,{unit:e}):null}},H0B8:function(e,t,n){"use strict";t.a="/vi-assets/static-assets/NYT-SERIAL4-album-a9e021539b5e995c5730d59046d148a2.webp"},H0lQ:function(e,t,n){"use strict";var i=n("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=i(n("Vj0M")),o=function(e,t){return"000".concat(e).slice(-1*t)};t.default=function(e){var t=(0,a.default)(e),n=t.hours,i=t.minutes,r=t.seconds;return n<1?"".concat(i,":").concat(o(r,2)):"".concat(n,":").concat(o(i,2),":").concat(o(r,2))}},H1QR:function(e,t,n){"use strict";var i=n("VkAN"),a=n.n(i),o=n("lSNA"),r=n.n(o),s=n("gcR/"),l=n.n(s),c=(n("q1tI"),n("eFc+")),u=n.n(c),d=n("Jqp9"),p=n("d8k4"),f=n("zsRM"),m=n("XMA8"),h=n("hG4R"),g=n("HNZC"),y=n.n(g),v=n("wXC7"),b=n.n(v),_=n("wRre"),w=Object(d.css)("width:calc(100% - 40px);max-width:",b.a.breakpoint.textBodyWidth,"px;margin:15px auto;"),x=function(e){var t=e.media,n=t.url,i=new URL(n),a=Object(m.h)(Object(_.b)(t.promotionalMedia),"spanImageCrops");return l()(y.a,{className:w,documentData:{assetsHost:i.host,publishPath:i.pathname,fullImgUrl:a},title:t.headline.default,summary:t.summary,displayStyle:"Single Page"})};x.displayName="DocPromoShim";var k,O=x,T=n("3sMT"),C=Object(d.css)(b.a.breakpoint.small,"{margin-left:15px;display:flex;flex-direction:column;justify-content:center;}"),E=Object(d.css)("font-family:",b.a.font.serifBase,";color:",T.color.content.quaternary,";font-size:",b.a.font.size(15),";line-height:",b.a.font.size(20),";margin-bottom:5px;",b.a.breakpoint.medium,"{font-size:",b.a.font.size(15),";line-height:",b.a.font.size(20),";margin-bottom:10px;max-width:440px;}"),S=Object(d.css)("margin-bottom:15px;",b.a.breakpoint.medium,"{min-width:375px;margin-bottom:0;}"),P=Object(d.css)(b.a.breakpoint.small,"{display:flex;flex-direction:row;}"),I=Object(d.css)("display:block;"),M=Object(d.css)("font-family:",b.a.font.serifMedium,";font-weight:",b.a.font.weight.bold,";display:inline-block;color:",T.color.content.primary,";font-size:",b.a.font.size(18),";line-height:",b.a.font.size(22),";margin-bottom:4px;&:hover{color:",T.color.content.quaternary,";}&:focus{text-decoration:none;}",b.a.breakpoint.medium,"{font-size:",b.a.font.size(18),";line-height:",b.a.font.size(22),";}"),A=Object(d.css)("width:calc(100% - 40px);max-width:",b.a.breakpoint.textBodyWidth,"px;box-sizing:border-box;margin:0.5rem auto 1.5rem;padding:15px;border:1px solid ",T.color.stroke.quaternary,";&:hover{.",M,"{color:",T.color.content.quaternary,";}}",b.a.breakpoint.medium,"{padding:20px;}@media print{display:none;}"),j=Object(d.css)("width:calc(100% - 40px);margin:",b.a.breakpoint.mobileBlockMargins,";text-align:center;overflow:hidden;",b.a.breakpoint.medium,"{max-width:",b.a.breakpoint.textBodyWidth,"px;margin:",b.a.breakpoint.desktopBlockMargins,";}&.small{width:calc(100% - 40px);max-width:580px;display:flex;",b.a.breakpoint.small,"{margin-left:auto;margin-right:auto;}",b.a.breakpoint.extraLarge,"{max-width:",b.a.breakpoint.textBodyWidthExtralarge,"px;}}&.medium{max-width:",b.a.breakpoint.textBodyWidth,"px;width:100%;margin-left:0;",b.a.breakpoint.medium,"{max-width:",b.a.breakpoint.textBodyWidth,"px;width:100%;}",b.a.breakpoint.extraLarge,"{max-width:",b.a.breakpoint.textBodyWidthExtralarge,"px;}}&.large{width:calc(100% - 40px);max-width:",b.a.breakpoint.mediaMaxWidth,"px;margin-left:auto;margin-right:auto;",b.a.breakpoint.large,"{width:945px;}",b.a.breakpoint.extraLarge,"{width:",b.a.breakpoint.mediaMaxWidth,"px;}}&.full{width:100%;max-width:100%;margin-left:auto;margin-right:auto;}@media print{display:none;}"),N=Object(d.css)("display:none;"),L=function(e){var t=e.data,n=e.styles,i=e.truncated,a=e.elementCount,o=e.minimumTruncation,s=e.dropzoneCount,c=e.isAboveH1,u=e.enableInteractiveBridge,h=t.media,g={shouldTruncate:i,minimumTruncation:o,elementCounter:a,dropzoneCounter:s},y=Object(f.h)(g)?N:null;if("Interactive"===(null==h?void 0:h.__typename)){if("doc-tools"===(null==h?void 0:h.sourceApplication))return l()(O,{media:h});var v=Object(m.h)(Object(_.b)(h.promotionalMedia),"spanImageCrops");return l()("div",{className:Object(d.cx)(A,y),"data-testid":"interactive-block"},void 0,l()("a",{className:Object(d.cx)(P,r()({},I,Boolean(!v))),href:h.url},void 0,v&&l()("div",{className:S},void 0,l()("img",{alt:"",src:v})),l()("div",{className:C},void 0,l()("h2",{className:M},void 0,h.headline.default),l()("p",{className:E},void 0,h.summary))))}return l()(p.a,{media:h,styles:Object(d.cx)(n,j),inStory:!0,isAboveH1:c,embeddedClass:y,enableInteractiveBridge:u})};L.displayName="InteractiveBlock",L.defaultProps={styles:void 0,truncated:!1,elementCount:void 0,dropzoneCount:void 0,minimumTruncation:void 0,isAboveH1:!1,enableInteractiveBridge:!0},L.fragments={data:u()(k||(k=a()(["\n    fragment InteractiveBlock_data on InteractiveBlock {\n      media {\n        __typename\n        ...EmbeddedInteractive_media\n        ... on EmbeddedInteractive {\n          id\n          displayProperties {\n            maximumWidth\n            minimumWidth\n          }\n        }\n        ... on HasPromotionalProperties {\n          promotionalMedia {\n            __typename\n            ...SpanImage_media\n            ... on HasPromotionalProperties {\n              promotionalMedia {\n                ...SpanImage_media\n              }\n            }\n          }\n        }\n        ... on Interactive {\n          id\n          headline {\n            default\n          }\n          url\n          summary\n          firstPublished\n          sourceApplication\n        }\n      }\n    }\n    ","\n    ","\n  "])),h.a.fragments.media,p.a.fragments.media)};t.a=L},H6qo:function(e,t,n){"use strict";var i=n("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=i(n("q1tI")),o=(i(n("17x9")),n("1gPk")),r=function(e){var t=e.children;return a.default.createElement("span",{className:o.preClass},t)};r.displayName="PreFormatted";t.default=r},HChe:function(e,t,n){"use strict";var i=n("E00O"),a=n("B2Q+");t.a=function(){return window.matchMedia("(min-width: ".concat(i.a.BREAKPOINT_ML,"px)")).matches?"desktop":Object(a.a)()}},HMjI:function(e,t,n){"use strict";var i=n("TqRt"),a=n("cDf5");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=i(n("lSNA")),r=i(n("q1tI")),s=n("Jqp9"),l=(i(n("17x9")),i(n("bNs8"))),c=i(n("TTpX")),u=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=a(e)&&"function"!=typeof e)return{default:e};var n=h(t);if(n&&n.has(e))return n.get(e);var i={__proto__:null},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var r in e)if("default"!==r&&{}.hasOwnProperty.call(e,r)){var s=o?Object.getOwnPropertyDescriptor(e,r):null;s&&(s.get||s.set)?Object.defineProperty(i,r,s):i[r]=e[r]}return i.default=e,n&&n.set(e,i),i}(n("6qvD")),d=n("f/4F"),p=i(n("lraK")),f=i(n("XMNT")),m=n("SJcc");function h(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(h=function(e){return e?n:t})(e)}function g(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function y(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?g(Object(n),!0).forEach((function(t){(0,o.default)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):g(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var v=function(e){var t=e.data,n=e.className,i=e.contentAlignment,a=e.Headshot,o=e.section,d=e.wordCount,h=e.showReadingTime,g=e.readingTimeRef;if(!t)return null;var v,b=t.headshots,_=void 0===b?null:b,w=t.bylines,x=void 0===w?null:w,k=t.role,O=void 0===k?null:k,T=t.timestamp,C=void 0===T?{}:T,E=(0,u.getHeadshotCount)(_),S=function(e){try{return e.map((function(e){return y(y({},e),{},{props:y(y({},e.props),{},{opts:y(y({},e.props.opts),{},{blank:!1})})})}))}catch(t){return e}}(O),P=function(e){return null!=e&&e.props?y(y({},e.props),{},{time:e.props.time||e.props.children}):e||{}}(C),I=P.time,M=P.lastMajorModification,A=P.updatedText,j=P.showUpdatedTimestamp,N=P.canShowTime,L=P.hideTimestamp,D="t-magazine"===o||"magazine"===o,R=C&&(v=C,!(0===Object.entries(v).length&&v.constructor===Object))||C&&(null==C?void 0:C.type);return r.default.createElement("div",{className:(0,s.cx)(m.totalBylineContainerClass,n)},r.default.createElement(m.ComposedBylineContainer,{headshotCount:E,contentAlignment:i},_&&r.default.createElement(u.default,{inComposedByline:!0,Headshot:a,headshots:_}),r.default.createElement(m.TextContainer,{headshotCount:E},x&&r.default.createElement(l.default,{bylines:x}),S&&r.default.createElement(c.default,null,S))),R&&!L&&r.default.createElement("div",{ref:g,"data-testid":"reading-time-module",className:m.readTimeContainerClass},r.default.createElement(m.SectionContainer,null,R&&r.default.createElement(m.SectionContainerItem,null,"function"==typeof C.type?C:r.default.createElement(f.default,{updatedText:A,canShowTime:N,lastMajorModification:M,className:m.timestampMarginsClass,showUpdatedTimestamp:j},I)),h&&!D&&r.default.createElement(p.default,{wordCount:d,className:m.readTimeClass}))))};v.displayName="ComposedByline",v.defaultProps={contentAlignment:"default",className:void 0,data:null,Headshot:d.StyledHeadshot,section:void 0,wordCount:null,showReadingTime:!1,readingTimeRef:void 0};t.default=v},HNQ6:function(e,t,n){"use strict";var i=n("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t=function(t){return r.default.createElement(s.default,null,(function(n){return r.default.createElement(e,(0,o.default)({},n,t))}))};try{var n=e.propTypes,i=(n.VHS,(0,a.default)(n,l),e.defaultProps),u=(i.VHS,(0,a.default)(i,c));t.defaultProps=u}catch(e){}return t.displayName="WithDependencyLoader(".concat(e.displayName,")"),t};var a=i(n("QILm")),o=i(n("pVnL")),r=i(n("q1tI")),s=i(n("11hc")),l=["VHS"],c=["VHS"]},HNZC:function(e,t,n){"use strict";var i=n("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.VALID_DISPLAY_STYLES=t.DISPLAY_STYLE=void 0;var a=i(n("q1tI")),o=(i(n("17x9")),n("Jqp9")),r=i(n("0oBV")),s=i(n("42vy")),l=i(n("yEZI")),c=i(n("wXC7")),u=i(n("ZwWh")),d=t.DISPLAY_STYLE={COMPACT:"Compact",SINGLE_PAGE:"Single Page"};t.VALID_DISPLAY_STYLES=Object.values(d);var p=function(e){var t=e.className,n=e.title,i=e.summary,r=e.documentData,p=e.displayStyle,f=e.deeplinkPage,m=e.imageSelection,h=e.setAttrs,g=e.isInAMP,y=r.assetsHost,v=r.publishPath,b=r.name,_=r.description,w=r.pages;!(Object.keys(r||{}).length>0)||n||i||h({title:b,summary:_});var x="".concat(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return e.includes(".stg.")?"https://www.stg.nytimes.com":"https://www.nytimes.com"}(y)).concat(v).concat(f?"#page-".concat(f):""),k=w&&Number(w).toLocaleString(),O=a.default.createElement("a",{href:x,className:c.default.button.default},a.default.createElement("strong",null,"Read Document"),w&&(f?" Page ".concat(Number(f).toLocaleString()," of ").concat(k):" ".concat(k," page").concat(w>1?"s":""))),T=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"1",n=arguments.length>2?arguments[2]:void 0;t||(t="1");var i=e.fullImgUrl,o=e.assetsFolder,r=e.assetsHost,s=e.thumbnailWidth,l=void 0===s?850:s,c=e.thumbnailHeight,u=void 0===c?1100:c,d=i||"https://".concat(r,"/").concat(o).concat(t,"/output-").concat(t,".png"),p="Thumbnail of page ".concat(t);return n?a.default.createElement("amp-img",{src:d,width:l,height:u,layout:"responsive",alt:p}):a.default.createElement("img",{src:d,alt:p})}(r,m,g);return a.default.createElement(u.default,{className:(0,o.cx)(t,"margins-h"),displayStyle:p},p===d.COMPACT&&a.default.createElement(a.default.Fragment,null,a.default.createElement("a",{href:x},a.default.createElement(s.default,null,n)),O),p===d.SINGLE_PAGE&&a.default.createElement(a.default.Fragment,null,a.default.createElement("a",{className:"thumbnail-link",href:x},T),a.default.createElement("div",null,a.default.createElement("a",{href:x},a.default.createElement(s.default,null,n)),a.default.createElement(l.default,null,i),O)))};p.displayName="DocPromo",p.defaultProps={isInAMP:!1,className:void 0,title:void 0,summary:void 0,documentData:{},deeplinkPage:void 0,imageSelection:"1",displayStyle:d.COMPACT,setAttrs:function(){}};t.default=(0,r.default)(p)},HO7F:function(e,t,n){"use strict";var i,a=n("VkAN"),o=n.n(a),r=n("gcR/"),s=n.n(r),l=n("lSNA"),c=n.n(l),u=(n("q1tI"),n("eFc+")),d=n.n(u),p=n("AtQq");function f(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function m(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?f(Object(n),!0).forEach((function(t){c()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):f(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var h=function(e){var t,n=e.body,i=e.placement,a=e.componentTypemapExtension,o=e.blockClass,r=m(m({},p.a),a||{}),l=null==n||null===(t=n.content)||void 0===t?void 0:t.map((function(e,t){var n;if(null!=e&&null!==(n=e.__typename)&&void 0!==n&&n.includes("Header"))return null;var a=r[null==e?void 0:e.__typename];return a?s()(a,{className:o,data:e,placement:i,article:"CardDeckBlock"===(null==e?void 0:e.__typename)?{}:void 0},"".concat(null==e?void 0:e.__typename,"-").concat(t.toString())):null}));return null!=l?l:null};h.defaultProps={placement:void 0,componentTypemapExtension:{},blockClass:null},h.fragments={data:d()(i||(i=o()(["\n    fragment Capsule_data on Capsule {\n      body {\n        ...DocumentBlock_data\n      }\n    }\n    ","\n  "])),p.b)},t.a=h},HTGc:function(e,t,n){"use strict";var i=n("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.default=r;var a=i(n("q1tI")),o=i(n("JwCr"));function r(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;return a.default.createElement(o.default,{key:n},t)}r.displayName="boldFormatFromOak"},HTd6:function(e,t,n){"use strict";n.d(t,"b",(function(){return Z}));var i=n("VkAN"),a=n.n(i),o=n("lSNA"),r=n.n(o),s=n("gcR/"),l=n.n(s),c=n("QILm"),u=n.n(c),d=n("q1tI"),p=n.n(d),f=n("eFc+"),m=n.n(f),h=n("s5tu"),g=n("t0IW"),y=n("Jqp9"),v=n("wXC7"),b=n.n(v),_=Object(y.css)("white-space:pre-wrap;"),w=Object(y.css)("color:",b.a.color.blue20,";text-decoration:underline;&:hover{color:",b.a.color.blue30,";}&:visited{color:",b.a.color.blue20,";}"),x=Object(y.css)("font-style:italic;.bold{font-weight:",b.a.font.weight.bold,";font-style:italic;}"),k=Object(y.css)("font-weight:",b.a.font.weight.bold,";.italic{font-weight:",b.a.font.weight.bold,";font-style:italic;}"),O=Object(y.css)("float:left;width:auto;margin:23px 40px 20px 0;font-size:",b.a.font.size(66),";font-family:",b.a.font.magslab,",",b.a.font.magazineSansBase,";line-height:0.5;color:",b.a.color.black,";"),T=Object(y.css)("vertical-align:super;font-size:smaller;line-height:0;"),C=Object(y.css)("vertical-align:sub;font-size:smaller;line-height:0;"),E=function(e){var t=e.children,n=e.url,i=e.title,a=e.opts;if(Object(h.isInternalLink)(n)){n=Object(g.a)(n,{module:"inline"})}return a.blank?l()("a",{rel:"noopener noreferrer",target:"_blank",href:n,title:i,className:w},void 0,t):l()("a",{rel:"noopener noreferrer",href:n,title:i,className:w},void 0,t)};E.displayName="LinkFormat",E.defaultProps={title:void 0,opts:{}};var S=E,P=function(e){var t=e.children;return l()("strong",{className:k},void 0,t)};P.displayName="BoldFormat";var I=P,M=function(e){var t=e.children;return l()("em",{className:x},void 0,t)};M.displayName="ItalicFormat";var A=M,j=function(e){var t=e.children;return l()("span",{className:O},void 0,t)};j.displayName="DropcapFormat";var N=j,L=function(e){var t=e.children;return l()("sup",{className:T},void 0,t)};L.displayName="SuperscriptFormat";var D=L,R=function(e){var t=e.children;return l()("sub",{className:C},void 0,t)};R.displayName="SubscriptFormat";var B=R,z=function(e){var t=e.children;return l()("span",{className:_},void 0,t)};z.displayName="PreFormatted";var F,U,H=z,W=["__typename"];function q(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function V(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?q(Object(n),!0).forEach((function(t){r()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):q(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var G=/(\r|\n|\t|[\s]{2,})/g,Y={LinkFormat:S,BoldFormat:I,ItalicFormat:A,DropcapFormat:N,SuperscriptFormat:D,SubscriptFormat:B},X=function(e){var t=e.content,n=t.text,i=t.formats,a=t.__typename,o=e.opts;if("LineBreakInline"===a)return F||(F=l()("br",{}));var r=n.split(G).map((function(e){return G.test(e)?l()(H,{},e,e):e}));return(null==i?void 0:i.length)>0&&i.forEach((function(e){r=function(e,t){var n=e.__typename,i=u()(e,W);return Y[n]?p.a.createElement(Y[n],i,t):null}(V(V({},e),{},{opts:o}),r)})),r};X.fragments={content:m()(U||(U=a()(["\n    fragment TextInline_content on InlineUnion {\n      __typename\n      ... on LineBreakInline {\n        type\n      }\n      ... on TextInline {\n        text\n        formats {\n          __typename\n          ... on BoldFormat {\n            type\n          }\n          ... on ItalicFormat {\n            type\n          }\n          ... on LinkFormat {\n            url\n            title\n            uri\n          }\n        }\n      }\n    }\n  "])))};var Z=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return void 0===t.blank&&(t.blank=!0),e?e.map((function(e,n){return l()(X,{content:e,opts:t},n.toString())})):null};t.a=X},HU5K:function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));var i=n("QS0n");function a(){var e=Object(i.useParams)(),t=e.year,n=e.month,a=e.day;return!(t&&n&&a)}},HZTh:function(e,t,n){"use strict";var i=n("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=i(n("q1tI")),o=n("3sMT");t.default=function(){return a.default.createElement("svg",{width:"10",height:"11",viewBox:"0 0 10 11",fill:"none",xmlns:"http://www.w3.org/2000/svg"},a.default.createElement("path",{d:"M4.64645 5.26107C4.45118 5.45633 4.45118 5.77292 4.64645 5.96818C4.84171 6.16344 5.15829 6.16344 5.35355 5.96818L4.64645 5.26107ZM9.74264 1.37198C9.74264 1.09584 9.51878 0.871983 9.24264 0.871983L4.74264 0.871983C4.4665 0.871983 4.24264 1.09584 4.24264 1.37198C4.24264 1.64813 4.4665 1.87198 4.74264 1.87198L8.74264 1.87198L8.74264 5.87198C8.74264 6.14813 8.9665 6.37198 9.24264 6.37198C9.51878 6.37198 9.74264 6.14813 9.74264 5.87198L9.74264 1.37198ZM5.35355 5.96818L9.59619 1.72554L8.88909 1.01843L4.64645 5.26107L5.35355 5.96818Z",fill:o.color.content.quaternary}),a.default.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M3 2.62802H0.75C0.335787 2.62802 0 2.96381 0 3.37802V9.87802C0 10.2922 0.335786 10.628 0.75 10.628H7.25C7.66421 10.628 8 10.2922 8 9.87802V8.12802H7V9.62802H1V3.62802H3V2.62802Z",fill:o.color.content.quaternary}))}},HvIc:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;t.default=[{key:"Anonymous Sources",displayLabel:"Anonymous Sources",label:"Understanding The Times",title:"How we use anonymous sources",active:!0,body:"The Times uses anonymous sources for information that we think is newsworthy and credible and that we couldn’t report otherwise. At least one editor must know the source’s identity, and a high-ranking editor must approve the sourcing. <a href='https://www.nytimes.com/2018/06/14/reader-center/how-the-times-uses-anonymous-sources.html'>Read more.</a>"},{key:"Leaks",displayLabel:"Leaks",label:"Understanding The Times",title:"How we decide when to publish leaked news",active:!0,body:'Providing confidential information to the public without official authorization is something The Times weighs very seriously, balancing the potential news value against the potential costs. <a href="https://www.nytimes.com/2018/06/07/reader-center/how-the-times-decides-when-to-publish-leaked-news.html">Read more</a> about the legality and ethics of the practice.'}]},HvhO:function(e,t,n){"use strict";var i=n("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.mediaOrientationStyles=t.mediaFigureVerticalSizeStyles=t.mediaFigureSmallNoCreditStyles=t.mediaFigureSizeStyles=t.mediaElementClass=t.default=void 0;var a=n("Jqp9"),o=i(n("wXC7")),r=n("SbcB"),s=i(n("icfT")),l=i(n("6RhY")),c=(t.mediaElementClass=(0,a.css)("width:100%;vertical-align:top;"),t.mediaFigureSmallNoCreditStyles=function(e){return(0,a.css)("display:block;",s.default,"{margin-left:auto;margin-right:auto;}",l.default,"{margin-left:auto;margin-right:auto;margin-top:10px;",r.Credit,"{margin-left:-8px;}",e.theme.breakpointMap.small,"{",r.Credit,"{margin-left:5px;}}",e.theme.breakpointMap.mediumLarge,"{",r.Credit,"{margin-left:5px;}}",e.theme.breakpointMap.extraLarge,"{",r.Credit,"{margin-left:40px;}}}")},t.mediaFigureVerticalSizeStyles=(0,a.themeFn)("mediaSize",{small:(0,a.css)(s.default,"{max-width:240px;}"),medium:function(e){return(0,a.css)(e.theme.breakpointMap.small,"{width:",e.theme.isFullBleed?"100%":"420px",";}")},large:function(e){return(0,a.css)(e.theme.breakpointMap.small,"{width:",o.default.breakpoint.textBodyWidth,"px;}",e.theme.breakpointMap.extraLarge,"{width:",o.default.breakpoint.mediumMediaExtralarge,"px;}",l.default,"{",e.theme.breakpointMap.medium,"{margin-left:0;}}")}})),u=t.mediaFigureSizeStyles=(0,a.themeFn)("mediaSize",{small:function(e){return(0,a.css)("width:",o.default.breakpoint.mobileFullWidth,";display:flex;",e.theme.breakpointMap.small,"{max-width:",o.default.breakpoint.textBodyWidth,"px;margin-left:auto;margin-right:auto;}",e.theme.breakpointMap.mediumLarge,"{max-width:",o.default.breakpoint.textBodyWidthExtralarge,"px;width:100%;}",e.theme.breakpointMap.extraLarge,"{max-width:",o.default.breakpoint.textBodyWidthExtralarge,"px;}")},medium:function(e){return(0,a.css)("width:100%;max-width:",o.default.breakpoint.textBodyWidth,"px;",e.theme.breakpointMap.small,"{width:",o.default.breakpoint.mobileFullWidth,";}",e.theme.breakpointMap.medium,"{width:auto;max-width:",o.default.breakpoint.textBodyWidthExtralarge,"px;}")},large:function(e){return(0,a.css)("max-width:",o.default.breakpoint.mediaMaxWidth,"px;margin-left:auto;margin-right:auto;",e.theme.breakpointMap.small,"{width:auto;}",e.theme.breakpointMap.mediumLarge,"{width:945px;}",e.theme.breakpointMap.extraLarge,"{width:",o.default.breakpoint.mediaMaxWidth,"px;}")}}),d=(0,a.themeFn)("languageDirection",{rightToLeft:(0,a.css)("text-align:right;direction:rtl;unicode-bidi:isolate;")}),p=t.mediaOrientationStyles=(0,a.themeFn)("mediaOrientation",{vertical:c}),f=(0,a.styled)("figure",{target:"e1g7ppur0"})(u,";",p,";",d,";");t.default=f},Hy4T:function(e,t,n){"use strict";var i=this&&this.__createBinding||(Object.create?function(e,t,n,i){void 0===i&&(i=n);var a=Object.getOwnPropertyDescriptor(t,n);a&&!("get"in a?!t.__esModule:a.writable||a.configurable)||(a={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,i,a)}:function(e,t,n,i){void 0===i&&(i=n),e[i]=t[n]}),a=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&i(t,e,n);return a(t,e),t},r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t,n,i,a,o,r=e.unit,p=(0,s.useState)(!1),f=p[0],b=p[1],_=(0,s.useState)(!0),x=_[0],k=_[1],O=(0,m.useMessageSelection)({config:{name:"dock"}}),C=(0,h.useUserState)(),E=(0,c.useTracking)(),S=null===(t=r.content)||void 0===t?void 0:t.subscriptionURI,P="/"===(0,g.getPathName)()?"homepage":"article",I=function(e){var t;return{event:"moduleInteraction",eventData:{pagetype:P,trigger:"module",type:"click"},module:{name:"dock",context:"expanded",label:null===(t=null==O?void 0:O.response)||void 0===t?void 0:t.campaign(),element:{label:"".concat(e),name:y.Action.Subscribe,url:S}}}},M=function(e){E.trackEvent(I(e.target.textContent))};if(null==O?void 0:O.loading)return null;if(!f){var A=null===(i=null===(n=null==O?void 0:O.response)||void 0===n?void 0:n.userstate())||void 0===i?void 0:i.messageSelectionMessageCaps,j=null;if(A)if((B=A).forEach((function(e){var t,n;"dock"===(null==e?void 0:e.unit)&&(null==e?void 0:e.campaign)===(null===(t=null==O?void 0:O.response)||void 0===t?void 0:t.campaign())&&(null==e?void 0:e.audience)===(null===(n=null==O?void 0:O.response)||void 0===n?void 0:n.audience())&&(j=e)})),null!==j){var N=j,L=new Date(null==N?void 0:N.lastSeenOn).getTime(),D=(new Date).getTime(),R=Math.abs(Math.round(D-L)/6e4);k(!0),R>2880?(N.viewCount=1,N.lastSeenOn=(new Date).toISOString(),k(!1)):N.viewCount+=1,C.update({messageSelectionMessageCaps:B})}if(!j){var B=[];A&&(B=A),B.push({unit:"dock",campaign:null===(a=null==O?void 0:O.response)||void 0===a?void 0:a.campaign(),audience:null===(o=null==O?void 0:O.response)||void 0===o?void 0:o.audience(),lastSeenOn:(new Date).toISOString(),viewCount:1,dismissed:!1}),C.update({messageSelectionMessageCaps:B}),k(!1)}b(!0)}if(x)return s.default.createElement(u.default,{headingClassName:(0,l.cx)(d.dockHeaderHeadingClassName),testId:"onsite-messaging-unit-".concat(null===v.config||void 0===v.config?void 0:v.config.name),"data-campaign":null==r?void 0:r.campaign,"data-audience":null==r?void 0:r.audience,unit:r,contentID:"STANDCON_CONV_SALE_DOCK_ON_FOOD_ARTICLES_TEST_2311",dockID:"standard",header:s.default.createElement(w,null),card:s.default.createElement(T,{unit:r,onCtaClick:M}),onDockHeadingClick:function(){E.trackEvent(I("GET STARTED"))},headerCollapsedCTA:"GET STARTED",isDockDismissible:!1,isDockExpandable:!1,minimized:!0});return s.default.createElement(u.default,{headingClassName:(0,l.cx)(d.dockHeaderHeadingClassName),testId:"onsite-messaging-unit-".concat(null===v.config||void 0===v.config?void 0:v.config.name),"data-campaign":null==r?void 0:r.campaign,"data-audience":null==r?void 0:r.audience,unit:r,contentID:"STANDCON_CONV_SALE_DOCK_ON_FOOD_ARTICLES_TEST_2311",dockID:"expand",header:s.default.createElement(w,null),card:s.default.createElement(T,{unit:r,onCtaClick:M}),headerExpandedCTA:"COLLAPSE",headerCollapsedCTA:"EXPAND",isDockDismissible:!1,isDockExpandable:!0,minimized:!1,minimizedTrackingValue:"collapse"})};var s=o(n("q1tI")),l=n("Jqp9"),c=n("X6oL"),u=r(n("5UIh")),d=o(n("N2Xg")),p=n("YXtJ"),f=n("TFIS"),m=n("syiw"),h=n("HDG5"),g=n("FY2l"),y=n("djNW"),v=n("6gWn"),b=n("etPP"),_=r(n("XvvG"));function w(){return s.default.createElement("div",{className:(0,l.cx)(d.dockHeaderWrapper)},s.default.createElement("span",{className:(0,l.cx)(d.dockHeaderUrgencyMessage)},s.default.createElement(f.SaleUrgency,null),"."," "),"Save 50% on your first year of Cooking.")}function x(){return s.default.createElement("div",{className:(0,l.cx)(d.dockContentHed)},"Enjoy easy and delicious recipes ",s.default.createElement("br",null)," for the holidays and every day.")}function k(e){var t,n,i=e.unit;return s.default.createElement(_.default,{currentPriceClassname:d.dockContentPricing,oldPriceClassname:d.dockContentPricingBau,oldPrice:null===(t=i.content)||void 0===t?void 0:t.bauPrice,currentPrice:"".concat(null===(n=i.content)||void 0===n?void 0:n.salesPrice,"/month")})}function O(e){var t,n,i=e.unit,a=e.onClick;return s.default.createElement("div",{className:(0,l.cx)(d.dockContentCtaWrapper)},s.default.createElement(b.Button,{testId:"food-article-sales-dock-cta",component:"a",className:(0,l.cx)(d.dockContentCta),href:null===(t=i.content)||void 0===t?void 0:t.subscriptionURI,target:b.Target.Blank,onClick:a},"Learn more"),s.default.createElement("div",{className:(0,l.cx)(d.dockContentCtaDek)},"Billed ",null===(n=i.content)||void 0===n?void 0:n.frequency," for the first year"))}function T(e){var t=e.unit,n=e.onCtaClick;return s.default.createElement("div",{className:(0,l.cx)(d.dockContentWrapper)},s.default.createElement("div",{className:(0,l.cx)(d.dockContentContainer)},s.default.createElement(p.FoodArticleSalesDockLogo,null),s.default.createElement(x,null),s.default.createElement("div",null,s.default.createElement(k,{unit:t}),s.default.createElement(O,{unit:t,onClick:n}))))}},Hy5q:function(e,t,n){"use strict";var i=n("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=n("Jqp9"),o=n("3sMT"),r=i(n("WThh")),s=i(n("wXC7")),l=n("dp42"),c=n("yFJX"),u=n("6l8D"),d=(0,r.default)(["medium"]),p=function(e){return(0,a.css)("color:",o.color.content.secondary,";",d(e,{fontSize:[12,15],lineHeight:[17,19]}),";")},f=(0,a.themeFn)("treatment",{none:function(e){return(0,a.css)("color:",o.color.content.quaternary,";font-family:",s.default.font.serifBase,";",d(e,{fontSize:[14,15],lineHeight:[18,20]}),";")},magazine:function(e){return(0,a.css)("color:",o.color.content.secondary,";font-family:",s.default.font.magazineSansBase,";line-height:",s.default.font.size(18),";",d(e,{fontSize:[14,15]}),";")},sponsored:function(e){return(0,a.css)(p(e),";font-family:",s.default.font.sponsoredBase,";")},sponsoredSensitive:function(e){return(0,a.css)(p(e),";font-family:",s.default.font.sponsoredSensitive,";")},"t-magazine":function(e){return(0,a.css)("color:",o.color.content.secondary,";font-family:",s.default.font.tmagSansBase,";font-weight:",s.default.font.weight.book,";line-height:",s.default.font.size(18),";letter-spacing:0.02em;",d(e,{fontSize:[14,15]}),";")},liveSplitLayout:(0,a.css)("color:",o.color.content.quaternary,";font-family:",s.default.font.serifBase,";line-height:",s.default.font.size(18),";font-size:",s.default.font.size(14),";")}),m=(0,a.themeFn)("languageDirection",{rightToLeft:(0,a.css)("margin-left:7px;margin-right:0;")}),h=(0,a.styled)("span",{target:"e13ogyst0"})("margin-right:7px;",f,";",m,";strong{",c.boldClass,";}em{",l.italicClass,";}a{",u.linkClass,";}");t.default=h},"Hz/t":function(e,t,n){"use strict";var i=n("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.captionSpanClass=t.audioPlayButtonTriangleClass=t.audioPlayButtonTextClass=t.audioPlayButtonClass=t.audioPlayButtonCircleClass=t.audioPlayButtonAnchorClass=t.audioHeadingClass=t.audioFigureMediaClass=t.audioFigureClass=t.audioFigcaptionClass=t.audioCaptionSpanClass=t.audioAppPromoClass=void 0;var a=n("Jqp9"),o=n("3sMT"),r=i(n("wXC7")),s=r.default.font,l=r.default.breakpoint;t.audioFigureClass=(0,a.css)("border-bottom:1px solid ",o.color.stroke.quaternary,";border-top:1px solid ",o.color.stroke.quaternary,";width:calc(100% - 40px);max-width:",l.textBodyWidth,"px;margin:",r.default.breakpoint.mobileBlockMargins,";padding:1em 0;"),t.audioFigcaptionClass=(0,a.css)("font-family:",s.serifSmall,";font-size:0.875rem;line-height:1em;margin:0 auto;"),t.audioHeadingClass=(0,a.css)("font-family:",s.franklinBase,";color:",o.color.content.secondary,";font-size:",r.default.font.size(14),";font-weight:",r.default.font.weight.bold,";line-height:",r.default.font.size(18),";"),t.audioCaptionSpanClass=(0,a.css)("color:",o.color.content.quaternary,";font-family:",s.franklinBase,";font-size:",r.default.font.size(14),";font-weight:",r.default.font.weight.medium,";line-height:",r.default.font.size(18),";margin-top:0.125rem;"),t.audioFigureMediaClass=(0,a.css)("margin:0 0 16px 32px;float:right;height:75px;width:75px;"),t.audioPlayButtonClass=(0,a.css)("display:flex;justify-content:flex-start;align-items:center;padding-top:16px;"),t.audioPlayButtonAnchorClass=(0,a.css)("height:40px;-webkit-tap-highlight-color:transparent;"),t.audioPlayButtonTextClass=(0,a.css)("padding-left:8px;font-family:",s.franklinBase,";font-size:0.85em;letter-spacing:0.05em;color:",o.color.content.quaternary,";font-weight:300;"),t.captionSpanClass=(0,a.css)("font-family:",s.serifSmall,";font-size:0.85em;line-height:1.25em;color:",o.color.content.quaternary,";"),t.audioPlayButtonCircleClass=(0,a.css)(),t.audioPlayButtonTriangleClass=(0,a.css)(),t.audioAppPromoClass=(0,a.css)("margin-top:20px;")},HzU6:function(e,t,n){"use strict";var i=n("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.timeClass=t.progressBarClass=t.playContainerClass=t.playButtonClass=t.placeholderClass=t.learnLinkClass=t.iconTriangleClass=t.iconClass=t.controlsClass=t.containerClass=void 0;var a=n("Jqp9"),o=n("3sMT"),r=i(n("wXC7"));t.containerClass=(0,a.css)("display:flex;flex:48%;flex-direction:column;align-items:flex-start;"),t.controlsClass=(0,a.css)("color:",o.color.content.secondary,";display:flex;align-items:center;width:100%;"),t.playContainerClass=(0,a.css)("position:relative;"),t.playButtonClass=(0,a.css)("background:none;margin-right:10px;width:32px;height:32px;@media (hover:hover){&:hover{background-color:",o.color.background.tertiary,";border-radius:32px;}&:focus-visible{background-color:",o.color.background.tertiary,";border-radius:32px;}}"),t.progressBarClass=function(e){return(0,a.css)("&[type='range']{border-radius:","2px",";background:linear-gradient( to right,black ",e,"%,#b7b7b7 ",e,"% );-webkit-appearance:none;width:100%;height:","2px",";-webkit-tap-highlight-color:rgba(0,0,0,0);}&[type='range']::-moz-range-track{height:20px;}&[type='range']::-moz-range-thumb{-webkit-appearance:none;height:","7px",";width:","7px",";border-radius:","7px",";background-color:black;cursor:pointer;margin-top:16.5px;}&[type='range']::-ms-thumb{-webkit-appearance:none;height:","7px",";width:","7px",";border-radius:","7px",";background-color:black;cursor:pointer;margin-top:16.5px;}&[type='range']::-ms-track{width:100%;cursor:pointer;background:transparent;border-color:transparent;color:transparent;}&[type='range']::-webkit-slider-thumb{-webkit-appearance:none;height:","7px",";width:","7px",";border-radius:","7px",";background-color:black;cursor:pointer;margin-top:16.5px;}&[type='range']::-webkit-slider-runnable-track{width:100%;height:40px;cursor:pointer;border-radius:","2px",";}&[type='range']::-ms-track{height:40px;}&[type='range']::-moz-range-track{height:40px;}&[type='range']:focus-visible::-webkit-slider-thumb{background-color:blue;}&[type='range']:focus-visible::-ms-thumb{background-color:blue;}&[type='range']:focus-visible::-moz-range-thumb{background-color:blue;}")},t.iconClass=(0,a.css)("width:32px;height:32px;&:focus{border-radius:32px;}"),t.iconTriangleClass=(0,a.css)("fill:",o.color.content.primary,";"),t.timeClass=(0,a.css)("width:100%;display:flex;flex-wrap:nowrap;gap:10px;align-items:center;justify-content:space-between;font-family:",r.default.font.franklinBase,";font-size:",r.default.font.size(12),";font-weight:",r.default.font.weight.medium,";"),t.placeholderClass=(0,a.css)("font-weight:",r.default.font.weight.mediumBold,";"),t.learnLinkClass=(0,a.css)("margin-left:5px;font-weight:",r.default.font.weight.light,";text-decoration:underline;a{color:",o.color.content.secondary,";}&:hover{text-decoration:none;}")},"I/3k":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.posterFeedCardAssetFragment=t.default=void 0;var i=t.posterFeedCardAssetFragment='\nfragment posterFeedCardAssetFragment on CreativeWork {\n  ... on Image {\n    altText\n    credit\n    id\n    sourceId\n    uri\n    crops(\n      renditionNames: [\n        "verticalTwoByThree735"\n        "square640"\n        "threeByTwoMediumAt2X"\n      ]\n    ) {\n      name\n      renditions {\n        name\n        url\n        width\n        height\n      }\n    }\n  }\n}\n';t.default="\n".concat(i,"\n\nfragment onCardDeckPosterFeed on PosterFeed {\n  __typename\n  data\n  cards {\n    assets {\n      ...posterFeedCardAssetFragment\n    }\n    data\n    key\n    text {\n      key\n      content {\n        __typename\n        ... on LineBreakInline {\n          type\n        }\n        ... on TextInline {\n          text\n          formats {\n            __typename\n            ... on BoldFormat {\n              type\n            }\n            ... on ItalicFormat {\n              type\n            }\n            ... on LinkFormat {\n              title\n              uri\n              url\n            }\n          }\n        }\n      }\n    }\n  }\n}\n")},I0Yx:function(e,t,n){"use strict";var i=n("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=n("Jqp9"),o=i(n("wXC7")),r=n("3sMT"),s=(0,a.styled)("span",{target:"eatfx1z0"})("font-family:",o.default.font.franklinBase,";font-weight:",o.default.font.weight.medium,";letter-spacing:0.05em;font-size:13px;line-height:18px;",(function(e){return e&&"string"==typeof e.children&&"breaking"===e.children.toLowerCase()?"color: ".concat(r.color.signal.breaking):""}),";",(function(e){return e&&"string"==typeof e.children&&"developing"===e.children.toLowerCase()?"color: ".concat(r.color.signal.developing):""}),";",(function(e){return e&&"string"==typeof e.children&&"live"===e.children.toLowerCase()?"color: ".concat(r.color.signal.breaking):""}),";",o.default.breakpoint.medium,"{font-size:14px;line-height:20px;}");t.default=s},I4yQ:function(e,t,n){"use strict";var i=n("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=i(n("q1tI")),o=(i(n("17x9")),i(n("XSE6")));function r(e){return e.isInEditor?a.default.createElement("div",null,a.default.createElement("h1",{className:o.default}," Advertisement ")):null}r.disableHydration=!0,r.defaultProps={isInEditor:!1};t.default=r},I6KV:function(e,t,n){"use strict";var i=n("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"Attribution",{enumerable:!0,get:function(){return o.StyledAttribution}}),Object.defineProperty(t,"Quote",{enumerable:!0,get:function(){return o.StyledQuote}}),t.default=void 0;var a=i(n("q1tI")),o=(i(n("17x9")),n("JKTc")),r=function(e){var t=e.quote,n=e.attribution,i=e.className,r=e.children;return a.default.createElement("blockquote",{className:i},r||a.default.createElement(a.default.Fragment,null,a.default.createElement(o.StyledQuote,null,t),n.length?a.default.createElement(o.StyledAttribution,null,n):null))};r.displayName="Pullquote",r.defaultProps={attribution:"",className:void 0,children:null};t.default=r},I9y1:function(e,t,n){"use strict";t.a={small:"@media (min-width: 440px)",medium:"@media (min-width: 765px)",mediumLarge:"@media (min-width: 1020px)",padMediumLarge:"@media (min-width: 769px)",large:"@media (min-width: 1280px)",extraLarge:"@media (min-width: 2560px)"}},IBfC:function(e,t,n){"use strict";var i=n("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.propTypes=t.defaultProps=void 0;var a=i(n("17x9"));t.propTypes={opts:a.default.shape({}),content:a.default.shape({__typename:a.default.string,text:a.default.string,formats:a.default.arrayOf(a.default.shape())}),headline:a.default.shape({content:a.default.arrayOf(a.default.shape({__typename:a.default.string,text:a.default.string,formats:a.default.arrayOf(a.default.shape())}))}),label:a.default.shape({content:a.default.arrayOf(a.default.shape({__typename:a.default.string,text:a.default.string,formats:a.default.arrayOf(a.default.shape())}))}),summary:a.default.shape({content:a.default.arrayOf(a.default.shape({__typename:a.default.string,text:a.default.string,formats:a.default.arrayOf(a.default.shape())}))}),latestUpdate:a.default.shape({content:a.default.arrayOf(a.default.shape({__typename:a.default.string,text:a.default.string,formats:a.default.arrayOf(a.default.shape())})),label:a.default.string}),byline:a.default.shape({textAlign:a.default.string,hideHeadshots:a.default.bool,bylines:a.default.arrayOf(a.default.shape({creators:a.default.arrayOf(a.default.shape({displayName:a.default.string,bioUrl:a.default.string})),prefix:a.default.string}))}),media:a.default.node,timestampBlock:a.default.shape(),lastMajorModification:a.default.string,shareTools:a.default.node,translations:a.default.arrayOf(a.default.shape()),newsStatus:a.default.string,timesExclusive:a.default.node,sponsoredByAd:a.default.node,brandBar:a.default.node,associatedNewsletter:a.default.shape(),truncated:a.default.bool},t.defaultProps={headline:null,summary:null,latestUpdate:null,byline:null,media:null,timestampBlock:null,lastMajorModification:null,shareTools:null,label:null,translations:null,newsStatus:null,timesExclusive:null,sponsoredByAd:null,brandBar:null,associatedNewsletter:null}},IFOt:function(e,t,n){"use strict";var i=n("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=i(n("q1tI")),o=(i(n("17x9")),n("Jqp9")),r=i(n("oKgi")),s=i(n("139F")),l=n("abzs"),c=n("hMrr"),u=function(e){var t=e.media,n=e.scrollyIndex,i=t.map((function(e){if("photo"===e.imageType){var t=(0,l.getCrop)(e.crops,"MOBILE_MASTER")?(0,l.getCrop)(e.crops,"MOBILE_MASTER"):(0,l.getCrop)(e.crops,"MASTER");return{mobileUrl:t.renditions[0].url,text:e.caption.text,credit:e.credit,height:t.renditions[0].height,width:t.renditions[0].width,__typename:"Image"}}var n,i=e.renditions&&e.renditions.find((function(e){return"video_720p_mp4_mobile"===e.type}));return{mobileUrl:(n=i&&i.url?i:e.renditions&&e.renditions.find((function(e){return"video_480p_mp4"===e.type}))).url,text:e.headline.default,credit:e.summary,__typename:"Video",width:n.width,height:n.height}}));return a.default.createElement("div",{id:"".concat("scrolly-instance","-").concat(n),className:(0,o.cx)(c.ampContainerClass,"".concat("scrolly-container","-amp"))},i.map((function(e){return a.default.createElement("div",{className:c.ampContainerItemClass},a.default.createElement(r.default,{dangerouslySetInnerHTML:{__html:e.text},className:c.summaryClass}),"Image"===e.__typename&&a.default.createElement("amp-img",{src:e.mobileUrl,width:e.width,height:e.height,layout:"responsive"}),"Video"===e.__typename&&a.default.createElement("amp-video",{src:e.mobileUrl,width:e.width,height:e.height,layout:"responsive",autoplay:"",muted:"",loop:""}),a.default.createElement(s.default,{className:c.ampCreditClass},e.credit))})))};u.displayName="AmpScrolly",u.defaultProps={scrollyIndex:void 0};t.default=u},IHYJ:function(e,t,n){"use strict";n.d(t,"h",(function(){return s})),n.d(t,"e",(function(){return l})),n.d(t,"f",(function(){return c})),n.d(t,"d",(function(){return u})),n.d(t,"g",(function(){return d})),n.d(t,"c",(function(){return p})),n.d(t,"b",(function(){return f})),n.d(t,"a",(function(){return m}));var i=n("Jqp9"),a=n("3sMT"),o=n("wXC7"),r=n.n(o),s=Object(i.css)("top:0;position:sticky;background-color:",a.color.background.elevated,";z-index:902;",r.a.printHide,";"),l=Object(i.css)(s,";",r.a.breakpoint.mediumLarge,"{margin-top:3px;}"),c=Object(i.css)("&::after{content:'';position:absolute;top:0;left:0;height:100%;width:100%;z-index:-1;box-shadow:0 0 transparent,0 0 transparent,1px 3px 6px #00000026;opacity:0;transition:opacity 200ms ease-out;@media (prefers-color-scheme:dark){.NYTApp &{box-shadow:none;}}}"),u=Object(i.css)("border-bottom:1px solid transparent;&::after{opacity:1;}@media (prefers-color-scheme:dark){.NYTApp &{border-bottom:1px solid ",a.color.stroke.quaternary,";}}"),d=Object(i.css)("border-bottom:1px solid ",a.color.stroke.quaternary,";&::after{box-shadow:none;}"),p=Object(i.css)("position:relative;color:#08f;left:0;"),f=Object(i.css)("position:relative;color:#08f;left:-145px;"),m=Object(i.css)("display:block;width:calc(100% - 40px);max-width:600px;left:0;&:empty{display:none;}")},IHwD:function(e,t,n){"use strict";var i=this&&this.__makeTemplateObject||function(e,t){return Object.defineProperty?Object.defineProperty(e,"raw",{value:t}):e.raw=t,e};Object.defineProperty(t,"__esModule",{value:!0}),t.GMQ4HOLIDAYGIFTINGDOCKS2312Wirecutter=t.giftingButtonClass=t.wrapHeadline=t.logoClass=t.giftingDockShowMobile=t.giftingDockShowDesktop=t.subHeadlineGiftingBF=t.headlineGiftingBF=t.contentDockDesktop=t.wrapRedBoxClass=t.giftingDockButtonDesktop=t.logosDockDesktop=t.StyledMainContent=t.headerTextClass=void 0;var a=n("Jqp9"),o=n("lVLo");t.headerTextClass=(0,a.css)(r||(r=i(["\n  font-family: ",";\n  font-size: 15px;\n  font-weight: ",";\n  margin: auto 0 auto 20px;\n  white-space: pre-wrap;\n  color: ",";\n  .Wirecutter {\n    @media (max-width: ","px) {\n      font-size: 12.5px;\n    }\n  }\n  @media (min-width: ","px) {\n    white-space: unset;\n  }\n"],["\n  font-family: ",";\n  font-size: 15px;\n  font-weight: ",";\n  margin: auto 0 auto 20px;\n  white-space: pre-wrap;\n  color: ",";\n  .Wirecutter {\n    @media (max-width: ","px) {\n      font-size: 12.5px;\n    }\n  }\n  @media (min-width: ","px) {\n    white-space: unset;\n  }\n"])),o.fonts.franklin,o.fontWeights.normal,o.colors.black,o.widths.small,o.widths.small);var r,s,l,c,u,d,p,f,m,h,g,y,v,b;t.StyledMainContent=a.styled.div(s||(s=i(["\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  border-radius: 6px;\n  padding: 0 ","px;\n  height: 140px;\n  margin: 0 ","px ","px;\n  width: calc(100% - (","px + ","px));\n  flex-direction: row;\n  justify-content: space-evenly;\n  strong {\n    font-weight: "," !important;\n  }\n  @media (max-width: 768px) {\n    width: calc(100% - 40px);\n  }\n  .Wirecutter {\n    display: flex;\n    background-color: #56cb82;\n    flex-direction: row;\n    justify-content: space-evenly;\n    align-items: center;\n    height: 140px;\n    width: 100%;\n    @media (max-width: 480px) {\n      height: 146px;\n    }\n    .logoClass {\n      width: 276px;\n      content: ",";\n      @media (max-width: 768px) {\n        width: 218px;\n      }\n    }\n    .wrapRedBoxClass {\n      display: none;\n    }\n    .wrapRedBoxClassMobile {\n      display: none;\n    }\n    .headlineGiftingBFM {\n      display: none;\n    }\n    .subHeadlineGiftingBFGM {\n      display: none;\n    }\n    .giftingButtonClass {\n      display: flex;\n      align-items: baseline;\n      gap: 5px;\n      letter-spacing: -0.05px;\n      border-radius: 3px;\n      font-family: ",";\n      font-weight: ",";\n      font-size: 12px;\n      text-decoration: none;\n      background-color: ",";\n      color: ",";\n      padding: 10px 20px;\n      @media (max-width: 768px) {\n        margin-top: 10px;\n      }\n    }\n  }\n  .AllAccess {\n    display: flex;\n    background-color: #faecd5;\n    flex-direction: row;\n    justify-content: space-evenly;\n    align-items: center;\n    height: 140px;\n    width: 100%;\n    .giftingButtonClass {\n      display: flex;\n      align-items: baseline;\n      gap: 5px;\n      border-radius: 3px;\n      font-family: ",";\n      font-weight: ",";\n      font-size: 9.42px;\n      text-decoration: none;\n      background-color: ",";\n      color: ",";\n      padding: 10px 20px;\n      @media (max-width: 690px) {\n        display: inline-block;\n        width: 70%;\n        justify-content: left;\n      }\n      @media (max-width: 768px) {\n        margin-top: 10px;\n      }\n    }\n    .logoClass {\n      width: 128px;\n      content: ",";\n      @media (max-width: 1024px) {\n        width: 114px;\n      }\n    }\n    .imageClass {\n      content: ",";\n    }\n    .wrapRedBoxClass {\n      width: 137px;\n      img {\n        width: 100%;\n      }\n      @media (max-width: 690px) {\n        display: none;\n      }\n    }\n    .subHeadlineGiftingBF {\n      margin: 0;\n      font-size: 17px;\n      line-height: 19px;\n      color: #000000;\n      font-family: ",";\n      font-weight: ",";\n      padding-bottom: 9px;\n      @media (max-width: 768px) {\n        font-size: 15px;\n        line-height: 120%;\n      }\n    }\n    .headlineGiftingBF {\n      margin: 0 0 7.47px 0;\n      font-size: 20px;\n      line-height: 1.17em;\n      font-family: ",";\n      font-weight: ",";\n      color: #000000;\n      .subHeadlineGiftingBF {\n        font-size: 20px;\n        white-space: nowrap;\n        @media (max-width: 480px) {\n          padding-bottom: 4px;\n        }\n        @media (max-width: 768px) {\n          display: block;\n          font-size: 17px;\n        }\n      }\n      @media (max-width: 768px) {\n        margin-bottom: 0;\n        padding-bottom: 0px;\n        font-size: 17px;\n      }\n    }\n    .headlineGiftingBFM {\n      display: none;\n      @media (max-width: 690px) {\n        color: #000000;\n        display: inline;\n        margin: 0;\n        font-size: 17px;\n        line-height: 26px;\n        font-family: ",";\n        font-weight: ",";\n      }\n    }\n    .urgencyGiftingBFG {\n      display: inline;\n      @media (max-width: 768px) {\n        display: none;\n      }\n    }\n    .urgencyGiftingBFGM {\n      display: none;\n      @media (max-width: 768px) {\n        display: inline;\n      }\n    }\n    .subHeadlineGiftingBFGM {\n      display: none;\n      @media (max-width: 690px) {\n        display: inline;\n        margin: 0;\n        font-size: 14px;\n        line-height: 15px;\n        color: #f35850;\n        font-family: ",";\n      }\n    }\n    .subHeadlineGiftingBFG {\n      margin: 0;\n      font-size: 14px;\n      line-height: 15px;\n      color: #f35850;\n      font-family: ",";\n      font-weight: ",";\n      .subHeadlineGiftingBFG20off {\n        white-space: nowrap;\n      }\n      @media (max-width: 690px) {\n        display: none;\n      }\n    }\n    .wrapHeadline {\n      @media (max-width: 690px) {\n        background-image: ",";\n        width: 100%;\n        height: 108px;\n        background-repeat: no-repeat;\n        background-size: contain;\n        background-position-x: right;\n        background-position-y: 8px;\n      }\n      @media (max-width: 530px) {\n        background-size: 130px;\n        background-position-y: 24px;\n      }\n      @media (max-width: 480px) {\n        width: 100%;\n        background-position-x: right;\n        background-position-y: 0;\n        background-size: contain;\n      }\n      @media (max-width: 360px) {\n        background-position-y: 23px;\n        background-size: 50%;\n      }\n    }\n  }\n"],["\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  border-radius: 6px;\n  padding: 0 ","px;\n  height: 140px;\n  margin: 0 ","px ","px;\n  width: calc(100% - (","px + ","px));\n  flex-direction: row;\n  justify-content: space-evenly;\n  strong {\n    font-weight: "," !important;\n  }\n  @media (max-width: 768px) {\n    width: calc(100% - 40px);\n  }\n  .Wirecutter {\n    display: flex;\n    background-color: #56cb82;\n    flex-direction: row;\n    justify-content: space-evenly;\n    align-items: center;\n    height: 140px;\n    width: 100%;\n    @media (max-width: 480px) {\n      height: 146px;\n    }\n    .logoClass {\n      width: 276px;\n      content: ",";\n      @media (max-width: 768px) {\n        width: 218px;\n      }\n    }\n    .wrapRedBoxClass {\n      display: none;\n    }\n    .wrapRedBoxClassMobile {\n      display: none;\n    }\n    .headlineGiftingBFM {\n      display: none;\n    }\n    .subHeadlineGiftingBFGM {\n      display: none;\n    }\n    .giftingButtonClass {\n      display: flex;\n      align-items: baseline;\n      gap: 5px;\n      letter-spacing: -0.05px;\n      border-radius: 3px;\n      font-family: ",";\n      font-weight: ",";\n      font-size: 12px;\n      text-decoration: none;\n      background-color: ",";\n      color: ",";\n      padding: 10px 20px;\n      @media (max-width: 768px) {\n        margin-top: 10px;\n      }\n    }\n  }\n  .AllAccess {\n    display: flex;\n    background-color: #faecd5;\n    flex-direction: row;\n    justify-content: space-evenly;\n    align-items: center;\n    height: 140px;\n    width: 100%;\n    .giftingButtonClass {\n      display: flex;\n      align-items: baseline;\n      gap: 5px;\n      border-radius: 3px;\n      font-family: ",";\n      font-weight: ",";\n      font-size: 9.42px;\n      text-decoration: none;\n      background-color: ",";\n      color: ",";\n      padding: 10px 20px;\n      @media (max-width: 690px) {\n        display: inline-block;\n        width: 70%;\n        justify-content: left;\n      }\n      @media (max-width: 768px) {\n        margin-top: 10px;\n      }\n    }\n    .logoClass {\n      width: 128px;\n      content: ",";\n      @media (max-width: 1024px) {\n        width: 114px;\n      }\n    }\n    .imageClass {\n      content: ",";\n    }\n    .wrapRedBoxClass {\n      width: 137px;\n      img {\n        width: 100%;\n      }\n      @media (max-width: 690px) {\n        display: none;\n      }\n    }\n    .subHeadlineGiftingBF {\n      margin: 0;\n      font-size: 17px;\n      line-height: 19px;\n      color: #000000;\n      font-family: ",";\n      font-weight: ",";\n      padding-bottom: 9px;\n      @media (max-width: 768px) {\n        font-size: 15px;\n        line-height: 120%;\n      }\n    }\n    .headlineGiftingBF {\n      margin: 0 0 7.47px 0;\n      font-size: 20px;\n      line-height: 1.17em;\n      font-family: ",";\n      font-weight: ",";\n      color: #000000;\n      .subHeadlineGiftingBF {\n        font-size: 20px;\n        white-space: nowrap;\n        @media (max-width: 480px) {\n          padding-bottom: 4px;\n        }\n        @media (max-width: 768px) {\n          display: block;\n          font-size: 17px;\n        }\n      }\n      @media (max-width: 768px) {\n        margin-bottom: 0;\n        padding-bottom: 0px;\n        font-size: 17px;\n      }\n    }\n    .headlineGiftingBFM {\n      display: none;\n      @media (max-width: 690px) {\n        color: #000000;\n        display: inline;\n        margin: 0;\n        font-size: 17px;\n        line-height: 26px;\n        font-family: ",";\n        font-weight: ",";\n      }\n    }\n    .urgencyGiftingBFG {\n      display: inline;\n      @media (max-width: 768px) {\n        display: none;\n      }\n    }\n    .urgencyGiftingBFGM {\n      display: none;\n      @media (max-width: 768px) {\n        display: inline;\n      }\n    }\n    .subHeadlineGiftingBFGM {\n      display: none;\n      @media (max-width: 690px) {\n        display: inline;\n        margin: 0;\n        font-size: 14px;\n        line-height: 15px;\n        color: #f35850;\n        font-family: ",";\n      }\n    }\n    .subHeadlineGiftingBFG {\n      margin: 0;\n      font-size: 14px;\n      line-height: 15px;\n      color: #f35850;\n      font-family: ",";\n      font-weight: ",";\n      .subHeadlineGiftingBFG20off {\n        white-space: nowrap;\n      }\n      @media (max-width: 690px) {\n        display: none;\n      }\n    }\n    .wrapHeadline {\n      @media (max-width: 690px) {\n        background-image: ",";\n        width: 100%;\n        height: 108px;\n        background-repeat: no-repeat;\n        background-size: contain;\n        background-position-x: right;\n        background-position-y: 8px;\n      }\n      @media (max-width: 530px) {\n        background-size: 130px;\n        background-position-y: 24px;\n      }\n      @media (max-width: 480px) {\n        width: 100%;\n        background-position-x: right;\n        background-position-y: 0;\n        background-size: contain;\n      }\n      @media (max-width: 360px) {\n        background-position-y: 23px;\n        background-size: 50%;\n      }\n    }\n  }\n"])),26,20,20,52,40,o.fontWeights.bold,(function(e){return"url(".concat(e.theme.assetUrl,"/GH_WirecutterLogo.svg)")}),o.fonts.franklin,o.fontWeights.extraBold,o.colors.black,o.colors.white,o.fonts.franklin,o.fontWeights.semiBold,o.colors.black,o.colors.white,(function(e){return"url(".concat(e.theme.assetUrl,"/GH_AALogo.svg)")}),(function(e){return"url(".concat(e.theme.assetUrl,"/GH_AAGiftDock.gif)")}),o.fonts.cheltenham,o.fontWeights.normal,o.fonts.cheltenham,o.fontWeights.normal,o.fonts.cheltenham,o.fontWeights.normal,o.fonts.franklin,o.fonts.franklin,o.fontWeights.normal,(function(e){return"url(".concat(e.theme.assetUrl,"/GH_AAGiftDock.gif)")})),t.logosDockDesktop=(0,a.css)(l||(l=i(["\n  margin: 0 10px;\n  @media (max-width: 480px) {\n    display: none;\n  }\n"],["\n  margin: 0 10px;\n  @media (max-width: 480px) {\n    display: none;\n  }\n"]))),t.giftingDockButtonDesktop=(0,a.css)(c||(c=i(["\n  display: inline-block;\n  @media (max-width: 690px) {\n    display: none;\n  }\n"],["\n  display: inline-block;\n  @media (max-width: 690px) {\n    display: none;\n  }\n"]))),t.wrapRedBoxClass=(0,a.css)(u||(u=i(["\n  width: 150px;\n  @media (max-width: 1024px) {\n    width: 90px;\n  }\n  @media (max-width: 768px) {\n    width: 80px;\n  }\n  @media (max-width: 690px) {\n    display: none;\n  }\n"],["\n  width: 150px;\n  @media (max-width: 1024px) {\n    width: 90px;\n  }\n  @media (max-width: 768px) {\n    width: 80px;\n  }\n  @media (max-width: 690px) {\n    display: none;\n  }\n"]))),t.contentDockDesktop=(0,a.css)(d||(d=i(["\n  display: flex;\n  flex-direction: row;\n  width: 58%;\n  justify-content: space-around;\n  align-items: stretch;\n  align-items: center;\n  justify-content: center;\n  @media (max-width: 480px) {\n    display: inline;\n    width: 85%;\n  }\n"],["\n  display: flex;\n  flex-direction: row;\n  width: 58%;\n  justify-content: space-around;\n  align-items: stretch;\n  align-items: center;\n  justify-content: center;\n  @media (max-width: 480px) {\n    display: inline;\n    width: 85%;\n  }\n"]))),t.headlineGiftingBF=(0,a.css)(p||(p=i(["\n  margin: 0;\n  font-size: 20px;\n  font-family: ",";\n  font-weight: ",";\n  padding-bottom: 9px;\n  color: #000000;\n  @media (max-width: 768px) {\n    padding-bottom: 6px;\n    font-size: 17px;\n  }\n"],["\n  margin: 0;\n  font-size: 20px;\n  font-family: ",";\n  font-weight: ",";\n  padding-bottom: 9px;\n  color: #000000;\n  @media (max-width: 768px) {\n    padding-bottom: 6px;\n    font-size: 17px;\n  }\n"])),o.fonts.cheltenham,o.fontWeights.normal),t.subHeadlineGiftingBF=(0,a.css)(f||(f=i(["\n  margin: 0;\n  font-size: 14px;\n  color: #f35850;\n  font-family: ",";\n  font-weight: ",";\n  color: #000000;\n  @media (max-width: 768px) {\n    font-size: 13.5px;\n    line-height: 120%;\n  }\n"],["\n  margin: 0;\n  font-size: 14px;\n  color: #f35850;\n  font-family: ",";\n  font-weight: ",";\n  color: #000000;\n  @media (max-width: 768px) {\n    font-size: 13.5px;\n    line-height: 120%;\n  }\n"])),o.fonts.franklin,o.fontWeights.normal),t.giftingDockShowDesktop=(0,a.css)(m||(m=i(["\n  display: inline;\n  @media (max-width: 690px) {\n    display: none !important;\n  }\n"],["\n  display: inline;\n  @media (max-width: 690px) {\n    display: none !important;\n  }\n"]))),t.giftingDockShowMobile=(0,a.css)(h||(h=i(["\n  display: none !important;\n  @media (max-width: 690px) {\n    display: inline-block !important;\n  }\n"],["\n  display: none !important;\n  @media (max-width: 690px) {\n    display: inline-block !important;\n  }\n"]))),t.logoClass=(0,a.css)(g||(g=i(["\n  margin-top: 12px;\n  width: 142px;\n  svg {\n    height: 100%;\n    max-width: 100%;\n  }\n  @media (max-width: 768px) {\n    width: 120px;\n  }\n"],["\n  margin-top: 12px;\n  width: 142px;\n  svg {\n    height: 100%;\n    max-width: 100%;\n  }\n  @media (max-width: 768px) {\n    width: 120px;\n  }\n"]))),t.wrapHeadline=(0,a.css)(y||(y=i(["\n  strong {\n    font-weight: "," !important;\n  }\n"],["\n  strong {\n    font-weight: "," !important;\n  }\n"])),o.fontWeights.bold),t.giftingButtonClass=(0,a.css)(v||(v=i(["\n  display: initial;\n  align-items: baseline;\n  gap: 5px;\n  border-radius: 3px;\n  font-family: ",";\n  font-weight: ",";\n  font-size: 12px;\n  text-decoration: none;\n  background-color: ",";\n  color: ",";\n  padding: 10px 20px;\n  @media (max-width: 768px) {\n    display: flex;\n    margin-top: 10px;\n  }\n"],["\n  display: initial;\n  align-items: baseline;\n  gap: 5px;\n  border-radius: 3px;\n  font-family: ",";\n  font-weight: ",";\n  font-size: 12px;\n  text-decoration: none;\n  background-color: ",";\n  color: ",";\n  padding: 10px 20px;\n  @media (max-width: 768px) {\n    display: flex;\n    margin-top: 10px;\n  }\n"])),o.fonts.franklin,o.fontWeights.semiBold,o.colors.black,o.colors.white),t.GMQ4HOLIDAYGIFTINGDOCKS2312Wirecutter=(0,a.css)(b||(b=i(["\n  background-color: #edeae8;\n"],["\n  background-color: #edeae8;\n"])))},IINN:function(e,t,n){"use strict";n.d(t,"a",(function(){return s})),n.d(t,"b",(function(){return l}));var i=n("gcR/"),a=n.n(i),o=n("q1tI"),r=Object(o.createContext)(void 0);function s(e){var t=e.timesTags,n=e.children;return a()(r.Provider,{value:t},void 0,n)}s.displayName="TimesTagsProvider";var l=function(){return Object(o.useContext)(r)}},IUIp:function(e,t,n){"use strict";var i=n("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=i(n("q1tI")),o=n("HzU6"),r=function(e){var t=e.width,n=void 0===t?"55":t,i=e.height,r=void 0===i?"55":i,s=e.strokeColor,l=void 0===s?"#DFDFDF":s;return a.default.createElement("svg",{"aria-hidden":"true",className:o.iconClass,id:"playIcon",width:n,height:r,viewBox:"0 0 ".concat(n," ").concat(r),fill:"none",xmlns:"http://www.w3.org/2000/svg"},a.default.createElement("path",{className:o.iconTriangleClass,fillRule:"evenodd",clipRule:"evenodd",d:"M22 38L37 28L22 18V38Z"}),a.default.createElement("path",{d:"M54.25 27.5C54.25 42.2736 42.2736 54.25 27.5 54.25C12.7264 54.25 0.75 42.2736 0.75 27.5C0.75 12.7264 12.7264 0.75 27.5 0.75C42.2736 0.75 54.25 12.7264 54.25 27.5Z",stroke:l,strokeWidth:"1.5"}))};r.displayName="PlayIcon";t.default=r},IVQz:function(e,t,n){"use strict";t.a="/vi-assets/static-assets/icon-the-morning_144x144-b12a6923b6ad9102b766352261b1a847.webp"},IX5K:function(e,t,n){"use strict";var i,a=n("VkAN"),o=n.n(a),r=n("gcR/"),s=n.n(r),l=(n("q1tI"),n("eFc+")),c=n.n(l),u=n("AfrD"),d=n.n(u),p=n("Pmun"),f=n.n(p),m=n("rNEd"),h=function(e){var t=e.data,n=e.className;return s()(f.a,{className:n},void 0,t.content.map((function(e,t){return s()(m.a,{data:e},t.toString())})))};h.displayName="ListItemBlock",h.defaultProps={className:void 0},h.fragments={data:c()(i||(i=o()(["\n    fragment ListItemBlock_data on ListItemBlock {\n      content {\n        __typename\n        ...ParagraphBlock_data\n      }\n    }\n    ","\n  "])),m.a.fragments.data)};var g,y=h,v=function(e){var t=e.data,n=e.className;return s()(d.a,{className:n},void 0,t.content.map((function(e,t){return s()(y,{data:e},t.toString())})))};v.displayName="ListBlock",v.defaultProps={className:void 0},v.fragments={data:c()(g||(g=o()(["\n    fragment ListBlock_data on ListBlock {\n      style\n      content {\n        __typename\n        ...ListItemBlock_data\n      }\n    }\n    ","\n  "])),y.fragments.data)};t.a=v},IiD6:function(e,t,n){"use strict";var i=n("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){var e=(0,o.useState)({}),t=(0,a.default)(e,2),n=t[0],i=t[1];(0,o.useEffect)((function(){var e=(0,r.default)(),t=!1;(0,s.handleAdBlockerDetected)((function(){t=!0})),i({adBlocker:t,adTargeting:e})}),[]);var l=n.adBlocker,c=n.adTargeting;return{adBlocker:l,adTargeting:c}};var a=i(n("J4zp")),o=n("q1tI"),r=i(n("XiaQ")),s=n("U6jc")},IkF8:function(e,t,n){"use strict";var i=n("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=n("Jqp9"),o=n("3sMT"),r=i(n("WThh")),s=i(n("wXC7")),l=n("6l8D"),c=i(n("qp0C")),u=(0,r.default)(["medium"]),d=(0,a.css)("color:",o.color.content.secondary,";font-weight:",s.default.font.weight.mediumBold,";font-size:",s.default.font.size(13.5),";line-height:",s.default.font.size(23),";letter-spacing:0.05em;"),p=(0,a.themeFn)("treatment",{none:function(e){return(0,a.css)("color:",o.color.content.secondary,";font-family:",s.default.font.franklinBase,";font-weight:",s.default.font.weight.medium,";letter-spacing:0.05em;",u(e,{fontSize:[13,14],lineHeight:[18,20]}),";")},magazine:function(e){return(0,a.css)("color:",o.color.content.primary,";font-family:",s.default.font.magazineSansBase,";font-weight:",s.default.font.weight.bold,";letter-spacing:0.05em;",u(e,{fontSize:[12,14],lineHeight:[20,20]}),";")},sponsored:(0,a.css)(d,";font-family:",s.default.font.sponsoredBase,";"),sponsoredSensitive:(0,a.css)(d,";font-family:",s.default.font.sponsoredSensitive,";"),"t-magazine":(0,a.css)("color:",o.color.content.secondary,";font-family:",s.default.font.tmagSansBase,";font-weight:",s.default.font.weight.book,";font-size:",s.default.font.size(14),";line-height:",s.default.font.size(20),";letter-spacing:0.02em;"),atHome:(0,a.css)("font-style:normal;font-weight:bold;font-size:21px;line-height:34px;font-family:",c.default.franklin,";")}),f=(0,a.themeFn)("languageDirection",{rightToLeft:(0,a.css)("text-align:right;direction:rtl;unicode-bidi:isolate;")}),m=(0,a.styled)("p",{target:"e6idgb70"})("text-transform:uppercase;",p,";.",l.linkClass,"{color:",o.color.content.primary,";border-bottom:2px solid ",o.color.stroke.quaternary,";text-decoration:none;&:hover,&:focus{color:",o.color.content.primary,";border-bottom:2px solid ",o.color.stroke.primary,";}&:visited{color:",o.color.content.primary,";}}",f,";");t.default=m},IkM5:function(e){e.exports=JSON.parse('{"generic":{"title":"To our readers:","body":"Stories like this are possible because of our deep commitment to original reporting, produced by a global staff of over 1,700 journalists who have all dedicated themselves to helping you understand the world. That work is only possible because of the support of our subscribers.","cta":"We hope you’ll consider becoming one today.","signer":""},"specific":{"title":"To our readers:","body":"Stories like this are possible because of our deep commitment to original reporting, produced by a global staff of over 1,700 journalists who have all dedicated themselves to helping you understand the world. That work is only possible because of the support of our subscribers.","cta":"I hope you’ll consider becoming one today.","signer":"Marc Lacey, Managing Editor"},"specific-international":{"title":"To our readers:","body":"This story and others like it in our International report are underpinned by a vast network of support invisible to most readers but possible only because they share our commitment to bearing witness and holding the powerful to account. The New York Times has correspondents and editors scattered across the globe, as well as photographers, interpreters, local guides and security consultants. All of them know that we will spend what it takes to get the story, and to keep them safe. The financial burden is big — sometimes extraordinary. And so I cannot tell you how grateful we are that so many of our readers have shown time and again that they want to do their part. Each day, more people are becoming subscribers to The Times. If you are not one of them,","cta":"I hope you will consider changing that right now.","signer":"Michael Slackman, Assistant Managing Editor, International"},"specific-well":{"title":"To our readers:","body":"Was this article of service to you? The journalists on the Well desk of The Times hope so. They are devoted to providing trusted guidance to help people live better, more considered lives. They use their expertise to cut through noise and misinformation to deliver journalism designed to improve your physical and mental health, parenting, nutrition and relationships. That work is only possible because of the support of our subscribers.","cta":"I hope you’ll consider becoming one today.","signer":"Sam Sifton, Assistant Managing Editor, Culture and Lifestyle"}}')},Ikdi:function(e,t,n){"use strict";t.a="/vi-assets/static-assets/icon-the-upshot_144x144-0b1553ff703bbd07ac8fe73e6d215888.webp"},IuhB:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n("iolA");t.default=(0,i.withErrorBoundary)((function(){return null}))},IvQ5:function(e,t,n){"use strict";t.a="/vi-assets/static-assets/icon-athletic-scoop-city_144x144-131bb9a92c77857aa6cac44772a74a77.webp"},Ivf9:function(e,t,n){"use strict";var i=n("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=i(n("q1tI")),o=(n("17x9"),function(e){var t=e.item,n=t.content,i=t.contentLink,o=e.boldLocation;return a.default.createElement("li",{style:{fontWeight:o[i]?"700":"400"}},a.default.createElement("a",{href:"#".concat(i)},n[0]))});o.displayName="GuideNavItem";t.default=o},J2sf:function(e,t,n){"use strict";n.d(t,"j",(function(){return l})),n.d(t,"k",(function(){return c})),n.d(t,"l",(function(){return u})),n.d(t,"m",(function(){return d})),n.d(t,"n",(function(){return p})),n.d(t,"f",(function(){return f})),n.d(t,"g",(function(){return m})),n.d(t,"i",(function(){return h})),n.d(t,"c",(function(){return g})),n.d(t,"b",(function(){return y})),n.d(t,"a",(function(){return v})),n.d(t,"e",(function(){return b})),n.d(t,"p",(function(){return _})),n.d(t,"q",(function(){return w})),n.d(t,"o",(function(){return x})),n.d(t,"d",(function(){return k})),n.d(t,"h",(function(){return O}));var i=n("Jqp9"),a=n("wXC7"),o=n.n(a),r=n("WPRB"),s="@media (max-width: ".concat(o.a.breakpoint.maxMobileContentWidth,"px)"),l=Object(i.css)("&",r.f,",&",r.d,"{font-family:",o.a.font.franklinBase,";font-style:normal;font-weight:",o.a.font.weight.medium,";font-size:",o.a.font.size(16),";line-height:",o.a.font.size(16),";color:",o.a.color.black,";padding:21px 20px 15px 22px;text-align:left;",o.a.breakpoint.large,"{position:static;top:auto;left:auto;overflow-y:hidden;font-size:",o.a.font.size(14),";line-height:",o.a.font.size(14),";padding:14px;}}"),c=Object(i.css)("&",r.f,"{padding:21px 20px 0 22px;",o.a.breakpoint.large,"{padding:14px 14px 0 14px;}}"),u=Object(i.css)(r.f," &{font-size:",o.a.font.size(12),";margin-bottom:4px;}"),d=Object(i.css)(r.f," &{font-weight:",o.a.font.weight.bold,";font-size:",o.a.font.size(18),";margin-bottom:13px;",o.a.breakpoint.large,"{font-size:",o.a.font.size(14),";line-height:",o.a.font.size(16),";margin-bottom:8px;}}"),p=Object(i.css)(r.f," &{direction:ltr;display:block;width:100%;}"),f=Object(i.css)(r.f," &{padding:11px 0;border-bottom:1px ",o.a.color.gray60," solid;text-align:left;a,button{display:flex;align-items:center;text-decoration:none;}&:last-of-type{border:none;}",o.a.breakpoint.large,"{padding:6px 0;}}"),m=Object(i.css)(r.f," &{",o.a.breakpoint.large,"{padding:12px 0;}}"),h=Object(i.css)(r.f," &{max-width:calc(100% - 48px);background:transparent;display:flex;white-space:nowrap;font-family:",o.a.font.franklinBase,";color:",o.a.color.black,";",o.a.breakpoint.large,"{display:flex;align-items:center;justify-content:flex-start;}}"),g=Object(i.css)(r.f," &{color:#417d40;font-weight:bold;max-width:100%;&::after{content:' ';width:15px;height:14px;margin-left:0.2rem;display:inline-block;background-image:url(","/vi-assets/static-assets/icon-round-check-3956dbc1462b6016408ccc84ed47834f.svg",");background-repeat:no-repeat;position:relative;top:-2px;}}"),y=Object(i.css)(r.f," &{background-color:",o.a.color.white,";border:1px ",o.a.color.gray55," solid;border-radius:100%;padding:4px;margin-right:16px;}"),v=Object(i.styled)("i",{target:"e18rsdfd0"})(y,";width:25px;height:25px;box-sizing:border-box;display:inline-block;vertical-align:middle;background-position:center;background-repeat:no-repeat;background-size:15px;padding:0;",(function(e){return e.linkedin&&"background-image: url(".concat("/vi-assets/static-assets/icon-share-linkedin-circle-715d54e585670aa92bdf4f9cf80391c1.svg",");\n      background-size: 13px;")}),";",(function(e){return e.whatsapp&&"background-image: url(".concat("/vi-assets/static-assets/icon-whatsapp-17x17-000-eb3ac0d36c11bd5a497046cb82515de2.svg",")")}),";",(function(e){return e.reddit&&"background-image: url(".concat("/vi-assets/static-assets/icon-share-reddit-6c91e2e5d338258b7625396240941c86.svg",");\n     background-size: 19px;")}),";",(function(e){return e.telegram&&"background-image: url(".concat("/vi-assets/static-assets/icon-share-telegram-17x17-000-9afdb6f69206e132723eda5087310d35.svg",");\n       background-size: 19px;")}),";",(function(e){return e.xTwitter&&"background-image: url(".concat("/vi-assets/static-assets/icon-share-x-a72248fae71ca758cc2b335915271894.svg","); background-size: 12px;")}),";"),b=Object(i.css)(r.f," &{display:inline-block;height:15px;vertical-align:middle;width:15px;}"),_=Object(i.css)(r.f," &{max-width:calc(100% - 48px);background:transparent;display:inline;color:",o.a.color.white,";margin-top:5px;a{color:",o.a.color.white,";}p{font-family:",o.a.font.franklinBase,";font-size:",o.a.font.size(11),";line-height:",o.a.font.size(14),";&:first-of-type{font-size:",o.a.font.size(14),";line-height:",o.a.font.size(16),";font-weight:",o.a.font.weight.bold,";margin-bottom:4px;}strong{font-weight:",o.a.font.weight.bold,";}}@media (min-width:",o.a.breakpoint.maxMobileContentWidth,"px) and (max-width:",o.a.breakpoint.width.mediumLarge-1,"px){p{margin-bottom:1rem;}}}"),w=Object(i.css)(r.f," &{background-color:",o.a.color.white,";border:1px ",o.a.color.white," solid;margin-right:16px;border-radius:100%;width:23px;height:23px;display:flex;align-items:center;justify-content:center;svg{path{fill:",o.a.color.gray10,";}}}"),x=Object(i.css)(r.f," &{color:",o.a.color.white,";background:",o.a.color.gray10,";margin:0 -14px;padding:10px 15px;border-radius:0 0 4px 4px;",s,"{margin:0 -22px;border-radius:0;}button{align-items:flex-start;display:flex;background:transparent;text-align:left;width:100%;",o.a.breakpoint.large,"{padding:0 16px;}",s,"{padding:0 7px;}}}"),k=Object(i.css)(r.f," &{p{&:first-of-type{font-weight:",o.a.font.weight.medium,";font-size:",o.a.font.size(16),";",o.a.breakpoint.large,"{font-size:",o.a.font.size(14),";margin-bottom:6px;}}}}"),O=Object(i.css)(r.f," &{background:transparent;width:100%;}")},J3mF:function(e,t,n){"use strict";var i=this&&this.__makeTemplateObject||function(e,t){return Object.defineProperty?Object.defineProperty(e,"raw",{value:t}):e.raw=t,e};Object.defineProperty(t,"__esModule",{value:!0}),t.ctaActionTextClass=t.ctaContainer=t.ctaIconWrapper=t.headingMessageClass=t.headingInfoContainer=t.headingClass=t.textFadingInClass=t.textFadingOutClass=t.boldText=t.mainText=t.headerContainer=void 0;var a,o,r,s,l,c,u,d,p,f,m,h=n("Jqp9"),g=n("lVLo"),y=n("b2Qg");t.headerContainer=(0,h.css)(a||(a=i(["\n  cursor: pointer;\n"],["\n  cursor: pointer;\n"]))),t.mainText=(0,h.css)(o||(o=i(["\n  font-family: ",";\n  font-size: 15px;\n  font-weight: ",";\n  line-height: 17px;\n  padding-left: 20px;\n\n  @media (min-width: ","px) {\n    padding-left: unset;\n  }\n"],["\n  font-family: ",";\n  font-size: 15px;\n  font-weight: ",";\n  line-height: 17px;\n  padding-left: 20px;\n\n  @media (min-width: ","px) {\n    padding-left: unset;\n  }\n"])),g.fonts.franklin,g.fontWeights.medium,g.widths.mediumLarge),t.boldText=(0,h.css)(r||(r=i(["\n  font-family: ",";\n  font-size: 15px;\n  font-weight: ",";\n  line-height: 17px;\n"],["\n  font-family: ",";\n  font-size: 15px;\n  font-weight: ",";\n  line-height: 17px;\n"])),g.fonts.franklin,g.fontWeights.bold),t.textFadingOutClass=(0,h.css)(s||(s=i(["\n  animation: "," 400ms;\n"],["\n  animation: "," 400ms;\n"])),(0,y.fadeTextOut)()),t.textFadingInClass=(0,h.css)(l||(l=i(["\n  animation: "," 400ms;\n"],["\n  animation: "," 400ms;\n"])),(0,y.fadeTextIn)()),t.headingClass=(0,h.css)(c||(c=i(["\n  display: flex;\n  align-items: center;\n  justify-content: space-between;\n  height: 100%;\n  margin: auto;\n  /* stylelint-disable-next-line declaration-no-important */\n  -webkit-font-smoothing: antialiased !important;\n  outline: ",";\n\n  strong {\n    font-weight: ",";\n  }\n\n  @media (min-width: ","px) {\n    display: flex;\n    align-items: center;\n    text-align: center;\n    justify-content: space-between;\n  }\n"],["\n  display: flex;\n  align-items: center;\n  justify-content: space-between;\n  height: 100%;\n  margin: auto;\n  /* stylelint-disable-next-line declaration-no-important */\n  -webkit-font-smoothing: antialiased !important;\n  outline: ",";\n\n  strong {\n    font-weight: ",";\n  }\n\n  @media (min-width: ","px) {\n    display: flex;\n    align-items: center;\n    text-align: center;\n    justify-content: space-between;\n  }\n"])),g.colors.blue,g.fontWeights.bold,g.widths.mediumLarge),t.headingInfoContainer=(0,h.css)(u||(u=i(["\n  width: 100%;\n  font-family: ",";\n  text-align: left;\n\n  span {\n    display: inline;\n  }\n\n  @media (min-width: ","px) {\n    padding-left: unset;\n  }\n"],["\n  width: 100%;\n  font-family: ",";\n  text-align: left;\n\n  span {\n    display: inline;\n  }\n\n  @media (min-width: ","px) {\n    padding-left: unset;\n  }\n"])),g.fonts.franklin,g.widths.mediumLarge),t.headingMessageClass=(0,h.css)(d||(d=i(["\n  font-size: 15px;\n  line-height: 17px;\n  opacity: 1;\n\n  span {\n    white-space: nowrap;\n\n    &::after {\n      content: '  ';\n      white-space: pre-line;\n    }\n  }\n\n  @media (min-width: ","px) {\n    height: 55px;\n    display: flex;\n    align-items: center;\n    justify-content: center;\n    margin-left: 3.3vw;\n  }\n"],["\n  font-size: 15px;\n  line-height: 17px;\n  opacity: 1;\n\n  span {\n    white-space: nowrap;\n\n    &::after {\n      content: '  ';\n      white-space: pre-line;\n    }\n  }\n\n  @media (min-width: ","px) {\n    height: 55px;\n    display: flex;\n    align-items: center;\n    justify-content: center;\n    margin-left: 3.3vw;\n  }\n"])),g.widths.mediumLarge),t.ctaIconWrapper=(0,h.css)(p||(p=i(["\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  background-color: transparent;\n  outline: ",";\n  width: ",";\n  height: ",";\n  z-index: 1;\n  border-width: 0px;\n\n  svg {\n    height: 15px;\n    margin: auto;\n    width: 15px;\n  }\n\n  @media (min-width: ","px) {\n    display: flex;\n    align-items: center;\n  }\n"],["\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  background-color: transparent;\n  outline: ",";\n  width: ",";\n  height: ",";\n  z-index: 1;\n  border-width: 0px;\n\n  svg {\n    height: 15px;\n    margin: auto;\n    width: 15px;\n  }\n\n  @media (min-width: ","px) {\n    display: flex;\n    align-items: center;\n  }\n"])),g.colors.blue,"55px","55px",g.widths.mediumLarge),t.ctaContainer=(0,h.css)(f||(f=i(["\n  @media (max-width: 1023px) {\n    display: flex;\n    justify-content: flex-end;\n    flex-direction: row;\n\n    @media (min-width: ","px) {\n      min-width: 110px;\n    }\n  }\n"],["\n  @media (max-width: 1023px) {\n    display: flex;\n    justify-content: flex-end;\n    flex-direction: row;\n\n    @media (min-width: ","px) {\n      min-width: 110px;\n    }\n  }\n"])),g.widths.medium),t.ctaActionTextClass=(0,h.css)(m||(m=i(["\n  cursor: pointer;\n  font-size: 12px;\n  text-transform: uppercase;\n  font-weight: ",";\n  font-family: ",";\n  letter-spacing: 0.24px;\n  height: ",";\n  line-height: calc("," + 3px);\n  white-space: nowrap;\n  margin: 0;\n  padding: 0;\n  display: none;\n  color: ",";\n\n  &."," {\n    animation: "," 400ms;\n  }\n\n  &."," {\n    animation: "," 400ms;\n  }\n\n  @media (min-width: ","px) {\n    height: unset;\n  }\n"],["\n  cursor: pointer;\n  font-size: 12px;\n  text-transform: uppercase;\n  font-weight: ",";\n  font-family: ",";\n  letter-spacing: 0.24px;\n  height: ",";\n  line-height: calc("," + 3px);\n  white-space: nowrap;\n  margin: 0;\n  padding: 0;\n  display: none;\n  color: ",";\n\n  &."," {\n    animation: "," 400ms;\n  }\n\n  &."," {\n    animation: "," 400ms;\n  }\n\n  @media (min-width: ","px) {\n    height: unset;\n  }\n"])),g.fontWeights.bold,g.fonts.franklin,"55px","55px",g.colors.veryDarkGrey,t.textFadingOutClass,(0,y.fadeTextOut)(),t.textFadingInClass,(0,y.fadeTextIn)(),g.widths.medium)},J6ba:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;t.default='\nfragment onCardDeckCardStory on CardStory {\n  __typename\n  data\n  cards {\n    key\n    data\n    text {\n      key\n      content {\n        __typename\n        ... on LineBreakInline {\n          type\n        }\n        ... on TextInline {\n          text\n          formats {\n            __typename\n            ... on BoldFormat {\n              type\n            }\n            ... on ItalicFormat {\n              type\n            }\n            ... on LinkFormat {\n              url\n              title\n              uri\n            }\n          }\n        }\n      }\n    }\n    assets {\n      ... on CreativeWork {\n        ... on Published {\n          uri\n          url\n          sourceId\n          __typename\n        }\n        ... on Image {\n          id\n          uri\n          credit\n          sourceId\n          altText\n          crops(\n            renditionNames: [\n              "videoSixteenByNine1050"\n              "videoSixteenByNine600"\n              "threeByTwoMediumAt2X"\n              "verticalTwoByThree735"\n              "square640"\n              "threeByTwoMediumAt2X"\n            ]\n          ) {\n            name\n            renditions {\n              name\n              url\n              width\n              height\n            }\n          }\n        }\n        ... on Video {\n          id\n          uri\n          advertisingProperties {\n            sensitivity\n          }\n          bylines {\n            renderedRepresentation\n          }\n          transcript\n          duration\n          renditions {\n            aspectRatio\n            type\n            url\n            width\n            height\n          }\n          isCinemagraph\n          promotionalMedia {\n            ... on Image {\n              id\n              credit\n              crops(\n                renditionNames: [\n                  "videoSixteenByNine1050"\n                  "videoSixteenByNine600"\n                  "threeByTwoMediumAt2X"\n                  "verticalTwoByThree735"\n                  "square640"\n                  "threeByTwoMediumAt2X"\n                ]\n              ) {\n                name\n                renditions {\n                  name\n                  url\n                  width\n                  height\n                }\n              }\n            }\n          }\n          summary\n        }\n      }\n    }\n    bylines {\n      key\n      byline {\n        renderedRepresentation\n      }\n    }\n  }\n}\n'},JJ2H:function(e,t,n){"use strict";n.d(t,"b",(function(){return R})),n.d(t,"a",(function(){return P}));var i,a=n("VkAN"),o=n.n(a),r=n("gcR/"),s=n.n(r),l=n("lSNA"),c=n.n(l),u=n("J4zp"),d=n.n(u),p=n("q1tI"),f=n.n(p),m=n("Vg22"),h=n("eFc+"),g=n.n(h),y=n("QS0n"),v=n("X6oL"),b=n("rWB7"),_=n("5dFD"),w=n("boCj"),x=n("ygvk"),k=n("zS3r"),O=n("kV2j"),T=n("e0Jg"),C=n("TVGw");function E(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function S(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?E(Object(n),!0).forEach((function(t){c()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):E(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var P={HEADER:"header",FOOTER:"footer",INSTORYMASTHEAD:"inStoryMasthead",C_COLUMN:"ccol",BIGBOTTOM:"bigBottom"};function I(e){var t,n,i=e.commentCount,a=e.article,o=e.error,r=e.position,l=e.viewCommentsInNewWindow,u=e.buttonClass,h=e.reporterReplyRenderSignal,g=Object(m.useDispatch)(),O=Object(p.useState)(!1),E=d()(O,2),I=E[0],M=E[1],A=Object(p.useState)(!1),j=d()(A,2),N=j[0],L=j[1];r===P.HEADER?n=T.a.HEADER:r===P.INSTORYMASTHEAD?n=T.a.INSTORYMASTHEAD:r===P.FOOTER&&(n=T.a.FOOTER);var D=null==a?void 0:a.sourceId,R=((null==a?void 0:a.curatedAssetComments)||{}).reporterReplies,B=Object(p.useState)((function(){if("undefined"!=typeof window){var e=localStorage.getItem("reporterReplySignalData");return e?JSON.parse(e):{pageSeenAndTimestamp:{}}}return{pageSeenAndTimestamp:{}}})),z=d()(B,2),F=z[0],U=z[1];Object(p.useEffect)((function(){if(I||F.pageSeenAndTimestamp[D]||g({type:x.a.UNREAD_COMMENTS}),I&&!F.pageSeenAndTimestamp[D]){var e=R?R[R.length-1]:null,t=e?e.createdAt:null,n=S(S({},F),{},{pageSeenAndTimestamp:S(S({},F.pageSeenAndTimestamp),{},c()({},D,t))});localStorage.setItem("reporterReplySignalData",JSON.stringify(n)),U(n)}if(F.pageSeenAndTimestamp[D]){var i=R?R[R.length-1]:null,a=i?i.createdAt:null;if(a!==F.pageSeenAndTimestamp[D]){var o=S(S({},F),{},{pageSeenAndTimestamp:S(S({},F.pageSeenAndTimestamp),{},c()({},D,a))});localStorage.setItem("reporterReplySignalData",JSON.stringify(o)),U(o),L(!0)}}I&&M(!1)}),[I,D,R,F,g]);var H,W=Object(v.useTracking)(T.l).trackEvent,q=Object(y.useLocation)(),V=Object(y.useHistory)(),G=Object(b.b)(),Y=Object(w.useInView)({onChange:function(e){e&&W({event:"impression",module:{name:"reporter-reply-signal",region:{trackingRegion:n}}})},triggerOnce:!0}),X=d()(Y,1)[0];if(!i&&Number.isInteger(null==a||null===(t=a.commentProperties)||void 0===t?void 0:t.approvedCommentsCount)&&(H=a.commentProperties.approvedCommentsCount),i&&Number.isInteger(i)&&(H=i),o)return null;var Z=H>0?H.toString():"+",J=a.__typename,K=a.id,$=a.url,Q=a.targetUrl,ee=a.curatedAssetComments;return l?s()(k.a,{viewCommentsInNewWindow:l,commentCount:H,url:$,position:r,buttonClass:u,renderSignal:h},void 0,Z):G?f.a.createElement(k.a,{commentCount:H,onClick:function(){Object(C.e)({history:V,location:q}),requestAnimationFrame((function(){setTimeout((function(){var e;r===P.HEADER?e=T.a.HEADER:r===P.INSTORYMASTHEAD?e=T.a.INSTORYMASTHEAD:r===P.FOOTER?e=T.a.FOOTER:r===P.BIGBOTTOM?e=T.a.FOOTER_BOTTOM_BAR:r===P.C_COLUMN&&(e=T.a.C_COLUMN),W(Object(T.i)(e,"open")),G&&(window.NYT_SPEECHBUBBLE="comments-speech-bubble-".concat(r)),M(!0),g({type:x.a.READ_COMMENTS})}),0)}))},position:r,buttonClass:u,curatedAssetComments:ee,reporterReplies:R,renderSignal:h,newTimestamp:N,ref:X},Z):s()(k.a,{position:r,buttonClass:u},void 0,s()(_.a,{link:{__typename:J,id:K,targetUrl:Q,url:$}},void 0,Z))}I.displayName="CommentCount",I.fragments={article:g()(i||(i=o()(["\n    fragment CommentCount_article on CreativeWork {\n      ... on Published {\n        sourceId\n        url\n      }\n    }\n  "])))},I.defaultProps={commentCount:null,error:!1,viewCommentsInNewWindow:!1,buttonClass:void 0,curatedAssetComments:null,reporterReplyRenderSignal:!1};var M,A=Object(m.connect)((function(e){var t;return e.article.error?{error:!0}:{commentCount:Object(O.b)(e)||(null===(t=e.article)||void 0===t?void 0:t.approvedCount),reporterReplyRenderSignal:e.reporterSignal.renderSignal}}))(I),j=n("pVnL"),N=n.n(j),L=n("8iTF"),D=function(e){var t=e.article.commentProperties,n=e.viewCommentsInNewWindow,i=e.buttonClass,a=e.position;return Object(L.g)(null==t?void 0:t.status)?f.a.createElement(A,N()({viewCommentsInNewWindow:n,buttonClass:i,position:a},e)):null};D.defaultProps={viewCommentsInNewWindow:!1,buttonClass:void 0},D.fragments={article:g()(M||(M=o()(["\n    fragment CommentCountContainer_article on Article {\n      id\n      commentProperties {\n        status\n      }\n      curatedAssetComments {\n        uri\n        id\n        reporterReplies {\n          commentId\n          threadId\n          author {\n            commenterId\n            displayName\n            displayLocation\n            avatarUrl\n            isStaffCommenter\n            isAssetAuthor\n            person {\n              displayName\n              id\n            }\n            title\n          }\n          createdAt\n          acceptedAt\n          parent {\n            commentId\n            threadId\n            author {\n              commenterId\n              displayName\n              displayLocation\n              avatarUrl\n              isStaffCommenter\n              isAssetAuthor\n              person {\n                displayName\n                id\n              }\n              title\n            }\n          }\n        }\n      }\n      ...CommentCount_article\n    }\n    ","\n  "])),A.fragments.article)};var R=D},JKTc:function(e,t,n){"use strict";var i=n("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.StyledQuote=t.StyledAttribution=void 0;var a=n("3sMT"),o=n("Jqp9"),r=i(n("wXC7")),s=(0,o.themeFn)("treatment",{none:(0,o.css)("color:",a.color.content.primary,";font-family:",r.default.font.serifMedium,";font-weight:",r.default.font.weight.bold,";font-style:italic;font-size:30px;line-height:35px;"),feature:(0,o.css)("color:",a.color.content.primary,";font-family:",r.default.font.serifMedium,";font-weight:",r.default.font.weight.extraLight,";font-style:normal;font-size:30px;line-height:35px;"),magazine:(0,o.css)("color:",a.color.content.primary,";font-family:",r.default.font.magslab,";font-weight:",r.default.font.weight.bold,";font-style:normal;letter-spacing:0.015em;font-size:35px;line-height:40px;text-align:center;padding:20px 10px;border-top:1px solid currentColor;border-bottom:1px solid currentColor;"),"t-magazine":(0,o.css)("color:",a.color.content.primary,";font-family:",r.default.font.tmagSerifDisplayBase,";font-weight:",r.default.font.weight.bold,";font-style:normal;letter-spacing:0.015em;font-size:25px;line-height:30px;")}),l=(t.StyledQuote=(0,o.styled)("h2",{target:"e38szfw0"})(s,";"),(0,o.themeFn)("treatment",{none:(0,o.css)("color:",a.color.content.primary,";font-family:",r.default.font.franklinBase,";margin-top:15px;font-size:15px;line-height:20px;"),feature:(0,o.css)("color:",a.color.content.primary,";font-family:",r.default.font.franklinBase,";margin-top:15px;font-size:15px;line-height:20px;"),magazine:(0,o.css)("color:",a.color.content.primary,";font-family:",r.default.font.magazineSansBase,";margin-top:10px;font-size:15px;line-height:20px;"),"t-magazine":(0,o.css)("color:",a.color.content.primary,";font-family:",r.default.font.tmagSansBase,";margin-top:10px;font-size:15px;line-height:20px;")}));t.StyledAttribution=(0,o.styled)("p",{target:"e38szfw1"})(l,";")},JM9o:function(e,t,n){"use strict";var i=this&&this.__createBinding||(Object.create?function(e,t,n,i){void 0===i&&(i=n);var a=Object.getOwnPropertyDescriptor(t,n);a&&!("get"in a?!t.__esModule:a.writable||a.configurable)||(a={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,i,a)}:function(e,t,n,i){void 0===i&&(i=n),e[i]=t[n]}),a=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&i(t,e,n);return a(t,e),t},r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var s=o(n("q1tI")),l=n("Jqp9"),c=r(n("GXCH")),u=o(n("h6Ch")),d=n("wKlc");t.default=function(e){var t,n,i,a,o,r=e.unit,p=e.children,f=e.clientProps,m=f.fullWidth,h=void 0===m||m,g=f.fullHeight,y=void 0!==g&&g,v=f.midHeight,b=void 0===v?null===(i=null==r?void 0:r.content)||void 0===i?void 0:i.midHeight:v,_=f.midHeightSale,w=void 0===_?null===(a=null==r?void 0:r.content)||void 0===a?void 0:a.midHeightSale:_,x=f.isStatic,k=void 0===x?null===(o=null==r?void 0:r.content)||void 0===o?void 0:o.static:x,O=f.isEmbedded,T=void 0!==O&&O,C=f.className,E=(0,s.useState)(k),S=E[0],P=E[1],I=(0,s.useState)(!1),M=I[0],A=I[1];return(0,s.useEffect)((function(){k||(setTimeout((function(){return P(!0)}),1),setTimeout((function(){return A(!0)}),800))}),[null==r?void 0:r.content,k]),(null==r?void 0:r.canShow)?s.default.createElement("div",{"data-testid":"onsite-messaging-unit-".concat(null===d.config||void 0===d.config?void 0:d.config.name),"data-campaign":null==r?void 0:r.campaign,"data-audience":null==r?void 0:r.audience},s.default.createElement("div",{id:"gateway-content","aria-hidden":"true",className:(0,l.cx)(u.gatewayClass,(t={},t[u.showClass]=S,t[u.animationComplete]=M,t[u.fullWidthClass]=h,t[u.fullHeightClass]=y,t[u.midHeightClass]=b&&S,t[u.midHeightSaleClass]=w&&S,t[u.embeddedGatewayClass]=T,t),C)},s.default.createElement("div",{className:(0,l.cx)(u.gatewayContainerClass,(n={},n[u.fullWidthClass]=h,n[u.fullHeightClass]=y,n[u.embeddedGatewayContainerClass]=T,n))},s.default.createElement(c.default,null),p))):null}},JYb8:function(e,t,n){"use strict";var i=n("gcR/"),a=n.n(i),o=n("q1tI"),r=n("cr+I"),s=n.n(r),l=n("InUh"),c=n.n(l),u=n("rWB7"),d=n("p1Tn"),p=n("MLAy"),f=n("J4zp"),m=n.n(f),h=n("SYzA"),g=n("pjM+"),y=n("uCIn");var v=n("fZdH"),b=n("PgO9"),_=n("GCcl"),w=n("YWyE"),x=n("k1X0");var k=n("HUmG"),O=n("NW2b");var T=c()((function(){return n.e(197).then(n.bind(null,"yDXq"))}),{loadableGenerated:{webpack:function(){return["yDXq"]},modules:["shared/WelcomeBanner/WelcomeBannerSubs"]}}),C=c()((function(){return n.e(196).then(n.bind(null,"Xb6+"))}),{loadableGenerated:{webpack:function(){return["Xb6+"]},modules:["shared/WelcomeBanner/WelcomeBannerRegis"]}}),E=c()((function(){return n.e(195).then(n.bind(null,"rGWf"))}),{loadableGenerated:{webpack:function(){return["rGWf"]},modules:["shared/WelcomeBanner/WelcomeBannerGames"]}});t.a=function(e){var t=Object(u.b)(),n=Object(p.e)({scope:d.e,limit:d.c,frequency:p.b}),i=Object(p.e)({scope:d.d,limit:d.b,frequency:p.a}),r=function(e){var t=Object(o.useState)(null),n=m()(t,2),i=n[0],a=n[1],r=Object(b.a)().user,s=Object(v.a)(),l=e.canShow(),c=Object(h.a)(),u=(null==s?void 0:s[d.i])||{},p=u.allocated,f=void 0!==p&&p,g=u.variant,y=void 0===g?null:g;return Object(o.useEffect)((function(){e&&!e.loading()&&e.canShow()&&!c&&null!==r&&Object(k.e)(r)&&s&&f&&y&&(Object(O.e)(d.i),y!==d.j&&y!==d.k||a(!0))}),[e,l,c,r,s,f,y]),{showWelcomeBannerRegi:i}}(i).showWelcomeBannerRegi,l=function(e){var t=Object(g.a)(),n=Object(o.useRef)(!1),i=Object(o.useState)(null),a=m()(i,2),r=a[0],s=a[1],l=e.canShow(),c=t.data(),u=Object(h.a)(),d=Object(y.a)(30),p=!(null!=c&&c.subscriberOnboarding)||void 0===(null==c?void 0:c.subscriberOnboarding);return Object(o.useEffect)((function(){!c||!e||e.loading()||u||d.loading||(l&&!n.current&&(n.current=!0),s(d.value&&n.current&&p))}),[e,t,l,c,p,u,d.loading,d.value]),{showWelcomeBannerSubs:r}}(n).showWelcomeBannerSubs,c=function(e){var t=Object(v.a)(),n=Object(g.a)(),i=Object(b.a)().user,a=Object(o.useState)(null),r=m()(a,2),s=r[0],l=r[1],c=Object(h.a)(),u=Object(_.a)(t);return Object(o.useEffect)((function(){if(Object(w.a)(i)&&u&&!n.loading()&&!n.error()&&!c&&"liveblog"!==e){var t=n.data(),a=Object(x.d)(t);Object(x.c)(a)&&l(!0)}}),[e,n,c,u,i]),{showWelcomeBannerGames:s}}(e).showWelcomeBannerGames,f=function(e){if(e){var t=s.a.parse(window.location.search);if(t["test-welcome-banner"])return t["test-welcome-banner"]}return!1}(t);return r||"WelcomeBannerRegi"===f?a()(C,{messageCap:i,pageType:e,showWelcomeBannerRegi:!0}):c||"WelcomeBannerGames"===f?a()(E,{pageType:e,showWelcomeBannerSubs:!0}):l||"WelcomeBannerSubs"===f?a()(T,{messageCap:n,pageType:e,showWelcomeBannerSubs:!0}):null}},JYoY:function(e,t,n){"use strict";t.a={COMMENT_NOTIFY:"comment_notify",CSRF_TOKEN:"csrf_token",DISPLAY_NAME:"displayname",LOCATION:"location",AVATAR_URL:"picURL"}},JZVe:function(e,t,n){"use strict";var i=n("TqRt"),a=n("cDf5");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=i(n("RIqP")),r=i(n("J4zp")),s=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=a(e)&&"function"!=typeof e)return{default:e};var n=g(t);if(n&&n.has(e))return n.get(e);var i={__proto__:null},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var r in e)if("default"!==r&&{}.hasOwnProperty.call(e,r)){var s=o?Object.getOwnPropertyDescriptor(e,r):null;s&&(s.get||s.set)?Object.defineProperty(i,r,s):i[r]=e[r]}return i.default=e,n&&n.set(e,i),i}(n("q1tI")),l=i(n("hKI/")),c=(i(n("17x9")),n("Jqp9")),u=n("boCj"),d=i(n("wXC7")),p=i(n("PY+t")),f=n("HzU6"),m=i(n("IUIp")),h=i(n("lvXV"));function g(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(g=function(e){return e?n:t})(e)}var y=function(e,t){var n=function(e){return String(e).padStart(2,"0")},i=Math.floor(e/60),a=Math.floor(e%60);if(i>=60){var o=Math.floor(i/60),r=i-60*o;return"display"===t?"".concat(o," hr ").concat(r):"aria"===t?"".concat(o," hour ").concat(r," minutes"):"".concat(o,":").concat(n(r),":").concat(n(a))}return"aria"===t?"".concat(i," ").concat(1===i?"minute":"minutes"," ").concat(a," ").concat(1===a?"second":"seconds"):"".concat(i,":").concat(n(a))},v=function(e){var t=e.articleData,n=e.audioAsset,i=e.isHybrid,a=e.granted,g=e.messageCap,v=e.useOverlayContext,b=n.uri,_=n.fileUrl,w=n.sourceId,x=n.headline,k=n.length,O=(0,s.useState)(!1),T=(0,r.default)(O,2),C=T[0],E=T[1],S=(0,s.useState)(!1),P=(0,r.default)(S,2),I=P[0],M=P[1],A=function(e){var t=(0,s.useRef)(null),n=(0,s.useState)(0),i=(0,r.default)(n,2),a=i[0],o=i[1],c=(0,s.useState)(0),u=(0,r.default)(c,2),d=u[0],p=u[1],f=(0,s.useState)(!1),m=(0,r.default)(f,2),h=m[0],g=m[1];return(0,s.useEffect)((function(){var n=t.current,i=function(){p(n.duration)},a=function(){o(n.currentTime)},r=function(t){console.log("synthetic audio error",t),g(!0),e("media-error")};return n.readyState>=1?i():n.addEventListener("loadedmetadata",i),n.addEventListener("error",(function(e){return r(e)})),n.addEventListener("timeupdate",(0,l.default)(a,500)),function(){n.removeEventListener("error",r),n.removeEventListener("loadedmetadata",i),n.removeEventListener("timeupdate",(0,l.default)(a,500))}}),[e,o]),{audioRef:t,duration:d,currentTime:a,setCurrentTime:o,hasError:h}}(),j=A.audioRef,N=A.duration,L=A.currentTime,D=A.setCurrentTime,R=A.hasError,B=function(e,t,n,i){var a=(0,s.useState)([]),l=(0,r.default)(a,2),c=l[0],u=l[1];return(0,s.useCallback)((function(a){var r=window.UnifiedTracking.sendAnalytic,s={media:{module:"audio-player",version:"synthetic_player",contentId:n,eventName:a,eventTimestamp:Date.now(),mData:{videoType:"audio",playerType:"synthetic_player",duration:i,assetUri:t,videoUri:e}}};c.includes(a)&&"resume"!==a||(u([].concat((0,o.default)(c),[a])),r("mediaEvent",s))}),[i,e,t,n,c])}(b,null==t?void 0:t.uri,w,N),z=function(e,t,n){var i,a,o=[25,50,75,90,95],r=[2,3,4,5],s=Math.ceil(t/e*100);return s&&(!function(i){o.includes(i)?n("percent-".concat(i,"-consumed")):t===e&&n("media-complete")}(s),i=Math.floor(t/60),3===(a=Math.floor(t%60))||30===a?n("".concat(a,"-seconds-consumed")):1===i?n("1-minute-consumed"):r.includes(i)&&n("".concat(i,"-minutes-consumed"))),s}(N,L,B),F=function(e,t,n,i,a){var o=function(t){var n,i,a;return null==e||null===(n=e.promotionalImage)||void 0===n||null===(i=n.image)||void 0===i||null===(a=i.crops)||void 0===a?void 0:a.map((function(e){var n;return e.name===t&&(null==e||null===(n=e.renditions[0])||void 0===n?void 0:n.url)}))},r=o("MEDIUM_SQUARE"),s=o("THREE_BY_TWO");return{articleURL:null==e?void 0:e.url,articleURI:null==e?void 0:e.uri,showOrPublisherImageURL:"https://static01.nyt.com/images/2024/02/15/podcasts/audio-synth-artwork/audio-synth-artwork-square640.jpg",promotionalImageURL:r&&r[0],widePromotionalImageURL:s&&s[1],articleHeadline:null==e?void 0:e.headline,showOrPublisherName:"The New York Times",audioAssetURI:t,audioFileURL:n,audioSourceID:i,audioHeadline:null==a?void 0:a.default,publishDate:null==e?void 0:e.firstPublished}}(t,b,_,w,x),U=v()||{},H=U.overlays,W=U.setVisibility,q=U.registerOverlay,V=function(e,t,n,i){var a=(0,s.useState)(!1),o=(0,r.default)(a,2),l=o[0],c=o[1],u=(0,s.useState)(!1),d=(0,r.default)(u,2),p=d[0],f=d[1];return(0,s.useEffect)((function(){var a,o;null!=t&&null!==(a=t.tooltip)&&void 0!==a&&a.exists||i&&i("tooltip"),null==e||!e.canShow()||!1!==p||null!=t&&null!==(o=t.tooltip)&&void 0!==o&&o.visible||(f(!0),c(!0),n&&n("tooltip",!0),null==e||e.increment())}),[e,t,n,i,p]),(0,s.useEffect)((function(){window.location.hash.includes("showAudioTip")&&c(!0)}),[]),(0,s.useMemo)((function(){return{showTooltip:l,setShowTooltip:c}}),[l])}(g,H,W,q),G=V.showTooltip,Y=V.setShowTooltip;100===z&&L===N&&(E(!1),D(0));return R?null:s.default.createElement(u.InView,{onChange:function(e){"undefined"!=typeof window&&window.UnifiedTracking&&e&&window.UnifiedTracking.sendAnalytic("impression",{module:{context:"synthetic_player",region:"TOP_BANNER",asset_uri:null==t?void 0:t.uri,audio_uri:b}})},className:f.containerClass,triggerOnce:!0},s.default.createElement("audio",{preload:"metadata",ref:j,src:_,type:"audio/mpeg"}),s.default.createElement("div",{className:f.controlsClass},s.default.createElement("div",{className:f.playContainerClass},s.default.createElement("button",{type:"button",onClick:function(e){if(W&&W("tooltip",!1),Y(!1),a)if(i){var t,n;e.preventDefault(),null===(t=window)||void 0===t||null===(n=t.NativeBridge)||void 0===n||n.playAudio(F)}else j.current.paused?(B(I?"resume":"user-play"),j.current.play()):j.current.pause(),E(!C),M(!0);else e.preventDefault()},className:f.playButtonClass,"aria-label":C?"Pause article audio":"Listen to article"},C&&!i?s.default.createElement(h.default,null):s.default.createElement(m.default,null)),!i&&G&&s.default.createElement(p.default,{onCloseX:function(){W("tooltip",!1),Y(!1)},onClick:function(){W("tooltip",!1),Y(!1)},alignAdjust:{x:-7,y:45},label:"New"},s.default.createElement("p",null,"Listen to articles"),s.default.createElement("p",null,"Tap the Play button at the top of any article to hear it read aloud."))),s.default.createElement("div",{className:f.timeClass},I&&!i?s.default.createElement(s.default.Fragment,null,s.default.createElement("p",{"aria-hidden":"true"},y(L)),s.default.createElement("input",{className:(0,c.cx)((0,f.progressBarClass)(z)),type:"range",value:L,max:N,onChange:function(e){a||e.preventDefault();var t=e.target.value;j.current.currentTime=t},"aria-label":"audio timeline","aria-valuetext":"Elapsed Time: ".concat(y(L,"aria")),"aria-valuemin":"0","aria-valuemax":N}),s.default.createElement("p",null,s.default.createElement("span",{"aria-hidden":"true"},"-",y(N-L)),s.default.createElement("span",{className:d.default.a11y.visuallyHidden},y(N-L,"aria")," remaining"))):s.default.createElement("div",{className:f.placeholderClass},"Listen to this article ",k&&"· ".concat(y(k,"display")," min")," ",s.default.createElement("span",{className:f.learnLinkClass},s.default.createElement("a",{href:"https://help.nytimes.com/hc/en-us/articles/24318293692180"},"Learn more"))))))};v.displayName="SyntheticAudioPlayer",v.defaultProps={articleData:null,audioAsset:null,isHybrid:null,granted:null,messageCap:null};t.default=v},Jfsd:function(e,t,n){"use strict";var i=n("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=i(n("q1tI")),o=(i(n("17x9")),n("1gPk")),r=function(e){var t=e.children;return a.default.createElement("strong",{className:o.boldClass},t)};r.displayName="BoldFormat";t.default=r},JmIy:function(e,t,n){"use strict";var i=n("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){if(!e.type||"text"!==e.type)return console.warn('Unrecognized inline type "'.concat(e.type,'"')),null;return function(e,t){var n=e.text.split(u).map((function(e,n){return u.test(e)?a.default.createElement(o.default,{key:"pre-".concat(t,"-").concat(n)},e):e}));return(e.marks||[]).forEach((function(e,i){n=function(e,t,n){if(!(e.type in c))return console.warn('Unrecognized format "'.concat(e.type,'"')),t;return c[e.type](e,t,n)}(e,n,"mark-".concat(t,"-").concat(i))})),n}(e,t)};var a=i(n("q1tI")),o=i(n("4mNl")),r=i(n("HTGc")),s=i(n("3HYe")),l=i(n("G03P")),c={strong:r.default,em:s.default,link:l.default};var u=/(\r|\n|\t|[\s]{2,})/g},"JoI/":function(e,t,n){"use strict";var i=n("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.selectImageRendition=t.default=void 0;var a=i(n("q1tI")),o=(i(n("17x9")),n("Jqp9")),r=i(n("KeRS")),s=n("6l8D"),l=n("4mEQ"),c=i(n("Vj0M")),u=i(n("fY8U")),d=n("nxD0"),p=i(n("HZTh")),f=i(n("Svk8")),m=function(e){var t=e.headline,n=e.summary,i=e.url,l=e.media,m=e.className,h=e.label,g=e.caption,y=e.duration,v=(0,o.useTheme)(),b=null;"string"==typeof l?b=a.default.createElement(d.AudioRelatedLinkImage,{src:l}):a.default.isValidElement(l)&&(b=l);var _="compact"===(null==v?void 0:v.displayStyle.toLowerCase()),w=(0,c.default)(y),x=w.hours>=1?"".concat(w.hours," HR ").concat(w.minutes," MIN LISTEN"):"".concat(w.minutes," MIN LISTEN");return a.default.createElement(u.default.Consumer,null,(function(e){return a.default.createElement(d.StyledAudioRelatedLink,{siblings:e,className:m},a.default.createElement(r.default,{to:i,className:s.linkClass},a.default.createElement(d.AudioRelatedLinkMediaWrapper,{siblings:e},(null==v?void 0:v.displayStyle)&&"compact"!==v.displayStyle&&b,a.default.createElement(d.AudioRelatedLinkCaption,null,g)),a.default.createElement(d.AudioRelatedLinkTextWrapper,{siblings:e},h&&!_&&a.default.createElement(d.AudioRelatedLinkLabel,null,h," ",a.default.createElement(d.AudioRelatedLinkAudioTag,null,"Audio")),a.default.createElement(d.AudioRelatedLinkHeadline,null,t),n&&v&&"expanded"===(null==v?void 0:v.displayStyle)&&a.default.createElement(d.AudioRelatedLinkSummary,{siblings:e},n),(null==v?void 0:v.displayStyle)&&"compact"!==v.displayStyle&&a.default.createElement(d.AudioRelatedLinkAudioSignalWrapper,null,a.default.createElement(d.AudioRelatedLinkPlayIconWrapper,null,a.default.createElement(f.default,null)),a.default.createElement(d.AudioRelatedLinkDuration,null,x,a.default.createElement(p.default,null))))))}))};m.displayName="AudioRelatedLink",m.defaultProps={headline:"",summary:"",url:"",caption:"",media:void 0,className:void 0,label:"",duration:void 0};t.selectImageRendition=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(e){return e},n=arguments.length>2?arguments[2]:void 0,i=["threeByTwoSmallAt2X","videoLarge","mediumThreeByTwo440"],a=["thumbLarge"];return(0,l.createPrioritySelector)(n?a:i)(e,t)},t.default=m},JtDR:function(e,t,n){"use strict";var i,a=n("VkAN"),o=n.n(a),r=n("gcR/"),s=n.n(r),l=(n("q1tI"),n("Jqp9")),c=n("eFc+"),u=n.n(c),d=n("K3mc"),p=n.n(d),f=n("rNEd"),m=n("wXC7"),h=n.n(m),g=n("nxVm"),y=n.n(g),v=Object(l.css)("box-sizing:border-box;width:",h.a.breakpoint.mobileFullWidth,";max-width:",h.a.breakpoint.textBodyWidth,"px;",h.a.breakpoint.medium,"{width:100%;}",y.a,";"),b=Object(l.css)("width:90%;",h.a.breakpoint.small,"{margin:0;}"),_=function(e){var t=e.data,n=e.className;return s()(p.a,{className:Object(l.cx)(v,n)},void 0,t.content.map((function(e,t){return s()(f.a,{data:e,className:b},t.toString())})))};_.displayName="BlockquoteBlock",_.defaultProps={className:void 0},_.fragments={data:u()(i||(i=o()(["\n    fragment BlockquoteBlock_data on BlockquoteBlock {\n      content {\n        ...ParagraphBlock_data\n      }\n    }\n    ","\n  "])),f.a.fragments.data)};t.a=_},JwCr:function(e,t,n){"use strict";var i=n("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=i(n("yFJX"));t.default=a.default},K2cq:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;t.default=function(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=e.replace(/[^0-9.]/g,"").trim().split("."),i=t.replace(/[^0-9.]/g,"").trim().split("."),a=0;a<i.length;a+=1){var o=parseInt(i[a]||"0",10),r=parseInt(n[a]||"0",10);if(o>r)return!0;if(o<r)return!1}return!1}},K3mc:function(e,t,n){"use strict";var i=n("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=i(n("4a6l"));t.default=a.default},KG2r:function(e,t,n){"use strict";n.d(t,"c",(function(){return H})),n.d(t,"a",(function(){return W}));var i,a,o,r,s,l,c,u,d=n("gcR/"),p=n.n(d),f=n("lSNA"),m=n.n(f),h=n("yXPU"),g=n.n(h),y=n("J4zp"),v=n.n(y),b=n("VkAN"),_=n.n(b),w=n("o0o1"),x=n.n(w),k=(n("ls82"),n("q1tI")),O=n.n(k),T=n("eFc+"),C=n.n(T),E=n("Kxyt"),S=n("Jqp9"),P=n("X6oL"),I=n("fZdH"),M=n("ErmU"),A=n("2PZ4"),j=n("bLUX"),N=n("WPRB"),L=n("PgO9"),D=n("HUmG"),R=n("J2sf");function B(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function z(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?B(Object(n),!0).forEach((function(t){m()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):B(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var F=R.a,U=C()(i||(i=_()(["\n  query getShareInfo($id: String!) {\n    article: anyWork(id: $id) {\n      ... on CreativeWork {\n        headline {\n          default\n        }\n        summary\n      }\n      ... on Published {\n        url\n      }\n    }\n  }\n"]))),H={nyt:"The New York Times",nytdotcom:"NYTimes.com",from:"From",shareArticle:"Share Article",share:"Share options",facebook:"Facebook",telegram:"Telegram",twitter:"X",email:"Email",linkedin:"LinkedIn",whatsapp:"WhatsApp",reddit:"Reddit",copy:"Copy link",copied:"Link Copied",gift:"Share full article",permalink:"Permalink"},W={copy:"Copy Link",email:"Email this article",facebook:"Share on Facebook",twitter:"Share on X",telegram:"Share on Telegram",whatsapp:"Share on Whatsapp",linkedin:"Share on LinkedIn",reddit:"Share on Reddit"},q=function(e){var t,n,i,u,d=e.share,f=e.pageType,h=e.smidParams,y=e.toggleGiftArticleMenu,b=e.trackingRegion,_=e.renderShareCopy,w=e.renderGiftButton,T=e.isInCarousel,C=e.fireOnRender,B=e.className,q=Object(L.a)().user,V=Object(D.f)(q)&&Object(D.d)(q),G=Object(k.useRef)(null),Y=Object(k.useRef)(null),X=Object(k.useState)(!1),Z=v()(X,2),J=Z[0],K=Z[1],$=Object(k.useState)(!0),Q=v()($,2),ee=Q[0],te=Q[1],ne=Object(k.useState)(!1),ie=v()(ne,2),ae=ie[0],oe=ie[1],re=Object(I.a)(),se=Object(j.b)(re),le=se.isUnlimitedGiftTestVariant,ce=se.isInUnlimitedTest&&!le,ue=Object(E.useLazyQuery)(U,{variables:{id:d.url.split("?")[0]}}),de=v()(ue,2),pe=de[0],fe=de[1],me=fe.called,he=fe.loading,ge=fe.data;!d.url||d.headline&&d.summary||me||pe();var ye,ve,be,_e=d.headline,we=d.url,xe=d.summary,ke=(_e||{}).default;me&&ge&&!he&&(!ke&&null!=ge&&null!==(ye=ge.article)&&void 0!==ye&&null!==(ve=ye.headline)&&void 0!==ve&&ve.default&&(ke=ge.article.headline.default),!xe&&null!=ge&&null!==(be=ge.article)&&void 0!==be&&be.summary&&(xe=ge.article.summary));var Oe={event:"moduleInteraction",eventData:{pagetype:f,trigger:"module",type:"click"},module:{name:"share-tools",region:b||"default",element:{}}};"sectionfront"===f&&(Oe.module.element.url=d.url),"homepage"===(null==f||null===(t=f.toLowerCase)||void 0===t?void 0:t.call(f))&&d.url&&(Oe.module.element.url=d.url),"mid-video"===(null==b||null===(n=b.toLowerCase)||void 0===n?void 0:n.call(b))&&(d.url&&(Oe.module.element.url=d.url),d.uri&&(Oe.module.element.uri=d.uri),d.label&&(Oe.module.element.label=d.label),d.name&&(Oe.module.element.name=d.name));var Te=Object(P.useTracking)(Oe).trackEvent;Object(k.useEffect)((function(){G&&G.current&&G.current.focus()})),Object(k.useEffect)((function(){C()}),[C]),Object(k.useEffect)((function(){if(T&&window.matchMedia("(min-width: 1150px)").matches&&Y.current){var e=Y.current.closest(".carousel-ol");if(e)e.offsetHeight<420&&te(!1)}}),[T]);var Ce=function(){var e=g()(x.a.mark((function e(t){var n,i;return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n="stg"===vi.env.ENVIRONMENT?"www.stg.nytimes.com":"www.nytimes.com",(i=new URL("https://".concat(n,"/svc/log-share/pageview"))).searchParams.set("id",t),e.next=5,fetch(i,{cache:"no-cache",credentials:"include",mode:"cors"});case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Ee=Object(k.useRef)(),Se=z({twitter:"tw-share",facebook:"fb-share",linkedin:"li-share",email:"em-share",wa:"wa-share",reddit:"re-share",link:"url-share",default:"share",telegram:"tel-share"},h),Pe=window&&(null===(i=window.nyt_et)||void 0===i?void 0:i.get_pageview_id()),Ie=ce&&y&&Pe?Pe:void 0,Me={abra:re,url:we,trackingRegion:b,moreParams:{pvid:Ie},hasSibling:!!y},Ae=Object(j.a)(Me),je=Object(j.a)(z(z({},Me),{},{moreParams:{smid:Se.link,pvid:Ie}}));ce&&!ae&&y&&(Ce(Pe),oe(!0));var Ne=Object(k.useCallback)((function(){Te({module:{element:{name:"share-url",label:H.permalink}}})}),[Te]),Le=encodeURIComponent(ke),De=encodeURIComponent("https://www.facebook.com/"),Re=null===(u=Object(M.getEmailUrl)(Ae))||void 0===u?void 0:u.replace("smid=em-share","smid=".concat(Se.email)),Be={subject:encodeURIComponent("".concat(H.nytdotcom,": ").concat(ke)),body:encodeURIComponent("".concat(d.text?"".concat(d.text,"\n\n"):"").concat(H.from," ").concat(H.nyt,":\n\n").concat(ke).concat(xe?"\n\n".concat(xe):"","\n\n").concat(Re))},ze=w?{}:{paddingBottom:"10px"};return O.a.createElement("div",{className:Object(S.cx)(R.j,V?R.k:null,B),id:N.e,style:ze,ref:Y},p()("div",{className:R.m},void 0,H.share),_&&p()("div",{className:R.l},void 0,"Share a link that only New York Times subscribers can access."),p()("ul",{className:R.n},void 0,p()("li",{className:R.f},void 0,O.a.createElement("button",{ref:G,type:"button","aria-label":W.copy,id:"copyUrlId","data-testid":"shareCopyUrlId",onClick:function(){window.isSecureContext?navigator.clipboard.writeText(je).then((function(){Ne(),K(!0),Ee.current=setTimeout((function(){return K(!1)}),5e3)})):console.error("Clipboard not accessible in HTTP. Share URL: ".concat(je))},className:R.h},p()(A.c,{className:Object(S.cx)(R.e,R.b)}),p()("div",{className:Object(S.cx)(R.i,m()({},R.c,J)),"aria-live":"polite"},void 0,J?H.copied:H.copy))),p()("li",{className:R.f},void 0,p()("a",{href:"mailto:?subject=".concat(Be.subject,"&body=").concat(Be.body),target:"_blank","aria-label":W.email,rel:"noopener noreferrer",onClick:function(){Te({module:{element:{name:"share-email",label:H.email}}})}},void 0,p()(A.f,{className:Object(S.cx)(R.e,R.b)}),p()("div",{className:R.i},void 0,H.email))),ee&&O.a.createElement(O.a.Fragment,null,p()("li",{className:R.f},void 0,p()("a",{href:"https://www.facebook.com/dialog/feed?app_id=9869919170&link=".concat(Object(M.encodeUrlWithSMID)(Ae,Se.facebook),"&name=").concat(Le,"&redirect_uri=").concat(De).concat(d.text?"&quote=".concat(d.text):""),target:"_blank","aria-label":W.facebook,rel:"noopener noreferrer",onClick:function(){Te({module:{element:{name:"share-facebook",label:H.facebook}}})}},void 0,p()(A.d,{className:Object(S.cx)(R.e,R.b)}),p()("div",{className:R.i},void 0,H.facebook))),p()("li",{className:R.f},void 0,p()("a",{href:"https://twitter.com/intent/tweet?url=".concat(Object(M.encodeUrlWithSMID)(Ae,Se.twitter),"&text=").concat(d.text?d.text:Le),target:"_blank","aria-label":W.twitter,rel:"noopener noreferrer",onClick:function(){Te({module:{element:{name:"share-twitter",label:H.twitter}}})}},void 0,a||(a=p()(F,{xTwitter:!0})),p()("div",{className:R.i},void 0,H.twitter))),p()("li",{className:R.f},void 0,p()("a",{href:"https://t.me/share/url?url=".concat(Object(M.encodeUrlWithSMID)(Ae,Se.telegram),"&text=").concat(d.text?d.text:Le," via @nytimes"),target:"_blank","aria-label":W.telegram,rel:"noopener noreferrer",onClick:function(){Te({module:{element:{name:"share-telegram",label:H.telegram}}})}},void 0,o||(o=p()(F,{telegram:!0})),p()("div",{className:R.i},void 0,H.telegram))),p()("li",{className:R.f},void 0,p()("a",{href:"https://www.linkedin.com/shareArticle?mini=true&url=".concat(Object(M.encodeUrlWithSMID)(Ae,Se.linkedin),"&title=").concat(Le),target:"_blank","aria-label":W.linkedin,rel:"noopener noreferrer",onClick:function(){Te({module:{element:{name:"share-linkedin",label:H.linkedin}}})}},void 0,r||(r=p()(F,{linkedin:!0})),p()("div",{className:R.i},void 0,H.linkedin))),p()("li",{className:R.f},void 0,p()("a",{href:"https://api.whatsapp.com/send?text=".concat(d.text?d.text:Le,"%20").concat(Object(M.encodeUrlWithSMID)(Ae,Se.wa)),target:"_blank","aria-label":W.whatsapp,rel:"noopener noreferrer",onClick:function(){Te({module:{element:{name:"share-whatsapp",label:H.whatsapp}}})}},void 0,s||(s=p()(F,{whatsapp:!0})),p()("div",{className:R.i},void 0,H.whatsapp))),p()("li",{className:R.f},void 0,p()("a",{href:"http://www.reddit.com/submit?url=".concat(Object(M.encodeUrlWithSMID)(Ae,Se.reddit),"&title=").concat(Le),target:"_blank","aria-label":W.reddit,rel:"noopener noreferrer",onClick:function(){Te({module:{element:{name:"share-reddit",label:H.reddit}}})}},void 0,l||(l=p()(F,{reddit:!0})),p()("div",{className:R.i},void 0,H.reddit)))),V&&w&&p()("li",{className:Object(S.cx)(R.f,R.o,R.g)},void 0,p()("button",{type:"button",onClick:function(){y&&y(!0),Te({module:{element:{name:"open-unlocked-menu",label:H.gift}}})}},void 0,p()("span",{className:R.q},void 0,p()(A.e,{className:R.e})),p()("div",{className:Object(S.cx)(R.p,m()({},R.d,!V))},void 0,p()("p",{},void 0,H.gift),c||(c=p()("p",{},void 0,"Give paywall-free access to this article.")))))))};q.displayName="ShareMenu",q.defaultProps={pageType:void 0,smidParams:{},toggleGiftArticleMenu:void 0,trackingRegion:"default",renderShareCopy:!0,renderGiftButton:!0,isInCarousel:!1,fireOnRender:function(){},className:void 0},q.fragments={share:C()(u||(u=_()(["\n    fragment ShareMenu_share on CreativeWork {\n      headline {\n        default\n      }\n      summary\n      ... on Published {\n        url\n      }\n    }\n  "])))},t.b=q},"KIO/":function(e,t,n){"use strict";t.a="/vi-assets/static-assets/icon-the-recommendation_144x144-3e66bd6cc82013bd511c31a8f04d4ff7.webp"},KQYy:function(e,t,n){"use strict";var i,a,o,r=n("pVnL"),s=n.n(r),l=n("gcR/"),c=n.n(l),u=n("lSNA"),d=n.n(u),p=n("lwsE"),f=n.n(p),m=n("W8MJ"),h=n.n(m),g=n("a1gu"),y=n.n(g),v=n("Nsbk"),b=n.n(v),_=n("7W2i"),w=n.n(_),x=n("zT9C"),k=n.n(x),O=n("q1tI"),T=n.n(O),C=n("Jqp9"),E=n("Odck"),S=n("t0IW"),P=n("XMA8"),I=n("ZKN5"),M=n("mczz"),A=n("VkAN"),j=n.n(A),N=n("wXC7"),L=n.n(N),D=n("euCz");function R(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function B(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?R(Object(n),!0).forEach((function(t){d()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):R(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var z={quality:75,auto:"webp",disable:"upscale"};var F,U=function(e){var t=e.mobileRendition;return T.a.createElement(T.a.Fragment,null,c()("source",{media:Object(D.oneLineTrim)(i||(i=j()(["\n          (max-width: ","px) and (min-device-pixel-ratio: 3),\n          (max-width: ","px) and (-webkit-min-device-pixel-ratio: 3),\n          (max-width: ","px) and (min-resolution: 3dppx),\n          (max-width: ","px) and (min-resolution: 288dpi)\n        "])),L.a.breakpoint.width.small-1,L.a.breakpoint.width.small-1,L.a.breakpoint.width.small-1,L.a.breakpoint.width.small-1),srcSet:Object(S.a)(t.url,B(B({},z),{},{width:600}))}),c()("source",{media:Object(D.oneLineTrim)(a||(a=j()(["\n          (max-width: ","px) and (min-device-pixel-ratio: 2),\n          (max-width: ","px) and (-webkit-min-device-pixel-ratio: 2),\n          (max-width: ","px) and (min-resolution: 2dppx),\n          (max-width: ","px) and (min-resolution: 192dpi)\n        "])),L.a.breakpoint.width.small-1,L.a.breakpoint.width.small-1,L.a.breakpoint.width.small-1,L.a.breakpoint.width.small-1),srcSet:Object(S.a)(t.url,B(B({},z),{},{width:1200}))}),c()("source",{media:Object(D.oneLineTrim)(o||(o=j()(["\n          (max-width: ","px) and (min-device-pixel-ratio: 1),\n          (max-width: ","px) and (-webkit-min-device-pixel-ratio: 1),\n          (max-width: ","px) and (min-resolution: 1dppx),\n          (max-width: ","px) and (min-resolution: 96dpi)\n        "])),L.a.breakpoint.width.small-1,L.a.breakpoint.width.small-1,L.a.breakpoint.width.small-1,L.a.breakpoint.width.small-1),srcSet:Object(S.a)(t.url,B(B({},z),{},{width:1800}))}))},H=n("3sMT"),W=Object(C.css)("width:100%;background-color:",H.color.background.tertiary,";"),q=Object(C.css)("animation:",Object(C.keyframes)("from{background-color:",H.color.background.tertiary,";}to{background-color:transparent;}")," ",300,"ms ease-in forwards;"),V=Object(C.css)("transition:opacity ",300,"ms ease-in-out;opacity:0;display:block;width:100%;"),G=Object(C.css)("height:auto;width:100%;"),Y={entering:{opacity:0},entered:{opacity:1}};function X(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function Z(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?X(Object(n),!0).forEach((function(t){d()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):X(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function J(e,t,n){return t=b()(t),y()(e,function(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return function(){return!!e}()}()?Reflect.construct(t,n||[],b()(e).constructor):t.apply(e,n))}var K={quality:75,auto:"webp",disable:"upscale"};var $=Object(I.a)(F=function(e){function t(){var e;f()(this,t);for(var n=arguments.length,i=new Array(n),a=0;a<n;a++)i[a]=arguments[a];return(e=J(this,t,[].concat(i))).state={appearedInViewport:!1,rendition:null,nativeLazinessSupported:null,aspectRatio:1.66,imageLoaded:!1,containerWidth:null},e.el=T.a.createRef(),e.appearedInViewport=!1,e}return w()(t,e),h()(t,[{key:"componentDidMount",value:function(){var e;if(null!==(e=this.el)&&void 0!==e&&e.current){var t=this.getActiveRendition(),n={};n.nativeLazinessSupported="loading"in HTMLImageElement.prototype,Object(M.d)(Object(M.c)(),"forceLazy")?(this.appearedInViewport=!0,n.appearedInViewport=!0):!n.nativeLazinessSupported&&this.props.lazy&&this.setupIntersectionObserver(),t&&t.width&&t.height?(n.aspectRatio=t.width/t.height,n.rendition=t):n.aspectRatio=this.props.initialAspectRatio,n.containerWidth=this.el.current.offsetWidth?this.el.current.offsetWidth:null,this.setState(n)}}},{key:"componentWillUnmount",value:function(){this.observer&&(this.observer.disconnect(),this.observer=null)}},{key:"getActiveRendition",value:function(){var e;if(null===(e=this.el)||void 0===e||!e.current)return null;var t,n,i=this.props.renditions,a=null;if(Array.isArray(i)){var o=this.el.current.querySelector("img");if(!o||!o.currentSrc)return null;var r=(t=o.currentSrc,n=new URL(t),"".concat(n.origin).concat(n.pathname));i.some((function(e){return e.url===r}))&&(a=i.find((function(e){return e.url===r})))}return a}},{key:"setupIntersectionObserver",value:function(){var e=this,t={threshold:0,rootMargin:"".concat(this.props.rootMargin,"px")};this.observer=new IntersectionObserver((function(t){var n;!e.appearedInViewport&&null!=t&&null!==(n=t[0])&&void 0!==n&&n.isIntersecting&&(e.appearedInViewport=!0,e.observer&&e.observer.disconnect(),e.observer=null,e.setState({appearedInViewport:!0}))}),t),this.observer.observe(this.el.current)}},{key:"render",value:function(){var e,t=this,n=this.props,i=n.lazy,a=n.imageProps,o=n.fullBleedImageStyles,r=n.alt,l=n.initialImageWidth,u=n.safeWidths,p=n.imageContainerRef,f=n.useMobileCrop,m=n.renditions,h=this.state,g=h.aspectRatio,y=h.imageLoaded,v=h.containerWidth,b=h.rendition,_=h.appearedInViewport,w=h.nativeLazinessSupported,x=Z(Z({},k()(a)),{},{decoding:"async"}),O=k()(m),I=Object(P.j)(O);Array.isArray(O)&&Array.isArray(x.srcSet)&&(O=O.filter((function(e){return!Object(P.o)(e)})),x.srcSet=x.srcSet.filter((function(e){return-1===e.indexOf(P.p)})));var M,A,j=v||l;if(!b&&j){var N=(M=1.5*j,(A=u)&&A.find((function(e){return e>=M}))||null),L=N?{width:N}:{},D=Z(Z({},K),L);x.src=Object(S.a)(x.src,D)}if(b&&(x.src=Object(S.a)(b.url,K),x.srcSet=null),i&&w&&(x.loading="lazy"),!i){if(x.width=x.width||this.props.width,x.height=x.height||this.props.height,x.width&&x.height){var R="string"==typeof x.className;x.className=Object(C.cx)(G,d()({},x.className,R))}return f&&I?c()("picture",{style:o},void 0,c()(U,{mobileRendition:I}),T.a.createElement("img",s()({alt:r,ref:p},x))):T.a.createElement("img",s()({alt:r,ref:p,style:o},x))}x.onLoad=function(){y||t.setState({imageLoaded:!0})};var B=!v&&this.props.initialAspectRatio||g,z="auto";y||(v?z=v/B:l&&(z=l/(1.5*B)));var F=f&&I?function(t){return c()("picture",{className:V,style:Z(Z({},Y[t]),{},{fullBleedImageStyles:o})},void 0,e||(e=c()(U,{mobileRendition:I})),T.a.createElement("img",s()({alt:r},x)))}:function(e){return T.a.createElement("img",s()({alt:r,className:V,style:Z(Z({},Y[e]),{},{fullBleedImageStyles:o})},x))};return T.a.createElement("div",{className:Object(C.cx)(W,d()({},q,y)),ref:this.el,"data-testid":"lazy-image"},j&&T.a.createElement("div",{ref:p,"data-testid":"lazyimage-container",style:{height:z}},(_||w)&&c()(E.Transition,{in:!!y,timeout:300},void 0,F)))}}])}(O.Component))||F;$.displayName="LazyImage",$.defaultProps={lazy:!1,fullBleedImageStyles:null,alt:"",renditions:null,initialAspectRatio:1.66,initialImageWidth:580,safeWidths:null,rootMargin:0,imageContainerRef:null,useMobileCrop:!1,height:null,width:null};t.a=$},KRMk:function(e,t,n){"use strict";n.r(t),n.d(t,"usData",(function(){return I})),n.d(t,"UsDataProvider",(function(){return M}));var i=n("q1tI"),a=n.n(i),o=n("cRkx"),r=n("wNME"),s=n("NByq"),l=n("05yZ"),c=n("83Mo"),u=n("YawQ"),d=n("jP6B"),p=n("nM+O"),f=n("gUwe"),m=n("Ow4k"),h=n("ULBD"),g=n("z4uL"),y=n("y1T0"),v=n("IVQz"),b=n("KIO/"),_=n("Ikdi"),w=n("7HgC"),x=n("WJy1"),k=n("PlW/"),O=n("IvQ5"),T=n("4KWU"),C=n("eHD8"),E=n("3VDn"),S=n("H0B8"),P=n("EXHk"),I=[{url:"https://www.nytimes.com/section/us",name:"U.S.",dropdown:[{columnWidth:2,heading:"Sections",type:"links",links:[{copy:"U.S.",link:"https://www.nytimes.com/section/us"},{copy:"Politics",link:"https://www.nytimes.com/section/politics"},{copy:"New York",link:"https://www.nytimes.com/section/nyregion"},{copy:"California",link:"https://www.nytimes.com/column/california-today"},{copy:"Education",link:"https://www.nytimes.com/section/education"},{copy:"Health",link:"https://www.nytimes.com/section/health"},{copy:"Obituaries",link:"https://www.nytimes.com/section/obituaries"},{copy:"Science",link:"https://www.nytimes.com/section/science"}]},{columnWidth:2,hamburgerColumnWidth:3,heading:"Sections",hideHeading:!0,type:"links",links:[{copy:"Climate",link:"https://www.nytimes.com/section/climate"},{copy:"Weather",link:"https://www.nytimes.com/section/weather"},{copy:"Sports",link:"https://www.nytimes.com/section/sports"},{copy:"Business",link:"https://www.nytimes.com/section/business"},{copy:"Tech",link:"https://www.nytimes.com/section/technology"},{copy:"The Upshot",link:"https://www.nytimes.com/section/upshot"},{copy:"The Magazine",link:"https://www.nytimes.com/section/magazine"}]},{columnWidth:4,heading:"U.S. Politics",type:"links",style:{marginLeft:"2rem"},links:[{copy:"2024 Elections",link:"https://www.nytimes.com/news-event/2024-election"},{copy:"Primary Results",link:"https://www.nytimes.com/interactive/2024/us/elections/republican-primary-delegates-tracker-calendar.html"},{copy:"Supreme Court",link:"https://www.nytimes.com/topic/organization/us-supreme-court"},{copy:"Congress",link:"https://www.nytimes.com/topic/organization/us-congress"},{copy:"Biden Administration",link:"https://www.nytimes.com/spotlight/joe-biden"}]},{columnWidth:4,heading:"Top Stories",type:"links",links:[{copy:"Trump Investigations",link:"https://www.nytimes.com/news-event/donald-trump-investigations"},{copy:"Immigration",link:"https://www.nytimes.com/news-event/immigration-us"},{copy:"Abortion",link:"https://www.nytimes.com/spotlight/abortion-news"},{copy:"Campus Protests",link:"https://www.nytimes.com/news-event/college-campus-gaza-protests"}]},{columnWidth:4,heading:"Newsletters",footer:{copy:"See all newsletters",link:"https://www.nytimes.com/newsletters"},type:"thumbnailContent",items:[{title:"The Morning",description:"Make sense of the day’s news and ideas.",link:"https://www.nytimes.com/newsletters/morning-briefing",thumbnailImage:v.a},{title:"The Upshot",description:"Analysis that explains politics, policy and everyday life.",link:"https://www.nytimes.com/newsletters/upshot",thumbnailImage:_.a}]},{type:"hamburgerSpacer",hamburgerColumnWidth:1,columnWidth:0},{columnWidth:4,heading:"Podcasts",footer:{copy:"See all podcasts",link:"https://www.nytimes.com/spotlight/podcasts"},type:"thumbnailContent",items:[{title:"The Daily",description:"The biggest stories of our time, in 20 minutes a day.",link:"https://www.nytimes.com/column/the-daily",thumbnailImage:"https://static01.nyt.com/images/2017/01/29/podcasts/the-daily-album-art/the-daily-album-art-mediumSquare149-v3.jpg?quality=75&auto=webp&disable=upscale"},{title:"The Run-Up",description:"On the campaign trail with Astead Herndon.",link:"https://www.nytimes.com/column/election-run-up-podcast",thumbnailBorder:!0,thumbnailImage:"https://static01.nyt.com/images/2022/08/29/podcasts/the-run-up-album-art/the-run-up-album-art-thumbLarge.jpg?quality=75&auto=webp&disable=upscale"}]}]},{url:"https://www.nytimes.com/section/world",name:"World",dropdown:[{columnWidth:1},{columnWidth:4,hamburgerColumnWidth:5,heading:"Sections",type:"links",innerGridColumnCount:2,columns:[[{copy:"World",link:"https://www.nytimes.com/section/world"},{copy:"Africa",link:"https://www.nytimes.com/section/world/africa"},{copy:"Americas",link:"https://www.nytimes.com/section/world/americas"},{copy:"Asia",link:"https://www.nytimes.com/section/world/asia"},{copy:"Australia",link:"https://www.nytimes.com/section/world/australia"},{copy:"Canada",link:"https://www.nytimes.com/section/world/canada"}],[{copy:"Europe",link:"https://www.nytimes.com/section/world/europe"},{copy:"Middle East",link:"https://www.nytimes.com/section/world/middleeast"},{copy:"Science",link:"https://www.nytimes.com/section/science"},{copy:"Climate",link:"https://www.nytimes.com/section/climate"},{copy:"Weather",link:"https://www.nytimes.com/section/weather"},{copy:"Health",link:"https://www.nytimes.com/section/health"},{copy:"Obituaries",link:"https://www.nytimes.com/section/obituaries"}]]},{columnWidth:1},{columnWidth:5,heading:"Top Stories",type:"links",links:[{copy:"Israel-Hamas War",link:"https://www.nytimes.com/news-event/israel-hamas-gaza"},{copy:"Russia-Ukraine War",link:"https://www.nytimes.com/news-event/ukraine-russia"}]},{columnWidth:4,heading:"Newsletters",type:"thumbnailContent",items:[{title:"Morning Briefing: Europe",description:"Get what you need to know to start your day.",link:"https://www.nytimes.com/newsletters/morning-briefing-europe",thumbnailImage:u.a},{title:"The Interpreter",description:"Original analysis on the week’s biggest global stories.",link:"https://www.nytimes.com/newsletters/the-interpreter",thumbnailImage:y.a}]},{columnWidth:4,heading:"Newsletters",hideHeading:!0,footer:{copy:"See all newsletters",link:"https://www.nytimes.com/newsletters"},type:"thumbnailContent",items:[{title:"Your Places: Global Update",description:"The latest news for any part of the world you select.",link:"https://www.nytimes.com/newsletters/your-places-global-update",thumbnailImage:C.a},{title:"Canada Letter",description:"Backstories and analysis from our Canadian correspondents.",link:"https://www.nytimes.com/newsletters/canada-letter",thumbnailImage:r.a}]}]},{url:"https://www.nytimes.com/section/business",name:"Business",dropdown:[{columnWidth:1},{columnWidth:2,heading:"Sections",type:"links",links:[{copy:"Business",link:"https://www.nytimes.com/section/business"},{copy:"Tech",link:"https://www.nytimes.com/section/technology"},{copy:"Economy",link:"https://www.nytimes.com/section/business/economy"},{copy:"Media",link:"https://www.nytimes.com/section/business/media"},{copy:"Finance and Markets",link:"https://www.nytimes.com/section/markets-overview"}]},{columnWidth:3,heading:"Sections",hideHeading:!0,type:"links",links:[{copy:"DealBook",link:"https://www.nytimes.com/section/business/dealbook"},{copy:"Personal Tech",link:"https://www.nytimes.com/section/technology/personaltech"},{copy:"Energy Transition",link:"https://www.nytimes.com/section/business/energy-environment"},{copy:"Your Money",link:"https://www.nytimes.com/section/your-money"}]},{columnWidth:5,heading:"Top Stories",type:"links",links:[{copy:"U.S. Economy",link:"https://www.nytimes.com/news-event/economy-business-us"},{copy:"Stock Market",link:"https://www.nytimes.com/section/markets-overview"},{copy:"Artificial Intelligence",link:"https://www.nytimes.com/spotlight/artificial-intelligence"}]},{columnWidth:4,heading:"Newsletters",footer:{copy:"See all newsletters",link:"https://www.nytimes.com/newsletters"},type:"thumbnailContent",items:[{title:"DealBook",description:"The most crucial business and policy news you need to know.",link:"https://www.nytimes.com/newsletters/dealbook",thumbnailImage:c.a}]},{columnWidth:4,heading:"Podcasts",footer:{copy:"See all podcasts",link:"https://www.nytimes.com/spotlight/podcasts"},type:"thumbnailContent",items:[{title:"Hard Fork",description:"Our tech journalists help you make sense of the rapidly changing tech world.",link:"https://www.nytimes.com/column/hard-fork",thumbnailImage:"https://static01.nyt.com/images/2022/09/28/podcasts/hard-fork-album-art/hard-fork-album-art-mediumSquare149-v2.png?quality=75&auto=webp&disable=upscale"}]}]},{url:"https://www.nytimes.com/section/arts",name:"Arts",dropdown:[{columnWidth:1},{columnWidth:2,heading:"Sections",type:"links",links:[{copy:"Today's Arts",link:"https://www.nytimes.com/section/arts"},{copy:"Books",link:"https://www.nytimes.com/section/books"},{copy:"Best Sellers",link:"https://www.nytimes.com/books/best-sellers"},{copy:"Dance",link:"https://www.nytimes.com/section/arts/dance"},{copy:"Movies",link:"https://www.nytimes.com/section/movies"},{copy:"Music",link:"https://www.nytimes.com/section/arts/music"}]},{columnWidth:3,heading:"Sections",hideHeading:!0,type:"links",links:[{copy:"Television",link:"https://www.nytimes.com/section/arts/television"},{copy:"Theater",link:"https://www.nytimes.com/section/theater"},{copy:"Pop Culture",link:"https://www.nytimes.com/spotlight/pop-culture"},{copy:"T Magazine",link:"https://www.nytimes.com/section/t-magazine"},{copy:"Visual Arts",link:"https://www.nytimes.com/section/arts/design"}]},{columnWidth:5,heading:"Recommendations",type:"links",links:[{copy:"Critic’s Picks",link:"https://www.nytimes.com/spotlight/critics-picks"},{copy:"What to Read",link:"https://www.nytimes.com/spotlight/books-to-read"},{copy:"What to Watch",link:"https://www.nytimes.com/spotlight/what-to-watch"},{copy:"What to Listen To",link:"https://www.nytimes.com/column/playlist"},{copy:"5 Minutes to Make You Love Music",link:"https://www.nytimes.com/interactive/2023/10/27/arts/music/music-fivemins-collection.html"}]},{columnWidth:4,heading:"Newsletters",footer:{copy:"See all newsletters",link:"https://www.nytimes.com/newsletters"},type:"thumbnailContent",items:[{title:"Read Like the Wind",description:"Book recommendations from our critics.",link:"https://www.nytimes.com/newsletters/read-like-the-wind",thumbnailImage:g.a},{title:"Watching",description:"Streaming TV and movie recommendations.",link:"https://www.nytimes.com/newsletters/watching",thumbnailImage:x.a}]},{columnWidth:4,heading:"Podcasts",footer:{copy:"See all podcasts",link:"https://www.nytimes.com/spotlight/podcasts"},type:"thumbnailContent",items:[{title:"Book Review",description:"The podcast that takes you inside the literary world.",link:"https://www.nytimes.com/column/book-review-podcast",thumbnailImage:"https://static01.nyt.com/images/2018/03/27/books/book-review-album-art-v2/book-review-album-art-v2-thumbLarge-v3.jpg?quality=75&auto=webp&disable=upscale"},{title:"Popcast",description:"Pop music news, new songs and albums, and artists of note.",link:"https://www.nytimes.com/column/popcast-pop-music-podcast",thumbnailImage:"https://static01.nyt.com/images/2011/05/20/multimedia/music-popcast/music-popcast-thumbLarge-v3.jpg?quality=75&auto=webp&disable=upscale"}]}]},{url:"https://www.nytimes.com/spotlight/lifestyle",name:"Lifestyle",dropdown:[{columnWidth:1},{columnWidth:2,heading:"Sections",type:"links",links:[{copy:"All Lifestyle",link:"https://www.nytimes.com/spotlight/lifestyle"},{copy:"Well",link:"https://www.nytimes.com/section/well"},{copy:"Travel",link:"https://www.nytimes.com/section/travel"},{copy:"Style",link:"https://www.nytimes.com/section/style"},{copy:"Real Estate",link:"https://www.nytimes.com/section/realestate"}]},{columnWidth:3,heading:"Sections",hideHeading:!0,type:"links",links:[{copy:"Food",link:"https://www.nytimes.com/section/food"},{copy:"Love",link:"https://www.nytimes.com/section/fashion/weddings"},{copy:"Your Money",link:"https://www.nytimes.com/section/your-money"},{copy:"Personal Tech",link:"https://www.nytimes.com/section/technology/personaltech"},{copy:"T Magazine",link:"https://www.nytimes.com/section/t-magazine"}]},{columnWidth:5,heading:"Columns",type:"links",innerGridColumnCount:2,columns:[[{copy:"36 Hours",link:"https://www.nytimes.com/column/36-hours"},{copy:"Ask Well",link:"https://www.nytimes.com/column/ask-well"},{copy:"The Hunt",link:"https://www.nytimes.com/column/the-hunt"},{copy:"Modern Love",link:"https://www.nytimes.com/column/modern-love"}],[{copy:"Where to Eat",link:"https://www.nytimes.com/spotlight/best-restaurants"},{copy:"Vows",link:"https://www.nytimes.com/column/vows"},{copy:"Social Q’s",link:"https://www.nytimes.com/column/social-qs"},{copy:"The Ethicist",link:"https://www.nytimes.com/column/the-ethicist"}]]},{columnWidth:4,heading:"Newsletters",footer:{copy:"See all newsletters",link:"https://www.nytimes.com/newsletters"},type:"thumbnailContent",items:[{title:"Open Thread",description:"The latest news on what we wear, by our chief fashion critic.",link:"https://www.nytimes.com/newsletters/open-thread-fashion",thumbnailImage:m.a},{title:"Well",description:"Essential news and guidance to live your healthiest life.",link:"https://www.nytimes.com/newsletters/well",thumbnailImage:k.a}]},{columnWidth:4,heading:"Podcasts",footer:{copy:"See all podcasts",link:"https://www.nytimes.com/spotlight/podcasts"},type:"thumbnailContent",items:[{title:"Modern Love",description:"The complicated love lives of real people.",link:"https://www.nytimes.com/column/modern-love-podcast",thumbnailImage:"https://static01.nyt.com/images/2020/09/21/podcasts/modernlove-logo/modernlove-logo-thumbLarge-v3.jpg?quality=75&auto=webp&disable=upscale"}]}]},{url:"https://www.nytimes.com/section/opinion",name:"Opinion",dropdown:[{columnWidth:1},{columnWidth:2,hamburgerColumnWidth:3,heading:"Sections",type:"links",links:[{copy:"Opinion",link:"https://www.nytimes.com/section/opinion"},{copy:"Guest Essays",link:"https://www.nytimes.com/section/opinion/contributors"},{copy:"Editorials",link:"https://www.nytimes.com/section/opinion/editorials"},{copy:"Op-Docs",link:"https://www.nytimes.com/column/op-docs"},{copy:"Videos",link:"https://www.nytimes.com/spotlight/opinion-video"},{copy:"Letters",link:"https://www.nytimes.com/section/opinion/letters"}]},{columnWidth:2,hamburgerColumnWidth:3,heading:"Topics",type:"links",links:[{copy:"Politics",link:"https://www.nytimes.com/section/opinion/politics"},{copy:"World",link:"https://www.nytimes.com/section/opinion/international-world"},{copy:"Business",link:"https://www.nytimes.com/section/opinion/business-economics"},{copy:"Tech",link:"https://www.nytimes.com/section/opinion/technology"},{copy:"Climate",link:"https://www.nytimes.com/section/opinion/environment"},{copy:"Health",link:"https://www.nytimes.com/section/opinion/health"},{copy:"Culture",link:"https://www.nytimes.com/section/opinion/culture"}]},{columnWidth:1},{columnWidth:9,heading:"Columnists",type:"links",innerGridColumnCount:3,columns:[[{copy:"Charles M. Blow",link:"https://www.nytimes.com/by/charles-m-blow"},{copy:"Jamelle Bouie",link:"https://www.nytimes.com/by/jamelle-bouie"},{copy:"David Brooks",link:"https://www.nytimes.com/by/david-brooks"},{copy:"Gail Collins",link:"https://www.nytimes.com/by/gail-collins"},{copy:"Ross Douthat",link:"https://www.nytimes.com/by/ross-douthat"},{copy:"Maureen Dowd",link:"https://www.nytimes.com/by/maureen-dowd"},{copy:"David French",link:"https://www.nytimes.com/by/david-french"}],[{copy:"Thomas L. Friedman",link:"https://www.nytimes.com/by/thomas-l-friedman"},{copy:"Michelle Goldberg",link:"https://www.nytimes.com/by/michelle-goldberg"},{copy:"Ezra Klein",link:"https://www.nytimes.com/by/ezra-klein"},{copy:"Nicholas Kristof",link:"https://www.nytimes.com/by/nicholas-kristof"},{copy:"Paul Krugman",link:"https://www.nytimes.com/by/paul-krugman"},{copy:"Carlos Lozada",link:"https://www.nytimes.com/by/carlos-lozada"}],[{copy:"Tressie McMillan Cottom",link:"https://www.nytimes.com/by/tressie-mcmillan-cottom"},{copy:"Pamela Paul",link:"https://www.nytimes.com/by/pamela-paul"},{copy:"Lydia Polgreen",link:"https://www.nytimes.com/by/lydia-polgreen"},{copy:"Bret Stephens",link:"https://www.nytimes.com/by/bret-stephens"},{copy:"Zeynep Tufekci",link:"https://www.nytimes.com/by/zeynep-tufekci"}]]},{columnWidth:4,heading:"Podcasts",footer:{copy:"See all podcasts",link:"https://www.nytimes.com/spotlight/podcasts"},type:"thumbnailContent",items:[{title:"Matter of Opinion",description:"Thoughts, aloud. With Michelle Cottle, Ross Douthat, Carlos Lozada and Lydia Polgreen.",link:"https://www.nytimes.com/column/matter-of-opinion",thumbnailImage:"https://static01.nyt.com/images/2023/05/08/podcasts/matter-of-opinion-album-art/matter-of-opinion-album-art-thumbLarge-v2.jpg?quality=75&auto=webp&disable=upscale"},{title:"The Ezra Klein Show",description:"Discussions of ideas that matter, plus book recommendations.",link:"https://www.nytimes.com/column/ezra-klein-podcast",thumbnailImage:"https://static01.nyt.com/images/2021/01/12/podcasts/ezra-klein-album-art/ezra-klein-album-art-mediumSquare149-v2.jpg?quality=75&auto=webp&disable=upscale"}]}]},{url:"https://www.nytimes.com/spotlight/podcasts",name:"Audio",productType:"standalone",dropdown:[{columnWidth:1},{columnWidth:4,heading:"Audio",type:"brand",link:"https://www.nytimes.com/spotlight/podcasts",description:"Podcasts and narrated articles covering news, tech, culture and more.",footer:{copy:"Download the Audio app on iOS.",link:"https://www.nytimes.com/audio/app"}},{columnWidth:6,heading:"Listen",type:"links",innerGridColumnCount:2,footer:{copy:"See all audio",link:"https://www.nytimes.com/spotlight/podcasts"},columns:[[{copy:"The Headlines",link:"https://www.nytimes.com/column/the-headlines"},{copy:"The Daily",link:"https://www.nytimes.com/column/the-daily"},{copy:"Hard Fork",link:"https://www.nytimes.com/column/hard-fork"},{copy:"The Ezra Klein Show",link:"https://www.nytimes.com/column/ezra-klein-podcast"},{copy:"Matter of Opinion",link:"https://www.nytimes.com/column/matter-of-opinion"},{copy:"Serial Productions",link:"https://www.nytimes.com/interactive/2022/podcasts/serial-productions.html"}],[{copy:"The Book Review Podcast",link:"https://www.nytimes.com/column/book-review-podcast"},{copy:"Modern Love",link:"https://www.nytimes.com/column/modern-love-podcast"},{copy:"The Run-Up",link:"https://www.nytimes.com/column/election-run-up-podcast"},{copy:"Popcast",link:"https://www.nytimes.com/column/popcast-pop-music-podcast"},{copy:"Reporter Reads",link:"https://www.nytimes.com/spotlight/reporter-reads"},{copy:"The Sunday Read",link:"https://www.nytimes.com/spotlight/the-sunday-read"},{copy:"The Culture Desk",link:"https://www.nytimes.com/column/the-culture-desk"},{copy:"The Interview",link:"https://www.nytimes.com/column/the-interview"}]]},{columnWidth:4,heading:"Featured",type:"thumbnailContent",items:[{title:"The Interview",description:"Conversations with the world’s most fascinating people.",link:"https://www.nytimes.com/column/the-interview",thumbnailImage:P.a},{title:"The Headlines",description:"Your morning listen. Top stories, in 5 minutes.",link:"https://www.nytimes.com/column/the-headlines",thumbnailImage:"https://static01.nyt.com/images/2022/10/12/podcasts/headlines-albumartwork-audioapp-2/headlines-albumartwork-audioapp-2-thumbLarge.png?quality=75&auto=webp&disable=upscale"},{title:"Serial Season 4: Guantánamo",description:"What it was really like, from people who lived it.",link:"https://www.nytimes.com/interactive/2024/podcasts/serial-season-four-guantanamo.html",thumbnailImage:S.a}]},{columnWidth:4,heading:"Newsletters",type:"thumbnailContent",footer:{copy:"See all newsletters",link:"https://www.nytimes.com/newsletters"},items:[{title:"Audio",description:"Our editors share their favorite listens from the New York Times Audio app.",link:"https://www.nytimes.com/newsletters/audio",thumbnailImage:o.a}]}]},{url:"https://www.nytimes.com/crosswords",name:"Games",productType:"standalone",dropdown:[{columnWidth:1},{columnWidth:4,heading:"Games",type:"brand",link:"https://www.nytimes.com/crosswords",description:"Word games, logic puzzles and crosswords, including an extensive archive."},{columnWidth:3,heading:"Play",type:"linksWithIcons",links:[{copy:"Spelling Bee",icon:"https://www.nytimes.com/games-assets/v2/assets/icons/spelling-bee.svg",link:"https://www.nytimes.com/puzzles/spelling-bee"},{copy:"The Mini Crossword",icon:"https://www.nytimes.com/games-assets/v2/assets/icons/mini.svg",link:"https://www.nytimes.com/crosswords/game/mini"},{copy:"Wordle",icon:"https://www.nytimes.com/games-assets/v2/assets/icons/wordle.svg",link:"https://www.nytimes.com/games/wordle/index.html"},{copy:"The Crossword",icon:"https://www.nytimes.com/games-assets/v2/assets/icons/daily.svg",link:"https://www.nytimes.com/crosswords/game/daily/"},{copy:"Vertex",icon:"https://www.nytimes.com/games-assets/v2/assets/icons/vertex.svg",link:"https://www.nytimes.com/puzzles/vertex"}]},{columnWidth:3,heading:"Play",hideHeading:!0,type:"linksWithIcons",links:[{copy:"Strands",icon:"https://www.nytimes.com/games-assets/v2/assets/icons/strands.svg",link:"https://www.nytimes.com/games/strands"},{copy:"Connections",icon:"https://www.nytimes.com/games-assets/v2/assets/icons/connections.svg",link:"https://www.nytimes.com/games/connections"},{copy:"Sudoku",icon:"https://www.nytimes.com/games-assets/v2/assets/expansion-games/sudoku-card-icon.svg",link:"https://www.nytimes.com/puzzles/sudoku"},{copy:"Letter Boxed",icon:"https://www.nytimes.com/games-assets/v2/assets/icons/letter-boxed.svg",link:"https://www.nytimes.com/puzzles/letter-boxed"},{copy:"Tiles",icon:"https://www.nytimes.com/games-assets/v2/assets/icons/tiles.svg",link:"https://www.nytimes.com/puzzles/tiles"}]},{columnWidth:4,heading:"Community",type:"links",links:[{copy:"Spelling Bee Forum",link:"https://www.nytimes.com/spotlight/spelling-bee-forum"},{copy:"Wordplay Column",link:"https://www.nytimes.com/spotlight/daily-crossword-column"},{copy:"Wordle Review",link:"https://www.nytimes.com/spotlight/wordle-review"},{copy:"Submit a Crossword",link:"https://www.nytimes.com/article/submit-crossword-puzzles-the-new-york-times.html"},{copy:"Meet Our Crossword Constructors",link:"https://www.nytimes.com/spotlight/puzzle-making"},{copy:"Mini to Maestro",link:"https://www.nytimes.com/2022/09/19/crosswords/mini-to-maestro-part-1.html"},{copy:"Wordlebot",link:"https://www.nytimes.com/interactive/2022/upshot/wordle-bot.html"},{copy:"Take the Puzzle Personality Quiz",link:"https://www.nytimes.com/puzzle-personality"}]},{columnWidth:4,heading:"Newsletters",footer:{copy:"See all newsletters",link:"https://www.nytimes.com/newsletters"},type:"thumbnailContent",items:[{title:"Gameplay",description:"Puzzles, brain teasers, solving tips and more.",link:"https://www.nytimes.com/newsletters/gameplay",thumbnailImage:f.a},{title:"Easy Mode",description:"Get an easy version of one of the hardest crossword puzzles of the week.",link:"https://www.nytimes.com/newsletters/easy-mode",thumbnailImage:E.a}]}]},{url:"https://cooking.nytimes.com/",name:"Cooking",productType:"standalone",dropdown:[{columnWidth:1},{columnWidth:4,heading:"Cooking",type:"brand",link:"https://cooking.nytimes.com/",description:"Recipes, advice and inspiration for everyday cooking, special occasions and more."},{columnWidth:3,hamburgerColumnWidth:4,heading:"Recipes",type:"links",innerGridColumnCount:2,columns:[[{copy:"Easy",link:"https://cooking.nytimes.com/topics/easy-recipes"},{copy:"Dinner",link:"https://cooking.nytimes.com/topics/dinner-recipes"},{copy:"Quick",link:"https://cooking.nytimes.com/68861692-nyt-cooking/43843372-quick-recipes"},{copy:"Healthy",link:"https://cooking.nytimes.com/topics/healthy-recipes"},{copy:"Breakfast",link:"https://cooking.nytimes.com/topics/breakfast"}],[{copy:"Vegetarian",link:"https://cooking.nytimes.com/topics/vegetarian"},{copy:"Vegan",link:"https://cooking.nytimes.com/topics/vegan-recipes"},{copy:"Chicken",link:"https://cooking.nytimes.com/topics/our-best-chicken-recipes"},{copy:"Pasta",link:"https://cooking.nytimes.com/topics/our-best-pasta-recipes"},{copy:"Dessert",link:"https://cooking.nytimes.com/topics/desserts"}]]},{columnWidth:3,heading:"Editors' Picks",type:"links",links:[{copy:"Soups and Stews",link:"https://cooking.nytimes.com/68861692-nyt-cooking/638891-best-soup-stew-recipes"},{copy:"Easy Weeknight",link:"https://cooking.nytimes.com/topics/easy-weeknight"},{copy:"Newest Recipes",link:"https://cooking.nytimes.com/68861692-nyt-cooking/32998034-our-newest-recipes"},{copy:"One-Pot Meals",link:"https://cooking.nytimes.com/68861692-nyt-cooking/2370458-one-pot-dinner-recipes"},{copy:"Slow Cooker Recipes",link:"https://cooking.nytimes.com/68861692-nyt-cooking/950138-amazing-slow-cooker-recipes"},{copy:"Comfort Food",link:"https://cooking.nytimes.com/topics/comfort-food"},{copy:"Party Recipes",link:"https://cooking.nytimes.com/topics/entertaining"}]},{columnWidth:4,heading:"Newsletters",type:"thumbnailContent",items:[{title:"The Cooking Newsletter",description:"New recipes, easy dinner ideas and smart kitchen tips from Melissa Clark, Sam Sifton and our New York Times Cooking editors.",link:"https://www.nytimes.com/newsletters/cooking",thumbnailImage:l.a},{title:"The Veggie",description:"Delicious vegetarian recipes and tips from Tanya Sichynsky.",link:"https://www.nytimes.com/newsletters/the-veggie",thumbnailImage:w.a}]},{columnWidth:4,heading:"Newsletters",hideHeading:!0,type:"thumbnailContent",footer:{copy:"See all newsletters",link:"https://www.nytimes.com/newsletters"},items:[{title:"Five Weeknight Dishes",description:"Dinner ideas for busy people from Emily Weinstein.",link:"https://www.nytimes.com/newsletters/five-weeknight-dishes",thumbnailImage:d.a}]}]},{url:"https://www.nytimes.com/wirecutter/",name:"Wirecutter",productType:"standalone",dropdown:[{columnWidth:1},{columnWidth:4,heading:"Wirecutter",type:"brand",link:"https://www.nytimes.com/wirecutter",description:"Reviews and recommendations for thousands of products."},{columnWidth:3,heading:"Reviews",type:"links",links:[{copy:"Kitchen",link:"https://www.nytimes.com/wirecutter/kitchen-dining/"},{copy:"Tech",link:"https://www.nytimes.com/wirecutter/electronics/"},{copy:"Sleep",link:"https://www.nytimes.com/wirecutter/sleep/"},{copy:"Appliances",link:"https://www.nytimes.com/wirecutter/appliances/"},{copy:"Home and Garden",link:"https://www.nytimes.com/wirecutter/home-garden/"},{copy:"Moving",link:"https://www.nytimes.com/wirecutter/make-a-plan/moving/"}]},{columnWidth:3,heading:"Reviews",hideHeading:!0,type:"links",links:[{copy:"Travel",link:"https://www.nytimes.com/wirecutter/travel/"},{copy:"Gifts",link:"https://www.nytimes.com/wirecutter/gifts/"},{copy:"Deals",link:"https://www.nytimes.com/wirecutter/deals/"},{copy:"Baby and Kid",link:"https://www.nytimes.com/wirecutter/baby-kid/"},{copy:"Health and Fitness",link:"https://www.nytimes.com/wirecutter/health-fitness/"}]},{columnWidth:4,heading:"The Best...",type:"links",links:[{copy:"Air Purifier",link:"https://www.nytimes.com/wirecutter/reviews/best-air-purifier/"},{copy:"Electric Toothbrush",link:"https://www.nytimes.com/wirecutter/reviews/best-electric-toothbrush/"},{copy:"Pressure Washer",link:"https://www.nytimes.com/wirecutter/reviews/best-pressure-washer/"},{copy:"Cordless Stick Vacuum",link:"https://www.nytimes.com/wirecutter/reviews/best-cordless-stick-vacuum/"},{copy:"Office Chair",link:"https://www.nytimes.com/wirecutter/reviews/best-office-chair/"},{copy:"Robot Vacuum",link:"https://www.nytimes.com/wirecutter/reviews/best-robot-vacuum/"}]},{columnWidth:4,heading:"Newsletters",footer:{copy:"See all newsletters",link:"https://www.nytimes.com/newsletters"},type:"thumbnailContent",items:[{title:"The Recommendation",description:"The best independent reviews, expert advice and intensively researched deals.",link:"https://www.nytimes.com/newsletters/the-recommendation",thumbnailImage:b.a},{title:"Clean Everything",description:"Step-by-step advice on how to keep everything in your home squeaky clean.",link:"https://www.nytimes.com/newsletters/clean-everything",thumbnailImage:s.a}]}]},{url:"https://www.nytimes.com/athletic/",name:"The Athletic",productType:"standalone",dropdown:[{columnWidth:1},{columnWidth:4,heading:"The Athletic",type:"brand",link:"https://www.nytimes.com/athletic/",description:"Personalized coverage of your sports teams and leagues."},{columnWidth:3,hamburgerColumnWidth:5,heading:"Leagues",type:"links",innerGridColumnCount:2,columns:[[{copy:"NFL",link:"https://www.nytimes.com/athletic/nfl/"},{copy:"MLB",link:"https://www.nytimes.com/athletic/mlb/"},{copy:"NBA",link:"https://www.nytimes.com/athletic/nba/"},{copy:"Premier League",link:"https://www.nytimes.com/athletic/football/premier-league/"},{copy:"NCAAF",link:"https://www.nytimes.com/athletic/college-football/"},{copy:"NCAAM",link:"https://www.nytimes.com/athletic/college-basketball/"},{copy:"NHL",link:"https://www.nytimes.com/athletic/nhl/"}],[{copy:"NCAAW",link:"https://www.nytimes.com/athletic/womens-college-basketball/ "},{copy:"MLS",link:"https://www.nytimes.com/athletic/football/mls/"},{copy:"Tennis",link:"https://www.nytimes.com/athletic/tennis/"},{copy:"NWSL",link:"https://www.nytimes.com/athletic/football/nwsl/"},{copy:"Golf",link:"https://www.nytimes.com/athletic/golf/"}]]},{columnWidth:3,heading:"Top Stories",type:"links",links:[{copy:"European Championship",link:"https://www.nytimes.com/athletic/football/european-championship/"},{copy:"Copa America",link:"https://www.nytimes.com/athletic/football/copa-america/"},{copy:"MLB Standings",link:"https://www.nytimes.com/athletic/mlb/standings/"},{copy:"Olympics",link:"https://www.nytimes.com/athletic/olympics/"}]},{columnWidth:4,heading:"Newsletters",type:"thumbnailContent",items:[{title:"The Pulse",description:"Delivering the top stories in sports, Sunday to Friday.",link:"https://www.nytimes.com/athletic/newsletters/the-pulse/",thumbnailImage:h.a},{title:"Scoop City",description:"The top stories in the NFL, from Jacob Robinson with Dianna Russini.",link:"https://www.nytimes.com/athletic/newsletters/scoop-city/",thumbnailImage:O.a}]},{columnWidth:4,type:"thumbnailContent",heading:"Newsletters",hideHeading:!0,items:[{title:"The Windup",description:"The biggest stories in baseball, by Levi Weaver with Ken Rosenthal.",link:"https://www.nytimes.com/athletic/newsletters/the-windup/",thumbnailImage:T.a},{title:"The Athletic FC",description:"Renowned soccer writer Phil Hay's daily newsletter unpacks the truth behind the game's biggest stories.",link:"https://www.nytimes.com/athletic/newsletters/the-athletic-fc/",thumbnailImage:p.a}]}]}],M=function(e){var t=e.children;return a.a.Children.only(a.a.cloneElement(t,{data:I}))}},KYDV:function(e,t,n){"use strict";var i=n("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.moduleBodyTextClass=t.learnMoreLinkClass=t.inlineTrustModuleClass=t.explainerTextClass=t.bylineClass=void 0;var a=n("Jqp9"),o=i(n("wXC7")),r=n("3sMT");t.inlineTrustModuleClass=(0,a.css)("max-width:600px;width:calc(100% - 40px);margin:",o.default.breakpoint.desktopStorylineMargins,";",o.default.breakpoint.mediumLarge,"{width:600px;}height:auto;margin-left:auto;margin-right:auto;font-family:",o.default.font.franklin,";color:",r.color.content.secondary,";border-top:1px solid ",r.color.stroke.quaternary,";border-bottom:1px solid ",r.color.stroke.quaternary,";padding-top:20px;padding-bottom:20px;"),t.moduleBodyTextClass=(0,a.css)("font-family:",o.default.font.franklinBase,";font-weight:",o.default.font.weight.medium,";font-size:",o.default.font.size(17),";line-height:",o.default.font.size(24),";",o.default.breakpoint.small,"{font-size:",o.default.font.size(16),";line-height:",o.default.font.size(22),";}"),t.explainerTextClass=(0,a.css)("font-size:",o.default.font.size(17),";font-weight:",o.default.font.weight.light,";line-height:",o.default.font.size(25),";em{font-style:italic;}strong{font-weight:",o.default.font.weight.mediumBold,";}a,a:visited{font-weight:",o.default.font.weight.medium,";color:",r.color.content.secondary,";}a:hover{text-decoration:underline;}"),t.learnMoreLinkClass=(0,a.css)("margin-top:15px;margin-bottom:9px;",o.default.breakpoint.small,"{font-size:",o.default.font.size(14),";margin-top:15px;margin-bottom:10px;}a{color:",r.color.signal.editorial,";text-decoration:underline;font-weight:",o.default.font.weight.medium,";font-size:",o.default.font.size(16),";",o.default.breakpoint.small,"{font-size:",o.default.font.size(13),";}}a:hover{text-decoration:none;}"),t.bylineClass=(0,a.css)("margin-bottom:10px;display:flex;align-items:center;font-size:",o.default.font.size(14),";line-height:",o.default.font.size(18),";img{width:40px;height:40px;margin-right:10px;}")},Kn2l:function(e,t,n){"use strict";var i=n("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.RelatedLinks=void 0,Object.defineProperty(t,"RelatedLinksDescription",{enumerable:!0,get:function(){return s.RelatedLinksDescription}}),Object.defineProperty(t,"RelatedLinksHeadline",{enumerable:!0,get:function(){return s.RelatedLinksHeadline}}),t.default=void 0;var a=i(n("q1tI")),o=(i(n("17x9")),i(n("OB6K"))),r=i(n("Mqhu")),s=n("hFCc"),l=t.RelatedLinks=function(e){var t=e.children,n=e.related,i=e.displayStyle,l=e.className,c=a.default.Children.toArray(t).length>0,u=(null==n?void 0:n.length)||0,d=u>0;return a.default.createElement(o.default,{theme:{displayStyle:i.toLowerCase()}},a.default.createElement(s.StyledRelatedLinks,{displayStyle:i.toLowerCase(),className:l,hasChildren:c,hasLinks:d},t,n&&u>0&&a.default.createElement(r.default.Provider,{value:u},a.default.createElement(s.RelatedLinksSeries,{hasHeadlineorDescription:c},n))))};l.displayName="RelatedLinks",l.defaultProps={children:null,related:null,displayStyle:"STANDARD",className:void 0};t.default=l},Kpeq:function(e,t,n){"use strict";var i=n("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){return function(t,n){return function(e,t,n){var i=e.text;return(e.formats||[]).forEach((function(e){i=(0,a.default)(e,i,t,n)})),i}(t,n,e)}};var a=i(n("q94/"))},KzWH:function(e,t,n){"use strict";n.d(t,"c",(function(){return u})),n.d(t,"a",(function(){return d})),n.d(t,"d",(function(){return p})),n.d(t,"b",(function(){return f}));var i=n("Jqp9"),a=n("3sMT"),o=n("nxVm"),r=n.n(o),s=n("wXC7"),l=n.n(s),c=n("jOYC"),u=Object(i.css)("margin-top:35px;margin-bottom:25px;&:last-child{margin-bottom:0;}"),d=Object(i.css)("margin:0 ",c.b.grid.pageMargin," 1rem;",l.a.breakpoint.small,"{margin-left:auto;margin-right:auto;}",r.a,";"),p=Object(i.css)("text-align:right;direction:rtl;unicode-bidi:isolate;"),f=function(e){return Object(i.css)("border-top:1px solid ",e?a.color.stroke.primary:a.color.stroke.quaternary,";padding-top:1.25rem;margin-top:1.25rem;")}},"L+PM":function(e,t,n){"use strict";var i=n("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.roleTreatmentStyles=t.roleContainerClass=t.RoleText=void 0;var a=n("Jqp9"),o=i(n("wXC7")),r=i(n("WThh")),s=n("f/4F"),l=n("3sMT"),c=(0,r.default)(["medium"]),u=(t.roleContainerClass=(0,a.css)("width:100%;"),(0,a.themeFn)("opinionHeaderRedesign",{true:(0,a.css)(s.headshotDesktopBreakpoint,"{font-size:",o.default.font.size(15),";line-height:",o.default.font.size(20),";}")})),d=t.roleTreatmentStyles=(0,a.themeFn)("treatment",{none:function(e){return(0,a.css)("font-family:",o.default.font.franklinBase,";font-weight:",o.default.font.weight.medium,";letter-spacing:0.01em;margin-bottom:",o.default.font.size(8),";margin-top:",o.default.font.size(2),";",c(e,{fontSize:[14,15],lineHeight:[18,20]}),";")},feature:function(e){return(0,a.css)("font-family:",o.default.font.franklinBase,";font-weight:",o.default.font.weight.medium,";letter-spacing:0.01em;margin-top:",o.default.font.size(2),";margin-bottom:",o.default.font.size(8),";",c(e,{fontSize:[14,15],lineHeight:[18,20]}),";")},opinion:function(e){return(0,a.css)("font-family:",o.default.font.franklinBase,";font-weight:",o.default.font.weight.medium,";font-style:normal;margin-bottom:",o.default.font.size(3),";",c(e,{fontSize:[13,15],lineHeight:[16,20]}),";")},magazine:function(e){return(0,a.css)("font-family:",o.default.font.magazineSansBase,";font-weight:",o.default.font.weight.medium,";margin-bottom:",o.default.font.size(8),";",c(e,{fontSize:[14,15],lineHeight:[18,20]}),";")},"t-magazine":function(e){return(0,a.css)("font-family:",o.default.font.tmagSansBase,";font-weight:",o.default.font.weight.book,";color:",l.color.content.secondary,";margin-bottom:",o.default.font.size(8),";margin-top:",o.default.font.size(2),";",c(e,{fontSize:[14,15],lineHeight:[18,20]}),";")}}),p=(0,a.themeFn)("isShortForm",{true:(0,a.css)("{margin-top:0;margin-bottom:0.25rem;}")});t.RoleText=(0,a.styled)("p",{target:"e1wtpvyy0"})("color:",l.color.content.secondary,";",d,";",u,";",p,";",(function(e){return!e.theme.opinionHeaderRedesign&&"margin: 2px 0;"}),";",(function(e){return!e.theme.opinionHeaderRedesign&&"max-width: 483px;"}),";a,a:visited{color:",l.color.content.secondary,";text-decoration:underline;text-decoration-color:",l.color.content.quaternary,";}a:hover,a:focus{color:",l.color.content.secondary,";text-decoration:none;}")},L0Nc:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;t.default=function(e){return!isNaN(parseFloat(e))&&isFinite(e)}},L1jB:function(e,t,n){"use strict";var i=n("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.syntheticNarrationContainerClass=t.syntheticAudioActionClass=t.responsiveCenteringClass=t.readTimeClass=t.getTimestampContainerClass=t.extraSpacingClass=t.default=t.audioContainerClass=t.LabelContainer=void 0;var a=n("Jqp9"),o=i(n("wXC7")),r=i(n("WThh")),s=i(n("i+0r")),l=i(n("TvEp")),c=i(n("oKgi")),u=i(n("h58Z")),d=i(n("I0Yx")),p=n("FZbM"),f=n("SJcc"),m=i(n("HvhO")),h=n("0Rhs"),g=n("9tMe"),y=n("f/4F"),v=n("3sMT"),b=(0,r.default)(["medium"]),_=(t.syntheticNarrationContainerClass=(0,a.css)(o.default.breakpoint.small,"{display:flex;margin-bottom:25px;padding-bottom:20px;gap:2%;flex-direction:row;border-bottom:1px solid ",v.color.stroke.quaternary,";",o.default.breakpoint.small,"{border-top:1px solid ",v.color.stroke.quaternary,";padding-top:20px;padding-bottom:0;border-bottom:none;}}"),t.syntheticAudioActionClass=(0,a.css)("flex:54%;margin-left:0;margin-top:20px;width:100%;",o.default.breakpoint.small,"{margin-left:0;margin-top:0;}"),t.audioContainerClass=(0,a.css)("display:flex;flex:48%;","@media (max-width: 424px)","{margin-left:-9px;}"),t.extraSpacingClass=(0,a.css)("padding-bottom:5px;margin-bottom:15px;",o.default.breakpoint.small,"{padding-bottom:0;margin-bottom:0;}"),t.responsiveCenteringClass=(0,a.css)("margin-left:20px;margin-right:20px;width:calc(100% - 40px);max-width:600px;",o.default.breakpoint.small,"{margin-left:auto;margin-right:auto;}",o.default.breakpoint.medium,"{width:600px;}",o.default.print,";")),w=(t.readTimeClass=function(e){return(0,a.css)("margin-left:","opinion"===e.theme.section?"10px":"auto",";min-width:80px;text-align:","opinion"===e.theme.section?"left":"right",";font-size:",o.default.font.size(11),";margin-top:0;")},(0,a.themeFn)("section",{opinion:(0,a.themeFn)("opinionHeaderRedesign",{true:(0,a.css)("justify-content:center;")})})),x=(t.getTimestampContainerClass=function(e){return(0,a.css)(_,";display:flex;align-items:flex-end;margin-top:",o.default.font.size(4),";justify-content:space-between;margin-bottom:","opinion"===e.theme.section&&e.theme.opinionHeaderRedesign?o.default.font.size(28):o.default.headerSpacing.bottom,";",o.default.breakpoint.medium,"{margin-bottom:","opinion"===e.theme.section&&e.theme.opinionHeaderRedesign?o.default.font.size(32):o.default.headerSpacing.bottom,";}",w(e),";")},(0,a.themeFn)("section",{opinion:(0,a.themeFn)("opinionHeaderRedesign",{true:(0,a.css)("::before,::after{content:'';display:block;background-color:",v.color.background.tertiary,";width:100%;height:1px;}::before{margin-bottom:",o.default.font.size(8),";}::after{margin-top:",o.default.font.size(8),";}",o.default.breakpoint.mediumLarge,"{::before{margin-bottom:",o.default.font.size(y.headshotSpaceBetween),";}::after{margin-top:",o.default.font.size(y.headshotSpaceBetween),";}}")})})),k=(t.LabelContainer=(0,a.styled)("div",{target:"euiyums0"})("align-items:center;display:flex;margin-bottom:",(function(e){return"opinion"===e.theme.section&&e.theme.opinionHeaderRedesign?0:o.default.headerSpacing.bottom}),";",_,";",s.default,"{",o.default.print,";margin-bottom:0;}&:empty{display:none;}"),function(e){return(null==(t=e)||null===(n=t.theme)||void 0===n||null===(i=n.media)||void 0===i||null===(a=i.props)||void 0===a||null===(o=a.data)||void 0===o?void 0:o.media)||function(e){var t,n,i,a;return(null==e||null===(t=e.theme)||void 0===t||null===(n=t.summary)||void 0===n||null===(i=n.props)||void 0===i||null===(a=i.children)||void 0===a?void 0:a.length)>0}(e)?"margin-bottom: 0.5rem":"margin-bottom: 1.25rem";var t,n,i,a,o}),O=(0,a.themeFn)("section",{none:k,opinion:(0,a.themeFn)("opinionHeaderRedesign",{none:k,true:(0,a.css)("margin-bottom:",o.default.font.size(18),";text-align:center;::before{content:'';display:block;margin:",o.default.font.size(12)," auto ",o.default.font.size(28),";background-color:",v.color.background.tertiary,";width:",o.default.font.size(72),";height:1px;}")})}),T=(0,a.themeFn)("isShortForm",{true:(0,a.css)("{font-style:normal;margin-bottom:1rem;}")}),C=(0,a.themeFn)("section",{opinion:(0,a.themeFn)("opinionHeaderRedesign",{none:(0,a.css)("color:",v.color.content.primary,";font-weight:",o.default.font.weight.bold,";line-height:",o.default.font.size(12),";"),true:function(e){return(0,a.css)("margin:0 auto;",(0,g.opinionLogoTypographyFn)(e),";text-align:center;")}})}),E=(0,a.themeFn)("treatment",{none:(0,a.css)("color:",v.color.content.secondary,";"),feature:function(e){return(0,a.css)("color:",v.color.content.secondary,";",b(e,{textAlign:"rightToLeft"===e.theme.languageDirection?["right"]:[void 0,"left"]}),";")}}),S=(0,a.themeFn)("section",{opinion:(0,a.themeFn)("opinionHeaderRedesign",{true:(0,a.css)("text-align:center;")})}),P=(0,a.styled)("header",{target:"euiyums1"})("margin-bottom:",o.default.headerSpacing.bottom,";",o.default.headerSpacing.marginTop,";",h.headerLanguageDirectionFn,";",s.default,"{",h.labelTreatmentFn,";",C,";",o.default.print,";}",l.default,"{",O,";",h.heading1TreatmentFn,";",T,";",h.heading1LanguageDirectionFn,";",_,";margin-top:0;",o.default.breakpoint.medium,"{max-width:none;margin-left:auto;margin-right:auto;position:relative;width:600px;",o.default.print,";}}",c.default,"{",E,";",S,";",h.summaryLanguageDirectionFn," ",_,";",o.default.print,";}",u.default,"{display:inline-block;width:auto;",(function(e){return"opinion"===e.theme.section&&e.theme.opinionHeaderRedesign?(0,a.css)("margin:auto;"):(0,a.css)("margin-left:0;margin-top:0;margin-bottom:0;")}),"}",d.default,"{margin-right:15px;font-weight:",o.default.font.weight.bold,";font-size:14px;line-height:1;}.section-kicker{.opinion-bar{font-size:25px;}}.",f.totalBylineContainerClass,"{",_,";",x,";margin-top:0;margin-bottom:0;",(function(e){return"opinion"===e.theme.section?"margin: 30px auto;":null}),";}",m.default,"{margin-bottom:30px;margin-top:20px;",o.default.breakpoint.medium,"{margin-top:25px;}",o.default.breakpoint.mediumLarge,"{margin-bottom:43px;}}.",p.translationLinksClass,"{",_,";max-width:",o.default.breakpoint.textBodyWidth,"px;",o.default.printHide,";}",h.BylineTimestamp,"{margin-bottom:",o.default.grid.pageMargin,"px;color:",v.color.content.primary,";",o.default.print,";",h.bylineTimestampToneFn,";",h.bylineTimestampSectionFn,";",h.bylineTimestampLanguageDirectionFn,";}");t.default=P},LON6:function(e,t,n){"use strict";n.d(t,"b",(function(){return P}));var i=n("VkAN"),a=n.n(i),o=n("lSNA"),r=n.n(o),s=n("gcR/"),l=n.n(s),c=n("q1tI"),u=n.n(c),d=n("eFc+"),p=n.n(d),f=n("Jqp9"),m=n("Zc/f"),h=n.n(m),g=n("uVKy"),y=n.n(g),v=n("ZKN5"),b=n("YWmT"),_=n("4KZX"),w=n("sn4R"),x=n("J4zp"),k=n.n(x),O=n("hKI/"),T=n.n(O);var C,E=function(){var e=Object(c.useState)(!1),t=k()(e,2),n=t[0],i=t[1];return Object(c.useEffect)((function(){var e=T()((function(){i(Boolean(window.scrollY))}),1e3,{leading:!0});return window.addEventListener("scroll",e),function(){window.removeEventListener("scroll",e)}}),[]),n},S=n("IHYJ");function P(e){var t,n,i,a,o=null==e||null===(t=e.associatedAssets)||void 0===t||null===(n=t.some)||void 0===n?void 0:n.call(t,(function(e){return(null==e?void 0:e.region)===h.a.TOP_BANNER})),r=Object(g.canStorylineComposeMenu)(null==e||null===(i=e.storylines)||void 0===i||null===(a=i[0])||void 0===a?void 0:a.storyline);return!o&&r}function I(e){var t,n=e.storyline,i=e.uriOfActiveMenuLink,a=e.className,o=e.testName,s=e.ruleName,c=e.pageType,d=e.parentUri,p=e.region,m=e.storylineMenuBlockRef,h=e.isInBarOneTest,g=e.isLiveRoute,v=E();return u.a.createElement(u.a.Fragment,null,!h&&l()("style",{dangerouslySetInnerHTML:{__html:"#masthead-section-label, #masthead-bar-one { display: none }"}}),l()(b.a,{componentName:"menu",region:p,parentUri:d,testName:o,ruleName:s,pageType:c},void 0,(function(e){var o=e.trackImpression,u=e.trackInteraction;return l()(y.a,{className:Object(f.cx)(S.f,r()({},S.d,v),a),storyline:n,ruleName:s,uriOfActiveMenuLink:i,trackEvent:o,trackInteraction:u,storylineMenuBlockRef:m,isLiveRoute:g,HomepageLink:t||(t=l()(w.a,{region:p,parentUri:d,ruleName:s,pageType:c}))},o)})),l()(_.a,{isInlineModule:!1,uri:null==n?void 0:n.uri,name:"menu"}))}I.defaultProps={testName:null,className:void 0,storylineMenuBlockRef:null,isInBarOneTest:!1,isLiveRoute:!1},I.fragments={creativeWork:p()(C||(C=a()(["\n    fragment StorylineMenuBlock_creativeWork on CreativeWork {\n      storylines {\n        testName\n        ruleName\n        storyline {\n          uri\n          url\n          tone\n          displayName\n          hubAssets {\n            asset {\n              ...Asset_storyline\n            }\n          }\n          primaryAssets {\n            displayName\n            status\n            asset {\n              ...Asset_storyline\n              ... on LegacyCollection {\n                id\n                active\n                lastModified\n              }\n              ... on FeedPublication {\n                id\n                live\n              }\n            }\n          }\n        }\n      }\n      ...Asset_storyline\n    }\n\n    fragment Asset_storyline on CreativeWork {\n      ... on Published {\n        uri\n        url\n      }\n    }\n  "])))};var M=Object(v.a)(I);t.a=M},LOnR:function(e,t,n){"use strict";var i=n("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.textBalancerClass=void 0;var a=n("Jqp9"),o=i(n("wXC7"));t.textBalancerClass=(0,a.css)("display:block;",o.default.breakpoint.mediumLarge,"{display:inline-block;white-space:pre;}")},LWxt:function(e,t,n){"use strict";t.a="/vi-assets/static-assets/theMini-6334c6cbfe00787aa569dbbdc822b525.png"},LXPD:function(e,t,n){"use strict";var i=n("VkAN"),a=n.n(i),o=n("lSNA"),r=n.n(o),s=n("gcR/"),l=n.n(s),c=n("J4zp"),u=n.n(c),d=n("q1tI"),p=n.n(d),f=n("Jqp9"),m=n("eFc+"),h=n.n(m),g=n("NQ6n"),y=n("Cevq"),v=n("Ck0P"),b=n("JJ2H"),_=n("hbBX"),w=n("KG2r"),x=n("NW2b"),k=n("tOSR"),O=n("8iTF"),T=n("SYzA"),C=n("4uw1"),E=n("fZdH"),S=n("Tonn"),P=n("udJG"),I=n("bLUX"),M=n("WPRB"),A=n("X6oL"),j=n("9/5/"),N=n.n(j),L=n("PCFz"),D=n("/tu1"),R=n("wXC7"),B=n.n(R),z="@media (max-width: ".concat(B.a.breakpoint.maxMobileContentWidth,"px)"),F=Object(f.css)("background-color:",B.a.color.white,";border:solid 1px #dfdfdf;border-radius:17px;display:none;font-family:",B.a.font.franklinBase,";font-size:12px;height:34px;letter-spacing:0.2px;line-height:1;padding:5px 0 3px;position:relative;top:-1px;width:82px;",z,"{width:76px;}&:hover{border-color:",B.a.color.gray50,";}@media (hover:none) and (pointer:coarse) and (max-width:600px) and (min-width:375px){display:inline-block;}"),U=n("+g8y");function H(e){var t=e.shareItemClass,n=e.url,i=Object(A.useTracking)().trackEvent,a=Object(d.useRef)(null),o=Object(d.useState)(!1),r=u()(o,2),s=r[0],c=r[1];return Object(d.useEffect)((function(){var e=function(){a.current&&a.current.offsetTop<window.pageYOffset+window.innerHeight&&!s&&(i({event:"impression",module:{name:"readinapp-tooltip"}}),c(!0))},t=N()((function(){e(),window.removeEventListener("scroll",t)}),500);return window.addEventListener("scroll",t),function(){window.removeEventListener("scroll",t)}}),[s,i]),l()("li",{className:Object(f.cx)(U.i,t)},void 0,p.a.createElement(L.a,{ref:a,redirectUri:Object(D.d)(n),className:F,trackingObject:{eventData:{type:"click"},module:{name:"readinapp-tooltip",element:{name:"goto-app",label:"Read in app",url:n}}}},"Read in app"))}H.displayName="ReadInApp";var W,q=H,V=n("2PZ4"),G="Social Media Share buttons, Save button, and Comments Panel with current comment count",Y=["1_Headshot","2_Blue"];function X(e){var t,n,i,a,o=e.share,s=e.className,c=e.pageType,m=void 0===c?"article":c,h=e.overrideAriaLabel,A=e.modalArrowPosition,j=e.position,N=e.forceArrowPosition,L=e.tooltipAlign,D=e.suppressGiftArticleTooltip,R=e.hasMedia,B=e.isOpinion,z=e.commentsComponent,F=e.disabledButtons,H=void 0===F?[]:F,W=e.linkedCommentsArticle,X=e.hasSyntheticAudio,Z=Object(d.useRef)(null),J=o.url,K=o.uri,$=Object(d.useState)(!1),Q=u()($,2),ee=Q[0],te=Q[1],ne=Object(d.useState)(!1),ie=u()(ne,2),ae=ie[0],oe=ie[1],re=Object(f.useTheme)(),se=Object(T.a)(),le=Object(C.a)(),ce=Object(P.b)({article:o}),ue=ce.readyAppDownloadTarget,de=ce.inAppDownloadTarget,pe=Object(E.a)(),fe=Object(d.useCallback)((function(e){!e||ee||ae||(te(!0),oe(!0)),!e&&ee&&te(!1),!e&&ae&&oe(!1)}),[ee,ae]),me="Article"===(null==o?void 0:o.__typename),he="header";j===M.a.INSTORYMASTHEAD?he="masthead":j===M.a.FOOTER&&(he="footer");var ge=pe&&(null==pe||null===(t=pe.SP_RepReplyV2_0624)||void 0===t?void 0:t.allocated)&&(null==pe||null===(n=pe.SP_RepReplyV2_0624)||void 0===n?void 0:n.variant)&&Y.includes(null==pe||null===(i=pe.SP_RepReplyV2_0624)||void 0===i?void 0:i.variant),ye=W||o,ve=void 0!==R||void 0!==B?U.d(R,B,re.opinionHeaderRedesign,re.isShortForm):void 0,be=Object(O.g)(null==ye||null===(a=ye.commentProperties)||void 0===a?void 0:a.status)&&!H.includes("commennts");if(Object(S.a)(se,J)||le)return null;var _e,we=!H.includes("gift"),xe=function(e){var t="bigBottom"!==e?M.b:void 0,n=e||j||M.a.HEADER;return z?p.a.isValidElement(z)?p.a.cloneElement(z,{position:n,buttonClass:t}):null:l()(b.b,{buttonClass:t,article:ye,viewCommentsInNewWindow:!!W,position:n})},ke={actionBarTheme:re.actionBarTheme,dropShadow:re.actionBarDropShadow},Oe=H.length>=1&&!h,Te=h||G,Ce=Object(I.b)(pe),Ee=Ce.isUnlimitedGiftTestVariant;if(Ce.isInUnlimitedTest&&we){var Se=function(){Object(x.e)(M.g.name)};_e=Ee?l()(v.a,{share:o,pageType:m,trackingRegion:he,renderAsNormalShareMenu:!0,renderGiftButton:!0,toggleGiftArticleMenu:fe,fireOnRender:Se}):l()(w.b,{share:o,pageType:m,toggleGiftArticleMenu:fe,trackingRegion:he,renderGiftButton:we,fireOnRender:Se})}return p.a.createElement("div",{role:Oe?void 0:"toolbar","data-testid":"share-tools",ref:Z,"aria-label":Oe?void 0:String(Te),className:U.n(ke)},j===M.a.FOOTER&&l()("div",{className:Object(f.cx)(U.k,U.b,U.a)},void 0,xe("bigBottom")),l()("div",{className:Object(f.cx)(U.k,ve,s,r()(r()(r()({},U.b,j===M.a.FOOTER),U.f,"rightToLeft"===(null==re?void 0:re.languageDirection)),U.m,X))},void 0,l()("ul",{className:j!==M.a.INSTORYMASTHEAD?U.l:void 0},void 0,we&&l()("li",{className:Object(f.cx)(U.i,U.j)},void 0,l()(y.a,{pageType:m,share:o,tooltipAlign:L,forceOpen:ae,toggleGiftArticleMenu:fe,suppressGiftArticleTooltip:D,trackingRegion:he})),!H.includes("share")&&l()("li",{className:U.i},void 0,l()(g.b,{buttonContent:l()(V.b,{className:Object(f.cx)(U.h,U.c)}),loadingButtonContent:void 0,pageType:m,share:o,modalArrowPosition:A,forceArrowPosition:N,toggleGiftArticleMenu:we?fe:void 0,forceCloseModal:ee,className:Object(f.cx)(U.e,M.b),trackingRegion:he,hasGiftArticleButtonSibling:we,stroke:void 0,fill:void 0,buttonHoverClass:void 0,isGiftArticle:void 0,handleOpen:void 0,mediaTitle:void 0,modalContent:_e,setAriaLabel:void 0,ariaDescribedBy:void 0,suppressForcedFocus:void 0,forceOpen:void 0,giftLinksRemainingCount:void 0,forcePopOver:void 0,menuDefaultHeight:void 0,dataTestid:void 0,forcePointerAlignment:void 0,alignAdjust:void 0,isCarouselButton:void 0,handleClose:void 0,setUpModalStyles:void 0})),!H.includes("save")&&l()("li",{className:Object(f.cx)(U.i,"save-button")},void 0,l()(_.a,{url:o.url,uri:K,moduleName:"share-tools",buttonRegion:he},void 0,l()(k.a,{svgStyleClass:U.g,buttonClass:M.b}))),be&&l()("li",{className:Object(f.cx)(U.i,"commentAdjustClass")},void 0,xe(j||M.a.HEADER)),j!==M.a.INSTORYMASTHEAD&&!ge&&me&&ue&&!de&&l()(q,{shareItemClass:Object(f.cx)(U.i),url:J}))))}X.displayName="ActionBar",X.fragments={share:h()(W||(W=a()(["\n    fragment ShareToolbar_share on CreativeWork {\n      headline {\n        default\n      }\n      summary\n      ... on Published {\n        url\n      }\n      commentProperties {\n        status\n      }\n      ...ShareButton_share\n      ...CommentCountContainer_article\n    }\n    ","\n    ","\n  "])),g.b.fragments.share,b.b.fragments.article)};t.a=X},LbdL:function(e,t,n){"use strict";var i=n("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.OnsiteHeadline=void 0;var a=i(n("q1tI")),o=i(n("XlcC")),r=i(n("fpec")),s=n("V6Yu"),l=(n("EVBM"),n("AhCu")),c=t.OnsiteHeadline=function(e){var t=e.headline;if(!(0,s.hasContent)(t)||!t)return null;var n=t.content.map(o.default);return a.default.createElement("span",{className:l.headingClass},a.default.createElement("span",{id:"header-onsite-newsletter-headline"},a.default.createElement(r.default,{hangPunctuation:!0,content:t.content},n)))};c.displayName="OnsiteHeadline";t.default=c},Lk5R:function(e,t,n){"use strict";var i=n("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=i(n("dp42"));t.default=a.default},Lkij:function(e,t,n){"use strict";n.d(t,"a",(function(){return r})),n.d(t,"b",(function(){return s}));var i=n("NW2b"),a=function(e){var t,n,i,a,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",r=o?"Test: ".concat(o," - "):"";"dev"!==(null===(t=vi)||void 0===t||null===(n=t.env)||void 0===n?void 0:n.ENVIRONMENT)&&"local"!==(null===(i=vi)||void 0===i||null===(a=i.env)||void 0===a?void 0:a.ENVIRONMENT)||console.warn("".concat(r,"The function '").concat(e,"' is deprecated.  Please see src/shared/Abra/README.md for details."))};function o(){var e,t;return Boolean(null===(e=window)||void 0===e||null===(t=e.NYTD)||void 0===t?void 0:t.Abra.getAbraSync)}function r(e,t){var n,i;return a("isInVariant",e),(o()&&(null===(n=window)||void 0===n||null===(i=n.NYTD)||void 0===i?void 0:i.Abra.getAbraSync(e).variant))===t}function s(e){return a("reportExposure",e),!!o()&&(Object(i.e)(e),!0)}},M4W2:function(e,t,n){"use strict";var i=n("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=i(n("lSNA"));function o(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function r(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?o(Object(n),!0).forEach((function(t){(0,a.default)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):o(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}t.default=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return new Promise((function(n,i){var a=function(e){return e.addEventListener("load",(function(){e.dataset.loaded=!0,n(e)})),e.addEventListener("error",(function(t){e.dataset.loaded=!0,e.dataset.error=!0,i(t)})),e},o=document.querySelector('script[src="'.concat(e,'"]'));if(o)return o.dataset.loaded?o.dataset.error?i():n(o):a(o);if(t.readyCode&&window[t.readyCode]&&("function"!=typeof window[t.readyCode]||!1!==window[t.readyCode]()))return n();var s=r({asyncProp:!0,deferProp:!0},t),l=s.asyncProp,c=s.deferProp,u=document.createElement("script");return u.src=e,u.async=l,u.defer=c,document.body.appendChild(u),a(u)}))}},M5Mg:function(e,t,n){"use strict";var i,a=n("gcR/"),o=n.n(a),r=n("J4zp"),s=n.n(r),l=n("q1tI"),c=n.n(l),u=n("Jqp9"),d=n("3sMT"),p=n("wXC7"),f=n.n(p),m=Object(u.css)("position:relative;height:0;"),h=Object(u.css)("z-index:10000;position:relative;width:100%;height:0;background-color:",d.dark.colors.background.primary.hex,";overflow:hidden;opacity:1;transition-delay:250ms;&.is-not-loading{opacity:0;}&.is-transition-done{display:none;}"),g=Object(u.css)("filter:blur(10px) brightness(80%);position:absolute;width:100%;height:100%;img,video{object-fit:cover;width:100%;height:100%;transform:scale(1.1);}"),y=Object(u.css)("width:40px;height:40px;top:calc(50% - 20px);left:calc(50% - 20px);position:absolute;border-radius:50%;border:2px solid ",d.dark.colors.stroke.primary.transform(f.a.setAlpha(.2)).rgba,";",f.a.breakpoint.small,"{width:60px;height:60px;top:calc(50% - 30px);left:calc(50% - 30px);}"),v=Object(u.css)("> div{width:40px;height:40px;position:absolute;top:-2px;left:-2px;right:0;bottom:0;border-radius:50%;border:2px solid;border-color:",d.dark.colors.stroke.primary.hex," transparent transparent;animation:",Object(u.keyframes)("0%{transform:rotate(20deg);}100%{transform:rotate(380deg);}")," 1500ms cubic-bezier(0.77,0.1,0.45,0.8) infinite;",f.a.breakpoint.small,"{width:60px;height:60px;}}> div:nth-child(2){animation-delay:80ms;}"),b=Object(u.css)("position:absolute;top:0;width:100%;height:100%;");function _(e){var t=e.isLoading,n=e.aspectRatio,a=e.children,r=e.className,d=e.backgroundMedia,p=Object(l.useRef)(null),f=Object(l.useState)(!1),_=s()(f,2),w=_[0],x=_[1],k=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=(2===e.split(":").length&&e.split(":")||["16","9"]).map(Number),n=s()(t,2),i=n[0],a=n[1];return"".concat(String(a/i*100),"%")}(n);return Object(l.useEffect)((function(){p.current&&p.current.addEventListener("transitionend",(function(){x(!0)}))}),[]),o()("div",{className:r},void 0,o()("div",{className:m,style:{paddingBottom:k}},void 0,o()("div",{className:Object(u.cx)(b)},void 0,a),c.a.createElement("div",{className:Object(u.cx)(h,{"is-not-loading":!t,"is-transition-done":w&&!t}),ref:p,style:{paddingBottom:k,transition:"opacity ".concat(300,"ms ease-in-out")}},o()("div",{className:g},void 0,/\.mp4$/.test(d)?o()("video",{src:"".concat(d,"#t=0.01"),preload:"auto"}):o()("img",{src:d,alt:"Video player loading"})),i||(i=o()("div",{className:y},void 0,o()("div",{className:v},void 0,o()("div",{}),o()("div",{})))))))}_.displayName="Spinner",_.defaultProps={isLoading:!1,aspectRatio:"16:9",children:null,className:void 0};t.a=_},M8e9:function(e,t,n){"use strict";var i=n("TqRt"),a=n("cDf5");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=i(n("lSNA")),r=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=a(e)&&"function"!=typeof e)return{default:e};var n=u(t);if(n&&n.has(e))return n.get(e);var i={__proto__:null},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var r in e)if("default"!==r&&{}.hasOwnProperty.call(e,r)){var s=o?Object.getOwnPropertyDescriptor(e,r):null;s&&(s.get||s.set)?Object.defineProperty(i,r,s):i[r]=e[r]}return i.default=e,n&&n.set(e,i),i}(n("q1tI")),s=(i(n("17x9")),n("Jqp9")),l=n("7ya4"),c=n("7zGq");function u(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(u=function(e){return e?n:t})(e)}function d(e){var t=e.ariaControls,n=e.index,i=e.length,a=e.handleNavLeft,u=e.handleNavRight,d=(0,r.useRef)(null),p=(0,r.useRef)(null),f=0===n,m=n===i-1;return(0,r.useEffect)((function(){var e,t,n=document.activeElement;m&&n===(null==p?void 0:p.current)&&(null===(e=d.current)||void 0===e||e.focus());f&&n===(null==d?void 0:d.current)&&(null===(t=p.current)||void 0===t||t.focus())}),[d,p,m,f]),i<2?null:r.default.createElement("nav",{"aria-controls":t,className:l.arrowsNavClass},r.default.createElement("span",{ref:d,className:(0,s.cx)("arrow-left",l.arrowLeftClass,(0,o.default)({},l.disabledClass,0===n)),role:"button","aria-label":"Previous card","aria-disabled":0===n,onClick:a,onKeyUp:function(e){return(0,c.handleButtonPress)(e,a)},tabIndex:f?-1:0}),r.default.createElement("span",{ref:p,className:(0,s.cx)("arrow-right",l.arrowRightClass,(0,o.default)({},l.disabledClass,n===i-1)),role:"button","aria-label":"Next card","aria-disabled":n===i-1,onClick:u,onKeyUp:function(e){return(0,c.handleButtonPress)(e,u)},tabIndex:m?-1:0}))}d.displayName="ArrowNav",d.defaultProps={ariaControls:void 0};t.default=d},MEHp:function(e,t,n){"use strict";n.d(t,"b",(function(){return h})),n.d(t,"d",(function(){return y})),n.d(t,"a",(function(){return v})),n.d(t,"c",(function(){return b})),n.d(t,"e",(function(){return _}));var i=n("lSNA"),a=n.n(i);function o(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function r(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?o(Object(n),!0).forEach((function(t){a()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):o(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var s={SERIES:1,NEWS_EVENT:2,SPOTLIGHT:3,COLUMN:4,ISSUE:5},l=function(e){var t=e.items,n=void 0===t?[]:t,i=e.itemIdsToRemove,a=void 0===i?[]:i;return n&&a?n.filter((function(e){var t;return!(null!=e&&null!==(t=e.node)&&void 0!==t&&t.uri&&a.includes(e.node.uri))})):n},c=function(e){var t,n,i=e.collections,a=void 0===i?[]:i,o=e.itemId,l=a.filter((function(e){return e&&s[null==e?void 0:e.collectionType]})).map((function(e){return r(r({},e),{},{priority:s[e.collectionType]})})).sort((function(e,t){return e.priority-t.priority}))[0];return((null==l||null===(t=l.assets)||void 0===t||null===(n=t.edges)||void 0===n?void 0:n.slice(0,3).map((function(e){var t;return null==e||null===(t=e.node)||void 0===t?void 0:t.uri})).filter((function(e){return e})))||[]).concat(o)},u=function(e){var t,n=e.items,i=void 0===n?[]:n,a=e.itemIdsToRemove;return null===(t=l({items:i,itemIdsToRemove:void 0===a?[]:a}))||void 0===t?void 0:t.filter((function(e){var t;return null==e||null===(t=e.node)||void 0===t?void 0:t.promotionalMedia}))},d=function(e){var t,n,i,a,o=e.collections,r=e.recircSectionUrl,s=e.itemIdsToRemove,l=null;null!==(t=l=o.find((function(e){return e.url===r&&"SECTION"===e.collectionType})))&&void 0!==t&&t.assets||(l=o.find((function(e){return"SECTION"===e.collectionType})));var c=null!==(n=null===(i=l)||void 0===i||null===(a=i.assets)||void 0===a?void 0:a.edges)&&void 0!==n?n:[];return u({items:c,itemIdsToRemove:s})},p=function(e,t){var n=t.find((function(t){return(null==t?void 0:t.name)===(null==e?void 0:e.metadata.uri)}));return(null==n?void 0:n.name)||""},f=function(e){var t,n,i,a,o,r=e.personalizedLists,s=e.itemIdsToRemove,l=(null==r||null===(t=r.personalizedComposition)||void 0===t?void 0:t.surfaces)||[],c=(null==r||null===(n=r.personalizedComposition)||void 0===n?void 0:n.metadata)||[],d=(null===(i=l.find((function(e){return"eos-home-featured"===p(e,c)})))||void 0===i?void 0:i.edges)||[],f=(null===(a=l.find((function(e){return"eos-more-in"===p(e,c)})))||void 0===a?void 0:a.edges)||[],m=(null===(o=l.find((function(e){return"eos-most-popular-story"===p(e,c)})))||void 0===o?void 0:o.edges)||[];return{personalizedEditorsPicksItems:u({items:d,itemIdsToRemove:s}),personalizedMoreInItems:u({items:f,itemIdsToRemove:s}),personalizedTrendingItems:u({items:m,itemIdsToRemove:s})}},m=function(e,t,n){var i=l({items:e,itemIdsToRemove:t});if(i.count>=n)return i;var a=(null==i?void 0:i.map((function(e){var t;return null==e||null===(t=e.node)||void 0===t?void 0:t.uri})))||[];return i.concat(l({items:e,itemIdsToRemove:a}))},h=function(e){var t,n,i=e.article,a=e.data,o=e.savedItems,r=a||{},s=r.collections,l=r.personalizedLists,u=(null==i||null===(t=i.subsection)||void 0===t?void 0:t.url)||(null==i||null===(n=i.section)||void 0===n?void 0:n.url)||"",p=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.articleId,n=e.collections,i=void 0===n?[]:n,a=e.recircSectionUrl,o=e.personalizedLists,r=void 0===o?[]:o,s=c({collections:i,itemdId:t}),l=f({personalizedLists:r,itemIdsToRemove:s}),u=l.personalizedEditorsPicksItems,p=l.personalizedMoreInItems,m=l.personalizedTrendingItems,h=p.length>0?p:d({collections:i,recircSectionUrl:a,itemIdsToRemove:s}),g=u||[],y=m||[];return{editorsPicksItems:g,moreInItems:h,trendingItems:y}}({articleId:null==i?void 0:i.uri,collections:s,recircSectionUrl:u,personalizedLists:l}),h=p.editorsPicksItems,g=p.moreInItems,y=p.trendingItems,v=(null==o?void 0:o.map((function(e){var t;return null==e||null===(t=e.node)||void 0===t?void 0:t.uri})))||[];return{editorsPicksItems:h,moreInItems:m(g,v,1),trendingItems:m(y,v,4)}},g=function(e){return null==e?void 0:e.replace(/([-'.]|\s+)/g,"").toLowerCase()},y=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.section,n=e.subsection,i=n&&n.displayName||t&&t.displayName||"";return g(i)},v=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(null==e?void 0:e.collections.map((function(e){return e.uri})))||[]},b=function(e){var t,n,i,a=(null==e||null===(t=e.user)||void 0===t||null===(n=t.readingListAssetsConnection)||void 0===n?void 0:n.edges)||[];return{savedItem:(null==a||null===(i=a[0])||void 0===i?void 0:i.node)||null,savedItems:a}},_=function(e){var t,n=e.article,i=e.isBrowser,a=e.targeting,o=e.messageName,r=a.name,s=void 0===r?"":r,l=a.loading,c=void 0===l||l,u=a.error,d=void 0===u||u,p="Article"===(null==n?void 0:n.__typename),f=null==n||null===(t=n.compatibility)||void 0===t?void 0:t.hasInlineEmbeddedInteractives;return!c&&!d&&p&&i&&!f&&s===o}},MH66:function(e,t,n){"use strict";var i=this&&this.__makeTemplateObject||function(e,t){return Object.defineProperty?Object.defineProperty(e,"raw",{value:t}):e.raw=t,e};Object.defineProperty(t,"__esModule",{value:!0}),t.boldText=t.lineBreak=t.mainText=t.headerContainer=void 0;var a,o,r,s,l=n("Jqp9"),c=n("lVLo");t.headerContainer=(0,l.css)(a||(a=i(["\n  cursor: pointer;\n"],["\n  cursor: pointer;\n"]))),t.mainText=(0,l.css)(o||(o=i(["\n  color: #121212;\n  font-family: ",";\n  font-size: 16px;\n  line-height: 20px;\n  padding-left: 20px;\n  padding-top: 18px;\n  padding-bottom: 18px;\n\n  span {\n    white-space: normal;\n  }\n\n  span::after {\n    display: none;\n  }\n\n  @media (min-width: 739px) {\n    padding-top: 0;\n    padding-bottom: 0;\n  }\n\n  @media (min-width: ","px) {\n    padding-left: unset;\n  }\n"],["\n  color: #121212;\n  font-family: ",";\n  font-size: 16px;\n  line-height: 20px;\n  padding-left: 20px;\n  padding-top: 18px;\n  padding-bottom: 18px;\n\n  span {\n    white-space: normal;\n  }\n\n  span::after {\n    display: none;\n  }\n\n  @media (min-width: 739px) {\n    padding-top: 0;\n    padding-bottom: 0;\n  }\n\n  @media (min-width: ","px) {\n    padding-left: unset;\n  }\n"])),c.fonts.franklin,c.widths.medium),t.lineBreak=(0,l.css)(r||(r=i(["\n  @media (min-width: 739px) {\n    display: none;\n  }\n"],["\n  @media (min-width: 739px) {\n    display: none;\n  }\n"]))),t.boldText=(0,l.css)(s||(s=i(["\n  font-weight: ",";\n  text-decoration: underline;\n"],["\n  font-weight: ",";\n  text-decoration: underline;\n"])),c.fontWeights.bold)},MISA:function(e,t,n){"use strict";n.d(t,"a",(function(){return d})),n.d(t,"d",(function(){return p})),n.d(t,"b",(function(){return f}));var i,a=n("gcR/"),o=n.n(a),r=(n("q1tI"),n("Jqp9")),s=n("Rb+W"),l=n("06b3"),c=n("HChe"),u={".iterate__container":{borderBottom:"2px solid black !important"},".iterate__container__border":{display:"none !important"},".iterate__button":{border:"1px solid black !important",width:"auto !important",margin:"-5px auto 11px !important",display:"block !important",background:"transparent !important",color:"black !important",padding:"5px 7px !important"},".iterate__closeButton":{top:"2px !important"},".iterate__closeButton path":{fill:"black !important"}},d="657b48ff8d551e0001fa0953",p=Object(c.a)(),f=Object(s.f)(l.a),m=function(){return i||(i=o()(r.Global,{styles:u}))};m.displayName="IterateStyleOverride",t.c=m},MKiQ:function(e,t,n){"use strict";var i=n("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=i(n("Hy5q"));t.default=a.default},MLAy:function(e,t,n){"use strict";n.d(t,"a",(function(){return g})),n.d(t,"d",(function(){return y})),n.d(t,"b",(function(){return v})),n.d(t,"c",(function(){return b})),n.d(t,"e",(function(){return _}));var i=n("lSNA"),a=n.n(i),o=n("yXPU"),r=n.n(o),s=n("J4zp"),l=n.n(s),c=n("o0o1"),u=n.n(c),d=(n("ls82"),n("q1tI")),p=n("17x9"),f=n.n(p),m=n("pjM+"),h=n("+ClL"),g=18e5,y=108e5,v=864e5,b=30*v;function _(e){var t=Object(m.a)(),n=Object(d.useRef)(!1),i=Object(d.useRef)(!1),o=Object(d.useRef)(!1),s=Object(d.useRef)(-1),c=Object(d.useState)(!1),p=l()(c,2),f=p[0],g=p[1];e.now||(e.now=new Date);var y=Object(d.useMemo)((function(){return!e||(!e.scope||(!e.limit||!(e.now instanceof Date)))}),[e]);function v(t){if(y)return!1;if((null==e?void 0:e.limitDuration)>0){var n=new Date(null==t?void 0:t.lastSeenOn).getTime(),i=Math.floor(n/e.limitDuration),a=e.now.getTime();if(Math.floor(a/e.limitDuration)>i)return!0}return!1}return Object(d.useEffect)((function(){if(y){var e=new Error("useMessageCap invalid config");Object(h.a)(e,{msg:"useMessageCap error",more:"useMessageCap"})}}),[y]),{error:function(){return t.error()},loading:function(){return t.loading()},canShow:function(){if(i.current)return!1;if(n.current)return!0;if(y)return!1;var a=t.data();if(!a)return!1;var o=a[e.scope];if(void 0===o)return!1;if(null===o)return!0;if(s.current=o.viewCount,o.dismissed)return!1;if(null!=e&&e.frequency&&e.now.getTime()-new Date(o.lastSeenOn).getTime()<e.frequency)return!1;return!!v(o)||!(o.viewCount>=e.limit)},increment:function(){return r()(u.a.mark((function i(){var o,r,l,c,d;return u.a.wrap((function(i){for(;;)switch(i.prev=i.next){case 0:if(!n.current){i.next=2;break}return i.abrupt("return");case 2:if(!y){i.next=4;break}return i.abrupt("return");case 4:if(o=t.data()){i.next=9;break}return r=new Error("useMessageCap called increment before data is retrieved"),Object(h.a)(r,{msg:"useMessageCap error",more:"useMessageCap"}),i.abrupt("return");case 9:if(void 0!==(l=o[e.scope])){i.next=14;break}return c=new Error("useMessageCap called increment on an invalid scope"),Object(h.a)(c,{msg:"useMessageCap error",more:"useMessageCap"}),i.abrupt("return");case 14:return null===l&&(l={viewCount:0}),v(l)&&(l.viewCount=0),d=a()({},e.scope,{lastSeenOn:e.now.toISOString(),viewCount:l.viewCount+1}),s.current=l.viewCount+1,n.current=!0,i.next=21,t.update(d);case 21:case"end":return i.stop()}}),i)})))()},dismiss:function(){return r()(u.a.mark((function n(){var o,r,s,l;return u.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(!i.current){n.next=2;break}return n.abrupt("return");case 2:if(!y){n.next=4;break}return n.abrupt("return");case 4:if(o=t.data()){n.next=9;break}return r=new Error("useMessageCap called dismiss before data is retrieved"),Object(h.a)(r,{msg:"useMessageCap error",more:"useMessageCap"}),n.abrupt("return");case 9:if(void 0!==o[e.scope]){n.next=14;break}return s=new Error("useMessageCap called dismiss on an invalid scope"),Object(h.a)(s,{msg:"useMessageCap error",more:"useMessageCap"}),n.abrupt("return");case 14:return l=a()({},e.scope,{dismissed:!0}),i.current=!0,n.next=18,t.update(l);case 18:case"end":return n.stop()}}),n)})))()},resetIfCompleteBefore:function(l){var c=arguments;return r()(u.a.mark((function r(){var d,p,m,h,y;return u.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(d=c.length>1&&void 0!==c[1]&&c[1],!t.error()&&!t.loading()){r.next=3;break}return r.abrupt("return");case 3:if(!f&&!o.current){r.next=5;break}return r.abrupt("return");case 5:if(l instanceof Date&&!Number.isNaN(l)){r.next=7;break}return r.abrupt("return");case 7:if(p=t.data()){r.next=10;break}return r.abrupt("return");case 10:if((m=p[e.scope])&&void 0!==m){r.next=13;break}return r.abrupt("return");case 13:if(null!==(null==m?void 0:m.lastSeenOn)&&void 0!==(null==m?void 0:m.lastSeenOn)&&""!==(null==m?void 0:m.lastSeenOn)){r.next=15;break}return r.abrupt("return");case 15:if(!((h=new Date(null==m?void 0:m.lastSeenOn))instanceof Date&&Number.isNaN(h))){r.next=18;break}return r.abrupt("return");case 18:if(d){r.next=21;break}if(!((null==m?void 0:m.viewCount)<e.limit)||null!=m&&m.dismissed){r.next=21;break}return r.abrupt("return");case 21:if(!(h<l)){r.next=30;break}return y=a()({},e.scope,{lastSeenOn:null,viewCount:0,dismissed:!1}),i.current=!1,n.current=!1,o.current=!0,s.current=0,g(!0),r.next=30,t.update(y);case 30:case"end":return r.stop()}}),r)})))()},getCount:function(){return s.current}}}f.a.func.isRequired,f.a.func.isRequired,f.a.func.isRequired,f.a.func.isRequired,f.a.func.isRequired,f.a.func.isRequired,f.a.func.isRequired},MSmF:function(e,t,n){"use strict";var i=this&&this.__createBinding||(Object.create?function(e,t,n,i){void 0===i&&(i=n);var a=Object.getOwnPropertyDescriptor(t,n);a&&!("get"in a?!t.__esModule:a.writable||a.configurable)||(a={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,i,a)}:function(e,t,n,i){void 0===i&&(i=n),e[i]=t[n]}),a=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&i(t,e,n);return a(t,e),t},r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t,n,i,a,o,r,_,w,x,k,O,T,C,E,S,P=e.unit,I=(0,s.useState)(!1),M=I[0],A=I[1],j=(0,s.useState)(!1),N=j[0],L=j[1],D=(0,p.useMessageSelection)({config:{name:"dock"}}),R=(0,f.useUserState)(),B=(0,l.useTracking)(),z="/"===(0,h.getPathName)()?"homepage":"article",F=null===(n=P.content)||void 0===n?void 0:n.subscriptionURI,U=null===(i=null==P?void 0:P.content)||void 0===i?void 0:i.country,H=["AU","CA"].includes(U),W={event:"moduleInteraction",eventData:{pagetype:z,trigger:"module",type:"click"},module:{name:"dock",label:null===(a=null==D?void 0:D.response)||void 0===a?void 0:a.campaign(),element:{name:m.Action.Subscribe,url:F}}};if(null==D?void 0:D.loading)return null;if(!M){var q=null===(r=null===(o=null==D?void 0:D.response)||void 0===o?void 0:o.userstate())||void 0===r?void 0:r.messageSelectionMessageCaps,V=null;if(q)if((J=q).forEach((function(e){var t,n;"dock"===(null==e?void 0:e.unit)&&(null==e?void 0:e.campaign)===(null===(t=null==D?void 0:D.response)||void 0===t?void 0:t.campaign())&&(null==e?void 0:e.audience)===(null===(n=null==D?void 0:D.response)||void 0===n?void 0:n.audience())&&(V=e)})),V){var G=V,Y=new Date(null==G?void 0:G.lastSeenOn).getTime(),X=(new Date).getTime(),Z=Math.abs(Math.round(X-Y)/6e4);G.viewCount+=1,Z>2880?(G.viewCount=1,G.lastSeenOn=(new Date).toISOString(),L(!1)):G.viewCount>2?L(!0):L(!1),R.update({messageSelectionMessageCaps:J})}if(!V){var J=[];q&&(J=q),J.push({unit:"dock",campaign:null===(_=null==D?void 0:D.response)||void 0===_?void 0:_.campaign(),audience:null===(w=null==D?void 0:D.response)||void 0===w?void 0:w.audience(),lastSeenOn:(new Date).toISOString(),viewCount:1,dismissed:!1}),R.update({messageSelectionMessageCaps:J}),L(!1)}A(!0)}if(N)return s.default.createElement(u.default,{testId:"onsite-messaging-unit-".concat(null===g.config||void 0===g.config?void 0:g.config.name),"data-campaign":null==P?void 0:P.campaign,"data-audience":null==P?void 0:P.audience,className:d.dockWrapper,unit:P,contentID:null===(x=null==D?void 0:D.response)||void 0===x?void 0:x.campaign(),dockID:"standard",header:s.default.createElement(b,{unit:P,isStandard:!0}),headerCollapsedCTA:"Learn more",headingClassStyle:d.dockStandardHeaderStyle,onDockHeadingClick:function(){B.trackEvent(W),window.open(F,"_blank","noopener,noreferrer")},isDockDismissible:!1,isDockExpandable:!1,minimized:!0,hideVerticleRuleInHeader:!0,ctaButtonStyles:d.standardDockCallToActionBtn,ctaActionTextClassStyle:d.ctaActionTextClassStyleStandard});return s.default.createElement(u.default,{testId:"onsite-messaging-unit-".concat(null===g.config||void 0===g.config?void 0:g.config.name),"data-campaign":null==P?void 0:P.campaign,"data-audience":null==P?void 0:P.audience,className:d.dockWrapper,unit:P,contentID:null===(k=null==D?void 0:D.response)||void 0===k?void 0:k.campaign(),dockID:"expand",header:s.default.createElement(b,{unit:P}),card:s.default.createElement("div",{className:d.dockContentWrapper},(null===(O=P.content)||void 0===O?void 0:O.useSalesUrgency)&&s.default.createElement("div",{className:d.dockContentKicker},s.default.createElement(v.SaleUrgencyHeadline,{preSaleUrgencyText:"Sale:"})),s.default.createElement("div",{className:(0,c.cx)((t={},t[d.dockContentHeadlineIntlCAAU]=H,t[d.dockContentHeadline]=!H,t))},s.default.createElement("span",null,null===(T=null==P?void 0:P.content)||void 0===T?void 0:T.bodyPriceExpression," for your first "),s.default.createElement("span",null,s.default.createElement("span",{className:d.strikeThroughPrice},"6 months")," year.")),s.default.createElement("div",{className:d.billedText},s.default.createElement("span",null,"Billed as ",null===(C=null==P?void 0:P.content)||void 0===C?void 0:C.promoMonthlyPrice," every 4 weeks, "),s.default.createElement("span",null,"then ",null===(E=null==P?void 0:P.content)||void 0===E?void 0:E.fullMonthlyPrice," thereafter.")),s.default.createElement(y.Button,{component:"a",testId:"learn-more-button",className:d.ctaButton,href:null===(S=null==P?void 0:P.content)||void 0===S?void 0:S.subscriptionURI,onClick:function(){B.trackEvent(W)}},"Learn more")),isDockDismissible:!1,isDockExpandable:!0,minimized:!1,dividerStyle:d.dividerStyle,headingClassStyle:d.headingClassStyle,headingInfoContainerStyle:d.headingInfoContainerStyle,headingMessageClassStyle:d.headingMessageClassStyle,ctaIconWrapperStyle:d.ctaIconWrapperStyle,ctaContainerStyle:d.ctaContainerStyle,ctaActionTextClassStyle:d.ctaActionTextClassStyle})};var s=o(n("q1tI")),l=n("X6oL"),c=n("Jqp9"),u=r(n("5UIh")),d=o(n("6L9N")),p=n("syiw"),f=n("HDG5"),m=n("djNW"),h=n("FY2l"),g=n("6gWn"),y=n("etPP"),v=n("TFIS");function b(e){var t,n,i,a=e.unit,o=e.isStandard,r=void 0!==o&&o;return s.default.createElement("div",{className:(0,c.cx)((t={},t[d.standarDockHeader]=r,t[d.dockHeader]=!r,t))},s.default.createElement("span",{className:d.dockHeaderHedCopy},"Discover The Times ",null===(n=null==a?void 0:a.content)||void 0===n?void 0:n.headerText,": "),s.default.createElement("div",{className:d.dockHeaderPrice},null===(i=null==a?void 0:a.content)||void 0===i?void 0:i.bodyPriceExpression," for your first year."))}},Ma1Z:function(e,t,n){"use strict";var i=n("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=i(n("lwsE")),o=i(n("W8MJ")),r=i(n("a1gu")),s=i(n("Nsbk")),l=i(n("7W2i")),c=i(n("lSNA")),u=i(n("q1tI")),d=(i(n("17x9")),n("Jqp9")),p=n("5ON2"),f=i(n("N+PJ")),m=i(n("0e36")),h=n("To3l"),g=n("QDH1"),y=n("45t3");function v(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function b(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?v(Object(n),!0).forEach((function(t){(0,c.default)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):v(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function _(e,t,n){return t=(0,s.default)(t),(0,r.default)(e,function(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return function(){return!!e}()}()?Reflect.construct(t,n||[],(0,s.default)(e).constructor):t.apply(e,n))}var w=function(e){var t=e.article,n=function(e){return p.OakReader.getMatchingBlocks({article:e,test:function(e){return"header_live_briefing"===e.type.name}}).some((function(e){return p.OakReader.getMatchingBlocks({article:e,test:function(e){return"header_latest_update_label"===e.type.name}}).some(Boolean)}))}(t);return p.OakReader.getMatchingBlocks({article:t,test:function(e){return"heading2"===e.type.name}}).map((function(e,t){var i=e.textContent;return u.default.createElement(m.default,{key:t.toString(),isLive:n},u.default.createElement("a",{href:"#"},i))}))},x=function(e){function t(){var e;(0,a.default)(this,t);for(var n=arguments.length,i=new Array(n),o=0;o<n;o++)i[o]=arguments[o];return(e=_(this,t,[].concat(i))).state={newHeadings:[]},e.handleScroll=function(){var t,n,i=window.pageYOffset>=(null===(t=e.ref)||void 0===t||null===(n=t.current)||void 0===n?void 0:n.offsetTop);e.setState({fixPosition:i})},e}return(0,l.default)(t,e),(0,o.default)(t,[{key:"componentDidMount",value:function(){var e,t,n=this.props,i=n.article,a=n.isInEditor,o=n.theme.treatment;if(null===(e=(t=this.props).handleEvent)||void 0===e||e.call(t,"impression",{event:"impression"}),!a&&window.localStorage){this.ref=u.default.createRef(),"guide"===o&&window.addEventListener("scroll",this.handleScroll,{passive:!0});var r=(0,g.getHeadingData)(i),s=localStorage.getItem("nyt-styln-headings"),l={};if(s)try{l=JSON.parse(s)}catch(e){}var d=(0,g.filterExpiredItems)(l),p=b(b({},d),{},(0,c.default)({},i.id,{headings:r.map((function(e){return e.content})),lastModified:Date.now()}));localStorage.setItem("nyt-styln-headings",JSON.stringify(p));var f=d[i.id];if(f){var m;m=Array.isArray(f)?f:f.headings;var h=(0,g.getNewHeadings)(m,r);this.setState({newHeadings:h})}}}},{key:"componentWillUnmount",value:function(){"guide"===this.props.theme.treatment&&window.removeEventListener("scroll",this.handleScroll)}},{key:"render",value:function(){var e=this,t=this.props,n=t.children,i=t.isInEditor,a=t.article,o=t.ledeText,r=t.minItems,s=t.theme.treatment,l=t.maxItems,d=t.addendum,p=t.handleEvent,v=this.state,_=v.newHeadings,x=v.fixPosition,k=[];if(!n||i){var O=i?w({article:a}):function(e){var t=e.article,n=e.newHeadings,i=e.handleEvent,a=e.treatment,o=(0,g.isArticleLive)(t),r=(0,g.getHeadingData)(t),s="guide"===a;function l(){i&&i("click")}return r.map((function(e,t){var i=e.content,a=e.contentLink;return u.default.createElement(y.BulletBriefLocationContext.Consumer,null,(function(e){var r=e.setboldItems;return u.default.createElement(m.default,{key:t,isLive:o,isNew:n.includes(a)},u.default.createElement("a",{href:"#".concat(a),onClick:s?function(){r((0,c.default)({},a,!0))}:l},i))}))}))}({article:a,newHeadings:_,handleEvent:p,treatment:s});if((k=O.slice(0,+l).map((function(e,t){return b(b({},e),{},{key:t})}))).length<+r){if(!i)return null;k=u.default.createElement("p",null,"When at least ",r," headings are present, they will display here.")}}return u.default.createElement(y.BulletBriefLocationContext.Consumer,null,(function(t){return(0,t.setShowStickyNav)(x),u.default.createElement(h.BulletBriefingContainer,{innerRef:e.ref},!i&&n||u.default.createElement(u.default.Fragment,null,u.default.createElement(f.default,{ledeText:o,listItemsToRender:k}),d))}))}}])}(u.default.Component);x.displayName="BulletBriefing",x.defaultProps={children:null,isInEditor:!1,theme:{treatment:null},ledeText:"Here’s what you need to know:",maxItems:"7",minItems:"3",addendum:null,handleEvent:null};t.default=(0,d.withTheme)(x)},MlQP:function(e,t,n){"use strict";var i=n("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"NewsletterProduct",{enumerable:!0,get:function(){return o.NewsletterProduct}}),Object.defineProperty(t,"getNewsletterProduct",{enumerable:!0,get:function(){return o.getNewsletterProduct}}),Object.defineProperty(t,"makeEmailSignupComponent",{enumerable:!0,get:function(){return a.default}});var a=i(n("9B9F")),o=n("sYsD")},Mqhu:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=(0,n("q1tI").createContext)(0);t.default=i},MxTu:function(e,t,n){"use strict";var i=n("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=i(n("I6KV"));t.default=a.default},MzAO:function(e,t,n){"use strict";var i=this&&this.__makeTemplateObject||function(e,t){return Object.defineProperty?Object.defineProperty(e,"raw",{value:t}):e.raw=t,e};Object.defineProperty(t,"__esModule",{value:!0}),t.boldText=t.lineBreak=t.mainText=t.headerContainer=void 0;var a,o,r,s,l=n("Jqp9"),c=n("lVLo");t.headerContainer=(0,l.css)(a||(a=i(["\n  cursor: pointer;\n  margin-left: 0;\n\n  @media (min-width: ","px) {\n    padding-left: 20px;\n  }\n\n  > div {\n    padding-left: 0;\n    max-width: 100%;\n  }\n\n  .borderSpace {\n    margin-right: 12px;\n  }\n"],["\n  cursor: pointer;\n  margin-left: 0;\n\n  @media (min-width: ","px) {\n    padding-left: 20px;\n  }\n\n  > div {\n    padding-left: 0;\n    max-width: 100%;\n  }\n\n  .borderSpace {\n    margin-right: 12px;\n  }\n"])),c.widths.medium),t.mainText=(0,l.css)(o||(o=i(["\n  color: #000000;\n  font-family: ",";\n  font-size: 14px;\n  font-weight: ",";\n  line-height: 18px;\n  padding-left: 20px;\n  padding-top: 18px;\n  padding-bottom: 18px;\n  text-align: left;\n\n  span {\n    white-space: normal;\n  }\n\n  span::after {\n    display: none;\n  }\n\n  @media (min-width: 739px) {\n    padding-top: 0;\n    padding-bottom: 0;\n  }\n\n  @media (min-width: ","px) {\n    padding-left: unset;\n  }\n"],["\n  color: #000000;\n  font-family: ",";\n  font-size: 14px;\n  font-weight: ",";\n  line-height: 18px;\n  padding-left: 20px;\n  padding-top: 18px;\n  padding-bottom: 18px;\n  text-align: left;\n\n  span {\n    white-space: normal;\n  }\n\n  span::after {\n    display: none;\n  }\n\n  @media (min-width: 739px) {\n    padding-top: 0;\n    padding-bottom: 0;\n  }\n\n  @media (min-width: ","px) {\n    padding-left: unset;\n  }\n"])),c.fonts.franklin,c.fontWeights.medium,c.widths.medium),t.lineBreak=(0,l.css)(r||(r=i(["\n  @media (min-width: 739px) {\n    display: none;\n  }\n"],["\n  @media (min-width: 739px) {\n    display: none;\n  }\n"]))),t.boldText=(0,l.css)(s||(s=i(["\n  font-weight: ",";\n  text-decoration: underline;\n"],["\n  font-weight: ",";\n  text-decoration: underline;\n"])),c.fontWeights.bold)},Mzrn:function(e,t,n){"use strict";var i=n("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.paragraphSelector=t.default=t.Paragraph=void 0;var a=n("3sMT"),o=n("Jqp9"),r=i(n("wXC7")),s=n("6l8D"),l=i(n("WThh")),c=i(n("qp0C")),u=(0,l.default)(["medium","small"]),d=function(e){return(0,o.css)("color:",a.color.content.secondary,";font-weight:",r.default.font.book,";",u(e,{fontSize:[17,19],lineHeight:[25,30]}),";")},p=(0,o.themeFn)("treatment",{none:function(e){return(0,o.css)("font-family:",r.default.font.serifBase,";",u(e,{fontSize:[18,20],lineHeight:[25,30]}),";")},sponsored:function(e){return(0,o.css)(d(e),";font-family:",r.default.font.sponsoredBase,";")},sponsoredSensitive:function(e){return(0,o.css)(d(e),";font-family:",r.default.font.sponsoredSensitive,";")},atHome:function(e){return(0,o.css)("font-style:normal;font-weight:300;font-size:23px;line-height:28px;font-family:",c.default.cheltenham,";",u(e,{padding:["1rem","0"]})," .",s.linkClass,"{border-bottom:2px soild ",a.color.stroke.primary,";color:",a.color.content.primary,";&:hover,&:focus{border-bottom:0;}}")},liveSplitLayout:(0,o.css)("font-family:",r.default.font.serifBase,";font-size:",r.default.font.size(18),";line-height:",r.default.font.size(25),";margin-bottom:",r.default.font.size(12.5),";")}),f=(0,o.themeFn)("languageDirection",{rightToLeft:(0,o.css)("text-align:right;direction:rtl;unicode-bidi:isolate;")}),m=(0,o.themeFn)("language",{"zh-hans":(0,o.css)("font-family:",r.default.font.imperialSCSerifBase,";font-weight:normal;font-style:normal;"),"zh-hant":(0,o.css)("font-family:",r.default.font.imperialTCSerifBase,";font-weight:normal;font-style:normal;")}),h=function(e){return(0,o.css)("margin-bottom:",r.default.font.size(12.5),";margin-top:0;overflow-wrap:break-word;color:",a.color.content.secondary,";",e.theme.breakpointMap.medium,"{margin-bottom:",r.default.font.size(15),";margin-top:0;}.",s.linkClass,"{text-decoration:underline;text-decoration-style:solid;text-decoration-thickness:1px;text-decoration-color:",a.color.signal.editorial,";&:hover,&:focus{text-decoration:none;}}")},g=(t.paragraphSelector=function(e){return(0,o.css)("p{",h(e),";",p(e),";}")},t.Paragraph=(0,o.styled)("p",{target:"evys1bk0"})(h,";",p,";",f,";",m,";"));t.default=g},"N+PJ":function(e,t,n){"use strict";var i=n("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=i(n("q1tI")),o=(n("17x9"),i(n("s6ck"))),r=i(n("AfrD")),s=n("wnaz"),l=n("Jqp9");t.default=function(e){var t=e.ledeText,n=e.listItemsToRender,i="guide"===(0,l.useTheme)().treatment,c=i&&s.listNavbarClass;return a.default.createElement(a.default.Fragment,null,!i&&a.default.createElement(o.default,null,t),a.default.createElement(r.default,{className:c},n))}},"N/T0":function(e,t,n){"use strict";n.d(t,"a",(function(){return g}));var i=n("lSNA"),a=n.n(i),o=n("cDf5"),r=n.n(o),s=n("q1tI"),l=n("X6oL"),c=n("QS0n"),u=n("cUQY"),d=n("u1H9"),p=n("+ClL"),f=n("qs2k");function m(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function h(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?m(Object(n),!0).forEach((function(t){a()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):m(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function g(e){var t=e.name,n=void 0===t?"":t,i=e.context,a=void 0===i?"":i,o=e.label,m=void 0===o?"":o,g=e.region,y=e.b2bIPSegmentID,v=Object(l.useTracking)(),b=Object(u.a)().pageCount,_="/"===(Object(c.useLocation)()||{}).pathname?"homepage":"article",w=function(e){return e?"".concat(e).replace(/[^0-9a-zA-Z _-]/g,""):""},x={name:w(n),context:w(a),label:w(m),region:w(g)||Object(d.g)(b)};y&&(x.other={ipSegmentId:y});var k=function(e){return"string"!=typeof e?e:e.replace(/(\s|\\n)+/g," ").trim()},O=function(e){var t=e.textContent,n=void 0===t?"":t,i=e.children;if(!(void 0===i?[]:i).length)return k(n);var a=e.innerText;return k(void 0===a?"":a)},T=Object(s.useRef)(!1);return{updateLabel:function(e){x.label=e},trackImpression:function(){if(!T.current){var e,t={event:"impression",module:x},n=null!==f.b&&void 0!==f.b&&null!==(e=f.b.timing)&&void 0!==e&&e.responseStart?f.b.timing.responseStart:null;"number"==typeof n&&(t.eventData={pagetype:"article",trigger:"module",timeRendered:Date.now()-n}),T.current=!0,v.trackEvent(t)}},trackInteraction:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2?arguments[2]:void 0,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};if("object"===r()(e)){var a=e.type,o=void 0===a?"":a,s=e.currentTarget,l=e.target,c=void 0===l?{}:l,u=s||c,d=u.href,f=void 0===d?"":d;v.trackEvent(h(h(h({},i),{},{event:"moduleInteraction"},n&&{eventCallback:n}),{},{eventData:{trigger:"module",type:o,pagetype:_},module:h(h({},x),{},{element:{name:t.name||"",label:t.label||O(s||c),url:t.url||f}})}))}else{var m=new Error("useMUTracker received an unexpected argument type ".concat(r()(e)," in trackInteraction() call for ").concat(x.name,": ").concat(x.label));Object(p.a)(m,{msg:"useMUTracker error",more:"useMUTracker"})}}}}},N2Xg:function(e,t,n){"use strict";var i=this&&this.__makeTemplateObject||function(e,t){return Object.defineProperty?Object.defineProperty(e,"raw",{value:t}):e.raw=t,e};Object.defineProperty(t,"__esModule",{value:!0}),t.dockContentCtaDek=t.dockContentCta=t.dockContentCtaWrapper=t.dockContentPricingBau=t.dockContentPricing=t.dockContentHed=t.dockContentLogo=t.dockContentContainer=t.dockContentWrapper=t.dockHeaderUrgencyMessage=t.dockHeaderWrapper=t.dockHeaderHeadingClassName=void 0;var a,o,r,s,l,c,u,d,p,f,m,h,g=n("Jqp9"),y=n("lVLo");t.dockHeaderHeadingClassName=(0,g.css)(a||(a=i(["\n  margin: 0 auto;\n  max-width: 984px;\n  width: calc(100vw - 40px);\n\n  @media screen and (min-width: 1440px) {\n    max-width: 1160px;\n    width: calc(100vw - 280px);\n  }\n\n  & > div {\n    @media screen and (min-width: 768px) {\n      max-width: unset;\n      padding: 0;\n    }\n\n    & > div:last-child {\n      margin-right: -15px;\n      @media screen and (min-width: 768px) {\n        margin-right: -10px;\n      }\n    }\n  }\n"],["\n  margin: 0 auto;\n  max-width: 984px;\n  width: calc(100vw - 40px);\n\n  @media screen and (min-width: 1440px) {\n    max-width: 1160px;\n    width: calc(100vw - 280px);\n  }\n\n  & > div {\n    @media screen and (min-width: 768px) {\n      max-width: unset;\n      padding: 0;\n    }\n\n    & > div:last-child {\n      margin-right: -15px;\n      @media screen and (min-width: 768px) {\n        margin-right: -10px;\n      }\n    }\n  }\n"]))),t.dockHeaderWrapper=(0,g.css)(o||(o=i(["\n  font-family: ",";\n  font-size: 16px;\n  color: #121212;\n  padding-left: 10px;\n\n  @media screen and (min-width: 768px) {\n    padding-left: 0px;\n  }\n\n  @media screen and (min-width: 1024px) {\n    padding-left: 0px;\n    padding-right: 6vw;\n  }\n  & span {\n    text-wrap: unset;\n  }\n"],["\n  font-family: ",";\n  font-size: 16px;\n  color: #121212;\n  padding-left: 10px;\n\n  @media screen and (min-width: 768px) {\n    padding-left: 0px;\n  }\n\n  @media screen and (min-width: 1024px) {\n    padding-left: 0px;\n    padding-right: 6vw;\n  }\n  & span {\n    text-wrap: unset;\n  }\n"])),y.fonts.franklin),t.dockHeaderUrgencyMessage=(0,g.css)(r||(r=i(["\n  font-weight: ",";\n\n  span::after {\n    display: none;\n  }\n"],["\n  font-weight: ",";\n\n  span::after {\n    display: none;\n  }\n"])),y.fontWeights.semiBold),t.dockContentWrapper=(0,g.css)(s||(s=i(["\n  align-self: flex-start;\n  display: flex;\n  margin: 0 auto 20px auto;\n  width: calc(100vw - 40px);\n  max-width: 984px;\n\n  @media screen and (min-width: 1440px) {\n    margin-bottom: 40px;\n    width: calc(100vw - 280px);\n    align-self: center;\n    max-width: 1160px;\n  }\n"],["\n  align-self: flex-start;\n  display: flex;\n  margin: 0 auto 20px auto;\n  width: calc(100vw - 40px);\n  max-width: 984px;\n\n  @media screen and (min-width: 1440px) {\n    margin-bottom: 40px;\n    width: calc(100vw - 280px);\n    align-self: center;\n    max-width: 1160px;\n  }\n"]))),t.dockContentContainer=(0,g.css)(l||(l=i(["\n  background: #f6f6f4;\n  border-radius: 8px;\n  font-family: ",";\n  font-size: 14px;\n  line-height: 130%;\n  max-height: 170px;\n  padding: 20px;\n  text-align: center;\n  width: 100%;\n\n  @media screen and (min-width: 768px) {\n    display: flex;\n    flex-direction: row;\n    align-items: center;\n    justify-content: space-between;\n    max-height: 96px;\n    padding: 20px 40px;\n  }\n\n  @media screen and (min-width: 1024px) {\n    max-height: 98px;\n    padding: 40px 120px;\n  }\n"],["\n  background: #f6f6f4;\n  border-radius: 8px;\n  font-family: ",";\n  font-size: 14px;\n  line-height: 130%;\n  max-height: 170px;\n  padding: 20px;\n  text-align: center;\n  width: 100%;\n\n  @media screen and (min-width: 768px) {\n    display: flex;\n    flex-direction: row;\n    align-items: center;\n    justify-content: space-between;\n    max-height: 96px;\n    padding: 20px 40px;\n  }\n\n  @media screen and (min-width: 1024px) {\n    max-height: 98px;\n    padding: 40px 120px;\n  }\n"])),y.fonts.franklin),t.dockContentLogo=(0,g.css)(c||(c=i(["\n  @media screen and (min-width: 768px) {\n    width: 132px;\n  }\n  @media screen and (min-width: 1024px) {\n    width: 154px;\n  }\n"],["\n  @media screen and (min-width: 768px) {\n    width: 132px;\n  }\n  @media screen and (min-width: 1024px) {\n    width: 154px;\n  }\n"]))),t.dockContentHed=(0,g.css)(u||(u=i(["\n  font-weight: ",";\n  margin-bottom: 12px;\n\n  @media screen and (min-width: 768px) {\n    text-align: left;\n  }\n\n  @media screen and (min-width: 768px) {\n    font-size: 16px;\n  }\n"],["\n  font-weight: ",";\n  margin-bottom: 12px;\n\n  @media screen and (min-width: 768px) {\n    text-align: left;\n  }\n\n  @media screen and (min-width: 768px) {\n    font-size: 16px;\n  }\n"])),y.fontWeights.medium),t.dockContentPricing=(0,g.css)(d||(d=i(["\n  font-size: 20px;\n  font-weight: ",";\n  line-height: 120%;\n  margin-bottom: 10px;\n"],["\n  font-size: 20px;\n  font-weight: ",";\n  line-height: 120%;\n  margin-bottom: 10px;\n"])),y.fontWeights.semiBold),t.dockContentPricingBau=(0,g.css)(p||(p=i(["\n  color: #8b8b8b;\n  text-decoration: line-through;\n"],["\n  color: #8b8b8b;\n  text-decoration: line-through;\n"]))),t.dockContentCtaWrapper=(0,g.css)(f||(f=i(["\n  margin-bottom: 10px;\n\n  @media screen and (min-width: 768px) {\n    margin-bottom: 0;\n  }\n"],["\n  margin-bottom: 10px;\n\n  @media screen and (min-width: 768px) {\n    margin-bottom: 0;\n  }\n"]))),t.dockContentCta=(0,g.css)(m||(m=i(["\n  background: #e33d26;\n  border-radius: 3px;\n  color: #f8f8f8;\n  display: block;\n  font-weight: ",";\n  margin: 0 auto 10px auto;\n  max-width: 180px;\n  padding: 7px 0;\n  width: 180px;\n\n  @media screen and (min-width: 1024px) {\n    font-size: 16px;\n    padding: 9px 0;\n  }\n\n  &:link,\n  &:visited {\n    color: #f8f8f8;\n    text-decoration: none;\n  }\n"],["\n  background: #e33d26;\n  border-radius: 3px;\n  color: #f8f8f8;\n  display: block;\n  font-weight: ",";\n  margin: 0 auto 10px auto;\n  max-width: 180px;\n  padding: 7px 0;\n  width: 180px;\n\n  @media screen and (min-width: 1024px) {\n    font-size: 16px;\n    padding: 9px 0;\n  }\n\n  &:link,\n  &:visited {\n    color: #f8f8f8;\n    text-decoration: none;\n  }\n"])),y.fontWeights.semiBold),t.dockContentCtaDek=(0,g.css)(h||(h=i(["\n  color: #5a5a5a;\n  font-size: 12px;\n  font-weight: ",";\n\n  @media screen and (min-width: 1024px) {\n    font-size: 14px;\n  }\n"],["\n  color: #5a5a5a;\n  font-size: 12px;\n  font-weight: ",";\n\n  @media screen and (min-width: 1024px) {\n    font-size: 14px;\n  }\n"])),y.fontWeights.medium)},NByq:function(e,t,n){"use strict";t.a="/vi-assets/static-assets/icon-clean-everything_144x144-97312e349d7284039a2153cb541b7fda.webp"},NGmU:function(e,t,n){"use strict";var i=this&&this.__makeTemplateObject||function(e,t){return Object.defineProperty?Object.defineProperty(e,"raw",{value:t}):e.raw=t,e},a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.styledDockContent=void 0;var o,r=n("Jqp9"),s=a(n("wXC7"));t.styledDockContent=(0,r.css)(o||(o=i(["\n  width: 100%;\n  z-index: ",";\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n"],["\n  width: 100%;\n  z-index: ",";\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n"])),s.default.zIndex.dock)},NQ6n:function(e,t,n){"use strict";n.d(t,"a",(function(){return be}));var i={};n.r(i),n.d(i,"buttonContainerClass",(function(){return j})),n.d(i,"dropdownButtonClass",(function(){return N})),n.d(i,"DropDownMenu",(function(){return L})),n.d(i,"activeClass",(function(){return D})),n.d(i,"shareMenuPointerTopLeftClass",(function(){return B})),n.d(i,"shareMenuPointerTopRightClass",(function(){return z})),n.d(i,"shareMenuPointerBottomLeftClass",(function(){return F})),n.d(i,"shareMenuPointerBottomRightClass",(function(){return U})),n.d(i,"shareMenuPointerTopLeftConcealClass",(function(){return W})),n.d(i,"shareMenuPointerTopRightGiftConcealClass",(function(){return q})),n.d(i,"shareMenuPointerTopLeftGiftConcealClass",(function(){return V})),n.d(i,"shareMenuPointerTopRightConcealClass",(function(){return G})),n.d(i,"shareMenuPointerBottomLeftConcealClass",(function(){return Y})),n.d(i,"shareMenuPointerBottomLeftGiftConcealClass",(function(){return X})),n.d(i,"shareMenuPointerBottomRightConcealClass",(function(){return Z})),n.d(i,"shareMenuPointerBottomRightNonGiftConcealClass",(function(){return J})),n.d(i,"shareMenuPointerBottomLeftNonGiftConcealClass",(function(){return K})),n.d(i,"menuTopLeftPositionClass",(function(){return $})),n.d(i,"menuTopLeftGiftPositionClass",(function(){return Q})),n.d(i,"menuTopRightGiftPositionClass",(function(){return ee})),n.d(i,"menuTopRightPositionClass",(function(){return te})),n.d(i,"menuBottomLeftPositionClass",(function(){return ne})),n.d(i,"menuBottomLeftGiftPositionClass",(function(){return ie})),n.d(i,"menuBottomRightPositionClass",(function(){return ae})),n.d(i,"menuTopLeftHomePositionClass",(function(){return oe})),n.d(i,"menuTopRightHomePositionClass",(function(){return re})),n.d(i,"menuBottomLeftHomePositionClass",(function(){return se})),n.d(i,"menuBottomRightHomePositionClass",(function(){return le})),n.d(i,"closeButtonClass",(function(){return ce})),n.d(i,"closeIconClass",(function(){return ue})),n.d(i,"alignAdjustClass",(function(){return de}));var a=n("VkAN"),o=n.n(a),r=n("pVnL"),s=n.n(r),l=n("lSNA"),c=n.n(l),u=n("gcR/"),d=n.n(u),p=n("J4zp"),f=n.n(p),m=n("QILm"),h=n.n(m),g=n("q1tI"),y=n.n(g),v=n("Jqp9"),b=n("eFc+"),_=n.n(b),w=n("X6oL"),x=n("KG2r"),k=(n("WPRB"),n("rONy")),O=n("TwAE"),T=n("9/5/"),C=n.n(T),E=n("MISA"),S=n("oEA4"),P=n("iEJF"),I=n("wXC7"),M=n.n(I),A="@media (max-width: ".concat(M.a.breakpoint.maxMobileContentWidth,"px)"),j=Object(v.css)("display:inline-flex;"),N=Object(v.css)("position:relative;"),L=Object(v.styled)("div",{target:"e8nir780"})("width:",(function(e){return e.width}),"px;display:none;position:absolute;box-shadow:0 1px 3px rgba(0,0,0,0.15);border-radius:4px;border:1px solid ",M.a.color.gray50,";background-color:",M.a.color.white,";z-index:199;"),D=Object(v.css)("display:inline-block;"),R=Object(v.css)("border:14px inset transparent;display:inline-block;height:0;position:absolute;width:0;"),B=Object(v.css)(R,";border:10px inset transparent;border-bottom:10px solid #b3b3b3;left:15px;top:-20px;"),z=Object(v.css)(R,";border:10px inset transparent;border-bottom:10px solid #b3b3b3;right:152px;top:-20px;"),F=Object(v.css)(R,";transform:rotate(180deg);border:10px inset transparent;border-bottom:10px solid #b3b3b3;left:15px;bottom:-21px;"),U=Object(v.css)(R,";transform:rotate(180deg);border:10px inset transparent;border-bottom:10px solid #b3b3b3;right:15px;bottom:-21px;"),H="\n  border: 10px inset transparent;\n  display: inline-block;\n  height: 0;\n  position: absolute;\n  width: 0;\n  top: -9px;\n  border-bottom: 11px solid ".concat(M.a.color.white,";\n"),W=Object(v.css)(H," left:-10px;"),q=Object(v.css)(H," left:-10px;"),V=Object(v.css)(H," left:-10px;"),G=Object(v.css)(H," right:-10px;"),Y=Object(v.css)(H," border-bottom:10px solid ",M.a.color.black,";left:-10px;"),X=Object(v.css)(H," left:-10px;"),Z=Object(v.css)(H," border-bottom:10px solid ",M.a.color.black,";right:-10px;"),J=Object(v.css)(H," border-bottom:10px solid ",M.a.color.white,";right:-10px;"),K=X,$=Object(v.css)("top:46px;left:-9px;"),Q=Object(v.css)("top:46px;left:-5px;",A,"{left:-8px;}"),ee=Object(v.css)("top:46px;left:-32px;",A,"{left:-8px;}"),te=Object(v.css)("top:45px;right:-9px;"),ne=Object(v.css)("bottom:46px;left:-9px;"),ie=Object(v.css)("bottom:46px;left:-6px;"),ae=Object(v.css)("bottom:42px;right:-13px;"),oe=Object(v.css)("top:29px;left:-18px;"),re=Object(v.css)("top:28px;right:-19px;"),se=Object(v.css)("bottom:31px;left:-19px;"),le=Object(v.css)("bottom:32px;right:-17px;"),ce=Object(v.css)("position:absolute;opacity:0;right:4px;top:4px;background:",M.a.color.white,";&:focus{opacity:1;}@supports selector(:focus-visible){&:focus{opacity:0;}&:focus-visible{opacity:1;}}"),ue=Object(v.css)("display:block;height:14px;width:14px;"),de=function(e){var t=e.top,n=e.left,i=e.bottom,a=e.right,o="";return t&&(o+="top: ".concat(t,";")),n&&(o+="left: ".concat(n,";")),i&&(o+="bottom: ".concat(i,";")),a&&(o+="right: ".concat(a,";")),Object(v.css)(o)},pe=y.a.forwardRef((function(e,t){var n=e.modalContent,a=e.buttonContent,o=e.isGiftArticle,r=e.ariaLabel,s=e.ariaDescribedBy,l=e.buttonClassName,u=e.width,p=e.arrowPosition,m=e.handleOpen,h=e.forceArrowPosition,b=e.suppressForcedFocus,_=e.forceClose,w=e.forceOpen,x=e.toggleGiftArticleMenu,k=e.height,O=e.hasGiftArticleButtonSibling,T=e.dataTestid,C=e.isHomeTest,E=e.isCarouselButton,I=Object(g.useReducer)((function(e){return!e}),!1),M=f()(I,2),A=M[0],R=M[1],B=Object(g.useState)("right"),z=f()(B,2),F=z[0],U=z[1],H=Object(g.useState)(p),W=f()(H,2),q=W[0],V=W[1],G=Object(g.useState)(!1),Y=f()(G,2),X=Y[0],Z=Y[1],J=Object(g.useState)(k),K=f()(J,2),$=K[0],Q=K[1],ee=Object(g.useRef)(),te=null!=t?t:ee,ne=Object(g.useRef)(),ie=E?{bottom:"55px",right:"0",left:"unset",top:"unset"}:{top:0,left:0,bottom:0,right:0};Object(g.useEffect)((function(){E&&U("right")}),[E]),Object(g.useEffect)((function(){k&&k!==$&&Q(k)}),[k,$]);var ae=Object(g.useCallback)((function(){if(!A){var e=te.current.getBoundingClientRect(),t=$>0?$:340;if(!h)if("top"===q){var n=e.top-43<t;window.innerHeight-e.bottom>t||n||V("bottom")}else{e.top-43>t||V("top")}E||(e.right-u>0&&e.left+u>window.innerWidth?"right"!==F&&U("right"):"left"!==F&&U("left"))}R(),X||Z(!0)}),[A,X,te,$,h,E,q,u,F]);Object(g.useEffect)((function(){ne.current&&0===$&&Q(ne.current.offsetHeight);var e=function(e){var t="Escape"===e.key||27===e.keyCode;A&&t&&ae()};return window.addEventListener("keydown",e),function(){return window.removeEventListener("keydown",e)}}),[ne,$,A,ae]),Object(g.useEffect)((function(){X&&!E&&(m(A),null!=te&&te.current&&!b&&!A&&function(e){for(var t=e.offsetTop,n=e.offsetLeft,i=e.offsetWidth,a=e.offsetHeight;e.offsetParent;)t+=(e=e.offsetParent).offsetTop,n+=e.offsetLeft;return t<window.pageYOffset+window.innerHeight&&n<window.pageXOffset+window.innerWidth&&t+a>window.pageYOffset&&n+i>window.pageXOffset}(te.current)&&te.current.focus())}),[A,m,X,b,te,E]),Object(g.useEffect)((function(){_&&A&&(R(),m(!1),x(!1))}),[A,_,m,x]),Object(g.useEffect)((function(){w&&!A&&(R(),m(!0),x(!1))}),[A,w,m,x]);var oe=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return"".concat(q.charAt(0).toUpperCase()+q.slice(1)).concat(F.charAt(0).toUpperCase()+F.slice(1)).concat(e&&o?"Gift":"").concat(C&&!t?"Home":"")},re="";O||o||"bottom"!==q||(re="NonGift");var se=E?null:j;return d()(S.a,{onClickOutside:function(){A&&R()},className:se},void 0,d()("div",{className:N},void 0,y.a.createElement("button",{onClick:ae,type:"button","aria-label":r,"aria-describedby":s,"aria-expanded":A,className:Object(v.cx)(l),ref:te,"data-testid":T},a),A&&d()(L,{className:Object(v.cx)(i["menu".concat(oe(!0),"PositionClass")],c()({},D,A),de(ie)),"data-testid":"share-button-menu",width:u},void 0,d()("div",{className:i["shareMenuPointer".concat(oe(!1,!0),"Class")]},void 0,d()("div",{className:i["shareMenuPointer".concat(oe(!0,!0)).concat(re,"ConcealClass")]})),y.a.createElement("div",{ref:ne,"aria-modal":"true",role:"dialog"},n,d()("button",{type:"button",className:ce,onClick:ae,"aria-label":"close dialog"},void 0,d()(P.a,{className:ue}))))))}));pe.defaultProps={modalContent:null,buttonContent:null,ariaLabel:"",ariaDescribedBy:null,buttonClassName:null,arrowPosition:"top",width:204,handleOpen:function(){return null},forceArrowPosition:!1,suppressForcedFocus:!1,forceClose:!1,forceOpen:!1,toggleGiftArticleMenu:function(){return null},height:null,isGiftArticle:!1,hasGiftArticleButtonSibling:!1,dataTestid:null,isHomeTest:!1,isCarouselButton:!1};var fe=pe,me=function(e){var t=e.className,n=e.title,i=e.stroke,a=e.fill;return d()("svg",{className:t,viewBox:"0 0 20 20"},void 0,n&&d()("title",{},void 0,n),d()("path",{d:"M19.219 8.706l-7.29 6.075v-3.698h-.5c-5.144 0-8.562 1.444-10.617 4.556C1.97 10.496 6.22 6.35 11.43 6.35h.5V2.63l7.29 6.076z",stroke:i,fill:a,fillRule:"evenodd"}))};me.displayName="ShareIcon",me.defaultProps={stroke:M.a.color.blue30,fill:"none",className:void 0,title:void 0};var he,ge,ye=me,ve=["share","className","stroke","fill","buttonHoverClass","buttonContent","isGiftArticle","handleOpen","pageType","mediaTitle","modalContent","setAriaLabel","ariaDescribedBy","modalArrowPosition","forceArrowPosition","suppressForcedFocus","toggleGiftArticleMenu","forceCloseModal","forceOpen","giftLinksRemainingCount","forcePopOver","menuDefaultHeight","trackingRegion","hasGiftArticleButtonSibling","dataTestid","isCarouselButton","handleClose","setUpModalStyles"],be=Object(v.css)("background:transparent;display:inline-block;height:20px;width:20px;"),_e="More sharing options",we=function(e){var t,n,i,a,o=e.share,r=e.className,l=e.stroke,u=e.fill,p=e.buttonHoverClass,m=e.buttonContent,b=e.isGiftArticle,_=e.handleOpen,T=e.pageType,S=e.mediaTitle,P=e.modalContent,I=e.setAriaLabel,M=e.ariaDescribedBy,A=e.modalArrowPosition,j=e.forceArrowPosition,N=e.suppressForcedFocus,L=e.toggleGiftArticleMenu,D=e.forceCloseModal,R=e.forceOpen,B=(e.giftLinksRemainingCount,e.forcePopOver),z=e.menuDefaultHeight,F=e.trackingRegion,U=e.hasGiftArticleButtonSibling,H=e.dataTestid,W=e.isCarouselButton,q=e.handleClose,V=e.setUpModalStyles,G=h()(e,ve),Y=Object(w.useTracking)().trackEvent,X=Object(g.useState)(!0),Z=f()(X,2),J=Z[0],K=Z[1],$=Object(g.useState)(!1),Q=f()($,2),ee=Q[0],te=Q[1],ne=Object(g.useState)(!1),ie=f()(ne,2),ae=ie[0],oe=ie[1],re="";I&&(re="".concat(_e," ").concat(S,"..."));var se=function(e){_?_(e):(e&&e!==ee&&Y({event:"moduleInteraction",eventData:{pagetype:T,trigger:"module",type:"click"},module:{name:"share-tools",region:F,element:{name:"tools-menu",label:"Tools Menu",url:o.url}}}),te(e)),e&&e!==ee&&!ae&&(oe(!0),Object(k.a)((function(){window.Iterate("install",E.a),window.Iterate("identify",{agentId:E.b,referrerUrl:document.referrer,referrerPage:document.location,device:E.d})})))},le=function(){return window.matchMedia("(min-width: 1150px)").matches},ce=C()((function(){var e=le();e!==J&&K(e)}),25);Object(g.useEffect)((function(){var e=le();return e!==J&&K(e),window.addEventListener("resize",ce),function(){return window.removeEventListener("resize",ce)}}),[J,ce]);return y.a.createElement(y.a.Fragment,null,ae&&(he||(he=d()(E.c,{}))),J||B?d()(fe,{dataTestid:H,isGiftArticle:b,buttonContent:m||t||(t=d()(ye,{stroke:l,fill:u})),modalContent:P||n||(n=d()(x.b,{share:o,pageType:T,toggleGiftArticleMenu:L,trackingRegion:F,renderGiftButton:U,renderShareCopy:U,isInCarousel:W})),ariaLabel:re,ariaDescribedBy:M,buttonClassName:Object(v.cx)(c()(c()(c()({},be,!r),r,r),p,p)),arrowPosition:A,handleOpen:se,forceArrowPosition:j,width:215,suppressForcedFocus:N,forceClose:D,toggleGiftArticleMenu:L,forceOpen:R,height:z,hasGiftArticleButtonSibling:U,isCarouselButton:W}):y.a.createElement(O.a,s()({dataTestid:H,width:215,ariaLabel:re,ariaDescribedBy:M,className:Object(v.cx)(c()(c()({},be,!r),r,r)),buttonHoverClass:p,buttonContent:m||i||(i=d()(ye,{stroke:l,fill:u})),forceClose:D,forceOpen:R,toggleGiftArticleMenu:L,wrapWithContainer:!W,modalContent:P||a||(a=d()(x.b,{share:o,pageType:T,toggleGiftArticleMenu:L,trackingRegion:F,renderGiftButton:U,renderShareCopy:U})),handleOpen:se,handleClose:q,arrowPosition:A,isShareToolButton:!0,setUpModalStyles:V},G)))};we.fragments={share:_()(ge||(ge=o()(["\n    fragment ShareButton_share on CreativeWork {\n      ...ShareMenu_share\n    }\n    ","\n  "])),x.b.fragments.share)},we.defaultProps={buttonHoverClass:"",buttonContent:void 0,modalContent:void 0,className:void 0,stroke:void 0,fill:void 0,handleOpen:void 0,handleClose:void 0,pageType:void 0,tracking:void 0,mediaTitle:"",setAriaLabel:!0,ariaDescribedBy:void 0,modalArrowPosition:"top",forceArrowPosition:!1,suppressForcedFocus:!1,forceCloseModal:!1,forceOpen:!1,toggleGiftArticleMenu:void 0,giftLinksRemainingCount:void 0,forcePopOver:!1,menuDefaultHeight:void 0,trackingRegion:"default",isGiftArticle:!1,hasGiftArticleButtonSibling:!1,dataTestid:null,wrapWithContainer:!0,isCarouselButton:!1,setUpModalStyles:void 0};t.b=we},NVP0:function(e,t,n){"use strict";n.d(t,"e",(function(){return o})),n.d(t,"j",(function(){return r})),n.d(t,"n",(function(){return s})),n.d(t,"b",(function(){return l})),n.d(t,"c",(function(){return c})),n.d(t,"a",(function(){return u})),n.d(t,"i",(function(){return d})),n.d(t,"k",(function(){return p})),n.d(t,"f",(function(){return f})),n.d(t,"h",(function(){return m})),n.d(t,"g",(function(){return h})),n.d(t,"d",(function(){return g})),n.d(t,"l",(function(){return y})),n.d(t,"m",(function(){return _}));var i=n("RIqP"),a=n.n(i),o=function(e){return e.advertisingProperties&&e.advertisingProperties.sensitivity?e.advertisingProperties.sensitivity:"SHOW_ADS"},r=function(e){var t,n;return(null==e||null===(t=e[0])||void 0===t||null===(n=t.creators)||void 0===n?void 0:n.length)>0},s=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{language:""},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"By";return"es"===e.language?"Por":t},l=function(e,t){var n=e.find((function(e){return"supplemental"===e.name}));if(!n)return[];var i=n.containers.find((function(e){return e.name===t}));return i?i.relations.filter((function(e){var t;return["Capsule","EmbeddedInteractive"].includes(null===(t=e.asset)||void 0===t?void 0:t.__typename)})):[]},c=function(e,t){if(null==e||!e.crops)return null;for(var n=[],i=0;i<e.crops.length;i+=1)for(var a=0;a<e.crops[i].renditions.length;a+=1){var o=e.crops[i].renditions[a];if(t.indexOf(o.name)>-1){if(o.name===t[0])return o;n.push(o)}}for(var r=0;r<t.length;r+=1)for(var s=0;s<n.length;s+=1)if(n[s].name===t[r])return n[s];return null},u=function(e){if(e&&!e.match(/([?&]auto=)/g)){var t=e.match(/([?&]quality=[0-9]+$)/g)?"&":"?";return"".concat(e+t,"auto=webp")}return e},d=function(e,t){var n=[];if(!e||!e.crops||!t)return"";for(var i=0;i<e.crops.length;i+=1)for(var a=0;a<e.crops[i].renditions.length;a+=1){var o=e.crops[i].renditions[a];t.indexOf(o.name)>-1&&n.push("".concat(u(o.url)," ").concat(o.width,"w"))}return n.join(", ")},p=function(e){if(!e)return!1;var t=e;if(e.promotionalMedia&&(t=e.promotionalMedia),!t.crops)return!1;var n=c(t,["jumbo"]);return!!n&&n.height>n.width},f=function(e){if(!e||0===e.length)return!1;var t=e[0].creators;if(!t||0===t.length)return!1;var n=t[0];return!(!n||!n.legacyData)&&n.legacyData.htmlBiography},m=function(e){switch(e){case"column":case"news-event":case"issue":case"series":e="column";break;case"topic":e="topic";break;case"section":case"theater":case"dining":case"movies":case"realestate":e="sectionfront";break;case"spotlight":e="spotlight";break;default:e="collection"}return e},h=function(e){var t,n=null==(t=e.groupings)?void 0:t.find((function(e){return"rank"===(null==e?void 0:e.name)}));if(!n)return null;var i=n.containers.find((function(e){return"highlights"===e.name}));return i?i.template:null},g=function(e){var t=document.querySelectorAll('a[href="'.concat(null==e?void 0:e.replace(/^.*\/\/[^/]+/,""),'"]'))[0];t&&t.focus()},y=function(e,t){var n=new Map,i=function(e){e&&e.node&&n.set(e.node.id,e)};return e.forEach(i),t.forEach(i),a()(n.values())},v=["the-daily","nyt-still-processing","the-argument","book-review","music-popcast","caliphate"],b=["el-times"],_=function(e){var t,n=e.slug,i=void 0===n?"":n,a=e.language,o=void 0===a?{}:a,r=e.url,s=void 0===r?"":r;if(null!=o&&null!==(t=o.code)&&void 0!==t&&t.startsWith("es")&&i&&!b.includes(i)){var l="prd"===vi.env.ENVIRONMENT?"prd":"stg";return"".concat("prd"===l?"https://rss.nytimes.com/":"https://rss.stg.nytimes.com/","services/xml/rss/nyt/").concat(i.replace("espanol","es"),".xml")}if(!s)return"";var c=s.split("/"),u=c[c.length-1];return v.includes(u)?"https://rss.art19.com/".concat(u):"https://www.nytimes.com/svc/collections/v1/publish/".concat(s,"/rss.xml")}},NVrK:function(e,t,n){"use strict";var i,a=n("VkAN"),o=n.n(a),r=n("gcR/"),s=n.n(r),l=(n("q1tI"),n("eFc+")),c=n.n(l),u=n("Jqp9"),d=n("7IP+"),p=n.n(d),f=n("XlcC"),m=n("HTd6"),h=Object(u.css)("margin:0 auto 1rem;"),g=function(e){var t=e.data,n=e.className,i=Object(u.useTheme)().noFollowExternalLinks,a=Object(f.createMapInlineUnionWithOptions)({noFollowExternalLinks:i});return s()(p.a,{className:Object(u.cx)(h,n)},void 0,t.content.map(a))};g.displayName="DetailBlock",g.defaultProps={className:void 0},g.fragments={data:c()(i||(i=o()(["\n    fragment DetailBlock_data on DetailBlock {\n      textAlign\n      content {\n        ...TextInline_content\n      }\n    }\n    ","\n  "])),m.a.fragments.content)};t.a=g},NhHT:function(e,t,n){"use strict";var i=this&&this.__makeTemplateObject||function(e,t){return Object.defineProperty?Object.defineProperty(e,"raw",{value:t}):e.raw=t,e};Object.defineProperty(t,"__esModule",{value:!0}),t.dockBorder=t.button=t.subscriptionText=t.salePriceExpression=t.strikeThroughExpression=t.ctaContainer=t.subHeader2=t.subHeader=t.header=t.headerContainer=t.headerLogo=t.mainContent=t.headerText=void 0;var a,o,r,s,l,c,u,d,p,f,m,h,g,y=n("Jqp9"),v=n("lVLo");t.headerText=(0,y.css)(a||(a=i(["\n  font-family: ",";\n  font-size: 16px;\n  font-weight: ",";\n  line-height: 130%;\n  margin: auto 0 auto 20px;\n  padding: 10px 0;\n  text-align: center;\n\n  @media (min-width: ","px) {\n    margin: auto 0;\n  }\n"],["\n  font-family: ",";\n  font-size: 16px;\n  font-weight: ",";\n  line-height: 130%;\n  margin: auto 0 auto 20px;\n  padding: 10px 0;\n  text-align: center;\n\n  @media (min-width: ","px) {\n    margin: auto 0;\n  }\n"])),v.fonts.franklin,v.fontWeights.medium,v.widths.small),t.mainContent=(0,y.css)(o||(o=i(["\n  display: flex;\n  align-items: center;\n  justify-content: space-between;\n  background-color: #eaefe7;\n  font-family: ",";\n  border-radius: 5px;\n  padding: 24px;\n  flex-direction: column;\n  margin: 0 auto 20px;\n  width: calc(100% - 70px);\n  text-align: left;\n  height: 287px;\n\n  @media (min-width: ","px) {\n    max-width: unset;\n    width: calc(100% - 80px);\n  }\n\n  @media (min-width: ","px) {\n    flex-direction: row;\n    padding: 20px;\n    width: calc(100% - 114px);\n    justify-content: space-between;\n    text-align: left;\n    height: 130px;\n    align-items: start;\n  }\n"],["\n  display: flex;\n  align-items: center;\n  justify-content: space-between;\n  background-color: #eaefe7;\n  font-family: ",";\n  border-radius: 5px;\n  padding: 24px;\n  flex-direction: column;\n  margin: 0 auto 20px;\n  width: calc(100% - 70px);\n  text-align: left;\n  height: 287px;\n\n  @media (min-width: ","px) {\n    max-width: unset;\n    width: calc(100% - 80px);\n  }\n\n  @media (min-width: ","px) {\n    flex-direction: row;\n    padding: 20px;\n    width: calc(100% - 114px);\n    justify-content: space-between;\n    text-align: left;\n    height: 130px;\n    align-items: start;\n  }\n"])),v.fonts.franklin,v.widths.small,v.widths.small),t.headerLogo=(0,y.css)(r||(r=i(["\n  display: block;\n  & > svg {\n    width: 154px;\n    height: 20px;\n  }\n"],["\n  display: block;\n  & > svg {\n    width: 154px;\n    height: 20px;\n  }\n"]))),t.headerContainer=(0,y.css)(s||(s=i(["\n  color: ",";\n  align-self: start;\n  @media (min-width: ","px) {\n    margin: 0;\n  }\n  @media (min-width: ","px) {\n    align-self: unset;\n  }\n"],["\n  color: ",";\n  align-self: start;\n  @media (min-width: ","px) {\n    margin: 0;\n  }\n  @media (min-width: ","px) {\n    align-self: unset;\n  }\n"])),v.colors.black,v.widths.small,v.widths.small),t.header=(0,y.css)(l||(l=i(["\n  font-family: ",";\n  font-size: 18px;\n  font-weight: ",";\n  line-height: 1.5;\n  margin-top: 24px;\n\n  @media (min-width: ","px) {\n    font-size: 16px;\n    line-height: 20.8px;\n    margin-top: 20px;\n    margin-bottom: 8px;\n  }\n"],["\n  font-family: ",";\n  font-size: 18px;\n  font-weight: ",";\n  line-height: 1.5;\n  margin-top: 24px;\n\n  @media (min-width: ","px) {\n    font-size: 16px;\n    line-height: 20.8px;\n    margin-top: 20px;\n    margin-bottom: 8px;\n  }\n"])),v.fonts.franklin,v.fontWeights.semiBold,v.widths.small),t.subHeader=(0,y.css)(c||(c=i(["\n  font-family: ",";\n  font-size: 14px;\n  line-height: 18.2px;\n  font-weight: ",";\n"],["\n  font-family: ",";\n  font-size: 14px;\n  line-height: 18.2px;\n  font-weight: ",";\n"])),v.fonts.franklin,v.fontWeights.medium),t.subHeader2=(0,y.css)(u||(u=i(["\n  font-family: ",";\n  font-size: 14px;\n  line-height: 18.2px;\n  font-weight: ",";\n"],["\n  font-family: ",";\n  font-size: 14px;\n  line-height: 18.2px;\n  font-weight: ",";\n"])),v.fonts.franklin,v.fontWeights.medium),t.ctaContainer=(0,y.css)(d||(d=i(["\n  display: flex;\n  flex-direction: column;\n  width: 100%;\n  margin-top: 24px;\n  @media (min-width: ","px) {\n    align-self: center;\n    flex: 0;\n    margin-top: 0;\n  }\n"],["\n  display: flex;\n  flex-direction: column;\n  width: 100%;\n  margin-top: 24px;\n  @media (min-width: ","px) {\n    align-self: center;\n    flex: 0;\n    margin-top: 0;\n  }\n"])),v.widths.small),t.strikeThroughExpression=(0,y.css)(p||(p=i(["\n  color: ",";\n  text-decoration-line: line-through;\n  text-decoration-thickness: 1.5px;\n  font-family: ",";\n  font-size: 22px;\n  line-height: 120%;\n  font-weight: ",";\n"],["\n  color: ",";\n  text-decoration-line: line-through;\n  text-decoration-thickness: 1.5px;\n  font-family: ",";\n  font-size: 22px;\n  line-height: 120%;\n  font-weight: ",";\n"])),v.colors.suvaGrey,v.fonts.franklin,v.fontWeights.medium),t.salePriceExpression=(0,y.css)(f||(f=i(["\n  color: ",";\n  text-decoration: none;\n  font-family: ",";\n  font-weight: ",";\n  font-size: 22px;\n  line-height: 120%;\n"],["\n  color: ",";\n  text-decoration: none;\n  font-family: ",";\n  font-weight: ",";\n  font-size: 22px;\n  line-height: 120%;\n"])),v.colors.whiteDarkContentPrimary,v.fonts.franklin,v.fontWeights.bold),t.subscriptionText=(0,y.css)(m||(m=i(["\n  font-family: ",";\n  font-size: 16px;\n  font-weight: ",";\n  line-height: 130%;\n  color: ",";\n  margin-top: 4px;\n"],["\n  font-family: ",";\n  font-size: 16px;\n  font-weight: ",";\n  line-height: 130%;\n  color: ",";\n  margin-top: 4px;\n"])),v.fonts.franklin,v.fontWeights.medium,v.colors.whiteDarkContentPrimary),t.button=(0,y.css)(h||(h=i(["\n  text-decoration: none;\n  font-family: ",";\n  font-size: 14px;\n  font-weight: ",";\n  line-height: 130%;\n  color: ",";\n  background-color: ",";\n  margin-top: 8px;\n  display: flex;\n  flex-direction: column;\n  text-align: center;\n  border-radius: 3px;\n  cursor: pointer;\n  width: calc(100% - 20px);\n  width: 118px;\n  height: 32px;\n  padding: 8px 4px;\n  letter-spacing: -0.05px;\n  flex: 0;\n\n  @media (min-width: ","px) {\n    flex: 1;\n    margin-top: 7px;\n    align-self: end;\n  }\n"],["\n  text-decoration: none;\n  font-family: ",";\n  font-size: 14px;\n  font-weight: ",";\n  line-height: 130%;\n  color: ",";\n  background-color: ",";\n  margin-top: 8px;\n  display: flex;\n  flex-direction: column;\n  text-align: center;\n  border-radius: 3px;\n  cursor: pointer;\n  width: calc(100% - 20px);\n  width: 118px;\n  height: 32px;\n  padding: 8px 4px;\n  letter-spacing: -0.05px;\n  flex: 0;\n\n  @media (min-width: ","px) {\n    flex: 1;\n    margin-top: 7px;\n    align-self: end;\n  }\n"])),v.fonts.franklin,v.fontWeights.medium,v.colors.white,v.colors.black,v.widths.small),t.dockBorder=(0,y.css)(g||(g=i(["\n  border-top: 1px solid ",";\n"],["\n  border-top: 1px solid ",";\n"])),v.colors.veryDarkGrey)},Npjk:function(e,t,n){"use strict";var i=n("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=i(n("q1tI")),o=n("3WfF"),r=function(){return a.default.createElement("svg",{width:"12",height:"14",viewBox:"0 0 12 14",fill:"none","aria-hidden":!0,className:o.androidClass},a.default.createElement("path",{d:"M10.0014 13.3334C9.53888 13.3334 9.14521 13.1714 8.82044 12.8473C8.49565 12.5232 8.33325 12.1297 8.33325 11.6667C8.33325 11.5781 8.34095 11.4863 8.35634 11.3913C8.37171 11.2963 8.39479 11.2069 8.42555 11.1232L3.26402 8.08213C3.10077 8.2659 2.91103 8.40928 2.69479 8.51226C2.47855 8.61525 2.24693 8.66675 1.99992 8.66675C1.53695 8.66675 1.14344 8.50486 0.819369 8.18108C0.495291 7.8573 0.333252 7.46414 0.333252 7.00158C0.333252 6.53904 0.495291 6.14538 0.819369 5.8206C1.14344 5.49581 1.53695 5.33341 1.99992 5.33341C2.24693 5.33341 2.47855 5.38491 2.69479 5.4879C2.91103 5.59089 3.10077 5.73426 3.26402 5.91803L8.42555 2.877C8.39479 2.79324 8.37171 2.70387 8.35634 2.60888C8.34095 2.51389 8.33325 2.42207 8.33325 2.33341C8.33325 1.87045 8.49514 1.47693 8.81892 1.15286C9.14271 0.828787 9.53587 0.666748 9.9984 0.666748C10.461 0.666748 10.8546 0.828637 11.1794 1.15241C11.5042 1.4762 11.6666 1.86936 11.6666 2.3319C11.6666 2.79445 11.5045 3.18812 11.1805 3.5129C10.8564 3.83769 10.4629 4.00008 9.99992 4.00008C9.75291 4.00008 9.52129 3.94859 9.30505 3.8456C9.08881 3.74261 8.89906 3.59923 8.73582 3.41546L3.57429 6.4565C3.60505 6.54025 3.62813 6.62933 3.64352 6.72371C3.6589 6.81809 3.66659 6.90933 3.66659 6.99743C3.66659 7.08552 3.6589 7.17764 3.64352 7.2738C3.62813 7.36995 3.60505 7.45991 3.57429 7.54366L8.73582 10.5847C8.89906 10.4009 9.08881 10.2576 9.30505 10.1546C9.52129 10.0516 9.75291 10.0001 9.99992 10.0001C10.4629 10.0001 10.8564 10.162 11.1805 10.4857C11.5045 10.8095 11.6666 11.2027 11.6666 11.6652C11.6666 12.1278 11.5047 12.5215 11.1809 12.8462C10.8571 13.171 10.464 13.3334 10.0014 13.3334ZM9.99992 3.33341C10.2743 3.33341 10.5095 3.23534 10.7057 3.03918C10.9018 2.84303 10.9999 2.60777 10.9999 2.33341C10.9999 2.05906 10.9018 1.8238 10.7057 1.62765C10.5095 1.43149 10.2743 1.33341 9.99992 1.33341C9.72556 1.33341 9.49031 1.43149 9.29415 1.62765C9.098 1.8238 8.99992 2.05906 8.99992 2.33341C8.99992 2.60777 9.098 2.84303 9.29415 3.03918C9.49031 3.23534 9.72556 3.33341 9.99992 3.33341ZM1.99992 8.00008C2.27427 8.00008 2.50953 7.902 2.70569 7.70585C2.90184 7.50969 2.99992 7.27444 2.99992 7.00008C2.99992 6.72573 2.90184 6.49047 2.70569 6.29431C2.50953 6.09816 2.27427 6.00008 1.99992 6.00008C1.72556 6.00008 1.49031 6.09816 1.29415 6.29431C1.098 6.49047 0.999919 6.72573 0.999919 7.00008C0.999919 7.27444 1.098 7.50969 1.29415 7.70585C1.49031 7.902 1.72556 8.00008 1.99992 8.00008ZM9.99992 12.6667C10.2743 12.6667 10.5095 12.5687 10.7057 12.3725C10.9018 12.1764 10.9999 11.9411 10.9999 11.6667C10.9999 11.3924 10.9018 11.1571 10.7057 10.961C10.5095 10.7648 10.2743 10.6667 9.99992 10.6667C9.72556 10.6667 9.49031 10.7648 9.29415 10.961C9.098 11.1571 8.99992 11.3924 8.99992 11.6667C8.99992 11.9411 9.098 12.1764 9.29415 12.3725C9.49031 12.5687 9.72556 12.6667 9.99992 12.6667Z",fill:"white"}))};r.displayName="Android";t.default=r},Nq2c:function(e,t,n){"use strict";var i=this&&this.__makeTemplateObject||function(e,t){return Object.defineProperty?Object.defineProperty(e,"raw",{value:t}):e.raw=t,e};Object.defineProperty(t,"__esModule",{value:!0}),t.loginLink=t.longHorizontalRule=t.topperWrapClass=t.topperClass=void 0;var a,o,r,s,l=n("Jqp9"),c=n("lVLo");t.topperClass=(0,l.css)(a||(a=i(["\n  font-family: ",";\n  font-weight: 500;\n  padding-top: 24px;\n  padding-bottom: 16px;\n  text-align: center;\n  line-height: 1.2;\n  font-size: 14px;\n  color: ",";\n"],["\n  font-family: ",";\n  font-weight: 500;\n  padding-top: 24px;\n  padding-bottom: 16px;\n  text-align: center;\n  line-height: 1.2;\n  font-size: 14px;\n  color: ",";\n"])),c.fonts.franklin,c.colors.black),t.topperWrapClass=(0,l.css)(o||(o=i(["\n  display: inline-block;\n"],["\n  display: inline-block;\n"]))),t.longHorizontalRule=(0,l.css)(r||(r=i(["\n  border: 0;\n  background-color: ",";\n  height: 1px;\n  width: 100%;\n"],["\n  border: 0;\n  background-color: ",";\n  height: 1px;\n  width: 100%;\n"])),c.colors.lineGrey),t.loginLink=(0,l.css)(s||(s=i(["\n  color: ",";\n  font-weight: 700;\n  text-decoration: none;\n"],["\n  color: ",";\n  font-weight: 700;\n  text-decoration: none;\n"])),c.colors.veryDarkGrey)},"Nz+N":function(e,t,n){"use strict";var i=n("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=i(n("QILm")),o=i(n("W8MJ")),r=i(n("lwsE")),s=i(n("a1gu")),l=i(n("Nsbk")),c=i(n("7W2i")),u=i(n("uf0L")),d=["author","dateModified","datePublished","headline","alternativeHeadline","thumbnailUrl","video","audio","review","mainEntity","publisher","publication","hasPart","commentsAllowed","commentCount"];function p(e,t,n){return t=(0,l.default)(t),(0,s.default)(e,function(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return function(){return!!e}()}()?Reflect.construct(t,n||[],(0,l.default)(e).constructor):t.apply(e,n))}var f=function(e){function t(){var e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},i=n.author,o=n.dateModified,s=n.datePublished,l=n.headline,c=n.alternativeHeadline,u=n.thumbnailUrl,f=n.video,m=n.audio,h=n.review,g=n.mainEntity,y=n.publisher,v=n.publication,b=n.hasPart,_=n.commentsAllowed,w=n.commentCount,x=(0,a.default)(n,d);return(0,r.default)(this,t),(e=p(this,t,[x]))["@type"]="CreativeWork",e.author=i,e.dateModified=o,e.datePublished=s,e.headline=l,e.alternativeHeadline=c,e.thumbnailUrl=u,e.video=f,e.audio=m,e.review=h,e.mainEntity=g,e.publisher=y,e.publication=v,e.hasPart=b,e.comment=_?{"@id":"#commentsContainer"}:void 0,e.commentCount=w,e}return(0,c.default)(t,e),(0,o.default)(t)}(u.default);t.default=f},O9F4:function(e,t,n){"use strict";var i=n("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.textClass=t.reporterContainerClass=t.headshotContainerClass=t.headshotClass=t.bodyClass=void 0;var a=n("Jqp9"),o=i(n("wXC7")),r=n("3sMT");t.reporterContainerClass=(0,a.css)("display:flex;justify-content:flex-start;padding-top:5px;margin-bottom:20px;",o.default.breakpoint.small,"{padding-left:2px;}"),t.textClass=(0,a.css)("color:",r.color.content.secondary,";width:100%;p{font-family:",o.default.font.franklinBase,";font-size:",o.default.font.size(15.5),";line-height:",o.default.font.size(21),";margin-top:0;margin-bottom:0;}"),t.headshotContainerClass=(0,a.css)("width:98px;min-width:98px;height:98px;min-height:98px;border-radius:50%;overflow:hidden;margin-right:20px;background-color:",r.color.background.tertiary,";",o.default.breakpoint.small,"{width:85px;min-width:85px;height:85px;min-height:85px;}"),t.headshotClass=(0,a.css)("object-fit:cover;height:100%;width:100%;"),t.bodyClass=(0,a.css)("margin-left:20px;margin-right:20px;",o.default.breakpoint.small,"{max-width:",o.default.breakpoint.textBodyWidth,"px;margin-left:calc((100% - 600px) / 2);margin-right:0;}")},OGvp:function(e,t,n){"use strict";var i=n("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.titleClass=t.listClass=t.leadInClass=t.imageClass=t.headerClass=t.containerClass=void 0;var a=n("Jqp9"),o=i(n("3Rk2")),r=i(n("wXC7")),s=n("3sMT"),l=(0,o.default)([r.default.breakpoint.medium]);t.containerClass=(0,a.css)("font-family:",r.default.font.franklinBase,";font-weight:",r.default.font.weight.medium,";border:1px solid ",s.color.stroke.quaternary,";color:",s.color.content.secondary,";background-color:",s.color.background.primary,";max-width:600px;box-sizing:border-box;",l({fontSize:[r.default.font.size(16),r.default.font.size(17)],lineHeight:[r.default.font.size(22),r.default.font.size(24)],width:[r.default.breakpoint.mobileFullWidth,"100%"],padding:["15px 15px 20px","25px"],margin:[r.default.breakpoint.mobileBlockMargins,r.default.breakpoint.desktopStorylineMargins]})," ",r.default.printHide," strong{font-weight:",r.default.font.weight.bold,";}em{font-style:italic;}a{color:",s.color.signal.editorial,";text-decoration:underline;text-decoration-thickness:1px;text-underline-offset:1px;&:hover{text-decoration:none;}}"),t.headerClass=(0,a.css)("border-bottom:1px solid ",s.color.stroke.quaternary,";padding-bottom:12px;margin-bottom:0;"),t.titleClass=(0,a.css)("font-weight:",r.default.font.weight.bold,";margin-top:0;margin-bottom:0;",l({fontSize:[r.default.font.size(16),r.default.font.size(17)],lineHeight:[r.default.font.size(22),r.default.font.size(24)]})),t.listClass=(0,a.css)("list-style:disc;li{margin-left:0.875rem;:not(:last-child){",l({marginBottom:["10px","15px"]}),"}}",l({marginTop:["0.75rem","1rem"]})),t.leadInClass=(0,a.css)("font-weight:",r.default.font.weight.medium,";font-family:",r.default.font.franklinBase,";",l({fontSize:[r.default.font.size(16),r.default.font.size(17)],lineHeight:[r.default.font.size(22),r.default.font.size(24)]})),t.imageClass=(0,a.css)("height:14px;padding-top:5px;",l({marginBottom:["5px","10px"]}))},OLAn:function(e,t,n){"use strict";var i,a,o=n("VkAN"),r=n.n(o),s=n("gcR/"),l=n.n(s),c=(n("q1tI"),n("eFc+")),u=n.n(c),d=n("Jqp9"),p=n("xf5d"),f=function(e){var t=e.translations,n=e.className;return t&&0!==t.length?l()("div",{className:Object(d.cx)(p.b,n)},void 0,t.map((function(e){return l()("a",{className:p.a,href:e.url,"data-version":e.language.code,title:e.linkText},e.url,e.translatedLinkText?e.translatedLinkText:e.linkText)}))):null};f.displayName="TranslationLinks",f.fragments={translations:u()(i||(i=r()(["\n    fragment TranslationLinks_translations on ArticleTranslation {\n      url\n      linkText\n      translatedLinkText\n      language {\n        code\n      }\n    }\n  "]))),interactiveTranslations:u()(a||(a=r()(["\n    fragment TranslationLinks_interactiveTranslation on InteractiveTranslation {\n      url\n      linkText\n      translatedLinkText\n      language {\n        code\n      }\n    }\n  "])))},f.defaultProps={className:void 0},t.a=f},ONNS:function(e,t,n){"use strict";var i=n("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.twitterAtClass=t.socialBlockClass=t.seperatorClass=t.moreAboutClass=t.bioTreatmentStyles=t.bioLinkClass=t.authorNameClass=t.BioVariantA=t.Bio=void 0;var a=n("3sMT"),o=n("Jqp9"),r=i(n("WThh")),s=i(n("wXC7")),l=(0,r.default)(["medium"]),c=t.bioTreatmentStyles=(0,o.themeFn)("treatment",{none:function(e){return(0,o.css)("color:",a.color.content.secondary,";font-family:",s.default.font.franklinBase,";font-weight:",s.default.font.weight.medium,";",l(e,{fontSize:[15,16],lineHeight:[20,22]}),";")},magazine:function(e){return(0,o.css)("color:",a.color.content.secondary,";font-family:",s.default.font.magazineSansBase,";font-weight:",s.default.font.weight.medium,";",l(e,{fontSize:[15,16],lineHeight:[20,22]}),";")}}),u=t.twitterAtClass=(0,o.css)();t.bioLinkClass=(0,o.css)("display:inline-block;line-height:1em;.",u,"{text-decoration:none;display:inline-block;}"),t.socialBlockClass=(0,o.css)("display:inline-block;padding-left:3px;"),t.seperatorClass=(0,o.css)("color:",a.color.content.quaternary,";margin-right:0.5rem;margin-left:0.5rem;font-size:8px;"),t.moreAboutClass=(0,o.css)("font-weight:",s.default.font.weight.medium,";a.authorPageLinkClass.overrideLinkStyles{text-decoration:underline;color:",a.color.content.primary,";text-decoration-thickness:1px;text-underline-offset:2px;}a.authorPageLinkClass.overrideLinkStyles:hover,a.authorPageLinkClass.overrideLinkStyles:focus{text-decoration:none;color:",a.color.content.primary,";}"),t.authorNameClass=(0,o.css)("a.authorPageLinkClass.overrideLinkStyles,a.authorPageLinkClass.overrideLinkStyles:visited,a.authorPageLinkClass.overrideLinkStyles:hover a.authorPageLinkClass.overrideLinkStyles:focus{font-weight:",s.default.font.weight.bold,";color:",a.color.content.primary,";}a.authorPageLinkClass.overrideLinkStyles:hover a.authorPageLinkClass.overrideLinkStyles:focus{text-decoration:none;}"),t.Bio=(0,o.styled)("div",{target:"e1e7j8ap0"})(c,";color:",a.color.content.secondary,";p{margin-bottom:",s.default.font.size(12),";}a,a:visited{color:",a.color.content.primary,";text-decoration:underline;}a:hover,a:focus{color:",a.color.content.primary,";text-decoration:none;}",s.default.print,";"),t.BioVariantA=(0,o.styled)("div",{target:"e1e7j8ap1"})(c,";color:",a.color.content.secondary,";margin-bottom:0.75rem;p{margin-bottom:",s.default.font.size(12),";}a,a:visited{color:",a.color.content.primary,";text-decoration:underline;}a:hover,a:focus{color:",a.color.content.primary,";text-decoration:none;}",s.default.print,";")},OXmc:function(e,t,n){"use strict";var i=n("TqRt"),a=n("cDf5");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=i(n("J4zp")),r=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=a(e)&&"function"!=typeof e)return{default:e};var n=d(t);if(n&&n.has(e))return n.get(e);var i={__proto__:null},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var r in e)if("default"!==r&&{}.hasOwnProperty.call(e,r)){var s=o?Object.getOwnPropertyDescriptor(e,r):null;s&&(s.get||s.set)?Object.defineProperty(i,r,s):i[r]=e[r]}return i.default=e,n&&n.set(e,i),i}(n("q1tI")),s=(i(n("17x9")),i(n("WUXL"))),l=i(n("xCAf")),c=i(n("9jcr")),u=n("+rYN");function d(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(d=function(e){return e?n:t})(e)}var p=function(e){var t=e.isVisible,n=e.hideTranscript,i=e.podcastName,a=e.onPlayPause,d=e.playerRef,p=e.isPlaying,f=e.audioDuration,m=e.currentTime,h=e.headline,g=e.credits,y=e.summary,v=e.date,b=e.transcript,_=e.showControls,w=(0,r.useState)(),x=(0,o.default)(w,2),k=x[0],O=x[1];return(0,r.useEffect)((function(){var e=document.querySelector("body");t?(O(window.scrollY),e.classList.add(u.visibleBodyClass),e.style.top="-".concat(k,"px")):(e.classList.remove(u.visibleBodyClass),e.style.removeProperty("top"),void 0!==k&&window.scroll(0,k))}),[t]),r.default.createElement(u.TranscriptContainer,{isVisible:t},r.default.createElement(c.default,{onClick:n}),r.default.createElement(u.Background,{isVisible:t,onClick:n}),r.default.createElement(u.Document,{isVisible:t},r.default.createElement("div",{"aria-labelledby":"modal-title",role:"region"},r.default.createElement(s.default,{isVisible:t,hideTranscript:n,podcastName:i,onPlayPause:a,playerRef:d,isPlaying:p,audioDuration:f,currentTime:m,showControls:_}),r.default.createElement(l.default,{headline:h,credits:g,summary:y,date:v,transcript:b}))))};p.displayName="Transcript",p.defaultProps={podcastName:void 0,onPlayPause:void 0,playerRef:void 0,hideTranscript:void 0,isPlaying:void 0,audioDuration:void 0,currentTime:void 0,isVisible:void 0,headline:void 0,credits:void 0,summary:void 0,date:void 0,transcript:void 0,showControls:!0};t.default=p},"Oc+P":function(e,t,n){"use strict";n.d(t,"a",(function(){return S}));var i,a=n("VkAN"),o=n.n(a),r=n("gcR/"),s=n.n(r),l=n("lwsE"),c=n.n(l),u=n("W8MJ"),d=n.n(u),p=n("a1gu"),f=n.n(p),m=n("Nsbk"),h=n.n(m),g=n("7W2i"),y=n.n(g),v=n("q1tI"),b=n("eFc+"),_=n.n(b),w=n("M4W2"),x=n.n(w),k=n("Jqp9"),O=n("wXC7"),T=n.n(O),C=Object(k.css)("margin:",T.a.breakpoint.mobileBlockMargins,";width:",T.a.breakpoint.mobileFullWidth,";max-width:",T.a.breakpoint.textBodyWidth,"px;twitter-widget,.twitter-tweet,iframe{margin-left:auto;margin-right:auto;}",T.a.breakpoint.medium,"{margin:",T.a.breakpoint.desktopMediaMargins,";width:100%;}");function E(e,t,n){return t=h()(t),f()(e,function(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return function(){return!!e}()}()?Reflect.construct(t,n||[],h()(e).constructor):t.apply(e,n))}var S=function(e){function t(){return c()(this,t),E(this,t,arguments)}return y()(t,e),d()(t,[{key:"componentDidMount",value:function(){x()("https://platform.twitter.com/widgets.js").then((function(){var e;null!==(e=window.twttr)&&void 0!==e&&e.widgets&&window.twttr.widgets.load()}))}},{key:"render",value:function(){var e=!0===this.props.data.hideMedia?"hidden":"",t=this.props.data.html,n=t?t.replace(/<blockquote /,'<blockquote data-cards="'.concat(e,'" ')):"";return s()("div",{className:C,dangerouslySetInnerHTML:{__html:n}})}}])}(v.Component);S.displayName="TwitterEmbedBlock",S.defaultProps={hideMedia:void 0},S.fragments={data:_()(i||(i=o()(["\n    fragment TwitterEmbedBlock_data on TwitterEmbedBlock {\n      twitterUrl\n      snapshot\n      hideMedia\n      html\n    }\n  "])))}},Ogzn:function(e,t,n){"use strict";n.d(t,"b",(function(){return j}));var i,a,o=n("VkAN"),r=n.n(o),s=n("gcR/"),l=n.n(s),c=n("QILm"),u=n.n(c),d=n("lSNA"),p=n.n(d),f=n("q1tI"),m=n.n(f),h=n("eFc+"),g=n.n(h),y=n("17x9"),v=n.n(y),b=n("YNKw"),_=n.n(b),w=n("tLpV"),x=n("4mEQ"),k=n("DxDJ"),O=n.n(k),T=n("42oi"),C=n("XMA8"),E=n("mczz"),S=["data","displayStyle","linkTrackingParamOverrides","showImageCredits"];function P(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function I(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?P(Object(n),!0).forEach((function(t){p()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):P(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var M={action:"click",module:"RelatedLinks"},A=function(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=I(I({},M),n),a=["action","module"],o=function(e,t){return a.indexOf(e)-a.indexOf(t)};try{t=new URL(e)}catch(n){if("TypeError"!==n.name)return e;t=new URL(e,"https://www.nytimes.com")}var r=Object(E.g)(t,i,[],o);return r.toString()},j=function(e,t){var n=null!=e&&e.promotionalMedia?null:Object(T.a)(null==e?void 0:e.collections),i=n?Object(C.c)(n):Object(C.c)(e);return Object(b.selectImageRendition)(i,(function(e){return e.name}),t)||void 0},N=function(e){var t,n,i;return(null===(t=e.promotionalMedia)||void 0===t?void 0:t.credit)||(null===(n=e.promotionalMedia)||void 0===n||null===(i=n.promotionalMedia)||void 0===i?void 0:i.credit)},L=function(e){var t,n,i,a,o,r=e.data,s=e.displayStyle,c=e.linkTrackingParamOverrides,d=e.showImageCredits,p=u()(e,S);if(!r)return null;var f=r.headline,h=void 0===f?{}:f,g=h.default,y=h.seo,v=r.summary,b=r.promotionalHeadline,k=r.promotionalSummary,T=r.targetUrl,C=r.url,E=Object(x.getUrl)(C,T),P="".concat(null===(t=j(r,!0))||void 0===t?void 0:t.url," ").concat(null===(n=j(r,!0))||void 0===n?void 0:n.width,"w, ").concat(null===(i=j(r,!1))||void 0===i?void 0:i.url),M="(max-width:".concat(O.a.width.medium,"px) ").concat(null===(a=j(r,!0))||void 0===a?void 0:a.width,"px"),L=!j(r,!0),D="string"!=typeof s||"standard"!==s.toLowerCase()||L?null===(o=j(r,!1))||void 0===o?void 0:o.url:l()(w.RelatedLinkImage,{srcSet:P,sizes:M});return m.a.createElement(_.a,I({displayStyle:s,headline:Object(x.getHeadline)(g,b),summary:Object(x.getSummary)(v,k),media:D,caption:d&&N(r),url:E?A(E,c):null,pubDate:r.firstPublished,seoHeadline:y,typeOfMaterials:null==r?void 0:r.typeOfMaterials},p))},D=g()(i||(i=r()(['\n  fragment SharedRelatedLinkBlock_promoImage on Image {\n    id\n    credit\n    crops(\n      renditionNames: ["threeByTwoSmallAt2X", "videoLarge", "mediumThreeByTwo440", "thumbLarge"]\n    ) {\n      renditions {\n        url\n        name\n        width\n      }\n    }\n  }\n'])));L.fragments={data:g()(a||(a=r()(["\n    fragment SharedRelatedLinkBlock_data on HasPromotionalProperties {\n      promotionalHeadline\n      promotionalSummary\n      ... on CreativeWork {\n        headline {\n          default\n          seo\n        }\n        summary\n      }\n      ... on Published {\n        url\n        firstPublished\n      }\n      ... on Promo {\n        id\n        targetUrl\n      }\n      ... on Article {\n        id\n        typeOfMaterials\n        collections(type: SPOTLIGHT) @filterEmpty {\n          mobileHeader\n          promotionalMedia {\n            ...SharedRelatedLinkBlock_promoImage\n          }\n        }\n      }\n      promotionalMedia {\n        ...SharedRelatedLinkBlock_promoImage\n        ... on Video {\n          id\n          promotionalMedia {\n            ...SharedRelatedLinkBlock_promoImage\n          }\n        }\n        ... on Audio {\n          id\n          promotionalMedia {\n            ...SharedRelatedLinkBlock_promoImage\n          }\n        }\n        ... on Slideshow {\n          id\n          promotionalMedia {\n            ...SharedRelatedLinkBlock_promoImage\n          }\n        }\n        ... on Interactive {\n          id\n          promotionalMedia {\n            ...SharedRelatedLinkBlock_promoImage\n          }\n        }\n        ... on EmbeddedInteractive {\n          id\n          promotionalMedia {\n            ...SharedRelatedLinkBlock_promoImage\n          }\n        }\n      }\n    }\n    ","\n  "])),D)};v.a.shape({action:v.a.string,module:v.a.string,pgtype:v.a.string});L.defaultProps={data:null,displayStyle:"standard",linkTrackingParamOverrides:{},showImageCredits:!1},t.a=L},Ol7c:function(e,t,n){"use strict";var i=n("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.titleClass=t.singleCardClass=t.itemClass=t.contextCardClass=void 0;var a=n("Jqp9"),o=i(n("3Rk2")),r=i(n("wXC7")),s=n("3sMT"),l=(0,o.default)([r.default.breakpoint.medium]);t.contextCardClass=(0,a.css)("font-weight:",r.default.font.weight.medium,";",l({fontSize:[r.default.font.size(16),r.default.font.size(17)],lineHeight:[r.default.font.size(22),r.default.font.size(24)]})," strong{font-weight:",r.default.font.weight.bold,";}em{font-style:italic;}a{color:",s.color.signal.editorial,";text-decoration:underline;text-decoration-thickness:1px;text-underline-offset:1px;&:hover{text-decoration:none;}}"),t.titleClass=(0,a.css)("font-weight:",r.default.font.weight.bold,";",l({fontSize:[r.default.font.size(16),r.default.font.size(17)],lineHeight:[r.default.font.size(22),r.default.font.size(24)]})," margin:0;"),t.itemClass=(0,a.css)("&:not(:last-child){padding-bottom:",r.default.font.size(24),";}"),t.singleCardClass=(0,a.css)("&:not(:last-child){padding-bottom:0.7rem;}",r.default.breakpoint.small,"{&:not(:last-child){padding-bottom:1rem;}}")},OmBZ:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;t.default=function(e){return null==e?void 0:e.some((function(e){return"internal-storyline-inline-no"===(null==e?void 0:e.displayName)}))}},Oqnd:function(e,t,n){"use strict";var i=n("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.mediaFigCaptionSizeStyles=t.default=void 0;var a=n("Jqp9"),o=n("3sMT"),r=i(n("wXC7")),s=i(n("MKiQ")),l=t.mediaFigCaptionSizeStyles=(0,a.themeFn)("mediaSize",{small:function(e){return(0,a.css)("display:flex;flex-direction:column;width:calc(50% - 15px);margin:0 0 0 15px;.mediaSizeSmall &&{margin:0 0 auto 16px;}",e.theme.breakpointMap.small,"{width:260px;margin:auto 0 15px 15px;",s.default,"{margin-top:auto;}","rightToLeft"===e.theme.languageDirection?"margin-right:7px":null,";}",e.theme.breakpointMap.medium,"{margin-left:15px;}",e.theme.breakpointMap.extraLarge,"{width:330px;margin-left:15px;}")},medium:function(e){return(0,a.css)(e.theme.breakpointMap.extraLarge,"{max-width:",r.default.breakpoint.textBodyWidthExtraLarge,"px;}")},large:function(e){return(0,a.css)("max-width:none;",e.theme.breakpointMap.small,"{margin-left:",r.default.grid.pageMargin,"px;}",e.theme.breakpointMap.medium,"{margin-left:",r.default.grid.pageMargin,"px;}",e.theme.breakpointMap.mediumLarge,"{max-width:",r.default.breakpoint.mediumMediaExtralarge,"px;margin-left:0;}",e.theme.breakpointMap.extraLarge,"{width:900px;margin-left:0;}")},full:function(e){return(0,a.css)("max-width:",r.default.breakpoint.textBodyWidth,"px;","rightToLeft"===e.theme.languageDirection?"margin-right: ".concat(r.default.grid.pageMargin,"px"):"margin-left: ".concat(r.default.grid.pageMargin,"px"),";",e.theme.breakpointMap.small,"{max-width:900px;","rightToLeft"===e.theme.languageDirection?"margin-right: ".concat(r.default.grid.pageMargin,"px"):"margin-left: ".concat(r.default.grid.pageMargin,"px;"),";}",e.theme.breakpointMap.medium,"{max-width:900px;}",e.theme.breakpointMap.extraLarge,"{max-width:900px;}")}}),c=(0,a.themeFn)("languageDirection",{rightToLeft:(0,a.css)("text-align:right;direction:rtl;unicode-bidi:isolate;")}),u=(0,a.styled)("figcaption",{target:"ewdxa0s0"})("font-family:",r.default.font.serifBase,";color:",o.color.content.quaternary,";a{color:",o.color.signal.editorial,";text-decoration:underline;text-decoration-thickness:1px;text-underline-offset:1px;&:hover,&:focus{text-decoration:none;}}margin:10px ",r.default.grid.pageMargin,"px 0 ",r.default.grid.pageMargin,"px;text-align:left;",(function(e){return"\n    ".concat(e.theme.breakpointMap.small," {\n      ").concat("rightToLeft"===e.theme.languageDirection?"margin-left: 20px;margin-right: 0;":"margin-left: 0;margin-right: 20px;","\n    }\n  ")}),";",l,";",c,";");t.default=u},Ow4k:function(e,t,n){"use strict";t.a="/vi-assets/static-assets/icon-open-thread-fashion_144x144-8e1b4b3fd68c2f333faa63097da2249b.webp"},"OwL/":function(e,t,n){"use strict";var i=n("gcR/"),a=n.n(i),o=n("pVnL"),r=n.n(o),s=n("q1tI"),l=n.n(s),c=n("2mql"),u=n.n(c),d=n("FSO8");t.a=function(e){var t=function(t){return a()(d.a.Consumer,{},void 0,(function(n){return l.a.createElement(e,r()({},t,{newsletterContext:n}))}))},n=e.displayName||e.name;return t.displayName="withNewsletters(".concat(n,")"),t.WrappedComponent=e,u()(t,e),t}},"P3/q":function(e,t,n){"use strict";var i=n("VkAN"),a=n.n(i),o=n("gcR/"),r=n.n(o),s=n("lSNA"),l=n.n(s),c=n("q1tI"),u=n.n(c),d=n("eFc+"),p=n.n(d),f=n("4uw1"),m=n("9ref"),h=n("WGfQ"),g=n.n(h),y=n("U3NM"),v=n.n(y),b=n("510Z"),_=function(e){var t=e.thumbnail,n=void 0===t?{}:t,i=e.media,a=void 0===i?{}:i;if(!n||!n.url)return null;var o=a.podcastSeries;return r()(b.a,{size:"SMALL",alt:"".concat(o.title," Poster"),defaultCropSrc:n.url})};_.displayName="Thumbnail",_.defaultProps={thumbnail:null,media:null};var w=_,x=n("Jqp9"),k=n("3sMT"),O=n("wXC7"),T=n.n(O),C=Object(x.css)("display:block;background:",k.light.colors.background.primary.hex,";",T.a.printHide,";"),E=function(e){return r()("div",{className:C},void 0,r()(m.a,{media:e.media}),e.children)};E.displayName="Player",E.defaultProps={media:null,children:void 0};var S=E,P=n("t0IW"),I=function(e){var t=e.podcastSeries;if(!t||!t.image)return null;var n=(null==t?void 0:t.image).crops,i=void 0===n?[]:n,a=i.length&&i.reduce((function(e,t){return e||t.renditions.find((function(e){return"thumbStandard"===e.name}))||null}),null);if(!a||!a.url)return null;var o=a.url,s=void 0===o?"":o,l=i[0].renditions,c=void 0===l?[]:l,u={quality:100,auto:"webp"},d=c.map((function(e){return"".concat(Object(P.a)(e.url,u)," ").concat(e.width,"w")}));return r()(b.a,{defaultCropSrc:s,renditions:c,srcSet:d,sizes:"(max-width: 600px) 120px, (max-width: 1024px) 165px, 205px"})};I.displayName="AudioThumbnail",I.defaultProps={podcastSeries:{}};var M,A=I;function j(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function N(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?j(Object(n),!0).forEach((function(t){l()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):j(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var L=function(e){var t;if(!Object(f.a)())return u.a.createElement(g.a,N(N({},e),{},{playerComponent:S,thumbnailComponent:w}));var n=e.article,i=e.data,a=((null==i?void 0:i.media)||{}).podcastSeries,o=null==n||null===(t=n.headline)||void 0===t?void 0:t.default,s=null==n?void 0:n.url,l=null==n?void 0:n.uri,c=null==n?void 0:n.promotionalImage,d=r()(A,{podcastSeries:a});return u.a.createElement(v.a,N(N({},e),{},{playerComponent:S,thumbnailComponent:w,headline:o,uri:s,url:l,promotionalImage:c,ImageComponent:d}))};L.fragments={data:p()(M||(M=a()(['\n    fragment AudioBlock_data on AudioBlock {\n      media {\n        id\n        headline {\n          default\n        }\n        promotionalHeadline\n        length\n        sourceId\n        summary\n        podcastSeries {\n          title\n          summary\n          image {\n            id\n            crops(renditionNames: ["thumbStandard", "thumbLarge"]) {\n              renditions {\n                url\n                name\n                width\n                height\n              }\n            }\n          }\n        }\n        uri\n        firstPublished\n        ...SpanAudio_media\n      }\n    }\n    ',"\n  "])),m.a.fragments.media)},L.defaultProps={article:{},data:null};t.a=L},P8eT:function(e,t,n){"use strict";var i=n("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.swiperNavClass=t.quoteCardClass=void 0;var a=n("Jqp9"),o=n("3sMT"),r=i(n("wXC7"));t.swiperNavClass=(0,a.css)("display:flex;flex-direction:row;justify-content:center;position:relative;min-height:40px;"),t.quoteCardClass=(0,a.css)("display:flex;flex-direction:column;justify-content:space-between;height:100%;font-family:",r.default.font.cheltenham,";font-size:",r.default.font.size(21),";line-height:",r.default.font.size(27),";font-weight:",r.default.font.weight.light,";",r.default.breakpoint.small,"{font-size:",r.default.font.size(22),";line-height:",r.default.font.size(28),";}strong{font-weight:",r.default.font.weight.bold,";}em{font-style:italic;}a{color:",o.color.signal.editorial,";text-decoration:underline;text-decoration-thickness:1px;text-underline-offset:1px;&:hover{text-decoration:none;}}")},PCFz:function(e,t,n){"use strict";var i,a,o,r,s=n("lSNA"),l=n.n(s),c=n("q1tI"),u=n.n(c),d=n("X6oL"),p=n("Jqp9"),f=n("gcR/"),m=n.n(f),h=n("PgO9"),g=n("HUmG"),y=u.a.forwardRef((function(e,t){var n=e.redirectUri,s=Object(h.a)().user,l=Object(g.d)(s)?"".concat(vi.env.AUTH_HOST,"/oauth/authorize"):n;return u.a.createElement("form",{ref:t,style:{visibility:"hidden"},method:"post",action:l,"data-testid":"MagicLinkForm"},i||(i=m()("input",{value:"web.fwk.vi",name:"client_id",type:"hidden"})),m()("input",{value:n,name:"redirect_uri",type:"hidden"}),a||(a=m()("input",{value:"code",name:"response_type",type:"hidden"})),o||(o=m()("input",{value:"no-state",name:"state",type:"hidden"})),r||(r=m()("input",{value:"default",name:"scope",type:"hidden"})))}));y.displayName="MagicLinkForm";var v=y;function b(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}var _=Object(p.css)("background:none;border-radius:10px;"),w=u.a.forwardRef((function(e,t){var n=e.className,i=e.trackingObject,a=e.children,o=e.redirectUri,r=e.handleClick,s=Object(d.useTracking)().trackEvent,c=u.a.useRef(null);return u.a.createElement(u.a.Fragment,null,u.a.createElement("button",{ref:t,type:"button",onClick:function(){var e=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?b(Object(n),!0).forEach((function(t){l()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):b(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({eventCallback:function(){r&&r(),c.current&&c.current.submit()},event:"moduleInteraction",eventData:{trigger:"module",type:"ob_click"},module:{element:{url:o}}},i);s(e)},className:Object(p.cx)(_,n),"data-testid":"getstarted-magic-link"},a),u.a.createElement(v,{ref:c,redirectUri:o}))}));w.defaultProps={trackingObject:{},className:void 0,children:"Read in the app",handleClick:null};t.a=w},PVii:function(e,t,n){"use strict";var i=this&&this.__createBinding||(Object.create?function(e,t,n,i){void 0===i&&(i=n);var a=Object.getOwnPropertyDescriptor(t,n);a&&!("get"in a?!t.__esModule:a.writable||a.configurable)||(a={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,i,a)}:function(e,t,n,i){void 0===i&&(i=n),e[i]=t[n]}),a=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&i(t,e,n);return a(t,e),t},r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var s=o(n("q1tI")),l=r(n("5UIh")),c=n("syiw"),u=o(n("TUmO")),d=n("etPP"),p=n("6gWn"),f=r(n("EhNO"));t.default=function(e){var t,n,i,a,o,r=e.unit,m=(0,c.useMessageSelection)({config:{name:"dock"}}),h=(0,s.useState)(!0),g=h[0],y=h[1],v=g?s.default.createElement("p",{className:u.headerTextClass},null===(t=r.content)||void 0===t?void 0:t.headerText):s.default.createElement("p",{className:u.headerTextClass},"Free lesson plans, writing prompts and activities for students, all based on Times journalism."),b=s.default.createElement("div",{className:u.mainContent},s.default.createElement("div",{className:u.logoClass},s.default.createElement(f.default,null)),s.default.createElement("p",{className:u.contentTextClass},null===(n=r.content)||void 0===n?void 0:n.contentText),s.default.createElement(d.Button,{component:"a",testId:"dock-content-".concat(String(null===(i=null==r?void 0:r.content)||void 0===i?void 0:i.cta)),href:null===(a=null==r?void 0:r.content)||void 0===a?void 0:a.url,className:u.buttonClass},null===(o=null==r?void 0:r.content)||void 0===o?void 0:o.cta));return m.loading?null:s.default.createElement(l.default,{testId:"onsite-messaging-unit-".concat(null===p.config||void 0===p.config?void 0:p.config.name),"data-campaign":null==r?void 0:r.campaign,"data-audience":null==r?void 0:r.audience,unit:r,contentID:"MX_ENGAGE_LEARNING_NETWORK_NEWSLETTER_223",dockID:"Learning Network Newsletter - 223",header:v,card:b,onDockHeadingClick:function(){y((function(e){return!e}))},isDockDismissible:!1,minimized:!1,headerCollapsedCTA:"EXPAND",headerExpandedCTA:"COLLAPSE"})}},PWuI:function(e,t,n){"use strict";var i=n("lSNA"),a=n.n(i),o=n("gcR/"),r=n.n(o),s=n("q1tI"),l=n("vftj"),c=n("pQqS"),u=n("SYzA"),d=n("hU1o"),p=n("BPYT"),f=n("U6jc"),m=n("CsDw"),h=n("2Y8s"),g=n("E7dQ"),y=n("x04V");function v(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}var b,_=function(e,t){var n,i,a=null===(n=window)||void 0===n||null===(i=n.NativeBridge)||void 0===i?void 0:i.sendDataDogLog;a&&a(t,e).catch((function(e){-1===e.message.indexOf("unknownCommand")&&console.log(e)}))},w=function(e){var t=e.id,n=e.position,i=e.slot,o=Object(h.a)(),r=Object(g.a)(o),s=Object(y.a)(i,o);_(function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?v(Object(n),!0).forEach((function(t){a()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):v(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({id:t,position:n,pageType:r},s),m.d.AD_REQUEST)},x=function(e){var t,n=e.id,i=e.position,a=Object(h.a)(),o=Object(g.a)(a);t=e.sourceAgnosticCreativeId?m.d.AD_FETCH_SUCCESS:m.d.AD_FETCH_ERROR,_({id:n,position:i,pageType:o},t)},k=function(e){var t=e.id,n=e.position,i=e.type,a=e.isEmpty,o=Object(h.a)(),r=Object(g.a)(o);a?_({id:t,position:n,pageType:r},m.d.AD_NO_FILL):_({id:t,type:i,pageType:r},m.d.AD_EMPTY_OTHER)},O=!1,T=n("f6wl"),C=n.n(T),E=n("W61k"),S=n.n(E),P=n("6D+t"),I=n.n(P),M=n("Rb+W"),A=n("tl88"),j=n.n(A),N=n("9qba"),L=n.n(N),D=n("6Hb6"),R=n.n(D),B=n("X6oL"),z=n("fZdH"),F=n("J4zp"),U=n.n(F),H=n("NW2b"),W=n("MzAb"),q=n.n(W),V=n("pfWQ"),G=n.n(V),Y=function(e){var t,n,i,a,o,r=e.id;if(!G()().getAdOnPage||!r||!e)return!1;var s,l,c,u=null===(t=G()().getAdOnPage(r))||void 0===t?void 0:t.renderedSize,d=null==u?void 0:u[1],p=null===(n=window)||void 0===n||null===(i=n.document)||void 0===i?void 0:i.getElementById(r),f=null==p?void 0:p.parentElement,m=(null===(a=window)||void 0===a?void 0:a.innerWidth)>970?"large":"medium",h="large"===m?970:728,g=(s=d,{large:[[728,90],[970,90],[970,250]],medium:[[728,90],[300,250]]}[m].filter((function(e){return e[1]===s&&(l=e),l})),l);void 0===(null===(o=G()().getAdOnPage(r))||void 0===o?void 0:o.isAdRefreshed)&&g&&(G()().getAdOnPage(r).isAdRefreshed=!0,e.slot.defineSizeMapping(null===(c=window.googletag)||void 0===c?void 0:c.sizeMapping().addSize([h,0],g).build()),f&&f.style&&(f.style.height=window.getComputedStyle(f).height,f.style.overflow="hidden"));return!!g},X=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(e.setTargeting&&e.getTargeting){var t,n=Number(null===(t=e.getTargeting("refresh_ct"))||void 0===t?void 0:t[0])+1||1;return e.setTargeting("refresh_ct",n),n}return NaN},Z=function(e){return function(t){var n,i=function(){if("undefined"==typeof window)return 120;var e=new URLSearchParams(window.location.search),t=Number(e.get("ad-refresh-override")||120);return Number.isNaN(t)?120:t}(),a=(null==t||null===(n=t.slot)||void 0===n?void 0:n.getResponseInformation()).advertiserId,o=t.id;if(o){var r=e.get(o);if(r&&(clearTimeout(r),e.delete(o)),21966278===a){var s=setTimeout(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return function(){var t,n,i=e.id,a=e.slot;Y(e)&&(X(a),null===(t=(n=G()()).refreshAd)||void 0===t||t.call(n,i))}}(t),1e3*i);e.set(o,s)}}}},J=function(e,t){if(e&&t){var n=Object(s.useState)(!1),i=U()(n,2),a=i[0],o=i[1];Object(s.useEffect)((function(){var t;if(!a&&null!==(t=e.DFP_AdRefresh_0123)&&void 0!==t&&t.variant){var n=e.DFP_AdRefresh_0123.variant;n&&Object(H.e)("DFP_AdRefresh_0123"),"1_AdRefresh"===n&&function(){if("undefined"!=typeof window){var e=new Map,t=Z(e),n=function(t){if(t.id){var n=e.get(t.id);n&&(clearTimeout(n),e.delete(t.id))}};q()((function(){Object(f.handleImpressionViewable)("all",t),Object(f.handleAdRequestSent)("all",n),Object(f.handleSlotEmpty)("all",n)}))}}(),o(!0)}}),[e,a,t])}};function K(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function $(e){var t,n,i,o=e.section,s=e.route,m=e.adTargeting,h=e.adUnitPath,g=e.options,y=e.aliceOpts,v=e.prebidOpts,_=e.children,T=Object(u.a)(),E=Object(d.a)().fastlyAbraConfig,P=Object(B.useTracking)().trackEvent,A=Object(M.e)(s),N=!["learning"].includes(o),D=["vi-story","vi-homepage"].includes(s),F=null==A?void 0:A.dfp,U=null==m?void 0:m.typ,H=Object(z.a)();J(H,function(e){return["vi-story"].includes(e)}(s));var W={adToggleMap:A,pageType:U,section:o,isSectionHbEligible:N,setFastFetch:D,prebidOverrides:v,headerBidding:{useAmazon:!0,usePrebid:!0}},q="world"===o;return Object(p.a)(P),"livebl"===m.typ&&T&&("undefined"==typeof window||O||(O=!0,Object(f.handleAdRequestSent)("all",w),Object(f.handleSlotRendered)("all",x),Object(f.handleSlotEmpty)("all",k))),r()(l.Helmet,{prioritizeSeoTags:!0},void 0,r()("script",{},void 0,"\n          ".concat(R()(),"\n          ").concat(L()(F),"\n          ").concat(I()(F),"\n        ")),q&&(b||(b=r()("script",{src:"https://www.nytimes.com/ads/parakeet.min.js"}))),r()("script",{id:"als-svc"},void 0,S()(null==y?void 0:y.canonicalLink,null==y?void 0:y.assetUri,"als_toggle",U)),q&&r()("script",{},void 0,"Parakeet.SetStorageOrigin(new URL('https://edge.microsoft.com/parakeet/frame.html'));"),r()("script",{id:"adslot-config"},void 0,"(function() {\n            ".concat(Object(c.adScripts)(),"\n            ").concat(j()(W),"\n            ").concat(C()(function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?K(Object(n),!0).forEach((function(t){a()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):K(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({adTargeting:m,adUnitPath:h,dfpToggleName:null==A?void 0:A.dfp,adsDisabled:!(null==h||null===(t=h.toLowerCase)||void 0===t||null===(n=(i=t.call(h)).includes)||void 0===n||!n.call(i,"tragedy"))},g),E),"\n          })();\n        ")),_)}$.displayName="AdHelmet",$.defaultProps={section:"",adTargeting:{},options:{},aliceOpts:{},prebidOpts:{},children:null};t.a=$},"PY+t":function(e,t,n){"use strict";var i=n("TqRt"),a=n("cDf5");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=i(n("lSNA")),r=i(n("J4zp")),s=d(n("q1tI")),l=n("Jqp9"),c=d(n("11u6"));function u(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(u=function(e){return e?n:t})(e)}function d(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=a(e)&&"function"!=typeof e)return{default:e};var n=u(t);if(n&&n.has(e))return n.get(e);var i={__proto__:null},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var r in e)if("default"!==r&&{}.hasOwnProperty.call(e,r)){var s=o?Object.getOwnPropertyDescriptor(e,r):null;s&&(s.get||s.set)?Object.defineProperty(i,r,s):i[r]=e[r]}return i.default=e,n&&n.set(e,i),i}t.default=function(e){var t=e.isOpen,n=void 0===t||t,i=e.label,a=e.children,u=e.onCloseX,d=e.onClickOutside,p=e.onClick,f=e.alignAdjust,m=void 0===f?{x:0,y:0}:f,h=e.caretAlign,g=void 0===h?"left":h,y=(0,s.useRef)(null),v=(0,s.useId)(),b=(0,s.useState)(n),_=(0,r.default)(b,2),w=_[0],x=_[1],k=(0,s.useCallback)((function(e){e.stopPropagation(),null==u||u(),x(!1)}),[u]),O=(0,s.useCallback)((function(e){"Escape"===e.key&&w&&(null==u||u(),x(!1))}),[w,u]),T=(0,s.useCallback)((function(e){if(w){if(!d)return document.removeEventListener("keydown",O),void document.documentElement.addEventListener("click",T);var t=e.target,n="#".concat(v.replaceAll(":","\\:"));t.closest(n)!==y.current&&(d(),x(!1),document.removeEventListener("keydown",O),document.documentElement.addEventListener("click",T))}}),[v,w,O,d]);(0,s.useEffect)((function(){return document.addEventListener("keydown",O),document.documentElement.addEventListener("click",T),function(){document.removeEventListener("keydown",O),document.documentElement.addEventListener("click",T)}}),[O,T]);var C=p?s.default.createElement("button",{type:"button",onClick:function(e){e.stopPropagation(),p(),x(!1)},className:c.childrenWrapperClass({noLabel:!i})},a):s.default.createElement("div",{className:c.childrenWrapperClass({noLabel:!i})},a);return w?s.default.createElement("dialog",{ref:y,id:v,open:!0,className:c.dialogWrapperClass(m)},s.default.createElement("div",{className:(0,l.cx)(c.outerCaretClass,(0,o.default)({},c.caretRightClass,"right"===g))},s.default.createElement("div",{className:c.innerCaretClass})),s.default.createElement("form",{method:"dialog"},s.default.createElement("button",{type:"button","aria-label":"Close dialog",onClick:k,className:c.closeButtonClass({noLabel:!i})},s.default.createElement("svg",{width:"16",height:"16",viewBox:"0 0 16 16",fill:"#363636",xmlns:"http://www.w3.org/2000/svg","aria-hidden":"true"},s.default.createElement("path",{d:"M6.58807 8.00177L2 12.5898L3.41421 14.0041L8.00229 9.41598L12.59 14.0037L14.0042 12.5895L9.4165 8.00177L14.0041 3.41421L12.5898 2L8.00229 6.58756L3.42007 2.00534L2.00586 3.41956L6.58807 8.00177Z",fill:"#363636"})))),i&&s.default.createElement("p",{className:c.labelClass},i),C):null}},PcXc:function(e,t,n){"use strict";var i=n("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=i(n("q1tI")),o=(i(n("17x9")),n("1gPk")),r=function(e){var t=e.children;return a.default.createElement("sup",{className:o.superscriptClass},t)};r.displayName="SuperscriptFormat";t.default=r},PcbQ:function(e,t,n){"use strict";var i=n("TqRt"),a=n("cDf5");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=a(e)&&"function"!=typeof e)return{default:e};var n=d(t);if(n&&n.has(e))return n.get(e);var i={__proto__:null},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var r in e)if("default"!==r&&{}.hasOwnProperty.call(e,r)){var s=o?Object.getOwnPropertyDescriptor(e,r):null;s&&(s.get||s.set)?Object.defineProperty(i,r,s):i[r]=e[r]}return i.default=e,n&&n.set(e,i),i}(n("q1tI")),r=(i(n("17x9")),n("Jqp9")),s=i(n("Vcud")),l=n("WF6m"),c=n("Cebk"),u=n("AKP5");function d(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(d=function(e){return e?n:t})(e)}var p=o.default.forwardRef((function(e,t){var n=e.a11yLabel,i=e.children,a=e.id,d=e.onSwipe,p=e.scrolledIndex,f=(0,u.debounce)((function(e){var t=(0,u.getScrolledIndex)(e);d(t)}));return(0,o.useEffect)((function(){var e=null!=t&&t.current?(0,c.handleKeyNavigation)(t.current):u.noop;return document.addEventListener("keyup",e,!0),function(){document.removeEventListener("keyup",e,!0)}}),[t]),o.default.createElement("div",{id:a,"aria-live":"polite","aria-atomic":!0},o.default.createElement(s.default,null,n),o.default.createElement("div",{ref:t,"data-scrolled-index":p,className:(0,r.cx)("swiper",l.swiperClass),onScroll:function(e){return f(e.target)}},o.default.Children.map(i,(function(e,t){return o.default.createElement("div",{className:l.slideClass,"aria-hidden":t!==p},e)}))))}));p.defaultProps={a11yLabel:void 0,id:void 0};t.default=p},"PlW/":function(e,t,n){"use strict";t.a="/vi-assets/static-assets/icon-well_144x144-433c9d15dc985dded9b705942592c6fb.webp"},"Pm+9":function(e,t,n){"use strict";var i,a=n("VkAN"),o=n.n(a),r=n("gcR/"),s=n.n(r),l=n("lSNA"),c=n.n(l),u=n("q1tI"),d=n.n(u),p=n("eFc+"),f=n.n(p),m=n("boCj"),h=n("XQm6"),g=n.n(h),y=n("Uxaz"),v=n("ZKN5"),b=n("YWmT"),_=n("2XMp"),w=n("e9RS"),x=n("fZdH"),k=n("4KZX");function O(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function T(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?O(Object(n),!0).forEach((function(t){c()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):O(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function C(e){var t,n=e.storyline,i=e.parentUri,a=e.pageType,o=e.testName,r=e.ruleName,l=e.region,c=Object(x.a)(),p=null==c||null===(t=c[y.STRUCTURED_INLINE_MODULES.name])||void 0===t?void 0:t.variant,f=Object(u.useMemo)((function(){return{region:l,block:"storyline_flex_guide_recirc",name:r,variant:"show",pgtype:a}}),[a,l,r]),h=Object(u.useMemo)((function(){return T(T({},n),{},{experimentalJsonBlob:Object(_.a)(T(T({},f),{},{html:n.experimentalJsonBlob}))})}),[f,n]);return s()(b.a,{componentName:"flex_guide",region:l,parentUri:i,testName:o,ruleName:r,pageType:a},void 0,(function(e){var t=e.trackImpression,i=e.trackInteraction;return t?s()(m.InView,{onChange:function(e){e&&t()},triggerOnce:!0},void 0,s()(k.a,{name:"guide",uri:n.uri,isFooter:!0,isInlineModule:!0}),s()(g.a,{storyline:h,trackEvent:t,trackImpression:t,trackingParams:f,trackLinkInteraction:i,isUnstructuredInlineModule:!p||p===y.STRUCTURED_INLINE_MODULES.control})):d.a.createElement(d.a.Fragment,null,s()(k.a,{name:"guide",uri:n.uri,isFooter:!0,isInlineModule:!0}),s()(g.a,{storyline:h,trackEvent:t,trackImpression:t,trackingParams:f,trackLinkInteraction:i,isUnstructuredInlineModule:!p||p===y.STRUCTURED_INLINE_MODULES.control}))}))}C.displayName="StorylineGuideBlock",C.defaultProps={testName:null},C.fragments={creativeWork:f()(i||(i=o()(["\n    fragment StorylineGuideBlock_creativeWork on CreativeWork {\n      __typename\n      storylines {\n        testName\n        ruleName\n        storyline {\n          experimentalJsonBlob\n          guide {\n            displayName\n            leadIn\n            sections {\n              items {\n                content {\n                  __typename\n                  ...StorylineParagraphBlock_content\n                  ...StorylineListBlock_content\n                }\n              }\n            }\n          }\n        }\n      }\n      ... on Published {\n        uri\n      }\n    }\n    ","\n    ","\n  "])),w.a.listBlock,w.a.paragraphBlock)},t.a=Object(v.a)(C)},Pmun:function(e,t,n){"use strict";var i=n("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=i(n("dlfA"));t.default=a.default},PxMw:function(e,t,n){"use strict";var i=n("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=i(n("lSNA")),o=i(n("QILm")),r=i(n("q1tI")),s=(i(n("17x9")),n("Jqp9")),l=i(n("wXC7")),c=["theme","className"],u=["isLink"];function d(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}var p=r.default.forwardRef((function(e,t){var n=e.theme,i=e.className,p=(0,o.default)(e,c),f=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?d(Object(n),!0).forEach((function(t){(0,a.default)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):d(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({className:(0,s.cx)(i,l.default.button[n]||l.default.button.default),ref:t},p),m=(f.isLink,(0,o.default)(f,u)),h=Object.keys(p).includes("href");return r.default.createElement(h?"a":"button",m)}));p.defaultProps={className:void 0,theme:"default",children:null};t.default=p},Q3jP:function(e,t,n){"use strict";var i,a=n("VkAN"),o=n.n(a),r=n("gcR/"),s=n.n(r),l=(n("q1tI"),n("InUh")),c=n.n(l),u=n("eFc+"),d=n.n(u),p=n("X6oL"),f=n("pCca"),m=c()((function(){return Promise.all([n.e(184),n.e(144)]).then(n.bind(null,"wA7L"))}),{loadableGenerated:{webpack:function(){return["wA7L"]},modules:["./SharedReviewHeader"]}});function h(e){var t=e.article,n=Object(p.useTracking)().trackEvent,i=Object(f.a)().deviceType;return s()(m,{article:t,deviceType:i,trackMoreInfo:function(){n({event:"moduleInteraction",eventData:{pagetype:"article",trigger:"module",type:"click"},module:{name:"review",context:"",label:"",region:"review-header",element:{name:"more-information",label:"More Information",url:""}}})},trackClick:function(e){n({event:"moduleInteraction",eventData:{pagetype:"article",trigger:"module",type:"click"},module:{name:"review",context:"",label:"",region:"review-header",element:{name:"restaurant"===e?"reserve-a-table":"find-tickets",label:"restaurant"===e?"Reserve A Table":"Find Tickets",url:""}}})},trackCall:function(){n({event:"moduleInteraction",eventData:{pagetype:"article",trigger:"module",type:"click"},module:{name:"review",context:"",label:"",region:"review-header",element:{name:"call",label:"Call",url:""}}})}})}h.displayName="ReviewHeader",h.fragments={article:d()(i||(i=o()(["\n    fragment ReviewHeader_article on Article {\n      id\n      compatibility {\n        isArtReview\n        isBookReview\n        isDiningReview\n        isMovieReview\n        isTheaterReview\n      }\n      url\n      reviewSummary\n      firstPublished\n      bylines {\n        creators {\n          ... on Person {\n            id\n            displayName\n            url\n            bioUrl\n          }\n        }\n      }\n      reviewItems {\n        overrideLabel\n        isCriticsPick\n        subject {\n          __typename\n          ... on Book {\n            buyLinks {\n              sellerName\n              url\n            }\n          }\n          ... on Restaurant {\n            id\n            name\n            reservationsUrl\n            openStatus\n            rating\n            cuisines\n            priceCategory\n            summary\n            recommendedDishes\n            wineList\n            openHours\n            takesReservations\n            website\n            cuisines\n            rating\n            restaurantImage {\n              id\n              crops(cropNames: [THREE_BY_TWO]) {\n                renditions {\n                  url\n                }\n              }\n            }\n            coordinates {\n              latitude\n              longitude\n            }\n            contactDetails {\n              phoneNumbers {\n                type\n                number\n              }\n              addresses {\n                address {\n                  country\n                  locality\n                  region\n                  postalCode\n                  streetAddress\n                }\n              }\n            }\n          }\n          ... on Movie {\n            title\n            ticketUrl\n            movieRating: rating\n            runtimeUS\n            genres\n            directors\n            releaseDateUS\n            imdbId\n          }\n        }\n      }\n    }\n  "])))},t.a=h},QDH1:function(e,t,n){"use strict";var i=n("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.filterExpiredItems=function(e){return Object.keys(e).reduce((function(t,n){var i=e[n];return Array.isArray(i)?t:Date.now()-(null==i?void 0:i.lastModified)<864e5?u(u({},t),{},(0,o.default)({},n,i)):t}),{})},t.getHeadingData=t.getBoldNavMap=void 0,t.getNewHeadings=function(e,t){var n=e.map((function(e){return e.join("")}));return t.filter((function(e){var t=e.content.join("");return n.every((function(e){return d(e,t)>.5}))})).map((function(e){return e.contentLink}))},t.getNormalizedDistance=d,t.isArticleLive=void 0;var a=i(n("RIqP")),o=i(n("lSNA")),r=n("V6Yu"),s=i(n("XlcC")),l=n("5ON2");function c(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function u(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?c(Object(n),!0).forEach((function(t){(0,o.default)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):c(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function d(e,t){var n=Math.max(e.length,t.length);return function(e,t){var n=e.toLowerCase().trim(),i=t.toLowerCase().trim();if(0===n.length)return i.length;if(0===i.length)return n.length;for(var a=[],o=0;o<=i.length;o+=1)a[o]=[o];for(var r=0;r<=n.length;r+=1)a[0][r]=r;for(var s=1;s<=i.length;s+=1)for(var l=1;l<=n.length;l+=1)i.charAt(s-1)===n.charAt(l-1)?a[s][l]=a[s-1][l-1]:a[s][l]=Math.min(a[s-1][l-1]+1,a[s][l-1]+1,a[s-1][l]+1);return a[i.length][n.length]}(e,t)/n}t.isArticleLive=function(e){var t,n=l.ArticleReader.getMatchingBlocks({article:e,test:function(e){return"HeaderLiveBriefingBlock"===e.__typename}});return Boolean(null===(t=n[0])||void 0===t?void 0:t.latestUpdate)},t.getHeadingData=function(e){return l.ArticleReader.getMatchingBlocks({article:e,test:function(e){return"Heading2Block"===e.__typename}}).map((function(e){var t;return{content:(t=[]).concat.apply(t,(0,a.default)(e.content.map(s.default))),contentLink:(0,r.generateContentLink)(e.content)}}))},t.getBoldNavMap=function(e,t){return Object.fromEntries(e.map((function(n,i){var a=n.contentLink,o=e[i+1],r=document.getElementById(a).offsetTop,s=o&&document.getElementById(o.contentLink).offsetTop;return[a,t>r&&t<s||t>r&&!o]})))}},QGGS:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n("Febw");Object.keys(i).forEach((function(e){"default"!==e&&"__esModule"!==e&&(e in t&&t[e]===i[e]||Object.defineProperty(t,e,{enumerable:!0,get:function(){return i[e]}}))}));var a=n("ifco");Object.keys(a).forEach((function(e){"default"!==e&&"__esModule"!==e&&(e in t&&t[e]===a[e]||Object.defineProperty(t,e,{enumerable:!0,get:function(){return a[e]}}))}));var o=n("0NOm");Object.keys(o).forEach((function(e){"default"!==e&&"__esModule"!==e&&(e in t&&t[e]===o[e]||Object.defineProperty(t,e,{enumerable:!0,get:function(){return o[e]}}))}));var r=n("jVmZ");Object.keys(r).forEach((function(e){"default"!==e&&"__esModule"!==e&&(e in t&&t[e]===r[e]||Object.defineProperty(t,e,{enumerable:!0,get:function(){return r[e]}}))}));var s=n("DnBa");Object.keys(s).forEach((function(e){"default"!==e&&"__esModule"!==e&&(e in t&&t[e]===s[e]||Object.defineProperty(t,e,{enumerable:!0,get:function(){return s[e]}}))}))},QLXK:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SIZES=t.SIZE=void 0;var i=t.SIZE={SMALL:"SMALL",MEDIUM:"MEDIUM",LARGE:"LARGE",FULL:"FULL"};t.SIZES=[i.SMALL,i.MEDIUM,i.LARGE,i.FULL]},QPid:function(e,t,n){"use strict";t.a="/vi-assets/static-assets/spellingBee-aefae1205fcfd73f104e2775debfda55.png"},QgjT:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.sectionClass=t.interactiveDivClass=void 0;var i=n("Jqp9");t.interactiveDivClass=(0,i.css)("box-sizing:border-box;vertical-align:top;"),t.sectionClass=function(e){return(0,i.css)("width:100%;margin:0 auto;height:auto;",e.maxWidth?"max-width: ".concat(e.maxWidth,"px;"):null)}},"R+Gq":function(e,t,n){"use strict";var i=n("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=i(n("W8MJ")),o=i(n("lwsE")),r=i(n("a1gu")),s=i(n("Nsbk")),l=i(n("7W2i")),c=i(n("Nz+N")),u=n("6hsm");function d(e,t,n){return t=(0,s.default)(t),(0,r.default)(e,function(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return function(){return!!e}()}()?Reflect.construct(t,n||[],(0,s.default)(e).constructor):t.apply(e,n))}var p=function(e){function t(e){var n;if((0,o.default)(this,t),(n=d(this,t,[e]))["@type"]="WebPage",e.meteredContentClass){n.isAccessibleForFree=!!e.isAccessibleForFree;var i=["dev","local","stg"].includes(e.environment)?"stg.nytimes.com":"nytimes.com";n.hasPart={"@type":"WebPageElement",isAccessibleForFree:n.isAccessibleForFree,cssSelector:e.meteredContentClass?".".concat(e.meteredContentClass):".meteredContent"},n.isPartOf={"@type":["CreativeWork","Product"],name:u.NYT_ORGANIZATION.name,productID:"".concat(i,":basic")}}return n}return(0,l.default)(t,e),(0,a.default)(t)}(c.default);t.default=p},R99I:function(e,t,n){"use strict";var i=n("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=i(n("pVnL")),o=i(n("q1tI")),r=i(n("ARn7")),s=i(n("RMtu"));t.default=function(e){return o.default.createElement(r.default,(0,a.default)({},e,{height:"40px",ratio:"0"}),o.default.createElement(s.default,e))}},RG0N:function(e,t,n){"use strict";var i=n("TqRt"),a=n("cDf5");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=i(n("pVnL")),r=i(n("QILm")),s=i(n("lwsE")),l=i(n("W8MJ")),c=i(n("a1gu")),u=i(n("Nsbk")),d=i(n("7W2i")),p=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=a(e)&&"function"!=typeof e)return{default:e};var n=h(t);if(n&&n.has(e))return n.get(e);var i={__proto__:null},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var r in e)if("default"!==r&&{}.hasOwnProperty.call(e,r)){var s=o?Object.getOwnPropertyDescriptor(e,r):null;s&&(s.get||s.set)?Object.defineProperty(i,r,s):i[r]=e[r]}return i.default=e,n&&n.set(e,i),i}(n("q1tI")),f=(i(n("17x9")),n("4PQh")),m=["html","id"];function h(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(h=function(e){return e?n:t})(e)}function g(e,t,n){return t=(0,u.default)(t),(0,c.default)(e,function(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return function(){return!!e}()}()?Reflect.construct(t,n||[],(0,u.default)(e).constructor):t.apply(e,n))}var y=function(e){function t(e){var n;(0,s.default)(this,t),(n=g(this,t,[e])).state={triggerClientHydration:!1},n.setupRef=function(e){n.el=e};var i=(0,f.extractAndReplace)(" ".concat(n.props.html).slice(1),n.props.id),a=i.scriptsToRunOnClient,o=i.scriptlessHtml;return n.scriptsToRunOnClient=a,n.scriptlessHtml=o,n.keepAi2HtmlScripts=(0,f.isAi2Html)(n.props.html),n}return(0,d.default)(t,e),(0,l.default)(t,[{key:"componentDidMount",value:function(){var e=this,t=this.props,n=t.id,i=t.html;if((0,f.hasBridge)()){var a,o=window.getInteractiveBridge(n);this.reHydrateEmbeds=function(){e.setState({triggerClientHydration:!0},(function(){var t;console.info("[interactive] embed-hydrated: ".concat(n)),t=e.keepAi2HtmlScripts?e.el.querySelectorAll("script"):(0,f.assembleAndOrderScripts)(e.scriptsToRunOnClient),(0,f.runScripts)(t,i),o=window.getInteractiveBridge(n)}))},["react-hydration-error","trigger-embed-hydration-".concat(n)].forEach((function(t){window.addEventListener(t,e.reHydrateEmbeds)})),o||this.reHydrateEmbeds(),null!==(a=o)&&void 0!==a&&a.stashedDomNodes&&(console.info("[interactive] remounted: ".concat(n)),(0,f.replaceChildren)(this.el,o.stashedDomNodes),o._subs.remount.forEach((function(e){e()})))}}},{key:"componentWillUnmount",value:function(){var e=this,t=this.props.id;if((0,f.hasBridge)()){var n=window.getInteractiveBridge(t);n&&(console.info("[interactive] stashed: ".concat(t)),n.stashedDomNodes=this.el.childNodes)}["react-hydration-error","trigger-embed-hydration-".concat(t)].forEach((function(t){window.removeEventListener(t,e.reHydrateEmbeds)}))}},{key:"render",value:function(){var e,t=this.props,n=t.html,i=t.id,a=(0,r.default)(t,m),s='\n      <script>window.registerInteractive && window.registerInteractive("'.concat(i,'");<\/script>\n    ');return e=s+n,this.state.triggerClientHydration&&(e=this.keepAi2HtmlScripts?s+n:s+this.scriptlessHtml),p.default.createElement("div",(0,o.default)({},a,{ref:this.setupRef,"data-sourceid":i,id:"embed-id-".concat(i),dangerouslySetInnerHTML:{__html:e}}))}}])}(p.Component);y.displayName="Body";t.default=y},RKHt:function(e,t,n){"use strict";var i=n("TqRt"),a=n("cDf5");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=i(n("lSNA")),r=i(n("q1tI")),s=(i(n("17x9")),n("Jqp9")),l=i(n("OB6K")),c=i(n("gtCS")),u=i(n("tXdy")),d=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=a(e)&&"function"!=typeof e)return{default:e};var n=p(t);if(n&&n.has(e))return n.get(e);var i={__proto__:null},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var r in e)if("default"!==r&&{}.hasOwnProperty.call(e,r)){var s=o?Object.getOwnPropertyDescriptor(e,r):null;s&&(s.get||s.set)?Object.defineProperty(i,r,s):i[r]=e[r]}return i.default=e,n&&n.set(e,i),i}(n("uW2s"));function p(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(p=function(e){return e?n:t})(e)}var f=function(e){var t,n,i,a,p=e.interactive,f=e.className,m=e.children,h=e.theme,g=e.manageScripts,y=e.enableInteractiveBridge,v=p.leadin,b=p.note,_=p.credit,w=p.dataSource,x=p.headline,k=p.displayProperties,O=k.minimumWidth,T=k.maximumWidth,C=k.displayForPromotionOnly,E=void 0!==C&&C,S=T,P=x&&x.default,I=P&&!E,M=!(null==p||null===(t=p.displayProperties)||void 0===t||null===(n=t.displayOverrides)||void 0===n||!n.includes("REMOVE_PLATFORM_MARGIN"));return(v||I)&&(i=r.default.createElement("header",{id:"interactive-header",className:(0,s.cx)(d.headerClass,"interactive-header",(0,o.default)({},d.fullbleedHeaderFooterContainerClass({maxWidth:T}),M))},I&&r.default.createElement("h2",{id:"interactive-headline",className:(0,s.cx)(d.headlineClass,"interactive-headline")},P),v&&r.default.createElement("p",{"data-testid":"leadin",id:"interactive-leadin",className:(0,s.cx)(d.leadinClass,"interactive-leadin"),dangerouslySetInnerHTML:{__html:v}}))),(b||w||_)&&(a=r.default.createElement(c.default,{interactive:p,footerClass:(0,s.cx)(d.footerClass,(0,o.default)({},d.fullbleedHeaderFooterContainerClass({maxWidth:T}),M)),metaClass:d.metaClass})),r.default.createElement(l.default,{theme:h},r.default.createElement(u.default,{maxWidth:S,minWidth:O,interactive:p,className:(0,s.cx)(f,(0,o.default)({},d.fullbleedClass,M)),manageScripts:g,enableInteractiveBridge:y,Header:i,Footer:a},m))};f.displayName="Embedded",f.defaultProps={interactive:{html:null,displayProperties:{},headline:{default:""}},className:void 0,children:null,theme:{},manageScripts:!1,enableInteractiveBridge:!1};t.default=f},RL9q:function(e,t,n){"use strict";var i=n("J4zp"),a=n.n(i),o=n("Ap7T"),r=n("q1tI");t.a=function(){var e=Object(r.useState)(),t=a()(e,2),n=t[0],i=t[1];return Object(r.useEffect)((function(){var e=Object(o.v1)();i(e)}),[]),n}},RMtu:function(e,t,n){"use strict";var i=n("TqRt"),a=n("cDf5");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o,r,s=i(n("lSNA")),l=i(n("lwsE")),c=i(n("W8MJ")),u=i(n("a1gu")),d=i(n("Nsbk")),p=i(n("7W2i")),f=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=a(e)&&"function"!=typeof e)return{default:e};var n=h(t);if(n&&n.has(e))return n.get(e);var i={__proto__:null},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var r in e)if("default"!==r&&{}.hasOwnProperty.call(e,r)){var s=o?Object.getOwnPropertyDescriptor(e,r):null;s&&(s.get||s.set)?Object.defineProperty(i,r,s):i[r]=e[r]}return i.default=e,n&&n.set(e,i),i}(n("q1tI")),m=(i(n("17x9")),i(n("HNQ6")));function h(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(h=function(e){return e?n:t})(e)}function g(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function y(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?g(Object(n),!0).forEach((function(t){(0,s.default)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):g(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function v(e,t,n){return t=(0,d.default)(t),(0,u.default)(e,function(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return function(){return!!e}()}()?Reflect.construct(t,n||[],(0,d.default)(e).constructor):t.apply(e,n))}var b={INITIALIZING:"initializing",LOAD_NEW_VIDEO:"load_new_video",READY:"ready",LOAD_START:"loadstart",PLAY:"play",PAUSE:"pause",ENDED:"ended"},_={INITIALIZING:"onInitializing",READY:"onReady",LOAD_START:"onLoadStart",PLAY:"onPlay",PAUSE:"onPause",ENDED:"onEnded"},w=["className","playerClassName","playerRef","VHS","onReady","onLoadStart","onPlay","onPause","onEnded","onErrorLoadingPlayer"],x=(0,m.default)(((r=function(e){function t(){var e;(0,l.default)(this,t);for(var n=arguments.length,i=new Array(n),a=0;a<n;a++)i[a]=arguments[a];return(e=v(this,t,[].concat(i))).playerStatus=null,e.state={playerCreated:!1},e}return(0,p.default)(t,e),(0,c.default)(t,[{key:"componentDidMount",value:function(){if(null===this.playerStatus){if(!this.props.VHS){throw console.error("VHS did not load"),"function"==typeof this.props.onErrorLoadingPlayer&&this.props.onErrorLoadingPlayer(),new Error("VHS did not load")}this.initPlayer()}}},{key:"shouldComponentUpdate",value:function(e,t){return null!==this.playerStatus&&e.src!==this.props.src||this.state.playerCreated!==t.playerCreated}},{key:"UNSAFE_componentWillReceiveProps",value:function(e){this.updatePlayer(e)}},{key:"componentWillUnmount",value:function(){this.destroyPlayer()}},{key:"initPlayer",value:function(){var e=this;this.playerStatus=b.INITIALIZING,this.destroyPlayer((function(){e.player=e.props.VHS.audio(e.playerConfig),e.bindPlayerEvents(),e.setState((function(){return{playerCreated:!0}})),"function"==typeof e.props.playerRef&&e.props.playerRef(e.player)}))}},{key:"propsForConfig",get:function(){var e=this;return Object.keys(this.props).reduce((function(t,n){return-1===w.indexOf(n)?y(y({},t),{},(0,s.default)({},n,e.props[n])):t}),{})}},{key:"playerConfig",get:function(){var e=this.propsForConfig;return e.container=this.playerElement,e}},{key:"bindPlayerEvents",value:function(){var e=this;Object.keys(this.player.events).filter((function(e){return void 0!==b[e]})).forEach((function(t){e.player.on(e.player.events[t],(function(){e.playerStatus=e.player.events[t];var n=_[t],i=e.props[n];"function"==typeof i&&i()}))}))}},{key:"updatePlayer",value:function(e){if(this.player){if("string"==typeof e.src&&e.src!==this.props.src&&this.player.load({src:e.src}),this.props.audioControls.layout!==e.audioControls.layout){var t=this.player.store.getState();t.plugins.audioControls.layout=e.audioControls.layout,this.player.store.setState(t)}if(this.props.forceHover!==e.forceHover){var n=this.player.store.getState();n.plugins.audioControls.forceHover=e.forceHover,this.player.store.setState(n)}}}},{key:"destroyPlayer",value:function(e){this.playerStatus=null,this.player&&"function"==typeof this.player.destroy?this.player.destroy(e):"function"==typeof e&&e()}},{key:"render",value:function(){var e=this,t=this.props,n=t.audioControls,i=t.className,a=t.playerClassName,o=t.width,r=t.forceError,s=t.style;if(r)throw new Error("Forced error for error boundary testing.");var l="react-vhs-container";"string"==typeof i&&(l+=" ".concat(i));var c="react-vhs-player";"string"==typeof a&&(c+=" ".concat(a));var u={width:o};"v2"===n.version&&(u.height="100%",u.width="100%",u.position="relative",u.WebkitTapHighlightColor="transparent"),u=y(y({},u),s);var d={},p=y({height:"40px",padding:"0"},n),m=p.height,h=p.padding;return d.height=m,d.padding=h,f.default.createElement("div",{className:l,style:u},f.default.createElement("div",{ref:function(t){e.playerElement=t},className:c,style:d}))}}])}(f.Component)).displayName="AudioPlayer",r.defaultProps={className:void 0,onErrorLoadingPlayer:void 0,playerClassName:void 0,playerRef:void 0,style:{},width:"100%",forceHover:!1,onReady:void 0,onLoadStart:void 0,onPlay:void 0,onPause:void 0,onEnded:void 0,gtmTrackEvent:function(){},env:"production",audioControls:{}},o=r))||o;x.displayName="AudioPlayer";t.default=x},RNdQ:function(e,t,n){"use strict";n.d(t,"a",(function(){return S}));var i,a,o=n("gcR/"),r=n.n(o),s=n("lSNA"),l=n.n(s),c=n("J4zp"),u=n.n(c),d=n("q1tI"),p=n.n(d),f=n("i8i4"),m=n("fZdH"),h=n("X6oL"),g=n("Jqp9"),y=n("Gl8y"),v=n("3sMT"),b=n("wXC7"),_=n.n(b),w=Object(g.css)("padding-bottom:20px;"),x=Object(g.css)("margin:25px 10px 10px 0;justify-content:space-between;"),k=Object(g.css)("font-size:",_.a.font.size(13),";font-weight:300;line-height:",_.a.font.size(18),";display:flex;flex-direction:row;align-items:center;padding-top:5px;font-family:",_.a.font.franklinBase,";p{margin-top:5px;max-width:50%;}a{color:",v.color.signal.editorial,";text-decoration:underline;}"),O=Object(g.css)("display:inherit;margin-top:5px;button{font-weight:500;padding-left:28px;background-color:transparent;color:",v.color.signal.editorial,";&:hover{text-decoration:underline;}}"),T=function(e){var t=e.data,n=t.region,o=t.dataSlug,s=Object(h.useTracking)(),l=Object(d.useState)(!1),c=u()(l,2),f=c[0],m=c[1],v=Object(d.useState)(!1),b=u()(v,2),_=b[0],T=b[1],C=Object(y.a)({threshold:.5}),E=u()(C,2),P=E[0],I=E[1],M=function(e){return m(!0),s.trackEvent({event:"moduleInteraction",eventData:{type:"tap",trigger:"",label:e},module:{name:"trust_inline_explainer",region:n,context:o,label:S}})};Object(d.useEffect)((function(){I.isIntersecting&&!_&&(T(!0),s.trackEvent({event:"impression",module:{context:o,label:"trust_inline_explainer",name:"trust_inline_explainer",region:n}}))}),[I,s,n,o,_]);var A=p.a.createElement(p.a.Fragment,null,f?i||(i=r()("p",{},void 0,"Thank you for your response.")):a||(a=r()("p",{},void 0,"Did you find this information helpful?")),!f&&r()("div",{className:O},void 0,r()("button",{type:"button",onClick:function(){return M("yes")}},void 0,"Yes"),r()("button",{type:"button",onClick:function(){return M("no")}},void 0,"No")));return p.a.createElement("div",{className:Object(g.cx)(k,function(){switch(n){case"body":return x;case"hub":return w;default:return""}}()),ref:P,role:"complementary"},A)};T.displayName="StorylinesSurveyModal";var C=T;function E(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}var S="1_Show";t.b=function(e){var t,n=Object(m.a)(),i=(null==n||null===(t=n.styln_trust)||void 0===t?void 0:t.variant)===S,a=Object(d.useState)(!1),o=u()(a,2),s=o[0],c=o[1],p=Object(d.useState)([]),h=u()(p,2),g=h[0],y=h[1],v=[],b=function(t){var n;if((t.origin||t.originalEvent.origin)===window.location.origin){var i=document.querySelectorAll(".trust-survey-component"),a=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?E(Object(n),!0).forEach((function(t){l()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):E(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},e);i.length>0&&(Array.prototype.find.call(i,(function(e){v.find((function(t){return t.containerInfo.id===e.id}))||(a.dataSlug=e.getAttribute("data-slug"),v.push(Object(f.createPortal)(n||(n=r()(C,{data:a})),e)))})),y(v),c(!0))}};return Object(d.useEffect)((function(){return window.addEventListener("message",b),function(){window.removeEventListener("message",b)}}),[]),i&&s&&g}},RQdI:function(e,t,n){"use strict";var i=n("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=i(n("q1tI")),o=(i(n("17x9")),n("Au1T")),r=function(e){return a.default.createElement(o.StyledTableOfContentsItem,{className:o.bulletClass},e.children)};r.displayName="TableOfContentsListItem",r.defaultProps={children:null};t.default=r},"RRh/":function(e,t,n){"use strict";var i=n("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.MediaWithWriteThroughSummary=t.MediaWithWriteThroughMediaWrapper=t.MediaWithWriteThrough=void 0;var a=n("Jqp9"),o=n("6l8D"),r=i(n("wXC7")),s=(0,i(n("WThh")).default)(["small","medium"]);t.MediaWithWriteThroughSummary=(0,a.styled)("div",{target:"e14og11s0"})("margin-left:4%;flex-basis:31%;.",o.linkClass,"{text-decoration:underline;color:",r.default.color.black,";&:hover,&:focus{text-decoration:none;}&:visited{color:",r.default.color.black,";}}"),t.MediaWithWriteThroughMediaWrapper=(0,a.styled)("div",{target:"e14og11s1"})("margin-bottom:10px;width:50%;",(function(e){return s(e,{width:["100%","50%"]})})),t.MediaWithWriteThrough=(0,a.styled)("div",{target:"e14og11s2"})((function(e){return s(e,{padding:["0 22px","0 0"]})}))},RZCB:function(e,t,n){"use strict";var i=n("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=i(n("J4zp")),o=i(n("q1tI")),r=n("Jqp9"),s=n("3WfF"),l=i(n("Npjk")),c=i(n("bLPb")),u=function(e){var t=e.share,n=e.className,i=e.label,u=void 0===i?"share slide":i,d=e.trackingParams,p=t.url,f=t.headline,m=void 0===f?"":f,h=new URL(p);h.searchParams.append("smid","url-share"),d&&Object.entries(d).forEach((function(e){var t=(0,a.default)(e,2),n=t[0],i=t[1];h.searchParams.append(n,i)})),p=h.toString();return o.default.createElement("button",{type:"button",onClick:function(){var e,t=window.navigator.canShare&&window.navigator.canShare({url:"https://www.nytimes.com"}),n={url:p,title:m};t?(window.UnifiedTracking.sendAnalytic("moduleInteraction",{eventData:{trigger:"module",type:"open"},module:{name:"share-tools",region:"carousel"}}),window.navigator.share(n).then((function(){window.UnifiedTracking.sendAnalytic("moduleInteraction",{eventData:{trigger:"module",type:"complete"},module:{name:"share-tools",region:"carousel"}})})).catch((function(e){console.error("Error sharing or share aborted",e)}))):null!==(e=window.NativeBridge)&&void 0!==e&&e.share&&(window.NativeBridge.share(n),window.UnifiedTracking&&window.UnifiedTracking.sendAnalytic("moduleInteraction",{eventData:{trigger:"module",type:"open"},module:{name:"share-tools",region:"carousel"}}))},className:(0,r.cx)(n,s.buttonClass),"aria-label":u},o.default.createElement(l.default,null),o.default.createElement(c.default,null))};u.displayName="ShareButton";t.default=u},RemB:function(e,t,n){"use strict";var i=n("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=i(n("q1tI")),o=(i(n("17x9")),n("1gPk")),r=function(e){var t=e.children;return a.default.createElement("em",{className:o.italicClass},t)};r.displayName="ItalicFormat";t.default=r},Rpp7:function(e,t,n){"use strict";var i=this&&this.__makeTemplateObject||function(e,t){return Object.defineProperty?Object.defineProperty(e,"raw",{value:t}):e.raw=t,e},a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.ctaActionTextClassStyle=t.ctaContainerStyle=t.ctaIconWrapperStyle=t.headingMessageClassStyle=t.headingInfoContainerStyle=t.headingClassStyle=t.dividerStyle=t.dockContentHeadline=t.dockContentKicker=t.ctaButton=t.dockWrapper=t.dockContentWrapper=t.dockHeaderHed=void 0;var o,r,s,l,c,u,d,p,f,m,h,g,y,v=n("Jqp9"),b=a(n("wXC7")),_=n("lVLo"),w=n("b2Qg");t.dockHeaderHed=(0,v.css)(o||(o=i(["\n  font-weight: ",";\n  font-family: ",";\n  font-size: 14px;\n  line-height: 130%;\n  text-align: center;\n\n  @media screen and (min-width: ","px) {\n    font-size: 16px;\n  }\n\n  @media screen and (min-width: ","px) {\n    font-size: 18px;\n  }\n"],["\n  font-weight: ",";\n  font-family: ",";\n  font-size: 14px;\n  line-height: 130%;\n  text-align: center;\n\n  @media screen and (min-width: ","px) {\n    font-size: 16px;\n  }\n\n  @media screen and (min-width: ","px) {\n    font-size: 18px;\n  }\n"])),b.default.font.weight.mediumBold,_.fonts.franklin,_.widths.verySmall,_.widths.mediumLarge),t.dockContentWrapper=(0,v.css)(r||(r=i(["\n  background-color: ",";\n  border-top: 1px "," solid;\n  display: flex;\n  padding: 32px 20px;\n  flex-direction: column;\n  align-items: center;\n  align-self: stretch;\n  gap: 12px;\n\n  @media screen and (min-width: ","px) {\n    padding: 40px 20px;\n  }\n"],["\n  background-color: ",";\n  border-top: 1px "," solid;\n  display: flex;\n  padding: 32px 20px;\n  flex-direction: column;\n  align-items: center;\n  align-self: stretch;\n  gap: 12px;\n\n  @media screen and (min-width: ","px) {\n    padding: 40px 20px;\n  }\n"])),_.colors.white,_.colors.gainsboro,_.widths.mediumLarge),t.dockWrapper=(0,v.css)(s||(s=i(["\n  background-color: ",";\n  font-family: ",";\n"],["\n  background-color: ",";\n  font-family: ",";\n"])),_.colors.whiteDarkContentPrimary,_.fonts.franklin),t.ctaButton=(0,v.css)(l||(l=i(["\n  background: ",";\n  border-radius: 3px;\n  color: ",";\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  gap: 8px;\n  width: 140px;\n  height: 44px;\n  font-size: 16px;\n  font-weight: ",";\n  line-height: 130%;\n  text-decoration: none;\n\n  &:link,\n  &:visited {\n    color: ",";\n    font-size: 16px;\n    text-decoration: none;\n  }\n"],["\n  background: ",";\n  border-radius: 3px;\n  color: ",";\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  gap: 8px;\n  width: 140px;\n  height: 44px;\n  font-size: 16px;\n  font-weight: ",";\n  line-height: 130%;\n  text-decoration: none;\n\n  &:link,\n  &:visited {\n    color: ",";\n    font-size: 16px;\n    text-decoration: none;\n  }\n"])),_.colors.blackDarkBackgroundPrimary,_.colors.whiteDarkContentPrimary,b.default.font.weight.mediumBold,_.colors.whiteDarkContentPrimary),t.dockContentKicker=(0,v.css)(c||(c=i(["\n  color: ",";\n  font-family: ",";\n  font-size: 14px;\n  font-style: normal;\n  font-weight: ",";\n  line-height: 120%;\n  letter-spacing: 0.8px;\n  text-transform: uppercase;\n\n  @media screen and (min-width: ","px) {\n    font-size: 16px;\n  }\n"],["\n  color: ",";\n  font-family: ",";\n  font-size: 14px;\n  font-style: normal;\n  font-weight: ",";\n  line-height: 120%;\n  letter-spacing: 0.8px;\n  text-transform: uppercase;\n\n  @media screen and (min-width: ","px) {\n    font-size: 16px;\n  }\n"])),_.colors.veryDarkGrey,_.fonts.franklin,_.fontWeights.semiBold,_.widths.mediumLarge),t.dockContentHeadline=(0,v.css)(u||(u=i(["\n  margin-top: -4px;\n  color: ",";\n  font-family: ",";\n  font-size: 32px;\n  font-style: normal;\n  font-weight: ",";\n  line-height: 120%;\n  text-align: center;\n\n  s {\n    color: #8b8b8b;\n    text-decoration: line-through;\n    text-decoration-color: rgba(139, 139, 139, 0.75);\n  }\n\n  span {\n    white-space: nowrap;\n  }\n\n  @media screen and (min-width: 480px) {\n    font-size: 40px;\n  }\n\n  @media screen and (min-width: ","px) {\n    font-size: 44px;\n  }\n\n  @media screen and (min-width: ","px) {\n    font-size: 48px;\n  }\n"],["\n  margin-top: -4px;\n  color: ",";\n  font-family: ",";\n  font-size: 32px;\n  font-style: normal;\n  font-weight: ",";\n  line-height: 120%;\n  text-align: center;\n\n  s {\n    color: #8b8b8b;\n    text-decoration: line-through;\n    text-decoration-color: rgba(139, 139, 139, 0.75);\n  }\n\n  span {\n    white-space: nowrap;\n  }\n\n  @media screen and (min-width: 480px) {\n    font-size: 40px;\n  }\n\n  @media screen and (min-width: ","px) {\n    font-size: 44px;\n  }\n\n  @media screen and (min-width: ","px) {\n    font-size: 48px;\n  }\n"])),_.colors.veryDarkGrey,_.fonts.cheltenham,_.fontWeights.light,_.widths.medium,_.widths.mediumLarge),t.dividerStyle=(0,v.css)(d||(d=i(["\n  display: none;\n"],["\n  display: none;\n"]))),t.headingClassStyle=(0,v.css)(p||(p=i(["\n  height: 100%;\n  margin: auto;\n  /* stylelint-disable-next-line declaration-no-important */\n  -webkit-font-smoothing: antialiased !important;\n  outline: ",";\n\n  display: flex;\n  align-items: center;\n  text-align: center;\n  justify-content: space-between;\n\n  strong {\n    font-weight: ",";\n  }\n"],["\n  height: 100%;\n  margin: auto;\n  /* stylelint-disable-next-line declaration-no-important */\n  -webkit-font-smoothing: antialiased !important;\n  outline: ",";\n\n  display: flex;\n  align-items: center;\n  text-align: center;\n  justify-content: space-between;\n\n  strong {\n    font-weight: ",";\n  }\n"])),_.colors.blue,_.fontWeights.bold),t.headingInfoContainerStyle=(0,v.css)(f||(f=i(["\n  width: 100%;\n  font-family: ",";\n  text-align: left;\n\n  span {\n    display: inline;\n  }\n\n  @media (min-width: ","px) {\n    text-align: center;\n  }\n"],["\n  width: 100%;\n  font-family: ",";\n  text-align: left;\n\n  span {\n    display: inline;\n  }\n\n  @media (min-width: ","px) {\n    text-align: center;\n  }\n"])),_.fonts.franklin,_.widths.mediumLarge),t.headingMessageClassStyle=(0,v.css)(m||(m=i(["\n  height: 55px;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  font-size: 15px;\n  line-height: 17px;\n  opacity: 1;\n\n  margin-left: 3.8vw;\n\n  span {\n    white-space: nowrap;\n\n    &::after {\n      content: '  ';\n      white-space: pre-line;\n    }\n  }\n"],["\n  height: 55px;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  font-size: 15px;\n  line-height: 17px;\n  opacity: 1;\n\n  margin-left: 3.8vw;\n\n  span {\n    white-space: nowrap;\n\n    &::after {\n      content: '  ';\n      white-space: pre-line;\n    }\n  }\n"]))),t.ctaIconWrapperStyle=(0,v.css)(h||(h=i(["\n  background-color: transparent;\n  outline: ",";\n  width: ",";\n  height: ",";\n  z-index: 1;\n  border-width: 0px;\n  display: flex;\n  align-items: center;\n\n  svg {\n    height: 15px;\n    margin: auto;\n    width: 15px;\n  }\n"],["\n  background-color: transparent;\n  outline: ",";\n  width: ",";\n  height: ",";\n  z-index: 1;\n  border-width: 0px;\n  display: flex;\n  align-items: center;\n\n  svg {\n    height: 15px;\n    margin: auto;\n    width: 15px;\n  }\n"])),_.colors.blue,w.iconHeight,w.iconHeight),t.ctaContainerStyle=(0,v.css)(g||(g=i([""],[""]))),t.ctaActionTextClassStyle=(0,v.css)(y||(y=i(["\n  cursor: pointer;\n  font-size: 12px;\n  text-transform: uppercase;\n  font-weight: ",";\n  font-family: ",";\n  letter-spacing: 0.24px;\n  line-height: calc("," + 3px);\n  white-space: nowrap;\n  margin: 0;\n  padding: 0;\n  display: none;\n  color: ",";\n\n  &."," {\n    animation: "," 400ms;\n  }\n\n  &."," {\n    animation: "," 400ms;\n  }\n\n  @media (min-width: ","px) {\n    display: block;\n  }\n"],["\n  cursor: pointer;\n  font-size: 12px;\n  text-transform: uppercase;\n  font-weight: ",";\n  font-family: ",";\n  letter-spacing: 0.24px;\n  line-height: calc("," + 3px);\n  white-space: nowrap;\n  margin: 0;\n  padding: 0;\n  display: none;\n  color: ",";\n\n  &."," {\n    animation: "," 400ms;\n  }\n\n  &."," {\n    animation: "," 400ms;\n  }\n\n  @media (min-width: ","px) {\n    display: block;\n  }\n"])),_.fontWeights.bold,_.fonts.franklin,w.iconHeight,_.colors.veryDarkGrey,w.textFadingOutClass,(0,w.fadeTextOut)(),w.textFadingInClass,(0,w.fadeTextIn)(),_.widths.mediumLarge)},"Rr+T":function(e,t,n){"use strict";var i=n("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=i(n("q1tI")),o=(i(n("17x9")),i(n("yEZI"))),r=n("Jqp9"),s=n("FfcP"),l=function(e){var t=e.on,n=e.onKeyPress,i=e.onClick,l=e.children,c=e.className,u=e.contentEditable;return a.default.createElement("div",{on:t,onClick:i,onKeyPress:n,tabIndex:"0",role:"button"},a.default.createElement(o.default,{className:(0,r.cx)(s.clueClass,c),contentEditable:u},l))};l.displayName="Clue",l.defaultProps={className:void 0,contentEditable:void 0};t.default=l},RvkP:function(e,t,n){"use strict";n.d(t,"a",(function(){return g}));var i=n("yXPU"),a=n.n(i),o=n("lSNA"),r=n.n(o),s=n("o0o1"),l=n.n(s),c=(n("ls82"),n("wYzE")),u=n("E7dQ");function d(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function p(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?d(Object(n),!0).forEach((function(t){r()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):d(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var f,m=[{nameRegex:/gpt\.js/,trackedOnce:!1,label:"timeGPTLoaded"},{nameRegex:/bidexchange\.js/,trackedOnce:!1,label:"bidLibLoaded",secondary:"media.net"},{nameRegex:/apstag\.js/,trackedOnce:!1,label:"bidLibLoaded",secondary:"amazon"},{nameRegex:/als-svc/,trackedOnce:!1,label:"alsService",secondary:"als-response-time"}],h=function(e,t){var n=m.find((function(e){return t.name.match(e.nameRegex)}));return n&&t.responseEnd&&e.push(p(p({},n),{},{responseEnd:t.responseEnd,duration:t.duration})),e};function g(){return y.apply(this,arguments)}function y(){return(y=a()(l.a.mark((function e(){var t;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:void 0!==window.performance&&void 0!==window.PerformanceObserver&&void 0!==window.PerformanceResourceTiming&&((t=function(e){e.getEntriesByType("resource").reduce(h,[]).forEach((function(e){var t=p({event:"impression",module:{name:"timing",context:"script-load",label:"".concat(e.label).concat(e.secondary?"-".concat(e.secondary):""),region:Math.round(e.responseEnd).toString()}},"alsService"===e.label&&{eventData:{trigger:"ad",type:"impression"},ad:{adSlotEventName:"AlsResponse",pageType:Object(u.a)(),aliceDuration:Math.round(e.duration)}});Object(c.a)(t,{individualEvents:!0}),e.trackedOnce=!0})),m.every((function(e){return e.trackedOnce}))&&"function"==typeof f.disconnect&&f.disconnect()})(window.performance),(f=new window.PerformanceObserver(t)).observe({entryTypes:["resource"]}));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}},RxXP:function(e,t,n){"use strict";var i=n("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=i(n("lSNA")),o=i(n("q1tI")),r=(i(n("17x9")),n("Jqp9")),s=n("fRbn"),l=n("7zGq");function c(e){var t=e.index,n=e.isAMP,i=e.length;return o.default.createElement("ul",{className:s.navListClass},(0,l.times)(i,(function(e){return o.default.createElement("li",{key:e,className:(0,r.cx)(s.dotClass,(0,a.default)({},s.activeClass,e===(n?0:t))),"data-active":e===t,"data-amp-bind-class":n?"['".concat(s.dotClass,"', ").concat(e," == +").concat(t," ? '").concat(s.activeClass,"' : null]"):null})})))}c.displayName="DotNav",c.defaultProps={index:0,isAMP:!1};t.default=c},"S+vP":function(e,t,n){"use strict";var i=n("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a,o,r=i(n("cDf5")),s=i(n("zrfs")),l="object"===("undefined"==typeof window?"undefined":(0,r.default)(window))&&null!==(a=window.vi)&&void 0!==a&&null!==(o=a.env)&&void 0!==o&&o.VHS_BASE_URL?"".concat(window.vi.env.VHS_BASE_URL,"vhs.min.js"):"https://static01.nyt.com/video-static/vhs3/vhs.min.js";t.default=function(e){var t=window||{},n=null;t.VHS_PLAYER_DEPS_LOADING?n=t.setInterval((function(){t.__VHS__&&(t.VHS_PLAYER_DEPS_LOADING=null,t.clearInterval(n),e())}),100):(t.VHS_PLAYER_DEPS_LOADING=!0,(0,s.default)(l,e))}},SBGf:function(e,t,n){"use strict";n.d(t,"a",(function(){return h})),n.d(t,"b",(function(){return g})),n.d(t,"d",(function(){return y})),n.d(t,"c",(function(){return v})),n.d(t,"e",(function(){return b})),n.d(t,"k",(function(){return _})),n.d(t,"f",(function(){return O})),n.d(t,"i",(function(){return C})),n.d(t,"j",(function(){return E})),n.d(t,"m",(function(){return S})),n.d(t,"h",(function(){return P})),n.d(t,"l",(function(){return I})),n.d(t,"g",(function(){return M}));var i=n("lSNA"),a=n.n(i),o=n("RIqP"),r=n.n(o),s=n("cr+I"),l=n.n(s),c=n("06b3"),u=n("Rb+W"),d=n("r6lX"),p=n("bjNE");function f(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function m(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?f(Object(n),!0).forEach((function(t){a()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):f(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var h="STORY_recirc_algo_show_more",g="PAID_POST",y={tablet:{storiesPerRow:2,maxStoriesToShow:4},desktop:{storiesPerRow:3,maxStoriesToShow:6}},v={tablet:{storiesPerRow:2,maxStoriesToShow:2},desktop:{storiesPerRow:3,maxStoriesToShow:3}},b={tablet:{storiesPerRow:1,maxStoriesToShow:10},desktop:{storiesPerRow:1,maxStoriesToShow:10}};function _(e){switch(e){case"1_show_button_all":return{min:3,max:9};case"2_longer_feed":return{min:6,max:6};default:return{min:3,max:3}}}var w=function(e,t){if(!e||!t)return e;for(var n=r()(e),i=n.length-1;i>=0;i-=1){var a,o;null!==(a=n[i])&&void 0!==a&&null!==(o=a.node)&&void 0!==o&&o.sourceId&&t.includes(n[i].node.sourceId)&&n.splice(i,1)}return n},x=function(e,t){return e.defaultIndex&&t.defaultIndex?e.defaultIndex-t.defaultIndex:e.defaultIndex?-1:t.defaultIndex?1:0},k=function(e,t,n,i,a,o){var s=e.reduce((function(e,s){var l,c,u,d=null!==(l=null==s?void 0:s.metadata)&&void 0!==l?l:{},p=d.uri,f=void 0===p?"":p,m=d.trackingParams,h=null!==(c=t.find((function(e){return(null==e?void 0:e.uri)===f||(null==e?void 0:e.name)===f})))&&void 0!==c?c:{},g=h.label,y=void 0===g?"":g,v=h.name,b=void 0===v?"":v,_=h.uri,x=void 0===_?"":_,k=h.defaultIndex,O=void 0===k?null:k,T="eos-more-in"===b,C=T?"".concat(y," ").concat(a):y,E=T?o:null,S=(null==s?void 0:s.edges)||[];if(T&&S.length<3){var P,I,M=function(e,t){var n,i=null;return null!==(n=i=e.find((function(e){return e.url===t&&"SECTION"===e.collectionType})))&&void 0!==n&&n.assets||(i=e.find((function(e){return"SECTION"===e.collectionType}))),i}(n,o);S=null!==(P=null==M||null===(I=M.assets)||void 0===I?void 0:I.edges)&&void 0!==P?P:[],null!=M&&M.name&&(C="".concat(y," ").concat(M.name)),null!=M&&M.url&&(E=M.url)}return S=(null===(u=w(S,i))||void 0===u?void 0:u.filter((function(e){var t;return null==e||null===(t=e.node)||void 0===t?void 0:t.promotionalMedia})))||[],[].concat(r()(e),[{uri:x,packageLabel:C,defaultIndex:O,packageUrl:E,trackingParams:m,items:S}])}),[]);return(s=function(e){return e.sort(x)}(s)).slice(0,3)},O=function(e){var t=e||{},n=t.articleId,i=t.collections,a=void 0===i?[]:i,o=t.surfaces,r=void 0===o?[]:o,s=t.compositionMetadata,l=void 0===s?[]:s,c=t.recircSectionDisplayName,u=t.recircSectionUrl,d=a.filter((function(e){return e})),p=function(e,t){var n,i={SERIES:1,NEWS_EVENT:2,SPOTLIGHT:3,COLUMN:4,ISSUE:5},a=[],o=[];e.forEach((function(e){var t=e.collectionType;i[t]&&o.push(m(m({},e),{},{priority:i[t]}))})),o.sort((function(e,t){return e.priority-t.priority}));var r=o[0];return null!=r&&null!==(n=r.assets)&&void 0!==n&&n.edges?(r.assets.edges.slice(0,3).forEach((function(e){var t;null!=e&&null!==(t=e.node)&&void 0!==t&&t.sourceId&&a.push(e.node.sourceId)})),{collectionArticles:w(r.assets.edges,[t]),collectionName:r.name,collectionUrl:r.url,collectionTagline:r.tagline,collectionArticleIds:a}):{collectionArticles:null,collectionName:null,collectionUrl:null,collectionTagline:null,collectionArticleIds:[]}}(d,n),f=p.collectionArticles,h=p.collectionName,g=p.collectionUrl,y=p.collectionTagline,v=p.collectionArticleIds;v.push(n);var b=f&&f.length>=3;return{collectionArticles:b?f.slice(0,3):[],collectionName:h,collectionTagline:y,collectionUrl:g,hasAssociatedCollection:b,personalizedPackages:k(r,l,d,v,c,u)}},T=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return null==e?void 0:e.reduce((function(e,t){return e[t.key]=t.value,e}),{})},C=function(e){var t=e.cardId,n=void 0===t?"":t,i=e.cardIndex,a=void 0===i?null:i,o=e.cardUrl,r=void 0===o?"":o,s=e.cardUri,p=void 0===s?"":s,f=e.impId,h=void 0===f?"":f,g=e.listUri,y=void 0===g?"":g,v=e.packageLabel,b=void 0===v?"":v,_=e.packageTrackingParams,w=void 0===_?[]:_,x=e.trackingName,k=void 0===x?"":x,O=e.region,C=void 0===O?"":O,E=e.trackingParams,S=void 0===E?[]:E,P=e.type,I=void 0===P?"":P,M=T(S),A=l.a.stringify(m(m({},M),{},{impression_id:h}));return{event:"impression",block:m({label:b,name:k,template:k,region:C},y?{list:{uri:y}}:{}),card:{url:r?"".concat(r,"?").concat(A):"",uri:p,index:a,id:n,type:I,algos:M},user:{regiId:Object(u.f)(c.a)},package:{algos_meta:Object(d.coerceTrackingParams)(w)}}},E=function(e){var t=e.cardId,n=void 0===t?"":t,i=e.cardIndex,a=void 0===i?null:i,o=e.cardUrl,r=void 0===o?"":o,s=e.cardUri,l=void 0===s?"":s,p=e.packageLabel,f=void 0===p?"":p,m=e.packageTrackingParams,h=void 0===m?[]:m,g=e.region,y=void 0===g?"":g,v=e.trackingName,b=void 0===v?"":v,_=e.trackingParams,w=void 0===_?[]:_,x=e.type,k=void 0===x?"":x,O=T(w);return{event:"moduleInteraction",eventData:{type:"click",pagetype:k},module:{label:f,name:"".concat(k," click"),context:b,region:y,element:{url:r,uri:l,index:a,id:n,type:k,algos:O}},user:{regiId:Object(u.f)(c.a)},package:{algos_meta:Object(d.coerceTrackingParams)(h)}}},S=function(e){return null==e?void 0:e.replace(/([-'.]|\s+)/g,"").toLowerCase()},P=function(e){return e.reduce((function(e,t,n){return t.uri?m(m({},e),{},a()({},n,t.uri)):e}),{})},I=function(e){return new Set(e.map((function(e){return Object(p.getHeadline)(e.node)}))).size<e.length},M=function(e,t,n,i){return e.headlinePrefix&&t&&!n?"".concat(e.headlinePrefix,": ").concat(e.headline):i?e.seoHeadline||e.summary:e.headline}},SJcc:function(e,t,n){"use strict";var i=n("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.totalBylineContainerClass=t.timestampMarginsClass=t.readTimeContainerClass=t.readTimeClass=t.TextContainer=t.SectionContainerItem=t.SectionContainer=t.ComposedBylineContainer=void 0;var a=n("Jqp9"),o=i(n("wXC7")),r=n("f/4F"),s=(t.totalBylineContainerClass=(0,a.css)("margin:1.25rem 0;"),(0,a.css)("flex-wrap:wrap;",r.headshotDesktopBreakpoint,"{flex-wrap:nowrap;margin-bottom:",o.default.font.size(12),";}")),l=(0,a.css)("margin-bottom:",o.default.font.size(12),";"),c=(0,a.css)("flex-wrap:wrap;"),u=function(e){return 1!==e.headshotCount||"opinion"===e.theme.section&&e.theme.opinionHeaderRedesign?2!==e.headshotCount||"opinion"===e.theme.section&&e.theme.opinionHeaderRedesign?e.headshotCount>2?c:null:s:l},d=(t.TextContainer=(0,a.styled)("div",{target:"epjyd6m0"})("display:inline-block;",(function(e){return"opinion"===e.theme.section&&e.theme.opinionHeaderRedesign&&(0,a.css)("display:flex;flex-direction:column;justify-content:center;min-height:",o.default.font.size(r.headshotOpinionHeaderRedesignSize),";",r.headshotDesktopBreakpoint,"{min-height:",0===e.headshotCount?0:o.default.font.size(r.headshotOpinionDesktopSize),";}")}),";"),t.readTimeContainerClass=(0,a.css)("width:100%;"),t.readTimeClass=(0,a.css)("margin-left:auto;margin-top:0;min-width:80px;text-align:right;overflow:hidden;white-space:nowrap;font-size:",o.default.font.size(11),";"),(0,a.css)("justify-content:center;text-align:center;")),p=(t.timestampMarginsClass=(0,a.css)("margin-bottom:0;margin-top:0;"),(0,a.css)("align-items:center;")),f=(0,a.themeFn)("section",{none:p,opinion:(0,a.themeFn)("opinionHeaderRedesign",{none:p,true:(0,a.css)("align-items:flex-start;")})}),m=(0,a.themeFn)("languageDirection",{none:(0,a.css)("margin-bottom:0.25rem;"),rightToLeft:(0,a.css)("direction:ltr;margin-bottom:0.5rem;justify-content:flex-end;")}),h=(0,a.themeFn)("treatment",{guide:(0,a.css)("border-top:black;border-top-style:solid;border-top-width:1px;padding-top:20px;")}),g=(t.ComposedBylineContainer=(0,a.styled)("div",{target:"epjyd6m1"})("display:flex;width:100%;",f,";",m,";",u,";",(function(e){return"center"===e.contentAlignment&&d}),";",h,";> img,a > img,div > img{margin-right:10px;}"),(0,a.themeFn)("languageDirection",{none:(0,a.css)("list-style:none;"),rightToLeft:(0,a.css)("list-style:none;padding-right:0;")})),y=(t.SectionContainerItem=(0,a.styled)("li",{target:"epjyd6m2"})("flex-shrink:1;padding-right:1rem;",g,";"),(0,a.themeFn)("languageDirection",{none:(0,a.css)("display:flex;justify-content:space-between;align-items:center;margin:0;flex-wrap:nowrap;"),rightToLeft:(0,a.css)("display:flex;justify-content:space-between;align-items:center;direction:ltr;margin:0;flex-wrap:nowrap;flex-direction:row-reverse;")}));t.SectionContainer=(0,a.styled)("ul",{target:"epjyd6m3"})(y,";align-items:flex-end;")},SbcB:function(e,t,n){"use strict";var i=n("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.creditTreatmentStyles=t.Credit=void 0;var a=n("Jqp9"),o=n("3sMT"),r=i(n("WThh")),s=i(n("wXC7")),l=(0,r.default)(["medium","large"]),c=function(e){return(0,a.css)("color:",o.color.content.quaternary,";letter-spacing:0.01em;",l(e,{fontSize:[10,12],lineHeight:[17,19]}),";")},u=t.creditTreatmentStyles=(0,a.themeFn)("treatment",{none:function(e){return(0,a.css)("color:",o.color.content.quaternary,";font-family:",s.default.font.serifBase,";line-height:",s.default.font.size(18),";letter-spacing:0.01em;",l(e,{fontSize:[12,12,13]}),";")},magazine:function(e){return(0,a.css)("color:",o.color.content.quaternary,";font-family:",s.default.font.magazineSansBase,";line-height:",s.default.font.size(18),";letter-spacing:0.01em;",l(e,{fontSize:[12,12,13]}),";")},sponsored:function(e){return(0,a.css)(c(e),";font-family:",s.default.font.sponsoredBase,";")},sponsoredSensitive:function(e){return(0,a.css)(c(e),";font-family:",s.default.font.sponsoredSensitive,";")},"t-magazine":function(e){return(0,a.css)("color:",o.color.content.quaternary,";font-family:",s.default.font.tmagSansBase,";font-weight:",s.default.font.weight.book,";letter-spacing:0.02em;",l(e,{fontSize:[11,12,13],lineHeight:[18,20,18]}),";")},liveSplitLayout:(0,a.css)("color:",o.color.content.quaternary,";font-family:",s.default.font.serifBase,";line-height:",s.default.font.size(18),";font-size:",s.default.font.size(12),";letter-spacing:0.01em;")});t.Credit=(0,a.styled)("span",{target:"e1z0qqy90"})("display:inline;",u,";")},SgWa:function(e,t,n){"use strict";var i=n("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=n("3sMT"),o=n("Jqp9"),r=i(n("WThh")),s=n("6l8D"),l=i(n("wXC7")),c=(0,r.default)(["medium"]),u=function(e){return(0,o.css)("color:",l.default.color.sponsoredTextColor,";font-weight:",l.default.font.weight.book,";",c(e,{fontSize:[13,15],lineHeight:[20,22]}),";")},d=(0,o.themeFn)("treatment",{none:function(e){return(0,o.css)("color:",a.color.content.secondary,";font-family:",l.default.font.franklinBase,";font-weight:",l.default.font.weight.medium,";",c(e,{fontSize:[15,16],lineHeight:[20,22]}),";")},magazine:function(e){return(0,o.css)("color:",a.color.content.secondary,";font-family:",l.default.font.magazineSansBase,";font-weight:",l.default.font.weight.medium,";",c(e,{fontSize:[15,16],lineHeight:[20,22]}),";")},sponsored:function(e){return(0,o.css)(u(e),";font-family:",l.default.font.sponsoredBase,";")},sponsoredSensitive:function(e){return(0,o.css)(u(e),";font-family:",l.default.font.sponsoredSensitive,";")},"t-magazine":function(e){return(0,o.css)("color:",a.color.content.secondary,";font-family:",l.default.font.tmagSansBase,";font-weight:",l.default.font.weight.book,";letter-spacing:0.02em;",c(e,{fontSize:[15,16],lineHeight:[20,22]}),";")}}),p=(0,o.themeFn)("languageDirection",{rightToLeft:(0,o.css)("direction:rtl;text-align:right;unicode-bidi:isolate;")}),f=(0,o.styled)("p",{target:"etfikam0"})("font-style:normal;",d,";",p,";.",s.linkClass,"{text-decoration:underline;&:hover,&:focus{text-decoration:none;}}");t.default=f},SoJ3:function(e,t,n){"use strict";var i=n("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.default=r;var a=i(n("q1tI")),o=i(n("C/n8"));function r(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;return a.default.createElement(o.default,{key:n},t)}r.displayName="linkFormatFromOak"},SpBF:function(e,t,n){"use strict";var i,a,o=n("lSNA"),r=n.n(o),s=n("J4zp"),l=n.n(s),c=n("VkAN"),u=n.n(c),d=n("q1tI"),p=n("Kxyt"),f=n("eFc+"),m=n.n(f);function h(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function g(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?h(Object(n),!0).forEach((function(t){r()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):h(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var y=m()(i||(i=u()(["\n  mutation CreateNoCaptchaNewsletterSubscriptionMutation(\n    $input: CreateNoCaptchaNewsletterSubscriptionInput!\n  ) {\n    createNoCaptchaNewsletterSubscription(input: $input) {\n      message\n    }\n  }\n"]))),v=m()(a||(a=u()(["\n  query UserNewsletterSubscriptionsQuery {\n    user {\n      newsletterSubscriptions {\n        newsletters {\n          productCode\n          isFreeTrial\n          freeTrialSignupTime\n        }\n      }\n    }\n  }\n"])));t.a=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.skipNewsletterSubscriptionsQuery,n=Object(p.useApolloClient)(),i=Object(d.useState)(null),a=l()(i,2),o=a[0],r=a[1],s=Object(d.useCallback)((function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=g(g({},t),{},{newsletters:e,updateDate:Math.floor(Date.now()/1e3)});return n.mutate({mutation:y,variables:{input:i}})}),[n]);return Object(d.useEffect)((function(){var e=!1;return t||n.query({query:v}).then((function(t){var n,i=t.error,a=t.loading,o=t.data.user;if(i)throw new Error("could not load user");if(e||a)return null;var r=null==o||null===(n=o.newsletterSubscriptions)||void 0===n?void 0:n.newsletters;return Array.isArray(r)?r:[]})).then((function(e){return r(e)})).catch((function(){r([])})),function(){e=!0}}),[n,t]),{newsletterSubs:o,subToNewsletters:s}}},Svk8:function(e,t,n){"use strict";var i=n("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=i(n("q1tI")),o=n("3sMT");t.default=function(){return a.default.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 20 20",fill:"none"},a.default.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M8 13.7683V6L14.5 9.88415L8 13.7683Z",fill:o.color.content.primary}),a.default.createElement("circle",{cx:"10",cy:"10",r:"9.25",stroke:o.color.stroke.quaternary,strokeWidth:"1"}))}},"T5+l":function(e,t,n){"use strict";var i=n("TqRt"),a=n("cDf5");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=i(n("lSNA")),r=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=a(e)&&"function"!=typeof e)return{default:e};var n=h(t);if(n&&n.has(e))return n.get(e);var i={__proto__:null},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var r in e)if("default"!==r&&{}.hasOwnProperty.call(e,r)){var s=o?Object.getOwnPropertyDescriptor(e,r):null;s&&(s.get||s.set)?Object.defineProperty(i,r,s):i[r]=e[r]}return i.default=e,n&&n.set(e,i),i}(n("q1tI")),s=(i(n("17x9")),n("Jqp9")),l=n("U6jc"),c=i(n("toO0")),u=n("uj8K"),d=n("FKYM"),p=i(n("Cb8S")),f=n("5OSB"),m=i(n("0RI2"));function h(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(h=function(e){return e?n:t})(e)}function g(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function y(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?g(Object(n),!0).forEach((function(t){(0,o.default)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):g(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var v=function(e){var t=e.onAdDefined,n=e.onAdRequested,i=e.onAdRequestSent,a=e.onDFPResponse,o=e.onSlotLoaded,h=e.onImpressionViewable,g=e.onEmpty,v=e.position,b=e.sizeKey,_=e.lazyLoad,w=e.isPrioritized,x=e.id,k=e.userStyle,O=e.adTargeting,T=(0,r.useRef)(),C=v?null:(0,d.setPosition)();return(0,r.useEffect)((function(){var e=w?T.current.lastChild:T.current;return(0,l.handleAdBlockerDetected)(g),(0,c.default)(e,{id:x,position:v,sizeKey:b,lazyLoad:_,truePosition:C,adTargeting:O}),(0,m.default)(O,x),(0,l.handleAdDefined)(x,t),(0,l.handleAdRequested)(x,n),(0,l.handleAdRequestSent)(x,i),(0,l.handleSlotOnload)(x,o),(0,l.handleSlotEmpty)(x,g),(0,l.handleSlotRendered)(x,a),(0,l.handleImpressionViewable)(x,h),function(){(0,d.removePosition)(),(0,u.unsubscribeToAll)(x)}}),[]),r.default.createElement(p.default,null,r.default.createElement("a",{href:"#after-".concat(x),className:f.hiddenA11yAnchorClass},"SKIP ADVERTISEMENT"),w?r.default.createElement("div",{className:(0,s.cx)("ad","".concat(x,"-wrapper"),f.adContainerClass),ref:T,style:y({},k),suppressHydrationWarning:!0,dangerouslySetInnerHTML:{__html:'<div id="'.concat(x,'" class="place-ad" data-position="').concat(v||x,'" data-size-key="').concat(b||v||"default",'" data-lazy-load="').concat(_,'"></div>')}}):r.default.createElement("div",{className:(0,s.cx)("ad","".concat(x,"-wrapper"),f.adContainerClass),id:x,ref:T,style:y({},k)}),r.default.createElement("div",{id:"after-".concat(x)}))};v.displayName="AdSlot",v.defaultProps={onAdDefined:function(){},onAdRequested:function(){},onAdRequestSent:function(){},onDFPResponse:function(){},onSlotLoaded:function(){},onImpressionViewable:function(){},onEmpty:function(){},userStyle:{},isPrioritized:!1,sizeKey:"",lazyLoad:!0,position:null,adTargeting:{}};t.default=v},TB7k:function(e,t,n){"use strict";var i=n("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=i(n("q1tI")),o=(i(n("17x9")),n("Jqp9")),r=i(n("JwCr")),s=i(n("Kpeq")),l=n("f9QA");function c(e){var t,n=e.className,i=e.internalLinkTrackingParams,c=e.subtitle,u=e.text,d=e.trackEvent,p=e.trackLinkInteraction;if(null==u||null===(t=u.content)||void 0===t||!t.length)return null;var f=(0,s.default)({internalLinkTrackingParams:i,trackEvent:d,trackLinkInteraction:p});return a.default.createElement("p",{className:(0,o.cx)(l.paragraphClass,n)},c&&a.default.createElement(r.default,null,c," "),u.content.map(f))}c.displayName="StorylineParagraph",c.defaultProps={className:void 0,internalLinkTrackingParams:null,subtitle:null,text:null,trackEvent:function(){},trackLinkInteraction:function(){}};t.default=c},TMfO:function(e,t,n){"use strict";var i=n("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=i(n("q1tI")),o=(i(n("17x9")),n("rHUa"));function r(e){var t=e.isInEditor,n=e.aml;return t?a.default.createElement("div",{className:o.oakClass,dangerouslySetInnerHTML:{__html:n&&n.replace(/\n/g,"<br/>")}}):null}r.defaultProps={isInEditor:!1,aml:""};t.default=r},TTpX:function(e,t,n){"use strict";var i=n("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=i(n("q1tI")),o=(i(n("17x9")),n("Jqp9")),r=n("L+PM"),s=function(e){var t=e.children,n=e.containerClassName,i=e.textClassName;return t&&a.default.createElement("div",{id:"enhanced-byline",className:(0,o.cx)(r.roleContainerClass,n)},a.default.createElement(r.RoleText,{className:i},t))};s.defaultProps={children:null,containerClassName:void 0,textClassName:void 0};t.default=s},TUmO:function(e,t,n){"use strict";var i=this&&this.__makeTemplateObject||function(e,t){return Object.defineProperty?Object.defineProperty(e,"raw",{value:t}):e.raw=t,e};Object.defineProperty(t,"__esModule",{value:!0}),t.buttonClass=t.logoClass=t.mainContent=t.contentTextClass=t.headerTextClass=void 0;var a=n("Jqp9"),o=n("lVLo");t.headerTextClass=(0,a.css)(r||(r=i(["\n  font-family: ",";\n  font-size: 15px;\n  font-weight: ",";\n  margin: auto 0;\n  white-space: pre-wrap;\n  @media (min-width: ","px) {\n    white-space: unset;\n  }\n  @media (max-width: ","px) {\n    margin: 0 0 0 20px;\n  }\n"],["\n  font-family: ",";\n  font-size: 15px;\n  font-weight: ",";\n  margin: auto 0;\n  white-space: pre-wrap;\n  @media (min-width: ","px) {\n    white-space: unset;\n  }\n  @media (max-width: ","px) {\n    margin: 0 0 0 20px;\n  }\n"])),o.fonts.franklin,o.fontWeights.bold,o.widths.small,o.widths.medium),t.contentTextClass=(0,a.css)(s||(s=i(["\n  font-family: ",";\n  font-size: 18px;\n  font-weight: ",";\n  color: ",";\n  text-align: center;\n  margin: auto;\n  @media (min-width: ","px) {\n    width: 45%;\n  }\n  @media (min-width: ","px) {\n    font-size: 21px;\n  }\n  @media (max-width: ","px) {\n    text-align: left;\n    margin: 0 auto 19px;\n  }\n"],["\n  font-family: ",";\n  font-size: 18px;\n  font-weight: ",";\n  color: ",";\n  text-align: center;\n  margin: auto;\n  @media (min-width: ","px) {\n    width: 45%;\n  }\n  @media (min-width: ","px) {\n    font-size: 21px;\n  }\n  @media (max-width: ","px) {\n    text-align: left;\n    margin: 0 auto 19px;\n  }\n"])),o.fonts.cheltenham,o.fontWeights.light,o.colors.white,o.widths.medium,o.widths.mediumLarge,o.widths.small);var r,s,l,c,u;t.mainContent=(0,a.css)(l||(l=i(["\n  display: flex;\n  align-items: center;\n  justify-content: space-between;\n  border-radius: 6px;\n  padding: ","px;\n  margin: 0 ","px ","px;\n  width: calc(100% - (","px + ","px));\n  background-color: ",";\n  gap: 26px;\n  @media (min-width: ","px) {\n    gap: 0;\n  }\n  @media (max-width: ","px) {\n    display: block;\n    padding: 20px 30px;\n    margin: 0 20px 20px;\n    width: auto;\n  }\n"],["\n  display: flex;\n  align-items: center;\n  justify-content: space-between;\n  border-radius: 6px;\n  padding: ","px;\n  margin: 0 ","px ","px;\n  width: calc(100% - (","px + ","px));\n  background-color: ",";\n  gap: 26px;\n  @media (min-width: ","px) {\n    gap: 0;\n  }\n  @media (max-width: ","px) {\n    display: block;\n    padding: 20px 30px;\n    margin: 0 20px 20px;\n    width: auto;\n  }\n"])),45,20,20,90,40,o.colors.black,o.widths.medium,o.widths.small),t.logoClass=(0,a.css)(c||(c=i(["\n  display: none;\n  @media (min-width: ","px) {\n    display: flex;\n  }\n  svg {\n    width: 154px;\n    height: 20px;\n  }\n"],["\n  display: none;\n  @media (min-width: ","px) {\n    display: flex;\n  }\n  svg {\n    width: 154px;\n    height: 20px;\n  }\n"])),o.widths.medium),t.buttonClass=(0,a.css)(u||(u=i(["\n  display: flex;\n  white-space: nowrap;\n  border-radius: 3px;\n  font-family: ",";\n  font-weight: ",";\n  font-size: 12px;\n  text-decoration: none;\n  background-color: ",";\n  color: ",";\n  padding: 7px 10px;\n  text-transform: uppercase;\n  @media (max-width: ","px) {\n    width: 124px;\n    text-align: center;\n  }\n"],["\n  display: flex;\n  white-space: nowrap;\n  border-radius: 3px;\n  font-family: ",";\n  font-weight: ",";\n  font-size: 12px;\n  text-decoration: none;\n  background-color: ",";\n  color: ",";\n  padding: 7px 10px;\n  text-transform: uppercase;\n  @media (max-width: ","px) {\n    width: 124px;\n    text-align: center;\n  }\n"])),o.fonts.franklin,o.fontWeights.semiBold,o.colors.white,o.colors.black,o.widths.small)},TVGw:function(e,t,n){"use strict";n.d(t,"g",(function(){return c})),n.d(t,"e",(function(){return d})),n.d(t,"a",(function(){return p})),n.d(t,"c",(function(){return f})),n.d(t,"f",(function(){return m})),n.d(t,"b",(function(){return h}));var i=n("lSNA"),a=n.n(i),o=n("mczz"),r=n("8iTF"),s=n("zWrI"),l=n("00Pk");n.d(t,"d",(function(){return l.a}));var c=function(e){var t=e.hidden,n=void 0!==t&&t;document.body.style.overflowY=n?"hidden":"initial"},u=function e(t){!t.newURL.includes(s.a.COMMENTS_PANEL)&&t.oldURL.includes(s.a.COMMENTS_PANEL)&&(c({hidden:!1}),window.removeEventListener("hashchange",e))},d=function(e){var t=e.history,n=e.location;requestAnimationFrame((function(){setTimeout((function(){c({hidden:!0})}),0)})),requestAnimationFrame((function(){setTimeout((function(){var e=Object(o.f)(n,a()({},s.a.COMMENTS_PANEL,null));t.push(e,n),window.addEventListener("hashchange",u)}),0)}))},p=function(e){var t=e.history,n=e.location,i=Object(o.f)(n,{},[s.a.COMMENTS_PANEL,s.a.PERM_ID]);t.push(i),c({hidden:!1}),window.removeEventListener("hashchange",u)},f=function(e){return Object(r.h)(Object(o.b)(e,s.a.PERM_ID))},m=function(e,t,n){var i=e.history,l=e.location,c=Object(r.c)(t,n),u=Object(o.f)(l,a()({},s.a.PERM_ID,c));i.push(u)},h=function(e){var t=e.history,n=e.location,i=Object(o.f)(n,a()({},s.a.COMMENTS_PANEL,null),[s.a.PERM_ID]);t.push(i)}},To3l:function(e,t,n){"use strict";var i=n("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.newClass=t.liveClass=t.containerClass=t.bulletClass=t.GuideNavItems=t.GuideNavHeading=t.BulletBriefingContainer=void 0;var a=n("Jqp9"),o=i(n("wXC7")),r=n("3sMT"),s=t.containerClass=(0,a.css)("padding:1.5rem 1rem 1.5rem 2rem;background-color:",r.color.background.secondary,";border-top:1px solid ",r.color.stroke.quaternary,";border-bottom:1px solid ",r.color.stroke.quaternary,";margin-bottom:1rem;",o.default.breakpoint.small,"{padding:1.5rem 2.5rem;margin:0 auto 1.5rem;background-color:transparent;max-width:600px;border:1px solid ",r.color.stroke.quaternary,";border-radius:4px;}");t.bulletClass=(0,a.css)("font-family:",o.default.font.franklinBase,";font-size:17px;line-height:25px;margin-left:0;hanging-punctuation:first;a,span{color:",r.color.content.secondary,";text-decoration:none;border-bottom:1px solid ",r.color.stroke.tertiary,";&:hover{text-decoration:none;}}"),t.liveClass=(0,a.css)("a,span{border-color:",r.light.colors.signal.breaking.transform(o.default.setAlpha(.4)).rgba,";}"),t.newClass=(0,a.css)("::after{content:'New';font-family:",o.default.font.franklinBase,";font-size:",o.default.font.size(14),";color:",r.color.signal.breaking,";margin-left:0.5em;}"),t.GuideNavHeading=(0,a.styled)("span",{target:"e9xetbc0"})("display:none;font-family:",o.default.font.franklinBase,";font-weight:",o.default.font.weight.bold,";margin-top:8px;width:30%;border-right:1px solid ",r.color.stroke.quaternary,";white-space:nowrap;text-align:right;padding-right:20px;",o.default.breakpoint.mediumLarge,"{display:block;}"),t.GuideNavItems=(0,a.styled)("ul",{target:"e9xetbc1"})("font-family:",o.default.font.franklinBase,";font-size:14px;display:inline-flex;justify-content:space-around;width:100%;margin-top:8px;a:hover{text-decoration:underline;}"),t.BulletBriefingContainer=(0,a.styled)("div",{target:"e9xetbc2"})((0,a.themeFn)("treatment",{none:s,guide:(0,a.css)("display:flex;padding:1.5rem 1.5rem 1.5rem 1.5rem;max-width:600px;margin:0 auto 1.5rem;display:none;",o.default.breakpoint.medium,"{display:block;}")}))},TrUr:function(e,t,n){"use strict";var i=n("TqRt"),a=n("cDf5");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,Object.defineProperty(t,"getItemsWithHeadshots",{enumerable:!0,get:function(){return d.getItemsWithHeadshots}});var o=i(n("J4zp")),r=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=a(e)&&"function"!=typeof e)return{default:e};var n=p(t);if(n&&n.has(e))return n.get(e);var i={__proto__:null},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var r in e)if("default"!==r&&{}.hasOwnProperty.call(e,r)){var s=o?Object.getOwnPropertyDescriptor(e,r):null;s&&(s.get||s.set)?Object.defineProperty(i,r,s):i[r]=e[r]}return i.default=e,n&&n.set(e,i),i}(n("q1tI")),s=(i(n("17x9")),n("boCj")),l=n("Jqp9"),c=i(n("UzHl")),u=n("3+1v"),d=n("AKP5");function p(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(p=function(e){return e?n:t})(e)}function f(e){var t=e.title,n=e.items,i=e.trackEvent,a=e.trackLinkInteraction,d=e.parentUrl,p=(0,r.useState)(!1),f=(0,o.default)(p,2),m=f[0],h=f[1];if(!t||!n)return null;return r.default.createElement(s.InView,{as:"section",role:"complementary",className:(0,l.cx)(u.quoteClass,u.containerClass),"aria-label":t,onChange:function(e){e&&!m&&i&&(i({event:"impression"}),h(!0))}},r.default.createElement("h2",{className:u.titleClass},t),r.default.createElement("hr",null),r.default.createElement(c.default,{title:t,items:n,parentUrl:d,trackEvent:i,trackLinkInteraction:a}))}f.displayName="StorylineQuote",f.defaultProps={trackEvent:null,trackLinkInteraction:function(){}};t.default=f},TscS:function(e,t,n){"use strict";var i=n("gcR/"),a=n.n(i);n("q1tI");function o(e){var t,n=e.className,i=e.fill,o=e.direction;return"up"===o&&(t="rotate(-90 3.5 6.5)"),"down"===o&&(t="rotate(90 3.5 6.5)"),a()("svg",{width:"16",height:"16",viewBox:"0 0 9 16",version:"1.1",className:n},void 0,a()("g",{id:"Canvas",transform:"translate(-8250 -1500)"},void 0,a()("g",{id:"Vector"},void 0,a()("use",{xlinkHref:"#path0_stroke",transform:"translate(8251 1501.5)",fill:i}))),a()("defs",{},void 0,a()("path",{id:"path0_stroke",d:"M 6.5 6.5L 7.20711 7.20711L 7.91421 6.5L 7.20711 5.79289L 6.5 6.5ZM -0.707107 0.707107L 5.79289 7.20711L 7.20711 5.79289L 0.707107 -0.707107L -0.707107 0.707107ZM 5.79289 5.79289L -0.707107 12.2929L 0.707107 13.7071L 7.20711 7.20711L 5.79289 5.79289Z",transform:t})))}o.displayName="Caret",o.defaultProps={className:void 0,fill:"#111",direction:"right"},t.a=o},TvEp:function(e,t,n){"use strict";var i=n("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.heading1Selector=t.default=void 0;var a=n("Jqp9"),o=n("3sMT"),r=i(n("wXC7")),s=i(n("WThh")),l=i(n("qp0C")),c=(0,s.default)(["medium","large"]),u=function(e){return(0,a.css)("color:",o.color.content.secondary,";font-style:normal;font-weight:",r.default.font.weight.bold,";",c(e,{fontSize:[29,38],lineHeight:[34,44]}),";")},d=(0,a.themeFn)("treatment",{none:function(e){return(0,a.css)("color:",o.color.content.primary,";font-family:",r.default.font.serifMedium,";font-weight:",r.default.font.weight.bold,";font-style:italic;",c(e,{fontSize:[31,40],lineHeight:[36,46]}),";")},guide:function(e){return(0,a.css)("color:",o.color.content.primary,";font-family:",r.default.font.karnak,";font-weight:",r.default.font.weight.bold,";",c(e,{fontSize:[31,64],lineHeight:[36,48]}),";")},feature:function(e){return(0,a.css)("color:",o.color.content.primary,";font-family:",r.default.font.serifMedium,";font-weight:",r.default.font.weight.extraLight,";font-style:normal;",c(e,{fontSize:[36,44,47],lineHeight:[40,50,55]}),";")},magazine:function(e){return(0,a.css)("color:",o.color.content.primary,";font-family:",r.default.font.magslab,";font-weight:",r.default.font.weight.bold,";font-style:normal;",c(e,{fontSize:[47,54],lineHeight:[49,52]}),";")},opinion:function(e){return(0,a.css)("color:",o.color.content.primary,";font-family:",r.default.font.opinionBase,";font-weight:",r.default.font.weight.bold,";font-style:normal;",c(e,{fontSize:["opinion"===e.theme.section&&e.theme.opinionHeaderRedesign?40:47,57],lineHeight:["opinion"===e.theme.section&&e.theme.opinionHeaderRedesign?44:51,60]}),";")},sponsored:function(e){return(0,a.css)(u(e),";font-family:",r.default.font.sponsoredBase,";")},sponsoredSensitive:function(e){return(0,a.css)(u(e),";font-family:",r.default.font.sponsoredSensitive,";")},"t-magazine":function(e){return(0,a.css)("color:",o.color.content.primary,";font-family:",r.default.font.tmagSerifDisplayBase,";font-weight:",r.default.font.weight.bold,";font-style:normal;",c(e,{fontSize:[38,48],lineHeight:[42,54]}),";")},atHome:function(){return(0,a.css)("font-family:",l.default.cheltenham,";font-style:normal;font-weight:300;font-size:23px;line-height:31px;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale;")},liveSplitLayout:(0,a.css)("color:",o.color.content.primary,";font-family:",r.default.font.serifMedium,";font-weight:",r.default.font.weight.bold,";font-size:",r.default.font.size(31),";line-height:",r.default.font.size(36),";")}),p=(0,a.themeFn)("languageDirection",{rightToLeft:(0,a.css)("text-align:right;direction:rtl;unicode-bidi:isolate;")}),f=(0,a.themeFn)("language",{"zh-hans":(0,a.css)("font-family:",r.default.font.cheltenhamSCSerifBase,";font-weight:",r.default.font.weight.bold,";font-style:normal;"),"zh-hant":(0,a.css)("font-family:",r.default.font.cheltenhamTCSerifBase,";font-weight:",r.default.font.weight.bold,";font-style:normal;")}),m=(t.heading1Selector=function(e){return(0,a.css)("h1{",d(e),";}")},(0,a.styled)("h1",{target:"e1h9rw200"})(d,";",p,";",f,";"));t.default=m},U3NM:function(e,t,n){"use strict";var i=n("TqRt"),a=n("cDf5");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=i(n("q1tI")),r=(i(n("17x9")),n("Jqp9")),s=n("3sMT"),l=i(n("K2cq")),c=i(n("2C8b")),u=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=a(e)&&"function"!=typeof e)return{default:e};var n=d(t);if(n&&n.has(e))return n.get(e);var i={__proto__:null},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var r in e)if("default"!==r&&{}.hasOwnProperty.call(e,r)){var s=o?Object.getOwnPropertyDescriptor(e,r):null;s&&(s.get||s.set)?Object.defineProperty(i,r,s):i[r]=e[r]}return i.default=e,n&&n.set(e,i),i}(n("Hz/t"));function d(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(d=function(e){return e?n:t})(e)}var p=function(e){return e>9?e:e>0?"0".concat(e):"00"},f=function(e){var t=e.data,n=e.collections,i=e.headline,a=e.url,d=e.uri,f=e.styles,m=e.promotionalImage,h=e.ImageComponent;if(!t)return null;if(!t.media)return null;var g,y=t.media,v=y.summary,b=y.promotionalHeadline,_=y.headline,w=y.length,x=y.podcastSeries,k=y.uri,O=b||_&&_.default||"",T=v,C="";return x&&((g=x.image&&x.image.crops.length&&x.image.crops.reduce((function(e,t){return e||t.renditions.find((function(e){return"thumbStandard"===e.name}))||null}),null))&&!g.url&&(g=null),O||(O=x.title),T||(T=x.summary)),w&&(C=function(e){var t=Math.floor(e/60),n=e%60;return"".concat(p(t),":").concat(p(n))}(w)),o.default.createElement("figure",{className:(0,r.cx)(u.audioFigureClass,f)},o.default.createElement("figcaption",{className:u.audioFigcaptionClass},o.default.createElement("div",{className:"audioFigureHeading"},g?o.default.createElement("div",{className:u.audioFigureMediaClass},h):null,o.default.createElement("h3",{className:u.audioHeadingClass},O),T?o.default.createElement("span",{className:u.audioCaptionSpanClass},T):null)),o.default.createElement("div",{className:u.audioPlayButtonClass},o.default.createElement("a",{className:u.audioPlayButtonAnchorClass,onClick:function(e){var o,r,s,u,p,f,h,g,y,v,b,_,w,x,k,O,T,C,E,S,P,I,M,A,j,N,L,D,R,B,z,F,U,H,W=n.find((function(e){var t;return null===(t=e.slug)||void 0===t?void 0:t.match(/^audio-app-show-|audio-app-publisher-/)})),q=(null==W||null===(o=W.headline)||void 0===o?void 0:o.default)||(null==t||null===(r=t.media)||void 0===r||null===(s=r.podcastSeries)||void 0===s?void 0:s.title),V=(null==W||null===(u=W.promotionalMedia)||void 0===u||null===(p=u.crops)||void 0===p||null===(f=p[0])||void 0===f||null===(h=f.renditions)||void 0===h||null===(g=h[0])||void 0===g?void 0:g.url)||(null==W||null===(y=W.promotionalImage)||void 0===y||null===(v=y.image)||void 0===v||null===(b=v.crops)||void 0===b||null===(_=b[0])||void 0===_||null===(w=_.renditions)||void 0===w||null===(x=w[0])||void 0===x?void 0:x.url)||(null==t||null===(k=t.media)||void 0===k||null===(O=k.podcastSeries)||void 0===O||null===(T=O.image)||void 0===T||null===(C=T.crops)||void 0===C||null===(E=C[0])||void 0===E||null===(S=E.renditions)||void 0===S||null===(P=S[0])||void 0===P?void 0:P.url),G=t.media,Y=G.headline,X=G.sourceId,Z=G.fileUrl,J=G.uri,K=G.firstPublished,$=null==Y?void 0:Y.default,Q=(null==m?void 0:m.image)||(null==t||null===(I=t.media)||void 0===I||null===(M=I.promotionalImage)||void 0===M?void 0:M.image),ee=null==Q||null===(A=Q.crops)||void 0===A||null===(j=A.filter((function(e){return e&&"MEDIUM_SQUARE"===e.name})))||void 0===j||null===(N=j[0])||void 0===N||null===(L=N.renditions)||void 0===L?void 0:L[0].url,te=null==Q||null===(D=Q.crops)||void 0===D||null===(R=D.filter((function(e){return e&&"THREE_BY_TWO"===e.name})))||void 0===R||null===(B=R[0])||void 0===B||null===(z=B.renditions)||void 0===z?void 0:z[0].url,ne={audioAssetURI:J,audioFileURL:Z,audioSourceID:X,audioHeadline:$,articleHeadline:i,articleURL:a,articleURI:d,publishDate:K,showOrPublisherName:q,showOrPublisherImageURL:V,promotionalImageURL:ee,widePromotionalImageURL:te},ie=null===(F=window)||void 0===F||null===(U=F.config)||void 0===U?void 0:U.AppVersion;"function"==typeof c.default&&(0,c.default)()&&("10.31.0"===ie||(0,l.default)("10.31.0",ie))&&(e.preventDefault(),null===(H=window.NativeBridge)||void 0===H||H.playAudio(ne))},href:k,title:"Play Audio"},o.default.createElement("svg",{className:u.audioPlayButtonCircleClass,width:"40px",height:"40px",viewBox:"0 0 80 80",stroke:s.color.signal.editorial},o.default.createElement("g",{className:u.audioPlayButtonTriangleClass,transform:"translate(30, 25)",fill:s.color.signal.editorial},o.default.createElement("polygon",{points:"28 15 2 30 1 0"})),o.default.createElement("circle",{fill:"none",strokeWidth:"2",strokeLinecap:"round",cx:"40",cy:"40",r:"39"}))),C?o.default.createElement("span",{className:u.audioPlayButtonTextClass},C):null))};f.displayName="AudioBlockComponent",f.defaultProps={data:null,styles:null,collections:[],promotionalImage:null,ImageComponent:null};t.default=f},U4Wo:function(e,t,n){"use strict";var i=this&&this.__createBinding||(Object.create?function(e,t,n,i){void 0===i&&(i=n);var a=Object.getOwnPropertyDescriptor(t,n);a&&!("get"in a?!t.__esModule:a.writable||a.configurable)||(a={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,i,a)}:function(e,t,n,i){void 0===i&&(i=n),e[i]=t[n]}),a=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&i(t,e,n);return a(t,e),t},r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var s=o(n("q1tI")),l=n("Jqp9"),c=n("X6oL"),u=r(n("5UIh")),d=o(n("NhHT")),p=n("djNW"),f=r(n("fdns")),m=r(n("Urcd")),h=n("FY2l"),g=n("0ryP"),y=r(n("XvvG")),v=n("HDG5"),b=n("syiw"),_=n("etPP");t.default=function(e){var t,n,i,a,o,r,w,x,k,O,T,C,E,S,P,I,M,A,j,N=e.unit,L=e.isDockExpandable,D=void 0===L||L,R=e.timesToShowExpanded,B=e.daysBeforeExpandedViewsReset,z=e.minimized,F=void 0!==z&&z,U=(0,c.useTracking)(),H="/"===(0,h.getPathName)()?"homepage":"article",W=(0,b.useMessageSelection)({config:{name:"dock"}}),q=(0,s.useState)(!1),V=q[0],G=q[1],Y=(0,v.useUserState)(),X=(0,s.useState)(F),Z=X[0],J=X[1];if(!V&&D&&R){var K=null===(n=null===(t=null==W?void 0:W.response)||void 0===t?void 0:t.userstate())||void 0===n?void 0:n.messageSelectionMessageCaps,$=null;if(K)if((ne=K).forEach((function(e){var t,n;"dock"===(null==e?void 0:e.unit)&&(null==e?void 0:e.campaign)===(null===(t=null==W?void 0:W.response)||void 0===t?void 0:t.campaign())&&(null==e?void 0:e.audience)===(null===(n=null==W?void 0:W.response)||void 0===n?void 0:n.audience())&&($=e)})),null!==$){var Q=$,ee=new Date(null==Q?void 0:Q.lastSeenOn).getTime(),te=(new Date).getTime();Math.abs(Math.round(te-ee)/6e4)>24*(B||365)*60?(J(!1),Q.viewCount=1):(Q.viewCount>R&&J(!0),Q.viewCount+=1),Q.lastSeenOn=(new Date).toISOString(),Y.update({messageSelectionMessageCaps:ne})}if(!$){var ne=[];K&&(ne=K),ne.push({unit:"dock",campaign:null===(i=null==W?void 0:W.response)||void 0===i?void 0:i.campaign(),audience:null===(a=null==W?void 0:W.response)||void 0===a?void 0:a.audience(),lastSeenOn:(new Date).toISOString(),viewCount:1,dismissed:!1}),Y.update({messageSelectionMessageCaps:ne})}G(!0)}var ie=s.default.createElement("div",{className:d.headerText},"Thanks for reading The Times."),ae=s.default.createElement("div",{className:(0,l.cx)(d.mainContent),style:{backgroundColor:null===(o=null==N?void 0:N.content)||void 0===o?void 0:o.backgroundColor}},s.default.createElement("div",{className:d.headerContainer},s.default.createElement("div",{className:d.headerLogo},(null===(r=null==N?void 0:N.content)||void 0===r?void 0:r.logoWhite)?s.default.createElement(m.default,null):s.default.createElement(f.default,null)),s.default.createElement("div",{style:{color:null===(w=null==N?void 0:N.content)||void 0===w?void 0:w.textColor}},s.default.createElement("div",{className:d.header},null===(x=null==N?void 0:N.content)||void 0===x?void 0:x.header),s.default.createElement("div",{className:d.subHeader},null===(k=null==N?void 0:N.content)||void 0===k?void 0:k.subHeader),s.default.createElement("div",{className:d.subHeader2},null===(O=null==N?void 0:N.content)||void 0===O?void 0:O.subHeader2))),s.default.createElement("div",{className:d.ctaContainer},(null===(T=null==N?void 0:N.content)||void 0===T?void 0:T.priceDisplay)?s.default.createElement(y.default,{oldPriceClassname:d.strikeThroughExpression,currentPriceClassname:d.salePriceExpression,oldPrice:null===(C=null==N?void 0:N.content)||void 0===C?void 0:C.strikeThroughPriceDisplay,currentPrice:"".concat(null===(E=null==N?void 0:N.content)||void 0===E?void 0:E.priceDisplay,"/week more")}):null,s.default.createElement(_.Button,{component:"a",testId:null===(S=null==N?void 0:N.content)||void 0===S?void 0:S.cta,className:d.button,style:{backgroundColor:null===(P=null==N?void 0:N.content)||void 0===P?void 0:P.buttonColor},href:null===(I=null==N?void 0:N.content)||void 0===I?void 0:I.clickThroughURI,onClick:function(){var e,t,n,i,a;U.trackEvent({event:"moduleInteraction",eventData:{pagetype:H,trigger:"module",type:"click"},module:{name:"dock",context:"expanded",audience:(null===(e=null==N?void 0:N.content)||void 0===e?void 0:e.audience)||"",campaign:(null===(t=null==N?void 0:N.content)||void 0===t?void 0:t.campaign)||"",label:null===(n=null==N?void 0:N.content)||void 0===n?void 0:n.label,region:"",element:{name:p.Action.LogInOrRegister,label:null===(i=null==N?void 0:N.content)||void 0===i?void 0:i.cta,url:null===(a=null==N?void 0:N.content)||void 0===a?void 0:a.clickThroughURI}}})}},null===(M=null==N?void 0:N.content)||void 0===M?void 0:M.cta)));return s.default.createElement(u.default,{testId:"onsite-messaging-unit-".concat(null===g.config||void 0===g.config?void 0:g.config.name),"data-campaign":null==N?void 0:N.campaign,"data-audience":null==N?void 0:N.audience,className:d.dockBorder,unit:N,contentID:"B2B_CUNY",dockID:"expand",header:ie,card:ae,isDockDismissible:!1,isDockExpandable:!0,minimized:Z,overrideHeaderWidth:!0,timesToShowExpanded:null===(A=null==N?void 0:N.content)||void 0===A?void 0:A.timesToShowExpanded,daysBeforeExpandedViewsReset:null===(j=null==N?void 0:N.content)||void 0===j?void 0:j.daysBeforeExpandedViewsReset})}},U4cX:function(e,t,n){"use strict";var i=n("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.diptychContainerStyles=t.StyledDiptych=void 0;var a=n("Jqp9"),o=i(n("wXC7")),r=n("HvhO"),s=i(n("6RhY")),l=(0,a.themeFn)("mediaSize",{large:function(e){return(0,a.css)(e.theme.breakpointMap.small,"{",s.default,"{margin-left:",o.default.grid.pageMargin,"px;margin-right:",o.default.grid.pageMargin,"px;}}",e.theme.breakpointMap.medium,"{&:last-child{",s.default,"{margin-left:0;}}}",e.theme.breakpointMap.mediumLarge,"{",s.default,"{margin-left:0;margin-right:0;}}")},full:function(e){return(0,a.css)(e.theme.breakpointMap.small,"{",s.default,"{margin-left:",o.default.grid.pageMargin,"px;margin-right:",o.default.grid.pageMargin,"px;}}",e.theme.breakpointMap.medium,"{&:last-child{",s.default,"{margin-left:0;}}}")}}),c=t.diptychContainerStyles=function(e){return(0,a.css)("display:flex;flex-direction:column;",e.theme.breakpointMap.medium,"{flex-direction:row;}> *{",function(e){return(0,a.css)("width:100%;&:first-child{margin-bottom:25px;}",e.theme.breakpointMap.medium,"{width:50%;&:first-child{margin-bottom:0;margin-right:15px;}}")}(e),";",l(e),";}")};t.StyledDiptych=(0,a.styled)("div",{target:"e73j0it0"})(c,";",r.mediaFigureSizeStyles,";")},U7e9:function(e,t,n){"use strict";var i=n("TqRt"),a=n("cDf5");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=i(n("lSNA")),r=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=a(e)&&"function"!=typeof e)return{default:e};var n=u(t);if(n&&n.has(e))return n.get(e);var i={__proto__:null},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var r in e)if("default"!==r&&{}.hasOwnProperty.call(e,r)){var s=o?Object.getOwnPropertyDescriptor(e,r):null;s&&(s.get||s.set)?Object.defineProperty(i,r,s):i[r]=e[r]}return i.default=e,n&&n.set(e,i),i}(n("q1tI")),s=(i(n("17x9")),n("Jqp9")),l=n("kTfh"),c=n("AKP5");function u(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(u=function(e){return e?n:t})(e)}function d(e){var t=e.ariaControls,n=e.index,i=e.length,a=e.handleNavLeft,u=e.handleNavRight,d=(0,r.useRef)(null),p=(0,r.useRef)(null),f=0===n,m=n===i-1;return(0,r.useEffect)((function(){var e,t,n=document.activeElement;m&&n===(null==p?void 0:p.current)&&(null===(e=d.current)||void 0===e||e.focus());f&&n===(null==d?void 0:d.current)&&(null===(t=p.current)||void 0===t||t.focus())}),[d,p,m,f]),i<2?null:r.default.createElement("nav",{"aria-controls":t,className:l.arrowsNavClass},r.default.createElement("span",{ref:d,className:(0,s.cx)("arrow-left",l.arrowLeftClass,(0,o.default)({},l.disabledClass,0===n)),role:"button","aria-label":"Previous card","aria-disabled":0===n,onClick:a,onKeyUp:function(e){return(0,c.handleButtonPress)(e,a)},tabIndex:f?-1:0}),r.default.createElement("span",{ref:p,className:(0,s.cx)("arrow-right",l.arrowRightClass,(0,o.default)({},l.disabledClass,n===i-1)),role:"button","aria-label":"Next card","aria-disabled":n===i-1,onClick:u,onKeyUp:function(e){return(0,c.handleButtonPress)(e,u)},tabIndex:m?-1:0}))}d.displayName="ArrowNav",d.defaultProps={ariaControls:void 0};t.default=d},U7vG:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;t.default=function(e){if("string"!=typeof e&&(e="16:9"),e.match(/\d+%/))return e;e.match(/\d+\.\d+/)&&!e.match(/:/)&&(e="".concat(e,":1"));var t=0,n=e.split(":");return 2===n.length&&(t=Math.round(n[1]/n[0]*1e4)/100),t}},UAIX:function(e,t,n){"use strict";var i=n("VkAN"),a=n.n(i),o=n("gcR/"),r=n.n(o),s=n("lSNA"),l=n.n(s),c=n("J4zp"),u=n.n(c),d=n("q1tI"),p=n.n(d),f=n("eFc+"),m=n.n(f),h=n("Jqp9"),g=n("+/Tm"),y=n.n(g),v=n("lJVC"),b=n.n(v),_=n("SYzA"),w=n("wXC7"),x=n.n(w),k=n("45t3"),O=n("kz9X"),T=n.n(O),C=n("5dFD"),E=n("LXPD"),S=n("WPRB"),P=n("LON6"),I=n("+tSf"),M=n("E0i8"),A=n("sOrY"),j=n("fZdH"),N=n("X6oL"),L=n("i9j7"),D=n.n(L),R=n("9rMz"),B=n.n(R),z=n("dO+a"),F=n.n(z),U=n("GB3f"),H=function(e){var t=e.className,n=e.handleClick,i=Object(h.useTheme)(),a=Object(d.useState)("/"),o=u()(a,2),s=o[0],l=o[1];return Object(d.useEffect)((function(){l(Object(U.d)(i))}),[i]),"magazine"===i.section?r()("a",{href:"/section/magazine","aria-label":"New York Times Magazine Logo, link to Magazine section",onClick:function(e){n&&n(e,"/section/magazine")}},void 0,r()(B.a,{className:t})):"t-magazine"===i.section?r()("a",{href:"/section/t-magazine","aria-label":"T Magazine Logo, link to T-Magazine section",onClick:function(e){n&&n(e,"/section/t-magazine")}},void 0,r()(F.a,{className:t})):r()("a",{href:s,"data-testid":"masthead-logo","aria-label":"New York Times homepage",onClick:function(e){n&&n(e,s)}},void 0,r()(D.a,{className:t}))};H.displayName="Logo",H.defaultProps={className:void 0,handleClick:null};var W,q=H,V=n("z9xE"),G=function(e){var t=e.sectionName,n=e.sectionUrl,i=e.handleClick;return"guide"!==Object(h.useTheme)().treatment&&t?p.a.createElement(p.a.Fragment,null,r()("span",{className:V.k},void 0,r()(C.a,{onClick:function(e){i&&i(e)},link:{url:n}},void 0,t)),W||(W=r()("span",{className:V.i},void 0,"|"))):null};G.defaultProps={handleClick:null};var Y=G,X=function(e){var t=e.headline,n=e.headlineTopMarginClass,i=e.sectionName,a="guide"!==Object(h.useTheme)().treatment,o=Object(h.cx)(V.d,l()({},V.g,!i),n);return a?r()("span",{className:o},void 0,t):null};X.displayName="ArticleHeadline",X.defaultProps={headlineTopMarginClass:void 0};var Z,J,K,$=X;function Q(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function ee(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Q(Object(n),!0).forEach((function(t){l()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Q(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function te(e){var t=e.article,n=Object(h.useTheme)(),i=Object(N.useTracking)({eventData:{pageType:n.pageType?n.pageType.replace("vi-",""):""}}),a=Object(j.a)(),o=Object(M.b)(),s=Object(k.useBulletBriefLocationContext)().showStickyNav,l=n&&"guide"===n.treatment,c=Object(P.b)(t),p=!c&&(l?s:o),f=Object(d.useReducer)(A.a,{opacity:"0.000000001",zIndex:"-1",visibility:"hidden"}),m=u()(f,2),g=m[0],v=m[1],w=Object(_.a)();Object(d.useEffect)((function(){var e,n,i,o,r=p,s=["1_xpn_in_story","2_xpn_hamburger"],l=window&&window.matchMedia("(min-width: 1024px)").matches,c="Interactive"===(null==t?void 0:t.__typename),u=Object(I.c)(t),d="InteractiveBlock"===(null===(n=((null==t||null===(e=t.sprinkledBody)||void 0===e?void 0:e.content)||[])[0])||void 0===n?void 0:n.__typename);p&&l&&a&&null!=a&&null!==(i=a.SJ_xpn_standard_story_0424)&&void 0!==i&&i.variant&&!c&&!u&&!d&&s.includes(null==a||null===(o=a.SJ_xpn_standard_story_0424)||void 0===o?void 0:o.variant)&&(r=!1),v(r?{opacity:"1",zIndex:"900",visibility:"visible"}:{opacity:"0.000000001",zIndex:"-1",visibility:"hidden"})}),[p,a,t]);var O=function(e){return e.toLowerCase().split(" ").join("-")},L=function(e){window.location.assign(e)},D=function(e,t){i.trackEvent(ee(ee({},t),{},{eventCallback:L(e)}))};if(c)return null;var R,B,z=n&&"t-magazine"===n.treatment,F=n&&"magazine"===n.treatment,U=V.b;z?(R=V.s,B=V.r,U=V.q):R=F?V.h:V.a;var H=l&&t,W=r()("div",{className:V.n},void 0,r()(E.a,{className:V.m,share:t,position:S.a.INSTORYMASTHEAD,suppressGiftArticleTooltip:!0,tooltipAlign:"right"})),G=w?null:W;return r()("div",{className:V.o,style:g,id:"in-story-masthead"},void 0,r()("div",{className:V.f},void 0,r()("div",{className:V.e},void 0,n.sectionDisplayName&&n.sectionUrl&&r()(Y,{handleClick:function(e){!function(e,t,n){e.preventDefault(),D(t,{event:"moduleInteraction",eventData:{trigger:"module",type:"click"},module:{name:"section-navigation",region:"body",context:"navigation",label:"Section Menu",element:{name:O("go-to-".concat(n)),label:O("clicked-".concat(n)),url:t}}})}(e,n.sectionUrl,n.sectionDisplayName)},sectionName:n.sectionDisplayName,sectionUrl:n.sectionUrl}),r()($,{headline:t.headline.default,headlineTopMarginClass:B,sectionName:n.sectionDisplayName}),H&&r()(T.a,{article:t})),r()("div",{className:V.l},void 0,r()("div",{className:U},void 0,!z&&r()(C.a,{"aria-label":F?"New York Times Magazine homepage":"New York Times homepage",className:V.p,link:{url:F?"https://www.nytimes.com/section/magazine":"https://www.nytimes.com/"}},void 0,Z||(Z=r()(y.a,{}))),z&&r()(C.a,{"aria-label":"New York Times Style Magazine homepage",className:V.p,link:{url:"https://www.nytimes.com/section/t-magazine"}},void 0,r()(b.a,{fill:x.a.color.gray10})),r()("span",{className:V.c},void 0,r()(q,{sectionName:n.treatment,className:R,homepath:n.homepath,language:n.language,handleClick:function(e,t){!function(e,t){e.preventDefault(),D(t,{event:"moduleInteraction",eventData:{trigger:"module",type:"click"},module:{label:"NYT-nameplate",region:"body",context:"navigation",element:{name:"go-to-NYT-home",label:"clicked-NYT-nameplate"}}})}(e,t)}}))),r()("span",{className:V.j},void 0,t.shortUrl||t.url),G)))}te.displayName="InStoryMasthead",te.fragments={article:m()(J||(J=a()(["\n    fragment InStoryMasthead_article on Article {\n      id\n      headline {\n        default\n      }\n      ...ShareToolbar_share\n      ...ContentLink_link\n    }\n    ","\n    ","\n  "])),E.a.fragments.share,C.a.fragments.link),interactive:m()(K||(K=a()(["\n    fragment InStoryMasthead_interactive on Interactive {\n      id\n      headline {\n        default\n      }\n      ...ShareToolbar_share\n      ...ContentLink_link\n    }\n    ","\n    ","\n  "])),E.a.fragments.share,C.a.fragments.link)},te.defaultProps={article:{}};t.a=te},UGcZ:function(e,t,n){"use strict";var i=n("Jqp9"),a=n("3Rk2"),o=n.n(a),r=n("wXC7"),s=n.n(r),l=o()([s.a.breakpoint.small]),c=Object(i.styled)("article",{target:"e1lmdhsb0"})("position:relative;",l({margin:["0 auto","0 auto 20px"]}),";");t.a=c},UHqw:function(e,t,n){"use strict";var i=n("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=i(n("WQPM"));t.default=a.default},UIP5:function(e,t,n){"use strict";var i=n("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"AudioPlayer",{enumerable:!0,get:function(){return o.default}}),Object.defineProperty(t,"VideoPlayer",{enumerable:!0,get:function(){return a.default}}),Object.defineProperty(t,"initiateShareWithTracking",{enumerable:!0,get:function(){return r.default}});var a=i(n("1cNr")),o=i(n("R99I")),r=i(n("o6DT"))},ULBD:function(e,t,n){"use strict";t.a="/vi-assets/static-assets/icon-athletic-pulse_144x144-393cbda91e2678278456723b62a9b21f.webp"},UMeL:function(e,t,n){"use strict";var i=n("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.transcriptHeaderClass=t.playbackControlsClass=t.playPauseClass=t.mobileDurationClass=t.leftArrowClass=t.kickerClass=t.fileControlsClass=t.desktopDurationClass=t.controlsClass=t.backToClass=void 0;var a=n("Jqp9"),o=n("3sMT"),r=i(n("wXC7"));t.transcriptHeaderClass=(0,a.css)("display:flex;flex-direction:row;justify-content:space-between;align-items:center;position:relative;font-family:",r.default.font.franklinBase,";font-weight:",r.default.font.weight.mediumBold,";color:",o.color.content.secondary,";padding:0 20px;height:50px;*{-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale;text-rendering:optimizeLegibility;-webkit-touch-callout:none;}",r.default.breakpoint.medium,"{padding:0 50px;height:42px;}",r.default.breakpoint.mediumLarge,"{padding:0 74px 0 112px;}"),t.backToClass=(0,a.css)("background-color:rgba(0,0,0,0);font-family:",r.default.font.franklinBase,";font-size:14px;font-weight:",r.default.font.weight.medium,";display:flex;align-items:center;transition:opacity 0.2s;height:15px;color:",o.color.content.primary,";&:hover{opacity:0.6;}",r.default.breakpoint.large,"{display:none;}span{margin-top:1px;}"),t.kickerClass=(0,a.css)("display:none;font-size:13px;letter-spacing:0.04em;text-transform:uppercase;font-weight:",r.default.font.weight.bold,";",r.default.breakpoint.large,"{display:block;}"),t.leftArrowClass=(0,a.css)("width:9px;height:9px;margin-right:5px;transform:rotate(45deg);border-left:1px solid ",o.color.stroke.primary,";border-bottom:1px solid ",o.color.stroke.primary,";"),t.controlsClass=(0,a.css)("display:flex;flex-direction:row;font-size:12px;align-items:center;"),t.fileControlsClass=(0,a.css)("flex-direction:row;align-items:baseline;justify-content:space-between;width:55px;margin-right:40px;display:none;",r.default.breakpoint.large,"{display:flex;}"),t.playbackControlsClass=(0,a.css)("display:flex;flex-direction:row;align-items:center;justify-content:space-between;"),t.playPauseClass=(0,a.css)("display:flex;justify-content:center;align-items:center;background-color:rgba(0,0,0,0);margin-right:10px;transition:opacity 0.2s;width:22px;height:22px;transform:scale(1.3);&:hover{opacity:0.6;}",r.default.breakpoint.medium,"{transform:none;}"),t.desktopDurationClass=(0,a.css)("display:none;",r.default.breakpoint.small,"{display:block;}"),t.mobileDurationClass=(0,a.css)("display:block;",r.default.breakpoint.small,"{display:none;}")},"UN+u":function(e,t,n){"use strict";var i=this&&this.__createBinding||(Object.create?function(e,t,n,i){void 0===i&&(i=n);var a=Object.getOwnPropertyDescriptor(t,n);a&&!("get"in a?!t.__esModule:a.writable||a.configurable)||(a={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,i,a)}:function(e,t,n,i){void 0===i&&(i=n),e[i]=t[n]}),a=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&i(t,e,n);return a(t,e),t},r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var s=o(n("q1tI")),l=n("X6oL"),c=r(n("5UIh")),u=o(n("MH66")),d=n("syiw"),p=n("HDG5"),f=n("djNW"),m=n("FY2l"),h=n("6gWn");t.default=function(e){var t,n,i,a,o,r,g=e.unit,y=(0,s.useState)(!1),v=y[0],b=y[1],_=(0,d.useMessageSelection)({config:{name:"dock"}}),w=(0,p.useUserState)(),x=(0,l.useTracking)(),k="/"===(0,m.getPathName)()?"homepage":"article",O=s.default.createElement("div",{className:u.mainText},"Thank you for reading The Times. ",s.default.createElement("br",{className:u.lineBreak}),s.default.createElement("span",{className:u.boldText},(null===(t=null==g?void 0:g.content)||void 0===t?void 0:t.boldCopy)||""),s.default.createElement("span",null,(null===(n=null==g?void 0:g.content)||void 0===n?void 0:n.copy)||"")),T=function(e,t){x.trackEvent({event:"moduleInteraction",eventData:{pagetype:k,trigger:"module",type:"click"},module:{name:e,label:"CH_CHURN_CANCEL_THE_CANCEL_2112",element:{name:f.Action.Subscribe,url:t}}})};if(_.loading)return null;if(!v){var C=null===(a=null===(i=null==_?void 0:_.response)||void 0===i?void 0:i.userstate())||void 0===a?void 0:a.messageSelectionMessageCaps,E=null;if(C)if((P=C).forEach((function(e){var t,n;"dock"===(null==e?void 0:e.unit)&&(null==e?void 0:e.campaign)===(null===(t=null==_?void 0:_.response)||void 0===t?void 0:t.campaign())&&(null==e?void 0:e.audience)===(null===(n=null==_?void 0:_.response)||void 0===n?void 0:n.audience())&&(E=e)})),null!==E){var S=E;S.viewCount+=1,S.lastSeenOn=(new Date).toISOString(),w.update({messageSelectionMessageCaps:P})}if(!E){var P=[];C&&(P=C),P.push({unit:"dock",campaign:null===(o=null==_?void 0:_.response)||void 0===o?void 0:o.campaign(),audience:null===(r=null==_?void 0:_.response)||void 0===r?void 0:r.audience(),lastSeenOn:(new Date).toISOString(),viewCount:1,dismissed:!1}),w.update({messageSelectionMessageCaps:P})}b(!0)}return s.default.createElement(c.default,{testId:"onsite-messaging-unit-".concat(null===h.config||void 0===h.config?void 0:h.config.name),"data-campaign":null==g?void 0:g.campaign,"data-audience":null==g?void 0:g.audience,unit:g,contentID:"CH_CHURN_CANCEL_THE_CANCEL_2112",dockID:"standard",header:O,hideVerticleRuleInHeader:!0,headingClassName:u.headerContainer,onDockHeadingClick:function(){var e="https://myaccount.nytimes.com/reactivate-digital-subscription";T("chChurnCanceltheCancel2112",e),T("dock",e),window.open(e,"_blank","noopener,noreferrer")},isDockDismissible:!1,isDockExpandable:!1,minimized:!0})}},Uc1u:function(e,t,n){"use strict";var i=n("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.AudioRelatedLinks=void 0,Object.defineProperty(t,"AudioRelatedLinksDescription",{enumerable:!0,get:function(){return s.AudioRelatedLinksDescription}}),Object.defineProperty(t,"AudioRelatedLinksHeadline",{enumerable:!0,get:function(){return s.AudioRelatedLinksHeadline}}),t.default=void 0;var a=i(n("q1tI")),o=(i(n("17x9")),i(n("OB6K"))),r=i(n("fY8U")),s=n("3P4k"),l=t.AudioRelatedLinks=function(e){var t=e.children,n=e.related,i=e.displayStyle,l=e.className,c=a.default.Children.toArray(t).length>0,u=(null==n?void 0:n.length)||0,d=u>0;return a.default.createElement(o.default,{theme:{displayStyle:i.toLowerCase()}},a.default.createElement(s.StyledAudioRelatedLinks,{displayStyle:i.toLowerCase(),className:l,hasChildren:c,hasLinks:d},t,n&&u>0&&a.default.createElement(r.default.Provider,{value:u},a.default.createElement(s.AudioRelatedLinksSeries,{hasHeadlineorDescription:c},n))))};l.displayName="AudioRelatedLinks",l.defaultProps={children:null,related:null,displayStyle:"STANDARD",className:void 0};t.default=l},UeuO:function(e,t,n){"use strict";n.d(t,"h",(function(){return s})),n.d(t,"a",(function(){return l})),n.d(t,"f",(function(){return c})),n.d(t,"g",(function(){return u})),n.d(t,"e",(function(){return d})),n.d(t,"c",(function(){return p})),n.d(t,"b",(function(){return f})),n.d(t,"d",(function(){return m})),n.d(t,"i",(function(){return h}));var i=n("Jqp9"),a=n("wXC7"),o=n.n(a),r=n("WPRB"),s=Object(i.css)(r.f," &{font-size:",o.a.font.size(18),";font-weight:",o.a.font.weight.bold,";color:",o.a.color.black,";display:flex;justify-content:space-between;margin-bottom:10px;",o.a.breakpoint.large,"{font-size:",o.a.font.size(14),";margin-bottom:7px;}}"),l=Object(i.css)(s," ",r.f," &{margin-left:0;}"),c=Object(i.css)(r.f," &{display:flex;justify-content:space-between;align-items:center;p{font-size:",o.a.font.size(16),";line-height:",o.a.font.size(20),";font-family:",o.a.font.franklinBase,";margin-bottom:12px;max-width:238px;}strong{font-weight:",o.a.font.weight.bold,";}",o.a.breakpoint.large,"{p{font-size:",o.a.font.size(12),";line-height:",o.a.font.size(15),";max-width:100%;}}}"),u=Object(i.css)("font-size:",o.a.font.size(14),";font-family:",o.a.font.franklinBase,";font-weight:",o.a.font.weight.bold,";",o.a.breakpoint.large,"{font-size:",o.a.font.size(12),";}"),d=Object(i.css)(r.f," &{background-color:transparent;width:100%;display:flex;align-items:center;justify-content:flex-start;}"),p=Object(i.css)("display:none;",o.a.breakpoint.large,"{display:inline-block;}"),f=Object(i.css)(r.f," &{display:inline-block;",o.a.breakpoint.large,"{display:none;}}"),m=Object(i.css)(r.f," &{text-decoration:underline;}"),h=Object(i.css)(r.f," &{height:1rem;width:1rem;display:flex;scale:0.4;}")},UqQm:function(e,t,n){"use strict";var i=n("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=i(n("q1tI")),o=(i(n("17x9")),i(n("0oBV"))),r=n("O9F4"),s=i(n("CzSb")),l=function(e){var t,n=null==e||null===(t=e.crops)||void 0===t?void 0:t.find((function(e){return"MEDIUM_SQUARE"===e.name})),i=n&&n.renditions&&n.renditions.find((function(e){return"square320"===e.name}));return null==i?void 0:i.url},c=function(e){var t,n;return null==e||null===(t=e.crops)||void 0===t||null===(n=t.square320)||void 0===n?void 0:n.url},u=function(e){var t,n=e.isInAMP,i=e.isInEditor,o=e.isInHybrid,u=e.leadPhoto,d=e.children,p=e.paragraphContent;return t=n?a.default.createElement("div",null,a.default.createElement("amp-img",{src:l(u),layout:"responsive",alt:"",height:"98",width:"98"})):i?a.default.createElement("img",{alt:"",src:c(u)}):o?a.default.createElement("img",{className:r.headshotContainerClass,alt:"",src:l(u)}):a.default.createElement("img",{alt:"",src:l(u)}),a.default.createElement("div",null,a.default.createElement(s.default,{reporterHeadshot:t,isInEditor:i},o?p:d||p))};u.displayName="FeaturedReporter",u.defaultProps={leadPhoto:void 0,isInAMP:!1,isInHybrid:!1,isInEditor:!1,paragraphContent:[],children:null};var d=(0,o.default)(u);d.disableHydration=!0;t.default=d},Urcd:function(e,t,n){"use strict";var i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){return a.default.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"23.7 -85.1 300 39.5",role:"img","aria-label":"The New York Times Logo"},a.default.createElement("path",{d:"m46.2-81c0-3.2-3-4.2-5.6-4v.5c1.5 0 2.7.5 2.7 1.6 0 .7-.5 1.6-2 1.6-1.2 0-3.5-.7-5.4-1.3-2.1-.7-4-1.4-5.6-1.4-3.2 0-5.6 2.4-5.6 5.3 0 2.4 1.8 3.2 2.5 3.5l.2-.4c-.5-.3-.9-.7-.9-1.6 0-.7.6-1.8 2.3-1.8 1.5 0 3.4.7 6 1.4 2.2.6 4.7 1.2 6 1.4v5l-2.5 2.1v.2l2.5 2.2v6.9c-1.3.7-2.8.9-4 .9-2.4 0-4.6-.6-6.4-2.6l6.7-3.2v-11.1l-8.2 3.6c.9-2.2 2.6-3.6 4.3-4.7l-.1-.4c-4.9 1.3-9.3 5.8-9.3 11.3 0 6.6 5.4 11.5 11.5 11.5 6.6 0 10.8-5.2 10.7-10.6h-.4c-1 2.1-2.4 4.1-4.2 5.1v-6.8l2.6-2.1v-.2l-2.6-2.1v-5c2.3-.1 4.8-1.8 4.8-4.8zm-14.2 18-2 1c-1.1-1.5-1.9-3.5-1.9-6.2 0-1.1.1-2.5.5-3.5l3.4-1.5zm17.3 3.6-2.2 1.6.3.3 1-.7 3.6 3.3 4.9-3.3-.2-.3-1.3.8-1.6-1.6v-11.2l1.3-1 2.8 2.3v9.9c0 6.2-1.4 7.2-4.2 8.2v.4c4.6.2 8.8-1.4 8.8-9.3v-10.6l1.5-1.2-.2-.2-1.3 1-4-3.5-4.6 3.5v-13.4h-.3l-5.8 3.9v.3c.6.4 1.6.6 1.6 2.5v18.3zm29.8-1.7-4 3.1-4.1-3.3v-1.9l7.7-5.2v-.2l-3.8-5.9-8.5 4.5v10.7l-1.7 1.3.3.3 1.5-1.2 5.5 4 7.4-5.8zm-8.1-2.7v-8l.3-.2 3.6 5.6zm39.3-18.7c0-.5-.1-.9-.3-1.5h-.4c-.5 1.4-1.1 2.1-2.7 2.1-1.4 0-2.5-.9-3.1-1.5l-4.7 5.4.4.4 1.3-1.5c1 .8 1.7 1.5 4 1.6v13.5l-9.5-16.5c-.7-1.2-2-3.1-4.3-3.1-2.6 0-4.9 2.2-4.6 5.9h.5c.1-1 .6-2.1 1.7-2.1.9 0 1.7.9 2.1 1.6v5.3c-3 0-4.9 1.4-4.9 3.8 0 1.2.6 3.3 2.7 3.7v-.4c-.3-.3-.5-.6-.5-1.1 0-.9.7-1.5 1.9-1.5.2 0 .7 0 .9.1v6.9c-3.5 0-6.1 1.9-6.1 5.2 0 3.1 2.7 4.6 5.5 4.4v-.4c-1.7-.2-2.7-1-2.7-2.1 0-1.4 1-2.1 2.3-2.1s2.5.8 3.3 1.7l4.7-5.2-.4-.4-1.2 1.4c-1.8-1.6-2.8-2.2-4.9-2.5v-16.3l13.2 22.9h.9v-22.9c2.5-.1 4.9-2 4.9-4.8zm11.8 21.4-4 3.1-4.2-3.3v-1.9l7.7-5.2v-.2l-3.8-5.9-8.4 4.5v10.7l-1.7 1.3.3.3 1.5-1.2 5.5 4 7.4-5.8zm-8.2-2.7v-8l.3-.2 3.6 5.6zm34.9-8.9-1.2.9-3.1-2.6-3.6 3.3 1.5 1.4v12.3l-4-2.5v-10l1.3-.9-3.8-3.5-3.5 3.3 1.5 1.4v11.7l-.5.3-3.5-2.4v-9.8c0-2.3-1.1-2.9-2.5-3.8-1.2-.7-1.7-1.4-1.7-2.5 0-.9.9-1.5 1.4-1.7v-.4c-1.2 0-4.7 1.3-4.8 4.5 0 1.6.7 2.3 1.6 3.1.8.8 1.6 1.5 1.6 2.9v9.4l-1.7 1.4.3.4 1.6-1.2 4.3 3.4 4.1-2.8 4.5 2.8 8.7-5v-10.9l2.1-1.6zm30.2-9-1.6 1.5-3.6-3.2-5.3 4v-3.7h-.5l.1 26.4c-.5-.1-1.9-.4-3.1-.6l-.1-22.1c0-1.6-1.2-3.9-4.1-3.9-3 0-4.9 2.3-4.9 4.6h.5c.2-1 .7-1.8 1.6-1.8 1 0 1.9.6 1.9 2.8v6.4c-3 .1-4.7 1.8-4.7 3.8 0 1.3.6 3.3 2.7 3.3l.1-.4c-.7-.3-.9-.7-.9-1.1 0-.9.9-1.3 2.1-1.3h.6v10.1c-2.4.8-3.5 2.6-3.5 4.5 0 2.7 2.2 4.8 5.4 4.8 2.3 0 4.2-.4 6.3-.9 1.7-.3 3.7-.7 4.7-.7 1.2 0 1.8.6 1.8 1.5 0 1.1-.5 1.6-1.2 1.7l.1.4c2.7-.5 4.2-2.1 4.2-4.5 0-2.5-2.4-4-5-4-1.4 0-4 .4-6.1.9-2.3.5-4.5.7-5.2.7-1.1 0-2.5-.5-2.5-2.1 0-1.4 1.1-2.4 3.9-2.4 1.5 0 3.2.2 5.1.7 2 .4 3.7 1 5.4 1 2.4 0 4.5-.9 4.5-4.3v-20.1l1.9-1.6zm-6.7 10.1c-.4.5-1.1.9-1.9.9-.9 0-1.6-.5-2-.9v-7.3l1.7-1.1 2.3 2.1v6.3zm0 4.8c-.4-.4-1.1-.8-1.9-.8s-1.6.5-2 .8v-4.3c.3.3 1.1.9 2 .9s1.6-.5 1.9-.9zm0 7.6c0 1.3-.9 2.6-2.6 2.6-.3 0-1 0-1.3-.1v-9.5c.4-.4 1.1-.9 2-.9.8 0 1.5.5 1.9.9zm22.3-11.5-5.3-3.8-7.9 4.5v10.6l-1.6 1.3.2.3 1.3-1 5.2 3.8 8.1-4.9zm-8.6 10.2v-11.6l4.1 3v11.6zm24.2-13.6h-.3c-.4.4-1 .7-1.4.7-.6 0-1.4-.4-1.8-.9h-.3l-2.8 3-2.8-3-4.8 3.3.2.4 1.3-.9 1.7 1.8v10.3l-2.2 1.6.3.3 1-.7 3.9 3.3 5.1-3.4-.2-.3-1.4.9-1.9-1.7v-11.5c.8.9 1.8 1.7 2.9 1.7 2.1 0 3.3-2.4 3.5-4.9zm19.6 15.7-5.6 3.6-7.5-11.4 5.3-8.3h.3c.6.6 1.7 1.3 2.7 1.3 1.1 0 1.9-.6 2.4-1.3h.3c-.2 3.3-2.4 5.2-4.1 5.2s-2.5-.8-3.4-1.3l-.5.7 8.2 12.1 1.6-1zm-17.9-1-2.2 1.6.3.3 1-.7 3.6 3.3 4.9-3.3-.3-.3-1.2.8-1.6-1.6v-25.2h-.3l-5.9 3.9v.3c.6.3 1.7.5 1.7 2.5zm45-21.6c0-3.2-3-4.2-5.6-4v.5c1.5 0 2.7.5 2.7 1.6 0 .7-.5 1.6-2 1.6-1.2 0-3.5-.7-5.4-1.3-2.1-.7-4-1.4-5.6-1.4-3.2 0-5.6 2.4-5.6 5.3 0 2.4 1.8 3.2 2.5 3.5l.2-.4c-.5-.3-.9-.7-.9-1.6 0-.7.6-1.8 2.3-1.8 1.5 0 3.4.7 6 1.4 2.2.6 4.7 1.2 6 1.4v5l-2.5 2.1v.2l2.5 2.2v6.9c-1.3.7-2.8.9-4 .9-2.4 0-4.6-.6-6.4-2.6l6.7-3.2v-11.1l-8.2 3.7c.9-2.2 2.6-3.6 4.3-4.7l-.1-.4c-4.9 1.3-9.3 5.8-9.3 11.3 0 6.6 5.4 11.5 11.5 11.5 6.6 0 10.8-5.2 10.7-10.6h-.4c-1 2.1-2.4 4.1-4.2 5.1v-6.8l2.6-2.1v-.2l-2.6-2.1v-5c2.2-.2 4.8-1.9 4.8-4.9zm-14.2 18-2 1c-1.1-1.5-1.9-3.5-1.9-6.2 0-1.1.1-2.5.5-3.5l3.4-1.5zm19.7-19.5h-.2l-3.3 2.8v.2l2.8 3.1h.3l3.3-2.7v-.2zm5 24.1-1.2.8-1.6-1.6v-11.3l1.6-1.2-.3-.4-1.2.9-2.8-3.4-4.7 3.3.3.4 1.2-.8 1.4 1.8v10.6l-2.1 1.6.2.3 1.1-.8 3.6 3.3 4.9-3.3zm27.2-.2-1.2.8-1.7-1.6v-11.1l1.7-1.2-.3-.4-1.4 1.1-3.7-3.5-4.8 3.4-3.7-3.4-4.7 3.4-2.9-3.4-4.7 3.3.2.4 1.2-.8 1.6 1.7v10.6l-1.3 1.3 3.7 3.1 3.6-3.3-1.5-1.4v-11l1.4-.9 2.5 2.3v9.9l-1.2 1.3 3.8 3.1 3.5-3.3-1.5-1.4v-11.1l1.2-.8 2.7 2.3v9.7l-1.1 1.1 3.8 3.5 5-3.4zm14.2-2.5-4 3.1-4.2-3.3v-1.9l7.7-5.2v-.2l-3.8-5.9-8.4 4.5v11.1l5.6 4.1 7.4-5.8zm-8.2-2.7v-8l.3-.2 3.6 5.6zm23.1-1.5-3.1-2.4c2.1-1.8 2.9-4.3 2.9-5.9 0-.2 0-.7-.1-1h-.4c-.3.9-.9 1.6-2.2 1.6-1.2 0-2.1-.7-2.9-1.6l-7.3 4v5.9l2.7 2.1c-2.8 2.4-3.3 4.2-3.3 5.4 0 1.6.7 2.8 2.1 3.3l.2-.4c-.3-.3-.7-.5-.7-1.2 0-.5.7-1.3 1.9-1.3 1.6 0 2.6 1.1 3.1 1.7l7.1-4.2zm-1.8-4.9c-1.1 1.9-3.6 3.8-5 4.9l-1.8-1.4v-5.8c.7 1.6 2.4 2.9 4.3 2.9 1.1 0 1.7-.2 2.5-.6zm-2.9 13c-.8-1.8-2.7-3.1-4.7-3.1-.5 0-1.8 0-3.1.8.7-1.2 2.9-3.6 5.7-5.2l2 1.6v5.9z",fill:"#fff"}))};var a=i(n("q1tI"))},Uxaz:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.STRUCTURED_INLINE_MODULES=t.ONE_MODULE_TEST=t.INTERRUPTIONS_HOLDOUT_TEST=void 0;t.INTERRUPTIONS_HOLDOUT_TEST={name:"STYLN_interruptions_holdout",control:"0_control",variant:"1_show"},t.ONE_MODULE_TEST={name:"STYLN_one_module",control:"0_control",variant:"1_module"},t.STRUCTURED_INLINE_MODULES={name:"STORY_inlineModules_0124",control:"0_unstructured_modules",variant:"1_structured_modules"}},UzHl:function(e,t,n){"use strict";var i=n("TqRt"),a=n("cDf5");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=i(n("J4zp")),r=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=a(e)&&"function"!=typeof e)return{default:e};var n=m(t);if(n&&n.has(e))return n.get(e);var i={__proto__:null},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var r in e)if("default"!==r&&{}.hasOwnProperty.call(e,r)){var s=o?Object.getOwnPropertyDescriptor(e,r):null;s&&(s.get||s.set)?Object.defineProperty(i,r,s):i[r]=e[r]}return i.default=e,n&&n.set(e,i),i}(n("q1tI")),s=(i(n("17x9")),n("boCj")),l=i(n("PcbQ")),c=i(n("4gon")),u=i(n("kJEd")),d=i(n("U7e9")),p=n("P8eT"),f=n("AKP5");function m(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(m=function(e){return e?n:t})(e)}function h(e){var t=e.items,n=e.trackEvent,i=e.trackLinkInteraction,a=e.parentUrl,m=(0,r.useState)(0),h=(0,o.default)(m,2),g=h[0],y=h[1],v=(0,r.useState)(new Set),b=(0,o.default)(v,2),_=b[0],w=b[1],x=(0,r.useRef)(null),k=t.length,O=function(e){e&&!_.has(g)&&n&&(n({event:"impression",module:{label:a},card:{index:g+1},block:{length:k}}),w((function(e){return e.add(g)})))},T=(0,r.useCallback)((function(e){return i(g,e)}),[g,i]);return r.default.createElement(r.default.Fragment,null,r.default.createElement(l.default,{ref:x,id:"storyline-quote-container",a11yLabel:"Card ".concat(g+1," of ").concat(k),onSwipe:y,scrolledIndex:g},t.map((function(e){return r.default.createElement(s.InView,{onChange:O,threshold:1,className:p.quoteCardClass,"data-testid":"quote-card",key:e.text},r.default.createElement(c.default,{item:e,trackLinkInteraction:T}))}))),r.default.createElement("div",{className:p.swiperNavClass},r.default.createElement(u.default,{index:g,length:k}),r.default.createElement(d.default,{ariaControls:"storyline-quote-container",index:g,length:k,handleNavLeft:function(){return(0,f.handleNavLeft)(x.current)},handleNavRight:function(){return(0,f.handleNavRight)(x.current)}})))}h.defaultProps={trackEvent:null};t.default=h},"V+uv":function(e,t,n){"use strict";n.d(t,"b",(function(){return r})),n.d(t,"c",(function(){return s})),n.d(t,"d",(function(){return l})),n.d(t,"a",(function(){return c}));var i=n("Jqp9"),a=n("wXC7"),o=n.n(a),r=Object(i.css)(o.a.breakpoint.mediumLarge,"{padding-top:40px;}"),s=Object(i.css)("display:none;"),l=Object(i.css)("width:100%;height:0;overflow:visible;"),c=Object(i.css)(o.a.breakpoint.mediumLarge,"{&:empty{margin-top:0;}}")},V6Yu:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.textFromOakContent=t.hasContent=t.generateContentLink=t.generateContentID=t.createHexHash=void 0;var i=t.textFromOakContent=function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return t.map((function(t){return t.text?t.text:t.content?e(t.content):""})).join(" ").replace(/  +/g," ")},a=(t.hasContent=function(e){return!(!e||!Array.isArray(e.content))},t.createHexHash=function(e){var t,n,i=e.toLowerCase().split(/[^a-z0-9]/).join("");for(t=0;t<i.length;t+=1){n=(n<<5)-n+i.charCodeAt(t),n|=0}return Math.abs(n).toString(16)}),o=t.generateContentID=function(e){return"".concat(a(i(e)))};t.generateContentLink=function(e){return"link-".concat(o(e))}},V7ea:function(e,t,n){"use strict";var i=n("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.vsMediaViVideoBlockCreditClass=t.vsMediaSmallNoCaptionClass=t.vsMediaImageBlockCreditClass=t.vsMediaHybridVideoBlockCreditClass=t.vsMediaClass=t.vsLabelClass=t.vsHybridFullSizeImageCreditRightMarginClass=t.vsHeadingClass=t.vsContentParagraphBlockClass=t.StyledVisualStack=void 0;var a=n("Jqp9"),o=n("3sMT"),r=i(n("wXC7")),s=n("HvhO"),l=i(n("6RhY")),c=n("SbcB"),u=n("y1Vo"),d="\n  /* MOBILE */\n  width: ".concat(r.default.breakpoint.mobileFullWidth,";\n\n  /* DESKTOP */\n  ").concat(r.default.breakpoint.medium," {\n    max-width: ").concat(r.default.breakpoint.textBodyWidth,"px;\n  }\n"),p="\nmargin-top: 0px;\n".concat(r.default.breakpoint.medium," {\n  margin-top: 0px;\n}\n"),f=(0,a.themeFn)("mediaSize",{large:function(e){return(0,a.css)(e.theme.breakpointMap.small,"{",l.default,"{margin-left:",r.default.grid.pageMargin,"px;margin-right:",r.default.grid.pageMargin,"px;}}",e.theme.breakpointMap.medium,"{&:last-child{",l.default,"{margin-left:0;}}}",e.theme.breakpointMap.mediumLarge,"{",l.default,"{margin-left:0;margin-right:0;}}")},full:function(e){return(0,a.css)(e.theme.breakpointMap.small,"{",l.default,"{margin-left:",r.default.grid.pageMargin,"px;margin-right:",r.default.grid.pageMargin,"px;}}",e.theme.breakpointMap.medium,"{&:last-child{",l.default,"{margin-left:0;}}}")}}),m=function(e){return(0,a.css)(">:first-child{margin-top:0;}>:last-child{margin-bottom:0;}margin-bottom:40px;",r.default.breakpoint.medium,"{margin-bottom:60px;}",f(e))},h=(t.StyledVisualStack=(0,a.styled)("div",{target:"e1d0cnos0"})(m," ",s.mediaFigureSizeStyles,";"),"\ncolor: ".concat(o.color.content.quaternary,";\nfont-family: ").concat(r.default.font.serifBase,";\nfont-weight: ").concat(r.default.font.weight.medium,";\n")),g=(t.vsContentParagraphBlockClass=(0,a.css)("margin:auto auto 12px;",h," ",d," ","\nfont-size: 1.25rem;\nline-height: 1.625rem;\n"," ",r.default.breakpoint.medium,"{","\nfont-size: 1.375rem;\nline-height: 1.875rem;\n","}"),"\n".concat(r.default.breakpoint.medium," {\n  margin-right: 1.25rem;\n}")),y=(t.vsHybridFullSizeImageCreditRightMarginClass=(0,a.css)(c.Credit,"{",g,"}"),"\ndisplay: flex;\njustify-content: flex-end;\ntext-align: right;"),v="\n/* right-justify the credit */\n".concat(y,"\n\nmargin-top: 8px;\nmargin-left: auto;\n\n/* MOBILE */\nmargin-right: 20px;\n\n/* DESKTOP */\n").concat(r.default.breakpoint.medium," {\n  margin-right: 0px;\n  ").concat(y,"\n}\n"),b=(t.vsMediaClass=(0,a.css)(p," ",l.default,"{",v,"}",u.Caption,",&.sizeFull ",u.Caption,"{",v,"}&.sizeFull ",c.Credit,"{",g,"}&.img-sz-full ",c.Credit,"{",g,"}margin-bottom:12px;",r.default.breakpoint.medium,"{margin-bottom:12px;}"),"\n  font-weight: ".concat(r.default.font.weight.medium,";\n  font-size: 0.625rem;\n  line-height: 0.875rem;\n  font-family: ").concat(r.default.font.franklinBase,";\n"));t.vsMediaSmallNoCaptionClass=function(e){return(0,a.css)((0,s.mediaFigureSmallNoCreditStyles)(e)," ",l.default,"{width:50%;}")},t.vsMediaImageBlockCreditClass=(0,a.css)(c.Credit,"{",b,"}"),t.vsMediaHybridVideoBlockCreditClass=(0,a.css)(l.default,"{",c.Credit,"{",b,"}}"),t.vsMediaViVideoBlockCreditClass=(0,a.css)(c.Credit,"{",b,"}"),t.vsLabelClass=(0,a.css)(d," margin-right:auto;margin-left:auto;"),t.vsHeadingClass=(0,a.css)(d," margin:auto auto 1.25rem !important;")},VHwt:function(e,t,n){"use strict";var i=n("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=i(n("q1tI")),o=(i(n("17x9")),i(n("TB7k")));function r(e){var t=e.item,n=e.internalLinkTrackingParams,i=e.trackLinkInteraction;return t?a.default.createElement("div",{"data-testid":"context-card"},a.default.createElement(o.default,{internalLinkTrackingParams:n,trackLinkInteraction:i,subtitle:t.subtitle,text:t.text})):null}r.displayName="ContextCardV2",r.defaultProps={internalLinkTrackingParams:null,trackLinkInteraction:function(){}};t.default=r},VUHb:function(e,t,n){"use strict";var i,a=n("gcR/"),o=n.n(a),r=(n("q1tI"),n("Jqp9")),s=n("wXC7"),l=n.n(s),c=n("cUQY"),u=n("Gs79"),d=Object(r.css)("font-family:",l.a.font.franklinBase,";font-size:",l.a.font.size(16),";font-weight:",l.a.font.weight.book,";line-height:",l.a.font.size(30),";margin-top:",l.a.font.size(16),";",l.a.textAlign.center,";"),p=Object(r.css)("text-decoration:underline;");function f(){var e,t,n=Object(c.a)(),a=n.showGateway,r=n.gatewayIsEmbedded,s=n.meterReady,l=null===(e=Object(u.a)().overlays)||void 0===e||null===(t=e.truncator)||void 0===t?void 0:t.visible;return!a||!s||l||r?null:i||(i=o()("p",{className:d,"aria-live":"polite",role:"note"},void 0,o()("a",{className:p,href:"https://www.nytimes.com/subscription?campaignId=8WXW7"},void 0,"Subscribe to The Times")," ","to read as many articles as you like."))}f.displayName="ReadersModeGateway",t.a=f},VXyk:function(e,t,n){"use strict";var i=n("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.titleClass=t.headshotClass=t.bylineSectionClass=t.bylineContainerClass=void 0;var a=n("Jqp9"),o=i(n("wXC7"));t.titleClass=(0,a.css)("font-weight:",o.default.font.weight.bold,";font-size:",o.default.font.size(19),";line-height:",o.default.font.size(22),";margin:0;"),t.bylineContainerClass=(0,a.css)("font-family:",o.default.font.franklinBase,";font-size:",o.default.font.size(15),";font-weight:",o.default.font.weight.medium,";line-height:",o.default.font.size(20),";",o.default.breakpoint.small,"{font-size:",o.default.font.size(16),";}"),t.headshotClass=(0,a.css)("margin-right:10px;img{max-width:45px;}"),t.bylineSectionClass=(0,a.css)("margin-top:20px;display:flex;align-items:center;")},Vcud:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=n("Jqp9");t.default=(0,i.styled)("span",{target:"e1tej78p0"})("position:absolute;width:1px;height:1px;margin:-1px;padding:0;border:0;clip:rect(0 0 0 0);overflow:hidden;")},Vfu1:function(e,t,n){"use strict";var i=n("gcR/"),a=n.n(i),o=n("q1tI"),r=n("pCca"),s=n("Jqp9"),l=n("3Rk2"),c=n.n(l),u=n("wXC7"),d=n.n(u),p=n("I9y1"),f=n("3sMT"),m=Object(s.css)("&:first-child{padding-left:0;}&:last-child{border-right:0 none;padding-right:0;}padding:0 15px 0 0;",p.a.medium,"{box-sizing:content-box;width:100%;display:flex;flex-direction:column;margin-right:20px;flex-wrap:nowrap;-webkit-overflow-scrolling:touch;border-top:0 none;border-right:1px solid ",f.color.stroke.quaternary,";}",p.a.mediumLarge,"{&:first-child{padding-left:0;}&:last-child{padding-right:0;}}"),h=Object(s.themeFn)("treatment",{none:Object(s.css)(),hub:Object(s.css)("padding:0;"),seriesCollection:Object(s.css)("margin:0 0 20px 0;background-color:",d.a.color.white,";")}),g=Object(s.styled)("ol",{target:"e1bmefv20"})(h,";display:flex;flex-wrap:nowrap;list-style:none;"),y=c()([d.a.breakpoint.medium,d.a.breakpoint.mediumLarge,d.a.breakpoint.large]),v=Object(s.themeFn)("treatment",{none:function(e){var t=e.hasThumb;return Object(s.css)("font-weight:",d.a.font.weight.medium,";",y({fontSize:[t?d.a.font.size(20):d.a.font.size(23),t?null:d.a.font.size(23)],lineHeight:[t?d.a.font.size(22):d.a.font.size(24),t?null:d.a.font.size(25)]}),";")},hub:function(e){var t=e.hasThumb;return Object(s.css)(y({fontSize:[t?d.a.font.size(20):d.a.font.size(23),t?d.a.font.size(14):d.a.font.size(17),t?d.a.font.size(16):d.a.font.size(19)],lineHeight:[t?d.a.font.size(23):d.a.font.size(25),t?d.a.font.size(17):d.a.font.size(19),t?d.a.font.size(18):d.a.font.size(20)],fontWeight:[d.a.font.weight.bold,d.a.font.weight.medium,d.a.font.weight.bold]}),";")},seriesCollection:function(e){var t=e.hasThumb;return Object(s.css)(y({fontSize:[t?d.a.font.size(20):d.a.font.size(23),t?d.a.font.size(18):d.a.font.size(22)],lineHeight:[t?d.a.font.size(23):d.a.font.size(26),t?d.a.font.size(21):d.a.font.size(24)]}),";")}}),b=Object(s.styled)("h2",{target:"e1bmefv21"})("font-family:",d.a.font.serifMedium,";font-weight:",d.a.font.weight.bold,";",v," a{color:inherit;}"),_=Object(s.themeFn)("treatment",{none:Object(s.css)(),hub:Object(s.css)("display:none;"),seriesCollection:Object(s.css)("display:none;",p.a.mediumLarge,"{display:block;}")}),w=Object(s.styled)("h2",{target:"e1bmefv22"})(_," font-family:",d.a.font.imperial,";color:",d.a.color.gray20,";font-size:",d.a.font.size(14),";line-height:",d.a.font.size(19),";margin-top:10px;margin-bottom:5px;background-color:",d.a.color.white,";"),x=Object(s.css)("height:min-content;margin-bottom:10px;margin-top:20px;background-color:",f.color.background.primary,";"),k=Object(s.css)("width:100vw;height:100%;overflow:scroll;display:flex;flex-direction:row;position:relative;scroll-snap-type:x mandatory;scrollbar-width:none;@media (hover:none){&::-webkit-scrollbar{display:none;}}"),O=Object(s.css)("font-family:",d.a.font.franklinBase,";font-weight:",d.a.font.weight.medium,";font-size:",d.a.font.size(12),";line-height:",d.a.font.size(20),";letter-spacing:0.3px;color:",f.color.content.quaternary,";margin-top:10px;"),T=Object(s.css)(p.a.medium,"{display:none;}"),C=n("lSNA"),E=n.n(C),S=n("xvFu"),P=n("5dFD"),I=n("dlEz"),M=n("2XMp");function A(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function j(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?A(Object(n),!0).forEach((function(t){E()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):A(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var N=["videoLarge","mediumThreeByTwo440","mediumThreeByTwo225","hpSmall","thumbLarge","square640"],L=function(e){var t=e.asset,n=e.assetTheme,i=e.trackingQueryParams,r=t.headline,l=t.promotionalHeadline,c=t.promotionalMedia,u=t.summary,d=t.lastModified;Object(s.useTheme)().treatment=n;var p=Boolean(t.promotionalMedia),f=Object(o.useMemo)((function(){return j(j({},t),{},{url:Object(M.b)(t.url,i)})}),[i,t]),h=d&&a()("span",{className:O},void 0,a()(I.a,{formatter:"elapsed",iso:d}));return a()("li",{className:m},void 0,c&&a()(S.a,{crops:N,asset:f,creditClass:T}),a()("div",{},void 0,a()(b,{hasThumb:p},void 0,a()(P.a,{link:f},void 0,(null==r?void 0:r.default)||l)),a()(w,{},void 0,a()(P.a,{link:f},void 0,u)),h))};L.displayName="Asset",L.defaultProps={assetTheme:"",promotionalMedia:{},promotionalHeadline:"",summary:"",trackingQueryParams:{}};var D=function(e){var t=e.assetList,n=e.assetTheme,i=e.trackingQueryParams,o=Object(r.a)().deviceType;return t&&0!==t.length?a()(g,{},void 0,"smartphone"===o?a()("section",{className:x},void 0,a()("div",{className:k},void 0,a()("div",{style:{display:"inline-block",height:"100%",minWidth:"25px"}}),t.map((function(e){return(null==e?void 0:e.node)&&a()("div",{className:(t=295,o=20,Object(s.css)("display:inline-block;min-width:",t,"px;width:",t,"px;scroll-snap-align:center;scroll-margin-left:",o/2,"px;margin-right:",o,"px;white-space:pre-line;text-align:left;margin-bottom:5px;@media only screen and (min-device-width:300px) and (max-device-width:350px){min-width:270px;width:270px;}"))},e.node.id,a()(L,{asset:e.node,assetTheme:n,trackingQueryParams:i}));var t,o})),a()("div",{style:{display:"inline-block",height:"100px",minWidth:"".concat(20,"px")}}))):t.map((function(e){return(null==e?void 0:e.node)&&a()(L,{asset:e.node,assetTheme:n,trackingQueryParams:i},e.node.id)}))):null};D.displayName="Band",D.defaultProps={assetTheme:void 0,trackingQueryParams:""};t.a=D},Vgop:function(e,t,n){"use strict";var i=n("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"Answer",{enumerable:!0,get:function(){return m.default}}),Object.defineProperty(t,"Clue",{enumerable:!0,get:function(){return f.default}}),Object.defineProperty(t,"Paragraph",{enumerable:!0,get:function(){return u.default}}),t.default=void 0;var a=i(n("lwsE")),o=i(n("W8MJ")),r=i(n("a1gu")),s=i(n("Nsbk")),l=i(n("7W2i")),c=i(n("q1tI")),u=(i(n("17x9")),i(n("yEZI"))),d=n("Jqp9"),p=i(n("0oBV")),f=i(n("Rr+T")),m=i(n("8VGN")),h=n("FfcP");function g(e,t,n){return t=(0,s.default)(t),(0,r.default)(e,function(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return function(){return!!e}()}()?Reflect.construct(t,n||[],(0,s.default)(e).constructor):t.apply(e,n))}var y=function(e){function t(){var e;(0,a.default)(this,t);for(var n=arguments.length,i=new Array(n),o=0;o<n;o++)i[o]=arguments[o];return(e=g(this,t,[].concat(i))).state={isRevealed:e.props.isInEditor},e.toggleReveal=function(){e.setState((function(e){return{isRevealed:!e.isRevealed}}))},e.handleKeyPress=function(t){"Enter"!==t.key&&" "!==t.key||e.toggleReveal()},e}return(0,l.default)(t,e),(0,o.default)(t,[{key:"render",value:function(){var e,t=this.props,n=t.isInAMP,i=t.isInEditor,a=t.children,o=t.className,r=t.clue,s=t.answer,l=t.paragraphContent,p="reveal-".concat(Math.floor(Math.random()*Math.floor(1e3))),g=this.state.isRevealed?"show":"hide",y=n?"margins-h":"";return i&&(e=!1),c.default.createElement("div",{className:(0,d.cx)(o,h.revealClass,y),"data-testid":"reveal-block"},c.default.createElement(f.default,{on:"tap:".concat(p,"-reveal.toggleClass('class' = 'show')"),onClick:this.toggleReveal,onKeyPress:this.handleKeyPress,tabIndex:"0",role:"button",contentEditable:e},r),c.default.createElement(m.default,{id:"".concat(p,"-reveal"),className:g},c.default.createElement(u.default,null,s),c.default.createElement(u.default,null,a||l)))}}])}(c.default.Component);y.displayName="Reveal",y.defaultProps={paragraphContent:[],answer:"",children:null,className:void 0,clue:"",isInEditor:!1,isInAMP:!1};t.default=(0,p.default)(y)},Vj0M:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;t.default=function(e){var t=Math.floor(e/1e3)||0;return{hours:Math.floor(t/3600),minutes:Math.floor(t/60)%60,seconds:t%60}}},Vn11:function(e,t,n){"use strict";var i,a=n("VkAN"),o=n.n(a),r=n("gcR/"),s=n.n(r),l=(n("q1tI"),n("eFc+")),c=n.n(l),u=n("8YpP"),d=n.n(u),p=n("Jqp9"),f=n("wXC7"),m=n.n(f),h=Object(p.css)("margin:",m.a.breakpoint.mobileBlockMargins,";width:",m.a.breakpoint.mobileFullWidth,";max-width:",m.a.breakpoint.textBodyWidth,"px;text-align:center;",m.a.breakpoint.medium,"{margin:",m.a.breakpoint.desktopMediaMargins,";width:100%;}"),g=function(e){var t=e.data,n=t.spotifyEmbedUrl,i=t.spotifyPlayerStyle;return s()("div",{className:h},void 0,s()(d.a,{spotifyEmbedUrl:n,playerStyle:i}))};g.displayName="SpotifyEmbedBlock",g.fragments={data:c()(i||(i=o()(["\n    fragment SpotifyEmbedBlock_data on SpotifyEmbedBlock {\n      spotifyEmbedUrl\n      spotifyPlayerStyle: playerStyle\n    }\n  "])))};t.a=g},VqV0:function(e,t,n){"use strict";n.r(t),n.d(t,"articleQuery",(function(){return Bc})),n.d(t,"getInitialQuery",(function(){return Fc}));var i,a=n("gcR/"),o=n.n(a),r=n("J4zp"),s=n.n(r),l=n("lSNA"),c=n.n(l),u=n("VkAN"),d=n.n(u),p=n("q1tI"),f=n.n(p),m=n("eFc+"),h=n.n(m),g=n("fZdH"),y=n("NW2b"),v=n("jt2X"),b=n("X6oL"),_=n("cr+I"),w=n.n(_),x=n("W1TD"),k=n("fnBi"),O=n("3sMT"),T=n("rnzX"),C=n("QS0n"),E=n("OB6K"),S=n.n(E),P=n("B88b"),I=n("ZKN5"),M=n("PgO9"),A=n("rI8Z"),j=n("GB3f"),N=n("HUmG"),L=n("mczz"),D=n("eJDT");function R(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function B(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?R(Object(n),!0).forEach((function(t){c()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):R(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function z(e){var t=e.error,n=e.children,a=e.sectionData,r=e.center,l=e.handleSave,c=e.pageType,u=e.tone,d=e.treatment,m=e.columnSlug,h=Object(M.a)().user,g=Object(C.useLocation)(),y=a.sectionName,v=a.subsectionName,b=a.displayName,_=a.url,x=Object(p.useState)(_),k=s()(x,2),O=k[0],T=k[1];Object(p.useEffect)((function(){var e="";switch(Object(j.c)()){case"CANADA":e="/ca";break;case"INT":case"INTL":e="/international"}var t=a.url;T(Object(A.f)(t,e))}),[a]);if(t)return null;var E="non-us-homepage"===d,I={section:{upshot:!0,magazine:!0,"t-magazine":!0,lens:!0,opinion:!0},subsection:{dealbook:!0}},R={isLoggedIn:Object(N.d)(h),user:h,homepage:("/"===g.pathname||E)&&!Object(D.c)(w.a.parse(g.search)),center:r,section:"espanol"===y&&"opinion"===v?"opinion":y||"default",sectionUrl:O,sectionDisplayName:b||"",mastheadLabelHidden:"sunday"!==v&&(I.section[y]||I.subsection[v]),tone:u||"news",chromeless:!1,linkResolver:L.a,handleSave:l,pageType:c,homeUrl:"",columnSlug:m};return d&&(R.treatment=d),o()(S.a,{theme:function(e){return B(B({},e),{},{mode:"default"},R)}},void 0,f.a.createElement(f.a.Fragment,null,i||(i=o()(P.a,{})),o()("div",{},void 0,o()("main",{id:"site-content"},void 0,n))))}z.displayName="PreloadedWebViewShell",z.defaultProps={treatment:void 0,handleSave:void 0,error:null,sectionData:{sectionName:"",subsectionName:"",displayName:"",url:""},tone:null,center:!1,pageType:"",columnSlug:""},z.displayName="PreloadedWebViewShell";var F=Object(I.a)(z),U=n("vftj"),H=n("Jqp9"),W=n("wXC7"),q=n.n(W),V=Object(H.css)("color:",q.a.color.gray30,";font-family:",q.a.font.sansBase,";font-size:13px;margin:0 auto;max-width:",q.a.breakpoint.maxMobileContentWidth,"px;padding:15px;"),G=Object(H.css)("color:",q.a.color.black,";font-family:",q.a.font.franklinBase,";font-size:16px;font-weight:",q.a.font.weight.bold,";margin-bottom:7px;"),Y="Page No Longer Available",X="This news-agency article is no longer available on nytimes.com.";function Z(){return Object(b.useTracking)({presentation:{pageType:"Expired"}}),o()(C.Route,{render:function(e){var t=e.staticContext;return t&&(t.type="Expired",t.statusCode=410),o()("div",{className:V},void 0,o()(U.Helmet,{},void 0,o()("title",{},void 0,Y)),o()("h1",{className:G},void 0,Y),X)}})}Z.displayName="ExpiredPage";var J=Z,K=n("hU1o"),$=n("pCca"),Q=n("bRPg"),ee=n("4uw1"),te=n("BwWf"),ne=n("sOrY");function ie(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function ae(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ie(Object(n),!0).forEach((function(t){c()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ie(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var oe=function(e,t){return function(n){var i=n.ownProps,a=n.data;if(!a[e])return n;var o=ae({},a[e]),r=!1;return t.forEach((function(t){o[t]&&Array.isArray(o[t])&&(o[t]=o[t].filter(Boolean),!r&&a[e][t].length>o[t].length&&(r=!0))})),r&&console.warn("Found null in one of: ".concat(t.join(","))),ae(ae({},i),{},{data:ae(ae({},a),{},c()({},e,o))})}},re=n("aRw7"),se=n("RvkP"),le=n("EYBZ"),ce=n("5ZkK"),ue=n("6NOd"),de=n("6Gip"),pe=n("lMaV"),fe=n.n(pe),me=n("cUQY"),he=n("SYzA");var ge=n("QILm"),ye=n.n(ge),ve=n("ktkx"),be=n("6Zrg"),_e=n("RIqP"),we=n.n(_e);function xe(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function ke(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?xe(Object(n),!0).forEach((function(t){c()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):xe(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}new Map;var Oe,Te={name:"STYLN_ad_placement_0424",control:"0_control",pattern:"1_pattern",distance:"2_distance",both:"3_both"},Ce=function(e){var t,n,i,a,o={BylineBlock:"1",ClaimReviewBlock:"w",DiptychBlock:"y",Dropzone:"z",EmailSignupBlock:"m",InlineQuoteBlock:"2",InstagramEmbedBlock:"3",InteractiveBlock:"4",LegacyTableBlock:"5",ListBlock:"6",LocationRecommendationBlock:"7",PullquoteBlock:"o",RelatedLinksBlock:"8",SlideshowBlock:"f",SoundcloudEmbedBlock:"j",SpotifyEmbedBlock:"k",TikTokEmbedBlock:"m",TwitterEmbedBlock:"n",YouTubeEmbedBlock:"x",BoldParagraph:"9"},r="ParagraphBlock"===(null==e?void 0:e.__typename)&&"BoldFormat"===(null==e||null===(t=e.content)||void 0===t||null===(n=t[0])||void 0===n||null===(i=n.formats)||void 0===i||null===(a=i[0])||void 0===a?void 0:a.__typename)?o.BoldParagraph:o[null==e?void 0:e.__typename];return null!=r?r:null==e?void 0:e.__typename[0].toLowerCase()},Ee=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=["((h|i|r|l|d|9)+(p[d]*){1,5}(?!p|d))"],n=new RegExp(t.join("|"),"g"),i=null==e?void 0:e.map((function(e){return Ce(e)})).join(""),a=i?we()(i.replaceAll("z","").matchAll(n)):[],o=function(e){return e.includes("h")||e.includes("9")},r=null==a?void 0:a.filter((function(e){return o(e[0])})).map((function(e){return e.index})),s=null==a?void 0:a.filter((function(e){return o(e[0])})).map((function(e){return e.index+(e[0].length-1)})),l=i?we()(i.matchAll(/z/g)).map((function(e){return e.index})):[],c=function(e){var t=e;return null==l||l.forEach((function(e){e<=t&&(t+=1)})),t},u=r.map((function(e){return c(e)})),d=s.map((function(e){return c(e)}));return{superBlockStartList:u,superBlockEndList:d}},Se=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=[],n=[],i=Ee(e),a=i.superBlockStartList,o=i.superBlockEndList;return a.forEach((function(i,a){var r,s=o[a],l=e.slice(i,s+1),c=l.filter((function(e){return"Dropzone"===e.__typename})),u=l.filter((function(e){return"Dropzone"===e.__typename&&e.adsDesktop})).length>0,d=l[0],p=l[l.length-1],f=l.length-1,m=(null==p||null===(r=p.content)||void 0===r?void 0:r.map((function(e){var t;return null==e||null===(t=e.text)||void 0===t?void 0:t.length}))).reduce((function(e,t){return e+t}),0),h=l.findIndex((function(e){return m<100&&"Dropzone"===e.__typename&&e.adsDesktop}));if(-1!==h){var g=h,y=h-f;Math.abs(g)<Math.abs(y)||Math.abs(g)===Math.abs(y)?l[h].moveAdAbove=!0:l[h].moveAdBelow=!0,l[h].movedAd=!0}var v=l.some((function(e){return e.movedAd})),b=l.some((function(e){return e.moveAdAbove}));if(v&&(b?d.pushAdAbove=!0:p.pushAdBelow=!0),c.forEach((function(e){n.push(e.index)})),u&&!v){var _=c[c.length-1],w=e.find((function(e){return e.index===_.index+1}));w&&!w.bad&&t.push(w.index)}})),{dropzoneOnList:t,dropzoneOffList:n}},Pe=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=null==e?void 0:e.slice(),i=null==e?void 0:e.map((function(e,t){if(!0===e.movedAd&&e.moveAdAbove)return t})).filter((function(e){return void 0!==e})),a=null==e?void 0:e.map((function(e,t){if(!0===e.movedAd&&e.moveAdBelow)return t})).filter((function(e){return void 0!==e})),o=null==e?void 0:e.map((function(e,t){if(!0===e.pushAdAbove)return t+1})).filter((function(e){return void 0!==e})),r=null==e?void 0:e.map((function(e,t){if(!0===e.pushAdBelow)return t-1})).filter((function(e){return void 0!==e}));return i.forEach((function(e,i){t.push(n[e].index);var a=n[e],r=o[i]-1;n.splice(e,1),n.splice(r,0,a)})),a.forEach((function(e,i){t.push(n[e].index);var a=n[e],o=r[i]+1;n.splice(e,1),n.splice(o,0,a)})),n},Ie=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0,n=Se(e),i=n.dropzoneOnList,a=n.dropzoneOffList,o=Pe(e,i),r=null==o?void 0:o.map((function(e){return i.includes(null==e?void 0:e.index)?(e.adsDesktop||(t.pattern+=1),ke(ke({},e),{},{adsDesktop:!0})):a.includes(null==e?void 0:e.index)?(e.adsDesktop&&(t.pattern+=1),ke(ke({},e),{},{adsDesktop:!1})):ke({},e)}));return[r,t]},Me=function(e,t){return[null==e?void 0:e.map((function(n,i){var a,o,r=null===(a=e[i+1])||void 0===a?void 0:a.__typename,s=null===(o=e[i-1])||void 0===o?void 0:o.__typename,l=["VideoBlock","ImageBlock","InteractiveBlock"],c=l.includes(r),u=l.includes(s);return"Dropzone"===(null==n?void 0:n.__typename)&&n.adsDesktop&&(c||u)?(t.distance+=1,ke(ke({},n),{},{adsDesktop:!1})):n})),t]},Ae=["name"];function je(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function Ne(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?je(Object(n),!0).forEach((function(t){c()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):je(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Le(e){var t,n,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=i.data,o=i.location;if(null==a||null===(t=a.article)||void 0===t||!t.url)return null;var r=a.article,s=Boolean(null==r||null===(n=r.compatibility)||void 0===n?void 0:n.hasVideo).toString(),l=Ne(Ne({},Object(be.b)(o)),{},{template:"article",hasVideo:s});return Ne({},l=Object(ve.b)(r,l))}var De=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return e&&e.map((function(e){if("Dropzone"!==e.__typename)return e;var t=e.adsDesktopHoldout;return Ne(Ne({},e),{},{adsDesktop:t})}))},Re=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=e&&e.find((function(e){return"desktopHoldout"===e.name}));return t?e.map((function(e){var n=e.name,i=ye()(e,Ae);return"desktop"===n?Ne(Ne({},t),{},{name:n}):Ne({name:n},i)})):e},Be=function(e,t){var n={distance:0,pattern:0};if(e===Te.pattern)return Ie(t,n);if(e===Te.distance)return Me(t,n);var i=Ie(t,n),a=s()(i,2),o=a[0],r=a[1];return Me(o,r)},ze=function(){var e,t,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},i=n.article,a=arguments.length>2?arguments[2]:void 0;if(!i)return{article:i};var o=(null==i?void 0:i.sprinkledBody)||{},r=null==a||null===(e=a[Te.name])||void 0===e?void 0:e.allocated,l=null==a||null===(t=a[Te.name])||void 0===t?void 0:t.variant;a&&r&&l&&Object(y.e)(Te.name);var c=o.content,u=De(c);if(i&&r&&l!==Te.control){var d,p=Be(l,u),f=s()(p,2),m=f[0],h=f[1],g=(null==h?void 0:h.pattern)>0,v=(null==h?void 0:h.distance)>0,b=function(){return g&&v?"both":g?"pattern":v?"distance":void 0};return{article:Ne(Ne({},i),{},{sprinkledBody:Ne(Ne({},o),{},{content:m})}),adMovedReason:b(),adsTestDone:null!==(d=!!b())&&void 0!==d&&d}}var _=(null==i?void 0:i.sprinkled)||{},w=_.configs;return{article:Ne(Ne({},i),{},{sprinkledBody:Ne(Ne({},o),{},{content:u}),sprinkled:Ne(Ne({},_),{},{configs:Re(w)})}),adsTestDone:r&&l===Te.control}};Le.fragments={article:h()(Oe||(Oe=d()(["\n    fragment storyAdRequirements_article on Article {\n      id\n      url\n      sprinkledBody {\n        content {\n          ... on Dropzone {\n            adsDesktopHoldout\n            adsMobileHoldout\n          }\n        }\n      }\n      compatibility {\n        hasVideo\n      }\n      ...getTargetingParams_data\n    }\n    ","\n  "])),ve.b.fragments.data)};var Fe,Ue={AdRequirements:Le,updateAdSprinkles:ze},He=n("8iTF"),We=n("7FfI");function qe(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function Ve(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?qe(Object(n),!0).forEach((function(t){c()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):qe(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Ge(e,t){var n={stride:0,threshold:0,capacity:0};if(e.sprinkled&&e.sprinkled.configs){var i="smartphone"===t?"mobile":"desktop",a=e.sprinkled.configs.filter((function(e){return e.name===i}));if(a.length>0){var o=a[0];if(o.stride&&(n.stride=o.stride),o.threshold&&(n.threshold=o.threshold),e.sprinkledBody&&e.sprinkledBody.content){var r=e.sprinkledBody.content.filter((function(e){return"Dropzone"===e.__typename}));n.capacity="mobile"===i?r.filter((function(e){return!0===e.adsMobile})).length:r.filter((function(e){return!0===e.adsDesktop})).length}}}return n}var Ye=function(e){var t=e.data,n=e.deviceType;if(!t||!t.article||!t.article.url)return null;var i=t.article,a={},o="";i&&(o=(o=i.type||"").charAt(0).toUpperCase()+o.slice(1));var r=[];i.bylines&&i.bylines.forEach((function(e){if(null!==e){var t=e.creators.map((function(e){return e.displayName}));r=r.concat(t)}})),r.length>0&&(a.authors=r),a.collectionName=i.collections.map((function(e){return e.name})),a.collectionType=i.collections.map((function(e){return e.collectionType})),a.collectionType=a.collectionType.filter((function(e,t){return a.collectionType.indexOf(e)===t}));var s=/^(https)(:\/\/.+)/;i.timesTags&&i.timesTags.map((function(e){if(e.__typename)switch(e.__typename){case"Subject":return a.desFacets||(a.desFacets=[]),a.desFacets.push(e.displayName);case"Person":return a.perFacets||(a.perFacets=[]),a.perFacets.push(e.displayName);case"Organization":return a.orgFacets||(a.orgFacets=[]),a.orgFacets.push(e.displayName);case"Location":return a.geoFacets||(a.geoFacets=[]),a.geoFacets.push(e.displayName);default:return null}return null})),i.sprinkledBody&&i.sprinkledBody.content&&i.sprinkledBody.content.map((function(e){return"OakHeaderBasic"===e.__typename?(a.storyPatterns||(a.storyPatterns=[]),a.storyPatterns.push(e.__typename)):a.storyPatterns})),a.commentsDisplayed=Object(He.g)(i.commentProperties.status),a.newsSource=i.source?i.source.displayName:"";var l,c,u="freeform";if(i.sprinkledBody&&i.sprinkledBody.content){var d=i.sprinkledBody.content.some((function(e){return"HeaderLegacyBlock"===e.__typename})),p=i.sprinkledBody.content.some((function(e){return"HeaderLiveBriefingBlock"===e.__typename})),f=i.sprinkledBody.content.some((function(e){return"HeaderBasicBlock"===e.__typename})),m=i.sprinkledBody.content.some((function(e){return"HeaderFullBleedHorizontalBlock"===e.__typename})),h=i.sprinkledBody.content.some((function(e){return"HeaderFullBleedVerticalBlock"===e.__typename}));f?u="default":d?u="legacy":p?u="liveBriefing":m?u="horizontalFullBleed":h&&(u="verticalFullBleed")}return{asset:Ve(Ve({},a),{},{ad:Ge(i,n),contentTone:i.tone,desk:i.desk,headline:i.headline?i.headline.default:"",id:i.sourceId,kicker:i.kicker,lastUpdatedTimestamp:i.lastModified,originalDesk:i.originalDesk,originatingDesk:i.originalDesk,printPage:i.printInformation.page,printSection:i.printInformation.section,publishDatePrint:i.printInformation.publicationDate,publishedDate:Object(We.getUnixFromISO)(i.firstPublished),publishedTimeStamp:Object(We.getUnixFromISO)(i.firstPublished),section:i.section?i.section.displayName:"",slug:i.slug,source:i.source?i.source.displayName:"nyt_cms",subSection:i.subsection?i.subsection.displayName:"",type:o,typeOfMaterial:i.typeOfMaterials.join(","),url:(l=i.url,c=s.exec(l),c&&c[2]?"http".concat(c[2]):l),wordCount:i.wordCount,language:i.language?i.language.code:"",headerType:u}),presentation:{pageType:o}}};Ye.fragments={article:h()(Fe||(Fe=d()(["\n    fragment StoryTrackingMapper_article on Article {\n      id\n      url\n      type\n      tone\n      desk\n      kicker\n      headline {\n        default\n      }\n      commentProperties {\n        status\n      }\n      typeOfMaterials\n      wordCount\n      firstPublished\n      lastModified\n      originalDesk\n      language {\n        code\n      }\n      sourceId\n      source {\n        id\n        displayName\n      }\n      section {\n        id\n        displayName\n      }\n      subsection {\n        id\n        displayName\n      }\n      printInformation {\n        page\n        section\n        publicationDate\n      }\n      sprinkled {\n        configs {\n          name\n          stride\n          threshold\n        }\n      }\n      sprinkledBody {\n        content {\n          __typename\n          ... on Dropzone {\n            adsMobile\n            adsDesktop\n          }\n        }\n      }\n      timesTags @filterEmpty {\n        __typename\n        displayName\n      }\n      collections @filterEmpty {\n        id\n        name\n        collectionType\n      }\n      bylines {\n        creators {\n          ... on Person {\n            id\n            displayName\n          }\n        }\n      }\n    }\n  "])))};var Xe,Ze,Je=Ye,Ke=n("cDf5"),$e=n.n(Ke),Qe=n("Kxyt"),et=n("InUh"),tt=n.n(et),nt=n("xHA4"),it=n("hZ4i"),at=n("Zc/f"),ot=n.n(at),rt=n("FfMl"),st=n.n(rt),lt=n("qdb9"),ct=n.n(lt),ut=n("bqBd"),dt=n("E0i8"),pt=n("DH8m"),ft=n("h+5M"),mt=n("caSQ"),ht=n("wKlc"),gt=n("tHll"),yt=n("UGcZ"),vt=n("FZH6"),bt=n("369f"),_t=n("9Wdi"),wt=n("lwsE"),xt=n.n(wt),kt=n("W8MJ"),Ot=n.n(kt),Tt=n("a1gu"),Ct=n.n(Tt),Et=n("Nsbk"),St=n.n(Et),Pt=n("7W2i"),It=n.n(Pt),Mt=n("u1H9"),At=n("+ClL"),jt=n("/KYJ");function Nt(e,t,n){return t=St()(t),Ct()(e,function(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return function(){return!!e}()}()?Reflect.construct(t,n||[],St()(e).constructor):t.apply(e,n))}var Lt=Object(H.css)("display:grid;grid-row-gap:24px;justify-items:center;margin-left:20px;margin-right:20px;padding:40px 0;"),Dt=Object(H.css)("display:grid;grid-row-gap:8px;text-align:center;"),Rt=Object(H.css)("color:",q.a.color.gray10,";text-decoration:underline;"),Bt=Object(H.css)("color:#727272;font-size:16px;font-family:",q.a.font.franklinBase,";line-height:20.8px;"),zt=function(e){function t(){var e;xt()(this,t);for(var n=arguments.length,i=new Array(n),a=0;a<n;a++)i[a]=arguments[a];return(e=Nt(this,t,[].concat(i))).state={error:!1},e}return It()(t,e),Ot()(t,[{key:"componentDidCatch",value:function(e,t){Object(At.a)(e,{msg:"OakErrorBoundary: Failed to load OakBody",componentName:"OakBody",componentStack:t.componentStack}),this.setState({error:!0})}},{key:"render",value:function(){return this.state.error?o()("div",{"data-testid":"oak-body-error",className:Lt},void 0,Xe||(Xe=o()(jt.AlertIcon,{"aria-hidden":!0,size:24})),o()("div",{className:Dt},void 0,Ze||(Ze=o()("p",{className:Bt},void 0,"We are having trouble retrieving the article content.")),o()("p",{className:Bt},void 0,"Please try reloading the page or ",o()("a",{"data-testid":"log-in-link",className:Rt,href:Object(Mt.b)()},void 0,"log in"),"."))):this.props.children}}])}(f.a.Component);zt.displayName="OakBodyErrorBoundary";var Ft,Ut=zt,Ht=n("HU5K"),Wt=n("hkPW");function qt(e,t){var n,i=Object(Wt.a)({data:{event:"impression",module:{region:"header",label:"1_Show",name:"enhanced_byline",context:"trust_byline",asset_uri:e,author:null!==(n=null==t?void 0:t.map((function(e){var t;return null==e||null===(t=e.creatorSnapshots)||void 0===t?void 0:t.map((function(e){var t;return null!==(t=null==e?void 0:e.uri)&&void 0!==t?t:""})).join(", ")})).join(", "))&&void 0!==n?n:""}}}),a=i.ref,o=i.isTracked;Object(p.useEffect)((function(){var e=document.querySelector("#enhanced-byline");e&&a(o?null:e)}))}qt.fragments={article:h()(Ft||(Ft=d()(["\n    fragment useTrackEnhancedByline_article on Article {\n      id\n      uri\n      bylines {\n        creatorSnapshots {\n          ... on PersonSnapshot {\n            uri\n          }\n        }\n      }\n    }\n  "])))};var Vt=qt,Gt=n("N/T0"),Yt=n("eoAV"),Xt=n("jOYC"),Zt=function(e){var t=e.meter;if(!e.optimisticallyTruncated)return null;var n=t.granted,i=!t.meterReady;return o()("div",{"aria-live":"polite"},void 0,n&&o()("div",{className:q.a.a11y.visuallyHidden},void 0,"You have been granted access, use your keyboard to continue reading."),i&&o()("div",{className:q.a.a11y.visuallyHidden},void 0,"You have a preview view of this article while we are checking your access. When we have confirmed access, the full article content will load."))};Zt.displayName="OptimisticAriaLiveRegion";var Jt,Kt,$t=n("LON6"),Qt=n("D5MC"),en=n("ATQY"),tn=n("Y3E+"),nn=n.n(tn),an=n("ZB1J"),on=n("YWmT"),rn=n("4KZX"),sn=Object(H.css)("display:none;.SJ_xpn_storylines_desktop_cwv_0124-1_xpn_in_story &,.SJ_xpn_storylines_desktop_cwv_0124-2_xpn_hamburger &,.SJ_xpn_storylines_desktop_cwv_0124-3_xpn_top_only &{",q.a.breakpoint.mediumLarge,"{display:flex;}}"),ln=Object(H.css)("display:flex;.SJ_xpn_storylines_desktop_cwv_0124-1_xpn_in_story &{",q.a.breakpoint.mediumLarge,"{display:none;}}"),cn=Object(H.css)("display:none;.SJ_xpn_storylines_desktop_cwv_0124-1_xpn_in_story &,.SJ_xpn_storylines_desktop_cwv_0124-2_xpn_hamburger &,.SJ_xpn_storylines_desktop_cwv_0124-3_xpn_top_only &{",q.a.breakpoint.mediumLarge,"{display:flex;align-items:center;justify-content:center;min-height:55px;position:relative;margin-top:8px;&:empty{display:none;}}}",q.a.printHide),un=Object(H.css)("min-width:620px;overflow-x:auto;.SJ_xpn_storylines_desktop_cwv_0124-2_xpn_hamburger &{margin-left:30px;}"),dn=Object(H.css)("align-self:center;"),pn=n("aY2f"),fn=n.n(pn),mn=n("dKsL"),hn=n.n(mn),gn=n("/Kb5"),yn=n.n(gn),vn=n("y9tx"),bn=function(e){var t=e.displayName,n=e.status,i=e.url,a=e.lastModified,r=e.isActive,s=e.className,l=e.isNew,u=e.trackInteraction,d=e.isLiveRoute,p=e.renderLink;if(!i||!t)return null;var f="live"===(null==n?void 0:n.toLowerCase()),m=a&&Date.now()-Number(new Date(a)),h=!d&&f&&m<=18e5;return o()("span",{className:Object(H.cx)(vn.menuLinkContainerClass,s),"data-testid":"menu-link"},void 0,!r&&o()(hn.a,{status:n}),p&&o()("a",{className:Object(H.cx)(vn.menuLinkClass,c()({},vn.underlineClass,r)),role:"menuitem",href:i,onClick:function(e){u(e)}},void 0,o()("span",{className:vn.hoverUnderlineClass},void 0,t),l&&(Jt||(Jt=o()(yn.a,{})))),!p&&o()("span",{className:Object(H.cx)(vn.menuLinkClass,c()({},vn.underlineClass,r))},void 0,o()("span",{className:vn.hoverUnderlineClass},void 0,t),l&&(Kt||(Kt=o()(yn.a,{})))),h&&o()("div",{className:vn.placeholderClass},void 0,o()(fn.a,{autoUpdate:!0,showAbsoluteTime:!1,iso:a,formatter:"elapsed",className:vn.timestampClass})))};bn.displayName="MenuLink",bn.defaultProps={displayName:void 0,className:void 0,status:void 0,url:void 0,lastModified:void 0,isActive:!1,isNew:!1,trackInteraction:void 0,renderLink:!1};var _n,wn,xn=bn,kn=n("f3Il"),On=n("ed9S"),Tn=n.n(On),Cn=n("1jzN"),En=n.n(Cn),Sn=function(e){var t=e.url,n=e.tone,i=e.text,a=e.className,r=e.isAmp,s=e.trackInteraction,l=e.renderLink,u=e.isElectionStoryline;return i?t&&l?o()("a",{href:t,onClick:function(e){s(e)},className:Object(H.cx)(kn.titleLinkClass,kn.titleClass,a,c()({},kn.featureToneClass,n===Qt.StorylineTone.Feature))},void 0,u?_n||(_n=o()(En.a,{})):o()(Tn.a,{className:Object(H.cx)(kn.titleUnderlineClass,kn.caretClass),text:i,disable:r})):o()("span",{className:Object(H.cx)(kn.titleClass,a,c()({},kn.featureToneClass,n===Qt.StorylineTone.Feature))},void 0,u?wn||(wn=o()(En.a,{})):o()(Tn.a,{text:i,disable:r})):null};Sn.displayName="MenuTitle",Sn.defaultProps={url:null,className:void 0,isAmp:!1,text:null,tone:void 0,trackInteraction:function(e){return e},renderLink:!1,isElectionStoryline:!1};var Pn,In=Sn;function Mn(e){var t=e.storyline,n=e.uriOfActiveMenuLink,i=e.testName,a=e.ruleName,r=e.pageType,l=e.parentUri,u=e.region,d=e.isLiveRoute,m=e.componentLocation,h="SJ_xpn_storylines_desktop_cwv_0124",y="1_xpn_in_story",v=t.displayName,b=t.tone,_=t.primaryAssets,w=t.hubAssets,x=t.uri,k=Object(g.a)(),O=Object(p.useState)(!1),T=s()(O,2),C=T[0],E=T[1],S=Object(p.useState)(!1),P=s()(S,2),I=P[0],M=P[1];if(Object(p.useEffect)((function(){var e,t,n,i,a,o,r=[y,"2_xpn_hamburger","3_xpn_top_only"];"inline"===m&&k&&null!=k&&null!==(e=k[h])&&void 0!==e&&e.allocated&&null!=k&&null!==(t=k[h])&&void 0!==t&&t.variant&&r.includes(null==k||null===(n=k[h])||void 0===n?void 0:n.variant)&&E(!0),"sticky"===m&&k&&null!=k&&null!==(i=k[h])&&void 0!==i&&i.allocated&&null!=k&&null!==(a=k[h])&&void 0!==a&&a.variant&&r.includes(null==k||null===(o=k[h])||void 0===o?void 0:o.variant)&&E(!0)}),[k,m]),Object(p.useEffect)((function(){var e,t,n,i,a=[y,"2_xpn_hamburger","3_xpn_top_only"];"inline"!==m||!k||null!=k&&k[h]?("inline"===m&&window&&!window.matchMedia("(min-width: 1024px)").matches||"inline"===m&&k&&null!=k&&null!==(e=k[h])&&void 0!==e&&e.variant&&!a.includes(null==k||null===(t=k[h])||void 0===t?void 0:t.variant))&&M(!0):M(!0),"sticky"===m&&k&&null!=k&&null!==(n=k[h])&&void 0!==n&&n.variant&&(null==k||null===(i=k[h])||void 0===i?void 0:i.variant)===y&&M(!0)}),[k,m]),I)return!1;var A="nyt://storyline/894481b3-768d-4cd7-8eba-6fbfb73390d7"===x;return f.a.createElement(f.a.Fragment,null,o()(on.a,{componentName:"menu",region:u,parentUri:l,testName:i,ruleName:a,pageType:r,className:"sticky"===m?un:void 0},void 0,(function(e){var t=e.trackImpression,i=e.trackInteraction;return o()("nav",{className:Object(H.cx)(an.scrollContainerClass,c()(c()({},sn,"inline"===m),ln,"sticky"===m)),"aria-labelledby":"storyline-menu-title",role:"navigation"},void 0,o()(nn.a,{onVisible:function(){var e,n,i,a,o,r;null!=w&&null!==(e=w[0])&&void 0!==e&&null!==(n=e.asset)&&void 0!==n&&n.url&&(null==t||t({event:"impression",card:{index:0,type:"title",id:null==w||null===(i=w[0])||void 0===i||null===(a=i.asset)||void 0===a?void 0:a.uri,url:null==w||null===(o=w[0])||void 0===o||null===(r=o.asset)||void 0===r?void 0:r.url,label:v}}))}},void 0,(function(e){var t,n,a=e.ref;return f.a.createElement("h3",{id:"storyline-menu-title",ref:a,className:Object(H.cx)(c()({},dn,A))},o()(In,{url:null==w||null===(t=w[0])||void 0===t||null===(n=t.asset)||void 0===n?void 0:n.url,text:v,tone:b,className:Object(H.cx)(an.preventInteractivesFromTurningLinksBlueClass),renderLink:C,trackInteraction:function(e){var t,n,a,o,r,s;i(e,null==w||null===(t=w[0])||void 0===t||null===(n=t.asset)||void 0===n?void 0:n.url,{eventData:{type:"url-click",trigger:"item"},item:{uri:null==w||null===(a=w[0])||void 0===a||null===(o=a.asset)||void 0===o?void 0:o.uri,url:null==w||null===(r=w[0])||void 0===r||null===(s=r.asset)||void 0===s?void 0:s.url}})},isElectionStoryline:A}))})),o()("ul",{className:an.listClass,role:"menu"},void 0,Object(en.withDerivedLiveStatus)(_).filter((function(e){return null==e?void 0:e.asset})).map((function(e,a){return o()(nn.a,{onVisible:function(){var n,i;null==t||t({event:"impression",card:{index:null!=w&&null!==(n=w[0])&&void 0!==n&&null!==(i=n.asset)&&void 0!==i&&i.url?a+1:a,type:(null==e?void 0:e.status)||"UNSET",id:null==e?void 0:e.asset.uri,url:null==e?void 0:e.asset.url,label:null==e?void 0:e.displayName,is_new:null==e?void 0:e.isNew}})}},(null==e?void 0:e.asset.uri)||a,(function(t){var a,r,s,l,c,u=t.ref;return f.a.createElement("li",{ref:u,className:an.listSpacingClass},o()(xn,{status:null==e?void 0:e.status,displayName:null==e?void 0:e.displayName,url:null==e?void 0:e.asset.url,isLiveRoute:d,lastModified:null==e||null===(r=e.asset)||void 0===r?void 0:r.lastModified,isActive:null==e||null===(s=e.asset)||void 0===s||null===(l=s.uri)||void 0===l||null===(c=l.includes)||void 0===c?void 0:c.call(l,n),isNew:null==e?void 0:e.isNew,className:an.preventInteractivesFromTurningLinksBlueClass,renderLink:C,trackInteraction:function(t){var n,a,o;i(t,null==e||null===(n=e.asset)||void 0===n?void 0:n.url,{eventData:{type:"url-click",trigger:"item"},item:{uri:null==e||null===(a=e.asset)||void 0===a?void 0:a.uri,url:null==e||null===(o=e.asset)||void 0===o?void 0:o.url}})}},null==e||null===(a=e.asset)||void 0===a?void 0:a.uri))}))}))))})),o()(rn.a,{uri:x,name:"menu",isInlineModule:!1}))}Mn.defaultProps={testName:null,isLiveRoute:!1},Mn.fragments={creativeWork:h()(Pn||(Pn=d()(["\n    fragment XPNStorylineMenuBlock_creativeWork on CreativeWork {\n      storylines {\n        testName\n        ruleName\n        storyline {\n          uri\n          url\n          tone\n          displayName\n          hubAssets {\n            asset {\n              ...Asset_storyline\n            }\n          }\n          primaryAssets {\n            displayName\n            status\n            asset {\n              ...Asset_storyline\n              ... on LegacyCollection {\n                id\n                active\n                lastModified\n              }\n              ... on FeedPublication {\n                id\n                live\n              }\n            }\n          }\n        }\n      }\n      ...Asset_storyline\n    }\n\n    fragment Asset_storyline on CreativeWork {\n      ... on Published {\n        uri\n        url\n      }\n    }\n  "])))};var An=Object(I.a)(Mn),jn=n("zsRM"),Nn=n("wRre"),Ln=n("jFEr"),Dn=n("6zwR"),Rn=n("iGEk"),Bn=n("42oi"),zn=n("Xwia"),Fn=n.n(zn),Un=n("xn0n"),Hn=n("5rKh"),Wn=n("zl8J"),qn=n("Y0cC"),Vn=n("iDRl"),Gn=n("4mEQ"),Yn=n("1a3z"),Xn=n("axlb"),Zn=tt()((function(){return Promise.resolve().then(n.bind(null,"5rKh"))}),{loadableGenerated:{webpack:function(){return["5rKh"]},modules:["shared/Storylines/LatestUpdatesBlock"]}}),Jn=tt()((function(){return Promise.resolve().then(n.bind(null,"zl8J"))}),{loadableGenerated:{webpack:function(){return["zl8J"]},modules:["shared/Storylines/ContextBlock"]}}),Kn=tt()((function(){return Promise.resolve().then(n.bind(null,"iDRl"))}),{loadableGenerated:{webpack:function(){return["iDRl"]},modules:["shared/Storylines/StorylinesTopLinks"]}}),$n=tt()((function(){return Promise.resolve().then(n.bind(null,"Y0cC"))}),{loadableGenerated:{webpack:function(){return["Y0cC"]},modules:["shared/Storylines/QuoteBlock"]}}),Qn=Object(H.css)("margin-bottom:1em;"),ei=new Map([[nt.STORYLINE_BLOCKS.toplinks,Kn],[nt.STORYLINE_BLOCKS.context,Jn],[nt.STORYLINE_BLOCKS.quote,$n],[nt.LATEST_UPDATES_BLOCK,Zn]]);function ti(e){var t,n,i,a,r,s,l,c,u=e.article,d=e.composableBlocks,p=u.timesTags,f=!Object(nt.hideInlineModule)(p),m=[],h=!1;Object(nt.canPlaceBlock)(d,nt.STORYLINE_BLOCKS.context,f)?m.push({id:"ContextBlock",minPercent:at.inlineRegions[ot.a.MAIN_CONTENT_1].minPercent,maxPercent:at.inlineRegions[ot.a.MAIN_CONTENT_1].maxPercent,component:o()(Jn,{storyline:u.storylines[0].storyline,parentUri:u.uri,parentUrl:u.url,ruleName:u.storylines[0].ruleName,testName:u.storylines[0].testName,pageType:u.__typename,region:ot.a.MAIN_CONTENT_1,isOpinion:Object(Gn.isOpinion)(null===(n=u.section)||void 0===n?void 0:n.name)})}):Object(nt.canPlaceBlock)(d,nt.STORYLINE_BLOCKS.toplinks,f)?(m.push({id:"TopLinksBlock",minPercent:at.inlineRegions[ot.a.MAIN_CONTENT_1].minPercent,maxPercent:at.inlineRegions[ot.a.MAIN_CONTENT_1].maxPercent,component:o()(Kn,{pageType:u.__typename,parentUri:u.uri,parentUrl:u.url,region:ot.a.MAIN_CONTENT_1,ruleName:u.storylines[0].ruleName,storyline:u.storylines[0].storyline,testName:u.storylines[0].testName})}),h=!0):Object(Xn.b)(ot.a.MAIN_CONTENT_1,u)&&m.push({id:"NYT_".concat(ot.a.MAIN_CONTENT_1,"_REGION"),minPercent:at.inlineRegions[ot.a.MAIN_CONTENT_1].minPercent,maxPercent:at.inlineRegions[ot.a.MAIN_CONTENT_1].maxPercent,component:o()(Xn.a,{region:ot.a.MAIN_CONTENT_1,associatedAssets:null==u?void 0:u.associatedAssets,className:Qn})});Object(nt.canPlaceBlock)(d,nt.LATEST_UPDATES_BLOCK,f)?m.push({id:"STYLN_LATEST_UPDATES",minPercent:at.inlineRegions[ot.a.MAIN_CONTENT_2].minPercent,maxPercent:at.inlineRegions[ot.a.MAIN_CONTENT_2].maxPercent,component:o()(Zn,{storyline:null==u||null===(i=u.storylines)||void 0===i||null===(a=i[0])||void 0===a?void 0:a.storyline,parentUri:null==u?void 0:u.uri,testName:null==u||null===(r=u.storylines)||void 0===r||null===(s=r[0])||void 0===s?void 0:s.testName,ruleName:null==u||null===(l=u.storylines)||void 0===l||null===(c=l[0])||void 0===c?void 0:c.ruleName,pageType:null==u?void 0:u.__typename,region:ot.a.MAIN_CONTENT_2})}):Object(Xn.b)(ot.a.MAIN_CONTENT_2,u)&&m.push({id:"NYT_".concat(ot.a.MAIN_CONTENT_2,"_REGION"),minPercent:at.inlineRegions[ot.a.MAIN_CONTENT_2].minPercent,maxPercent:at.inlineRegions[ot.a.MAIN_CONTENT_2].maxPercent,component:o()(Xn.a,{region:ot.a.MAIN_CONTENT_2,associatedAssets:null==u?void 0:u.associatedAssets,className:Qn})});return Object(nt.canPlaceBlock)(d,nt.STORYLINE_BLOCKS.quote,f,Object(Gn.isOpinion)(null==u||null===(t=u.section)||void 0===t?void 0:t.name))?m.push({id:"QuoteBlock",minPercent:at.inlineRegions[ot.a.MAIN_CONTENT_3].minPercent,maxPercent:at.inlineRegions[ot.a.MAIN_CONTENT_3].maxPercent,component:o()($n,{pageType:u.__typename,parentUri:u.uri,parentUrl:u.url,region:ot.a.MAIN_CONTENT_3,ruleName:u.storylines[0].ruleName,storyline:u.storylines[0].storyline})}):Object(nt.canPlaceBlock)(d,nt.STORYLINE_BLOCKS.toplinks,f,!h)?m.push({id:"TopLinksBlock",minPercent:at.inlineRegions[ot.a.MAIN_CONTENT_3].minPercent,maxPercent:at.inlineRegions[ot.a.MAIN_CONTENT_3].maxPercent,component:o()(Kn,{pageType:u.__typename,parentUri:u.uri,parentUrl:u.url,region:ot.a.MAIN_CONTENT_3,ruleName:u.storylines[0].ruleName,storyline:u.storylines[0].storyline,testName:u.storylines[0].testName})}):Object(Xn.b)(ot.a.MAIN_CONTENT_3,u)&&m.push({id:"NYT_".concat(ot.a.MAIN_CONTENT_3,"_REGION"),minPercent:at.inlineRegions[ot.a.MAIN_CONTENT_3].minPercent,maxPercent:at.inlineRegions[ot.a.MAIN_CONTENT_3].maxPercent,component:o()(Xn.a,{region:ot.a.MAIN_CONTENT_3,associatedAssets:null==u?void 0:u.associatedAssets,className:Qn})}),m}var ni=nt.storyPageTests.ONE_MODULE_TEST,ii=[nt.STORYLINE_BLOCKS.toplinks,nt.STORYLINE_BLOCKS.context,nt.STORYLINE_BLOCKS.quote];var ai,oi,ri=function(e){var t,n=e.article,i=e.isLivePost,a=Object(g.a)(),r=Object(M.a)().user,l=Object(K.a)().isCrawler,c=Object(p.useState)([]),u=s()(c,2),d=u[0],f=u[1],m=Object(p.useState)(null),h=s()(m,2),y=h[0],v=h[1],b=Object(p.useMemo)((function(){return Object(nt.getComposableStorylineBlocks)({article:n,inlineBlocks:ii,isLivePost:i})}),[n,i]);return Object(p.useEffect)((function(){var e=Math.floor(Math.random()*b.length);v(e)}),[b.length]),Object(p.useEffect)((function(){var e,i=n.wordCount>=550;if(!l&&Object(N.d)(r)){var s=[],c=a[ni.name];if(!c||c.allocated){var u=null==c?void 0:c.variant;[Yn.c.middleGenericVariant.name,Yn.c.middleSpecificVariant.name].includes(null==a||null===(e=a[Yn.c.name])||void 0===e?void 0:e.variant)&&Object(Yn.a)(n)&&s.push({id:"editorial_sub_messaging",minPercent:.1,maxPercent:.9,component:t||(t=o()(Yn.b,{asset:n}))}),i&&(u===ni.variant||Object(Gn.isOpinion)(n.section)?s.push.apply(s,we()(function(e){var t=e.article,n=e.composableBlocks,i=e.randomNumber,a=t.timesTags,r=!Object(nt.hideInlineModule)(a),s=[];if(n.length&&r){var l=n[i],c=ei.get(l);s.push({id:"InlineStorylineBlock",minPercent:.2,maxPercent:.8,component:function(e){var n,i=e.region;return o()(c,{isOpinion:Object(Gn.isOpinion)(null===(n=t.section)||void 0===n?void 0:n.name),pageType:t.__typename,parentUri:t.uri,parentUrl:t.url,region:i,ruleName:t.storylines[0].ruleName,storyline:t.storylines[0].storyline,testName:t.storylines[0].testName})}})}return Object.keys(at.inlineRegions).forEach((function(e){Object(Xn.b)(e,t)&&s.push({id:"NYT_".concat(e,"_REGION"),minPercent:at.inlineRegions[e].minPercent,maxPercent:at.inlineRegions[e].maxPercent,component:o()(Xn.a,{associatedAssets:null==t?void 0:t.associatedAssets,className:Qn,region:e})})})),s}({article:n,composableBlocks:b,randomNumber:y}))):s.push.apply(s,we()(ti({article:n,composableBlocks:b})))),f(s)}}else f(we()(i?ti({article:n,composableBlocks:b}):[]))}),[a,n,b,l,y,r]),d},si=n("AtQq"),li=n("qCfC"),ci=n("i9lO"),ui=n("xGNk"),di=n.n(ui),pi=n("OLAn"),fi=n("JJ2H"),mi=n("d3NK"),hi=n("LXPD"),gi=n("JZVe"),yi=n.n(gi),bi=n("MLAy"),_i=n("Gs79"),wi=n("Yh38"),xi=n("Q3jP"),ki=n("3sI7"),Oi=ki.a,Ti=ki.b,Ci=ki.g,Ei=ki.f,Si=function(e){var t,n,i,a,r=e.HeaderFullBleed,l=e.article,u=e.data,d=e.sectionStyle,m=e.fullBleedCaptionContent,h=e.fullBleedCredit,g=e.truncated,v=Object(p.useState)(!0),_=s()(v,2),w=_[0],x=_[1],k=Object(me.a)().granted,O=Object(ee.a)(),T=Object(bi.e)({scope:"synthVoiceTestWeb",limit:1}),E=Object(K.a)(),S=E.getReferrer,P=E.fastlyAbraConfig,I="1_synth",M=P["STYLN_synth_voice_web"],A=M===I||O,j=Object(p.useRef)(!1);M&&!j.current&&(j.current=!0,Object(y.f)(P,S()));var N=Object(b.useTracking)({module:{region:"header"}}).Track,L=l.lastMajorModification,D=l.lastModified,R=null!==(t=null==l||null===(n=l.section)||void 0===n?void 0:n.name)&&void 0!==t?t:"none",B=function(){x(!1)},z=function(){x(!0)};return o()(C.Route,{render:function(e){var t,n,s,p,y,v,b=e.staticContext;return b&&(b.edge=de.a),o()(N,{},void 0,o()("div",{id:"fullBleedHeaderContent"},void 0,o()(r,{data:u,collections:l.collections,lastModified:D}),g?null:f.a.createElement(f.a.Fragment,null,o()(Ti,{},void 0,o()("p",{className:Object(H.cx)(ki.d,c()({},ki.c,"RIGHT"===u.alignment)),onMouseEnter:B,onMouseLeave:z,"aria-hidden":w},void 0,o()("span",{className:Object(H.cx)(ki.e,d),dangerouslySetInnerHTML:{__html:m}}),o()(di.a,{},void 0,o()("span",{dangerouslySetInnerHTML:{__html:h||""}})))),ai||(ai=o()(mi.a,{id:"sponsor",sponsorAdFullBleed:!0})),"opinion"!==R&&(i||(i=o()(Un.a,{asset:l}))),o()(Oi,{},void 0,A&&"SYNTHETIC_NARRATION"===(null==(y=l.featuredAudio)||null===(v=y.asset)||void 0===v?void 0:v.audioContentType)?o()("div",{className:Ci},void 0,o()(yi.a,{articleData:{uri:null==l?void 0:l.uri},audioAsset:null==l||null===(t=l.featuredAudio)||void 0===t?void 0:t.asset,isHybrid:O,granted:k,messageCap:T,useOverlayContext:_i.a}),o()("div",{className:Ei},void 0,o()(hi.a,{share:l,position:fi.a.HEADER,className:d,isOpinion:!1,hasMedia:!1,hasSyntheticAudio:!(null!=l&&l.associatedNewsletter)}))):o()(hi.a,{share:l,position:fi.a.HEADER,className:d,isOpinion:!1,hasMedia:!1}),(null==(n=u.byline)||null===(s=n.bylines[0])||void 0===s||null===(p=s.creators)||void 0===p?void 0:p.length)>0&&o()(wi.a,{article:l,timestamp:u.timestampBlock,lastMajorModification:L,data:u.byline,headerPresent:"FullBleed"}),l.translations&&o()(pi.a,{translations:l.translations})),l.reviewItems&&l.reviewItems.length>0&&(a||(a=o()(xi.a,{article:l}))))))}})};Si.displayName="HeaderFullBleedWrapper",Si.fragments={article:h()(oi||(oi=d()(["\n    fragment HeaderFullBleedWrapper_article on Article {\n      id\n      ...ReviewHeader_article\n      ...BrandBar_asset\n      ...BylineBlock_article\n      translations {\n        ...TranslationLinks_translations\n      }\n      ...ShareToolbar_share\n      featuredAudio {\n        source\n        asset {\n          id\n          audioContentType\n          sourceId\n          uri\n          headline {\n            default\n          }\n          fileUrl\n          length\n        }\n      }\n    }\n    ","\n    ","\n    ","\n    ","\n    ","\n  "])),xi.a.fragments.article,Un.a.fragments.asset,wi.a.fragments.article,pi.a.fragments.translations,hi.a.fragments.share)},Si.defaultProps={article:{},fullBleedCredit:"",fullBleedCaptionContent:"",sectionStyle:"",data:{},HeaderFullBleed:null,truncated:!1};var Pi,Ii=Si,Mi=n("7GK/"),Ai=n.n(Mi),ji=n("510Z"),Ni=n("WXMI"),Li=n("3Rk2"),Di=n.n(Li)()([q.a.breakpoint.small,q.a.breakpoint.medium,q.a.breakpoint.large]),Ri=Object(H.css)("border-top:1px solid #e8e8e8;border-bottom:1px solid #e8e8e8;margin-bottom:",q.a.font.size(20),";padding-top:",q.a.font.size(20),";padding-bottom:",q.a.font.size(10),";"),Bi=Object(H.css)("width:262px;",Di({margin:["0 auto ".concat(q.a.font.size(20),";"),"0 auto 0 0"]}),";"),zi=Object(H.css)("align-items:center;justify-content:center;",Di({display:["block","flex"]}),";"),Fi=Object(H.css)("margin-bottom:",q.a.font.size(30),";"),Ui=Object(H.css)(Di({display:["block","none"]}),";"),Hi=Object(H.css)("color:",q.a.color.gray20,";font-weight:",q.a.font.weight.medium,";font-family:",q.a.font.franklinBase,";font-size:",q.a.font.size(14),";line-height:",q.a.font.size(20),";text-align:center;margin:0 auto;"),Wi=Object(H.css)("font-weight:",q.a.font.weight.medium,";font-family:",q.a.font.serifBase,";font-size:",q.a.font.size(20),";line-height:",q.a.font.size(30),";margin-bottom:",q.a.font.size(30),";",Di({fontSize:[q.a.font.size(18),q.a.font.size(18),q.a.font.size(20)],lineHeight:[q.a.font.size(25),q.a.font.size(25),q.a.font.size(30)]}),";"),qi=Object(H.css)("font-size:",q.a.font.size(12),";line-height:",q.a.font.size(12),";font-weight:",q.a.font.weight.bold,";font-family:",q.a.font.franklinBase,";margin-left:",q.a.font.size(3),";display:inline-block;color:",q.a.color.blue20,";text-decoration:none;text-transform:uppercase;&:hover{text-decoration:underline;}"),Vi=Object(H.css)("position:relative;margin:0 ",q.a.font.size(8),";&::after{background:",q.a.color.gray50,";height:80%;content:'';margin:0 ",q.a.font.size(5),";position:absolute;right:",q.a.font.size(-6),";top:0;width:",q.a.font.size(1),";}"),Gi=Object(H.css)("color:",q.a.color.blue20,";display:inline-block;&:hover{text-decoration:underline;}"),Yi=Object(H.css)("display:block;margin:0 auto ",q.a.font.size(10),";text-align:center;",Di({maxWidth:[q.a.font.size(270),q.a.font.size(400)]}),";"),Xi=Object(H.css)(q.a.button.action,";display:block;padding:",q.a.font.size(13),";margin-top:",q.a.font.size(20),";"),Zi=Object(H.css)("color:",q.a.color.gray20,";font-weight:",q.a.font.weight.medium,";font-family:",q.a.font.franklinBase,";font-size:",q.a.font.size(12),";line-height:",q.a.font.size(16),";text-align:center;margin:",q.a.font.size(20)," auto;",Di({maxWidth:[q.a.font.size(250),q.a.font.size(500)]}),";"),Ji=Object(H.css)("color:",q.a.color.gray45,";font-weight:",q.a.font.weight.medium,";font-family:",q.a.font.franklinBase,";font-size:",q.a.font.size(12),";line-height:",q.a.font.size(16),";text-align:center;margin:",q.a.font.size(20)," auto;"),Ki=Object(H.css)(Ji,";",Di({maxWidth:[q.a.font.size(200),q.a.font.size(500)]}),";"),$i=Object(H.css)(Ji,";",Di({maxWidth:[q.a.font.size(250),q.a.font.size(500)]}),";"),Qi=Object(H.css)("color:",q.a.color.gray20,";font-weight:",q.a.font.weight.medium,";font-family:",q.a.font.serifBase,";font-size:",q.a.font.size(17),";line-height:",q.a.font.size(26),";font-style:italic;"),ea=Object(H.css)(Qi,";font-weight:",q.a.font.weight.bold,";margin-top:",q.a.font.size(20),";"),ta=Object(H.css)(Qi,";margin-bottom:",q.a.font.size(20),";a{color:",q.a.color.blue20,";text-decoration:underline;}"),na=Object(H.css)(".",Ki,"{max-width:",q.a.font.size(200),";}.",$i,"{max-width:",q.a.font.size(250),";}.",Zi,"{max-width:",q.a.font.size(250),";}.",Yi,"{max-width:",q.a.font.size(270),";}"),ia=function(e){var t=e.asset,n=t.archiveProperties,i=t.printInformation,a=e.hasStoryBody,r=Object(me.a)(),s=r.meterReady,l=r.loggedIn,c=r.granted,u=r.grantReason;if(!n||!i)return null;var d,p,f=(d=i.publicationDate,{isBefore2002:(p=Ai()(d).format("YYYY"))<=2002,isBefore1996:p<=1996}),m=!s||l&&c&&["SUBSCRIBER","IP","REFERRER"].includes(u),h=n&&n.thumbnails&&n.thumbnails.length&&n.thumbnails[1].url,g=+i.page,y=(n||{}).timesMachineUrl,v=(i||{}).publicationDate;return y&&v&&f.isBefore2002?o()("div",{className:Xt.b.layout.feature},void 0,o()("div",{className:Ri},void 0,o()("div",{className:Object(H.cx)(zi,h&&Fi)},void 0,h&&o()("div",{className:Bi},void 0,o()(ji.a,{alt:i.headline,defaultCropSrc:n.thumbnails[1].url,credit:"The New York Times Archives"})),o()("div",{className:h&&na},void 0,o()("div",{className:Hi},void 0,"See the article in its original context from ",h&&(Pi||(Pi=o()("br",{}))),!h&&o()("br",{className:Ui}),Object(We.getFullDate)(i.publicationDate),","," ",i.section&&o()("span",{},void 0,"Section ",i.section,",")," Page"," ",g,o()("span",{className:Vi}),o()("a",{className:Gi,href:"https://store.nytimes.com/collections/new-york-times-page-reprints?utm_source=nytimes&utm_medium=article-page&utm_campaign=reprints"},void 0,"Buy Reprints")),!m&&o()("div",{className:Zi},void 0,"New York Times subscribers* enjoy full access to TimesMachine—view over 150 years of New York Times journalism, as it originally appeared."),m&&o()("div",{className:Yi},void 0,o()("a",{className:Xi,href:y.replace("http://","https://"),type:"button",rel:"noopener noreferrer",target:"_blank"},void 0,"View on timesmachine")),!m&&o()("div",{className:Yi},void 0,o()("a",{className:Xi,href:"https://www.nytimes.com/subscription/multiproduct/lp8HYKU.html?campaignId=4KKHF",type:"button"},void 0,Ni.c)),m&&o()("div",{className:$i},void 0,"TimesMachine is an exclusive benefit for home delivery and digital subscribers."),!m&&o()("div",{className:Ki},void 0,"*Does not include Crossword-only or Cooking-only subscribers."))),f.isBefore1996&&(a?o()("div",{className:Qi},void 0,o()("div",{className:ea},void 0,"About the Archive"),o()("div",{className:ta},void 0,"This is a digitized version of an article from The Times’s print archive, before the start of online publication in 1996. To preserve these articles as they originally appeared, The Times does not alter, edit or update them."),o()("div",{className:ta},void 0,"Occasionally the digitization process introduces transcription errors or other problems; we are continuing to work to improve these archived versions.")):o()("div",{className:ta},void 0,"Full text is unavailable for this digitized archive article. Subscribers may view the full text of this article in its original form through TimesMachine.")))):null};ia.defaultProps={asset:{archiveProperties:{timesMachineUrl:""}},hasStoryBody:!1};var aa=ia,oa=function(e){var t=e.asset.archiveProperties;return t?o()("div",{className:Xt.b.layout.feature},void 0,t.lede&&o()("p",{className:Wi},void 0,t.lede," ",o()("a",{href:t.timesMachineUrl.replace("http://","https://"),className:qi,target:"_blank",rel:"noopener noreferrer"},void 0,"View Full Article in Timesmachine »"))):null};oa.defaultProps={asset:{archiveProperties:{lede:void 0,timesMachineUrl:void 0}}};var ra=oa,sa=n("ziu7"),la=n("zIxd"),ca=n("VUHb"),ua=[],da=["news","feature"];function pa(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function fa(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?pa(Object(n),!0).forEach((function(t){c()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):pa(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var ma,ha=function(e){var t=e.asset,n=e.truncated,i=e.dropzoneContents,a=e.theme,o=e.meter,r=e.appContext,s=e.optimisticallyTruncated,l=e.abra,c=t.sprinkledBody.content,u=[],d=[],p=0,f=0,m=0,h=!1,g=!1,y=0,v="",b=!1,_=0,w=!1,x=!1,k=!1,O=!1;if(n&&(O=n),null!=o&&o.showGateway&&"PAYWALL"===(null==o?void 0:o.gatewayType)&&(O=jn.d),null!=o&&o.showGateway&&"REGIWALL"===(null==o?void 0:o.gatewayType)&&(O=jn.d),null!=o&&o.showGateway&&null!=o&&o.gatewayIsEmbedded&&("DROPZONE"===(null==o?void 0:o.gatewayPosition)&&null!=o&&o.gatewayDropzone&&(O={dropzone:o.gatewayDropzone}),"HEADER"===(null==o?void 0:o.gatewayPosition)&&(x=!0),"ABOVE_MAIN_CONTENT"===(null==o?void 0:o.gatewayPosition)&&(k=!0)),s&&(null==o||!o.granted)){var T,C=Object(jn.f)(l);O={dropzone:null!==(T=null==r?void 0:r.optimisticTruncationDropzone)&&void 0!==T?T:C.dropzone}}var E=Object(ut.hideEmailSignupBlock)(t);c.forEach((function(e,n){var r,s,l=Math.floor(.7*(t.sprinkledBody.content.length-m));if("EmailSignupBlock"===e.__typename&&E||"CapsuleBlock"===e.__typename&&Object(sa.e)(e)||"Dropzone"===e.__typename&&null!=a&&a.isShortForm)return m+=1,null;"Dropzone"===e.__typename&&(p+=1);var T="Region"===(null==i||null===(r=i[null==e?void 0:e.index])||void 0===r||null===(s=r.type)||void 0===s?void 0:s.displayName);if(h&&x)return m+=1,null;if(g&&k)return m+=1,null;if(Object(Nn.d)(e)||T){if(Object(jn.h)({shouldTruncate:O,minimumTruncation:l,elementCounter:f,dropzoneCounter:p,allowShortTruncate:null==o?void 0:o.gatewayIsEmbedded})&&"InteractiveBlock"!==e.__typename)return w=Object(jn.g)(w,p,O.dropzone),m+=1,null;if(Object(jn.h)({shouldTruncate:O,minimumTruncation:l,elementCounter:f,dropzoneCounter:p,allowShortTruncate:null==o?void 0:o.gatewayIsEmbedded})&&"InteractiveBlock"===e.__typename&&e.media&&e.media.compatibility&&"inline"!==e.media.compatibility.toLowerCase())return w=Object(jn.g)(w,p,O.dropzone),m+=1,null;if("InteractiveBlock"===e.__typename&&e.media&&e.media.slug&&"string"==typeof e.media.slug&&0===e.media.slug.toLowerCase().indexOf("newsletter-signup-"))return m+=1,null;d.length&&u.push(d),u.push({component:si.a[e.__typename],name:e.__typename,data:fa({},e),key:n,heading1Rendered:h,truncated:O,elementCounter:f,dropzoneCounter:p,minimumTruncation:l}),f+=1,d=[]}else{var C;if(Object(jn.h)({shouldTruncate:O,minimumTruncation:l,elementCounter:f,dropzoneCounter:p,allowShortTruncate:null==o?void 0:o.gatewayIsEmbedded}))return w=Object(jn.g)(w,p,O.dropzone),m+=1,null;var S=si.a[e.__typename];if(!S||"Dropzone"===e.__typename&&!function(e){return!(!e.adsMobile&&!e.adsDesktop)||(!!ua.includes(e.index)||!(!i||!i[e.index.toString()]))}(e))return null;v=null===(C=c[n-1])||void 0===C?void 0:C.__typename,b=["ParagraphBlock","SummaryBlock"].includes(e.__typename)&&"Heading2Block"===v,"ParagraphBlock"===e.__typename&&(y+=1),null!=a&&a.isShortForm&&"Heading3Block"===e.__typename&&(_+=1),d.push({component:S,name:e.__typename,data:fa({},e),key:n,heading1Rendered:h,isFirstParagraph:1===y,isFirstTextAfterHeading2Block:b,shortFormHeadersCount:_}),f+=1}return"Heading1Block"===e.__typename&&(h=!0),"BylineBlock"===e.__typename&&(g=!0),"HeaderFullBleedHorizontalBlock"!==e.__typename&&"HeaderFullBleedVerticalBlock"!==e.__typename&&"HeaderBasicBlock"!==e.__typename&&"HeaderLegacyBlock"!==e.__typename&&"HeaderLiveBriefingBlock"!==e.__typename||(h=!0,g=!0),m+=1,null}));var S=(null==o?void 0:o.showGateway)&&!1!==O&&"article"===t.type,P=s&&!(null!=o&&o.meterReady)&&!1!==O&&"article"===t.type;return d.length?(P&&d.push({component:la.a,name:"Optimistic",key:"Optimistic",dropzoneCounter:p,fallbackTruncation:w}),S&&d.push({component:ca.a,name:"ReadersModeGateway",key:"ReadersModeGateway"}),u.push(d),u):(P&&u.push({component:la.a,name:"Optimistic",key:"Optimistic",dropzoneCounter:p,fallbackTruncation:w}),S&&u.push({component:ca.a,name:"ReadersModeGateway",key:"ReadersModeGateway"}),u)};function ga(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function ya(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ga(Object(n),!0).forEach((function(t){c()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ga(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var va=tt()((function(){return n.e(121).then(n.bind(null,"xnQu"))}),{loadableGenerated:{webpack:function(){return["xnQu"]},modules:["./LivePostHeader"]}}),ba=tt()((function(){return n.e(94).then(n.bind(null,"Mz8R"))}),{loadableGenerated:{webpack:function(){return["Mz8R"]},modules:["./ExplainerPostHeader"]}});si.a.CapsuleBlock=li.a;var _a=function(e){var t=!0;if(1===e.length){var n=e[0];"Dropzone"!==n.name||n.adsDesktop&&n.adsMobile&&n.placedMidtermPackage&&n.placedPackage||(t=!1)}return t};function wa(e){var t,n,i,a,r,s,l,u,d,m,h=e.asset,v=e.truncated,b=e.dismissTruncator,_=e.companionColumnZones,w=e.addZone,x=e.isLivePost,k=e.isExplainerPost,O=e.welcomeBannerSubsDZComponent,T=e.welcomeBannerRegiDZComponent,C=e.optimisticallyTruncated,E=e.adsTestDone,S=Object(H.useTheme)(),P=Object(Ht.a)(),I=Object(me.a)(),A=Object(M.a)().user,j=Object(g.a)(),N=Object(K.a)(),L="podcasts"===(null==h||null===(t=h.section)||void 0===t?void 0:t.name),D=Object(p.useMemo)((function(){return L?[]:null==h?void 0:h.storylines}),[null==h?void 0:h.storylines,L]),R=Object(Gt.a)({name:"postTruncationArticle"});Object(p.useEffect)((function(){var e,t;null!=j&&null!==(e=j[jn.a.test])&&void 0!==e&&e.allocated&&Object(y.e)(jn.a.test),null!=j&&null!==(t=j[jn.b.test])&&void 0!==t&&t.allocated&&Object(y.e)(jn.b.test)}),[j]),Object(p.useEffect)((function(){null!=I&&I.granted&&C&&R.trackImpression()}),[I,C,R]),Vt(h.uri,h.bylines);var B,z="",F=0,U=-1,W=h.tone.toLowerCase(),q=da.includes(W)?W:"news",V=h.section&&h.section.name||"",G=h.subsection&&h.subsection.name||"",Y=Object(sa.c)(V,G),X=Y?Y.toLowerCase():"",Z=-1!==["t-magazine","magazine"].indexOf(X)?X:q,J=h.sprinkledBody.content||[],$="InteractiveBlock"===(null===(n=J[0])||void 0===n?void 0:n.__typename),Q=Object(sa.a)(J),ee=Object(sa.b)(Q,"legacyHtmlCaption"),te=Object(sa.b)(Q,"credit");if(Q&&"VideoBlock"===Q.__typename){var ne=Object(sa.b)(Q,"bylines");if(ee=Object(sa.b)(Q,"summary"),ne&&ne.length){var ie=ne.find((function(e){return e.renderedRepresentation}));te=ie&&ie.renderedRepresentation}}var ae=Object(Nn.a)(J),oe=ae&&ae.__typename&&["HeaderBasicBlock","HeaderLegacyBlock"].includes(ae.__typename)&&ae.ledeMedia&&"ImageBlock"===ae.ledeMedia.__typename;oe&&(F=1);var re=h&&h.reviewItems&&h.reviewItems.length>0,se=ri({article:h,isLivePost:x}),le=Fn()({body:h.sprinkledBody,dropzoneConfigsList:se,reservedIndices:ua}),ce=ha({asset:h,truncated:v,dropzoneContents:le,theme:S,meter:I,appContext:N,optimisticallyTruncated:C,abra:j}),ue=ce.find((function(e){if(e&&"UnstructuredBlock"===e.name&&e.data){var t=e.data;if("ExperimentalBlock_Ask"===(t=JSON.parse(t.data)).type)return!0}return!1})),de=Object(sa.d)(ce[0]),pe=null===(i=h.associatedNewsletter)||void 0===i||null===(a=i.newsletterProduct)||void 0===a?void 0:a.newsletterProductData,fe=ae&&("HeaderFullBleedHorizontalBlock"===ae.__typename||"HeaderFullBleedVerticalBlock"===ae.__typename),he=ae&&fe?Ii:si.a[ae.__typename];!x||k||pe||"HeaderBasicBlock"!==ae.__typename||(he=va),k&&(he=ba);var ge=Object($t.b)(ya(ya({},h),{},{storylines:D}))&&!fe&&!k&&!x&&!$,ye={article:h,truncated:v,className:!fe&&Xt.b.layout[Z],HeaderFullBleed:fe&&si.a[ae.__typename],sectionStyle:Y,fullBleedCaptionContent:ee,fullBleedCredit:te,showDatelessTimestamp:P},ve={};re&&["HeaderLegacyBlock","HeaderFullBleedHorizontalBlock","HeaderFullBleedVerticalBlock","HeaderBasicBlock"].includes(ae.__typename)&&(ve={dismissTruncator:b});var be=Object(H.cx)("meteredContent",Dn.a,c()({},Dn.b,de||"guide"===(null==S?void 0:S.treatment)?null:!he)),_e=Object(Bn.d)(h);if(_e){var we=ce.findIndex((function(e){var t;return"UnstructuredBlock"===(null==e?void 0:e.name)&&"ExperimentalBlock_BulletBriefing"===(null==e||null===(t=e.data)||void 0===t?void 0:t.dataType)}));we>-1&&ce.splice(we+1,0,{name:"CoronavirusBriefingAlertSignup"})}var xe=!!pe&&!Object(ut.hasEditorPlacedSignupBlock)(h),ke=!1===(null==I?void 0:I.granted)&&!0===(null==I?void 0:I.gatewayIsEmbedded)&&"HEADER"===(null==I?void 0:I.gatewayPosition),Oe=0;return f.a.createElement(f.a.Fragment,null,o()(Zt,{meter:I,optimisticallyTruncated:C}),ge&&o()("div",{className:cn},void 0,o()(An,{storyline:null==h||null===(r=h.storylines)||void 0===r||null===(s=r[0])||void 0===s?void 0:s.storyline,uriOfActiveMenuLink:null==h?void 0:h.uri,parentUri:null==h?void 0:h.uri,article:h,pageType:h.__typename,ruleName:null==h||null===(l=h.storylines)||void 0===l||null===(u=l[0])||void 0===u?void 0:u.ruleName,testName:null==h||null===(d=h.storylines)||void 0===d||null===(m=d[0])||void 0===m?void 0:m.testName,region:ot.a.ABOVE_MAIN_CONTENT,componentLocation:"inline"})),!de&&he&&f.a.createElement(he,ya(ya(ya({},ye),ve),{},{truncated:ke,data:ya({},ce.shift().data)})),o()("section",{name:"articleBody",className:be},void 0,o()(aa,{asset:h,hasStoryBody:ce.length>0}),!ce.length&&o()(ra,{asset:h}),!he&&o()(Un.a,{asset:h}),xe&&f.a.createElement(si.a.EmailSignupBlock,ya(ya({},Object(ut.createFallbackEmailSignupProps)(pe)),{},{isTopOfStory:!0})),ce.map((function(e,t){var n,i;B=F>0,"ImageBlock"===e.name&&(F+=1);var a={elementCount:e.elementCounter,dropzoneCount:e.dropzoneCounter,minimumTruncation:e.minimumTruncation,collections:h.collections,isFirstElement:Object(Nn.c)(ae,de?t+1:t),lazyLoad:B,user:A,article:h,truncated:null!==(n=e.truncated)&&void 0!==n?n:v,articleId:h.sourceId,askExperimentalBlock:ue,dropzoneContents:le,adSensitivity:null===(i=h.advertisingProperties)||void 0===i?void 0:i.sensitivity,supplementalCount:U,welcomeBannerSubsDZComponent:O,welcomeBannerRegiDZComponent:T,fallbackTruncation:e.fallbackTruncation},r=e.data&&e.data.size;return Array.isArray(e)||r||!Object(Nn.d)(e)||(a.className=Object(H.cx)(Xt.b.layout[Z],c()({},Xt.b.layout.largeWidthClass,"CardDeckBlock"===e.name))),Array.isArray(e)&&_a(e)&&!ke?(U+=1,e.findIndex((function(e){return"Heading2Block"===e.name}))>-1&&(a.region="".concat(Oe),Oe+=1),o()(Rn.a,{defaultOpts:a,supplementalCount:U,addZone:w,metadata:_[U],componentTypeMap:si.a,embeddedComponentTypeMap:si.c,isOldLiveBriefing:_e,adsTestDone:E},"StoryBodyCompanionColumn-".concat(U),e)):_a(e)?"ClaimReviewBlock"===e.name?(z=si.a[e.name],f.a.createElement(z,ya(ya({},a),{},{article:h,key:t.toString()}))):("ImageBlock"===e.name?(a.imageNumber=F+oe,a.usePhotoViewer=!0,a.useMobileCrop=!0):"Heading1Block"===e.name?a.replaceHeading1=e.heading1Rendered:"InteractiveBlock"===e.name&&(a.isAboveH1=0===t&&de),(z=si.a[e.name])?(a.key=e.key,a.data=e.data,e.key>Ln.b&&si.c[e.name]?o()(Yt.a,{offset:{bottom:-500},partialVisibility:!0,scrollCheck:!0,scrollThrottle:Ln.c,intervalCheck:!0,intervalDelay:Ln.a},t.toString(),f.a.createElement(z,a)):o()("div",{},"blocksContianer-".concat(t.toString()),f.a.createElement(z,ya({},a)))):null):o()(p.Fragment,{},t.toString())}))))}wa.fragments={article:h()(ma||(ma=d()(["\n    fragment OakBody_article on Article {\n      id\n      slug # STORYLINES PROTOTYPE. REMOVE BY H2/20\n      newsStatus\n      sourcePublisher\n      timesTags @filterEmpty {\n        displayName\n      }\n      sprinkledBody {\n        ...DocumentBlock_data\n        # in addition to the document block, query for capsules.\n        content @filterEmpty {\n          ...CapsuleBlock_data\n        }\n      }\n      ...HeaderMultimediaBlock_article\n      ...HeaderBasic_article\n      ...HeaderLegacyBlock_article\n      ...HeaderFullBleedWrapper_article\n      ...HeaderLiveBriefing_article\n      ...ClaimReviewBlock_article\n      ...UnstructuredBlock_article\n      ...BrandBar_asset\n      ...LatestUpdatesBlock_storyline\n      ...ContextBlock_storyline\n      ...StorylinesTopLinks_storyline\n      ...QuoteBlock_storyline\n      ...useTrackEnhancedByline_article\n      ...EmailSignupBlock_article\n    }\n    ","\n    ","\n    ","\n    ","\n    ","\n    ","\n    ","\n    ","\n    ","\n    ","\n    ","\n    ","\n    ","\n    ","\n    ","\n    ","\n  "])),si.a.HeaderBasicBlock.fragments.article,si.a.HeaderLegacyBlock.fragments.article,si.a.HeaderLiveBriefingBlock.fragments.article,si.a.ClaimReviewBlock.fragments.article,si.a.UnstructuredBlock.fragments.article,si.a.EmailSignupBlock.fragments.article,ci.a.fragments.article,Ii.fragments.article,li.a.fragments.data,si.b,Un.a.fragments.asset,Hn.default.fragments.storyline,Wn.default.fragments.storyline,Vn.default.fragments.storyline,qn.default.fragments.storyline,Vt.fragments.article)},wa.defaultProps={truncated:void 0,dismissTruncator:void 0,companionColumnZones:void 0,addZone:void 0,isLivePost:!1,isExplainerPost:!1,welcomeBannerSubsDZComponent:null,welcomeBannerRegiDZComponent:null,optimisticallyTruncated:!1,adsTestDone:!1};var xa=wa,ka=n("solT"),Oa=n("IHYJ"),Ta=n("boCj"),Ca=n("Vfu1"),Ea=Object(H.css)("background-color:",q.a.color.white,";"),Sa=Object(H.css)("display:flex;border-top:1px solid ",q.a.color.black,";justify-content:space-between;"),Pa=Object(H.css)("margin-bottom:12px;"),Ia=Object(H.css)("padding:17px 20px 0;background-color:white;box-sizing:border-box;font-family:",q.a.font.franklinBase,";font-weight:",q.a.font.weight.bold,";font-size:",q.a.font.size(14),";line-height:",q.a.font.size(18),";max-width:851.25px;",q.a.breakpoint.medium,"{padding-right:0;padding-left:0;font-size:",q.a.font.size(16),";line-height:",q.a.font.size(22),";}a::after{content:'›';margin-left:5px;}"),Ma=Object(H.css)("display:inline-block;font-size:",q.a.font.size(14),";line-height:",q.a.font.size(18),";max-width:600px;font-weight:",q.a.font.weight.medium,";font-family:",q.a.font.franklinBase,";margin-top:0;padding:0 20px 15px;",q.a.breakpoint.medium,"{padding-left:0;}"),Aa=Object(H.css)("&:hover{text-decoration:underline;}");function ja(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function Na(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ja(Object(n),!0).forEach((function(t){c()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ja(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var La="1_elevate_series_collections",Da=function(e){var t,n,i=e.articles,a=e.collectionUrl,r=e.collectionName,s=e.collectionTagline,l=e.sectionLabel,u=Object(g.a)(),d=null==u||null===(t=u.STYLN_elevate_series_collections)||void 0===t?void 0:t.allocated,p=null==u||null===(n=u.STYLN_elevate_series_collections)||void 0===n?void 0:n.variant,f=Object(b.useTracking)(),m=Object($.a)().deviceType;if(!d&&!p)return null;var h,y,v,_={pageType:"Article",collectionName:r,region:"footer",module:"seriesCollection_Band",label:r,name:"STYLN_elevate_series_collections",template:""},w={event:"impression",module:{region:"footer",label:La,name:"STYLN_elevate_series_collections",context:"seriesCollection_Band"}};return o()(Ta.InView,{className:Ea,onChange:function(e){e&&f.trackEvent(w)},triggerOnce:!0},void 0,o()("section",{className:Object(H.cx)(Sa,c()({},Pa,!s))},void 0,o()("h2",{className:Ia,id:l},void 0,a?o()("a",{href:a},void 0,o()("span",{className:Aa},void 0,r)):o()("span",{className:Aa},void 0,r))),s&&o()("span",{className:Ma,dangerouslySetInnerHTML:{__html:s}}),o()(Ca.a,{assetList:(y=i,v="smartphone"===m?null===(h=y)||void 0===h?void 0:h.length:4,(y=y.map((function(e){return function(e){var t,n=(null==e?void 0:e.node).promotionalMedia,i=(null==n?void 0:n.spanImageCrops)||(null==n||null===(t=n.imageWithCreditPromotionalMedia)||void 0===t?void 0:t.spanImageCrops);return e.node.promotionalMedia.__typename="Image",e.node.promotionalMedia.crops||(e.node.promotionalMedia=Na(Na({},n),{},{crops:null==i?void 0:i.filter((function(e){return"MEDIUM_SQUARE"===(null==e?void 0:e.name)||"SMALL_SQUARE"===(null==e?void 0:e.name)}))})),e}(e)}))).slice(0,v)),assetTheme:"seriesCollection",trackingQueryParams:_}))};Da.displayName="StorylinesSeriesCollectionTest",Da.defaultProps={articles:[],collectionUrl:"",collectionName:"",collectionTagline:"",sectionLabel:""};var Ra=n("JYb8"),Ba=n("UAIX"),za=n("PWuI"),Fa=n("70M3"),Ua=n("+tSf"),Ha=n("RNdQ"),Wa=n("Pm+9"),qa=n("+zxi"),Va=n("E8RS"),Ga=n("l24T"),Ya=n("hKI/"),Xa=n.n(Ya),Za=n("+8fM"),Ja=n.n(Za),Ka=n("sn4R"),$a=Object(H.css)("top:0;left:0;width:100%;position:absolute;"),Qa=Object(H.css)("transition:all 0.1s ease-in-out;"),eo=Object(H.css)("opacity:0;z-index:-1;visibility:hidden;"),to=Object(H.css)("opacity:1;z-index:900;visibility:visible;"),no=Object(H.css)("display:block;.SJ_xpn_storylines_desktop_cwv_0124-1_xpn_in_story &,.SJ_xpn_storylines_desktop_cwv_0124-2_xpn_hamburger &,.SJ_xpn_storylines_desktop_cwv_0124-3_xpn_top_only &{",q.a.breakpoint.mediumLarge,"{display:none;}}");function io(e){var t,n,i,a,r,l,u,d,m=e.article,h=e.renderStorylineMenu,y=e.renderLiveBreakoutMenu,v=e.storylineMenuBlockRef,b=e.liveMenuRef,_="SJ_xpn_storylines_desktop_cwv_0124",w=Object(p.useRef)(),x=Object(it.getLiveAsset)(m),k=Object(Ua.c)(m),O=Object(g.a)(),T=x||{},C=T.live,E=T.active||C,S=Object(p.useState)(!1),P=s()(S,2),I=P[0],M=P[1],A=Object(p.useState)(to),j=s()(A,2),N=j[0],L=j[1],D=Object(p.useState)(eo),R=s()(D,2),B=R[0],z=R[1],F=Object(p.useState)(!1),U=s()(F,2),W=U[0],q=U[1];Object(p.useEffect)((function(){var e,t,n,i=["1_xpn_in_story","2_xpn_hamburger","3_xpn_top_only"];O&&window.matchMedia("(min-width: 1024px)").matches&&null!=O&&null!==(e=O[_])&&void 0!==e&&e.allocated&&null!=O&&null!==(t=O[_])&&void 0!==t&&t.variant&&i.includes(null==O||null===(n=O[_])||void 0===n?void 0:n.variant)&&q(!0)}),[O]);var V=y&&!h,G=h&&!(y&&(E||k)),Y=!(G||V);return Object(p.useEffect)((function(){if(Y){var e=Xa()((function(){window.pageYOffset>=200&&!I?(M(!0),L(eo),z(to)):window.pageYOffset<200&&I&&(M(!1),z(eo),L(to))}),300,{trailing:!0});return window.addEventListener("scroll",e),function(){window.removeEventListener("scroll",e)}}}),[y,Y,I]),!W&&o()("div",{},void 0,!V&&f.a.createElement("div",{className:Object(H.cx)(c()({},N,Y),Qa,no),ref:w},o()($t.a,{storyline:null==m||null===(t=m.storylines)||void 0===t||null===(n=t[0])||void 0===n?void 0:n.storyline,uriOfActiveMenuLink:null==m?void 0:m.uri,parentUri:null==m?void 0:m.uri,article:m,pageType:m.__typename,region:ot.a.TOP_BANNER,ruleName:null==m||null===(i=m.storylines)||void 0===i||null===(a=i[0])||void 0===a?void 0:a.ruleName,testName:null==m||null===(r=m.storylines)||void 0===r||null===(l=r[0])||void 0===l?void 0:l.testName,showLiveBreakoutMenu:!0,storylineMenuBlockRef:v})),!G&&f.a.createElement("div",{className:Object(H.cx)(c()(c()({},$a,Y),B,Y),Qa),ref:b},o()("style",{dangerouslySetInnerHTML:{__html:"#masthead-section-label, #masthead-bar-one { display: none }"}}),o()(Ja.a,{HomepageLink:o()(Ka.a,{parentUri:null==m?void 0:m.uri,pageType:m.__typename,region:ot.a.TOP_BANNER,ruleName:null==m||null===(u=m.storylines)||void 0===u||null===(d=u[0])||void 0===d?void 0:d.ruleName}),showLiveBreakoutMenu:I,article:m})))}io.displayName="StorytellingNav",io.defaultProps={storylineMenuBlockRef:null,liveMenuRef:null};var ao=io,oo=n("06b3"),ro=n("XnIf"),so=n("rWB7"),lo=n("XMyW"),co=n("kBkf"),uo=n("KRMk"),po=n("gxa1"),fo=n("msCe");function mo(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function ho(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?mo(Object(n),!0).forEach((function(t){c()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):mo(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var go=["1_xpn_in_story","2_xpn_hamburger"];function yo(e){var t=e.regionForTracking,n=e.inStoryMode,i=Object(g.a)(),a=Object(so.b)(),r=Object(C.useLocation)(),l=Object(A.b)(r),c=Object(b.useTracking)({eventData:{pagetype:"story"},module:{context:"standard",region:"masthead"}}),u="CANADA"===l?lo.caData:"INTL"===l?co.internationalData:uo.usData,d=Object(p.useState)(!1),f=s()(d,2),m=f[0],h=f[1],y=Object(p.useState)(null),v=s()(y,2),_=v[0],w=v[1],x=Object(p.useRef)(null),k=Object(p.useRef)(null),O=Object(p.useRef)({}),T=Object(p.useRef)({});Object(p.useEffect)((function(){var e,t,n;i&&null!=i&&null!==(e=i.SJ_xpn_standard_story_0424)&&void 0!==e&&e.allocated&&null!=i&&null!==(t=i.SJ_xpn_standard_story_0424)&&void 0!==t&&t.variant&&go.includes(null==i||null===(n=i.SJ_xpn_standard_story_0424)||void 0===n?void 0:n.variant)&&h(!0)}),[i]);var E=function(e){return e.toLowerCase().split(" ").join("-")},S={event:"moduleInteraction",eventData:{trigger:"module",type:"click"},module:{name:"nested-navigation",label:"masthead-navigation",region:t}},P=function(e){window.location.assign(e)},I=function(e){x.current&&(clearTimeout(x.current),x.current=null);var i=e.currentTarget.dataset.navid,a=setTimeout((function(){w(i);var e={event:"impression",module:{name:E("".concat(i,"-nested-navigation")),label:E("".concat(i,"-masthead-nested-navigation")),region:t}};n||O.current[i]||(O.current[i]=!0,c.trackEvent(e)),n&&!T.current[i]&&(T.current[i]=!0,c.trackEvent(e))}),200);k.current=a},M=function(e){if("ArrowDown"===e.key||" "===e.key){e.preventDefault(),I(e);var t=e.currentTarget.nextSibling.getElementsByTagName("a")[0];setTimeout((function(){return t.focus()}),200)}else if("Enter"===e.key||"Control"===e.key||"Alt"===e.key||"Shift"===e.key){I(e);var n=e.currentTarget.nextSibling.getElementsByTagName("a")[0];setTimeout((function(){return n.focus()}),200)}};return o()("nav",{"aria-label":"Main"},void 0,o()("ul",{className:Object(H.cx)(po.d,po.c)},void 0,u.map((function(e){return o()("li",{className:po.f,"data-testid":"nav-item-".concat(e.name),"data-navid":e.name,onMouseEnter:function(e){return I(e)},onMouseLeave:function(e){return function(){k.current&&(clearTimeout(k.current),k.current=null);var e=setTimeout((function(){w(null)}),400);x.current=e}()}},e.name,!m&&o()("span",{className:po.g},void 0,e.name),m&&o()("a",{href:e.url,className:po.g,"data-navid":e.name,onClick:function(t){return function(e,t,n){e.preventDefault();var i=S;i.module.element={name:E("go-to-".concat(n)),label:E("clicked-".concat(n)),url:t},c.trackEvent(ho(ho({},i),{},{eventCallback:P(t)}))}(t,e.url,e.name)},onKeyDown:function(t){return M(t,e.url,e.name)}},void 0,e.name),o()("button",{type:"button","aria-label":"open ".concat(e.name," submenu"),"data-navid":e.name,className:po.b,onClick:function(e){return I(e)},onKeyDown:function(e){return M(e)}},void 0,o()(ro.a,{className:po.a,fill:"#979797"})),a&&u&&o()(fo.a,{dropdownData:e.dropdown,isFloatingNav:!0,item:e,setVisibleNestedNav:w,visibleNestedNav:_,regionForTracking:t,pagetype:"story",isFullWidth:!0}))}))))}yo.displayName="StandardStoryXPN";var vo,bo=Object(I.a)(yo),_o=n("5RvE"),wo=n("whi5"),xo=n("rXW3"),ko=n("z9xE"),Oo=n("WPRB"),To=n("g+Cy"),Co=n("bFSk"),Eo=Object(H.css)("width:25px;height:25px;",q.a.button.transparent," padding:10px;"),So=Object(H.css)("height:55px;align-items:center;justify-content:center;background:none;display:none;",q.a.breakpoint.large,"{display:flex;margin-left:10px;}");function Po(e){var t=e.pageType,n=e.region,i=e.ruleName,a=e.parentUri,r=e.template,s=Object(j.d)(),l="https://www.nytimes.com".concat(s),c=Object(Co.a)({name:i,template:r,region:n,parentUri:a,pageType:t}),u=Object(p.useMemo)((function(){return c.trackImpression()}),[c]),d=Object(p.useMemo)((function(){return c.trackInteraction()}),[c]);return o()("span",{className:So},void 0,o()(Ta.InView,{as:"a",onChange:function(e){e&&u({event:"impression",card:{url:l}})},triggerOnce:!0,href:s,"data-testid":"tlogo-home-link","aria-label":"The New York Times Home Page",onClick:function(e){d(e,s,{eventData:{type:"url-click",trigger:"item"},item:{url:l,uri:null}})}},void 0,vo||(vo=o()(To.a,{className:Eo}))))}Po.displayName="XPNHomepageLink";var Io,Mo=Object(H.css)("display:flex;align-items:center;background:",O.color.background.elevated,";border-bottom:1px solid ",O.color.stroke.quaternary,";height:52px;position:relative;width:100%;justify-content:center;",q.a.printHide),Ao=Object(H.css)(".SJ_xpn_standard_story_0424-1_xpn_in_story &{@media (min-width:1340px){justify-content:space-between;}}.SJ_xpn_standard_story_0424-2_xpn_hamburger &{justify-content:center;}"),jo=Object(H.css)("display:none;.SJ_xpn_standard_story_0424-1_xpn_in_story &,.SJ_xpn_standard_story_0424-2_xpn_hamburger &{",q.a.breakpoint.mediumLarge,"{display:block;}}"),No=Object(H.css)("display:flex;align-items:center;justify-content:center;.SJ_xpn_standard_story_0424-1_xpn_in_story &{position:absolute;left:0;@media (min-width:1340px){position:relative;left:unset;}}.SJ_xpn_standard_story_0424-2_xpn_hamburger &{position:absolute;left:0;}"),Lo=Object(H.css)("background:",q.a.color.white,";display:flex;padding:10px;margin-left:5px;&:hover{",q.a.button.transparent," padding:10px;}"),Do=Object(H.css)("margin-left:10px;font-size:12px;"),Ro=Object(H.css)("margin-top:-2px;"),Bo=Object(H.css)(".SJ_xpn_standard_story_0424-2_xpn_hamburger &{position:absolute;right:20px;}.SJ_xpn_standard_story_0424-1_xpn_in_story &{position:absolute;right:20px;@media (min-width:1340px){margin-right:20px;position:relative;right:unset;}}");function zo(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function Fo(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?zo(Object(n),!0).forEach((function(t){c()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):zo(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Uo=tt()((function(){return n.e(107).then(n.bind(null,"1Oh1"))}),{loadableGenerated:{webpack:function(){return["1Oh1"]},modules:["shared/Masthead/HamburgerDrawer"]}}),Ho=tt()((function(){return Promise.resolve().then(n.bind(null,"KRMk")).then((function(e){return e.UsDataProvider}))}),{loadableGenerated:{webpack:function(){return["KRMk"]},modules:["shared/Masthead/NestedNav/Data/us"]}}),Wo=tt()((function(){return Promise.resolve().then(n.bind(null,"XMyW")).then((function(e){return e.CaDataProvider}))}),{loadableGenerated:{webpack:function(){return["XMyW"]},modules:["shared/Masthead/NestedNav/Data/ca"]}}),qo=tt()((function(){return Promise.resolve().then(n.bind(null,"kBkf")).then((function(e){return e.IntDataProvider}))}),{loadableGenerated:{webpack:function(){return["kBkf"]},modules:["shared/Masthead/NestedNav/Data/international"]}}),Vo=["1_xpn_in_story","2_xpn_hamburger"];function Go(e){var t,n=e.article,i=e.hasFullBleedHeader,a=Object(b.useTracking)({eventData:{pageType:"article"},module:{name:"nested-navigation",context:"standard",region:"body"}}).trackEvent,r=Object(H.useTheme)(),l=Object(p.useRef)(),u=Object(p.useRef)(),d=Object(p.useRef)({initial:!1,resizeToLarge:!1}),m=Object(Ta.useInView)({threshold:0}),h=m.ref,y=m.inView,v=Object(C.useLocation)(),_=Object(A.b)(v),w=Object(p.useState)(!1),x=s()(w,2),k=x[0],O=x[1];t="CANADA"===_||oo.a.load("NYT-Edition")===j.a.CA.value?Wo:"INTL"===_||oo.a.load("NYT-Edition")===j.a.INT.value?qo:Ho;var T=Object(p.useState)({shouldShowMenuButton:!1,shouldShowSection:!1,shouldShowXPN:!0,shouldShowSuperT:!1,shouldShowNameplate:!1,shouldShowSharetools:!1}),E=s()(T,2),S=E[0],P=E[1],I=Object(g.a)(),M=Object(wo.a)().width,N=Object(p.useState)(!1),L=s()(N,2),D=L[0],R=L[1],B=Object(p.useState)(!1),z=s()(B,2),F=z[0],U=z[1];Object(p.useEffect)((function(){var e,t;!I||null!=I&&I.SJ_xpn_standard_story_0424||R(!0),(window&&!window.matchMedia("(min-width: 1024px)").matches||I&&null!=I&&null!==(e=I.SJ_xpn_standard_story_0424)&&void 0!==e&&e.variant&&!Vo.includes(null==I||null===(t=I.SJ_xpn_standard_story_0424)||void 0===t?void 0:t.variant))&&R(!0)}),[I]),Object(p.useEffect)((function(){var e,t,n=I&&(null==I||null===(e=I.SJ_xpn_standard_story_0424)||void 0===e?void 0:e.allocated)&&Vo.includes(null==I||null===(t=I.SJ_xpn_standard_story_0424)||void 0===t?void 0:t.variant)&&window&&window.matchMedia("(min-width: 1024px)").matches;if(!n||!i){var a;if(n&&!a&&!i){var o,r,s,c=null===(o=window)||void 0===o||null===(r=o.document)||void 0===r||null===(s=r.querySelector('[data-testid="masthead-container"]'))||void 0===s?void 0:s.offsetHeight,u={rootMargin:"-".concat(c,"px"),threshold:.25};(a=new IntersectionObserver((function(e){e.forEach((function(e){e.intersectionRatio<.25?U(!0):U(!1)}))}),u)).observe(l.current)}return function(){a&&a.disconnect()}}U(!0)}),[I,i]),Object(p.useEffect)((function(){var e,t,n,i,o;if(I&&null!==(e=I.SJ_xpn_standard_story_0424)&&void 0!==e&&e.allocated&&Vo.includes(I.SJ_xpn_standard_story_0424.variant)){var r=function(e){a({event:"impression",module:{name:"nested-navigation",label:"masthead-nested-navigation",region:e}})};d.current.initial||(d.current.initial=!0,r("masthead")),null!=I&&null!==(t=I.SJ_xpn_standard_story_0424)&&void 0!==t&&t.variant&&"1_xpn_in_story"===(null==I||null===(n=I.SJ_xpn_standard_story_0424)||void 0===n?void 0:n.variant)?F?M&&M>=1340?(d.current.resizeToLarge||(d.current.resizeToLarge=!0,r("body-large")),P({shouldShowSuperT:!0,shouldShowMenuButton:!1,shouldShowSection:!1,shouldShowXPN:!0,shouldShowNameplate:!1,shouldShowSharetools:!0})):P({shouldShowSuperT:!1,shouldShowMenuButton:!0,shouldShowSection:!1,shouldShowXPN:!1,shouldShowNameplate:!0,shouldShowSharetools:!0}):P({shouldShowSuperT:!1,shouldShowMenuButton:!1,shouldShowSection:!1,shouldShowXPN:!0,shouldShowNameplate:!1,shouldShowSharetools:!1}):null!=I&&null!==(i=I.SJ_xpn_standard_story_0424)&&void 0!==i&&i.variant&&"2_xpn_hamburger"===(null==I||null===(o=I.SJ_xpn_standard_story_0424)||void 0===o?void 0:o.variant)&&P(F?{shouldShowSuperT:!1,shouldShowMenuButton:!0,shouldShowSection:!0,shouldShowXPN:!1,shouldShowNameplate:!0,shouldShowSharetools:!0}:{shouldShowSuperT:!1,shouldShowMenuButton:!1,shouldShowSection:!1,shouldShowXPN:!0,shouldShowNameplate:!1,shouldShowSharetools:!1})}}),[I,F,M,a]),Object(p.useEffect)((function(){y&&a({event:"impression",module:{label:"hamburger-nested-navigation"}})}),[y,a]);var W,q,V=function(e){return e.toLowerCase().split(" ").join("-")},G=function(e){window.location.assign(e)};return!D&&(r.subsectionDisplayName?(W=r.subsectionDisplayName,q=r.subsectionUrl||r.sectionUrl):(W=r.sectionDisplayName,q=r.sectionUrl),q.length>0&&"/"===q.charAt(0)&&(q="https://www.nytimes.com".concat(q)),"todays-new-york-times"===r.slug&&(q="https://www.nytimes.com/section/todayspaper"),"todays-new-york-times-international-edition"===r.slug&&(q="https://www.nytimes.com/international/",W="The New York Times International"),"sunday review"===W.toLowerCase()&&(W="Sunday Opinion"),f.a.createElement("div",{className:Object(H.cx)(jo),ref:l},o()("div",{className:Object(H.cx)(Mo,c()({},Ao,F))},void 0,S.shouldShowSuperT&&o()("div",{className:No},void 0,o()(Po,{region:ot.a.TOP_BANNER,parentUri:null==n?void 0:n.uri,ruleName:"nested-navigation-supert",pageType:n.__typename,template:""})),S.shouldShowMenuButton&&o()("div",{className:No},void 0,f.a.createElement("button",{type:"button",className:Lo,"aria-label":"open navigation menu",onClick:function(){return O(!0),void a({event:"moduleInteraction",eventData:{pageType:"article",trigger:"module",type:"click"},module:{label:"hamburger-nested-navigation",element:{name:"expand-hamburger-navigation",label:"clicked-expand-hamburger-navigation"}}})},ref:h},Io||(Io=o()(jt.MenuIcon,{size:24,"aria-label":"Menu"}))),W&&q&&S.shouldShowSection&&o()("a",{href:r.sectionUrl,className:Object(H.cx)(_o.b,Do),onClick:function(e){!function(e,t,n){e.preventDefault();var i={event:"moduleInteraction",eventData:{trigger:"module",type:"click"},module:{name:"section-navigation",region:"body",context:"navigation",label:"Section Menu",element:{name:V("go-to-".concat(n)),label:V("clicked-".concat(n)),url:t}}};a(Fo(Fo({},i),{},{eventCallback:G(t)}))}(e,r.sectionUrl,r.sectionDisplayName)}},void 0,r.sectionDisplayName)),S.shouldShowXPN&&f.a.createElement("div",{ref:u},o()(bo,{regionForTracking:"".concat(F?"body":"masthead","-").concat(M>=1340?"large":"small"),inStoryMode:!0})),S.shouldShowNameplate&&o()(xo.a,{className:Ro}),S.shouldShowSharetools&&o()("div",{className:Bo},void 0,o()(hi.a,{className:ko.m,share:n,position:Oo.a.INSTORYMASTHEAD,suppressGiftArticleTooltip:!0,tooltipAlign:"right"}))),k&&o()(t,{},void 0,o()(Uo,{onClose:function(){return O(!1)}}))))}Go.displayName="XPNStandardStorytellingNav",Go.defaultProps={};var Yo=Go,Xo=(n("ZjMX"),n("wYzE")),Zo=n("MEHp"),Jo=n("bLpx"),Ko=function(e){var t=Object(so.b)(),n=Object(Jo.a)("bottomsheet"),i=Object(b.useTracking)().trackEvent,a=Object(p.useRef)(!1),o=Object(Zo.e)({article:e,isBrowser:t,targeting:n,messageName:"SUBSCRIBER_RECIRCULATION"});return Object(p.useEffect)((function(){var e=n.loading,t=void 0===e||e,o=n.error;t||(void 0===o||o)||!1!==a.current||(i({event:"impression",eventData:{pagetype:"article",trigger:"module"},module:{name:"bottom-sheet",context:"targeting",region:"dock"},asset:JSON.stringify(n)}),a.current=!0)}),[n,i]),!!function(e){if(e){var t=w.a.parse(window.location.search);if(t["test-drawer"])return"BottomSheetSub"===t["test-drawer"]}return!1}(t)||o},$o=n("gojR"),Qo=n("Tonn"),er=function(){var e,t,n,i,a=(e=Object(he.a)(),t=Object(C.useLocation)(),n=Object(_.parse)(t.search),function(){return Object(D.d)(n)||e||Object(Qo.a)(e,t.pathname)||Object(Mt.d)()}),o=(i=Object(_i.a)().overlays.dock,function(){return i.exists&&(!i.ready||i.visible)});return function(){var e=a(),t=o();return!e&&!t}},tr=function(){var e=Object(_i.a)(),t=e.registerOverlay,n=e.setVisibility,i=e.overlays.bottomsheet,a=er();return Object(p.useEffect)((function(){t("bottomsheet")}),[]),{visible:null==i?void 0:i.visible,setVisible:function(e){var t=a(),o=!!e&&t;i.visible!==o&&n("bottomsheet",o)}}},nr=n("vAfh"),ir=tt()((function(){return Promise.all([n.e(18),n.e(156)]).then(n.bind(null,"ys60"))}),{loadableGenerated:{webpack:function(){return["ys60"]},modules:["shared/BottomSheet/Recirculation"]}}),ar=function(e){var t=e.article,n=Object(p.useState)(null),i=s()(n,2),a=i[0],r=i[1],l=Object(p.useState)(!1),c=s()(l,2),u=c[0],d=c[1],f=tr(),m=f.visible,h=f.setVisible,g=Ko(t),y=Object($o.a)(t),v=y.isInVariant,b=y.isInControl;return Object(p.useEffect)((function(){null===a&&(g&&(r(nr.b),h(!0)),v&&(r(nr.a),h(!0)))}),[v,g,h,a]),Object(p.useEffect)((function(){if(!u&&(v||b)){var e=b?"0_control":null;(function(e,t){var n,i,a,o,r,s;if("undefined"!=typeof window&&null!=t){var l=(null===(n=window)||void 0===n||null===(i=n.NYTD)||void 0===i||null===(a=i.Abra)||void 0===a?void 0:a.integration)||"",c=(null===(o=window)||void 0===o||null===(r=o.NYTD)||void 0===r||null===(s=r.Abra)||void 0===s?void 0:s.version)||"";Object(Xo.a)({event:"ab-expose",abtest:{test:e,variant:t,config_ver:c,integration:l}},{individualEvents:!0})}})("SJ_regi_bottom_sheet_1223",e=v?"1_bottom":e),d(!0)}}),[u,v,b]),a&&m?o()(ir,{article:t,type:a}):null};ar.defaultProps={article:void 0};var or=Object(I.a)(ar),rr=n("FSO8"),sr=n("GR2s"),lr=n("rONy");function cr(e,t){var n,i=Object(M.a)().user,a=Object(p.useState)(!1),o=s()(a,2),r=o[0],l=o[1],c=Object(p.useState)(""),u=s()(c,2),d=u[0],f=u[1],m=(n=i)&&Object(N.d)(n)?Object(N.f)(n)?"sub":"regi":"anon",h=Object(p.useMemo)((function(){return Object.keys(e)}),[e]),g=Object(p.useMemo)((function(){return function(e,t){var n=e.filter((function(e){return e.includes(t.toUpperCase())}));return n.length?n:e}(h,m)}),[h,m]),y=t.requireThreshold,v=t.hasMetThreshold,b=Object(p.useCallback)((function(){var e,n,i=null==t?void 0:t.articleType.split(/\s+/).join("-"),a=null===oo.a||void 0===oo.a?void 0:oo.a.load("nyt-a"),o={userType:m,agentId:a,desk:t.desk,section:t.articleSection,pageviewID:null!==(e=window)&&void 0!==e&&e.nyt_et&&null!==(n=window)&&void 0!==n&&n.nyt_et.get_pageview_id?window.nyt_et.get_pageview_id():"",slug:t.slug,referrerPage:t.url,device:t.deviceType,pgtime:t.timeRead,storylines:t.storylinesOnPage,assocAsset:t.assetsOnPage,assocNewsletter:t.associatedNewsletter,interactives:t.interactivesOnPage,articleType:i};window.Iterate("identify",m,o)}),[t,m]);Object(p.useEffect)((function(){Object(lr.a)((function(){if(null!=g&&g.length&&(!y||v)){var t=s()(g,1)[0];f(e[t]),d&&!r&&(window.Iterate("install",d),l(!0),b())}}))}),[i,e,g,t,r,v,y,d,b])}var ur,dr=n("qs2k"),pr=n("yQsP"),fr=n("74vb"),mr=n.n(fr);function hr(e){var t=e.article,n=Object(b.useTracking)().trackEvent,i=Object($.a)().deviceType;return o()(mr.a,{article:t,deviceType:i,trackClick:function(e){n({event:"moduleInteraction",eventData:{pagetype:"article",trigger:"module",type:"click"},module:{name:"review",context:"",label:"",region:"review-footer",element:{name:"restaurant"===e?"reserve-a-table":"find-tickets",label:"restaurant"===e?"Reserve A Table":"Find Tickets",url:""}}})},trackCall:function(){n({event:"moduleInteraction",eventData:{pagetype:"article",trigger:"module",type:"click"},module:{name:"review",context:"",label:"",region:"review-footer",element:{name:"call",label:"Call",url:""}}})}})}hr.displayName="ReviewFooter",hr.fragments={article:h()(ur||(ur=d()(["\n    fragment ReviewFooter_article on Article {\n      id\n      compatibility {\n        isDiningReview\n        isMovieReview\n      }\n      reviewItems {\n        overrideLabel\n        isCriticsPick\n        subject {\n          __typename\n          ... on Restaurant {\n            id\n            name\n            contactDetails {\n              addresses {\n                crossStreet\n                neighborhood\n                address {\n                  streetAddress\n                }\n              }\n              phoneNumbers {\n                type\n                number\n              }\n            }\n            accessibilityDescription\n            takesReservations\n            reservationsUrl\n            reservationsNote\n            rating\n            atmosphere\n            openStatus\n            priceCategory\n            wineList\n            recommendedDishes\n            soundLevel\n            alcoholDescription\n            openHours\n            coordinates {\n              latitude\n              longitude\n            }\n            website\n            lastModified\n            singlePlatformId\n          }\n          ... on Movie {\n            title\n            movieRating: rating\n            runtimeUS\n            ticketUrl\n            directors\n            writers\n            genres\n            movieCast: cast {\n              actor\n            }\n            imdbId\n          }\n        }\n      }\n    }\n  "])))};var gr,yr=hr,vr=n("t0IW"),br=n("qp0C"),_r=n.n(br),wr=Object(H.themeFn)("treatment",{none:Object(H.css)("font-family:",q.a.font.franklinBase,";"),magazine:Object(H.css)("font-family:",q.a.font.magazineSansBase,";")}),xr=Object(H.styled)("div",{target:"e9ne27s0"})(wr,";color:",O.color.content.secondary,";font-weight:",q.a.font.weight.medium,";font-size:",_r.a.size(13),";line-height:",_r.a.size(18),";border-top:1px solid ",O.color.stroke.quaternary,";margin:20px auto;padding-top:15px;width:",q.a.breakpoint.mobileFullWidth,";",q.a.breakpoint.medium,"{width:100%;max-width:",q.a.breakpoint.textBodyWidth,"px;}> a{text-decoration:underline;text-decoration-thickness:1px;text-underline-offset:2px;color:",O.color.content.secondary,";}> a:hover,> a:focus{text-decoration:none;}",q.a.printHide,";"),kr=function(e,t){if(e.includes("/section/")){if(t===j.a.CA.value){var n="/"===j.a.CA.path.slice(-1)?j.a.CA.path.slice(0,-1):j.a.CA.path;return Object(vr.b)(e,n)}if(t===j.a.INT.value){var i="/"===j.a.INT.path.slice(-1)?j.a.INT.path.slice(0,-1):j.a.INT.path;return Object(vr.b)(e,i)}}return e};function Or(e){var t,n,i,a,r=e.data,l=Object(H.useTheme)(),c=Object(b.useTracking)().trackEvent,u=Object(C.useLocation)(),d=Object(p.useState)(!1),f=s()(d,2),m=f[0],h=f[1],g=oo.a.load("NYT-Edition"),y="TRAGEDY"===(null==r||null===(t=r.advertisingProperties)||void 0===t?void 0:t.sensitivity),v=(null==l||null===(n=l.language)||void 0===n?void 0:n.toLowerCase().substring(0,2))||(null!==(i=u.pathname)&&void 0!==i&&i.startsWith("/es/")?"es":"en"),_=!y&&!Object(Gn.isOpinion)(null==l?void 0:l.section)&&(null==r||null===(a=r.timesTags)||void 0===a?void 0:a.length),w=Object(p.useMemo)((function(){return _?function(e,t,n){if(null==e||!e.length||!t)return null;for(var i=[],a=0;a<e.length;a+=1){for(var o=0;o<(null===(r=e[a].associatedLegacyCollections)||void 0===r?void 0:r.length);o+=1){var r,s,l;if(((null===(s=e[a].associatedLegacyCollections[o].language)||void 0===s||null===(l=s.code)||void 0===l?void 0:l.substring(0,2).toLowerCase())||(e[a].associatedLegacyCollections[o].url.includes("nytimes.com/es/")?"es":"en"))===t){var c,u="en"===t&&n!==j.a.US.value?kr(e[a].associatedLegacyCollections[o].url,n):e[a].associatedLegacyCollections[o].url;i.push({url:u,name:(null===(c=e[a].associatedLegacyCollections[o].headline)||void 0===c?void 0:c.default)||e[a].associatedLegacyCollections[o].name});break}}if(i.length>=6)break}return i}(null==r?void 0:r.timesTags,v,g):null}),[null==r?void 0:r.timesTags,v,g,_]);if(Object(p.useEffect)((function(){null!=w&&w.length&&_&&!m&&(c({event:"impression",module:{name:"times-tags-bar"}}),h(!0))}),[w,c,_,m]),null==w||!w.length||!_)return null;return o()(xr,{},void 0,"es"===v?"Lee más en: ":"See more on: ",w.map((function(e){return o()("a",{href:e.url,onClick:(t=e.url,n=e.name,function(){return c({event:"moduleInteraction",eventData:{type:"click"},module:{name:"times-tags-bar",element:{url:t,name:n}}})})},e.url,e.name);var t,n})).reduce((function(e,t){return[e,", ",t]})))}Or.displayName="TimesTagsBar",Or.fragments={data:h()(gr||(gr=d()(["\n    fragment TimesTagsBar_asset on CreativeWork {\n      advertisingProperties {\n        sensitivity\n      }\n      timesTags @filterEmpty {\n        associatedLegacyCollections @filterEmpty {\n          id\n          url\n          name\n          language {\n            code\n          }\n          headline {\n            default\n          }\n        }\n      }\n    }\n  "])))};var Tr,Cr=Or,Er=n("icOM"),Sr=n.n(Er),Pr=n("bFGc"),Ir=n.n(Pr),Mr=Object(H.css)("margin-left:20px;margin-right:20px;",q.a.breakpoint.small,"{width:",q.a.breakpoint.mobileFullWidth,";max-width:",q.a.breakpoint.textBodyWidth,"px;margin:1rem auto 1em;}",q.a.print,";"),Ar=function(e){var t,n,i,a=e.data,r=a||{},s=r.section,l=r.subsection,c=null==s||null===(t=s.name)||void 0===t?void 0:t.toLowerCase(),u=null==l||null===(n=l.name)||void 0===n?void 0:n.toLowerCase(),d="opinion"===c||"espanol"===c&&"opinion"===u;return(null==a||null===(i=a.bylines)||void 0===i?void 0:i.length)>0&&o()("div",{className:Mr},void 0,function(e,t){var n=0;return e.map((function(e){return e&&e.creators&&e.creators.length>0?e.creators.map((function(e){var i=null,a=null;if(e.contactDetails&&e.contactDetails.socialMedia&&e.contactDetails.socialMedia.map((function(e){return"twitter"===e.type?i=e.account:"facebook"===e.type&&(a=e.account),!0})),e.legacyData&&e.legacyData.htmlShortBiography){var r=t?o()(Ir.a,{htmlShortBiography:e.legacyData.htmlShortBiography,twitter:i,facebook:a},n):o()(Sr.a,{bio:e},n);return n+=1,r}return null})):null}))}(a.bylines,d))};Ar.fragments={data:h()(Tr||(Tr=d()(["\n    fragment Bio_data on CreativeWork {\n      bylines {\n        creators {\n          ... on Person {\n            id\n            bioUrl\n            contactDetails {\n              socialMedia {\n                type\n                account\n              }\n            }\n            displayName\n            legacyData {\n              htmlShortBiography\n            }\n          }\n        }\n      }\n      section {\n        id\n        name\n      }\n      subsection {\n        id\n        name\n      }\n    }\n  "])))},Ar.defaultProps={data:null};var jr,Nr=Ar,Lr=n("4GNh"),Dr=n("nxVm"),Rr=n.n(Dr),Br=Object(H.css)("font-family:",q.a.font.franklinBase,";font-size:",q.a.font.size(14),";line-height:",q.a.font.size(20),";color:",q.a.color.gray20,";margin:2rem auto 1rem;width:",q.a.breakpoint.mobileFullWidth,";max-width:",q.a.breakpoint.textBodyWidth,"px;p{margin-bottom:1rem;}a{text-decoration:underline;text-decoration-color:",q.a.color.gray50,";}a:hover,a:focus{color:",q.a.color.gray30,";text-decoration:none;}em{font-style:italic;}strong{font-weight:bold;}",q.a.breakpoint.medium,"{font-size:",q.a.font.size(15),";line-height:",q.a.font.size(22),";a{text-decoration:none;border-bottom:1px solid ",q.a.color.gray50,";}a:hover,a:focus{color:",q.a.color.gray30,";border-bottom:1px solid ",q.a.color.white,";}}",q.a.breakpoint.extraLarge,"{width:",q.a.breakpoint.textBodyWidthExtralarge,"px;max-width:",q.a.breakpoint.textBodyWidthExtralarge,"px;}",Rr.a,";"),zr=function(e){var t,n=e.data,i=e.suppressInfobox;if(!n||!n.legacy||""===n.legacy.htmlExtendedAuthorOrArticleInformation&&""===n.legacy.htmlInfoBox||i&&""===n.legacy.htmlExtendedAuthorOrArticleInformation||null!==(t=n.compatibility)&&void 0!==t&&t.isOak)return null;var a="".concat(n.legacy.htmlExtendedAuthorOrArticleInformation).concat(i?"":" ".concat(n.legacy.htmlInfoBox));return o()("div",{className:Br,dangerouslySetInnerHTML:{__html:a}})};zr.displayName="ExtendedInformation",zr.fragments={data:h()(jr||(jr=d()(["\n    fragment ExtendedInformation_data on Article {\n      id\n      compatibility {\n        isOak\n      }\n      legacy {\n        htmlExtendedAuthorOrArticleInformation\n        htmlInfoBox\n      }\n    }\n  "])))},zr.defaultProps={data:void 0,suppressInfobox:!1};var Fr,Ur=zr,Hr=n("tqOg"),Wr=n.n(Hr),qr=Object(H.css)("width:",q.a.breakpoint.mobileFullWidth,";max-width:",q.a.breakpoint.textBodyWidth,"px;",q.a.breakpoint.extraLarge,"{width:",q.a.breakpoint.textBodyWidthExtralarge,"px;max-width:",q.a.breakpoint.textBodyWidthExtralarge,"px;}",Rr.a,";"),Vr=function(e){var t=e.data;if(!t||!t.legacy||!t.legacy.reviewInformation)return null;var n="".concat(t.legacy.reviewInformation);return o()(Wr.a,{html:n,className:qr})};Vr.displayName="ReviewInformation",Vr.defaultProps={data:void 0},Vr.fragments={data:h()(Fr||(Fr=d()(["\n    fragment ReviewInformation_data on Article {\n      id\n      legacy {\n        reviewInformation\n      }\n    }\n  "])))};var Gr,Yr=Vr,Xr=n("dlEz"),Zr=Object(H.css)("font-family:",q.a.font.franklinBase,";font-size:",q.a.font.size(13),";line-height:",q.a.font.size(18),";width:",q.a.breakpoint.mobileFullWidth,";max-width:",q.a.breakpoint.textBodyWidth,"px;margin:20px auto 1rem;color:#363636;border-top:1px solid #dfdfdf;padding-top:15px;a{color:#363636;text-decoration:underline;text-decoration-thickness:1px;text-underline-offset:2px;}a:hover{text-decoration:none;}",Rr.a,";@media print{span{display:none;}}"),Jr=Object(H.css)("font-weight:",q.a.font.weight.medium,";display:inline;"),Kr={ofTheSundayMagazine:" of the Sunday Magazine",oftheSundayBookReview:" of the Sunday Book Review",ofTMagazine:" of T Magazine",ofEducationLife:" of Education Life",oftheNewYorkEdition:" of the New York edition",oftheNationaledition:" of the National edition",inTheInternationalNewYorkTimes:" in The New York Times International Edition",inTheInternationalHeraldTribune:" in The International Herald Tribune",aVersionOf:"A version of this article appears in print on ",onPage:", Page ",onSection:", Section ",ofThe:void 0,withTheHeadline:" with the headline: ",links:'. <a href="https://www.parsintl.com/publication/the-new-york-times/">Order Reprints</a> | <a href="https://www.nytimes.com/section/todayspaper">Today’s Paper</a> | <a href="https://www.nytimes.com/subscriptions/Multiproduct/lp8HYKU.html?campaignId=48JQY">Subscribe</a>'},$r=function(e){var t,n=e.data;if(n&&n.printInformation&&n.printInformation.publicationDate&&(n.printInformation.section||n.printInformation.edition)&&"The New York Times on the Web"!==n.printInformation.edition&&n.source&&n.source.displayName){var i=n.source.displayName,a=n.printInformation,r=a.publicationDate,s=a.section,l=a.page,c=a.edition,u=a.headline,d=function(e,t,n){var i="",a=!0,o=!0;switch(e){case"MM":i=Kr.ofTheSundayMagazine,a=!1;break;case"BR":i=Kr.oftheSundayBookReview,a=!1;break;case"M2":i=Kr.ofTMagazine,a=!1;break;case"ED":i=Kr.ofEducationLife,a=!1;break;default:switch(i=function(e){return["NewYork","altNewYork","SundayAdvance","LongIsland","Westchester","Connecticut","NewJersey","ManhattanBronx","ZonedLI","ZonedWC","ZonedCN","ZonedNJ","ZonedJN","ZonedJC","ZonedMB","ZonedBC","DTNewYork","The New York Times on the Web"].includes(e)}(t)?Kr.oftheNewYorkEdition:Kr.oftheNationaledition,n){case"International New York Times":i=Kr.inTheInternationalNewYorkTimes,o=!1;break;case"Global":case"International Herald Tribune":i=Kr.inTheInternationalHeraldTribune,o=!1}}return{printEdition:i,showSection:a,showHeadline:o}}(s,c,i),p=d.printEdition,f=d.showSection,m=d.showHeadline;return o()("div",{className:Zr},void 0,Kr.aVersionOf,o()(Xr.a,{className:Jr,unix:(t=r,new Date(t).getTime()/1e3),formatter:"abbreviated-date"}),l&&f&&Kr.onSection,l&&f&&s,l&&Kr.onPage,l&&+l,Kr.ofThe,p,m&&u&&Kr.withTheHeadline,m&&u&&u,Object(A.a)(Kr.links))}return null};$r.defaultProps={data:void 0},$r.fragments={data:h()(Gr||(Gr=d()(["\n    fragment PrintInformation_data on Article {\n      id\n      source {\n        id\n        displayName\n      }\n      printInformation {\n        section\n        page\n        publicationDate\n        edition\n        headline @stripHtml\n      }\n    }\n  "])))};var Qr,es=$r;function ts(e){var t=e.offsetHeight,n=getComputedStyle(e);return t+=parseInt(n.marginTop,10)+parseInt(n.marginBottom,10)}function ns(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function is(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ns(Object(n),!0).forEach((function(t){c()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ns(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var as={event:"impression",module:{name:"article_complete",context:"",label:"",region:"article_complete"}};function os(e,t){return e.offsetTop+t.offsetTop}function rs(e){var t=function e(t,n){return(t.tagName||"").toLowerCase()===n?t:t.parentNode?e(t.parentNode,n):void 0}(e,"article")||{},n={top:t.offsetTop,height:ts(t)},i={top:os(t,e),height:ts(e)},a={scrollTop:Math.round(document.documentElement.scrollTop||document.body.scrollTop||0),height:Math.max(document.documentElement.clientHeight,window.innerHeight||0),width:Math.max(document.documentElement.clientWidth,window.innerWidth||0),documentHeight:Math.max(document.documentElement.scrollHeight||0),article:n,bottomOfArticle:i};return is(is({},as),{},{viewport:a})}function ss(e){var t,n=e.article,i=Object(b.useTracking)({module:{region:"footer"}}),a=i.Track,r=i.trackEvent,s=Object(p.useRef)(null),l=Object(p.useRef)(null),c=Object(p.useRef)(!1),u=function(){l.current=new IntersectionObserver((function(e){var t;!c.current&&e&&e[0]&&e[0].isIntersecting&&(c.current=!0,l.current.disconnect(),l.current=null,t=rs(s.current),r(t))}),{threshold:0}),l.current.observe(s.current)};if(Object(p.useEffect)((function(){return u(),function(){l.current&&(l.current.disconnect(),l.current=null)}}),[]),n){var d,m,h=function(e){var t=e.article,n=t&&t.reviewItems&&t.reviewItems.length>0;return!!(n&&t&&t.compatibility&&!t.compatibility.isArtReview&&!t.compatibility.isBookReview||n)}({article:n}),g=function(e){var t=e.article,n=t&&t.reviewItems&&t.reviewItems.length>0;return!!(n&&t&&t.compatibility&&(t.compatibility.isTheaterReview||t.compatibility.isDiningReview)||n)}({article:n}),y=n&&(null===(d=n.compatibility)||void 0===d?void 0:d.isOak)&&"es"!==(null===(m=n.language)||void 0===m?void 0:m.code);t=o()(a,{},void 0,o()(Yr,{data:n}),o()(Lr.a,{data:n}),h&&o()(yr,{article:n}),y&&o()(Nr,{data:n}),o()(Ur,{data:n,suppressInfobox:g}),o()(es,{data:n}),o()(Cr,{data:n}),o()(hi.a,{share:n,position:Oo.a.FOOTER,suppressGiftArticleTooltip:!0}))}else t=null;return f.a.createElement("div",{className:"bottom-of-article",ref:s},t)}ss.displayName="FooterBlock",ss.defaultProps={article:{}},ss.fragments={data:h()(Qr||(Qr=d()(["\n    fragment FooterBlock_data on Article {\n      id\n      compatibility {\n        isOak\n        isArtReview\n        isBookReview\n        isTheaterReview\n        isDiningReview\n      }\n      reviewItems {\n        __typename\n      }\n      section {\n        id\n        name\n      }\n      ...ReviewInformation_data\n      ...Addendum_data\n      ...ReviewFooter_article\n      ...Bio_data\n      ...ExtendedInformation_data\n      ...PrintInformation_data\n      ...ShareToolbar_share\n      ...TimesTagsBar_asset\n    }\n    ","\n    ","\n    ","\n    ","\n    ","\n    ","\n    ","\n    ","\n  "])),Yr.fragments.data,Lr.a.fragments.data,yr.fragments.article,Nr.fragments.data,Ur.fragments.data,es.fragments.data,hi.a.fragments.share,Cr.fragments.data)};var ls,cs=Object(I.a)(ss),us=q.a.color,ds=us.black,ps=us.gray60,fs=us.gray20,ms=us.gray45,hs=q.a.font,gs=hs.franklinBase,ys=hs.size,vs=hs.weight.medium,bs=Object(H.css)("font-family:",gs,";color:",fs,";max-width:300px;border-left:1px solid ",ps,";padding-left:15px;align-self:start;& >:not(:first-child){margin-top:10px;}"),_s=Object(H.css)("font-weight:",vs,";line-height:",ys(16),";font-size:",ys(13),";margin:0;",q.a.breakpoint.large,"{line-height:",ys(21),";font-size:",ys(15.5),";}"),ws=Object(H.css)("overflow:auto;& >:not(:last-child){margin-right:15px;}"),xs=Object(H.css)("display:flex;justify-content:space-between;flex-direction:column;",q.a.breakpoint.large,"{flex-direction:row;}"),ks=Object(H.css)("display:flex;justify-content:center;width:100%;border:1px solid ",ms,";border-radius:3px;padding:8px 0;transition:border 0.2s;:hover{border:1px solid ",ds,";}:not(:last-child){margin-right:15px;margin-bottom:7px;",q.a.breakpoint.large,"{margin-bottom:unset;}}"),Os=Object(H.css)("max-height:15px;"),Ts=function(e){return e.column&&e.column.tagline},Cs=function(e){return e.episodeProperties&&e.episodeProperties.linksLeadIn};function Es(e){var t=e.article,n=Object(b.useTracking)({event:"moduleInteraction",eventData:{trigger:"module",type:"click"},module:{name:"c-column"}}).trackEvent,i=Ts(t);if(!i)return null;var a=Cs(t),r=t.episodeProperties&&t.episodeProperties.links;return o()("div",{className:bs},void 0,o()("div",{className:ws},void 0,i&&o()("h3",{className:_s},void 0,i)),r&&a&&o()("h4",{className:_s},void 0,a),o()("div",{className:xs},void 0,r&&r.map((function(e){return o()("a",{className:ks,href:e.linkUrl,alt:e.platformName,target:"_blank",rel:"noopener noreferrer",onClick:function(){n({module:{element:{name:"network-link",label:e.platformName}}})}},e.linkUrl,o()("img",{className:Os,src:(t=e.image,null==t||null===(i=t.crops)||void 0===i||null===(a=i[0])||void 0===a||null===(r=a.renditions)||void 0===r||null===(s=r[0])||void 0===s?void 0:s.url),alt:"".concat(e.platformName," icon")}));var t,i,a,r,s}))))}Es.displayName="EpisodeCompanion",Es.fragments={data:h()(ls||(ls=d()(['\n    fragment EpisodeCompanion_article on Article {\n      id\n      episodeProperties {\n        linksLeadIn\n        links {\n          platformName\n          linkUrl\n          callToAction\n          image {\n            id\n            crops(renditionNames: "master180") {\n              name\n              renditions {\n                name\n                url\n              }\n            }\n          }\n        }\n      }\n    }\n  '])))},Es.defaultProps={article:{episodeProperties:{links:[]}}},Es.requirements={position:"first",minHeight:200,lazyLoad:!0,shouldComponentMount:function(e){return e&&Ts(e)&&Cs(e)}};var Ss,Ps=Object(I.a)(Es),Is=n("9i1U"),Ms=n("B2Q+"),As=n("hG4R"),js=n("RL9q"),Ns=n("5dFD"),Ls=n("4TXN"),Ds=n("SBGf"),Rs=Object(H.css)("height:100%;display:flex;flex-direction:row;"),Bs=Object(H.css)("font-family:",q.a.font.serifSmall,";font-weight:",q.a.font.weight.bold,";font-size:14px;line-height:17px;width:100%;color:",q.a.color.gray20,";border-bottom:1px solid ",q.a.color.gray60,";padding-bottom:16px;margin-bottom:0;",q.a.breakpoint.large,"{width:100%;font-weight:",q.a.font.weight.medium,";border-bottom:none;padding-bottom:0;margin:auto 0;}"),zs=Object(H.css)("display:none;",q.a.breakpoint.large,"{display:block;width:75px;margin-left:0;padding-bottom:7px;&:last-of-type{padding-bottom:0;}}"),Fs=Object(H.css)("margin-bottom:15px;&:last-of-type{border-bottom:none;}",q.a.breakpoint.large,"{.",zs," + .",Bs,"{width:calc(100% - 85px);margin:auto 0 auto 10px;}}"),Us=Object(H.css)("width:100%;display:block;position:relative;.",Fs,":last-child{margin-bottom:0;}.",Fs,":hover{.",Bs,"{text-decoration:underline;}}",q.a.breakpoint.mediumLarge,"{max-width:130px;}",q.a.breakpoint.large,"{max-width:210px;#pp_edpick-wrapper{margin-left:-9px;}}"),Hs=Object(H.css)("font-family:",q.a.font.franklinBase,";font-weight:",q.a.font.weight.bold,";color:",q.a.color.black,";border-bottom:1px solid ",q.a.color.gray60,";margin-top:0;margin-bottom:15px;padding-bottom:12px;font-size:14px;line-height:14px;letter-spacing:0.02em;"),Ws=Object(H.css)(Bs,";display:block;color:",q.a.color.opinionGray,";"),qs=function(e){var t,n=e.index,i=e.item,a=e.listUri,r=e.trackingParams,s=Object(js.a)(),l=Object(Ds.i)({cardId:null==i?void 0:i.sourceId,cardIndex:n,cardUrl:null==i?void 0:i.url,cardUri:null==i?void 0:i.uri,impId:s,listUri:a,packageLabel:"Editors' Picks",trackingName:"editors_picks_recirc",region:"ccolumn",trackingParams:r,type:"asset"}),c=Object(Wt.a)({threshold:.5,data:l}),u=c.isTracked,d=c.ref,p=Object(b.useTracking)().trackEvent;return f.a.createElement("article",{className:Fs,ref:u?null:d},o()(Ns.a,{className:Rs,link:i,onClick:function(){p(Object(Ds.j)({cardId:null==i?void 0:i.sourceId,cardIndex:n,cardUrl:null==i?void 0:i.url,cardUri:null==i?void 0:i.uri,packageLabel:"Editors' Picks",region:"ccolumn",trackingName:"editors_picks_recirc",trackingParams:r,type:"asset"}))}},void 0,i&&i.__typename&&i.promotionalMedia&&o()("div",{className:zs},void 0,o()(As.a,{media:"Image"===i.promotionalMedia.__typename?i.promotionalMedia:i.promotionalMedia.promotionalMedia,preferredCrop:"thumbLarge"})),o()("h3",{className:Bs},void 0,Object(Ls.c)(i)?Ss||(Ss=o()("span",{className:Ws},void 0,"Opinion")):null,null===(t=i.headline)||void 0===t?void 0:t.default)))};qs.displayName="EditorsPicksItem",qs.defaultProps={index:null,item:{},listUri:"",trackingParams:[]};var Vs,Gs,Ys,Xs=qs,Zs=function(e){if(!e)return!1;var t=e.node;if(!t)return!1;var n=t.headline,i=t.url;return!!n&&(!!i&&!!n.default)},Js=h()(Vs||(Vs=d()(["\n  query EditorsPicksCompanionPersonalizedQuery(\n    $listUri: PersonalizedListUri!\n    $numArticles: Int\n    $referrer: String\n    $originalReferrer: String\n    $deviceType: PersonalizationDeviceType!\n  ) {\n    lists {\n      editorsPicksList: personalizedList(\n        first: $numArticles\n        listUri: $listUri\n        personalizedListContext: {\n          referrer: $referrer\n          originalReferrer: $originalReferrer\n          deviceType: $deviceType\n          appType: WEB\n        }\n      ) {\n        ...Connection_pageInfo\n        totalCount\n        edges {\n          ... on PersonalizedItemsEdge {\n            trackingParams {\n              key\n              value\n            }\n            node {\n              __typename\n              ... on CreativeWork {\n                headline {\n                  default\n                }\n              }\n              ... on Published {\n                sourceId\n                url\n                uri\n              }\n              ... on Article {\n                id\n                section {\n                  id\n                  displayName\n                }\n              }\n              ... on Interactive {\n                id\n                section {\n                  id\n                  displayName\n                }\n              }\n              ... on HasPromotionalProperties {\n                promotionalMedia {\n                  __typename\n                  ...SpanImage_media\n                  ... on HasPromotionalProperties {\n                    promotionalMedia {\n                      ...SpanImage_media\n                    }\n                  }\n                }\n              }\n            }\n          }\n        }\n      }\n    }\n  }\n  ","\n  ","\n"])),As.a.fragments.media,Is.a);function Ks(){var e,t=Object(Qe.useQuery)(Js,{variables:{listUri:"nyt://per/personalized-list/home-featured",numArticles:3,referrer:window.location.href||null,originalReferrer:document.referrer||null,deviceType:"desktop"===Object(Ms.a)()?"DESKTOP":"MOBILE"},ssr:!1,fetchPolicy:"cache-first"}),n=t.loading,i=t.error,a=t.data;if(i){var r=new Error(i);return r.name="Error fetching editors picks companion column items",Object(At.a)(r),null}if(!a||n)return null;var s=a.lists,l=((null==s||null===(e=s.editorsPicksList)||void 0===e?void 0:e.edges)||[]).filter(Zs);return l&&l.length?o()("div",{id:"c-col-editors-picks",className:Us},void 0,Gs||(Gs=o()("h2",{className:Hs},void 0,"Editors’ Picks")),l.map((function(e,t){return o()(Xs,{index:t,item:e.node,listUri:"nyt://per/personalized-list/home-featured",trackingParams:e.trackingParams},"editors-pick-article-".concat(t.toString()))})),Ys||(Ys=o()(mi.a,{id:"pp_edpick"}))):null}Ks.displayName="EditorsPicksCompanion",Ks.requirements={position:"first",minHeight:500,lazyLoad:!0,appearAfterFirstAd:!0};var $s,Qs=Object(I.a)(Ks),el=[{name:"EpisodeCompanion",component:Ps,requirements:Ps.requirements},{name:"EditorsPicks",component:Qs,requirements:Qs.requirements}],tl=n("eCWu"),nl=function(e){var t=e.language;return!(!t||!t.code||"en-US"===t.code||"en"===t.code)};nl.fragments={article:h()($s||($s=d()(["\n    fragment isInternationalized_article on Article {\n      id\n      language {\n        code\n      }\n    }\n  "])))};var il,al,ol,rl,sl,ll,cl=nl,ul=Object(H.css)("&.Hybrid,html,body{width:100vw;margin:0;padding:0;overflow-y:visible;}&.Hybrid,html{font-size:100%;line-height:100%;touch-action:manipulation;box-sizing:border-box;}body{font-size:1rem;font-family:",q.a.font.serifBase,";text-size-adjust:100%;}@media only screen and (device-width:375px) and (device-height:812px) and (-webkit-device-pixel-ratio:3) and (orientation:landscape){.IOS body{margin-left:constant(safe-area-inset-left);margin-right:constant(safe-area-inset-right);}}-webkit-touch-callout:none;");function dl(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function pl(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?dl(Object(n),!0).forEach((function(t){c()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):dl(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var fl=function(e){if(!e)return"";return"".concat("nytimes://").concat(e.replace(/https?:\/\//,""))};function ml(e){var t=e.article,n=t.headline,i=t.type,a=t.typeOfMaterials,r=t.uri,s=t.url,l=t.language,c=Object(ee.a)(),u=c?ul:"",d=a||[],p=cl(t),f="";f=Array.from(document.documentElement.classList).join(" "),c&&(f+=" Hybrid");var m={};return/^es/.test(null==l?void 0:l.code)&&(m.isAccessibleForFree=!0),o()(tl.a,{asset:pl(pl({},t),m)},void 0,o()("html",{lang:(null==l?void 0:l.code)||"en",className:"".concat(f," ").concat("story nytapp-vi-article"," ").concat(u)}),o()("meta",{name:"PT",content:i}),o()("meta",{name:"PST",content:d.join(",")}),o()("meta",{name:"url",content:s}),il||(il=o()("meta",{name:"msapplication-starturl",content:"https://www.nytimes.com"})),!p&&o()("meta",{property:"al:android:url",content:r}),!p&&(al||(al=o()("meta",{property:"al:android:package",content:"com.nytimes.android"}))),!p&&o()("meta",{property:"al:android:app_name",content:"NYTimes"}),!p&&o()("meta",{name:"twitter:app:name:googleplay",content:"NYTimes"}),!p&&(ol||(ol=o()("meta",{name:"twitter:app:id:googleplay",content:"com.nytimes.android"}))),!p&&o()("meta",{name:"twitter:app:url:googleplay",content:r}),!p&&o()("meta",{property:"al:iphone:url",content:fl(s)}),!p&&(rl||(rl=o()("meta",{property:"al:iphone:app_store_id",content:"284862083"}))),!p&&o()("meta",{property:"al:iphone:app_name",content:"NYTimes"}),!p&&o()("meta",{property:"al:ipad:url",content:fl(s)}),!p&&(sl||(sl=o()("meta",{property:"al:ipad:app_store_id",content:"357066198"}))),!p&&o()("meta",{property:"al:ipad:app_name",content:"NYTimes"}),!p&&o()("link",{rel:"alternate",href:r}),o()("link",{rel:"alternate",type:"application/json+oembed",href:"https://www.nytimes.com/svc/oembed/json/?url=".concat(encodeURIComponent(s)),title:n.default}))}ml.displayName="ArticleHelmet",ml.fragments={article:h()(ll||(ll=d()(["\n    fragment ArticleHelmet_article on Article {\n      id\n      headline {\n        default\n      }\n      section {\n        id\n        displayName\n      }\n      subsection {\n        id\n        displayName\n      }\n      advertisingProperties {\n        sensitivity\n      }\n      collections @filterEmpty {\n        id\n        name\n        collectionType\n      }\n      desk\n      originalDesk\n      sourceId\n      type\n      typeOfMaterials\n      url\n      ...isInternationalized_article\n      ...AssetHelmet_asset\n      ...getTargetingParams_data\n    }\n    ","\n    ","\n  "])),cl.fragments.article,tl.a.fragments.asset)};var hl,gl,yl=ml,vl=Object(H.css)(".relatedcoverage + .recirculation{margin-top:20px;}.wrap + .recirculation{margin-top:20px;}");function bl(e){var t=e.edge,n=e.hasHeader,i=Object(b.useTracking)({module:{region:"header"}}).Track;return o()(C.Route,{render:function(e){var a=e.staticContext;return a&&(a.edge=t),o()(i,{},void 0,hl||(hl=o()(mi.a,{id:"top"})),!n&&(gl||(gl=o()(mi.a,{id:"sponsor",lazyLoad:!1,isPrioritized:!0}))))}})}bl.displayName="PageHeaderBlock",bl.defaultProps={edge:"",hasHeader:!1};var _l=bl,wl=n("huET"),xl=n("Bk96"),kl={"en-US":{showFullArticle:"Show Full Article"},es:{showFullArticle:"Ver el artículo completo"},"zh-hans":{showFullArticle:"阅读全文"},"zh-hant":{showFullArticle:"閱讀全文"}},Ol=function(e){var t=e.dismissTruncator,n=e.tracker,i=Object(H.useTheme)(),a=Object(A.c)(null==i?void 0:i.language),r=kl[a]||kl["en-US"];return o()("div",{className:xl.d},void 0,o()("button",{type:"button",className:xl.b,tabIndex:"0",onClick:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};n.trackInteraction(e,{name:"do-continue-reading"}),t()}},void 0,r.showFullArticle))};Ol.displayName="ACMContent";var Tl=Ol;function Cl(e){var t="SHOW_ADS"===(null==e?void 0:e.adSensitivity);return o()(wl.a,{messageId:"acm",Content:Tl,showAds:t,dismissTruncator:null==e?void 0:e.dismissTruncator})}Cl.displayName="ACM",Cl.threshold={dropzone:3},Cl.defaultProps={dismissTruncator:void 0,adSensitivity:void 0};var El=Cl,Sl=n("45t3"),Pl=n("s5tu"),Il={ACM:El,Optimistic:la.a};function Ml(e){var t=e.render,n=e.optimisticallyTruncated,i=Object(me.a)(),a=i.showGateway,r=i.meterReady,l=Object(K.a)(),c=l.optimisticTruncationDropzone,u=l.getReferrer,d=Object(p.useRef)(u()),f=Object(C.useLocation)(),m=Object(M.a)(),h=m.user,y=m.subscriptionDetails,v=m.error,b=Object(mt.a)(),_=Object(_i.a)(),x=Object($.a)(),k=x.deviceType,O=x.supportsTouch,T=Object(g.a)(),E=Object(p.useState)(null),S=s()(E,2),P=S[0],I=S[1],A=Object(p.useCallback)((function(){return null!==h&&null!==y&&null!==b&&null!==O&&!0===r}),[h,y,b,O,r]),j=Object(p.useCallback)((function(){var e,t,n=w.a.parse(f.search),i="nytvr"===n.referrer,a=void 0!==n.scooppreview,o=(null===(e=navigator)||void 0===e||null===(t=e.userAgent)||void 0===t?void 0:t.toLowerCase().indexOf("googlebot"))>-1,r=Object(D.d)(n);return!(i||a||o||r)}),[f.search]),L=Object(p.useCallback)((function(){var e=_.setMode,t=Object(Pl.isInternalLink)(null==d?void 0:d.current),n="smartphone"===k;return!Object(N.f)(h)&&j()&&n&&!t&&!a?(e("truncator","acm"),"ACM"):null}),[_,k,a,h,j]);Object(p.useEffect)((function(){_.registerOverlay("truncator")}),[]),Object(p.useEffect)((function(){var e=_.setVisibility;if(v&&e("truncator",!1),A()&&!P){var t=L();t?(I(t),e("truncator",!0)):e("truncator",!1)}}),[r,v,_,A,L,P]);var R=function(){_.setVisibility("truncator",!1)},B=_.overlays.truncator.visible,z=P&&Il[P],F=jn.d;if(z&&z.threshold&&(F=z.threshold),n&&!P){var U=Object(jn.f)(T);return o()(Sl.BulletBriefLocationProvider,{},void 0,r?o()("div",{},void 0,t({TruncatorMessage:null,truncated:!1,dismissTruncator:R})):o()("div",{},void 0,t({TruncatorMessage:null,truncated:c?{dropzone:c}:U,dismissTruncator:R})))}return o()(Sl.BulletBriefLocationProvider,{},void 0,o()("div",{},void 0,t({TruncatorMessage:z,truncated:B&&F,dismissTruncator:R})))}Ml.displayName="Truncator",Ml.defaultProps={},Ml.displayName="Truncator";var Al=Ml,jl=n("hP1F"),Nl=n("IINN"),Ll=n("V+uv");function Dl(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function Rl(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Dl(Object(n),!0).forEach((function(t){c()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Dl(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Bl,zl,Fl,Ul,Hl,Wl,ql="DFP_TopAd_Anon_0124",Vl="1_TopAd",Gl=[ql,"DFP_TopAd_Anon_AA_0124"],Yl=new Map,Xl=function(e,t,n,i){var a="smartphone"===e,o="podcasts"===(null==t?void 0:t.name);return a&&!o&&!n.isVerticalFullBleed&&!n.isFullBleed&&function(e){var t,n=Object.keys(e).reduce((function(t,n){return Gl.includes(n)&&Yl.get(n)!==e[n]||".ver"===n?(Yl.set(n,e[n]),Rl(Rl({},t),{},c()({},n,e[n]))):t}),{});"undefined"!=typeof window&&Object.keys(n).length&&Object(y.f)(n,null===(t=document)||void 0===t?void 0:t.referrer);return!0}(i)&&function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return null==e?void 0:e[t]}(i,ql)===Vl};function Zl(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function Jl(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Zl(Object(n),!0).forEach((function(t){c()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Zl(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Kl=tt()((function(){return n.e(78).then(n.bind(null,"vAfL"))}),{loadableGenerated:{webpack:function(){return["vAfL"]},modules:["shared/Comments/CommentsPanel"]}}),$l=tt()((function(){return Promise.all([n.e(25),n.e(122)]).then(n.bind(null,"a0Pm"))}),{loadableGenerated:{webpack:function(){return["a0Pm"]},modules:["shared/OakBody/LiveRecirculation"]}}),Ql=tt()((function(){return Promise.all([n.e(25),n.e(95)]).then(n.bind(null,"B35i"))}),{loadableGenerated:{webpack:function(){return["B35i"]},modules:["shared/OakBody/ExplainerRecirculation"]}}),ec=tt()((function(){return Promise.all([n.e(0),n.e(2),n.e(12),n.e(183),n.e(142)]).then(n.bind(null,"+mHm"))}),{loadableGenerated:{webpack:function(){return["+mHm"]},modules:["shared/Recirculation"]}}),tc=tt()((function(){return Promise.all([n.e(172),n.e(90)]).then(n.bind(null,"pfIa"))}),{loadableGenerated:{webpack:function(){return["pfIa"]},modules:["../EpisodeFooter"]}}),nc=tt()((function(){return n.e(143).then(n.bind(null,"dssk"))}),{loadableGenerated:{webpack:function(){return["dssk"]},modules:["../RelatedCoverage"]}}),ic=tt()((function(){return n.e(131).then(n.bind(null,"tBcc"))}),{loadableGenerated:{webpack:function(){return["tBcc"]},modules:["shared/OakBody/NewsletterRecirculation"]}}),ac=nt.storyPageTests.INTERRUPTIONS_HOLDOUT_TEST,oc={ITERATE_STORY_SURVEY_ANON:Va.b,ITERATE_STORY_SURVEY_REGI:Va.c,ITERATE_STORY_SURVEY_SUB:Va.d},rc={AIG_REGI_ITERATE_SURVEY_ID:"663ba9099830e70001498c69"},sc=h()(Bl||(Bl=d()(["\n  query trustAssetsQuery($id: String!) {\n    article(id: $id) {\n      trustAssets {\n        region\n        assetName\n        ruleName\n        testName\n        parentTest\n        asset {\n          __typename\n          ... on EmbeddedInteractive {\n            id\n            sourceId\n            html\n            slug\n            compatibility\n            displayProperties {\n              minimumWidth\n              maximumWidth\n              displayOverrides\n              __typename\n            }\n            __typename\n          }\n          ... on Capsule {\n            uri\n          }\n          ... on ScoopTrustModule {\n            id\n            author {\n              imageUrl\n              name\n            }\n            authorNameOverride\n            authorImageUrlOverride\n            linkText\n            linkUrl\n            role\n            slug\n            text {\n              doc\n            }\n            __typename\n          }\n        }\n      }\n    }\n  }\n"])));function lc(e){var t,n,i,a,r,l,u,d,m,h,v,_,w,x,k,O,T,E,S,P,I,A,j,L,D,R,B,z,F,U,W=e.data,q=e.storylineMenuBlockRef,V=e.liveMenuRef,G=W.article,Y=W.adMovedReason,X=W.adsTestDone,Z=Object(C.useLocation)(),J=Object(g.a)(),Q=Object(ee.a)(),te=Object($.a)(),ie=te.deviceType,ae=te.initialDeviceType,oe=Object(K.a)(),re=oe.isCrawler,se=oe.isOptimisticallyTruncated,le=oe.fastlyAbraConfig,ce=oe.isProvisionallyLoggedIn,pe=Object(me.a)().gatewayIsEmbedded,fe=Object(ue.b)(),he=Object(dt.b)(),ge=Object(so.b)(),ye="InteractiveBlock"===(null===(n=((null==G||null===(t=G.sprinkledBody)||void 0===t?void 0:t.content)||[])[0])||void 0===n?void 0:n.__typename),ve=Object(p.useReducer)(ne.a,{companionColumnZones:[],associatedAssets:null==G?void 0:G.associatedAssets,triggeredTrustCall:!1,commentsEnabled:!1}),be=s()(ve,2),_e=be[0],xe=be[1];dr.b.mark("storyRender");var ke=Object(Qe.useLazyQuery)(sc,{variables:{id:null==G?void 0:G.url},ssr:!1,fetchPolicy:"cache-first",onError:function(e){var t=new Error(e);t.name="Error fetching vi trust assets",Object(At.a)(t)},onCompleted:function(e){var t,n=null==e||null===(t=e.article)||void 0===t?void 0:t.trustAssets;if(n){var i=_e.associatedAssets.map((function(e){return e.ruleName})),a=n.filter((function(e){return!i.includes(e.ruleName)}));xe({associatedAssets:[].concat(we()(a),we()(_e.associatedAssets))})}}}),Oe=s()(ke,1)[0];Object(p.useEffect)((function(){_e.triggeredTrustCall||(Oe(),xe({triggeredTrustCall:!0}))}),[Oe,_e.triggeredTrustCall]);var Ce=function(e){xe(function(e,t){var n={height:t,position:e.companionColumnZones.length,companionComponent:null,companionName:null};return e.companionColumnZones.push(n),e}(_e,e))},Ee=function(e,t){var n=function(e,t,n,i,a){var o=n.requirements,r=o.shouldComponentMount,s=o.appearAfterFirstAd,l=o.appearsAtMobile,u=o.minHeight,d=!1,p=e.companionColumnZones[i],f=t.getCompanionFlags().placedFirstAd,m="function"!=typeof r||r(a),h=!s||f&&i>f.position,g=function(e,t){var n="placed".concat(t);return e.getCompanionFlags()[n]}(t,n.name),y=null===p.companionComponent,v=p.height>=u||l;return m&&h&&!g&&y&&v&&(p.companionComponent=n.component,p.companionName=n.name,t.setCompanionFlags(c()({},"placed".concat(n.name),!0)),d=!0),{state:e,stateChanged:d}}(_e,fe,e,t,G);n.stateChanged&&xe(n.state)},Se=null===(i=J[ac.name])||void 0===i?void 0:i.variant;Object(p.useEffect)((function(){he&&Boolean(Se)&&Object(y.e)(ac.name)}),[he,Se]),Object(p.useEffect)((function(){X&&el.forEach((function(e){"last"===e.requirements.position?function(e){for(var t=_e.companionColumnZones.length-1;t>-1;t-=1)Ee(e,t)}(e):function(e){for(var t=0;t<_e.companionColumnZones.length;t+=1)Ee(e,t)}(e)}))}),[X]);var Pe=_e.companionColumnZones,Ie=G.section,Me=G.subsection,Ae=G.sprinkledBody.content||[],je=Ie&&Ie.name||"",Ne=Me&&Me.name||"",De=Me&&Me.url||Ie&&Ie.url||"",Re=Me&&Me.displayName||Ie&&Ie.displayName||"",Be=Object(jl.a)(G),ze=Object(Fa.a)({sectionContent:je,subsectionContent:Ne,adSensitivity:Be,taxonomyException:G.dfpTaxonomyException}),Fe="world"===(null==Ie?void 0:Ie.name);Object(p.useEffect)((function(){var e;Fe&&(null===(e=navigator)||void 0===e||e.joinParakeetInterestGroup({origin:"https://ib.adnxs.com",interests:["29622278"],readers:["https://ib.adnxs.com"]},2592e3))}),[Fe]);var Ue=Le({},{data:W,location:Z}),He=Object(sa.d)(G.sprinkledBody.content[0]),We="object"===$e()(Object(Nn.a)(Ae)),qe=He||G.sprinkledBody.content.some((function(e){return"HeaderFullBleedHorizontalBlock"===e.__typename||"HeaderFullBleedVerticalBlock"===e.__typename||Object(ka.b)(e)})),Ve="podcasts"===(null==Ie?void 0:Ie.name),Ge=G.column&&(["the-weekly","the-dispatch"].includes(G.column.slug)||Ve);fe.setCompanionFlags({placedSignatureJournalism:!1}),null!=J&&null!==(a=J.STYLN_elevate_series_collections)&&void 0!==a&&a.allocated&&Object(y.e)("STYLN_elevate_series_collections");var Ye="SJ_AA_OnboardingFlow_CrossPlatform_Exposure_Test";null!=J&&null!==(r=J[Ye])&&void 0!==r&&r.allocated&&null!==(null==J||null===(l=J[Ye])||void 0===l?void 0:l.variant)&&Object(y.e)(Ye);var Xe=Object(ut.hidePharmacyEmailSignup)(G),Ze=Object(p.useCallback)((function(e){var t;return!Xe||null==e||null===(t=e.assetName)||void 0===t||!t.includes("email-signup")}),[Xe]),Je=Object(p.useMemo)((function(){var e;return null===(e=_e.associatedAssets)||void 0===e?void 0:e.filter(Ze)}),[_e.associatedAssets,Ze]),Ke=Object(p.useMemo)((function(){return Ve?[]:null==G?void 0:G.storylines}),[null==G?void 0:G.storylines,Ve]),et=Object(p.useMemo)((function(){return Jl(Jl({},G),{},{associatedAssets:Je,storylines:Ke})}),[G,Je,Ke]),tt=Object(gt.useUnit)(ht.config).unit,at=Object(M.a)().user,rt=Object(mt.a)(),lt=et||{},wt=lt.associatedNewsletter,xt=lt.desk,kt=lt.slug,Ot=lt.url,Tt=lt.wordCount,Ct=Object(p.useRef)(0),Et=Object(pt.a)({percent:.6}).hasMetThreshold,St=function(e){var t;return(null==e||null===(t=e.storylines)||void 0===t?void 0:t.length)>0?e.storylines.map((function(e){return e.ruleName})).join(" "):null}(et),Pt=function(e){var t;return(null==e||null===(t=e.associatedAssets)||void 0===t?void 0:t.length)>0?e.associatedAssets.map((function(e){return e.ruleName})).join(" "):null}(et),It=function(e){var t,n,i,a=null==e||null===(t=e.sprinkledBody)||void 0===t||null===(n=t.content)||void 0===n||null===(i=n.filter((function(e){return"InteractiveBlock"===e.__typename})))||void 0===i?void 0:i.map((function(e){return e.media.url}));return(null==a?void 0:a.length)>0?a.join(" "):null}(et),Mt=(null==et?void 0:et.storyFormat)||"regular",jt=null==et||null===(u=et.section)||void 0===u||null===(d=u.name)||void 0===d?void 0:d.toLowerCase(),Nt=Object(p.useMemo)((function(){return Tt<850||"Short Form"===Mt}),[Tt,Mt]),Lt=!["opinion","espanol","podcasts"].includes(jt),Dt="undefined"!=typeof window&&Object(ft.a)(),Rt="US"===(null==rt?void 0:rt.country)&&Object(N.e)(at),Bt=!Dt&&Rt,zt=!tt.loading&&tt.canShow;cr(Object(p.useMemo)((function(){var e;return e=Bt&&!zt?Jl(Jl({},rc),oc):oc,Lt?e:{}}),[Bt,zt,Lt]),Object(p.useMemo)((function(){return{articleType:Mt,articleSection:jt,assetsOnPage:Pt,associatedNewsletter:wt,desk:xt,deviceType:ie,hasMetThreshold:Et,interactivesOnPage:It,requireThreshold:Nt,slug:kt,storylinesOnPage:St,timeRead:Ct.current,url:Ot,wordCount:Tt}}),[jt,Mt,Pt,wt,xt,ie,Et,It,Nt,kt,St,Ot,Tt]));var Ft=Object(Bn.b)(et),Ht=Object(Ua.c)(et),Wt=Object(it.parseUnstructuredData)(Object(it.getLiveAsset)(et)),qt=Object(Bn.e)(null==Wt?void 0:Wt.typeOfBlog),Vt=!(null==et||!et.associatedNewsletter),Gt=Object(Ra.a)(de.a),Yt=Object(Ra.a)(de.a);Object(Ga.b)(J)&&Object(y.e)(Ga.a.name);var Xt=(null==et||null===(m=et.associatedNewsletter)||void 0===m||null===(h=m.newsletterProduct)||void 0===h?void 0:h.newsletterProductData)||{},Zt=Object(qa.b)(Xt),Jt=Object(Ga.e)(Xt,J),Kt=o()(Xn.a,{region:ot.a.BELOW_MAIN_CONTENT,associatedAssets:null==et?void 0:et.associatedAssets}),Qt=Object($t.b)(et);Object(p.useEffect)((function(){var e;!(window&&window.matchMedia("(min-width: 1024px)").matches)||Qt||Ft||Ht||ye||!J||null==J||null===(e=J.SJ_xpn_standard_story_0424)||void 0===e||!e.allocated||Object(y.e)("SJ_xpn_standard_story_0424")}),[J,Qt,Ft,Ht,ye]);var en=Object(p.useRef)(!1),tn=Object(b.useTracking)(),nn=Boolean((null==J||null===(v=J[null==Te?void 0:Te.name])||void 0===v?void 0:v.allocated)&&(null==J||null===(_=J[null==Te?void 0:Te.name])||void 0===_?void 0:_.variant)),an=null==J||null===(w=J[null==Te?void 0:Te.name])||void 0===w?void 0:w.variant,on=tn.trackEvent;Object(p.useEffect)((function(){!nn||null!=en&&en.current||(Y&&on({event:"impression",module:{name:null==Te?void 0:Te.name,placement_test_reason:Y,label:an,context:"ad_placement"}}),en.current=!0)}),[nn,en,on,Y,an]),Object(nt.canStorylineComposeBlock)({storyline:null==Ke||null===(x=Ke[0])||void 0===x?void 0:x.storyline,block:nt.STORYLINE_BLOCKS.guide})&&(Kt=o()(Wa.a,{storyline:Ke[0].storyline,pageType:et.__typename,parentUri:et.uri,region:ot.a.BELOW_MAIN_CONTENT,ruleName:Ke[0].ruleName,testName:Ke[0].testName})),[Yn.c.bottomGenericVariant.name,Yn.c.bottomSpecificVariant.name].includes(null==J||null===(k=J[Yn.c.name])||void 0===k?void 0:k.variant)&&Object(Yn.a)(et)&&(Kt=o()(Yn.b,{asset:et}));var rn,sn=null==et||null===(O=et.collections)||void 0===O||null===(T=O.filter((function(e){return["COLUMN","SPOTLIGHT","SERIES"].includes(e.collectionType)})))||void 0===T?void 0:T.map((function(e){return e.uri})),ln=null==et||null===(E=et.collections)||void 0===E?void 0:E.map((function(e){return e.uri})),cn=o()(ec,{associatedNewsletter:null==et?void 0:et.associatedNewsletter,assetUri:null==et?void 0:et.uri,collectionUris:ln,recircSectionUrl:De,recircSectionDisplayName:Re,articleId:et.sourceId,url:et.url}),un=!pe&&se&&(null==et?void 0:et.wordCount)>=500;return o()(vt.a,{article:et},void 0,o()(Nl.a,{timesTags:et.timesTags},void 0,o()(yl,{article:et,hasFullBleedHeader:qe}),o()(za.a,{route:de.a,section:je,adUnitPath:ze,adTargeting:Ue,prebidOpts:(rn=!ce&&Xl(ie,Ie,fe.mastheadStyleProps,le),rn?{sizeConfig:{mobile_top:{size:{small:[[320,50]]}}},positionsToFilter:["top"]}:{positionsToFilter:["mobile_top"]})}),o()(Al,{optimisticallyTruncated:un,render:function(e){var t=e.TruncatorMessage,n=e.truncated,i=e.dismissTruncator;return f.a.createElement(f.a.Fragment,null,!Q&&(S||(S=o()(Ba.a,{article:et}))),o()(yt.a,{id:"story",className:Object(H.cx)(vl,c()({},Ll.b,!qe&&!Q))},void 0,!He&&!Ve&&!Qt&&!Ft&&!Ht&&!ye&&(!ge&&"desktop"===ae||ge&&window.matchMedia("(min-width: 1024px)").matches)&&o()("div",{className:Object(H.cx)(Oa.e,c()(c()({},Ll.c,qe&&!he),Ll.d,qe&&he))},void 0,P||(P=o()(Yo,{article:G,hasFullBleedHeader:qe}))),!He&&f.a.createElement(f.a.Fragment,null,Q&&Object(pr.shouldRenderAudioAppPromoAsBanner)(et)&&o()(ct.a,{audioDeepLink:Object(pr.getAudioDeepLink)(et.url)}),o()("div",{className:Object(H.cx)(Oa.e,Ll.a,c()(c()({},Ll.c,qe&&!he),Ll.d,qe&&he))},void 0,!Q&&Ve&&(zl||(zl=o()(st.a,{}))),Qt||Ft?I||(I=o()(ao,{renderStorylineMenu:Qt,renderLiveBreakoutMenu:Ft,article:et,storylineMenuBlockRef:q,liveMenuRef:V})):o()(Xn.a,{region:ot.a.TOP_BANNER,associatedAssets:null==et?void 0:et.associatedAssets}))),!Ve&&!qe&&(A||(A=o()(_l,{edge:de.a,hasHeader:We}))),o()(Ut,{},void 0,o()(xa,{asset:et,truncated:n,dismissTruncator:i,companionColumnZones:Pe,addZone:Ce,isLivePost:Ft,isExplainerPost:Ht,welcomeBannerSubsDZComponent:Gt,welcomeBannerRegiDZComponent:Yt,optimisticallyTruncated:un,adsTestDone:X})),!pe&&f.a.createElement(f.a.Fragment,null,j||(j=o()(or,{article:et})),!n&&(L||(L=o()(cs,{article:et}))),n&&null!==t&&o()(t,{dismissTruncator:i,adSensitivity:Be}),o()(bt.a,{offset:500,isLazy:!0},void 0,o()(nc,{data:et,articleId:et.url})),Ht&&(D||(D=o()(bt.a,{offset:500},void 0,o()(Ql,{article:et})))),o()(bt.a,{offset:500,isLazy:!re},void 0,Ft&&!Ht&&!qt&&(R||(R=o()(bt.a,{offset:500},void 0,o()($l,{article:et})))),Kt),Fl||(Fl=o()(Ha.b,{region:"body"})),Ge&&o()(bt.a,{offset:500},void 0,o()(tc,{data:et,articleId:et.url})),!n&&Vt&&o()(bt.a,{offset:500,isLazy:!re},void 0,B||(B=o()(rr.b,{pageType:"test-recirc-optimize"},void 0,o()(ic,{newsletterConfig:Zt,collectionUris:sn,defaultRecircComponent:cn}),Ul||(Ul=o()(sr.a,{}))))),o()("div",{id:"bottom-sheet-sensor"},void 0,et.collections&&!Ge&&!Ft&&!Jt&&(z||(z=o()(bt.a,{offset:500},void 0,cn)))),Hl||(Hl=o()("div",{},void 0,o()(mi.a,{id:"bottom"}))),ge&&!Q&&(F||(F=o()(Kl,{article:et}))),!Q&&(U||(U=o()(_t.a,{adSensitivity:Be,article:et}))))))}})))}lc.displayName="AssembledArticlePage",lc.defaultProps={storylineMenuBlockRef:null,liveMenuRef:null},lc.fragments={article:h()(Wl||(Wl=d()(["\n    fragment AssembledArticlePage_article on Article {\n      __typename\n      id\n      url\n      sourceId\n      section {\n        id\n        name\n        url\n        displayName\n      }\n      subsection {\n        id\n        name\n        url\n        displayName\n      }\n      collections {\n        id\n        uri\n        active\n        slug\n        header\n        tagline\n        mobileHeader\n        lastModified\n        firstPublished\n      }\n      column {\n        id\n        slug\n      }\n      dfpTaxonomyException\n      sprinkledBody {\n        content @take(first: $bodyCount) @filterEmpty {\n          __typename\n        }\n      }\n      associatedNewsletter {\n        newsletterProduct {\n          id\n          newsletterProductData {\n            code\n            name\n            allowedEntitlement\n            subscriptionPageLink\n            isOnsiteFreeTrialEnabled\n            splashSignupCaption\n            signupModuleHeadline\n            signupModuleSummary\n            sampleLink\n            signupTitleImage\n            signupAltText\n            splashThumbImage\n            frequency\n            sampleLink\n          }\n        }\n      }\n      ...getAdSensitivity_article\n      ...CommentsProvider_creativeWork\n      ...ArticleHelmet_article\n      ...OakBody_article\n      ...InStoryMasthead_article\n      ...Region_article\n      ...StorylineMenuBlock_creativeWork\n      ...StorylineGuideBlock_creativeWork\n      ...FooterBlock_data\n    }\n    ","\n    ","\n    ","\n    ","\n    ","\n    ","\n    ","\n    ","\n    ","\n  "])),jl.a.fragments.article,vt.a.fragments.creativeWork,yl.fragments.article,xa.fragments.article,Ba.a.fragments.article,Xn.a.fragments.article,$t.a.fragments.creativeWork,Wa.a.fragments.creativeWork,cs.fragments.data)};var cc,uc,dc,pc,fc=lc;fe.a.fragments={article:h()(cc||(cc=d()(["\n    fragment isRTL_article on Article {\n      id\n      language {\n        code\n      }\n    }\n  "])))};var mc=function(e){var t,n=!0;e&&e.compatibility&&(e.compatibility.hasOakConversionError&&(n=!1),null!==(t=e.compatibility)&&void 0!==t&&t.isOak&&(n=!0));return n};mc.fragments={article:h()(uc||(uc=d()(["\n    fragment isCompatibleMobile_article on Article {\n      id\n      compatibility {\n        hasOakConversionError\n        isOak\n      }\n    }\n  "])))};var hc=function(e){var t,n=!0;e&&e.compatibility&&(e.compatibility.hasOakConversionError&&(n=!1),null!==(t=e.compatibility)&&void 0!==t&&t.isOak&&(n=!0));return n};hc.fragments={article:h()(dc||(dc=d()(["\n    fragment isCompatibleDesktop_article on Article {\n      id\n      compatibility {\n        hasOakConversionError\n        isOak\n      }\n    }\n  "])))};var gc=function(e,t,n,i){var a="smartphone"===i||"phone"===i,o=/^http(s)?:\/\/alpha-preview\./.test(t),r=/^http(s)?:\/\/scoop\./.test(t);if(cl(e))return!0;if(r||o){a=!0;var s=n.search,l=w.a.parse(s);l&&l.device&&"desktop"===l.device.toLowerCase()&&(a=!1)}return a?mc(e):hc(e)};gc.fragments={article:h()(pc||(pc=d()(["\n    fragment isCompatible_article on Article {\n      id\n      ...isInternationalized_article\n      ...isCompatibleMobile_article\n      ...isCompatibleDesktop_article\n    }\n    ","\n    ","\n    ","\n  "])),cl.fragments.article,mc.fragments.article,hc.fragments.article)};var yc,vc=gc,bc=n("T5+l"),_c=n.n(bc),wc=Object(H.css)("display:none;& .placed-ad{background-color:",q.a.color.gray90,";}@media (max-width:600px){position:relative;background-color:",q.a.color.gray90,";border-bottom:1px solid ",q.a.color.gray80,";display:block;margin:0;height:84px;}"),xc=Object(H.css)("&::before{content:'Advertisement';}color:#5a5a5a;font-family:",q.a.font.franklinBase,";font-size:",q.a.font.size(9),";font-weight:",q.a.font.weight.light,";letter-spacing:0.05rem;line-height:84px;text-transform:uppercase;text-align:center;margin:0 auto;"),kc=Object(H.css)("position:absolute;left:50%;top:50%;transform:translate(-50%,-50%);padding-bottom:34px;"),Oc=function(){return o()("div",{className:Object(H.cx)(wc,xc)},void 0,yc||(yc=o()("div",{className:kc},void 0,o()(_c.a,{id:"mobile_top",position:"mobile_top",isPrioritized:!0}))))};Oc.displayName="TopAdMobile";var Tc,Cc,Ec,Sc,Pc,Ic,Mc,Ac,jc,Nc=Object(I.a)(Oc);function Lc(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function Dc(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Lc(Object(n),!0).forEach((function(t){c()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Lc(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Rc=vi.env.STORY_SURROGATE_CONTROL,Bc=h()(Tc||(Tc=d()(['\n  query ArticleQuery($id: String!, $bodyCount: Int!, $isTheWeekly: Boolean!) {\n    article: workOrLocation(id: $id) {\n      __typename\n      ... on Article {\n        id\n        compatibility {\n          isOak\n          hasInlineEmbeddedInteractives\n        }\n        archiveProperties {\n          timesMachineUrl\n          lede @stripHtml\n          thumbnails {\n            height\n            url\n            width\n          }\n        }\n        collections @filterEmpty {\n          id\n          url\n          slug\n          headline {\n            default\n          }\n          promotionalImage {\n            image {\n              id\n              crops(renditionNames: ["threeByTwoLargeAt2X", "square640"]) {\n                name\n                renditions {\n                  url\n                  width\n                  height\n                }\n              }\n            }\n          }\n        }\n        tone\n        section {\n          id\n          name\n          displayName\n          url\n          uri\n        }\n        subsection {\n          id\n          name\n          displayName\n          url\n          uri\n        }\n        sprinkledBody {\n          content @filterEmpty {\n            __typename\n          }\n        }\n        storyFormat\n        ...storyAdRequirements_article\n        ...isCompatible_article\n        ...isRTL_article\n        ...StoryTrackingMapper_article\n        ...AssembledArticlePage_article\n      }\n      ... on RelocatedWork {\n        targetUrl\n      }\n      ... on ExpiredWork {\n        id\n        uri\n      }\n    }\n  }\n  ',"\n  ","\n  ","\n  ","\n  ","\n"])),Ue.AdRequirements.fragments.article,vc.fragments.article,fe.a.fragments.article,Je.fragments.article,fc.fragments.article),zc=oe("article",["collections"]);function Fc(e){var t=e.match,n=e.location;return Dc({query:Bc},function(e){var t=e.match.params,n=t.prefix,i=t.year,a=t.month,o=t.day,r=t.splat,s=e.location,l=i&&a&&o,c=n?"/".concat(n):"",u=l?"".concat(c,"/").concat(i,"/").concat(a,"/").concat(o,"/").concat(r,".html"):"".concat(c,"/article/").concat(r,".html"),d=w.a.parse(s.search);Object(D.d)(d)&&(u=Object(D.b)(d));return{variables:{id:u,bodyCount:1e4,isTheWeekly:/^\/\d{4}\/\d{2}\/\d{2}\/the-weekly/.test(s.pathname)}}}({match:t,location:n}))}function Uc(e){var t,n,i=e.location,a=e.match,r=e.staticContext,l=Object(K.a)(),c=Object(v.a)(),u=c.loading,d=c.error,f=c.data,m=Object(ee.a)(),h=Object(g.a)(),_=ze(f,null==l?void 0:l.fastlyAbraConfig,h),w=Object($.a)(),C=w.initialDeviceType,E=w.deviceType,P=w.breakpoint,I=Je({data:_,deviceType:E}),A=Object(b.useTracking)(I).Track,j=Object(me.a)().gatewayIsEmbedded,L=Object(p.useRef)(0),D=Object(p.useReducer)(ne.a,{showMasthead:!0,mouseOverMasthead:!1,skipLink:null}),R=s()(D,2),B=R[0],z=R[1],U=Object(p.useRef)(null),H=Object(p.useRef)({placedSignatureJournalism:!1,placedFirstAd:null}),W=Object(p.useRef)({desktopAdPosition:null,mobileAdPosition:null}),q=Object(p.useRef)({regiDZIndex:null});Object(te.a)({route:"story"}),Object(Q.a)("storyRenderTime");var V=Object(p.useRef)(),G=Object(p.useRef)();Object(p.useEffect)((function(){var e=Date.now(),t=setInterval((function(){var t=Date.now(),n=Math.floor((t-e)/1e3);L.current=n}),1e3);return function(){return clearInterval(t)}}),[]),Object(p.useEffect)((function(){var e;if(null!=_&&null!==(e=_.article)&&void 0!==e&&e.id){var t;if(_&&_.article&&_.article.compatibility)window.ASSETTYPE=null!==(t=_.article.compatibility)&&void 0!==t&&t.isOak?"oak":"article";Object(se.a)(),U.current&&U.current!==_.article.id&&(W.current={desktopAdPosition:null,mobileAdPosition:null}),U.current=_.article.id}return function(){window.scrollTo(0,0)}}),[null==_||null===(t=_.article)||void 0===t?void 0:t.id]);var Y=function(e,t){var n=Object(p.useState)(!1),i=s()(n,2),a=i[0],o=i[1],r=Object(M.a)().user,l=Object(g.a)(),c=Object(N.f)(r),u=Object($.a)().deviceType,d=Object(he.a)();return Object(p.useEffect)((function(){var n,i="smartphone"===u&&!d,a=null==e?void 0:e.current,r=null==t?void 0:t.current;(a||r)&&!c&&i&&l&&null!=l&&null!==(n=l.CONV_Bar1_Mobile_Header_Story_AA_245)&&void 0!==n&&n.allocated&&o(!0)}),[e,t,c,u,d,l]),{isBarOneTestEligible:a}}(V,G).isBarOneTestEligible;if(u||!_)return null;if(d)return Cc||(Cc=o()(k.a,{}));var X=zc({data:_}).data.article;if(!X)return Object(jl.f)(i,a)?Ec||(Ec=o()(T.a,{},void 0,o()(J,{}),";")):Sc||(Sc=o()(x.a,{}));if(X.targetUrl)return r&&(r.statusCode=301,r.redirectUrl=X.targetUrl),null;if("ExpiredWork"===X.__typename)return Pc||(Pc=o()(T.a,{},void 0,o()(J,{})));if(!(vc(X,l.origin,i,C)&&X.sprinkledBody&&X.sprinkledBody.content&&Array.isArray(X.sprinkledBody.content)&&0!==X.sprinkledBody.content.length))return Ic||(Ic=o()(k.a,{}));r&&(r.surrogateControl=Rc);var Z=Object(jl.d)(X),ie=Object(jl.e)(X,Z),ae=ie.treatment,oe=ie.tone,pe=X.collections.some((function(e){return le.NO_FOLLOW_COLLECTIONS.includes(e.uri)})),ge={homepath:Object(jl.b)(X),language:X.language&&X.language.code||null,languageDirection:fe()(null==X?void 0:X.language)?"rightToLeft":null,opinionHeaderRedesign:re.opinionHeaderRedesign,homepage:!1,noFollowExternalLinks:pe,isShortForm:"Short Form"===X.storyFormat,storyFormat:X.storyFormat},ye=Object(jl.c)(X,P),ve={setCompanionFlags:function(e){H.current=Dc(Dc({},H.current),e)},getCompanionFlags:function(){return H.current},adCounter:W.current,handleShowMasthead:function(){z({showMasthead:!0})},handleHideMasthead:function(){z({showMasthead:!1})},showMasthead:B.showMasthead,mouseOverMasthead:B.mouseOverMasthead,article:X,welcomeBanners:q.current};ve.mastheadStyleProps=ye;var be,_e=l.fastlyAbraConfig,we=!l.isProvisionallyLoggedIn&&Xl(E,Z,ye,_e);return!Y||ye.isFullBleed&&ye.transparent||Object(y.e)("CONV_Bar1_Mobile_Header_Story_AA_245"),o()(A,{},void 0,m?o()(S.a,{theme:ge},void 0,Mc||(Mc=o()(O.PianoRoot,{appClassName:"NYTApp",mode:"autoAppOnly"})),o()(ue.a.Provider,{value:ve},void 0,we&&(Ac||(Ac=o()(Nc,{}))),o()(F,{sectionData:Z,treatment:ae,tone:oe||"news",pageType:de.a,columnSlug:null===(be=X.column)||void 0===be?void 0:be.slug},void 0,o()(fc,{data:_})))):o()(S.a,{theme:ge},void 0,o()(ue.a.Provider,{value:ve},void 0,o()(ce.a,{},void 0,we&&(jc||(jc=o()(Nc,{}))),o()(T.a,{mastheadStyleProps:ye,mastheadOnMouseEnter:function(){z({mouseOverMasthead:!0})},mastheadOnMouseLeave:function(){z({mouseOverMasthead:!1})},sectionData:Z,treatment:ae,tone:oe||"news",showMasthead:B.showMasthead,renderMasthead:!ye.isVerticalFullBleed,stickyMasthead:!ye.isFullBleed,hideModalOnScroll:!ye.isFullBleed,skipToContent:B.skipLink,pageType:de.a,showIndex:!j,showFooter:!j,columnSlug:null===(n=X.column)||void 0===n?void 0:n.slug},void 0,o()(fc,{data:_,storylineMenuBlockRef:V,liveMenuRef:G}))))))}Uc.displayName="Story",Uc.defaultProps={staticContext:void 0};t.default=Uc},"W/c9":function(e,t,n){"use strict";var i=n("TqRt"),a=n("cDf5");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=i(n("lSNA")),r=i(n("q1tI")),s=(i(n("17x9")),n("Jqp9")),l=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=a(e)&&"function"!=typeof e)return{default:e};var n=c(t);if(n&&n.has(e))return n.get(e);var i={__proto__:null},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var r in e)if("default"!==r&&{}.hasOwnProperty.call(e,r)){var s=o?Object.getOwnPropertyDescriptor(e,r):null;s&&(s.get||s.set)?Object.defineProperty(i,r,s):i[r]=e[r]}return i.default=e,n&&n.set(e,i),i}(n("mAfr"));function c(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(c=function(e){return e?n:t})(e)}var u=function(e){var t=e.thumbnailComponent,n=e.playerComponent;if(!e.data||!e.data.media)return null;var i,a=e.data.media,c=a.summary,u=a.promotionalHeadline,d=a.headline,p=a.podcastSeries,f=(null==d?void 0:d.default)||u,m=(0,s.cx)("margins-h",l.figureClass);return p&&(i=p.image&&p.image.crops.length&&p.image.crops.reduce((function(e,t){return e||t.renditions.find((function(e){return"articleInline"===e.name}))||null}),null))&&!i.url&&(i=null),r.default.createElement("figure",{className:m},r.default.createElement("figcaption",{className:l.figcaptionClass},r.default.createElement("div",{className:"audioFigureHeading"},i&&t?r.default.createElement("div",{className:l.figureMediaClass},r.default.createElement(t,{thumbnail:i,media:a})):null,r.default.createElement("h3",{className:l.headingClass},f),c?r.default.createElement("span",{className:(0,s.cx)(l.captionSpanClass,(0,o.default)({},l.thumbnailClass,i))},c):null)),r.default.createElement(n,{media:a}))};u.displayName="AudioBlock",u.defaultProps={article:{},data:{}};t.default=u},W61k:function(e,t){e.exports=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return'(function () { var _f=function(e,t,a,n){var i;if(!(i=a,!!(window&&window.adClientUtils&&window.adClientUtils.hasActiveToggle)&&window.adClientUtils.hasActiveToggle(i)))return;!function(e){window&&window.NYTD&&window.NYTD.Abra&&window.NYTD.Abra.reportExposure(e)}(a);let o=()=>{var e=new Date,t=e.getFullYear();return e.getMonth()<9&&(t+="0"),t+=e.getMonth()+1,e.getDate()<10&&(t+="0"),t+=e.getDate(),e.getHours()<10&&(t+="0"),t+=e.getHours(),e.getMinutes()<10&&(t+="0"),t+=e.getMinutes(),e.getSeconds()<10&&(t+="0"),t+e.getSeconds()};window.googletag=window.googletag||{},googletag.cmd=googletag.cmd||[];let l=new URLSearchParams(location.search).get("alice_rules_test");var s,r=new XMLHttpRequest,d=window.vi.env.ALS_URL,g=document.querySelector(\'[name="nyt_uri"]\');if(t)s="uri="+(c=t);else if("/"===location.pathname){var c=encodeURIComponent("https://www.nytimes.com/pages/index.html");s="uri="+c}else if(void 0===g||""===g||null===g){var u=e||location.protocol+"//"+location.hostname+location.pathname;s="url="+encodeURIComponent(u)}else{c=encodeURIComponent(g.content);s="uri="+c}var w=n;if(!w){var m=document.querySelector(\'[name="template"]\');w=null==m||null==m.content?"":m.content}var p=document.querySelector(\'[name="prop"]\'),_=document.querySelector(\'[name="plat"]\'),v=null==p||null==p.content?"nyt":p.content,b=null==_||null==_.content?"web":_.content;window.innerWidth<740&&(v="mnyt",b="mweb");var f=window.localStorage.getItem("als_test_clientside"),h=null;window.googletag.cmd.push(function(){var e=f&&0!==f.length?f:"empty_empty_empty_"+o(),t=h||e;googletag.pubads().setTargeting("als_test_clientside",t)});var y=window.localStorage.getItem("mktg"),U=null;window.googletag.cmd.push(function(){var e=U||y;e&&googletag.pubads().setTargeting("mktg",e)});var L,T=window.localStorage.getItem("bt");window.googletag.cmd.push(function(){var e=null!=L?L:T;null!=e&&googletag.pubads().setTargeting("bt",e)});var S=window.localStorage.getItem("sub"),C=null;window.googletag.cmd.push(function(){var e=C||S;e&&googletag.pubads().setTargeting("sub",e)}),s=null==l?s:s+"&alice_rules_test="+l,r.open("GET",d+"/als?"+s+"&typ="+w+"&prop="+v+"&plat="+b,!0),r.withCredentials=!0,r.send(),r.onerror=function(){var e="reqfailed_reqfailed_reqfailed_"+o();h=e,window.googletag.cmd.push(function(){googletag.pubads().setTargeting("als_test_clientside",e)});var t={event:"impression",module:{name:"alice-timing",context:"script-load",label:"alice-error-reqfail-"+s}};(window.dataLayer=window.dataLayer||[]).push(t)},r.onreadystatechange=function(){if(4===r.readyState)if(200===r.status){var e=JSON.parse(r.responseText);h=e.als_test_clientside&&0!==e.als_test_clientside.length?e.als_test_clientside:"bou_bou_bou_"+o(),void 0!==e.User&&(void 0!==e.User.mktg&&(U=e.User.mktg,window.localStorage.setItem("mktg",e.User.mktg)),void 0!==e.User.bt&&(L=e.User.bt,window.localStorage.setItem("bt",e.User.bt)),void 0!==e.User.sub&&(C=e.User.sub,window.localStorage.setItem("sub",e.User.sub)),void 0!==e.User.aid&&(server_aid=e.User.aid,window.localStorage.setItem("aid",e.User.aid))),window.googletag.cmd.push(function(){if(e.als_test_clientside&&0!==e.als_test_clientside.length)googletag.pubads().setTargeting("als_test_clientside",e.als_test_clientside),window.localStorage.setItem("als_test_clientside","ls-"+e.als_test_clientside);else{var t=void 0===e.als_test_clientside?"undefined_undefined_undefined_"+o():"blank_blank_blank_"+o();googletag.pubads().setTargeting("als_test_clientside",t);var a={event:"impression",module:{name:"alice-timing",context:"script-load",label:"alice-error-test-client-undefined"}};(window.dataLayer=window.dataLayer||[]).push(a)}if(void 0!==e.User){if(U)googletag.pubads().setTargeting("mktg",U);else{a={event:"impression",module:{name:"alice-timing",context:"script-load",label:"alice-error-mktg-undefined"}};(window.dataLayer=window.dataLayer||[]).push(a)}if(void 0!==L)googletag.pubads().setTargeting("bt",L);else{a={event:"impression",module:{name:"alice-timing",context:"script-load",label:"alice-error-bt-undefined"}};(window.dataLayer=window.dataLayer||[]).push(a)}if(C)googletag.pubads().setTargeting("sub",C);else{a={event:"impression",module:{name:"alice-timing",context:"script-load",label:"alice-error-sub-undefined"}};(window.dataLayer=window.dataLayer||[]).push(a)}(e.User.lucidC1||e.User.lucidC2||e.User.lucidC3||e.User.lucidC4||e.User.lucidC5)&&dataLayer.push({event:"lucidtest",c1_val:e.User.lucidC1,c2_val:e.User.lucidC2,c3_val:e.User.lucidC3,c4_val:e.User.lucidC4,c5_val:e.User.lucidC5})}else{a={event:"impression",module:{name:"alice-timing",context:"script-load",label:"alice-error-user-undefined"}};(window.dataLayer=window.dataLayer||[]).push(a)}if(void 0!==e.Asset)for(var n in e.Asset){var i=e.Asset[n];if(i)googletag.pubads().setTargeting(n,i);else{a={event:"impression",module:{name:"alice-timing",context:"script-load",label:"alice-error-"+n+"-undefined"}};(window.dataLayer=window.dataLayer||[]).push(a)}}else{a={event:"impression",module:{name:"alice-timing",context:"script-load",label:"alice-error-asset-undefined"}};(window.dataLayer=window.dataLayer||[]).push(a)}})}else{r.responseText.substring(0,40);var t="error_"+r.status+"_error_"+o();window.googletag.cmd.push(function(){googletag.pubads().setTargeting("als_test_clientside",t)});var a={event:"impression",module:{name:"alice-timing",context:"script-load",label:"alice-error-ajaxreq-"+r.status+"-"+s}};(window.dataLayer=window.dataLayer||[]).push(a)}}};;_f.apply(null, '.concat(JSON.stringify(t),"); })();")}},W9dX:function(e,t,n){"use strict";var i=n("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.titleClass=t.sourceDetailClass=t.headerClass=t.excerptWrapperClass=t.excerptParagraphClass=t.containerClass=t.captionClass=void 0;var a=n("Jqp9"),o=i(n("wXC7")),r=n("3sMT"),s=o.default.font;t.containerClass=(0,a.css)("margin:",o.default.breakpoint.mobileBlockMargins,";max-width:",o.default.breakpoint.textBodyWidth,"px;width:calc(100% - 40px);",o.default.breakpoint.medium,"{margin:",o.default.breakpoint.desktopStorylineMargins,";}"),t.headerClass=(0,a.css)("margin-bottom:1rem;"),t.titleClass=(0,a.css)("color:",r.color.content.primary,";font-family:",s.serifMedium,";font-size:",s.size(21),";font-weight:",s.weight.mediumBold,";line-height:",s.size(24),";",o.default.breakpoint.small,"{margin-bottom:",s.size(5),";}",o.default.breakpoint.medium,"{font-size:",s.size(21),";line-height:",s.size(24),";}"),t.captionClass=(0,a.css)("color:",r.color.content.quaternary,";font-family:",s.serifBase,";font-size:",s.size(15),";line-height:",s.size(20),";"),t.excerptWrapperClass=(0,a.css)("border:none;box-shadow:0px 0px 8px 0px rgba(0,0,0,0.15);margin-bottom:1rem;padding:",s.size(16)," 20px;",o.default.breakpoint.large,"{padding:",s.size(24)," 30px;}",o.default.darkColorPreference("\n    border: 1px solid ".concat(r.color.background.quaternary,";\n  "))),t.excerptParagraphClass=(0,a.css)("font-family:",s.monoSpace,";font-size:",s.size(16),";line-height:",s.size(22),";margin:0;width:100%;",o.default.breakpoint.medium,"{font-size:",s.size(18),";line-height:",s.size(25),";}&:last-child{margin-bottom:0;}"),t.sourceDetailClass=(0,a.css)("color:",r.color.content.quaternary,";font-family:",s.serifBase,";font-size:",s.size(12),";line-height:",s.size(16),";letter-spacing:0.01em;",o.default.breakpoint.large,"{font-size:",s.size(13),";line-height:",s.size(17),";}a{color:",r.color.content.quaternary,";text-decoration:underline;text-decoration-thickness:1px;text-underline-offset:2px;&:hover{text-decoration:none;color:",r.color.content.quaternary,";}}")},WF6m:function(e,t,n){"use strict";var i=n("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.swiperClass=t.slideClass=void 0;var a=n("Jqp9"),o=i(n("wXC7"));t.swiperClass=(0,a.css)("position:relative;display:flex;flex:none;flex-flow:row nowrap;margin-left:-20px;width:calc(100% + 40px);overflow-y:hidden;scroll-snap-type:x mandatory;-webkit-overflow-scrolling:touch;scroll-behavior:smooth;z-index:2;scrollbar-width:none;clip-path:inset(0 20px);@media (prefers-reduced-motion:reduce){scroll-behavior:auto;}&::-webkit-scrollbar{display:none;}"),t.slideClass=(0,a.css)("position:relative;flex:none;padding:0 20px;width:100%;scroll-snap-align:center;scroll-snap-stop:always;box-sizing:border-box;",o.default.breakpoint.small,"{padding:0 20px 10px;}")},WG9L:function(e,t,n){"use strict";var i=n("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=i(n("q1tI")),o=(i(n("17x9")),n("1gPk")),r=function(e){var t=e.children,n=e.url,i=e.title;return e.opts.blank?a.default.createElement("a",{rel:"noopener noreferrer",target:"_blank",href:n,title:i,className:o.linkClass},t):a.default.createElement("a",{rel:"noopener noreferrer",href:n,title:i,className:o.linkClass},t)};r.displayName="LinkFormat",r.defaultProps={title:void 0,opts:void 0};t.default=r},WGfQ:function(e,t,n){"use strict";var i=n("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=i(n("W/c9"));t.default=a.default},WJy1:function(e,t,n){"use strict";t.a="/vi-assets/static-assets/icon-watching_144x144-631a1da177f9fda1a7f4614ad8e607bd.webp"},WPRB:function(e,t,n){"use strict";n.d(t,"c",(function(){return i})),n.d(t,"d",(function(){return a})),n.d(t,"e",(function(){return o})),n.d(t,"f",(function(){return r})),n.d(t,"b",(function(){return s})),n.d(t,"a",(function(){return l})),n.d(t,"g",(function(){return c}));var i="ap-gift-article",a="#".concat(i),o="ap-share-article",r="#".concat(o),s="actionbar-button",l=function(e){return e.HEADER="header",e.INSTORYMASTHEAD="inStoryMasthead",e.FOOTER="footer",e}({}),c={name:"SHA_UGS2A_0429",variants:["0_Control","1_Invisible"]}},WPUH:function(e,t,n){"use strict";var i=n("VkAN"),a=n.n(i),o=n("gcR/"),r=n.n(o),s=n("lSNA"),l=n.n(s),c=(n("q1tI"),n("eFc+")),u=n.n(c),d=n("Jqp9"),p=n("510Z"),f=n("abzs"),m=n("t0IW"),h=n("XMA8"),g=n("pCca"),y=n("pVYW"),v=n("QLXK"),b=n("8npY"),_=n.n(b),w=function(e){return"articleLarge"===(null==e?void 0:e.name)||/articleLarge/.test(null==e?void 0:e.url)||"superJumbo"===(null==e?void 0:e.name)||/superJumbo/.test(null==e?void 0:e.url)||"jumbo"===(null==e?void 0:e.name)||/jumbo/.test(null==e?void 0:e.url)},x=function(e){var t,n,i=e.media;if(!i||!i.crops||0===i.crops.length)return null;var a=i.crops.map((function(e){return e.renditions})),o=Object(h.d)(a).filter(Boolean),r=Object(h.j)(o);if(!o.length||!o[0])return null;var s=o[0],l=s.height,c=s.width,u=s.url;o=o.filter(w),r&&o.push(r);var d=i.legacyHtmlCaption?i.legacyHtmlCaption:null===(t=i.caption)||void 0===t?void 0:t.text,p={quality:75,auto:"webp"},g=o.map((function(e){return"".concat(Object(m.a)(e.url,p)," ").concat(e.width,"w")})),y=c/l,v=i.altText||d;return{caption:d||null,credit:i.credit||null,richCaption:Object(f.hasRichCaptions)(i)?null==i||null===(n=i.caption)||void 0===n?void 0:n.content:null,defaultCropSrc:Object(m.a)(u,p),orientation:l>=c?"layoutVertical":"layoutHorizontal",srcSet:g,height:l,width:c,renditions:o,initialAspectRatio:y,alt:v}},k={SMALL:"50vw",MEDIUM:"((min-width: 600px) and (max-width: 1004px)) 84vw, (min-width: 1005px) 60vw, 100vw",LARGE:"((min-width: 600px) and (max-width: 1004px)) 84vw, (min-width: 1005px) 80vw, 100vw",FULL:"100vw"};function O(e){var t,n,i,a,o=e.typeName,s=e.className,l=e.media,c=e.containerClass,u=e.imageClass,f=e.lazyLoad,m=e.fullBleedImageStyles,b=e.imageLoadedHandler,w=e.isFullBleed,O=e.imageContainerRef,T=e.useMobileCrop,C=e.textOverlay,E=Object(g.a)().deviceType,S={};switch(o){case"Image":return t=Object(h.i)(l,E),w&&(t=v.SIZE.FULL),n=_.a[t],i=k[t],(S=x(l))?(a=t!==v.SIZE.SMALL||S.caption?"":"sizeSmallNoCaption",r()(p.a,{figureClass:Object(d.cx)(y.c,n,a,S.orientation,s),containerClass:Object(d.cx)(y.a,c),imageClass:u,caption:S.caption,richCaption:S.richCaption,credit:S.credit,defaultCropSrc:S.defaultCropSrc,srcSet:S.srcSet,sizes:i,lazyLoad:f,lazyLoadWidth:S.width,lazyLoadHeight:S.height,fullBleedImageStyles:m,imageLoadedHandler:b,renditions:S.renditions,initialAspectRatio:S.initialAspectRatio,imageContainerRef:O,useMobileCrop:T,textOverlay:C,alt:S.alt})):null;default:return null}}O.defaultProps={className:void 0,typeName:void 0,containerClass:void 0,imageClass:void 0,lazyLoad:!1,fullBleedImageStyles:void 0,imageLoadedHandler:void 0,isFullBleed:void 0,imageContainerRef:void 0,useMobileCrop:!1,textOverlay:null};var T=O,C=n("RIqP"),E=n.n(C),S=n("tn1d"),P=n.n(S),I=n("MKiQ"),M=n.n(I),A=n("139F"),j=n.n(A),N=n("XlcC"),L=n("xMcn"),D=n.n(L),R=n("4uw1"),B=n("KQYy"),z=n("wXC7"),F=n.n(z),U=Object(d.css)("margin:",F.a.breakpoint.mobileBlockMargins,";",F.a.breakpoint.medium,"{margin:",F.a.breakpoint.desktopMediaMargins,";}strong{font-weight:",F.a.font.weight.bold,";}em{font-style:italic;}"),H=Object(d.css)("width:100%;vertical-align:top;"),W=Object(d.css)("margin:1rem auto;",F.a.breakpoint.small,"{margin-top:",F.a.font.size(30),";}");function q(e){var t,n=e.media,i=e.mediaType,a=e.isFirstElement,o=e.className,s=e.lazyLoad,l=e.imageLoadedHandler,c=e.diptychChild,u=e.imageContainerRef,p=e.useMobileCrop,f=e.showCaption,m=e.smallNoCaptionClass,y=e.initialImageWidth,v=Object(g.a)().deviceType,b=Object(d.useTheme)().noFollowExternalLinks,_=D()(),w=Object(R.a)(),O={},T={threeByTwoMediumAt2X:601,threeByTwoSmallAt2X:1,square320:1,square640:601,videoSixteenByNine500:1,videoSixteenByNine1050:601,verticalTwoByThree735:1,thumbLarge:1};switch(i){case"Image":if(t=Object(h.i)(n,v,c),O=x(n)){var C,S=O.height>=O.width?"vertical":"horizontal",I=t.toLowerCase(),A=[U],L=O.alt===O.caption;a&&A.push(W),c&&(A=[]);var z=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:void 0,o=Object(h.i)(e,t,n),r=k[o],s=x(e);return s?{className:a,src:s.defaultCropSrc,srcSet:s.srcSet,sizes:r,onLoad:i}:{}}(n,v,c,l,H);z.alt=L?"":O.alt;var F=null!==(C=O)&&void 0!==C&&C.richCaption?O.richCaption.map((function(e){var t,n=Object(N.createMapInlineUnionWithOptions)({noFollowExternalLinks:b});return e.content?null==e||null===(t=e.content)||void 0===t?void 0:t.map(n):null})):null;if(w&&!s){var q=O.renditions.filter((function(e){return"articleLarge"===(null==e?void 0:e.name)})).map((function(e){var t=e.url,n=e.name;return{target:t,minViewportWidth:T[n]||1}}));_.addImages(q)}var V=r()(B.a,{lazy:s,width:O.width,height:O.height,imageProps:z,renditions:O.renditions,initialAspectRatio:O.initialAspectRatio,imageContainerRef:u,useMobileCrop:p,initialImageWidth:y});return r()(P.a,{media:V,mediaTypeLabel:i,size:I,orientation:S,className:d.cx.apply(void 0,E()(A).concat([o,"img-sz-".concat(I)])),itemID:O.defaultCropSrc,smallNoCaptionClassName:m},void 0,f&&F&&r()(M.a,{},void 0,F),f&&!F&&O.caption&&r()(M.a,{dangerouslySetInnerHTML:{__html:O.caption||""}}),O.credit&&r()(j.a,{"data-testid":"image-credit"},void 0,r()("span",{dangerouslySetInnerHTML:{__html:O.credit||""},"aria-hidden":"false"})))}return null;default:return null}}q.defaultProps={media:{},mediaType:"Image",isFirstElement:!1,className:void 0,lazyLoad:!0,imageLoadedHandler:null,diptychChild:!1,imageContainerRef:null,useMobileCrop:!1,showCaption:!0,smallNoCaptionClass:void 0,initialImageWidth:void 0};var V,G=q,Y=function(e){var t,n=e.data,i=e.className,a=e.isFirstElement,o=e.containerClass,s=e.imageClass,c=e.lazyLoad,u=e.imageOffset,p=e.fullBleedImageStyles,f=e.imageLoadedHandler,m=e.showCaption,h=void 0===m||m,g=e.isFullBleed,y=e.useResponsiveMedia,v=e.useMobileCrop,b=void 0===v||v,_=e.textOverlay,w=e.diptychChild,x=e.imageBlockClass,k=e.smallNoCaptionClass,O=e.initialImageWidth;return t=y?r()(T,{media:n,className:Object(d.cx)(i,l()({},W,a)),containerClass:o,imageClass:s,typeName:"Image",lazyLoad:c,imageOffset:u,fullBleedImageStyles:p,imageLoadedHandler:f,showCaption:h,isFullBleed:g,useMobileCrop:b,textOverlay:_}):r()(G,{diptychChild:w,media:n,mediaType:"Image",isFirstElement:a,imageLoadedHandler:f,lazyLoad:c,useMobileCrop:b,className:x,showCaption:h,smallNoCaptionClass:k,initialImageWidth:O}),r()("div",{"data-testid":"imageblock-wrapper"},void 0,t)};Y.displayName="ImageBlock",Y.fragments={data:u()(V||(V=a()(['\n    fragment ImageBlock_data on ImageBlock {\n      size\n      media {\n        id\n        imageType\n        url\n        uri\n        credit\n        legacyHtmlCaption\n        crops(\n          renditionNames: [\n            "articleLarge"\n            "jumbo"\n            "superJumbo"\n            "articleInline"\n            "popup"\n            "mobileMasterAt3x"\n            "thumbLarge"\n          ]\n        ) {\n          renditions {\n            url\n            name\n            width\n            height\n          }\n        }\n        caption {\n          text\n          content {\n            ... on ParagraphBlock {\n              __typename\n              content {\n                ... on TextInline {\n                  text\n                  ...TextInline_content\n                }\n              }\n            }\n          }\n        }\n        altText\n      }\n    }\n  '])))};t.a=Y},WQPM:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.subscriptClass=t.default=void 0;var i=n("Jqp9"),a=t.subscriptClass=(0,i.css)("vertical-align:sub;font-size:smaller;line-height:0;"),o=(0,i.styled)("sub",{target:"eee5pnf0"})(a,";");t.default=o},WThh:function(e,t,n){"use strict";var i=n("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=i(n("lSNA")),o=i(n("3Rk2")),r=i(n("wXC7")),s=n("DxDJ");function l(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}var c=["fontSize","lineHeight"];t.default=function(e){return function(t,n){var i=t.theme,u=Object.keys(n).reduce((function(e,t){var i=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?l(Object(n),!0).forEach((function(t){(0,a.default)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):l(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},e);return c.indexOf(t)>-1?i[t]=n[t].map((function(e){return r.default.font.size(e)})):i[t]=n[t],i}),{}),d=i.breakpointMap||s.breakpointMap;return(0,o.default)(e.map((function(e){return d[e]})))(u)}}},WUXL:function(e,t,n){"use strict";var i=n("TqRt"),a=n("cDf5");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=i(n("q1tI")),r=(i(n("17x9")),function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=a(e)&&"function"!=typeof e)return{default:e};var n=c(t);if(n&&n.has(e))return n.get(e);var i={__proto__:null},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var r in e)if("default"!==r&&{}.hasOwnProperty.call(e,r)){var s=o?Object.getOwnPropertyDescriptor(e,r):null;s&&(s.get||s.set)?Object.defineProperty(i,r,s):i[r]=e[r]}return i.default=e,n&&n.set(e,i),i}(n("UMeL"))),s=i(n("giFd")),l=i(n("ZssJ"));function c(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(c=function(e){return e?n:t})(e)}var u=function(e){var t=e.podcastName,n=e.onPlayPause,i=e.playerRef,a=e.hideTranscript,c=e.isPlaying,u=e.audioDuration,d=e.currentTime,p=e.isVisible,f=e.showControls;return o.default.createElement("header",{className:r.transcriptHeaderClass},o.default.createElement("div",{className:r.kickerClass,id:"modal-title"},"transcript"),o.default.createElement(s.default,{podcastName:t,hideTranscript:a}),f&&o.default.createElement(l.default,{playerRef:i,isPlaying:c,onPlayPause:n,audioDuration:u,currentTime:d,isVisible:p}))};u.displayName="TranscriptHeader",u.defaultProps={podcastName:void 0,onPlayPause:void 0,playerRef:void 0,hideTranscript:void 0,isPlaying:void 0,audioDuration:void 0,currentTime:void 0,isVisible:void 0,showControls:!0};t.default=u},"Wj/z":function(e,t,n){"use strict";var i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.config=void 0;var a=n("djNW"),o=i(n("Ad4I")),r=i(n("DKae")),s=i(n("FY2l")),l=i(n("5f1c")),c=n("6aj0");t.config={name:"gatewayTopper",enableOfferEligibility:!0,fallback:c.fallback,campaigns:{DEFAULT:{component:o.default,content:function(){return{text:"Support independent journalism with a subscription.",loggedIn:!1}},tracking:{module:{name:"gatewayTopper",context:"SubconConvGatewayTopperLoggedOut234",label:"DEFAULT",element:{name:a.Action.LogIn,label:"Log in",url:"https://myaccount.nytimes.com/auth/login?response_type=cookie&client_id=freex&asset=RegiWallStandalone&application=Free_Experience&reload=3&redirect_uri=https://www.nytimes.com/subscription/onboarding-offer?campaignID=7JFJX&EXIT_URI=https://"}}}},SUBCON_CONV_GATEWAY_TOPPER_234:{component:o.default,content:function(){return{text:"Support independent journalism with a subscription."}}},CONV_WELL_CUSTOM_PAYWALL_245:{component:o.default,content:function(){return{text:"Enjoy unlimited access to all of The Times."}}},CONV_36_HOURS_PAYWALL_TEST_242:{component:o.default,audiences:{"0_control":{content:function(){return{text:"Support independent journalism with a subscription."}}},"1_variant_2_variant_unlimited_access":{content:function(){return{text:"Subscribe for unlimited access to all of The Times."}}},"3_variant_travel_focused":{content:function(){return{text:"Find your perfect travel itinerary with a subscription."}}}},tracking:{module:{name:"gatewayTopper",context:"36HoursGatewayTopperTest0124",label:"DEFAULT",element:{name:a.Action.LogIn,label:"Log in",url:"https://myaccount.nytimes.com/auth/login?response_type=cookie&client_id=freex&asset=RegiWallStandalone&application=Free_Experience&reload=3&redirect_uri=https%3A%2F%2Fwww.nytimes.com%2Fsubscription%2Fonboarding-offer%3FcampaignID%3D7JFJX%26EXIT_URI%3Dhttps%253A%252F%252F"}}},tests:[{test:"MKT_SubCon_36hours_CustomPW_0124"}]},SUBCON_CONV_ALL_ACCESS_UPGRADE_234_TOPPER:{component:l.default,content:function(e){var t,n="",i="null",a={GAMES:{hasProduct:!1,displayName:"Games"},COOKING:{hasProduct:!1,displayName:"Cooking"},WIRECUTTER:{hasProduct:!1,displayName:"Wirecutter"},ATHLETIC:{hasProduct:!1,displayName:"The Athletic"}};if(null==e?void 0:e.subInfo){null===(t=null==e?void 0:e.subInfo)||void 0===t||t.forEach((function(e){"ACTIVE"===e.status&&e.products.forEach((function(e){a[e]&&(a[e].hasProduct=!0)}))}));var o=Object.values(a).filter((function(e){return e.hasProduct})).map((function(e){return e.displayName}));n=o.join(", ").replace(/, ([^,]*)$/," and $1"),1===o.length?i="single":o.length>=1&&(i="multi")}return{productCopy:n,chooseCopy:i,loggedIn:!0}}},AUD_ENGAGE_GIFT_ARTICLES_LOGGED_OUT_237:{component:r.default,content:function(){return{loggedIn:!1,uri:(0,s.default)("https://myaccount.nytimes.com/auth/login").withExitUri().toString()}},tracking:{module:{name:"gatewayTopper",context:"AudEngageGiftArticlesLoggedOut237",label:"DEFAULT",element:{name:a.Action.LogIn,label:"Log in"}}}},AUD_ENGAGE_GIFT_ARTICLES_LOGGED_IN_237:{component:r.default,content:function(){return{loggedIn:!0}},tracking:{module:{name:"gatewayTopper",context:"AudEngageGiftArticlesLoggedIn237",label:"DEFAULT"}}},CONV_WORDLEBOT_PAYWALL_GATEWAY_TOPPER_TEST_242:{component:o.default,tracking:{module:{name:"gatewayTopper",context:"wordlebotGatewayTopperTest0124",label:"DEFAULT",element:{name:a.Action.LogIn,label:"Log in",url:"https://myaccount.nytimes.com/auth/login?response_type=cookie&client_id=freex&asset=RegiWallStandalone&application=Free_Experience&reload=3&redirect_uri=https%3A%2F%2Fwww.nytimes.com%2Fsubscription%2Fonboarding-offer%3FcampaignID%3D7JFJX%26EXIT_URI%3Dhttps%253A%252F%252F"}}},content:function(){return{text:"Stay sharp with word,  visual, logic and number games."}}},SUBCON_CONV_GATEWAY_TOPPER_LOGGED_IN_234_NP:{component:o.default},SUBCON_CONV_SEP_PROMO_239:{component:o.default,audiences:{eligible_for_all_access_promo_offer:{content:function(){return{text:"Enjoy unlimited access to all of The Times.",loggedIn:!1}}},eligible_for_all_access_promo_offer_1_variant:{content:function(){return{text:"Discover unlimited access to all of The Times.",loggedIn:!1}}},eligible_for_all_access_promo_offer_2_variant:{content:function(){return{text:"Enjoy unlimited access to all of The Times.",loggedIn:!1}}},eligible_for_all_access_promo_offer_wordle_bot_spelling_bee_buddy:{content:function(){return{text:"Enjoy unlimited access to all of The Times.",loggedIn:!1}}}},tests:[{test:"CONV_SubCon_Paywall_FT_Sale_246"}],tracking:{module:{name:"gatewayTopper",context:"SubconConvGatewayTopperSepPromo239",label:"DEFAULT",element:{name:a.Action.LogIn,label:"Log in",url:"https://myaccount.nytimes.com/auth/login?response_type=cookie&client_id=freex&asset=RegiWallStandalone&application=Free_Experience&reload=3&redirect_uri=https://www.nytimes.com/subscription/onboarding-offer?campaignID=7JFJX&EXIT_URI=https://"}}}}}}},WnQp:function(e,t,n){"use strict";var i=this&&this.__makeTemplateObject||function(e,t){return Object.defineProperty?Object.defineProperty(e,"raw",{value:t}):e.raw=t,e};Object.defineProperty(t,"__esModule",{value:!0}),t.buttonClass=t.logoClass=t.mainContent=t.contentTextClass=t.headerTextClass=void 0;var a=n("Jqp9"),o=n("lVLo");t.headerTextClass=(0,a.css)(r||(r=i(["\n  font-family: ",";\n  font-size: 15px;\n  font-weight: ",";\n  margin: auto 0;\n  white-space: pre-wrap;\n  @media (min-width: ","px) {\n    white-space: unset;\n  }\n  @media (max-width: ","px) {\n    margin: 0 0 0 20px;\n  }\n"],["\n  font-family: ",";\n  font-size: 15px;\n  font-weight: ",";\n  margin: auto 0;\n  white-space: pre-wrap;\n  @media (min-width: ","px) {\n    white-space: unset;\n  }\n  @media (max-width: ","px) {\n    margin: 0 0 0 20px;\n  }\n"])),o.fonts.franklin,o.fontWeights.bold,o.widths.small,o.widths.medium),t.contentTextClass=(0,a.css)(s||(s=i(["\n  font-family: ",";\n  font-size: 18px;\n  font-weight: ",";\n  margin: auto;\n  strong {\n    display: block;\n  }\n  @media (min-width: ","px) {\n    width: 45%;\n  }\n"],["\n  font-family: ",";\n  font-size: 18px;\n  font-weight: ",";\n  margin: auto;\n  strong {\n    display: block;\n  }\n  @media (min-width: ","px) {\n    width: 45%;\n  }\n"])),o.fonts.cheltenham,o.fontWeights.light,o.widths.medium);var r,s,l,c,u;t.mainContent=(0,a.css)(l||(l=i(["\n  display: flex;\n  align-items: center;\n  justify-content: space-between;\n  border-radius: 6px;\n  padding: ","px;\n  margin: 0 ","px ","px;\n  width: calc(100% - (","px + ","px));\n  background-color: ",";\n  gap: 26px;\n  @media (min-width: ","px) {\n    gap: 0;\n  }\n"],["\n  display: flex;\n  align-items: center;\n  justify-content: space-between;\n  border-radius: 6px;\n  padding: ","px;\n  margin: 0 ","px ","px;\n  width: calc(100% - (","px + ","px));\n  background-color: ",";\n  gap: 26px;\n  @media (min-width: ","px) {\n    gap: 0;\n  }\n"])),45,20,20,90,40,o.colors.grayLightBackgroundTertiary,o.widths.medium),t.logoClass=(0,a.css)(c||(c=i(["\n  display: none;\n  @media (min-width: ","px) {\n    display: flex;\n  }\n  svg {\n    width: 154px;\n    height: 20px;\n  }\n"],["\n  display: none;\n  @media (min-width: ","px) {\n    display: flex;\n  }\n  svg {\n    width: 154px;\n    height: 20px;\n  }\n"])),o.widths.medium),t.buttonClass=(0,a.css)(u||(u=i(["\n  display: flex;\n  white-space: nowrap;\n  border-radius: 3px;\n  font-family: ",";\n  font-weight: ",";\n  font-size: 12px;\n  text-decoration: none;\n  background-color: ",";\n  color: ",";\n  padding: 7px 30px;\n  text-transform: uppercase;\n"],["\n  display: flex;\n  white-space: nowrap;\n  border-radius: 3px;\n  font-family: ",";\n  font-weight: ",";\n  font-size: 12px;\n  text-decoration: none;\n  background-color: ",";\n  color: ",";\n  padding: 7px 30px;\n  text-transform: uppercase;\n"])),o.fonts.franklin,o.fontWeights.semiBold,o.colors.black,o.colors.white)},"WtH/":function(e,t,n){"use strict";var i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var a=i(n("q1tI")),o=n("iolA"),r=n("tHll"),s=n("wKlc"),l=i(n("JM9o"));t.default=(0,o.withErrorBoundary)((function(e){var t=(0,r.useUnit)(s.config).unit,n=e.isEmbedded;return(null==t?void 0:t.canShow)&&(null==t?void 0:t.component)?a.default.createElement(l.default,{unit:t,clientProps:e},a.default.createElement(t.component,{unit:t,isEmbedded:n})):null}))},Wtq3:function(e,t,n){"use strict";var i=n("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.updateTimeClass=t.liveContainerClass=t.listClass=t.lastModClass=t.innerClass=t.hideOnWebClass=t.headingStyleClass=t.containerClass=t.bulletStyleClass=void 0;var a=n("Jqp9"),o=i(n("wXC7")),r=n("3sMT");t.containerClass=(0,a.css)("padding:15px;width:",o.default.breakpoint.mobileFullWidth,";margin:",o.default.breakpoint.mobileBlockMargins,";box-sizing:border-box;border:1px solid ",r.color.stroke.quaternary,";background-color:",r.color.background.primary,";a{color:",r.color.content.primary,";text-decoration:none;}",o.default.breakpoint.small,"{padding:20px;width:100%;max-width:600px;}",o.default.breakpoint.medium,"{margin:",o.default.breakpoint.desktopStorylineMargins,";}",o.default.printHide),t.innerClass=(0,a.css)("width:100%;"),t.headingStyleClass=(0,a.css)("font-family:",o.default.font.franklinBase,";font-weight:",o.default.font.weight.bold,";font-size:",o.default.font.size(16),";line-height:",o.default.font.size(22),";color:",r.color.content.secondary,";margin-top:0;margin-bottom:5px;",o.default.breakpoint.small,"{font-size:",o.default.font.size(17),";line-height:",o.default.font.size(24),";}a{color:",r.color.content.secondary,";}a:hover{border-bottom:1px solid ",r.color.stroke.tertiary,";}::after{content:'›';margin-left:4px;}"),t.bulletStyleClass=(0,a.css)("font-family:",o.default.font.franklinBase,";font-weight:",o.default.font.weight.medium,";font-size:",o.default.font.size(16),";line-height:",o.default.font.size(22),";margin-left:1em;list-style:disc;margin-bottom:0.75em;",o.default.breakpoint.small,"{font-size:",o.default.font.size(17),";line-height:",o.default.font.size(24),";}a{color:",r.color.content.secondary,";border-bottom:1px solid ",r.color.stroke.tertiary,";}a:hover{border-bottom:1px solid transparent;}"),t.liveContainerClass=(0,a.css)("font-family:",o.default.font.franklinBase,";display:flex;align-items:baseline;justify-content:space-between;color:",r.color.signal.breaking,";font-size:",o.default.font.size(16),";",o.default.breakpoint.small,"{font-size:",o.default.font.size(17),";}"),t.listClass=(0,a.css)("margin-top:15px;margin-bottom:0;"),t.lastModClass=(0,a.css)("font-family:",o.default.font.franklinBase,";font-size:",o.default.font.size(12),";color:",r.color.signal.breaking,";",o.default.breakpoint.medium,"{font-size:",o.default.font.size(13),";}"),t.updateTimeClass=(0,a.css)("font-family:",o.default.font.franklinBase,";color:",r.color.signal.breaking,";font-size:",o.default.font.size(14),";max-width:60px;"),t.hideOnWebClass=(0,a.css)("display:none;.NYTApp &{display:block;}")},"X+xt":function(e,t,n){"use strict";var i=n("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.openAttribute=t.getAttributeHost=t.getAttributeConfig=void 0;var a=i(n("lSNA"));function o(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}var r=function(){var e=.6*window.screen.width,t=e*(3/4);return{width:e>800?e:800,height:t>600?t:600}},s=t.getAttributeHost=function(){return"scoop.nyt.net"===window.location.hostname?"https://attribute.newsdev.nyt.net":"https://attribute.stg.newsdev.nyt.net"};t.getAttributeConfig=function(e){return function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?o(Object(n),!0).forEach((function(t){(0,a.default)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):o(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},{interactiveConfig:{attribute:[{label:"Question",type:"text",slug:"question_text"},{label:"Email address",type:"text",slug:"email_identity"},{label:"Name (optional)",type:"text",slug:"name_identity"},{label:"Location (optional)",type:"text",slug:"location_text"}]},postbackId:e})},t.openAttribute=function(){var e,t,n,i,a="".concat(s(),"/postmessage"),o=(e=window,t=e.screen,n=e.top,i=r(),{left:n.screenX+(t.width-i.width)/2,top:n.screenY+(t.height-i.height)/2}),l=r(),c=window.open("".concat(a),"attributeWindow","resizable,scrollbars,status,"+"left=".concat(o.left,",top=").concat(o.top,",height=").concat(l.height,",width=").concat(l.width));return function(e){e.opener.addEventListener("unload",(function(){e.close()}))}(c),c}},X4Xf:function(e,t,n){"use strict";var i=n("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=i(n("q1tI")),o=(i(n("17x9")),n("Jqp9")),r=i(n("42vy")),s=n("bNs8"),l=n("V6Yu"),c=i(n("XlcC")),u=i(n("RQdI")),d=n("Au1T"),p=function(e,t){var n,i,o=[];if(null!=e&&null!==(n=e.sprinkledBody)&&void 0!==n&&n.content)i=e.sprinkledBody.content;else{if(null==e||!e.content)return[];i=e.content}var r=i.filter((function(e){return"Dropzone"!==e.__typename}));return r.forEach((function(e,t){if(t<r.length-1&&"Heading2Block"===e.__typename&&"BylineBlock"===r[t+1].__typename){var n={heading2:e,byline:r[t+1]};o.push(n)}})),o.map((function(e){var n,i=e.byline,o=e.heading2,r=o.content.map(c.default),d=(0,l.generateContentLink)(o.content),p=(n=d,function(e){e.preventDefault(),document.getElementById(n).scrollIntoView()}),f=a.default.createElement("p",null,i.bylines[0].prefix," ",(0,s.simpleByline)({authors:i.bylines[0].creators,format:"string"}));return a.default.createElement(u.default,{key:"table-of-contents-item-".concat(r.join(""))},t?a.default.createElement("span",{role:"presentation",onKeyPress:p,onClick:p},r,f):a.default.createElement("a",{href:"#".concat(d),onKeyPress:p,onClick:p},r,f))}))},f=function(e){var t=[];if(!(e||e.content||e.content.content||e.content.content.length))return null;var n=e.content.content;return e.content.content.forEach((function(i,a){if(a<e.content.content.length-1&&"heading2"===i.type.name&&"byline_with_role"===n[a+1].type.name){var o={heading2:i,byline:n[a+1]};t.push(o)}})),t.map((function(e){var t=e.byline,n=e.heading2.textContent;return a.default.createElement(u.default,{key:"table-of-contents-item-".concat(n)},a.default.createElement("a",{href:"#"},n,t.attrs.byline_author_groups.map((function(e,t){var n="".concat(e.prefix," ");return e.authors.forEach((function(t,i){n+=t.titleCaseName,i===e.authors.length-2?n+=" and ":i!==e.authors.length-1&&(n+=", ")})),a.default.createElement("div",{contentEditable:!1,key:"group-".concat(t.toString())},n)}))))}))},m=function(e){var t=e.children,n=e.isInHybrid,i=e.isInEditor,o=e.article,s=e.ledeText,l=e.minItems,c=e.maxItems,u=[];if((!t||i)&&(u=(i?f(o):p(o,n)).slice(0,+c)).length<+l){if(!i)return null;u=a.default.createElement("p",null,"When at least ",l," headings next to a byline are present, they will display here.")}return a.default.createElement("div",{className:d.containerClass},!i&&t||a.default.createElement(a.default.Fragment,null,a.default.createElement(r.default,null,s),a.default.createElement(d.StyledTableOfContents,null,u)))};m.displayName="TableOfContents",m.defaultProps={children:null,isInEditor:!1,isInHybrid:!1,ledeText:"Table of Contents Title Here",maxItems:"10",minItems:"3"};t.default=(0,o.withTheme)(m)},X7zQ:function(e,t,n){"use strict";t.a={ARICLE_TAXONOMY:"assetTaxonomy",ARTICLE_URL:"url",COMMENT_BODY:"commentBody",COMMENT_NOTIFY:"notifyViaEmailOnApproval",COMMENT_TYPE:"commentType",DISPLAY_NAME:"userDisplayName",EMAIL:"userEmail",LOCATION:"userLocation",PARENT_ID:"parentID",USER_ID:"userID",AVATAR_URL:"avatarUrl",IS_STAFF_COMMENTER:"isStaffCommenter"}},XMA8:function(e,t,n){"use strict";n.d(t,"g",(function(){return a})),n.d(t,"h",(function(){return o})),n.d(t,"a",(function(){return r})),n.d(t,"b",(function(){return s})),n.d(t,"k",(function(){return l})),n.d(t,"m",(function(){return c})),n.d(t,"e",(function(){return u})),n.d(t,"f",(function(){return d})),n.d(t,"d",(function(){return p})),n.d(t,"l",(function(){return f})),n.d(t,"c",(function(){return m})),n.d(t,"p",(function(){return h})),n.d(t,"o",(function(){return g})),n.d(t,"j",(function(){return y})),n.d(t,"n",(function(){return v})),n.d(t,"i",(function(){return b}));var i=function(e,t){return e.find((function(e){return(null==e?void 0:e.name)===t}))},a=function(e,t){if(!e)return null;for(var n=0;n<t.length;n+=1){var a=i(e,t[n]);if(a){var o=a.url;return"images"===o.split("/")[0]&&(a.url="https://static01.nyt.com/".concat(o)),a.url}}return null},o=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"crops";return e&&e[t]&&0!==e[t].length&&e[t][0].renditions&&0!==e[t][0].renditions.length?e[t][0].renditions[0].url:null},r="https://static01.nyt.com/newsgraphics/images/icons/defaultCrop.png",s="https://static01.nyt.com/newsgraphics/images/icons/defaultPromoCrop.png",l=function(e){return a(e,["facebookJumbo","videoSixteenByNineJumbo1600","articleLarge"])||s},c=function(e){return a(e,["videoSixteenByNine3000","videoSixteenByNineJumbo1600","articleLarge"])||r},u=function(e,t){return a(e,["thumbLarge"])||t||r},d=function(e){return a(e,["thumbStandard"])||r},p=function e(t){return t.reduce((function(t,n){return t.concat(Array.isArray(n)&&n.length>0?e(n):n)}),[])},f=function(e){var t,n,i;return e?e.promoCrops?e.promoCrops:e.assetCrops?e.assetCrops:null!==(t=e.promotionalMedia)&&void 0!==t&&t.assetCrops?e.promotionalMedia.assetCrops:null!==(n=e.promotionalMedia)&&void 0!==n&&null!==(i=n.promotionalMedia)&&void 0!==i&&i.assetCrops?e.promotionalMedia.promotionalMedia.assetCrops:null:null},m=function(e){if(!e)return"";if(!e.promotionalMedia)return"";var t,n=e.promotionalMedia.crops||e.promotionalMedia.spanImageCrops||null;n||null!==(t=e.promotionalMedia.promotionalMedia)&&void 0!==t&&t.crops&&(n=e.promotionalMedia.promotionalMedia.crops);if(!n)return"";var i=n.map((function(e){return e.renditions}));if(!i)return"";var a=p(i);return a||""},h="mobileMasterAt3x",g=function(e){return(null==e?void 0:e.name)===h},y=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];if(!Array.isArray(e))return null;var t=e.filter(g);return 0===t.length?null:t[0]},v=function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return!(!Array.isArray(t)||0===t.length)&&(null!==(e=t[0])&&void 0!==e&&e.renditions&&(t=p(t.map((function(e){return e.renditions})))),void 0===t.find((function(e){return(null==e?void 0:e.width)>650}))&&void 0===t.find((function(e){var t;return".gif"===(null==e||null===(t=e.url)||void 0===t?void 0:t.substring(e.url.length-4))})))},b=function(e,t){var n,i,a=arguments.length>2&&void 0!==arguments[2]&&arguments[2],o=p((null==e||null===(n=e.media)||void 0===n||null===(i=n.crops)||void 0===i?void 0:i.map((function(e){return e.renditions})))||[]),r=o.filter((function(e){return(null==e?void 0:e.name)!==h}));return v(r)&&"desktop"===t&&!a?"SMALL":e.size}},XMNT:function(e,t,n){"use strict";var i=n("TqRt"),a=n("cDf5");Object.defineProperty(t,"__esModule",{value:!0}),t.willShowTwoPartStamp=t.getTrans=t.default=t.UPDATED=t.TIME_DISPLAY_EPOCH=t.PUBLISHED=t.HIDE_UPDATED_TS_SECTIONS=t.DATEONLY=void 0;var o=i(n("lSNA")),r=i(n("q1tI")),s=(i(n("17x9")),n("Jqp9")),l=n("7FfI"),c=n("4mEQ"),u=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=a(e)&&"function"!=typeof e)return{default:e};var n=d(t);if(n&&n.has(e))return n.get(e);var i={__proto__:null},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var r in e)if("default"!==r&&{}.hasOwnProperty.call(e,r)){var s=o?Object.getOwnPropertyDescriptor(e,r):null;s&&(s.get||s.set)?Object.defineProperty(i,r,s):i[r]=e[r]}return i.default=e,n&&n.set(e,i),i}(n("h58Z"));function d(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(d=function(e){return e?n:t})(e)}var p=t.TIME_DISPLAY_EPOCH="2019-08-20T04:00:04.000Z",f=t.HIDE_UPDATED_TS_SECTIONS=["opinion"],m=t.DATEONLY="LL",h=t.UPDATED={en:"Updated ",es:"Actualizado ","zh-cn":"最后更新于"},g=t.PUBLISHED={en:"Published ",es:"Publicado ","zh-cn":"本文发布于"},y=t.getTrans=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"en",t=arguments.length>1?arguments[1]:void 0;return Object.prototype.hasOwnProperty.call(t,e)?t[e]:t.en},v=(t.willShowTwoPartStamp=function(e,t){if(!e||!t)return!1;if(!(0,l.isAfterISO)(e,p))return!1;if((0,l.isSame)(e,t))return!1;if((0,l.timeDiff)("minutes",15,e,t))return!1;var n=(0,l.isISOToday)(e),i=(0,l.isISOToday)(t),a=(0,l.timeDiff)("days",1,e,t);return!(!n||!i)||!(!n&&!i&&a)&&e!==t},function(e,t){return e.endsWith(t)?r.default.createElement(r.default.Fragment,null,e.replace(t,""),r.default.createElement("span",{className:u.timeChunkClass},t)):e}),b=function(e){var t=e.children,n=e.className,i=e.updatedText,a=e.lastMajorModification,d=e.canShowTime,b=e.overrideTimeDisplayEpoch,_=e.showUpdatedTimestamp,w=e.useSection,x=e.showReadingTime,k=(0,s.useTheme)();if(!t)return null;var O=(0,l.getTimestampLocale)(null==k?void 0:k.language),T=(0,l.isISOToday)(t),C=f.some((function(e){return(0,c.themeHas)(e,k)}));(0,l.isSame)(t,a)&&(a=void 0),(0,l.timeDiff)("minutes",15,t,a)&&(a=void 0),!1===_&&(a=void 0);var E=d&&T&&!a?"LLLL":m,S=(0,l.formatDate)(t,E,O),P=(0,l.formatDate)(t,""),I=y(O,h),M=null===_?((0,l.isAfterISO)(t,p)||b)&&!C:_;if(a&&!i&&M){var A=(0,l.isISOToday)(a),j=a&&(0,l.timeDiff)("hours",24,t,a)?"llll":m,N=y(O,g),L=T?null:N;!T&&A&&(j="LLLL");var D=(0,l.formatDate)(a,j,O),R=T&&A&&(0,l.timeDiff)("hours",3,a,[]),B=(0,l.formatDate)(a,"");if(T||A||!(0,l.timeDiff)("days",1,t,a)||(I=null,D=null,L=null),"LLLL"===E){var z=(0,l.formatDate)(t,"llll",O);S=v(S,z)}if(D&&("LLLL"===j||"llll"===j)){var F=(0,l.formatDate)(a,"llll",O);D=v(D,F)}var U=r.default.createElement(u.PubbedTime,null,L,S),H=I&&D&&r.default.createElement(u.UpdatedTime,{isRecentModification:R},I,D),W=H?B:P;return r.default.createElement(u.StyledTimeStampWithTimeWrap,{dateTime:W,useSection:w,className:n},"rightToLeft"===k.languageDirection&&H,U,"rightToLeft"!==k.languageDirection&&H)}if("LLLL"===E){var q=(0,l.formatDate)(t,"llll",O);S=v(S,q)}return r.default.createElement(u.default,{useSection:w,className:(0,s.cx)(n,(0,o.default)((0,o.default)({},u.readTimeClass,x),"reading-time",x)),dateTime:P},i&&r.default.createElement(r.default.Fragment,null,r.default.createElement("span",{className:u.liveBriefingDateClass},S),r.default.createElement("span",{className:u.separatorClass},"•")),i?r.default.createElement("span",{className:u.updatedClass},I," "):null,i||S)};b.displayName="Timestamp",b.defaultProps={children:null,updatedText:!1,lastMajorModification:void 0,canShowTime:!1,className:void 0,showUpdatedTimestamp:null,overrideTimeDisplayEpoch:!1,useSection:!0,showReadingTime:!1};t.default=b},XMyW:function(e,t,n){"use strict";n.r(t),n.d(t,"caData",(function(){return I})),n.d(t,"CaDataProvider",(function(){return M}));var i=n("q1tI"),a=n.n(i),o=n("cRkx"),r=n("wNME"),s=n("NByq"),l=n("05yZ"),c=n("83Mo"),u=n("YawQ"),d=n("jP6B"),p=n("nM+O"),f=n("gUwe"),m=n("Ow4k"),h=n("ULBD"),g=n("z4uL"),y=n("y1T0"),v=n("IVQz"),b=n("KIO/"),_=n("Ikdi"),w=n("7HgC"),x=n("WJy1"),k=n("PlW/"),O=n("IvQ5"),T=n("4KWU"),C=n("eHD8"),E=n("3VDn"),S=n("H0B8"),P=n("EXHk"),I=[{url:"https://www.nytimes.com/ca/section/us",name:"U.S.",dropdown:[{columnWidth:2,heading:"Sections",type:"links",links:[{copy:"U.S.",link:"https://www.nytimes.com/ca/section/us"},{copy:"Politics",link:"https://www.nytimes.com/ca/section/politics"},{copy:"New York",link:"https://www.nytimes.com/ca/section/nyregion"},{copy:"California",link:"https://www.nytimes.com/column/california-today"},{copy:"Education",link:"https://www.nytimes.com/ca/section/education"},{copy:"Health",link:"https://www.nytimes.com/ca/section/health"},{copy:"Obituaries",link:"https://www.nytimes.com/ca/section/obituaries"},{copy:"Science",link:"https://www.nytimes.com/ca/section/science"}]},{columnWidth:2,hamburgerColumnWidth:3,heading:"Sections",hideHeading:!0,type:"links",links:[{copy:"Climate",link:"https://www.nytimes.com/ca/section/climate"},{copy:"Weather",link:"https://www.nytimes.com/ca/section/weather"},{copy:"Sports",link:"https://www.nytimes.com/ca/section/sports"},{copy:"Business",link:"https://www.nytimes.com/ca/section/business"},{copy:"Tech",link:"https://www.nytimes.com/ca/section/technology"},{copy:"The Upshot",link:"https://www.nytimes.com/ca/section/upshot"},{copy:"The Magazine",link:"https://www.nytimes.com/ca/section/magazine"}]},{columnWidth:4,heading:"U.S. Politics",type:"links",style:{marginLeft:"2rem"},links:[{copy:"2024 Elections",link:"https://www.nytimes.com/news-event/2024-election"},{copy:"Primary Results",link:"https://www.nytimes.com/interactive/2024/us/elections/republican-primary-delegates-tracker-calendar.html"},{copy:"Supreme Court",link:"https://www.nytimes.com/topic/organization/us-supreme-court"},{copy:"Congress",link:"https://www.nytimes.com/topic/organization/us-congress"},{copy:"Biden Administration",link:"https://www.nytimes.com/spotlight/joe-biden"}]},{columnWidth:4,heading:"Top Stories",type:"links",links:[{copy:"Trump Investigations",link:"https://www.nytimes.com/news-event/donald-trump-investigations"},{copy:"Immigration",link:"https://www.nytimes.com/news-event/immigration-us"},{copy:"Abortion",link:"https://www.nytimes.com/spotlight/abortion-news"},{copy:"Campus Protests",link:"https://www.nytimes.com/news-event/college-campus-gaza-protests"}]},{columnWidth:4,heading:"Newsletters",footer:{copy:"See all newsletters",link:"https://www.nytimes.com/newsletters"},type:"thumbnailContent",items:[{title:"The Morning",description:"Make sense of the day’s news and ideas.",link:"https://www.nytimes.com/newsletters/morning-briefing",thumbnailImage:v.a},{title:"The Upshot",description:"Analysis that explains politics, policy and everyday life.",link:"https://www.nytimes.com/newsletters/upshot",thumbnailImage:_.a}]},{type:"hamburgerSpacer",hamburgerColumnWidth:1,columnWidth:0},{columnWidth:4,heading:"Podcasts",footer:{copy:"See all podcasts",link:"https://www.nytimes.com/spotlight/podcasts"},type:"thumbnailContent",items:[{title:"The Daily",description:"The biggest stories of our time, in 20 minutes a day.",link:"https://www.nytimes.com/column/the-daily",thumbnailImage:"https://static01.nyt.com/images/2017/01/29/podcasts/the-daily-album-art/the-daily-album-art-mediumSquare149-v3.jpg?quality=75&auto=webp&disable=upscale"},{title:"The Run-Up",description:"On the campaign trail with Astead Herndon.",link:"https://www.nytimes.com/column/election-run-up-podcast",thumbnailBorder:!0,thumbnailImage:"https://static01.nyt.com/images/2022/08/29/podcasts/the-run-up-album-art/the-run-up-album-art-thumbLarge.jpg?quality=75&auto=webp&disable=upscale"}]}]},{url:"https://www.nytimes.com/ca/section/world",name:"World",dropdown:[{columnWidth:1},{columnWidth:4,hamburgerColumnWidth:5,heading:"Sections",type:"links",innerGridColumnCount:2,columns:[[{copy:"World",link:"https://www.nytimes.com/ca/section/world"},{copy:"Africa",link:"https://www.nytimes.com/ca/section/world/africa"},{copy:"Americas",link:"https://www.nytimes.com/ca/section/world/americas"},{copy:"Asia",link:"https://www.nytimes.com/ca/section/world/asia"},{copy:"Australia",link:"https://www.nytimes.com/ca/section/world/australia"},{copy:"Canada",link:"https://www.nytimes.com/ca/section/world/canada"}],[{copy:"Europe",link:"https://www.nytimes.com/ca/section/world/europe"},{copy:"Middle East",link:"https://www.nytimes.com/ca/section/world/middleeast"},{copy:"Science",link:"https://www.nytimes.com/ca/section/science"},{copy:"Climate",link:"https://www.nytimes.com/ca/section/climate"},{copy:"Weather",link:"https://www.nytimes.com/ca/section/weather"},{copy:"Health",link:"https://www.nytimes.com/ca/section/health"},{copy:"Obituaries",link:"https://www.nytimes.com/ca/section/obituaries"}]]},{columnWidth:1},{columnWidth:5,heading:"Top Stories",type:"links",links:[{copy:"Israel-Hamas War",link:"https://www.nytimes.com/news-event/israel-hamas-gaza"},{copy:"Russia-Ukraine War",link:"https://www.nytimes.com/news-event/ukraine-russia"}]},{columnWidth:4,heading:"Newsletters",type:"thumbnailContent",items:[{title:"Morning Briefing: Europe",description:"Get what you need to know to start your day.",link:"https://www.nytimes.com/newsletters/morning-briefing-europe",thumbnailImage:u.a},{title:"The Interpreter",description:"Original analysis on the week’s biggest global stories.",link:"https://www.nytimes.com/newsletters/the-interpreter",thumbnailImage:y.a}]},{columnWidth:4,heading:"Newsletters",hideHeading:!0,footer:{copy:"See all newsletters",link:"https://www.nytimes.com/newsletters"},type:"thumbnailContent",items:[{title:"Your Places: Global Update",description:"The latest news for any part of the world you select.",link:"https://www.nytimes.com/newsletters/your-places-global-update",thumbnailImage:C.a},{title:"Canada Letter",description:"Backstories and analysis from our Canadian correspondents.",link:"https://www.nytimes.com/newsletters/canada-letter",thumbnailImage:r.a}]}]},{url:"https://www.nytimes.com/ca/section/business",name:"Business",dropdown:[{columnWidth:1},{columnWidth:2,heading:"Sections",type:"links",links:[{copy:"Business",link:"https://www.nytimes.com/ca/section/business"},{copy:"Tech",link:"https://www.nytimes.com/ca/section/technology"},{copy:"Economy",link:"https://www.nytimes.com/ca/section/business/economy"},{copy:"Media",link:"https://www.nytimes.com/ca/section/business/media"},{copy:"Finance and Markets",link:"https://www.nytimes.com/section/markets-overview"}]},{columnWidth:3,heading:"Sections",hideHeading:!0,type:"links",links:[{copy:"DealBook",link:"https://www.nytimes.com/ca/section/business/dealbook"},{copy:"Personal Tech",link:"https://www.nytimes.com/ca/section/technology/personaltech"},{copy:"Energy Transition",link:"https://www.nytimes.com/ca/section/business/energy-environment"},{copy:"Your Money",link:"https://www.nytimes.com/ca/section/your-money"}]},{columnWidth:5,heading:"Top Stories",type:"links",links:[{copy:"U.S. Economy",link:"https://www.nytimes.com/news-event/economy-business-us"},{copy:"Stock Market",link:"https://www.nytimes.com/section/markets-overview"},{copy:"Artificial Intelligence",link:"https://www.nytimes.com/spotlight/artificial-intelligence"}]},{columnWidth:4,heading:"Newsletters",footer:{copy:"See all newsletters",link:"https://www.nytimes.com/newsletters"},type:"thumbnailContent",items:[{title:"DealBook",description:"The most crucial business and policy news you need to know.",link:"https://www.nytimes.com/newsletters/dealbook",thumbnailImage:c.a}]},{columnWidth:4,heading:"Podcasts",footer:{copy:"See all podcasts",link:"https://www.nytimes.com/spotlight/podcasts"},type:"thumbnailContent",items:[{title:"Hard Fork",description:"Our tech journalists help you make sense of the rapidly changing tech world.",link:"https://www.nytimes.com/column/hard-fork",thumbnailImage:"https://static01.nyt.com/images/2022/09/28/podcasts/hard-fork-album-art/hard-fork-album-art-mediumSquare149-v2.png?quality=75&auto=webp&disable=upscale"}]}]},{url:"https://www.nytimes.com/ca/section/arts",name:"Arts",dropdown:[{columnWidth:1},{columnWidth:2,heading:"Sections",type:"links",links:[{copy:"Today's Arts",link:"https://www.nytimes.com/ca/section/arts"},{copy:"Books",link:"https://www.nytimes.com/ca/section/books"},{copy:"Best Sellers",link:"https://www.nytimes.com/books/best-sellers"},{copy:"Dance",link:"https://www.nytimes.com/ca/section/arts/dance"},{copy:"Movies",link:"https://www.nytimes.com/ca/section/movies"},{copy:"Music",link:"https://www.nytimes.com/ca/section/arts/music"}]},{columnWidth:3,heading:"Sections",hideHeading:!0,type:"links",links:[{copy:"Television",link:"https://www.nytimes.com/ca/section/arts/television"},{copy:"Theater",link:"https://www.nytimes.com/ca/section/theater"},{copy:"Pop Culture",link:"https://www.nytimes.com/spotlight/pop-culture"},{copy:"T Magazine",link:"https://www.nytimes.com/ca/section/t-magazine"},{copy:"Visual Arts",link:"https://www.nytimes.com/ca/section/arts/design"}]},{columnWidth:5,heading:"Recommendations",type:"links",links:[{copy:"Critic’s Picks",link:"https://www.nytimes.com/spotlight/critics-picks"},{copy:"What to Read",link:"https://www.nytimes.com/spotlight/books-to-read"},{copy:"What to Watch",link:"https://www.nytimes.com/spotlight/what-to-watch"},{copy:"What to Listen To",link:"https://www.nytimes.com/column/playlist"},{copy:"5 Minutes to Make You Love Music",link:"https://www.nytimes.com/interactive/2023/10/27/arts/music/music-fivemins-collection.html"}]},{columnWidth:4,heading:"Newsletters",footer:{copy:"See all newsletters",link:"https://www.nytimes.com/newsletters"},type:"thumbnailContent",items:[{title:"Read Like the Wind",description:"Book recommendations from our critics.",link:"https://www.nytimes.com/newsletters/read-like-the-wind",thumbnailImage:g.a},{title:"Watching",description:"Streaming TV and movie recommendations.",link:"https://www.nytimes.com/newsletters/watching",thumbnailImage:x.a}]},{columnWidth:4,heading:"Podcasts",footer:{copy:"See all podcasts",link:"https://www.nytimes.com/spotlight/podcasts"},type:"thumbnailContent",items:[{title:"Book Review",description:"The podcast that takes you inside the literary world.",link:"https://www.nytimes.com/column/book-review-podcast",thumbnailImage:"https://static01.nyt.com/images/2018/03/27/books/book-review-album-art-v2/book-review-album-art-v2-thumbLarge-v3.jpg?quality=75&auto=webp&disable=upscale"},{title:"Popcast",description:"Pop music news, new songs and albums, and artists of note.",link:"https://www.nytimes.com/column/popcast-pop-music-podcast",thumbnailImage:"https://static01.nyt.com/images/2011/05/20/multimedia/music-popcast/music-popcast-thumbLarge-v3.jpg?quality=75&auto=webp&disable=upscale"}]}]},{url:"https://www.nytimes.com/spotlight/lifestyle",name:"Lifestyle",dropdown:[{columnWidth:1},{columnWidth:2,heading:"Sections",type:"links",links:[{copy:"All Lifestyle",link:"https://www.nytimes.com/spotlight/lifestyle"},{copy:"Well",link:"https://www.nytimes.com/ca/section/well"},{copy:"Travel",link:"https://www.nytimes.com/ca/section/travel"},{copy:"Style",link:"https://www.nytimes.com/ca/section/style"},{copy:"Real Estate",link:"https://www.nytimes.com/ca/section/realestate"}]},{columnWidth:3,heading:"Sections",hideHeading:!0,type:"links",links:[{copy:"Food",link:"https://www.nytimes.com/ca/section/food"},{copy:"Love",link:"https://www.nytimes.com/ca/section/fashion/weddings"},{copy:"Your Money",link:"https://www.nytimes.com/ca/section/your-money"},{copy:"Personal Tech",link:"https://www.nytimes.com/ca/section/technology/personaltech"},{copy:"T Magazine",link:"https://www.nytimes.com/ca/section/t-magazine"}]},{columnWidth:5,heading:"Columns",type:"links",innerGridColumnCount:2,columns:[[{copy:"36 Hours",link:"https://www.nytimes.com/column/36-hours"},{copy:"Ask Well",link:"https://www.nytimes.com/column/ask-well"},{copy:"The Hunt",link:"https://www.nytimes.com/column/the-hunt"},{copy:"Modern Love",link:"https://www.nytimes.com/column/modern-love"}],[{copy:"Where to Eat",link:"https://www.nytimes.com/spotlight/best-restaurants"},{copy:"Vows",link:"https://www.nytimes.com/column/vows"},{copy:"Social Q’s",link:"https://www.nytimes.com/column/social-qs"},{copy:"The Ethicist",link:"https://www.nytimes.com/column/the-ethicist"}]]},{columnWidth:4,heading:"Newsletters",footer:{copy:"See all newsletters",link:"https://www.nytimes.com/newsletters"},type:"thumbnailContent",items:[{title:"Open Thread",description:"The latest news on what we wear, by our chief fashion critic.",link:"https://www.nytimes.com/newsletters/open-thread-fashion",thumbnailImage:m.a},{title:"Well",description:"Essential news and guidance to live your healthiest life.",link:"https://www.nytimes.com/newsletters/well",thumbnailImage:k.a}]},{columnWidth:4,heading:"Podcasts",footer:{copy:"See all podcasts",link:"https://www.nytimes.com/spotlight/podcasts"},type:"thumbnailContent",items:[{title:"Modern Love",description:"The complicated love lives of real people.",link:"https://www.nytimes.com/column/modern-love-podcast",thumbnailImage:"https://static01.nyt.com/images/2020/09/21/podcasts/modernlove-logo/modernlove-logo-thumbLarge-v3.jpg?quality=75&auto=webp&disable=upscale"}]}]},{url:"https://www.nytimes.com/ca/section/opinion",name:"Opinion",dropdown:[{columnWidth:1},{columnWidth:2,hamburgerColumnWidth:3,heading:"Sections",type:"links",links:[{copy:"Opinion",link:"https://www.nytimes.com/ca/section/opinion"},{copy:"Guest Essays",link:"https://www.nytimes.com/ca/section/opinion/contributors"},{copy:"Editorials",link:"https://www.nytimes.com/ca/section/opinion/editorials"},{copy:"Op-Docs",link:"https://www.nytimes.com/column/op-docs"},{copy:"Videos",link:"https://www.nytimes.com/spotlight/opinion-video"},{copy:"Letters",link:"https://www.nytimes.com/ca/section/opinion/letters"}]},{columnWidth:2,hamburgerColumnWidth:3,heading:"Topics",type:"links",links:[{copy:"Politics",link:"https://www.nytimes.com/ca/section/opinion/politics"},{copy:"World",link:"https://www.nytimes.com/ca/section/opinion/international-world"},{copy:"Business",link:"https://www.nytimes.com/ca/section/opinion/business-economics"},{copy:"Tech",link:"https://www.nytimes.com/ca/section/opinion/technology"},{copy:"Climate",link:"https://www.nytimes.com/ca/section/opinion/environment"},{copy:"Health",link:"https://www.nytimes.com/ca/section/opinion/health"},{copy:"Culture",link:"https://www.nytimes.com/ca/section/opinion/culture"}]},{columnWidth:1},{columnWidth:9,heading:"Columnists",type:"links",innerGridColumnCount:3,columns:[[{copy:"Charles M. Blow",link:"https://www.nytimes.com/by/charles-m-blow"},{copy:"Jamelle Bouie",link:"https://www.nytimes.com/by/jamelle-bouie"},{copy:"David Brooks",link:"https://www.nytimes.com/by/david-brooks"},{copy:"Gail Collins",link:"https://www.nytimes.com/by/gail-collins"},{copy:"Ross Douthat",link:"https://www.nytimes.com/by/ross-douthat"},{copy:"Maureen Dowd",link:"https://www.nytimes.com/by/maureen-dowd"},{copy:"David French",link:"https://www.nytimes.com/by/david-french"}],[{copy:"Thomas L. Friedman",link:"https://www.nytimes.com/by/thomas-l-friedman"},{copy:"Michelle Goldberg",link:"https://www.nytimes.com/by/michelle-goldberg"},{copy:"Ezra Klein",link:"https://www.nytimes.com/by/ezra-klein"},{copy:"Nicholas Kristof",link:"https://www.nytimes.com/by/nicholas-kristof"},{copy:"Paul Krugman",link:"https://www.nytimes.com/by/paul-krugman"},{copy:"Carlos Lozada",link:"https://www.nytimes.com/by/carlos-lozada"}],[{copy:"Tressie McMillan Cottom",link:"https://www.nytimes.com/by/tressie-mcmillan-cottom"},{copy:"Pamela Paul",link:"https://www.nytimes.com/by/pamela-paul"},{copy:"Lydia Polgreen",link:"https://www.nytimes.com/by/lydia-polgreen"},{copy:"Bret Stephens",link:"https://www.nytimes.com/by/bret-stephens"},{copy:"Zeynep Tufekci",link:"https://www.nytimes.com/by/zeynep-tufekci"}]]},{columnWidth:4,heading:"Podcasts",footer:{copy:"See all podcasts",link:"https://www.nytimes.com/spotlight/podcasts"},type:"thumbnailContent",items:[{title:"Matter of Opinion",description:"Thoughts, aloud. With Michelle Cottle, Ross Douthat, Carlos Lozada and Lydia Polgreen.",link:"https://www.nytimes.com/column/matter-of-opinion",thumbnailImage:"https://static01.nyt.com/images/2023/05/08/podcasts/matter-of-opinion-album-art/matter-of-opinion-album-art-thumbLarge-v2.jpg?quality=75&auto=webp&disable=upscale"},{title:"The Ezra Klein Show",description:"Discussions of ideas that matter, plus book recommendations.",link:"https://www.nytimes.com/column/ezra-klein-podcast",thumbnailImage:"https://static01.nyt.com/images/2021/01/12/podcasts/ezra-klein-album-art/ezra-klein-album-art-mediumSquare149-v2.jpg?quality=75&auto=webp&disable=upscale"}]}]},{url:"https://www.nytimes.com/spotlight/podcasts",name:"Audio",productType:"standalone",dropdown:[{columnWidth:1},{columnWidth:4,heading:"Audio",type:"brand",link:"https://www.nytimes.com/spotlight/podcasts",description:"Podcasts and narrated articles covering news, tech, culture and more.",footer:{copy:"Download the Audio app on iOS.",link:"https://www.nytimes.com/audio/app"}},{columnWidth:6,heading:"Listen",type:"links",innerGridColumnCount:2,footer:{copy:"See all audio",link:"https://www.nytimes.com/spotlight/podcasts"},columns:[[{copy:"The Headlines",link:"https://www.nytimes.com/column/the-headlines"},{copy:"The Daily",link:"https://www.nytimes.com/column/the-daily"},{copy:"Hard Fork",link:"https://www.nytimes.com/column/hard-fork"},{copy:"The Ezra Klein Show",link:"https://www.nytimes.com/column/ezra-klein-podcast"},{copy:"Matter of Opinion",link:"https://www.nytimes.com/column/matter-of-opinion"},{copy:"Serial Productions",link:"https://www.nytimes.com/interactive/2022/podcasts/serial-productions.html"}],[{copy:"The Book Review Podcast",link:"https://www.nytimes.com/column/book-review-podcast"},{copy:"Modern Love",link:"https://www.nytimes.com/column/modern-love-podcast"},{copy:"The Run-Up",link:"https://www.nytimes.com/column/election-run-up-podcast"},{copy:"Popcast",link:"https://www.nytimes.com/column/popcast-pop-music-podcast"},{copy:"Reporter Reads",link:"https://www.nytimes.com/spotlight/reporter-reads"},{copy:"The Sunday Read",link:"https://www.nytimes.com/spotlight/the-sunday-read"},{copy:"The Culture Desk",link:"https://www.nytimes.com/column/the-culture-desk"},{copy:"The Interview",link:"https://www.nytimes.com/column/the-interview"}]]},{columnWidth:4,heading:"Featured",type:"thumbnailContent",items:[{title:"The Interview",description:"Conversations with the world’s most fascinating people.",link:"https://www.nytimes.com/column/the-interview",thumbnailImage:P.a},{title:"The Headlines",description:"Your morning listen. Top stories, in 5 minutes.",link:"https://www.nytimes.com/column/the-headlines",thumbnailImage:"https://static01.nyt.com/images/2022/10/12/podcasts/headlines-albumartwork-audioapp-2/headlines-albumartwork-audioapp-2-thumbLarge.png?quality=75&auto=webp&disable=upscale"},{title:"Serial Season 4: Guantánamo",description:"What it was really like, from people who lived it.",link:"https://www.nytimes.com/interactive/2024/podcasts/serial-season-four-guantanamo.html",thumbnailImage:S.a}]},{columnWidth:4,heading:"Newsletters",type:"thumbnailContent",footer:{copy:"See all newsletters",link:"https://www.nytimes.com/newsletters"},items:[{title:"Audio",description:"Our editors share their favorite listens from the New York Times Audio app.",link:"https://www.nytimes.com/newsletters/audio",thumbnailImage:o.a}]}]},{url:"https://www.nytimes.com/crosswords",name:"Games",productType:"standalone",dropdown:[{columnWidth:1},{columnWidth:4,heading:"Games",type:"brand",link:"https://www.nytimes.com/crosswords",description:"Word games, logic puzzles and crosswords, including an extensive archive."},{columnWidth:3,heading:"Play",type:"linksWithIcons",links:[{copy:"Spelling Bee",icon:"https://www.nytimes.com/games-assets/v2/assets/icons/spelling-bee.svg",link:"https://www.nytimes.com/puzzles/spelling-bee"},{copy:"The Mini Crossword",icon:"https://www.nytimes.com/games-assets/v2/assets/icons/mini.svg",link:"https://www.nytimes.com/crosswords/game/mini"},{copy:"Wordle",icon:"https://www.nytimes.com/games-assets/v2/assets/icons/wordle.svg",link:"https://www.nytimes.com/games/wordle/index.html"},{copy:"The Crossword",icon:"https://www.nytimes.com/games-assets/v2/assets/icons/daily.svg",link:"https://www.nytimes.com/crosswords/game/daily/"},{copy:"Vertex",icon:"https://www.nytimes.com/games-assets/v2/assets/icons/vertex.svg",link:"https://www.nytimes.com/puzzles/vertex"}]},{columnWidth:3,heading:"Play",hideHeading:!0,type:"linksWithIcons",links:[{copy:"Strands",icon:"https://www.nytimes.com/games-assets/v2/assets/icons/strands.svg",link:"https://www.nytimes.com/games/strands"},{copy:"Connections",icon:"https://www.nytimes.com/games-assets/v2/assets/icons/connections.svg",link:"https://www.nytimes.com/games/connections"},{copy:"Sudoku",icon:"https://www.nytimes.com/games-assets/v2/assets/expansion-games/sudoku-card-icon.svg",link:"https://www.nytimes.com/puzzles/sudoku"},{copy:"Letter Boxed",icon:"https://www.nytimes.com/games-assets/v2/assets/icons/letter-boxed.svg",link:"https://www.nytimes.com/puzzles/letter-boxed"},{copy:"Tiles",icon:"https://www.nytimes.com/games-assets/v2/assets/icons/tiles.svg",link:"https://www.nytimes.com/puzzles/tiles"}]},{columnWidth:4,heading:"Community",type:"links",links:[{copy:"Spelling Bee Forum",link:"https://www.nytimes.com/spotlight/spelling-bee-forum"},{copy:"Wordplay Column",link:"https://www.nytimes.com/spotlight/daily-crossword-column"},{copy:"Wordle Review",link:"https://www.nytimes.com/spotlight/wordle-review"},{copy:"Submit a Crossword",link:"https://www.nytimes.com/article/submit-crossword-puzzles-the-new-york-times.html"},{copy:"Meet Our Crossword Constructors",link:"https://www.nytimes.com/spotlight/puzzle-making"},{copy:"Mini to Maestro",link:"https://www.nytimes.com/2022/09/19/crosswords/mini-to-maestro-part-1.html"},{copy:"Wordlebot",link:"https://www.nytimes.com/interactive/2022/upshot/wordle-bot.html"},{copy:"Take the Puzzle Personality Quiz",link:"https://www.nytimes.com/puzzle-personality"}]},{columnWidth:4,heading:"Newsletters",footer:{copy:"See all newsletters",link:"https://www.nytimes.com/newsletters"},type:"thumbnailContent",items:[{title:"Gameplay",description:"Puzzles, brain teasers, solving tips and more.",link:"https://www.nytimes.com/newsletters/gameplay",thumbnailImage:f.a},{title:"Easy Mode",description:"Get an easy version of one of the hardest crossword puzzles of the week.",link:"https://www.nytimes.com/newsletters/easy-mode",thumbnailImage:E.a}]}]},{url:"https://cooking.nytimes.com/",name:"Cooking",productType:"standalone",dropdown:[{columnWidth:1},{columnWidth:4,heading:"Cooking",type:"brand",link:"https://cooking.nytimes.com/",description:"Recipes, advice and inspiration for everyday cooking, special occasions and more."},{columnWidth:3,hamburgerColumnWidth:4,heading:"Recipes",type:"links",innerGridColumnCount:2,columns:[[{copy:"Easy",link:"https://cooking.nytimes.com/topics/easy-recipes"},{copy:"Dinner",link:"https://cooking.nytimes.com/topics/dinner-recipes"},{copy:"Quick",link:"https://cooking.nytimes.com/68861692-nyt-cooking/43843372-quick-recipes"},{copy:"Healthy",link:"https://cooking.nytimes.com/topics/healthy-recipes"},{copy:"Breakfast",link:"https://cooking.nytimes.com/topics/breakfast"}],[{copy:"Vegetarian",link:"https://cooking.nytimes.com/topics/vegetarian"},{copy:"Vegan",link:"https://cooking.nytimes.com/topics/vegan-recipes"},{copy:"Chicken",link:"https://cooking.nytimes.com/topics/our-best-chicken-recipes"},{copy:"Pasta",link:"https://cooking.nytimes.com/topics/our-best-pasta-recipes"},{copy:"Dessert",link:"https://cooking.nytimes.com/topics/desserts"}]]},{columnWidth:3,heading:"Editors' Picks",type:"links",links:[{copy:"Soups and Stews",link:"https://cooking.nytimes.com/68861692-nyt-cooking/638891-best-soup-stew-recipes"},{copy:"Easy Weeknight",link:"https://cooking.nytimes.com/topics/easy-weeknight"},{copy:"Newest Recipes",link:"https://cooking.nytimes.com/68861692-nyt-cooking/32998034-our-newest-recipes"},{copy:"One-Pot Meals",link:"https://cooking.nytimes.com/68861692-nyt-cooking/2370458-one-pot-dinner-recipes"},{copy:"Slow Cooker Recipes",link:"https://cooking.nytimes.com/68861692-nyt-cooking/950138-amazing-slow-cooker-recipes"},{copy:"Comfort Food",link:"https://cooking.nytimes.com/topics/comfort-food"},{copy:"Party Recipes",link:"https://cooking.nytimes.com/topics/entertaining"}]},{columnWidth:4,heading:"Newsletters",type:"thumbnailContent",items:[{title:"The Cooking Newsletter",description:"New recipes, easy dinner ideas and smart kitchen tips from Melissa Clark, Sam Sifton and our New York Times Cooking editors.",link:"https://www.nytimes.com/newsletters/cooking",thumbnailImage:l.a},{title:"The Veggie",description:"Delicious vegetarian recipes and tips from Tanya Sichynsky.",link:"https://www.nytimes.com/newsletters/the-veggie",thumbnailImage:w.a}]},{columnWidth:4,heading:"Newsletters",hideHeading:!0,type:"thumbnailContent",footer:{copy:"See all newsletters",link:"https://www.nytimes.com/newsletters"},items:[{title:"Five Weeknight Dishes",description:"Dinner ideas for busy people from Emily Weinstein.",link:"https://www.nytimes.com/newsletters/five-weeknight-dishes",thumbnailImage:d.a}]}]},{url:"https://www.nytimes.com/wirecutter/",name:"Wirecutter",productType:"standalone",dropdown:[{columnWidth:1},{columnWidth:4,heading:"Wirecutter",type:"brand",link:"https://www.nytimes.com/wirecutter",description:"Reviews and recommendations for thousands of products."},{columnWidth:3,heading:"Reviews",type:"links",links:[{copy:"Kitchen",link:"https://www.nytimes.com/wirecutter/kitchen-dining/"},{copy:"Tech",link:"https://www.nytimes.com/wirecutter/electronics/"},{copy:"Sleep",link:"https://www.nytimes.com/wirecutter/sleep/"},{copy:"Appliances",link:"https://www.nytimes.com/wirecutter/appliances/"},{copy:"Home and Garden",link:"https://www.nytimes.com/wirecutter/home-garden/"},{copy:"Moving",link:"https://www.nytimes.com/wirecutter/make-a-plan/moving/"}]},{columnWidth:3,heading:"Reviews",hideHeading:!0,type:"links",links:[{copy:"Travel",link:"https://www.nytimes.com/wirecutter/travel/"},{copy:"Gifts",link:"https://www.nytimes.com/wirecutter/gifts/"},{copy:"Deals",link:"https://www.nytimes.com/wirecutter/deals/"},{copy:"Baby and Kid",link:"https://www.nytimes.com/wirecutter/baby-kid/"},{copy:"Health and Fitness",link:"https://www.nytimes.com/wirecutter/health-fitness/"}]},{columnWidth:4,heading:"The Best...",type:"links",links:[{copy:"Air Purifier",link:"https://www.nytimes.com/wirecutter/reviews/best-air-purifier/"},{copy:"Electric Toothbrush",link:"https://www.nytimes.com/wirecutter/reviews/best-electric-toothbrush/"},{copy:"Pressure Washer",link:"https://www.nytimes.com/wirecutter/reviews/best-pressure-washer/"},{copy:"Cordless Stick Vacuum",link:"https://www.nytimes.com/wirecutter/reviews/best-cordless-stick-vacuum/"},{copy:"Office Chair",link:"https://www.nytimes.com/wirecutter/reviews/best-office-chair/"},{copy:"Robot Vacuum",link:"https://www.nytimes.com/wirecutter/reviews/best-robot-vacuum/"}]},{columnWidth:4,heading:"Newsletters",footer:{copy:"See all newsletters",link:"https://www.nytimes.com/newsletters"},type:"thumbnailContent",items:[{title:"The Recommendation",description:"The best independent reviews, expert advice and intensively researched deals.",link:"https://www.nytimes.com/newsletters/the-recommendation",thumbnailImage:b.a},{title:"Clean Everything",description:"Step-by-step advice on how to keep everything in your home squeaky clean.",link:"https://www.nytimes.com/newsletters/clean-everything",thumbnailImage:s.a}]}]},{url:"https://www.nytimes.com/athletic/",name:"The Athletic",productType:"standalone",dropdown:[{columnWidth:1},{columnWidth:4,heading:"The Athletic",type:"brand",link:"https://www.nytimes.com/athletic/",description:"Personalized coverage of your sports teams and leagues."},{columnWidth:3,hamburgerColumnWidth:5,heading:"Leagues",type:"links",innerGridColumnCount:2,columns:[[{copy:"NFL",link:"https://www.nytimes.com/athletic/nfl/"},{copy:"MLB",link:"https://www.nytimes.com/athletic/mlb/"},{copy:"NBA",link:"https://www.nytimes.com/athletic/nba/"},{copy:"Premier League",link:"https://www.nytimes.com/athletic/football/premier-league/"},{copy:"NCAAF",link:"https://www.nytimes.com/athletic/college-football/"},{copy:"NCAAM",link:"https://www.nytimes.com/athletic/college-basketball/"},{copy:"NHL",link:"https://www.nytimes.com/athletic/nhl/"}],[{copy:"NCAAW",link:"https://www.nytimes.com/athletic/womens-college-basketball/ "},{copy:"MLS",link:"https://www.nytimes.com/athletic/football/mls/"},{copy:"Tennis",link:"https://www.nytimes.com/athletic/tennis/"},{copy:"NWSL",link:"https://www.nytimes.com/athletic/football/nwsl/"},{copy:"Golf",link:"https://www.nytimes.com/athletic/golf/"}]]},{columnWidth:3,heading:"Top Stories",type:"links",links:[{copy:"European Championship",link:"https://www.nytimes.com/athletic/football/european-championship/"},{copy:"Copa America",link:"https://www.nytimes.com/athletic/football/copa-america/"},{copy:"MLB Standings",link:"https://www.nytimes.com/athletic/mlb/standings/"},{copy:"Olympics",link:"https://www.nytimes.com/athletic/olympics/"}]},{columnWidth:4,heading:"Newsletters",type:"thumbnailContent",items:[{title:"The Pulse",description:"Delivering the top stories in sports, Sunday to Friday.",link:"https://www.nytimes.com/athletic/newsletters/the-pulse/",thumbnailImage:h.a},{title:"Scoop City",description:"The top stories in the NFL, from Jacob Robinson with Dianna Russini.",link:"https://www.nytimes.com/athletic/newsletters/scoop-city/",thumbnailImage:O.a}]},{columnWidth:4,type:"thumbnailContent",heading:"Newsletters",hideHeading:!0,items:[{title:"The Windup",description:"The biggest stories in baseball, by Levi Weaver with Ken Rosenthal.",link:"https://www.nytimes.com/athletic/newsletters/the-windup/",thumbnailImage:T.a},{title:"The Athletic FC",description:"Renowned soccer writer Phil Hay's daily newsletter unpacks the truth behind the game's biggest stories.",link:"https://www.nytimes.com/athletic/newsletters/the-athletic-fc/",thumbnailImage:p.a}]}]}],M=function(e){var t=e.children;return a.a.Children.only(a.a.cloneElement(t,{data:I}))}},XQm6:function(e,t,n){"use strict";var i=n("TqRt"),a=n("cDf5");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=m(n("q1tI")),r=(i(n("17x9")),i(n("28GZ"))),s=i(n("Zgws")),l=n("xHA4"),c=i(n("1jzN")),u=n("uVKy"),d=i(n("0Lib")),p=m(n("n+OA"));function f(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(f=function(e){return e?n:t})(e)}function m(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=a(e)&&"function"!=typeof e)return{default:e};var n=f(t);if(n&&n.has(e))return n.get(e);var i={__proto__:null},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var r in e)if("default"!==r&&{}.hasOwnProperty.call(e,r)){var s=o?Object.getOwnPropertyDescriptor(e,r):null;s&&(s.get||s.set)?Object.defineProperty(i,r,s):i[r]=e[r]}return i.default=e,n&&n.set(e,i),i}function h(e){var t=e.storyline,n=e.trackEvent,i=e.trackImpression,a=e.trackingParams,f=e.trackLinkInteraction,m=e.isUnstructuredInlineModule,h=(0,l.getExperimentalAssetDataFromStoryline)({storyline:t,block:l.STORYLINE_BLOCKS.guide}),g=(0,o.useRef)(new Set),y=(0,o.useCallback)((function(e,t){if(e&&n){var i=t.match(/https:\/\/(www|cooking)\.(stg\.)?nytimes\.com[0-9/\w-.]+/g);i&&i.forEach((function(e){g.current.has(e)||(n({event:"impression",card:{url:e,index:g.current.size}}),g.current.add(e))}))}}),[n]),v=(0,o.useCallback)((function(e){i({event:"impression",card:{url:e,index:g.current.size}}),g.current.add(e)}),[i]);if(!m&&t.guide)return o.default.createElement(r.default,{storyline:t,trackEvent:v,trackingParams:a,trackLinkInteraction:f});if(null==h||!h.title||!h.sections)return null;var b=h.title,_=h.leadIn,w=h.sections,x=(0,u.isElectionStoryline)(null==t?void 0:t.uri);return o.default.createElement("section",{id:"styln-guide",role:"complementary","aria-labelledby":"styln-guide-title",className:p.guideContainerClass},o.default.createElement(s.default,{className:p.topRuleClass}),x&&o.default.createElement(c.default,{className:p.electionLogoClass}),o.default.createElement("h2",{id:"styln-guide-title",className:p.titleClass},b),_&&o.default.createElement("h3",{className:p.leadInClass},_),w.filter((function(e){var t=e.section;return Boolean(null==t?void 0:t.length)})).map((function(e,t){var n=e.section;return o.default.createElement(o.Fragment,{key:t.toString()},o.default.createElement(s.default,{className:p.sectionRuleClass}),n.map((function(e,t){return o.default.createElement(d.default,{key:e.type+t.toString(),item:e,handleInView:y})})))})))}h.displayName="StorylineGuide",h.defaultProps={storyline:null,trackEvent:null,trackImpression:null,trackingParams:null,trackLinkInteraction:function(){},isUnstructuredInlineModule:!0};t.default=h},XSE6:function(e,t,n){"use strict";var i=n("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=n("Jqp9"),o=i(n("wXC7"));t.default=(0,a.css)("background-color:rgb(247,247,247);text-align:center;padding:1.5rem 10px;font-weight:",o.default.font.weight.medium,";color:#c0c0c0;font-size:16px;")},XlcC:function(e,t,n){"use strict";var i=n("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.createMapInlineUnionWithOptions=function(e){return function(){for(var t=arguments.length,n=new Array(t),i=0;i<t;i++)n[i]=arguments[i];return r.apply(void 0,n.concat([e]))}},t.default=r;var a=i(n("q1tI")),o=i(n("4LIj"));function r(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};switch(e.__typename){case"TextInline":return(0,o.default)(e,t,n);case"LineBreakInline":return a.default.createElement("br",{key:"br-".concat(t.toString())});default:return console.warn('Unrecognized Inline "'.concat(e.__typename,'"')),null}}},XtfB:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;t.default={context:{type:"context",version:1},experiments:{type:"experiments",version:1},guide:{type:"guide",version:1},lede:{type:"lede",version:1},toplinks:{type:"topLinks",version:1},quote:{type:"quote",version:1}}},XvvG:function(e,t,n){"use strict";var i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t=e.oldPrice,n=e.oldLabel,i=void 0===n?"original price: ":n,s=e.oldPricePrefix,l=void 0===s?"":s,c=e.currentPrice,u=e.currentLabel,d=void 0===u?"sale price: ":u,p=e.oldPriceClassname,f=void 0===p?"":p,m=e.currentPriceClassname,h=void 0===m?"":m;return a.default.createElement("span",{className:(0,o.cx)(r.textContainerClass,h)},l,a.default.createElement(r.Strike,{className:f},a.default.createElement("span",{className:r.visuallyHiddenClass},i," ")," ",t),a.default.createElement("span",{className:r.visuallyHiddenClass},d," ")," ",c)};var a=i(n("q1tI")),o=n("Jqp9"),r=n("0Jb7")},Xwia:function(e,t,n){"use strict";var i=n("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=i(n("lSNA")),o=n("Zc/f");function r(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function s(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?r(Object(n),!0).forEach((function(t){(0,a.default)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):r(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function l(e){var t=!!e.id,n=(e.minPercent||0===e.minPercent)&&e.maxPercent&&e.minPercent<e.maxPercent,i=!!e.component;return t&&n&&i}t.default=function(e){var t=e.body,n=e.dropzoneConfigsList,i=void 0===n?[]:n,a=e.reservedIndices,r=void 0===a?[]:a,c=i.filter(l);if(!c)return{};var u=c.map((function(e){return s(s({},e),{},{wasPlaced:!1})})),d=t.content.filter((function(e){return"Dropzone"===e.__typename})),p={};return d.forEach((function(e){if(e.adsMobile||e.adsDesktop||e.bad||r.includes(e.index))return null;var t=e.index/d.length,n=u.filter((function(e){return!e.wasPlaced})).find((function(e){return e.minPercent<=t&&t<=e.maxPercent}));if(n)if(u[u.indexOf(n)]=s(s({},n),{},{wasPlaced:!0}),"function"==typeof n.component){var i="";Object.keys(o.inlineRegions).forEach((function(e){t>=o.inlineRegions[e].minPercent&&(i=e)})),p[e.index.toString()]=n.component({region:i})}else p[e.index.toString()]=n.component;return null})),p}},Xx18:function(e,t,n){"use strict";var i=n("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.titleClass=t.contextHeaderClass=t.contextContainerClass=void 0;var a=n("Jqp9"),o=i(n("3Rk2")),r=i(n("wXC7")),s=n("3sMT"),l=(0,o.default)([r.default.breakpoint.small]);t.contextContainerClass=(0,a.css)("font-family:",r.default.font.franklinBase,";color:",s.color.content.secondary,";background-color:",s.color.background.primary,";box-sizing:border-box;width:100%;",l({overflow:["hidden","unset"],padding:[0,"20px"],maxWidth:[null,"600px"],border:["none","1px solid ".concat(s.color.stroke.quaternary)],margin:[r.default.breakpoint.mobileBlockMargins,r.default.breakpoint.desktopStorylineMargins]})," ",r.default.printHide),t.contextHeaderClass=(0,a.css)("display:block;margin-right:auto;margin-left:auto;",l({width:["calc(100% - 40px)","100%"]})),t.titleClass=(0,a.css)("font-weight:",r.default.font.weight.bold,";margin-bottom:1rem;",l({borderTop:["1px solid ".concat(s.color.stroke.quaternary),"none"],borderBottom:["none","1px solid ".concat(s.color.stroke.quaternary)],paddingTop:["1rem",0],paddingBottom:[null,"1rem"],fontSize:[r.default.font.size(16),r.default.font.size(17)],lineHeight:[r.default.font.size(22),r.default.font.size(24)]}))},Xxk7:function(e,t,n){"use strict";var i=n("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.playerContainerClass=void 0;var a=n("Jqp9"),o=i(n("wXC7")),r="@media (max-width: ".concat(o.default.breakpoint.width.small-1,"px)");t.playerContainerClass=(0,a.css)(r,"{&.vhs-article-lede,&.vhs-homepage.vhs-promo{.vhs-headline{font-size:1.375rem;line-height:1.6rem;}}}")},Y0cC:function(e,t,n){"use strict";n.r(t),n.d(t,"storylineQuoteBlockQuery",(function(){return w}));var i,a,o=n("gcR/"),r=n.n(o),s=n("lSNA"),l=n.n(s),c=n("VkAN"),u=n.n(c),d=n("q1tI"),p=n("eFc+"),f=n.n(p),m=n("Kxyt"),h=n("TrUr"),g=n.n(h),y=n("xHA4"),v=n("YWmT");function b(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function _(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?b(Object(n),!0).forEach((function(t){l()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):b(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var w=f()(i||(i=u()(['\n  query StorylineQuoteBlockQuery($ids: [ID!]!) {\n    anyWorks(ids: $ids) {\n      ... on CreativeWork {\n        bylines {\n          creatorSnapshots {\n            ... on PersonSnapshot {\n              promotionalMedia {\n                ... on Image {\n                  id\n                  crops(renditionNames: "thumbLarge") {\n                    renditions {\n                      url\n                    }\n                  }\n                }\n              }\n            }\n          }\n        }\n      }\n    }\n  }\n'])));function x(e){var t=e.pageType,n=e.parentUri,i=e.parentUrl,a=e.region,o=e.ruleName,s=e.storyline,l=e.testName,c=Object(y.getExperimentalAssetDataFromStoryline)({storyline:s,block:y.STORYLINE_BLOCKS.quote}),u=c.items,p=c.title,f=Object(m.useQuery)(w,{variables:{ids:null==u?void 0:u.map((function(e){return e.url}))},ssr:!1}),b=f.loading,x=f.error,k=f.data,O=Object(d.useMemo)((function(){return Object(h.getItemsWithHeadshots)(k,u)}),[k,u]);return b||x||!k?null:r()(v.a,{componentName:"opinion_quote",region:a,parentUri:n,testName:l,ruleName:o,pageType:t},void 0,(function(e){var t=e.trackImpression,n=e.trackLink;return r()(g.a,{title:p,parentUrl:i,trackEvent:t,items:O.map((function(e){var t;return _(_({},e),{},{url:null!==(t=null==n?void 0:n(e.url))&&void 0!==t?t:e.url})}))})}))}x.displayName="QuoteBlock",x.defaultProps={testName:null},x.fragments={storyline:f()(a||(a=u()(["\n    fragment QuoteBlock_storyline on CreativeWork {\n      ... on Published {\n        __typename\n        uri\n        url\n      }\n      storylines {\n        ruleName\n        testName\n        storyline {\n          experimentalJsonBlob\n        }\n      }\n    }\n  "])))},t.default=x},"Y3E+":function(e,t,n){"use strict";var i=n("TqRt"),a=n("cDf5");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=i(n("J4zp")),r=i(n("lSNA")),s=i(n("lwsE")),l=i(n("W8MJ")),c=i(n("a1gu")),u=i(n("Nsbk")),d=i(n("7W2i")),p=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=a(e)&&"function"!=typeof e)return{default:e};var n=f(t);if(n&&n.has(e))return n.get(e);var i={__proto__:null},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var r in e)if("default"!==r&&{}.hasOwnProperty.call(e,r)){var s=o?Object.getOwnPropertyDescriptor(e,r):null;s&&(s.get||s.set)?Object.defineProperty(i,r,s):i[r]=e[r]}return i.default=e,n&&n.set(e,i),i}(n("q1tI"));i(n("17x9"));function f(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(f=function(e){return e?n:t})(e)}function m(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function h(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?m(Object(n),!0).forEach((function(t){(0,r.default)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):m(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function g(e,t,n){return t=(0,u.default)(t),(0,c.default)(e,function(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return function(){return!!e}()}()?Reflect.construct(t,n||[],(0,u.default)(e).constructor):t.apply(e,n))}var y=function(e){function t(){var e;(0,s.default)(this,t);for(var n=arguments.length,i=new Array(n),a=0;a<n;a++)i[a]=arguments[a];return(e=g(this,t,[].concat(i))).ref=p.default.createRef(),e.numOfInvocations=0,e.mountObserver=function(){var t,n,i=h({threshold:1},e.props.intersectionObserverOptions);e.ref.current&&(e.observer=new IntersectionObserver((function(t){var n,i,a=(0,o.default)(t,1)[0],r=e.numOfInvocations>=e.props.invocationLimit;a.isIntersecting&&!r&&(null===(n=(i=e.props).onVisible)||void 0===n||n.call(i),e.numOfInvocations+=1)}),i),null===(t=e.observer)||void 0===t||null===(n=t.observe)||void 0===n||n.call(t,e.ref.current))},e}return(0,d.default)(t,e),(0,l.default)(t,[{key:"componentDidMount",value:function(){setTimeout(this.mountObserver,this.props.delayObservationBy)}},{key:"componentWillUnmount",value:function(){var e,t;null===(e=this.observer)||void 0===e||null===(t=e.disconnect)||void 0===t||t.call(e)}},{key:"render",value:function(){var e=this.ref;return this.props.children({ref:e})}}])}(p.Component);y.displayName="VisibilityObserver",y.defaultProps={intersectionObserverOptions:{},invocationLimit:1,delayObservationBy:0,onVisible:function(){},children:null};t.default=y},YCta:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){var e=(0,i.keyframes)("0%{transform:translate(0,0) scale(1,0.85) translate(0,0);}33.33%{transform:translate(0,0) scale(1,0.9) translate(0,0);}100%{transform:translate(0,0) scale(1,0.1) translate(0,0);}"),t=(0,i.keyframes)("0%{transform:translate(0,0) translate(0,0) translate(0,15px);}33.33%{transform:translate(0,0) translate(0,0) translate(0,10px);}100%{transform:translate(0,0) translate(0,0) translate(0,30px);}"),n=(0,i.keyframes)("0%{transform:translate(11.329999923706055px,0) scale(1,0.85) translate(-11.329999923706055px,0);}33.33%{transform:translate(11.329999923706055px,0) scale(1,0.9) translate(-11.329999923706055px,0);}100%{transform:translate(11.329999923706055px,0) scale(1,0.1) translate(-11.329999923706055px,0);}"),a=(0,i.keyframes)("0%{transform:translate(11.329999923706055px,0) translate(-11.329999923706055px,0) translate(0,15px);}33.33%{transform:translate(11.329999923706055px,0) translate(-11.329999923706055px,0) translate(0,10px);}100%{transform:translate(11.329999923706055px,0) translate(-11.329999923706055px,0) translate(0,30px);}"),o=(0,i.keyframes)("0%{transform:translate(22.670000076293945px,0) scale(1,0.85) translate(-22.670000076293945px,0);}33.33%{transform:translate(22.670000076293945px,0) scale(1,0.9) translate(-22.670000076293945px,0);}100%{transform:translate(22.670000076293945px,0) scale(1,0.1) translate(-22.670000076293945px,0);}"),r=(0,i.keyframes)("0%{transform:translate(22.670000076293945px,0) translate(-22.670000076293945px,0) translate(0,15px);}33.33%{transform:translate(22.670000076293945px,0) translate(-22.670000076293945px,0) translate(0,10px);}100%{transform:translate(22.670000076293945px,0) translate(-22.670000076293945px,0) translate(0,30px);}"),s=(0,i.keyframes)("0%{transform:translate(34px,0) translate(-34px,0) translate(0,15px);}33.33%{transform:translate(34px,0) translate(-34px,0) translate(0,10px);}100%{transform:translate(34px,0) translate(-34px,0) translate(0,30px);}"),l=(0,i.keyframes)("0%{transform:translate(34px,0) scale(1,0.85) translate(-34px,0);}33.33%{transform:translate(34px,0) scale(1,0.9) translate(-34px,0);}100%{transform:translate(34px,0) scale(1,0.1) translate(-34px,0);}");return{firstBarCollapsedClass:(0,i.css)("animation:",e," 0.8s cubic-bezier(0,0,1,1) forwards;"),firstBarParentCollapsedClass:(0,i.css)("animation:",t," 0.8s cubic-bezier(0,0,1,1) forwards;"),secondBarCollapsedClass:(0,i.css)("animation:",n," 0.8s cubic-bezier(0,0,1,1) forwards;"),secondBarParentCollapsedClass:(0,i.css)("animation:",a," 0.8s cubic-bezier(0,0,1,1) forwards;"),thirdBarCollapsedClass:(0,i.css)("animation:",o," 0.8s cubic-bezier(0,0,1,1) forwards;"),thirdBarParentCollapsedClass:(0,i.css)("animation:",r," 0.8s cubic-bezier(0,0,1,1) forwards;"),fourthBarCollapsedClass:(0,i.css)("animation:",l," 0.8s cubic-bezier(0,0,1,1) forwards;"),fourthBarParentCollapsedClass:(0,i.css)("animation:",s," 0.8s cubic-bezier(0,0,1,1) forwards;")}};var i=n("Jqp9")},YFU0:function(e,t,n){"use strict";var i=n("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"canUseDOM",{enumerable:!0,get:function(){return r.default}}),Object.defineProperty(t,"computeAspectRatio",{enumerable:!0,get:function(){return s.default}}),Object.defineProperty(t,"isNumeric",{enumerable:!0,get:function(){return a.default}}),Object.defineProperty(t,"loadApi",{enumerable:!0,get:function(){return o.default}});var a=i(n("L0Nc")),o=i(n("S+vP")),r=i(n("rCSJ")),s=i(n("U7vG"))},YNKw:function(e,t,n){"use strict";var i=n("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.selectImageRendition=t.default=void 0;var a=i(n("q1tI")),o=(i(n("17x9")),n("Jqp9")),r=i(n("KeRS")),s=n("6l8D"),l=i(n("F0cd")),c=n("4mEQ"),u=i(n("Mqhu")),d=n("tLpV"),p=function(e){var t=e.headline,n=e.summary,i=e.url,c=e.media,p=e.className,f=e.label,m=e.caption,h=e.isOpinion,g=e.pubDate,y=e.seoHeadline,v=e.typeOfMaterials,b=(0,o.useTheme)(),_=null;"string"==typeof c?_=a.default.createElement(d.RelatedLinkImage,{src:c}):a.default.isValidElement(c)&&(_=c);var w=b&&b.displayStyle&&"string"==typeof b.displayStyle&&"compact"===b.displayStyle.toLowerCase(),x=!(w&&!h),k=i.includes("nytimes.com/article")||i.includes("nytimes.com/interactive");return a.default.createElement(u.default.Consumer,null,(function(e){return a.default.createElement(d.StyledRelatedLink,{siblings:e,className:p},a.default.createElement(r.default,{to:i,className:s.linkClass},a.default.createElement(d.RelatedLinkMediaWrapper,{siblings:e},(null==b?void 0:b.displayStyle)&&"compact"!==b.displayStyle&&_,a.default.createElement(d.RelatedLinkCaption,null,m)),a.default.createElement(d.RelatedLinkTextWrapper,{siblings:e},f&&x&&a.default.createElement(d.RelatedLinkLabel,{isOpinion:h},f),a.default.createElement(d.RelatedLinkHeadline,null,null!=v&&v.includes("Live Blog Post")&&y?y:t),n&&b&&"expanded"===(null==b?void 0:b.displayStyle)&&a.default.createElement(d.RelatedLinkSummary,{siblings:e},n),!k&&!w&&a.default.createElement(l.default,null,g))))}))};p.displayName="RelatedLink",p.defaultProps={headline:"",summary:"",url:"",caption:"",media:void 0,className:void 0,label:"",pubDate:"",isOpinion:!1,seoHeadline:void 0,typeOfMaterials:[]};t.selectImageRendition=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(e){return e},n=arguments.length>2?arguments[2]:void 0,i=["threeByTwoSmallAt2X","videoLarge","mediumThreeByTwo440"],a=["thumbLarge"];return(0,c.createPrioritySelector)(n?a:i)(e,t)},t.default=p},YPF4:function(e,t,n){"use strict";var i=this&&this.__createBinding||(Object.create?function(e,t,n,i){void 0===i&&(i=n);var a=Object.getOwnPropertyDescriptor(t,n);a&&!("get"in a?!t.__esModule:a.writable||a.configurable)||(a={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,i,a)}:function(e,t,n,i){void 0===i&&(i=n),e[i]=t[n]}),a=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&i(t,e,n);return a(t,e),t},r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var s=o(n("q1tI")),l=n("Jqp9"),c=n("X6oL"),u=r(n("5UIh")),d=o(n("ANq+")),p=n("syiw"),f=n("HDG5"),m=n("djNW"),h=r(n("EhNO")),g=n("FY2l"),y=n("6gWn"),v=n("etPP");t.default=function(e){var t,n,i,a,o,r=e.unit,b=(0,s.useState)(!1),_=b[0],w=b[1],x=(0,p.useMessageSelection)({config:{name:"dock"}}),k="news";!function(){var e,t,n,i={NEWS:{hasProduct:!1,displayName:"news"},GAMES:{hasProduct:!1,displayName:"Games"},COOKING:{hasProduct:!1,displayName:"Cooking"},WIRECUTTER:{hasProduct:!1,displayName:"Wirecutter"}};if(null===(e=r.content)||void 0===e?void 0:e.subInfo){null===(n=null===(t=r.content)||void 0===t?void 0:t.subInfo)||void 0===n||n.forEach((function(e){"ACTIVE"===e.status&&e.products.forEach((function(e){i[e]&&(i[e].hasProduct=!0)}))}));var a=Object.values(i).filter((function(e){return e.hasProduct})).map((function(e){return e.displayName}));k=a.join(", ").replace(/, ([^,]*)$/," and $1")}}();var O=(0,f.useUserState)(),T=(0,c.useTracking)(),C="/"===(0,g.getPathName)()?"homepage":"article",E=s.default.createElement("h2",{className:d.headerText},"Get the full Times experience."),S=s.default.createElement("div",{className:(0,l.cx)(d.mainContent)},s.default.createElement("div",{className:d.headerLogo},s.default.createElement(h.default,null)),s.default.createElement("div",{className:d.headerContainer},s.default.createElement("h3",{className:d.header},"You’re currently a ",k," subscriber. "),s.default.createElement("p",{className:d.subHeader}," Upgrade to enjoy all of The Times.")),s.default.createElement("div",{className:d.ctaContainer},s.default.createElement(v.Button,{testId:"dock-upgrade-now",component:"a",className:d.button,href:null===(t=r.content)||void 0===t?void 0:t.clickThroughURI,onClick:function(){var e,t,n;T.trackEvent({event:"moduleInteraction",eventData:{pagetype:C,trigger:"module",type:"click"},module:{name:"dock",context:"expanded",audience:null===(e=r.content)||void 0===e?void 0:e.trackingAudience,label:null===(t=r.content)||void 0===t?void 0:t.trackingLabel,region:"",element:{name:m.Action.ProductSwitch,label:"Upgrade now",url:null===(n=r.content)||void 0===n?void 0:n.clickThroughURI}}})}},"Upgrade now"),s.default.createElement("span",{className:d.billingTerms},"Cancel anytime.")));if(x.loading)return null;if(!_){var P=null===(i=null===(n=null==x?void 0:x.response)||void 0===n?void 0:n.userstate())||void 0===i?void 0:i.messageSelectionMessageCaps,I=null;if(P)if((A=P).forEach((function(e){var t,n;"dock"===(null==e?void 0:e.unit)&&(null==e?void 0:e.campaign)===(null===(t=null==x?void 0:x.response)||void 0===t?void 0:t.campaign())&&(null==e?void 0:e.audience)===(null===(n=null==x?void 0:x.response)||void 0===n?void 0:n.audience())&&(I=e)})),null!==I){var M=I;M.viewCount+=1,M.lastSeenOn=(new Date).toISOString(),O.update({messageSelectionMessageCaps:A})}if(!I){var A=[];P&&(A=P),A.push({unit:"dock",campaign:null===(a=null==x?void 0:x.response)||void 0===a?void 0:a.campaign(),audience:null===(o=null==x?void 0:x.response)||void 0===o?void 0:o.audience(),lastSeenOn:(new Date).toISOString(),viewCount:1,dismissed:!1}),O.update({messageSelectionMessageCaps:A})}w(!0)}return s.default.createElement(u.default,{testId:"onsite-messaging-unit-".concat(null===y.config||void 0===y.config?void 0:y.config.name),"data-campaign":null==r?void 0:r.campaign,"data-audience":null==r?void 0:r.audience,className:d.otherSubsClassName,headingClassName:d.otherSubsHeadingClassName,headingClassStyle:d.otherSubsHeadingClassStyle,ctaIconWrapperStyle:d.otherSubsCtaIconWrapperStyle,ctaContainerStyle:d.otherSubsCtaContainerStyle,ctaActionTextContainerStyle:d.otherSubsCtaActionTextContainerStyle,dividerStyle:d.otherSubsDividerStyle,headerWrapperStyle:d.otherSubsHeaderWrapperStyle,unit:r,contentID:"ACT_CONV_NEWS_SUB_ALL_ACCESS_UPGRADE_2310",dockID:"expand",header:E,card:S,isDockDismissible:!0,isDockExpandable:!1,minimized:!1,overrideHeaderWidth:!1,overrideHeaderStyles:!0})}},YV1h:function(e,t,n){"use strict";var i=n("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.titleClass=t.legacyContextClass=t.legacyContainerClass=t.contextHeaderClass=t.contextContainerClass=void 0;var a=n("Jqp9"),o=i(n("3Rk2")),r=i(n("wXC7")),s=n("3sMT"),l=(0,o.default)([r.default.breakpoint.small]);t.contextContainerClass=(0,a.css)("font-family:",r.default.font.franklinBase,";color:",s.color.content.secondary,";background-color:",s.color.background.primary,";box-sizing:border-box;width:100%;",l({overflow:["hidden","unset"],padding:[0,"20px"],maxWidth:[null,"600px"],border:["none","1px solid ".concat(s.color.stroke.quaternary)],margin:[r.default.breakpoint.mobileBlockMargins,r.default.breakpoint.desktopStorylineMargins]})," ",r.default.printHide),t.contextHeaderClass=(0,a.css)("display:block;margin-right:auto;margin-left:auto;",l({width:["calc(100% - 40px)","100%"]})),t.titleClass=(0,a.css)("font-weight:",r.default.font.weight.bold,";margin-bottom:1rem;",l({borderTop:["1px solid ".concat(s.color.stroke.quaternary),"none"],borderBottom:["none","1px solid ".concat(s.color.stroke.quaternary)],paddingTop:["1rem",0],paddingBottom:[null,"1rem"],fontSize:[r.default.font.size(16),r.default.font.size(17)],lineHeight:[r.default.font.size(22),r.default.font.size(24)]})),t.legacyContextClass=(0,a.css)("font-family:",r.default.font.franklinBase,";color:",s.color.content.secondary,";background-color:",s.color.background.primary,";border:1px solid ",s.color.stroke.quaternary,";box-sizing:border-box;padding:25px 30px;h2{border-bottom:1px solid ",s.color.stroke.quaternary,";border-top:none;margin:0 auto 1rem;padding-bottom:1rem;padding-top:0;}"),t.legacyContainerClass=(0,a.css)("padding:15px;width:calc(100% - 40px);margin:1.25rem auto 1.5rem;",r.default.breakpoint.small,"{padding:20px;width:100%;max-width:600px;}",r.default.printHide)},YWmT:function(e,t,n){"use strict";var i=n("gcR/"),a=n.n(i),o=(n("q1tI"),n("ZKN5")),r=n("fZdH"),s=n("AeOL"),l=n("bFSk"),c=n("7VSS"),u=n("E8RS");function d(e){var t,n,i=e.componentName,o=e.parentUri,d=e.testName,p=e.region,f=e.ruleName,m=e.pageType,h=e.className,g=e.children,y=Object(r.a)(),v=(null==y||null===(t=y[d])||void 0===t?void 0:t.allocated)&&d,b=null==y||null===(n=y[v])||void 0===n?void 0:n.variant,_=b?{label:b}:{},w="storyline_".concat(i,"_recirc"),x=Object(l.a)({name:f,region:p,template:w,parentUri:o,pageType:m}),k=x.trackLink,O=x.trackImpression,T=x.trackInteraction;return Object(c.a)()?a()(s.a,{testName:d,className:h,holdoutVariant:u.a},void 0,g({trackLink:k({variant:b}),trackImpression:O({block:_}),trackInteraction:T({module:_})})):a()("div",{className:h},void 0,g({trackLink:null,trackImpression:null,trackInteraction:null}))}d.displayName="WithStorylineAssetSubTesting",d.defaultProps={testName:null,className:void 0},t.a=Object(o.a)(d)},YWyE:function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));var i=["MM","CKG","XWD","WC","ATH"],a=function(e){if(null==e||!e.subscriptionDetails)return null;var t=e.subscriptionDetails.filter((function(e){return"ACTIVE"===e.status})).reduce((function(e,t){return e.concat(t.entitlements)}),[]);return!!i.every((function(e){return t.includes(e)}))}},YXtJ:function(e,t,n){"use strict";var i=this&&this.__assign||function(){return(i=Object.assign||function(e){for(var t,n=1,i=arguments.length;n<i;n++)for(var a in t=arguments[n])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e}).apply(this,arguments)},a=this&&this.__createBinding||(Object.create?function(e,t,n,i){void 0===i&&(i=n);var a=Object.getOwnPropertyDescriptor(t,n);a&&!("get"in a?!t.__esModule:a.writable||a.configurable)||(a={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,i,a)}:function(e,t,n,i){void 0===i&&(i=n),e[i]=t[n]}),o=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),r=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&a(t,e,n);return o(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.FoodArticleSalesDockLogo=function(){var e=s.default.useState(c()),t=e[0],n=e[1];return(0,s.useEffect)((function(){window.addEventListener("resize",(function(){n(c())}))}),[]),s.default.createElement("svg",i({},t,{viewBox:"0 0 122 22",fill:"none",xmlns:"http://www.w3.org/2000/svg"}),s.default.createElement("g",{clipPath:"url(#clip0_7854_91185)"},s.default.createElement("path",{d:"M31.7025 12.3261C32.5014 13.1268 33.5634 13.5295 34.5747 13.5295C35.7754 13.5295 36.8606 13.224 38.5322 12.0668V16.5983C36.7174 17.5888 35.0966 17.9221 33.1386 17.9221C30.3818 17.9221 28.1237 17.0241 26.5213 15.4689C24.942 13.9091 24.0508 11.6688 24.0508 8.97954C24.0508 3.83247 27.1817 0.763672 31.1391 0.763672C32.4598 0.763672 33.4711 1.04602 34.3439 1.7542V1.06916H38.6523V7.41968H34.2238C34.0576 5.50804 33.5404 4.5638 32.409 4.5638C31.1391 4.5638 30.2894 5.76725 30.2894 8.53056C30.2894 10.2293 30.8528 11.4836 31.7025 12.3307V12.3261Z",fill:"#E33D26"}),s.default.createElement("path",{d:"M46.2809 6.04492C49.8827 6.04492 53.0875 8.10005 53.0875 11.9927C53.0875 15.8854 49.8135 17.848 46.3039 17.848C42.7944 17.848 39.4511 15.7929 39.4511 11.9696C39.4511 8.14633 42.7252 6.04492 46.2809 6.04492ZM46.2347 9.11372C44.9648 9.11372 44.7755 10.7662 44.7755 11.7104C44.7755 12.6546 44.8909 14.6357 46.2347 14.6357C47.5785 14.6357 47.7632 13.0527 47.7632 12.039C47.7632 11.0254 47.6939 9.11372 46.2347 9.11372Z",fill:"#E33D26"}),s.default.createElement("path",{d:"M60.6699 6.04492C64.2718 6.04492 67.4765 8.10005 67.4765 11.9927C67.4765 15.8854 64.2025 17.848 60.693 17.848C57.1835 17.848 53.8402 15.7929 53.8402 11.9696C53.8402 8.14633 57.1142 6.04492 60.6699 6.04492ZM60.6237 9.11372C59.3538 9.11372 59.1645 10.7662 59.1645 11.7104C59.1645 12.6546 59.2799 14.6357 60.6237 14.6357C61.9675 14.6357 62.1522 13.0527 62.1522 12.039C62.1522 11.0254 62.0829 9.11372 60.6237 9.11372Z",fill:"#E33D26"}),s.default.createElement("path",{d:"M68.7973 14.5431V4.13325H67.8091V1.06445H74.1216V12.0668L77.2524 9.35438H75.5808V6.28558H82.4336V9.35438H81.1868L78.998 11.3864L81.9164 14.5477H82.8123V17.6165H78.2222L74.1262 12.9416V17.6165H67.8137V14.5477H68.8019L68.7973 14.5431Z",fill:"#E33D26"}),s.default.createElement("path",{d:"M84.5993 14.5431V9.34975H83.6572V6.28095H89.919V14.5431H90.9072V17.6119H83.6526V14.5431H84.5946H84.5993ZM89.919 1.06445V5.10064H84.5993V1.06445H89.919Z",fill:"#E33D26"}),s.default.createElement("path",{d:"M92.6989 14.5431V9.34978H91.7568V6.28098H98.0186V7.60478C99.2423 6.75311 100.254 6.04492 101.833 6.04492C104.096 6.04492 105.813 7.53072 105.813 9.48864V14.5385H106.755V17.6073H100.494V10.6227C100.494 9.91448 99.9534 9.34978 99.2931 9.34978C98.4942 9.34978 98.0232 10.0117 98.0232 11.1179V14.5385H98.9421V17.6073H91.7615V14.5385H92.7035L92.6989 14.5431Z",fill:"#E33D26"}),s.default.createElement("path",{d:"M112.832 22.0002C111.396 22.0002 110.173 21.8844 108.312 21.1763V18.1537C109.466 18.6721 110.667 18.9314 111.914 18.9314C113.913 18.9314 115.326 18.0565 115.326 16.2652C114.292 17.066 113.35 17.6122 111.96 17.6122C109.134 17.6122 107.111 15.159 107.111 11.8079C107.111 8.45671 109.138 6.0498 112.172 6.0498C113.465 6.0498 114.246 6.33215 115.326 7.20697V6.28587H121.495V9.35466H120.553V15.9181C120.553 19.8849 117.847 22.0094 112.828 22.0094L112.832 22.0002ZM113.821 9.11398C112.902 9.11398 112.431 10.0119 112.431 11.8032C112.431 13.4557 112.925 14.3999 113.913 14.3999C114.809 14.3999 115.234 13.6223 115.234 11.8264C115.234 10.859 115.164 9.11398 113.821 9.11398Z",fill:"#E33D26"}),s.default.createElement("path",{d:"M19.4514 1.07373H19.0173V17.598H19.4514V1.07373Z",fill:"#E33D26"}),s.default.createElement("path",{d:"M14.5612 11.3078C13.9701 12.8677 12.8849 14.0757 11.3287 14.7145V11.3078L13.1943 9.6276L11.3287 7.97055V5.62845C13.0281 5.51273 14.2056 4.25836 14.2056 2.72165C14.2056 0.712813 12.2938 0 11.2087 0C10.9732 0 10.7146 0 10.3359 0.0925731V0.189775C10.479 0.189775 10.6915 0.166632 10.7607 0.166632C11.5134 0.166632 12.0814 0.523038 12.0814 1.20808C12.0814 1.72649 11.6566 2.24953 10.9039 2.24953C9.0383 2.24953 6.84485 0.735956 4.46207 0.735956C2.3425 0.731328 0.878659 2.31896 0.878659 3.9251C0.878659 5.53124 1.7976 6.03114 2.76734 6.38292L2.79042 6.29034C2.48565 6.10057 2.27323 5.77193 2.27323 5.2489C2.27323 4.54071 2.93358 3.94824 3.76016 3.94824C5.76428 3.94824 8.99674 5.62845 11.0055 5.62845H11.1948V7.99369L9.32922 9.6276L11.1948 11.3078V14.7608C10.4144 15.0431 9.61552 15.1635 8.78894 15.1635C5.67193 15.1635 3.69089 13.2704 3.69089 10.1275C3.69089 9.37303 3.78325 8.63707 3.99567 7.92889L5.55186 7.24385V14.1961L8.71505 12.8029V5.67473L4.06494 7.75763C4.53595 6.38755 5.50569 5.39238 6.66013 4.82306L6.63705 4.75363C3.52004 5.43867 0.5 7.80391 0.5 11.3541C0.5 15.4458 3.94487 18.2832 7.95773 18.2832C12.2061 18.2832 14.612 15.4458 14.6351 11.3078H14.5658H14.5612Z",fill:"#E33D26"})),s.default.createElement("defs",null,s.default.createElement("clipPath",{id:"clip0_7854_91185"},s.default.createElement("rect",{width:"121",height:"22",fill:"white",transform:"translate(0.5)"}))))};var s=r(n("q1tI")),l=n("lVLo"),c=function(){return"undefined"==typeof window?{width:121,height:22}:window.innerWidth>=l.widths.mediumLarge?{width:154,height:28}:window.innerWidth>=l.widths.medium?{width:132,height:24}:{width:121,height:22}}},YawQ:function(e,t,n){"use strict";t.a="/vi-assets/static-assets/icon-europe-morning-briefing_144x144-f0a330cb12ba0c31f81f13e25f6d0d18.webp"},Ybk9:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.superscriptClass=t.default=void 0;var i=n("Jqp9"),a=t.superscriptClass=(0,i.css)("vertical-align:super;font-size:smaller;line-height:0;"),o=(0,i.styled)("sup",{target:"epm1x5m0"})(a,";");t.default=o},YgNI:function(e,t,n){"use strict";var i=n("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.default=o;var a=i(n("q1tI"));function o(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.className;return a.default.createElement("svg",{className:t,width:"39",height:"39",viewBox:"0 0 39 39",fill:"none",xmlns:"http://www.w3.org/2000/svg"},a.default.createElement("g",null,a.default.createElement("rect",{width:"39",height:"39",rx:"8",fill:"#007585"}),a.default.createElement("path",{d:"M29.6428 22.3655C29.2536 23.4473 28.6346 24.4361 27.8265 25.2666C27.0184 26.0972 26.0397 26.7506 24.9548 27.1839V22.3655L27.6337 19.9858L24.9548 17.6389V14.3218C26.0613 14.3014 27.1162 13.8603 27.8962 13.0919C28.6763 12.3234 29.1201 11.288 29.1339 10.2048C29.1339 7.35313 26.3612 6.35012 24.7874 6.35012C24.3614 6.33817 23.9357 6.38227 23.5216 6.48123V6.6189C23.7226 6.6189 24.0306 6.58612 24.1378 6.58612C25.2294 6.58612 26.0532 7.08435 26.0532 8.06114C26.0441 8.26944 25.9919 8.47376 25.8997 8.66173C25.8076 8.84971 25.6774 9.01742 25.5171 9.15471C25.3569 9.292 25.1698 9.39602 24.9672 9.46046C24.7646 9.5249 24.5508 9.54842 24.3387 9.5296C21.6598 9.5296 18.4586 7.3859 14.9627 7.3859C11.8887 7.3859 9.76568 9.63449 9.76568 11.9093C9.76568 14.1841 11.1051 14.8921 12.4981 15.3969L12.5383 15.2592C12.2871 15.1039 12.0839 14.8845 11.9505 14.6246C11.8172 14.3647 11.7588 14.0742 11.7815 13.7842C11.7976 13.524 11.8664 13.2695 11.9839 13.0355C12.1014 12.8016 12.2653 12.5928 12.466 12.4214C12.6666 12.25 12.9001 12.1193 13.1528 12.037C13.4055 11.9548 13.6724 11.9225 13.938 11.9421C16.8446 11.9421 21.5393 14.3218 24.4458 14.3218H24.7204V17.6717L22.0416 19.9858L24.7204 22.3655V27.256C23.5999 27.6419 22.419 27.8327 21.2312 27.8198C16.7106 27.8198 13.8643 25.1451 13.8643 20.6873C13.8552 19.6337 14.0041 18.5846 14.3064 17.5734L16.5633 16.6031V26.4366L21.1508 24.4699V14.3873L14.4135 17.3374C14.7291 16.4354 15.2242 15.6037 15.8702 14.8903C16.5163 14.1769 17.3004 13.5959 18.1773 13.1811L18.1438 13.0827C13.6299 14.053 9.25 17.4029 9.25 22.4311C9.25 28.2263 14.2461 32.2645 20.0659 32.2645C26.2206 32.2645 29.7165 28.2459 29.75 22.3852L29.6428 22.3655Z",fill:"white"})))}o.displayName="AudioAppLogo"},Yh38:function(e,t,n){"use strict";var i,a,o=n("VkAN"),r=n.n(o),s=n("gcR/"),l=n.n(s),c=n("lSNA"),u=n.n(c),d=n("J4zp"),p=n.n(d),f=(n("q1tI"),n("eFc+")),m=n.n(f),h=n("Jqp9"),g=n("fZdH"),y=n("z0L9"),v=n.n(y),b=n("NW2b"),_=n("6qvD"),w=n("HMjI"),x=n.n(w),k=n("HTd6"),O=n("XMA8"),T=function(e,t){var n;try{n=e.creators.map((function(e){var t=e.promotionalMedia,n=e.displayName,i=e.bioUrl;return{crops:t&&t.crops||[],name:n,bioUrl:i||null}}))}catch(e){return null}return n.map((function(e){var t=e.name,n=e.crops,i=e.bioUrl;return{name:t,renditions:n.map((function(e){return e.renditions})),bioUrl:i}})).map((function(e){var t=e.name,n=e.renditions,i=e.bioUrl;return{name:t,flatCrops:Object(O.d)(n),bioUrl:i}})).map((function(e){var n=e.name,i=e.flatCrops,a=e.bioUrl;return{name:n,crop:Object(O.e)(i,t),bioUrl:a}}))},C=function(e){try{return 0===e.creators.length||e.creators.some((function(e){return e&&!e.promotionalMedia}))}catch(e){return!0}},E=n("wXC7"),S=n.n(E),P=Object(h.css)("margin:40px auto 0 auto;max-width:600px;width:calc(100% - 40px);",S.a.breakpoint.medium,"{width:100%;}",S.a.print),I=n("zT9C"),M=n.n(I);function A(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function j(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?A(Object(n),!0).forEach((function(t){u()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):A(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var N=function(e){var t,n,i=e.data,a=e.headerPresent,o=e.timestamp,r=e.article,s=Object(h.useTheme)(),c=Object(g.a)(),u=v()({abra:c,reportExposure:b.e}),d=p()(u,2),f=d[0],m=d[1];if(!i)return null;if(!i.bylines)return null;var y,w,O=i.bylines,E=void 0===O?[]:O,S=i.hideHeadshots,I=void 0===S||S,A=i.role,N=i.textAlign,L=function(e){var t,n=e.sourcePublisher,i=e.firstPublished,a=e.bylines,o=new Date(i).getFullYear()<=2006,r="archive-repub"===n;return 1===(null===(t=a[0])||void 0===t?void 0:t.creators.length)&&o&&r}(j(j({},r),{},{bylines:E}))||(null===(y={bylines:E}.bylines[0])||void 0===y||null===(w=y.creators[0])||void 0===w||!w.displayName)?function(e){var t=e.bylines.filter(Boolean);if(null!=t&&t.length){var n,i=M()(t),a=null===(n=i[0])||void 0===n?void 0:n.renderedRepresentation;return i[0].creators.forEach((function(e){e.displayName=null==a?void 0:a.replace(/^By /i,"")})),i}return!1}({bylines:E}):E,D=s.section,R=void 0===D?"news":D,B=0===a.length,z=N&&N.toLowerCase(),F=r&&(null===(t=r.compatibility)||void 0===t?void 0:t.isOak)||"opinion"===R,U=E.map(T),H=function(e){var t=e.hideHeadshots,n=void 0===t||t,i=e.headshotCandidate,a=void 0!==i&&i,o=e.bylines,r=void 0===o?[]:o,s=e.section,l=void 0===s?"":s,c=e.headshotCount,u=void 0===c?0:c;return!1===n&&!0===a&&r.length>0&&!1===r.some(C)&&("opinion"!==l&&u<=6||"opinion"===l&&u<=4)}({hideHeadshots:I,headshotCandidate:F,bylines:E,section:R,headshotCount:Object(_.getHeadshotCount)(U)}),W=r?r.lastMajorModification:null,q={headshots:H?U:null,bylines:L,role:A&&A.length>0?Object(k.b)(A):null,timestamp:o.timestamp||o.updatedText?{time:o.timestamp,updatedText:o.updatedText,lastMajorModification:W,showUpdatedTimestamp:o.showUpdatedTimestamp}:null},V=l()(x.a,{data:q,contentAlignment:z,section:null==r||null===(n=r.section)||void 0===n?void 0:n.name,wordCount:null==r?void 0:r.wordCount,showReadingTime:m,readingTimeRef:f});return B?l()("div",{className:P},void 0,V):V};N.fragments={data:m()(i||(i=r()(['\n    fragment BylineBlock_data on BylineBlock {\n      textAlign\n      hideHeadshots\n      bylines {\n        prefix\n        creators {\n          ... on Person {\n            id\n            displayName\n            bioUrl\n            promotionalMedia {\n              ... on Image {\n                id\n                crops(renditionNames: "thumbLarge") {\n                  renditions {\n                    url\n                    name\n                  }\n                }\n              }\n            }\n          }\n        }\n        renderedRepresentation\n      }\n      role @filterEmpty {\n        ...TextInline_content\n      }\n    }\n    ',"\n  "])),k.a.fragments.content),article:m()(a||(a=r()(["\n    fragment BylineBlock_article on Article {\n      id\n      compatibility {\n        isOak\n      }\n    }\n  "])))},N.defaultProps={article:null,data:null,headerPresent:"",timestamp:{}};t.a=N},Ymd4:function(e,t,n){"use strict";var i,a=n("VkAN"),o=n.n(a),r=n("gcR/"),s=n.n(r),l=(n("q1tI"),n("eFc+")),c=n.n(l),u=n("Jqp9"),d=n("fpec"),p=n.n(d),f=n("XlcC"),m=n.n(f),h=n("V6Yu"),g=n("jOYC"),y=n("TvEp"),v=n.n(y),b=n("wXC7"),_=n.n(b),w=n("nxVm"),x=n.n(w),k=Object(u.css)("margin:0 ",g.b.grid.pageMargin," 20px;position:relative;",_.a.breakpoint.small,"{margin-left:auto;margin-right:auto;}",x.a,";"),O=v.a.withComponent("h2",{target:"e1lk7jzz0"}),T=Object(u.css)("text-align:right;direction:rtl;unicode-bidi:isolate;"),C=k,E=function(e){var t,n=e.data,i=e.className,a=e.replaceHeading1,o=e.honorAlignment,r=e.customOffset,l=Object(u.useTheme)(),c=o&&(null==n||null===(t=n.textAlign)||void 0===t?void 0:t.toLowerCase())||null,d="rightToLeft"===(null==l?void 0:l.languageDirection)?T:null,f=Object(u.cx)(C,g.b.layout.textAlign[c]||null,i,d),y=(null==n?void 0:n.content)||"",v=Object(h.generateContentLink)(null==n?void 0:n.content);return a?s()(O,{className:f,id:v},void 0,n.content.map(m.a)):s()(p.a,{balanceText:!0,hangPunctuation:!0,textAlign:n.textAlign,className:f,content:y,customOffset:r},void 0,n.content.map(m.a))};E.displayName="Heading1Block",E.defaultProps={className:void 0,replaceHeading1:void 0,honorAlignment:!0,customOffset:""},E.fragments={data:c()(i||(i=o()(["\n    fragment Heading1Block_data on Heading1Block {\n      textAlign\n      content {\n        ... on InlineUnion {\n          __typename\n          ... on LineBreakInline {\n            type\n          }\n          ... on TextInline {\n            text @stripHtml\n            formats {\n              __typename\n              ... on BoldFormat {\n                type\n              }\n              ... on ItalicFormat {\n                type\n              }\n              ... on LinkFormat {\n                url\n                title\n              }\n            }\n          }\n        }\n      }\n    }\n  "])))};t.a=E},Youu:function(e,t,n){"use strict";var i=n("TqRt"),a=n("cDf5");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=i(n("o0o1")),r=i(n("lSNA")),s=i(n("yXPU")),l=i(n("J4zp")),c=h(n("q1tI")),u=(i(n("17x9")),n("Jqp9")),d=n("p3S2"),p=n("7zGq"),f=(i(n("Ae6e")),h(n("aViE")));function m(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(m=function(e){return e?n:t})(e)}function h(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=a(e)&&"function"!=typeof e)return{default:e};var n=m(t);if(n&&n.has(e))return n.get(e);var i={__proto__:null},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var r in e)if("default"!==r&&{}.hasOwnProperty.call(e,r)){var s=o?Object.getOwnPropertyDescriptor(e,r):null;s&&(s.get||s.set)?Object.defineProperty(i,r,s):i[r]=e[r]}return i.default=e,n&&n.set(e,i),i}var g=function(e){var t=e.className,n=e.showTooltip,i=e.ctaText,a=e.ariaLabel,m=(e.storageKey,e.segment),h=e.onView,g=e.onSubscribe,y=e.onUnsubscribe,v=(e.tooltipArrowPosition,e.buttonWrapperClassName),b=e.showToggle,_=e.errorAlertClassName,w=(e.tooltipOverrideClassName,e.alertWrapperClassName),x=e.testingInBrowser,k=(0,u.useTheme)().shouldRender,O=(0,c.useState)(!1),T=(0,l.default)(O,2),C=T[0],E=T[1],S=(0,c.useState)(!1),P=(0,l.default)(S,2),I=P[0],M=P[1],A=(0,c.useState)(!1),j=(0,l.default)(A,2),N=j[0],L=(j[1],(0,c.useState)(!1)),D=(0,l.default)(L,2),R=D[0],B=D[1],z=(0,c.useState)(),F=(0,l.default)(z,2),U=F[0],H=F[1],W=(0,c.useRef)(),q=(0,c.useRef)(null),V=(0,p.useOnScreen)(W);(0,c.useEffect)((function(){h&&V&&!R&&(h(),B(!0))}),[h,R,V]),(0,c.useEffect)((function(){window&&window.NativeBridge&&window.NativeBridge.subscriptionStatus&&window.NativeBridge.subscriptionStatus(m).then((function(e){e.success&&("true"===e.values.subscribed&&E(!0),"false"===e.values.subscribed&&E(!1),M(!0))})).catch((function(e){M(!1),console.error(e)}))}),[m]);var G=(0,c.useCallback)(function(){var e=(0,s.default)(o.default.mark((function e(t,n){var i,a,r;return o.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r={tag:m,region:n,product:"live"},null===(i=window)||void 0===i||null===(a=i.NativeBridge)||void 0===a||!a.updateSubscription){e.next=13;break}return e.prev=2,e.next=5,window.NativeBridge.updateSubscription(r);case 5:e.sent.success&&E(t),e.next=13;break;case 9:e.prev=9,e.t0=e.catch(2),H("Something went wrong. Please try again in a moment."),console.error(e.t0);case 13:case"end":return e.stop()}}),e,null,[[2,9]])})));return function(t,n){return e.apply(this,arguments)}}(),[m]),Y=(0,c.useCallback)((0,s.default)(o.default.mark((function e(){var t;return o.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return E(!0),N&&(null==q||null===(t=q.current)||void 0===t||t.closeTooltip()),e.prev=2,e.next=5,G(!0,"live-blog");case 5:g&&g(),U&&H(),e.next=13;break;case 9:e.prev=9,e.t0=e.catch(2),E(!1),H("Something went wrong. Please try again in a moment.");case 13:case"end":return e.stop()}}),e,null,[[2,9]])}))),[U,g,N,G]),X=(0,c.useCallback)((0,s.default)(o.default.mark((function e(){return o.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return E(!1),e.prev=1,e.next=4,G(!1,"live-blog");case 4:y&&y(),U&&H(),e.next=12;break;case 8:e.prev=8,e.t0=e.catch(1),E(!0),H("Something went wrong. Please try again in a moment.");case 12:case"end":return e.stop()}}),e,null,[[1,8]])}))),[U,y,G]);return b&&(I||x)?c.default.createElement("div",{ref:W,className:(0,u.cx)(f.notificationContainerClass,(0,r.default)((0,r.default)({},f.notificationLiveCoverageClass,null==k?void 0:k.bulletBlock),f.hasPostDividerClass,null==k?void 0:k.postDivider),t)},n&&!1,c.default.createElement("div",{className:(0,u.cx)(f.pushSubWrapperClass,w)},c.default.createElement("p",{className:f.pushSubCtaClass},i||d.LIVE_ALERT_TOGGLE_DEFAULTS.cta),c.default.createElement("div",{className:(0,u.cx)(f.buttonWrapperClass,v)},c.default.createElement("button",{type:"button","aria-label":a||d.LIVE_ALERT_TOGGLE_DEFAULTS.ariaLabel,className:(0,u.cx)(f.buttonStylesBaseClass,C?"on":"off"),onClick:C?X:Y}))),U&&c.default.createElement("div",{className:_},c.default.createElement("p",{className:f.errorAlertClass},U))):c.default.createElement("div",{ref:W})};g.defaultProps={className:void 0,ariaLabel:void 0,ctaText:void 0,showTooltip:!1,storageKey:void 0,tooltipArrowPosition:"bottom",onView:void 0,onSubscribe:void 0,onUnsubscribe:void 0,buttonWrapperClassName:void 0,showToggle:!0,errorAlertClassName:void 0,tooltipOverrideClassName:void 0,alertWrapperClassName:void 0,testingInBrowser:!1};t.default=g},Ys1a:function(e,t,n){"use strict";var i=n("TqRt"),a=n("cDf5");Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t=function(t){var n=t.onAppearedInViewport,i=(0,r.default)(t,c),a=(0,s.useState)(!1),u=(0,o.default)(a,2),d=u[0],p=u[1],f=(0,s.useRef)(n);return(0,s.useEffect)((function(){var e;d&&(null===(e=f.current)||void 0===e||e.call(f))}),[d]),n?s.default.createElement(l.default,{active:!d,onChange:function(e){return e&&p(!0)}},s.default.createElement(e,i)):s.default.createElement(e,i)};return t.displayName="VisibilitySensor(".concat(e.displayName,")"),t};var o=i(n("J4zp")),r=i(n("QILm")),s=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=a(e)&&"function"!=typeof e)return{default:e};var n=u(t);if(n&&n.has(e))return n.get(e);var i={__proto__:null},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var r in e)if("default"!==r&&{}.hasOwnProperty.call(e,r)){var s=o?Object.getOwnPropertyDescriptor(e,r):null;s&&(s.get||s.set)?Object.defineProperty(i,r,s):i[r]=e[r]}return i.default=e,n&&n.set(e,i),i}(n("q1tI")),l=i(n("aqT/")),c=["onAppearedInViewport"];function u(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(u=function(e){return e?n:t})(e)}},ZB1J:function(e,t,n){"use strict";var i=n("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.visibleScrollClass=t.scrollContainerClass=t.preventInteractivesFromTurningLinksBlueClass=t.menuContainerClass=t.listSpacingClass=t.listClass=t.isOpenClass=t.electionTitleClass=t.dropdownButtonTextClass=t.dropdownButtonClass=t.MENU_LEFT_RIGHT_SPACING=t.MENU_HEIGHT=void 0;var a=i(n("lSNA")),o=i(n("QILm")),r=n("Jqp9"),s=n("3sMT"),l=i(n("wXC7")),c=["alpha"];function u(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function d(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?u(Object(n),!0).forEach((function(t){(0,a.default)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):u(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var p=function(e){e.alpha;return d(d({},(0,o.default)(e,c)),{},{alpha:0})},f=s.light.colors.background.elevated.transform(p).rgba,m=s.dark.colors.background.elevated.transform(p).rgba,h=t.MENU_HEIGHT=55,g=(t.menuContainerClass=(0,r.css)("display:flex;align-items:center;justify-content:left;background:",s.color.background.elevated,";border-bottom:1px solid ",s.color.stroke.quaternary,";min-height:",h,"px;position:relative;",l.default.breakpoint.small,"{justify-content:center;}",l.default.printHide),(0,r.css)("scrollbar-width:none;::-webkit-scrollbar{display:none;}@media (pointer:coarse){overflow-x:scroll;-webkit-overflow-scrolling:touch;}")),y=t.MENU_LEFT_RIGHT_SPACING=20;t.scrollContainerClass=(0,r.css)("@media (min-width:",600+y,"px){min-width:",600+y,"px;}min-width:unset;padding:0.5px 0 0.5px ",y,"px;display:flex;align-items:center;justify-content:left;overflow-x:auto;white-space:nowrap;",g," ",l.default.breakpoint.mediumLarge,"{align-items:baseline;}::after{@media (max-width:",l.default.breakpoint.width.small-1,"px){content:'';background:linear-gradient(90deg,",f,",",s.color.background.elevated,");height:40px;position:absolute;right:0;width:24px;z-index:2;",l.default.darkColorPreference("background: linear-gradient(90deg, ".concat(m,", ").concat(s.color.background.elevated,")")),";}}"),t.visibleScrollClass=(0,r.css)("@media (pointer:coarse){overflow-x:visible;",l.default.breakpoint.mediumLarge,"{overflow-x:auto;}}"),t.listSpacingClass=(0,r.css)("padding:1em 0;margin-right:1.4em;&:last-child{margin-right:",y,"px;}"),t.listClass=(0,r.css)("font-family:",l.default.font.franklinBase,";display:flex;width:auto;list-style:none;padding-left:0;flex-shrink:0;justify-content:center;align-items:baseline;"),t.preventInteractivesFromTurningLinksBlueClass=(0,r.css)("color:",s.color.content.primary,";"),t.electionTitleClass=(0,r.css)("align-self:center;"),t.dropdownButtonClass=(0,r.css)("font-family:",l.default.font.franklinBase,";font-size:",l.default.font.size(13),";background:",s.color.background.elevated,";color:",s.color.content.primary,";",l.default.breakpoint.small,"{font-size:",l.default.font.size(14),";}"),t.dropdownButtonTextClass=(0,r.css)("padding-bottom:1px;",l.default.breakpoint.small,"{:hover{color:",s.color.content.tertiary,";border-bottom:1px solid ",s.color.content.tertiary,";}}&::after{content:'›';display:inline-block;transform:scale(1.25) rotate(90deg);margin-left:0.4rem;}"),t.isOpenClass=(0,r.css)("&::after{transform:scale(1.25) rotate(270deg);transform-origin:0.1rem 0.6rem;}")},ZHMA:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=function(){try{if("undefined"==typeof navigator||/MSIE\s8\.0/.test(navigator.userAgent)||!window.localStorage)return!1;var e="nyt-test-".concat(Date.now());return window.localStorage.setItem(e,1),window.localStorage.removeItem(e),!0}catch(e){return!1}};t.default={getItem:function(e){try{return i()&&window.localStorage.getItem(e)}catch(e){return null}},setItem:function(e,t){if(i())try{window.localStorage.setItem(e,t)}catch(e){return null}return null},removeItem:function(e){try{return i()&&window.localStorage.removeItem(e)}catch(e){return null}}}},ZT1T:function(e,t,n){"use strict";t.a="/vi-assets/static-assets/connections-e04f49529027a322a67c4a6f53257b34.png"},ZYXy:function(e,t,n){"use strict";var i=n("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=i(n("q1tI")),o=(i(n("17x9")),function(e){var t=e.className,n=e.fill;return a.default.createElement("svg",{viewBox:"0 0 15 9",className:t,width:"15",height:"9",xmlns:"http://www.w3.org/2000/svg"},a.default.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M.906 8.418V0L5.64 4.76.906 8.419zm13 0L9.174 4.761 13.906 0v8.418zM7.407 6.539l-1.13-1.137L.907 9h13l-5.37-3.598-1.13 1.137zM1.297 0h12.22l-6.11 5.095L1.297 0z",fill:n}))});o.displayName="Mail",o.defaultProps={className:void 0,fill:"#000"};t.default=o},"Zc/f":function(e,t,n){"use strict";var i=n("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.inlineRegions=t.default=void 0;var a=i(n("lSNA")),o={TOP_BANNER:"TOP_BANNER",ABOVE_MAIN_CONTENT:"ABOVE_MAIN_CONTENT",MAIN_CONTENT_1:"MAIN_CONTENT_1",MAIN_CONTENT_2:"MAIN_CONTENT_2",MAIN_CONTENT_3:"MAIN_CONTENT_3",BELOW_MAIN_CONTENT:"BELOW_MAIN_CONTENT"};t.inlineRegions=(0,a.default)((0,a.default)((0,a.default)({},o.MAIN_CONTENT_1,{minPercent:.2,maxPercent:.4}),o.MAIN_CONTENT_2,{minPercent:.4,maxPercent:.6}),o.MAIN_CONTENT_3,{minPercent:.6,maxPercent:.8}),t.default=o},ZfOj:function(e,t,n){"use strict";var i=n("TqRt"),a=n("cDf5");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=i(n("q1tI")),r=(i(n("17x9")),n("Jqp9")),s=n("ZoyY"),l=i(n("PxMw")),c=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=a(e)&&"function"!=typeof e)return{default:e};var n=u(t);if(n&&n.has(e))return n.get(e);var i={__proto__:null},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var r in e)if("default"!==r&&{}.hasOwnProperty.call(e,r)){var s=o?Object.getOwnPropertyDescriptor(e,r):null;s&&(s.get||s.set)?Object.defineProperty(i,r,s):i[r]=e[r]}return i.default=e,n&&n.set(e,i),i}(n("v466"));function u(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(u=function(e){return e?n:t})(e)}var d=s.textConstants.CRITICS_PICK_TEXT,p=s.textConstants.DISCLAIMER_TEXT,f=function(e,t){return 1===t?e:"".concat(e,"s")},m=function(e){var t=e.review,n=e.index,i=e.deviceType,a=e.trackClick,u=t.isCriticsPick,m=t.overrideLabel,h=t.subject,g=void 0===h?{}:h;if(!g)return null;var y=g.directors,v=g.genres,b=g.imdbId,_=g.movieCast,w=g.movieRating,x=g.runtimeUS,k=g.ticketUrl,O=g.title,T=g.writers,C=m||O,E=(0,s.movieRating)(w),S=(_||[]).map((function(e){return null==e?void 0:e.actor})).filter(Boolean),P=(0,s.formatDuration)(x),I=function(e,t){return e?"http://".concat("smartphone"===t?"m":"www",".imdb.com/title/").concat(e,"/?ref_=ref_ext_NYT"):null}(b,i),M=k;return k&&"smartphone"===i&&k.match(/www\.imdb/)&&(M=k.replace("www.","m.")),o.default.createElement("aside",{className:c.wrapperClass,id:"movie-review-".concat(n+1)},o.default.createElement("div",{className:c.reviewClass},o.default.createElement("header",null,o.default.createElement("div",null,C&&o.default.createElement("h4",{dangerouslySetInnerHTML:{__html:C}}),u&&o.default.createElement("div",{className:c.ratingClass},o.default.createElement("span",{className:c.criticsPickClass},o.default.createElement("i",null),o.default.createElement("span",null,d)))),k&&o.default.createElement("div",{className:c.linkWithDisclaimerClass},o.default.createElement(l.default,{theme:"reviews",className:c.reviewButtonClass,href:M,onClick:function(){return a("movie")},target:"_blank",rel:"noopener noreferrer"},"Find Tickets"),o.default.createElement("p",{className:c.disclaimerClass},p.MOVIE))),o.default.createElement("dl",{className:c.metadataClass},y&&!!y.length&&o.default.createElement("div",null,o.default.createElement("dt",null,f("Director",y.length)),o.default.createElement("dd",null,y.reduce((function(e,t,n){return y.length>1&&n>0&&e.push(o.default.createElement("span",{key:"".concat(n.toString(),"-between")},", ")),e.push(o.default.createElement("span",{key:n.toString(),dangerouslySetInnerHTML:{__html:t}})),e}),[]))),T&&!!T.length&&o.default.createElement("div",null,o.default.createElement("dt",null,f("Writer",T.length)),o.default.createElement("dd",null,T.reduce((function(e,t,n){return T.length>1&&n>0&&e.push(o.default.createElement("span",{key:"".concat(n.toString(),"-between")},", ")),e.push(o.default.createElement("span",{key:n.toString(),dangerouslySetInnerHTML:{__html:t}})),e}),[]))),S&&!!S.length&&o.default.createElement("div",null,o.default.createElement("dt",null,f("Star",S.length)),o.default.createElement("dd",null,S.reduce((function(e,t,n){return S.length>1&&n>0&&e.push(o.default.createElement("span",{key:"".concat(n.toString(),"-between")},", ")),e.push(o.default.createElement("span",{key:n.toString(),dangerouslySetInnerHTML:{__html:t}})),e}),[]))),E&&o.default.createElement("div",null,o.default.createElement("dt",null,"Rating"),o.default.createElement("dd",null,E)),P&&o.default.createElement("div",null,o.default.createElement("dt",null,"Running Time"),o.default.createElement("dd",null,P)),v&&!!v.length&&o.default.createElement("div",null,o.default.createElement("dt",null,f("Genre",v.length)),o.default.createElement("dd",null,v.reduce((function(e,t,n){return v.length>1&&n>0&&e.push(o.default.createElement("span",{key:"".concat(n.toString(),"-between")},", ")),e.push(o.default.createElement("span",{key:n.toString(),dangerouslySetInnerHTML:{__html:t}})),e}),[])))),I&&o.default.createElement("div",{className:c.poweredByClass},o.default.createElement("a",{href:I,title:"Visit this movie's page on IMDb",target:"_blank",rel:"noopener noreferrer"},o.default.createElement("div",{className:(0,r.cx)(c.logoClass,"imdb")})),o.default.createElement("p",null,"Movie data powered by IMDb.com"))))};m.displayName="MovieFooter",m.defaultProps={deviceType:""};t.default=m},ZgZ1:function(e,t,n){"use strict";var i=this&&this.__makeTemplateObject||function(e,t){return Object.defineProperty?Object.defineProperty(e,"raw",{value:t}):e.raw=t,e};Object.defineProperty(t,"__esModule",{value:!0}),t.downloadButtonClass=t.logoClass=t.mainContent=t.contentTextClass=t.headerTextClass=void 0;var a=n("Jqp9"),o=n("lVLo");t.headerTextClass=(0,a.css)(r||(r=i(["\n  font-family: ",";\n  font-size: 15px;\n  font-weight: ",";\n  margin: auto 0 auto 20px;\n  white-space: pre-wrap;\n\n  @media (min-width: ","px) {\n    white-space: unset;\n  }\n"],["\n  font-family: ",";\n  font-size: 15px;\n  font-weight: ",";\n  margin: auto 0 auto 20px;\n  white-space: pre-wrap;\n\n  @media (min-width: ","px) {\n    white-space: unset;\n  }\n"])),o.fonts.franklin,o.fontWeights.bold,o.widths.small),t.contentTextClass=(0,a.css)(s||(s=i(["\n  font-family: ",";\n  font-size: 18px;\n  font-weight: ",";\n  color: ",";\n  margin: 0 0 18px;\n"],["\n  font-family: ",";\n  font-size: 18px;\n  font-weight: ",";\n  color: ",";\n  margin: 0 0 18px;\n"])),o.fonts.cheltenham,o.fontWeights.light,o.colors.white);var r,s,l,c,u;t.mainContent=(0,a.css)(l||(l=i(["\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  justify-content: center;\n  background-image: linear-gradient(to top right, #16243c, #254034);\n  border-radius: 6px;\n  padding: ","px;\n  margin: 0 ","px ","px;\n  width: calc(100% - (","px + ","px));\n  filter: drop-shadow(0px 4px 2px ",");\n"],["\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  justify-content: center;\n  background-image: linear-gradient(to top right, #16243c, #254034);\n  border-radius: 6px;\n  padding: ","px;\n  margin: 0 ","px ","px;\n  width: calc(100% - (","px + ","px));\n  filter: drop-shadow(0px 4px 2px ",");\n"])),26,20,20,52,40,o.colors.lighterGrey),t.logoClass=(0,a.css)(c||(c=i(["\n  height: 16px;\n  margin-bottom: 12px;\n\n  svg {\n    height: 100%;\n    max-width: 100%;\n  }\n"],["\n  height: 16px;\n  margin-bottom: 12px;\n\n  svg {\n    height: 100%;\n    max-width: 100%;\n  }\n"]))),t.downloadButtonClass=(0,a.css)(u||(u=i(["\n  display: flex;\n  align-items: baseline;\n  gap: 5px;\n  border-radius: 42px;\n  font-family: ",";\n  font-weight: ",";\n  font-size: 12px;\n  text-decoration: none;\n  background-color: ",";\n  color: ",";\n  padding: 6px 26px;\n"],["\n  display: flex;\n  align-items: baseline;\n  gap: 5px;\n  border-radius: 42px;\n  font-family: ",";\n  font-weight: ",";\n  font-size: 12px;\n  text-decoration: none;\n  background-color: ",";\n  color: ",";\n  padding: 6px 26px;\n"])),o.fonts.franklin,o.fontWeights.semiBold,o.colors.white,o.colors.black)},Zgws:function(e,t,n){"use strict";var i=n("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=i(n("dE6V"));t.default=a.default},Zhpy:function(e,t,n){"use strict";var i=n("yXPU"),a=n.n(i),o=n("J4zp"),r=n.n(o),s=n("o0o1"),l=n.n(s),c=(n("ls82"),n("q1tI")),u=n("QILm"),d=n.n(u),p=n("cr+I"),f=n.n(p),m=n("lfLc"),h=n("Fm/i"),g=n("3yie"),y=n("0O4q"),v=n("wYzE"),b=n("+ClL"),_=["error"],w={method:"GET",credentials:"include"},x=new Promise((function(e,t){var n,i;null!==(n=window.vi)&&void 0!==n&&null!==(i=n.webviewEnvironment)&&void 0!==i&&i.isPreloaded||!window.navigator.onLine?e(null):y.a.subscribe((function(n){var i,a,o=n.error,r=d()(n,_);if(o)t(new Error("Targeting API error from User Info"));else if(null!==(null==r?void 0:r.id)){var s=f.a.parse(null===(i=window)||void 0===i||null===(a=i.location)||void 0===a?void 0:a.search),l=s.tapiDev?"https://a.stg.nytimes.com/svc/nyt/v2/data-layer":"https://a.nytimes.com/svc/nyt/v2/data-layer";s.nytsOverride&&s.regi_id&&(l="".concat(l,"?nytsOverride=").concat(s.nytsOverride,"&regi_id=").concat(s.regi_id));try{var c,u,p,y,x=null!==(c=vi)&&void 0!==c&&null!==(u=c.env)&&void 0!==u&&u.ENVIRONMENT&&"prd"!==(null===(p=vi)||void 0===p||null===(y=p.env)||void 0===y?void 0:y.ENVIRONMENT)?Object(m.charlatan)("targeting_api"):null;if(x)return void e(x)}catch(e){}Object(g.a)(l,w).then((function(e){if(e.ok)return e.json();throw new Error("Targeting API response is ".concat(e.status))})).then((function(e){var t,n,i,a,o,r,s="signals-".concat(null==e||null===(t=e.regi_data)||void 0===t||null===(n=t.signals)||void 0===n?void 0:n.last_seen_segment_label,";risk-").concat(null==e||null===(i=e.regi_data)||void 0===i||null===(a=i.signals)||void 0===a?void 0:a.risk_category_core_sub),l="".concat(s,";");return Object(v.a)({event:"impression",module:{name:"target-api",context:"response",label:l},application:{name:"nyt-vi",environment:vi.env.ENVIRONMENT,dlVersion:h.version},referrer:{url:null===(o=window)||void 0===o||null===(r=o.location)||void 0===r?void 0:r.href}}),e})).then(e).catch((function(e){Object(b.a)(e,{msg:"Targeting API"}),t(e)}))}else e(null)}),(function(){t(new Error("Targeting API error from User Info"))}))}));var k=n("qs2k");t.a=function(){var e=Object(c.useState)(null),t=r()(e,2),n=t[0],i=t[1],o=Object(c.useState)(!0),s=r()(o,2),u=s[0],d=s[1],p=Object(c.useState)(null),f=r()(p,2),m=f[0],h=f[1];return Object(c.useEffect)((function(){return x.then(function(){var e=a()(l.a.mark((function e(t){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(k.d)();case 2:i(t);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){h(e)})).finally((function(){d(!1)})),function(){}}),[]),{data:n,loading:u,error:m}}},ZjMX:function(e,t,n){"use strict";var i,a=n("VkAN"),o=n.n(a),r=n("gcR/"),s=n.n(r),l=n("lSNA"),c=n.n(l),u=(n("q1tI"),n("17x9")),d=n.n(u),p=n("eFc+"),f=n.n(p),m=n("Jqp9"),h=n("3Rk2"),g=n.n(h),y=n("wXC7"),v=n.n(y),b=g()([v.a.breakpoint.small,v.a.breakpoint.medium,"@media (min-width: 834px)"]),_=Object(m.css)("display:flex;flex-direction:column;"),w=Object(m.css)("display:flex;justify-content:space-around;@media (min-width:375px){align-items:center;}"),x=Object(m.css)("justify-content:flex-start;"),k=Object(m.css)("text-align:start;@media (max-width:374px){padding-right:10px;}",b({paddingRight:["22px","0px","70px"]}),";"),O=Object(m.css)("margin:0 auto;",b({width:["40%",null,"145px","172px"],height:["40%",null,"145px","172px"]}),";"),T=Object(m.css)("font-family:",v.a.font.serifMedium,";font-weight:",v.a.font.weight.book,";@media (max-width:374px){font-size:",v.a.font.size(15),";line-height:1.25em;}",b({padding:["10px 0",null,"14px 0"],fontSize:[v.a.font.size(16),null,v.a.font.size(22),v.a.font.size(28)],lineHeight:[v.a.font.size(22),null,v.a.font.size(30),v.a.font.size(38)]}),";"),C=Object(m.css)("opacity:0.6;font-family:",v.a.font.franklinBase,";font-weight:",v.a.font.weight.medium,";font-size:",v.a.font.size(14),";line-height:",v.a.font.size(20),";",b({fontSize:[v.a.font.size(14),null,v.a.font.size(19),v.a.font.size(23)],lineHeight:[v.a.font.size(19),null,v.a.font.size(30),v.a.font.size(38)]}),";"),E=Object(m.css)("justify-content:flex-end;"),S=Object(m.css)("position:absolute;width:100%;height:100%;object-fit:cover;top:0;left:0;z-index:1;"),P=Object(m.css)("position:relative;z-index:5;text-align:start;padding:0 15px 4px;"),I=Object(m.css)("font-family:",v.a.font.cheltenham,";font-weight:",v.a.font.weight.medium,";font-size:",v.a.font.size(14),";line-height:",v.a.font.size(18),";color:",v.a.color.white,";letter-spacing:0.2px;margin-bottom:4px;"),M=Object(m.css)("font-family:",v.a.font.franklinBase,";font-weight:",v.a.font.weight.medium,";font-size:",v.a.font.size(12),";line-height:",v.a.font.size(18),";color:",v.a.color.white,";opacity:0.6;");function A(e){var t,n,i,a,o,r,l,u,d,p,f=e.article,h=f.bylines,g=f.headline,y=f.promotionalMedia,v=e.isVariant,b=e.className,A=(null==y||null===(t=y.video)||void 0===t||null===(n=t.crops)||void 0===n||null===(i=n[0])||void 0===i||null===(a=i.renditions)||void 0===a||null===(o=a[0])||void 0===o?void 0:o.url)||(null==y||null===(r=y.crops)||void 0===r||null===(l=r[0])||void 0===l||null===(u=l.renditions)||void 0===u||null===(d=u[0])||void 0===d?void 0:d.url)||(null==y?void 0:y.square),j=(null==y||null===(p=y.caption)||void 0===p?void 0:p.text)||"";return s()("div",{className:Object(m.cx)(_,c()({},E,v),b),"data-testid":"ArticlePreview"},void 0,s()("div",{className:Object(m.cx)(c()(c()({},x,!A),w,!v))},void 0,s()("div",{className:v?P:k},void 0,s()("h2",{className:v?I:T},void 0,g.default),s()("h3",{className:v?M:C},void 0,h.map((function(e){return e.renderedRepresentation})))),A&&s()("img",{className:v?S:O,src:A,alt:j})))}A.displayName="ArticlePreview";var j=d.a.shape({renditions:d.a.arrayOf(d.a.shape({url:d.a.string}))});d.a.arrayOf(d.a.shape({renderedRepresentation:d.a.string})).isRequired,d.a.shape({default:d.a.string}).isRequired,d.a.shape({crops:d.a.arrayOf(j),video:d.a.shape({crops:d.a.arrayOf(j)})});A.defaultProps={className:void 0,isVariant:!1},A.fragments={article:f()(i||(i=o()(["\n    fragment ArticlePreview_article on Article {\n      id\n      bylines {\n        renderedRepresentation\n      }\n      headline {\n        default\n      }\n      promotionalMedia {\n        ... on Image {\n          id\n          crops(cropNames: [MEDIUM_SQUARE]) {\n            renditions {\n              url\n            }\n          }\n        }\n        ... on Video {\n          id\n          video: promotionalMedia {\n            ... on Image {\n              id\n              crops(cropNames: [MEDIUM_SQUARE]) {\n                renditions {\n                  url\n                }\n              }\n            }\n          }\n        }\n      }\n    }\n  "])))};t.a=A},ZssJ:function(e,t,n){"use strict";var i=n("TqRt"),a=n("cDf5");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=i(n("q1tI")),r=(i(n("17x9")),i(n("h3Sg"))),s=i(n("hXGK")),l=i(n("49hH")),c=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=a(e)&&"function"!=typeof e)return{default:e};var n=u(t);if(n&&n.has(e))return n.get(e);var i={__proto__:null},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var r in e)if("default"!==r&&{}.hasOwnProperty.call(e,r)){var s=o?Object.getOwnPropertyDescriptor(e,r):null;s&&(s.get||s.set)?Object.defineProperty(i,r,s):i[r]=e[r]}return i.default=e,n&&n.set(e,i),i}(n("UMeL"));function u(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(u=function(e){return e?n:t})(e)}var d=function(e){var t=e.playerRef,n=e.isPlaying,i=e.onPlayPause,a=e.audioDuration,u=e.currentTime,d=e.isVisible;return o.default.createElement("div",{className:c.controlsClass,"data-testid":"transcript-playback-controls"},o.default.createElement("div",{className:c.playbackControlsClass},o.default.createElement(r.default,{playerRef:t,isPlaying:n,isVisible:d,onPlayPause:i}),o.default.createElement(l.default,{isPlaying:n,playerRef:t}),o.default.createElement(s.default,{playerRef:t,audioDuration:a,currentTime:u})))};d.displayName="Controls",d.defaultProps={playerRef:void 0,isVisible:void 0,isPlaying:void 0,onPlayPause:void 0,audioDuration:void 0,currentTime:void 0};t.default=d},ZwWh:function(e,t,n){"use strict";var i=n("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=n("Jqp9"),o=i(n("42vy")),r=i(n("yEZI")),s=i(n("wXC7")),l=n("3sMT"),c=(0,a.styled)("div",{target:"e1hjfjg00"})("display:flex;align-items:center;justify-content:",(function(e){return e&&"Compact"===e.displayStyle?"space-between":"start"}),";border:1px solid ",l.color.stroke.quaternary,";border-width:1px 0;padding:20px 0;margin-bottom:20px;a{display:inline-block;text-decoration:none;}.thumbnail-link{margin-right:30px;width:180px;min-width:180px;filter:drop-shadow( 0 0 3px ",l.dark.colors.background.primary.transform(s.default.setAlpha(.15)).rgba," );}div:not(:last-child){margin-right:15px;}",o.default,"{font-size:",s.default.font.size(18),";line-height:",s.default.font.size(22),";margin:10px 0 10px 0;}",r.default,"{font-size:",s.default.font.size(14),";line-height:",s.default.font.size(19),";margin:0 0 10px 0;}strong{font-weight:",s.default.font.weight.bold,";}@media (max-width:",s.default.breakpoint.width.small-1,"px){flex-direction:",(function(e){return e&&"Compact"===e.displayStyle?"column":"row-reverse"}),";justify-content:space-between;align-items:start;.thumbnail-link{margin-left:15px;margin-right:0;width:30%;min-width:30%;}}",s.default.printHide,";");t.default=c},"a/Il":function(e,t,n){"use strict";var i=n("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.tooltipContentWrapperClass=t.tooltipContentClass=t.tooltipClass=t.closeIconClass=t.closeIconButtonClass=t.arrowTopPositionClass=void 0;var a=n("Jqp9"),o=n("3sMT"),r=i(n("wXC7"));t.tooltipClass=(0,a.css)("position:absolute;width:104%;right:0%;max-width:339px;background-color:",o.color.background.elevated,";border:0.5px solid ",o.color.stroke.quaternary,";border-radius:4px;font-family:",r.default.font.franklinBase,";font-size:",r.default.font.size(14),";line-height:",r.default.font.size(16),";color:",o.color.content.primary,";box-sizing:border-box;bottom:78px;z-index:199;text-align:left;box-shadow:0 1px 6px rgba(0,0,0,0.2);&::after{position:absolute;width:16px;height:16px;right:5%;bottom:-8px;background:",o.color.background.elevated,";border-left:0.5px solid ",o.color.stroke.quaternary,";border-top:0.5px solid ",o.color.stroke.quaternary,";border-radius:1px;transform:rotate(-135deg);content:' ';}"),t.tooltipContentClass=(0,a.css)("font-size:",r.default.font.size(16),";line-height:",r.default.font.size(22),";font-family:",r.default.font.franklinBase,";margin:24px 0 24px 24px;"),t.arrowTopPositionClass=(0,a.css)("&::after{top:-8px;transform:rotate(135deg);}"),t.tooltipContentWrapperClass=(0,a.css)("display:flex;flex-direction:row;"),t.closeIconButtonClass=(0,a.css)("width:60px;height:60px;flex:0 0 60px;margin-top:5px;&,&:active{background:transparent;}"),t.closeIconClass=(0,a.css)("width:12px;height:12px;")},a6xQ:function(e,t,n){"use strict";var i=n("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.underlineClass=t.timestampClass=t.storylinesMenuShadowClass=t.storylinesMenuApplyShadowClass=t.placeholderClass=t.liveLabelClass=t.linkClass=t.justifyContentClass=t.breakingTimestampClass=void 0;var a=n("Jqp9"),o=i(n("wXC7")),r=n("3sMT");t.liveLabelClass=(0,a.css)("color:",r.color.signal.breaking,";font-size:",o.default.font.size(12),";margin-right:4px;"),t.justifyContentClass=(0,a.css)("overflow-y:hidden;justify-content:left;",o.default.breakpoint.mediumLarge,"{justify-content:center;}"),t.underlineClass=(0,a.css)(":hover{text-decoration:none;}text-decoration:underline;text-decoration-thickness:1px;text-underline-offset:1px;"),t.linkClass=(0,a.css)("color:",r.color.content.primary,";font-family:",o.default.font.franklinBase,";font-size:",o.default.font.size(14),";margin-top:0;strong{font-weight:",o.default.font.weight.bold,";}"),t.timestampClass=(0,a.css)("color:",r.color.content.quaternary,";font-size:",o.default.font.size(11),";font-family:",o.default.font.franklinBase,";span[data-time='rel']{position:relative;}span[data-time='abs']{display:none;}"),t.breakingTimestampClass=(0,a.css)("color:",r.color.signal.breaking,";"),t.placeholderClass=(0,a.css)("width:auto;min-width:40px;position:relative;margin:0 10px;display:inline-block;"),t.storylinesMenuShadowClass=(0,a.css)("&::after{content:'';position:absolute;top:0;left:0;height:100%;width:100%;z-index:-1;box-shadow:0 0 transparent,0 0 transparent,1px 3px 6px #00000026;opacity:0;transition:opacity 200ms ease-out;@media (prefers-color-scheme:dark){.NYTApp &{box-shadow:none;}}}"),t.storylinesMenuApplyShadowClass=(0,a.css)("border-bottom:1px solid transparent;&::after{opacity:1;}@media (prefers-color-scheme:dark){.NYTApp &{border-bottom:1px solid ",r.color.stroke.quaternary,";}}")},a9ya:function(e,t,n){"use strict";n.d(t,"a",(function(){return r})),n.d(t,"c",(function(){return s})),n.d(t,"b",(function(){return l})),n.d(t,"d",(function(){return c})),n.d(t,"e",(function(){return u}));var i=n("lSNA"),a=n.n(i),o=n("f81r"),r={ALL:"ALL",HIGHLIGHTED:"HIGHLIGHTED",RECOMMENDED:"RECOMMENDED",REPORTER_REPLIES:"REPORTER_REPLIES"},s={NEWEST:"newest",OLDEST:"oldest"},l=a()(a()({},s.NEWEST,o.a.newest),s.OLDEST,o.a.oldest),c={ALL:"ALL",HIGHLIGHTED:"HIGHLIGHTED",OVERVIEW:"OVERVIEW",RECOMMENDED:"RECOMMENDED",SINGLE_COMMENT:"SINGLE_COMMENT",REPORTER_REPLIES:"REPORTER_REPLIES"},u=a()(a()(a()(a()({},c.ALL,o.a.all),c.HIGHLIGHTED,o.a.nytPicks),c.RECOMMENDED,o.a.readerPicks),c.REPORTER_REPLIES,o.a.reporterReplies)},aFeP:function(e,t,n){"use strict";var i=n("lSNA"),a=n.n(i),o=n("4LjT"),r=n("Kxyt"),s=n("eFc+"),l=n.n(s);function c(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function u(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?c(Object(n),!0).forEach((function(t){a()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):c(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}t.a=function(e){var t=Object(r.useQuery)(l()(o.userGraphql),{ssr:!1,skip:!!e,fetchPolicy:"cache-first"}),n=t.data,i=void 0===n?{user:e}:n,a=t.refetch;return i.user?u(u({},i.user),{},{fetchUserDataForNewsletter:a}):null}},aN1B:function(e,t,n){"use strict";var i=n("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.dropcapClass=t.default=void 0;var a=n("3sMT"),o=n("Jqp9"),r=i(n("wXC7")),s=t.dropcapClass=(0,o.css)("float:left;width:auto;margin:23px 40px 20px 0;font-size:",r.default.font.size(66),";font-family:",r.default.font.magslab,",",r.default.font.magsans,";line-height:0.5;color:",a.color.content.primary,";"),l=(0,o.styled)("span",{target:"ethc9we0"})(s,";");t.default=l},aV8g:function(e,t,n){"use strict";var i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){return a.default.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"23.7 -85.1 300 39.5",role:"img","aria-label":"The New York Times Logo"},a.default.createElement("path",{d:"m46.2-81c0-3.2-3-4.2-5.6-4v.5c1.5 0 2.7.5 2.7 1.6 0 .7-.5 1.6-2 1.6-1.2 0-3.5-.7-5.4-1.3-2.1-.7-4-1.4-5.6-1.4-3.2 0-5.6 2.4-5.6 5.3 0 2.4 1.8 3.2 2.5 3.5l.2-.4c-.5-.3-.9-.7-.9-1.6 0-.7.6-1.8 2.3-1.8 1.5 0 3.4.7 6 1.4 2.2.6 4.7 1.2 6 1.4v5l-2.5 2.1v.2l2.5 2.2v6.9c-1.3.7-2.8.9-4 .9-2.4 0-4.6-.6-6.4-2.6l6.7-3.2v-11.1l-8.2 3.6c.9-2.2 2.6-3.6 4.3-4.7l-.1-.4c-4.9 1.3-9.3 5.8-9.3 11.3 0 6.6 5.4 11.5 11.5 11.5 6.6 0 10.8-5.2 10.7-10.6h-.4c-1 2.1-2.4 4.1-4.2 5.1v-6.8l2.6-2.1v-.2l-2.6-2.1v-5c2.3-.1 4.8-1.8 4.8-4.8zm-14.2 18-2 1c-1.1-1.5-1.9-3.5-1.9-6.2 0-1.1.1-2.5.5-3.5l3.4-1.5zm17.3 3.6-2.2 1.6.3.3 1-.7 3.6 3.3 4.9-3.3-.2-.3-1.3.8-1.6-1.6v-11.2l1.3-1 2.8 2.3v9.9c0 6.2-1.4 7.2-4.2 8.2v.4c4.6.2 8.8-1.4 8.8-9.3v-10.6l1.5-1.2-.2-.2-1.3 1-4-3.5-4.6 3.5v-13.4h-.3l-5.8 3.9v.3c.6.4 1.6.6 1.6 2.5v18.3zm29.8-1.7-4 3.1-4.1-3.3v-1.9l7.7-5.2v-.2l-3.8-5.9-8.5 4.5v10.7l-1.7 1.3.3.3 1.5-1.2 5.5 4 7.4-5.8zm-8.1-2.7v-8l.3-.2 3.6 5.6zm39.3-18.7c0-.5-.1-.9-.3-1.5h-.4c-.5 1.4-1.1 2.1-2.7 2.1-1.4 0-2.5-.9-3.1-1.5l-4.7 5.4.4.4 1.3-1.5c1 .8 1.7 1.5 4 1.6v13.5l-9.5-16.5c-.7-1.2-2-3.1-4.3-3.1-2.6 0-4.9 2.2-4.6 5.9h.5c.1-1 .6-2.1 1.7-2.1.9 0 1.7.9 2.1 1.6v5.3c-3 0-4.9 1.4-4.9 3.8 0 1.2.6 3.3 2.7 3.7v-.4c-.3-.3-.5-.6-.5-1.1 0-.9.7-1.5 1.9-1.5.2 0 .7 0 .9.1v6.9c-3.5 0-6.1 1.9-6.1 5.2 0 3.1 2.7 4.6 5.5 4.4v-.4c-1.7-.2-2.7-1-2.7-2.1 0-1.4 1-2.1 2.3-2.1s2.5.8 3.3 1.7l4.7-5.2-.4-.4-1.2 1.4c-1.8-1.6-2.8-2.2-4.9-2.5v-16.3l13.2 22.9h.9v-22.9c2.5-.1 4.9-2 4.9-4.8zm11.8 21.4-4 3.1-4.2-3.3v-1.9l7.7-5.2v-.2l-3.8-5.9-8.4 4.5v10.7l-1.7 1.3.3.3 1.5-1.2 5.5 4 7.4-5.8zm-8.2-2.7v-8l.3-.2 3.6 5.6zm34.9-8.9-1.2.9-3.1-2.6-3.6 3.3 1.5 1.4v12.3l-4-2.5v-10l1.3-.9-3.8-3.5-3.5 3.3 1.5 1.4v11.7l-.5.3-3.5-2.4v-9.8c0-2.3-1.1-2.9-2.5-3.8-1.2-.7-1.7-1.4-1.7-2.5 0-.9.9-1.5 1.4-1.7v-.4c-1.2 0-4.7 1.3-4.8 4.5 0 1.6.7 2.3 1.6 3.1.8.8 1.6 1.5 1.6 2.9v9.4l-1.7 1.4.3.4 1.6-1.2 4.3 3.4 4.1-2.8 4.5 2.8 8.7-5v-10.9l2.1-1.6zm30.2-9-1.6 1.5-3.6-3.2-5.3 4v-3.7h-.5l.1 26.4c-.5-.1-1.9-.4-3.1-.6l-.1-22.1c0-1.6-1.2-3.9-4.1-3.9-3 0-4.9 2.3-4.9 4.6h.5c.2-1 .7-1.8 1.6-1.8 1 0 1.9.6 1.9 2.8v6.4c-3 .1-4.7 1.8-4.7 3.8 0 1.3.6 3.3 2.7 3.3l.1-.4c-.7-.3-.9-.7-.9-1.1 0-.9.9-1.3 2.1-1.3h.6v10.1c-2.4.8-3.5 2.6-3.5 4.5 0 2.7 2.2 4.8 5.4 4.8 2.3 0 4.2-.4 6.3-.9 1.7-.3 3.7-.7 4.7-.7 1.2 0 1.8.6 1.8 1.5 0 1.1-.5 1.6-1.2 1.7l.1.4c2.7-.5 4.2-2.1 4.2-4.5 0-2.5-2.4-4-5-4-1.4 0-4 .4-6.1.9-2.3.5-4.5.7-5.2.7-1.1 0-2.5-.5-2.5-2.1 0-1.4 1.1-2.4 3.9-2.4 1.5 0 3.2.2 5.1.7 2 .4 3.7 1 5.4 1 2.4 0 4.5-.9 4.5-4.3v-20.1l1.9-1.6zm-6.7 10.1c-.4.5-1.1.9-1.9.9-.9 0-1.6-.5-2-.9v-7.3l1.7-1.1 2.3 2.1v6.3zm0 4.8c-.4-.4-1.1-.8-1.9-.8s-1.6.5-2 .8v-4.3c.3.3 1.1.9 2 .9s1.6-.5 1.9-.9zm0 7.6c0 1.3-.9 2.6-2.6 2.6-.3 0-1 0-1.3-.1v-9.5c.4-.4 1.1-.9 2-.9.8 0 1.5.5 1.9.9zm22.3-11.5-5.3-3.8-7.9 4.5v10.6l-1.6 1.3.2.3 1.3-1 5.2 3.8 8.1-4.9zm-8.6 10.2v-11.6l4.1 3v11.6zm24.2-13.6h-.3c-.4.4-1 .7-1.4.7-.6 0-1.4-.4-1.8-.9h-.3l-2.8 3-2.8-3-4.8 3.3.2.4 1.3-.9 1.7 1.8v10.3l-2.2 1.6.3.3 1-.7 3.9 3.3 5.1-3.4-.2-.3-1.4.9-1.9-1.7v-11.5c.8.9 1.8 1.7 2.9 1.7 2.1 0 3.3-2.4 3.5-4.9zm19.6 15.7-5.6 3.6-7.5-11.4 5.3-8.3h.3c.6.6 1.7 1.3 2.7 1.3 1.1 0 1.9-.6 2.4-1.3h.3c-.2 3.3-2.4 5.2-4.1 5.2s-2.5-.8-3.4-1.3l-.5.7 8.2 12.1 1.6-1zm-17.9-1-2.2 1.6.3.3 1-.7 3.6 3.3 4.9-3.3-.3-.3-1.2.8-1.6-1.6v-25.2h-.3l-5.9 3.9v.3c.6.3 1.7.5 1.7 2.5zm45-21.6c0-3.2-3-4.2-5.6-4v.5c1.5 0 2.7.5 2.7 1.6 0 .7-.5 1.6-2 1.6-1.2 0-3.5-.7-5.4-1.3-2.1-.7-4-1.4-5.6-1.4-3.2 0-5.6 2.4-5.6 5.3 0 2.4 1.8 3.2 2.5 3.5l.2-.4c-.5-.3-.9-.7-.9-1.6 0-.7.6-1.8 2.3-1.8 1.5 0 3.4.7 6 1.4 2.2.6 4.7 1.2 6 1.4v5l-2.5 2.1v.2l2.5 2.2v6.9c-1.3.7-2.8.9-4 .9-2.4 0-4.6-.6-6.4-2.6l6.7-3.2v-11.1l-8.2 3.7c.9-2.2 2.6-3.6 4.3-4.7l-.1-.4c-4.9 1.3-9.3 5.8-9.3 11.3 0 6.6 5.4 11.5 11.5 11.5 6.6 0 10.8-5.2 10.7-10.6h-.4c-1 2.1-2.4 4.1-4.2 5.1v-6.8l2.6-2.1v-.2l-2.6-2.1v-5c2.2-.2 4.8-1.9 4.8-4.9zm-14.2 18-2 1c-1.1-1.5-1.9-3.5-1.9-6.2 0-1.1.1-2.5.5-3.5l3.4-1.5zm19.7-19.5h-.2l-3.3 2.8v.2l2.8 3.1h.3l3.3-2.7v-.2zm5 24.1-1.2.8-1.6-1.6v-11.3l1.6-1.2-.3-.4-1.2.9-2.8-3.4-4.7 3.3.3.4 1.2-.8 1.4 1.8v10.6l-2.1 1.6.2.3 1.1-.8 3.6 3.3 4.9-3.3zm27.2-.2-1.2.8-1.7-1.6v-11.1l1.7-1.2-.3-.4-1.4 1.1-3.7-3.5-4.8 3.4-3.7-3.4-4.7 3.4-2.9-3.4-4.7 3.3.2.4 1.2-.8 1.6 1.7v10.6l-1.3 1.3 3.7 3.1 3.6-3.3-1.5-1.4v-11l1.4-.9 2.5 2.3v9.9l-1.2 1.3 3.8 3.1 3.5-3.3-1.5-1.4v-11.1l1.2-.8 2.7 2.3v9.7l-1.1 1.1 3.8 3.5 5-3.4zm14.2-2.5-4 3.1-4.2-3.3v-1.9l7.7-5.2v-.2l-3.8-5.9-8.4 4.5v11.1l5.6 4.1 7.4-5.8zm-8.2-2.7v-8l.3-.2 3.6 5.6zm23.1-1.5-3.1-2.4c2.1-1.8 2.9-4.3 2.9-5.9 0-.2 0-.7-.1-1h-.4c-.3.9-.9 1.6-2.2 1.6-1.2 0-2.1-.7-2.9-1.6l-7.3 4v5.9l2.7 2.1c-2.8 2.4-3.3 4.2-3.3 5.4 0 1.6.7 2.8 2.1 3.3l.2-.4c-.3-.3-.7-.5-.7-1.2 0-.5.7-1.3 1.9-1.3 1.6 0 2.6 1.1 3.1 1.7l7.1-4.2zm-1.8-4.9c-1.1 1.9-3.6 3.8-5 4.9l-1.8-1.4v-5.8c.7 1.6 2.4 2.9 4.3 2.9 1.1 0 1.7-.2 2.5-.6zm-2.9 13c-.8-1.8-2.7-3.1-4.7-3.1-.5 0-1.8 0-3.1.8.7-1.2 2.9-3.6 5.7-5.2l2 1.6v5.9z",fill:"#000"}))};var a=i(n("q1tI"))},aVGo:function(e,t,n){"use strict";var i=n("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=i(n("q1tI")),o=n("Ap7T"),r=n("Jqp9"),s=n("Bi8q"),l=i(n("XlcC")),c=i(n("OB6K")),u=n("V7ea"),d=i(n("yEZI")),p=i(n("42vy")),f=function(e){var t=e.children,n=e.labelBaseStyle,i=(0,r.useTheme)(),o=(0,s.defaultHeading3Style)({theme:i});return a.default.createElement(d.default,{className:(0,r.cx)(o,n,u.vsLabelClass)},t)};f.displayName="VisualStackLabel";var m=function(e){var t=e.size,n=e.heading,i=void 0===n?"":n,s=e.label,m=void 0===s?"":s,h=e.children,g=void 0===h?null:h,y=e.content,v=void 0===y?[]:y,b=e.contentStyle,_=void 0===b?"":b,w=e.labelBaseStyle,x=void 0===w?"":w,k=e.headingBaseStyle,O=void 0===k?"":k,T=(0,o.v4)();return a.default.createElement(c.default,{theme:{mediaSize:t}},a.default.createElement(u.StyledVisualStack,null,i&&a.default.createElement(p.default,{className:(0,r.cx)(O,u.vsHeadingClass)},i),m&&a.default.createElement(f,{labelBaseStyle:x},m),g,v.map((function(e,t){return a.default.createElement(d.default,{className:(0,r.cx)(u.vsContentParagraphBlockClass,_),key:"".concat(T,"-").concat(t.toString())},e.content.map(l.default))}))))};m.displayName="VisualStack";t.default=m},aViE:function(e,t,n){"use strict";var i=n("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.pushSubWrapperClass=t.pushSubCtaClass=t.notificationLiveCoverageClass=t.notificationContainerClass=t.hasPostDividerClass=t.errorAlertClass=t.buttonWrapperClass=t.buttonStylesBaseClass=void 0;var a=n("Jqp9"),o=n("3sMT"),r=i(n("wXC7"));t.buttonStylesBaseClass=(0,a.css)("position:absolute;top:50%;left:50%;width:50px;height:30px;border-radius:20px;transform:translateX(-50%) translateY(-50%);cursor:pointer;overflow:hidden;&:focus{outline:none;}&:hover{box-shadow:0 0 2px var(--clr-shadow,rgba(0,0,0,0.3));}&::after{content:'';position:absolute;top:2px;width:26px;height:26px;border-radius:20px;transition:left 250ms ease-in-out;background-color:",o.light.colors.background.primary.hsla,";}&.on{background-color:",o.color.signal.editorial,";&::after{left:calc(50% - 3px);}}&.off{background-color:",o.color.background.tertiary,";&::after{left:3px;box-shadow:1px 1px 3px 0 rgba(0,0,0,0.1);}}"),t.buttonWrapperClass=(0,a.css)("position:relative;width:50px;height:30px;"),t.pushSubWrapperClass=(0,a.css)("display:flex;justify-content:space-between;padding-top:22px;align-items:center;"),t.pushSubCtaClass=(0,a.css)("color:",o.color.content.secondary,";font-weight:",r.default.font.weight.medium,";font-size:",r.default.font.size(15),";line-height:",r.default.font.size(20),";font-family:",r.default.font.franklinBase,";"),t.errorAlertClass=(0,a.css)("font-weight:",r.default.font.weight.medium,";font-size:",r.default.font.size(12),";font-family:",r.default.font.franklinBase,";color:",o.color.signal.negative,";"),t.notificationContainerClass=(0,a.css)("height:100%;position:relative;border-top:1px solid ",o.color.stroke.quaternary,";"),t.notificationLiveCoverageClass=(0,a.css)("border-top:none;"),t.hasPostDividerClass=(0,a.css)("border-bottom:none;")},aY2f:function(e,t,n){"use strict";var i=n("TqRt"),a=n("cDf5");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=i(n("lSNA")),r=i(n("lwsE")),s=i(n("W8MJ")),l=i(n("a1gu")),c=i(n("Nsbk")),u=i(n("7W2i")),d=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=a(e)&&"function"!=typeof e)return{default:e};var n=g(t);if(n&&n.has(e))return n.get(e);var i={__proto__:null},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var r in e)if("default"!==r&&{}.hasOwnProperty.call(e,r)){var s=o?Object.getOwnPropertyDescriptor(e,r):null;s&&(s.get||s.set)?Object.defineProperty(i,r,s):i[r]=e[r]}return i.default=e,n&&n.set(e,i),i}(n("q1tI")),p=(i(n("17x9")),n("Jqp9")),f=n("7FfI"),m=i(n("wXC7")),h=n("v2SN");function g(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(g=function(e){return e?n:t})(e)}function y(e,t,n){return t=(0,c.default)(t),(0,l.default)(e,function(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return function(){return!!e}()}()?Reflect.construct(t,n||[],(0,c.default)(e).constructor):t.apply(e,n))}var v={elapsed:"elapsed","elapsed-with-label":"elapsed","elapsed-with-year":"elapsed-year","short-elapsed":"short-elapsed","nyt-date":"LL","full-date":"ll","masthead-date":"LLL","abbreviated-date":"LL","date-with-time":"LLLL"},b=function(e){function t(e){var n;(0,r.default)(this,t),n=y(this,t,[e]);var i=e.iso,a=n.toLocale(i,"","date-with-time");return n.state={absoluteTimestamp:a,relativeTimestamp:null,dateTime:i},n}return(0,u.default)(t,e),(0,s.default)(t,[{key:"componentDidMount",value:function(){var e=this;this.formatTime(),this.props.autoUpdate&&!this.updateTimeout&&(this.updateTimeout=setInterval((function(){return e.formatTime()}),6e4))}},{key:"componentWillUnmount",value:function(){this.updateTimeout&&clearInterval(this.updateTimeout)}},{key:"componentDidUpdate",value:function(e){e.iso===this.props.iso&&e.unix===this.props.unix&&e.formatter===this.props.formatter&&e.showAbsoluteTime===this.props.showAbsoluteTime||this.formatTime()}},{key:"formatTime",value:function(){var e=this,t=this.props.iso&&(0,f.getISOFromString)(this.props.iso)||(0,f.getISOFromUnix)(this.props.unix)||(new Date).toISOString(),n=["elapsed-with-year","elapsed"].indexOf(this.props.formatter)>-1?this.toLocale(t,!0):this.state.absoluteTimestamp;return this.setState({relativeTimestamp:this.toLocale(t,["elapsed-with-year","elapsed-with-label"].indexOf(this.props.formatter)>-1)},(function(){return e.props.updateAriaLabel(n)}))}},{key:"toLocale",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.props.formatter,i=this.props.theme,a=(0,f.getTimestampLocale)(null==i?void 0:i.language),o="elapsed-with-year"===this.props.formatter;if("function"==typeof n)return n({date:new Date(e),labelText:t,checkDays:o});var r=v[n]?v[n]:"LL";return(0,f.formatDate)(e,r,a,t,o)}},{key:"render",value:function(){var e=this.props,t=e.className,n=e.updatedText,i=e.updatedTextClassName,a=e.showAbsoluteTime,r=e.dontRenderAsTimeElement,s=this.state,l=s.absoluteTimestamp,c=s.relativeTimestamp,u=s.dateTime,f=r?"span":"time";return d.default.createElement(d.default.Fragment,null,d.default.createElement(f,{"aria-hidden":!0,className:(0,p.cx)(t,h.timeClass),dateTime:r?void 0:u},n?d.default.createElement("span",{className:i},"Updated "):null,d.default.createElement("div",{className:h.timeContainerClass},d.default.createElement("span",{"data-time":"abs",className:(0,p.cx)(h.absClass,h.sharedTransformClass,(0,o.default)({},h.showClass,a))},l),d.default.createElement("span",{"data-time":"rel",className:(0,p.cx)(h.relClass,h.sharedTransformClass,(0,o.default)((0,o.default)({},h.showClass,!a),h.timestampCapitalizeClass,"Just now"===c))},c))),d.default.createElement("span",{className:m.default.a11y.visuallyHidden},a?l:c))}}])}(d.Component);b.displayName="Timestamp",b.defaultProps={unix:void 0,iso:void 0,className:void 0,updatedText:!1,updatedTextClassName:void 0,theme:void 0,showAbsoluteTime:!0,dontRenderAsTimeElement:!1,updateAriaLabel:function(){},autoUpdate:!1};t.default=(0,p.withTheme)(b)},aYbO:function(e,t,n){"use strict";var i=n("TqRt"),a=n("cDf5");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o,r,s=i(n("lSNA")),l=i(n("lwsE")),c=i(n("W8MJ")),u=i(n("a1gu")),d=i(n("Nsbk")),p=i(n("7W2i")),f=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=a(e)&&"function"!=typeof e)return{default:e};var n=v(t);if(n&&n.has(e))return n.get(e);var i={__proto__:null},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var r in e)if("default"!==r&&{}.hasOwnProperty.call(e,r)){var s=o?Object.getOwnPropertyDescriptor(e,r):null;s&&(s.get||s.set)?Object.defineProperty(i,r,s):i[r]=e[r]}return i.default=e,n&&n.set(e,i),i}(n("q1tI")),m=(i(n("17x9")),n("Jqp9")),h=i(n("HNQ6")),g=n("YFU0"),y=n("Xxk7");function v(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(v=function(e){return e?n:t})(e)}function b(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function _(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?b(Object(n),!0).forEach((function(t){(0,s.default)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):b(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function w(e,t,n){return t=(0,d.default)(t),(0,u.default)(e,function(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return function(){return!!e}()}()?Reflect.construct(t,n||[],(0,d.default)(e).constructor):t.apply(e,n))}var x={INITIALIZING:"initializing",LOAD_NEW_VIDEO:"load_new_video",MEDIA_ELEMENT_MOUNTED:"mediaelementmounted",AD_STARTED:"adstarted",AD_COMPLETED:"adcompleted",AD_SKIPPED:"adskipped",READY:"ready",LOAD_START:"loadstart",PLAY:"play",PAUSE:"pause",ENDED:"ended",GO_FULLSCREEN:"gofullscreen",EXIT_FULLSCREEN:"exitfullscreen"},k={INITIALIZING:"onInitializing",LOAD_NEW_VIDEO:"onLoadNewVideo",MEDIA_ELEMENT_MOUNTED:"onMediaElementMounted",AD_STARTED:"onAdStarted",AD_COMPLETED:"onAdCompleted",AD_SKIPPED:"onAdSkipped",READY:"onReady",LOAD_START:"onLoadStart",PLAY:"onPlay",PAUSE:"onPause",ENDED:"onEnded",GO_FULLSCREEN:"onGoFullscreen",EXIT_FULLSCREEN:"onExitFullscreen",IN_VIEWPORT:"inviewport",OUT_VIEWPORT:"outviewport"},O=["className","playerClassName","playerRef","VHS","onInitializing","onLoadNewVideo","onMediaElementMounted","onAdStarted","onAdCompleted","onAdSkipped","onReady","onLoadStart","onPlay","onPause","onEnded","onGoFullscreen","onExitFullscreen","onErrorLoadingPlayer"],T=(0,h.default)(((r=function(e){function t(){var e;(0,l.default)(this,t);for(var n=arguments.length,i=new Array(n),a=0;a<n;a++)i[a]=arguments[a];return(e=w(this,t,[].concat(i))).playerStatus=null,e.state={playerCreated:!1},e}return(0,p.default)(t,e),(0,c.default)(t,[{key:"componentDidMount",value:function(){if(null===this.playerStatus){if(!this.props.VHS){throw console.error("VHS did not load"),"function"==typeof this.props.onErrorLoadingPlayer&&this.props.onErrorLoadingPlayer(),new Error("VHS did not load")}this.initPlayer()}}},{key:"shouldComponentUpdate",value:function(e,t){return null!==this.playerStatus&&e.id!==this.props.id||this.state.playerCreated!==t.playerCreated}},{key:"UNSAFE_componentWillReceiveProps",value:function(e){this.updatePlayer(e)}},{key:"componentWillUnmount",value:function(){this.destroyPlayer()}},{key:"initPlayer",value:function(){var e=this;this.playerStatus=x.INITIALIZING,this.destroyPlayer((function(){e.player=e.props.VHS(e.playerConfig),e.bindPlayerEvents(),e.setState((function(){return{playerCreated:!0}})),"function"==typeof e.props.playerRef&&e.props.playerRef(e.player)}))}},{key:"propsForConfig",get:function(){var e=this;return Object.keys(this.props).reduce((function(t,n){return-1===O.indexOf(n)?_(_({},t),{},(0,s.default)({},n,e.props[n])):t}),{})}},{key:"playerConfig",get:function(){var e=this.props.ratio,t=this.propsForConfig;return t.width="100%",t.height="100%",t.container=this.playerElement,"9:16"===e&&(t.ratio="2:3",t.cropVertical=!0),t}},{key:"bindPlayerEvents",value:function(){var e=this;Object.keys(this.player.events).filter((function(e){return void 0!==x[e]})).forEach((function(t){e.player.on(e.player.events[t],(function(){e.playerStatus=e.player.events[t];var n=k[t],i=e.props[n];if("function"==typeof i){for(var a=arguments.length,o=new Array(a),r=0;r<a;r++)o[r]=arguments[r];i.apply(void 0,o.concat([e.player]))}}))}))}},{key:"updatePlayer",value:function(e){this.player&&(0,g.isNumeric)(e.id)&&(0,g.isNumeric)(this.props.id)&&e.id!==this.props.id&&this.player.load(e.id)}},{key:"destroyPlayer",value:function(e){this.playerStatus=null,this.player&&"function"==typeof this.player.destroy?this.player.destroy(e):"function"==typeof e&&e()}},{key:"render",value:function(){var e=this,t=this.props,n=t.className,i=t.isPromo,a=t.playerClassName,o=t.ratio,r=t.width,s=t.forceError,l=t.type;if(s)throw new Error("Forced error for error boundary testing.");var c=(0,g.computeAspectRatio)(o),u=[n,"react-vhs-container",y.playerContainerClass,"vhs-".concat(l)];i&&u.push("vhs-promo");var d=["react-vhs-player",a],p={position:"relative",width:r},h={};return"number"==typeof c&&0!==c?(p.height="auto",h.height=0,h.paddingBottom="".concat(c,"%")):p.height="100%",f.default.createElement("div",{className:(0,m.cx)(u),style:p},f.default.createElement("div",{ref:function(t){e.playerElement=t},className:(0,m.cx)(d),style:h}))}}])}(f.Component)).displayName="VideoPlayer",r.defaultProps={className:void 0,onErrorLoadingPlayer:void 0,playerClassName:void 0,playerRef:void 0,isPromo:!1,width:"100%",height:"100%",onInitializing:void 0,onLoadNewVideo:void 0,onMediaElementMounted:void 0,onAdStarted:void 0,onAdCompleted:void 0,onAdSkipped:void 0,onReady:void 0,onLoadStart:void 0,onPlay:void 0,onPause:void 0,onEnded:void 0,onGoFullscreen:void 0,onExitFullscreen:void 0,controls:!0,env:"production",eventTracker:!1},o=r))||o;T.displayName="VideoPlayer";t.default=T},aanX:function(e,t,n){"use strict";var i=n("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.default=r;var a=i(n("q1tI")),o=(i(n("17x9")),i(n("wXC7")));function r(e){var t=e.className,n=e.stroke,i=e.strokeWidth;return a.default.createElement("svg",{className:t,viewBox:"0 0 12 12",stroke:n,strokeWidth:i,strokeLinecap:"round",style:{opacity:.95}},a.default.createElement("line",{x1:"11",y1:"1",x2:"1",y2:"11"}),a.default.createElement("line",{x1:"1",y1:"1",x2:"11",y2:"11"}))}r.displayName="CloseIcon",r.defaultProps={className:void 0,stroke:o.default.color.black,strokeWidth:"1"}},abzs:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.hasRichCaptions=t.getTwitterCrop=t.getPromotionalMediaCrop=t.getPromoMedia=t.getPromoCrop=t.getFirstCropUrl=t.getCropByPriority=t.getCrop=t.get75Crop=t.get150Crop=t.flattenCropArray=t.defaultPromoCrop=t.defaultCrop=void 0;t.getPromoMedia=function(e){return null!=e&&e.imageExtensions?e.imageExtensions.filteredCrops:null};var i=t.getCrop=function(e,t){return e.find((function(e){return(null==e?void 0:e.name)===t}))},a=t.getCropByPriority=function(e,t){if(!e)return null;for(var n=0;n<t.length;n+=1){var a=i(e,t[n]);if(null!=a&&a.url)return"images"===a.url.split("/")[0]&&(a.url="https://static01.nyt.com/".concat(a.url)),a.url}return null},o=(t.getFirstCropUrl=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"crops";return e&&e[t]&&0!==e[t].length&&e[t][0].renditions&&0!==e[t][0].renditions.length?e[t][0].renditions[0].url:null},t.defaultCrop="https://static01.nyt.com/newsgraphics/images/icons/defaultCrop.png"),r=t.defaultPromoCrop="https://static01.nyt.com/newsgraphics/images/icons/defaultPromoCrop.png";t.getPromoCrop=function(e){return a(e,["facebookJumbo","watch308","videoSixteenByNineJumbo1600","articleLarge"])||r},t.getTwitterCrop=function(e){return a(e,["videoSixteenByNineJumbo1600","articleLarge"])||o},t.get150Crop=function(e,t){return a(e,["thumbLarge"])||t||o},t.get75Crop=function(e,t){return a(e,["thumbStandard"])||t||o},t.flattenCropArray=function e(t){return t.reduce((function(t,n){return t.concat(Array.isArray(n)?e(n):n)}),[])},t.getPromotionalMediaCrop=function(e){var t;return e?e.promoCrops?e.promoCrops:e.assetCrops?e.assetCrops:null!==(t=e.promotionalMedia)&&void 0!==t&&t.assetCrops?e.promotionalMedia.assetCrops:null:null},t.hasRichCaptions=function(e){var t,n,i,a,o=null===(t=e.caption)||void 0===t||null===(n=t.content)||void 0===n||null===(i=n[0])||void 0===i?void 0:i.content;return(null==o?void 0:o.length)>1||!(!o||"TextInline"===(null==o||null===(a=o[0])||void 0===a?void 0:a.__typename))}},axlb:function(e,t,n){"use strict";n.d(t,"b",(function(){return ee}));var i=n("VkAN"),a=n.n(i),o=n("gcR/"),r=n.n(o),s=n("q1tI"),l=n.n(s),c=n("eFc+"),u=n.n(c),d=(n("Zc/f"),n("ZKN5")),p=n("lSNA"),f=n.n(p),m=n("X6oL"),h=n("E8RS"),g=n("AeOL"),y=n("boCj"),v=n("fZdH"),b=n("pjM+"),_=n("2XMp"),w=n("7VSS"),x=n("rONy"),k=n("06b3"),O=n("Rb+W"),T=n("5qW+"),C=n.n(T),E=function(e){var t=e.data;return l.a.createElement(C.a,t)};E.displayName="ScoopTrustModuleWrapper";var S=E,P=n("pVnL"),I=n.n(P),M=n("Jqp9"),A=n("RKHt"),j=n.n(A),N=n("5g7D"),L=n.n(N),D=n("SYzA"),R=function(e){var t,n,i=Object(D.a)();return l.a.createElement(j.a,I()({},e,{className:Object(M.cx)(f()({},L()(null===(t=e.interactive)||void 0===t||null===(n=t.displayProperties)||void 0===n?void 0:n.displayOverrides),i),e.className)}))};R.displayName="RegionEmbeddedInteractive",R.defaultProps={interactive:{html:null,displayProperties:{},headline:{default:""}},className:void 0,children:null,theme:{},manageScripts:!1,enableInteractiveBridge:!1};var B=R,z=n("InUh"),F=n.n(z),U=n("jOYC"),H=n("rWB7"),W=F()((function(){return Promise.all([n.e(0),n.e(2),n.e(5),n.e(7),n.e(75)]).then(n.bind(null,"95JM"))}),{loadableGenerated:{webpack:function(){return["95JM"]},modules:["shared/Capsule/ClientSideCapsule"]}}),q=function(e){var t=e.className,n=e.data;return Object(H.b)()&&n.uri?r()("div",{className:Object(M.cx)(t)},void 0,r()(W,{blockClass:U.b.layout.news,uri:n.uri})):null};q.displayName="NormalizedCapsuleBlock",q.defaultProps={className:void 0};var V={EmbeddedInteractive:B,Capsule:q,ScoopTrustModule:S};function G(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function Y(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?G(Object(n),!0).forEach((function(t){f()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):G(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var X=function(e){var t,n,i,a,o=e.assetBlock,l=e.className,c=o.assetName,u=o.ruleName,d=o.testName,p=o.parentTest,f=o.region,T=o.asset,C=o.ruleName.startsWith("trust-"),E=V[null==T?void 0:T.__typename],S=Object(v.a)(),P=Object(m.useTracking)(),I=Object(w.a)(),M=Object(b.a)(),A=Object(s.useRef)(!1),j=(null==S||null===(t=S[d])||void 0===t?void 0:t.allocated)&&d||(null==S||null===(n=S[p])||void 0===n?void 0:n.allocated)&&p||(null==S||null===(i=S.styln_trust)||void 0===i?void 0:i.allocated)&&"styln_trust",N=null==S||null===(a=S[j])||void 0===a?void 0:a.variant,L=P.trackEvent,D=Object(s.useCallback)((function(e){if(C){var t=(e.target||{}).href;if(t){var n={event:"moduleInteraction",eventData:{type:"url-click",trigger:"module"},module:{name:"trust_inline_explainer",region:f,context:o.ruleName,label:N},item:{url:t}};L(n)}}}),[C,o.ruleName,f,N,L]);if(Object(s.useEffect)((function(){if(o&&N){var e=Object(O.f)(k.a);n=N,a=((null==(t=o)||null===(i=t.asset)||void 0===i?void 0:i.html)||"").match(/data-iterate-survey="([0-9a-z]+)"/),r=null==a?void 0:a[1],a&&Object(x.a)((function(){var i,a,o,s=(null===(i=window)||void 0===i||null===(a=i.NYTD)||void 0===a||null===(o=a.PageViewId)||void 0===o?void 0:o.current)||"",l=t.asset.slug||document.location.pathname;window.Iterate("install",r),window.Iterate("identify",{agentId:e},{slug:l,pageviewID:s,testVariant:n})}))}var t,n,i,a,r}),[o,N]),!E||!T||!o)return null;if(!I||M.loading())return r()(E,{data:T,media:T,interactive:T,className:l},"server-render");var R={event:"impression",module:{region:f,label:N,name:u,context:c}},B=Y(Y({},T),{},{html:Object(_.a)({html:T.html,region:f,name:u,variant:N,context:c})}),z=["email","push"].some((function(e){return c.toLowerCase().startsWith(e)}));return r()(s.Fragment,{},"client-render",r()(g.a,{testName:p,holdoutVariant:h.a},void 0,r()(g.a,{testName:d,holdoutVariant:h.a},void 0,r()(y.InView,{onChange:function(e){return function(){var e=M.data();if(!A.current&&!M.loading()&&!M.error()&&e&&C){var t=o.ruleName,n=e.viewedTrustModule||[],i=new Date(Date.now()).toISOString(),a=null==n?void 0:n.find((function(e){return e.trustModule===t}));a?a.lastSeen=i:n.push({trustModule:t,lastSeen:i}),n.forEach((function(e){return delete e.__typename})),M.update({viewedTrustModule:n}),A.current=!0}}(),!z&&e?P.trackEvent(R):{}},onClick:D,triggerOnce:!0},void 0,r()(E,{data:T,media:T,interactive:C?T:B,className:l,enableInteractiveBridge:!0})))))};X.displayName="RegionComponent",X.defaultProps={className:void 0};var Z,J,K,$,Q=l.a.memo(X);function ee(e,t){var n,i;return null==t||null===(n=t.associatedAssets)||void 0===n||null===(i=n.some)||void 0===i?void 0:i.call(n,(function(t){return(null==t?void 0:t.region)===e}))}var te=function(e){var t=e.children,n=e.region,i=e.associatedAssets,a=e.className,o=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0,n=e.filter((function(e){return e.region===t}));return null==n?void 0:n.filter((function(e){var i;return!(!t||null==e||!e.asset||null!=e&&e.skip)&&("\x3c!--skip--\x3e"!==(null==e||null===(i=e.asset)||void 0===i?void 0:i.html)&&e.ruleName===n[0].ruleName)}))}(i,n);if(!((null==o?void 0:o.length)>0||t))return null;var s=n?"NYT_".concat(n,"_REGION"):null;return r()("div",{id:s,className:a,"data-testid":"region"},s,null==o?void 0:o.map((function(e,t){return r()(Q,{assetBlock:e,className:a},"".concat(s).concat(t.toString()))})),t)};te.displayName="Region",te.defaultProps={children:null,className:void 0},te.fragments={article:u()(Z||(Z=a()(["\n    fragment Region_article on Article {\n      id\n      associatedAssets {\n        region\n        assetName\n        ruleName\n        testName\n        parentTest\n        asset {\n          __typename\n          ... on EmbeddedInteractive {\n            id\n            sourceId\n            html\n            slug\n            compatibility\n            displayProperties {\n              minimumWidth\n              maximumWidth\n              displayOverrides\n            }\n          }\n          ... on Capsule {\n            uri\n          }\n        }\n      }\n    }\n  "]))),interactive:u()(J||(J=a()(["\n    fragment Region_interactive on Interactive {\n      id\n      associatedAssets {\n        region\n        assetName\n        ruleName\n        testName\n        parentTest\n        asset {\n          __typename\n          ... on EmbeddedInteractive {\n            id\n            sourceId\n            html\n            slug\n            compatibility\n            displayProperties {\n              minimumWidth\n              maximumWidth\n              displayOverrides\n            }\n          }\n          ... on Capsule {\n            uri\n          }\n        }\n      }\n    }\n  "]))),legacyCollection:u()(K||(K=a()(["\n    fragment Region_legacyCollection on LegacyCollection {\n      id\n      associatedAssets {\n        region\n        assetName\n        ruleName\n        testName\n        parentTest\n        asset {\n          __typename\n          ... on EmbeddedInteractive {\n            id\n            sourceId\n            html\n            slug\n            compatibility\n            displayProperties {\n              minimumWidth\n              maximumWidth\n              displayOverrides\n            }\n          }\n          ... on Capsule {\n            uri\n          }\n        }\n      }\n    }\n  "]))),feedPublication:u()($||($=a()(["\n    fragment Region_feedPublication on FeedPublication {\n      id\n      feedAssociatedAssets: associatedAssets {\n        region\n        assetName\n        ruleName\n        testName\n        parentTest\n        asset {\n          __typename\n          ... on EmbeddedInteractive {\n            id\n            sourceId\n            html\n            slug\n            compatibility\n            displayProperties {\n              minimumWidth\n              maximumWidth\n              displayOverrides\n            }\n          }\n          ... on Capsule {\n            uri\n          }\n        }\n      }\n    }\n  "])))};t.a=Object(d.a)(te)},b2Qg:function(e,t,n){"use strict";var i=this&&this.__makeTemplateObject||function(e,t){return Object.defineProperty?Object.defineProperty(e,"raw",{value:t}):e.raw=t,e};Object.defineProperty(t,"__esModule",{value:!0}),t.messageClass=t.actionTextClass=t.textFadingInClass=t.textFadingOutClass=t.pointerClass=t.iconWrapperClass=t.dividerClass=t.actionTextContainerClass=t.callToActionClass=t.caretDownClass=t.caretUpClass=t.caretClass=t.messageContainer=t.infoContainer=t.headingWidthClass=t.headingPaddingClass=t.headingClass=t.dockHeadingContainer=t.fadeTextIn=t.fadeTextOut=t.iconHeight=void 0;var a=n("Jqp9"),o=n("lVLo");t.iconHeight="55px";t.fadeTextOut=function(){return(0,a.keyframes)(r||(r=i(["\n  0% {\n    opacity: 1;\n  }\n\n  50% {\n    opacity: 0;\n  }\n\n  100% {\n    opacity: 0;\n  }\n"],["\n  0% {\n    opacity: 1;\n  }\n\n  50% {\n    opacity: 0;\n  }\n\n  100% {\n    opacity: 0;\n  }\n"])))};var r,s,l,c,u,d,p,f,m,h,g,y,v,b,_,w,x,k,O,T;t.fadeTextIn=function(){return(0,a.keyframes)(s||(s=i(["\n  0% {\n    opacity: 0;\n  }\n\n  50% {\n    opacity: 0;\n  }\n\n  100% {\n    opacity: 1;\n  }\n"],["\n  0% {\n    opacity: 0;\n  }\n\n  50% {\n    opacity: 0;\n  }\n\n  100% {\n    opacity: 1;\n  }\n"])))},t.dockHeadingContainer=(0,a.css)(l||(l=i(["\n  width: 100%;\n  font-family: ",";\n  border-radius: 0;\n  transition:\n    background-color 250ms linear,\n    0.15s padding ease-out;\n"],["\n  width: 100%;\n  font-family: ",";\n  border-radius: 0;\n  transition:\n    background-color 250ms linear,\n    0.15s padding ease-out;\n"])),o.fonts.franklin),t.headingClass=(0,a.css)(c||(c=i(["\n  display: flex;\n  align-items: center;\n  justify-content: space-between;\n  height: 100%;\n  max-width: 1200px;\n  margin: auto;\n  /* stylelint-disable-next-line declaration-no-important */\n  -webkit-font-smoothing: antialiased !important;\n  outline: ",";\n\n  strong {\n    font-weight: ",";\n  }\n"],["\n  display: flex;\n  align-items: center;\n  justify-content: space-between;\n  height: 100%;\n  max-width: 1200px;\n  margin: auto;\n  /* stylelint-disable-next-line declaration-no-important */\n  -webkit-font-smoothing: antialiased !important;\n  outline: ",";\n\n  strong {\n    font-weight: ",";\n  }\n"])),o.colors.blue,o.fontWeights.bold),t.headingPaddingClass=(0,a.css)(u||(u=i(["\n  padding: 0;\n\n  @media (min-width: ","px) {\n    padding: 0 20px;\n  }\n"],["\n  padding: 0;\n\n  @media (min-width: ","px) {\n    padding: 0 20px;\n  }\n"])),o.widths.medium),t.headingWidthClass=(0,a.css)(d||(d=i(["\n  display: flex;\n  align-items: center;\n  justify-content: space-between;\n  height: 100%;\n  max-width: 1280px;\n  margin: auto;\n  /* stylelint-disable-next-line declaration-no-important */\n  -webkit-font-smoothing: antialiased !important;\n  outline: ",";\n\n  strong {\n    font-weight: ",";\n  }\n"],["\n  display: flex;\n  align-items: center;\n  justify-content: space-between;\n  height: 100%;\n  max-width: 1280px;\n  margin: auto;\n  /* stylelint-disable-next-line declaration-no-important */\n  -webkit-font-smoothing: antialiased !important;\n  outline: ",";\n\n  strong {\n    font-weight: ",";\n  }\n"])),o.colors.blue,o.fontWeights.bold),t.infoContainer=(0,a.css)(p||(p=i(["\n  width: 100%;\n  font-family: ",";\n  text-align: left;\n\n  span {\n    display: inline;\n  }\n\n  @media (min-width: ","px) {\n    text-align: center;\n    padding-left: 175px;\n  }\n"],["\n  width: 100%;\n  font-family: ",";\n  text-align: left;\n\n  span {\n    display: inline;\n  }\n\n  @media (min-width: ","px) {\n    text-align: center;\n    padding-left: 175px;\n  }\n"])),o.fonts.franklin,o.widths.mediumLarge),t.messageContainer=a.styled.div(f||(f=i(["\n  position: absolute;\n  top: 0;\n  bottom: 0;\n  right: 0;\n  left: 0;\n  margin: 0 70px 0 20px;\n  display: flex;\n  flex-direction: column;\n  justify-content: center;\n"],["\n  position: absolute;\n  top: 0;\n  bottom: 0;\n  right: 0;\n  left: 0;\n  margin: 0 70px 0 20px;\n  display: flex;\n  flex-direction: column;\n  justify-content: center;\n"]))),t.caretClass=(0,a.css)(m||(m=i(["\n  transition: transform 500ms ease;\n"],["\n  transition: transform 500ms ease;\n"]))),t.caretUpClass=(0,a.css)(h||(h=i(["\n  transform: rotate(-90deg);\n"],["\n  transform: rotate(-90deg);\n"]))),t.caretDownClass=(0,a.css)(g||(g=i(["\n  transform: rotate(90deg);\n"],["\n  transform: rotate(90deg);\n"]))),t.callToActionClass=(0,a.css)(y||(y=i(["\n  display: flex;\n  justify-content: flex-end;\n  flex-direction: row;\n\n  @media (min-width: ","px) {\n    min-width: 110px;\n  }\n"],["\n  display: flex;\n  justify-content: flex-end;\n  flex-direction: row;\n\n  @media (min-width: ","px) {\n    min-width: 110px;\n  }\n"])),o.widths.medium),t.actionTextContainerClass=(0,a.css)(v||(v=i(["\n  margin: 0 15px 0 0;\n  display: block;\n\n  @media (min-width: ","px) {\n    display: block;\n  }\n"],["\n  margin: 0 15px 0 0;\n  display: block;\n\n  @media (min-width: ","px) {\n    display: block;\n  }\n"])),o.widths.medium),t.dividerClass=(0,a.css)(b||(b=i(["\n  border-right: 1px solid ",";\n  display: block;\n  height: 30px;\n  margin: auto 0;\n\n  @media (min-width: ","px) {\n    display: none;\n  }\n"],["\n  border-right: 1px solid ",";\n  display: block;\n  height: 30px;\n  margin: auto 0;\n\n  @media (min-width: ","px) {\n    display: none;\n  }\n"])),o.colors.gray,o.widths.medium),t.iconWrapperClass=(0,a.css)(_||(_=i(["\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  background-color: transparent;\n  outline: ",";\n  width: ",";\n  height: ",";\n  z-index: 1;\n  border-width: 0px;\n\n  svg {\n    height: 15px;\n    margin: auto;\n    width: 15px;\n  }\n"],["\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  background-color: transparent;\n  outline: ",";\n  width: ",";\n  height: ",";\n  z-index: 1;\n  border-width: 0px;\n\n  svg {\n    height: 15px;\n    margin: auto;\n    width: 15px;\n  }\n"])),o.colors.blue,t.iconHeight,t.iconHeight),t.pointerClass=(0,a.css)(w||(w=i(["\n  cursor: pointer;\n"],["\n  cursor: pointer;\n"]))),t.textFadingOutClass=(0,a.css)(x||(x=i(["\n  animation: "," 400ms;\n"],["\n  animation: "," 400ms;\n"])),(0,t.fadeTextOut)()),t.textFadingInClass=(0,a.css)(k||(k=i(["\n  animation: "," 400ms;\n"],["\n  animation: "," 400ms;\n"])),(0,t.fadeTextIn)()),t.actionTextClass=(0,a.css)(O||(O=i(["\n  cursor: pointer;\n  font-size: 12px;\n  text-transform: uppercase;\n  font-weight: ",";\n  font-family: ",";\n  letter-spacing: 0.24px;\n  height: ",";\n  line-height: calc("," + 3px);\n  white-space: nowrap;\n  margin: 0;\n  padding: 0;\n  display: none;\n  color: ",";\n\n  &."," {\n    animation: "," 400ms;\n  }\n\n  &."," {\n    animation: "," 400ms;\n  }\n\n  @media (min-width: ","px) {\n    display: block;\n  }\n"],["\n  cursor: pointer;\n  font-size: 12px;\n  text-transform: uppercase;\n  font-weight: ",";\n  font-family: ",";\n  letter-spacing: 0.24px;\n  height: ",";\n  line-height: calc("," + 3px);\n  white-space: nowrap;\n  margin: 0;\n  padding: 0;\n  display: none;\n  color: ",";\n\n  &."," {\n    animation: "," 400ms;\n  }\n\n  &."," {\n    animation: "," 400ms;\n  }\n\n  @media (min-width: ","px) {\n    display: block;\n  }\n"])),o.fontWeights.bold,o.fonts.franklin,t.iconHeight,t.iconHeight,o.colors.veryDarkGrey,t.textFadingOutClass,(0,t.fadeTextOut)(),t.textFadingInClass,(0,t.fadeTextIn)(),o.widths.mediumLarge),t.messageClass=(0,a.css)(T||(T=i(["\n  font-size: 15px;\n  line-height: 17px;\n  opacity: 1;\n\n  span {\n    white-space: nowrap;\n\n    &::after {\n      content: '  ';\n      white-space: pre-line;\n    }\n  }\n"],["\n  font-size: 15px;\n  line-height: 17px;\n  opacity: 1;\n\n  span {\n    white-space: nowrap;\n\n    &::after {\n      content: '  ';\n      white-space: pre-line;\n    }\n  }\n"])))},bFGc:function(e,t,n){"use strict";var i=n("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=i(n("q1tI")),o=(i(n("17x9")),n("Jqp9")),r=n("ONNS"),s=function(e){var t=e.htmlShortBiography,n=e.twitter,i=e.facebook,s=e.className,l=[' <span class="'.concat(r.socialBlockClass,'">')];n&&l.push('<a href="https://twitter.com/'.concat(n,'" class="').concat(r.bioLinkClass,'" rel="noopener noreferrer" target="_blank"><span class="').concat(r.twitterAtClass,'">@</span>').concat(n,"</a>")),i&&n&&l.push('<span class="'.concat(r.seperatorClass,'">•</span>')),i&&l.push('<a href="https://www.facebook.com/'.concat(i,'" class="').concat(r.bioLinkClass,'" rel="noopener noreferrer" target="_blank">Facebook</a>')),l.push("</span>");var c=t;if(c){var u=c.split("</p>");u.splice(u.length-1,0,l.join(" ")),u.push("</p>"),c=u.join("")}return a.default.createElement(r.Bio,{className:(0,o.cx)(s)},a.default.createElement("div",{dangerouslySetInnerHTML:{__html:c}}))};s.displayName="Bio",s.defaultProps={htmlShortBiography:null,facebook:null,twitter:null,className:void 0};t.default=s},bFSk:function(e,t,n){"use strict";var i=n("lSNA"),a=n.n(i),o=n("q1tI"),r=n("X6oL"),s=n("2XMp");function l(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function c(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?l(Object(n),!0).forEach((function(t){a()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):l(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}t.a=function(e){var t=e.name,n=e.region,i=e.template,a=e.parentUri,l=e.pageType,u=Object(r.useTracking)(),d=Object(o.useCallback)((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return function(a){var o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!a)return a;var r=c(c({name:t,region:n,block:i,action:"click",pgtype:l},e),o);return Object(s.b)(a,r)}}),[i,l,t,n]);return{trackImpression:Object(o.useCallback)((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return function(){var o=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=c(c(c({},e),o),{},{event:"impression",module:c(c({name:t,context:i,region:n,list:{uri:a}},e.block||{}),o.block||{})});u.trackEvent(r)}}),[u,t,i,n,a]),trackInteraction:Object(o.useCallback)((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return function(a,o){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},s=c(c(c({},e),r),{},{event:"moduleInteraction",module:c(c({name:t,context:i,region:n},e.module||{}),r.module||{})});u.trackEvent(s)}}),[u,t,i,n]),trackLink:d}}},bLPb:function(e,t,n){"use strict";var i=n("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=i(n("q1tI")),o=n("3WfF"),r=function(){return a.default.createElement("svg",{width:"11",height:"16",viewBox:"0 0 11 16",fill:"none","aria-hidden":!0,className:o.iosClass},a.default.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M5.33334 0.165405L8.24914 3.44568L7.75087 3.88859L5.66667 1.54387V10.0005H5V1.54387L2.91581 3.88859L2.41753 3.44568L5.33334 0.165405ZM0.333336 5.33381H4V6.00047H1V14.6671H9.66667V6.00047H6.66667V5.33381H10.3333V15.3338H0.333336V5.33381Z",fill:"white"}))};r.displayName="Ios";t.default=r},bLUX:function(e,t,n){"use strict";n.d(t,"a",(function(){return c})),n.d(t,"b",(function(){return l}));var i=n("lSNA"),a=n.n(i),o=n("mczz"),r=n("WPRB");function s(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function l(e){var t,n,i=(null===(t=e[r.g.name])||void 0===t?void 0:t.allocated)&&r.g.variants.includes(e[r.g.name].variant);return{isInUnlimitedTest:i,isUnlimitedGiftTestVariant:i&&r.g.variants[1]===(null===(n=e[r.g.name])||void 0===n?void 0:n.variant)}}function c(e){var t=e.abra,n=void 0===t?{}:t,i=e.url,r=e.trackingRegion,c=e.moreParams,u=void 0===c?{}:c,d=e.hasSibling,p=void 0===d||d,f=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?s(Object(n),!0).forEach((function(t){a()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},u),m=l(n),h=m.isInUnlimitedTest,g=m.isUnlimitedGiftTestVariant;h&&p&&(f.u2g=g?"i":"c"),"carousel"===r&&(f.rsrc="crsl");var y=["unlocked_article_code","smid"];return Object(o.g)(new URL(i),f,[],(function(e,t){return y.indexOf(e)-y.indexOf(t)})).toString()}},bLcY:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.navListClass=t.dotClass=t.activeClass=void 0;var i=n("Jqp9"),a=n("3sMT");t.navListClass=(0,i.css)("list-style:none;counter-reset:list-block-counter;display:inline-flex;flex-flow:row nowrap;align-items:center;"),t.dotClass=(0,i.css)("margin:0 6px 0 0;width:6px;height:6px;border-radius:50%;background-color:",a.color.background.quaternary,";transition:background-color 0.2s ease;"),t.activeClass=(0,i.css)("background-color:",a.color.background.inversePrimary,";")},bNs8:function(e,t,n){"use strict";var i=n("TqRt"),a=n("cDf5");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,t.simpleByline=u;var o=i(n("lSNA")),r=i(n("q1tI")),s=(i(n("17x9")),n("Jqp9")),l=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=a(e)&&"function"!=typeof e)return{default:e};var n=c(t);if(n&&n.has(e))return n.get(e);var i={__proto__:null},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var r in e)if("default"!==r&&{}.hasOwnProperty.call(e,r)){var s=o?Object.getOwnPropertyDescriptor(e,r):null;s&&(s.get||s.set)?Object.defineProperty(i,r,s):i[r]=e[r]}return i.default=e,n&&n.set(e,i),i}(n("oZ2M"));function c(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(c=function(e){return e?n:t})(e)}function u(e){var t=e.authors,n=e.format,i=void 0===n?"string":n,a=e.prefix,o=void 0===a?"by":a,c=e.includePrefix,u=void 0!==c&&c,d=[],p="".concat(o.charAt(0).toUpperCase()+o.slice(1)," ");if(u&&("string"===i?d.push(p):d.push(r.default.createElement("span",{key:o,className:"byline-prefix"},p))),!t||0===t.length)return null;for(var f=["Por","Fotografías por"].includes(o)?" y ":" and ",m=0;m<t.length;m+=1){var h=t[m],g=h.bioUrl,y=h.displayName;t.length>1&&m===t.length-1&&d.push(f);var v=m<t.length-2?", ":"",b=y;"string"===i?b+=v:(void 0!==g&&""!==g&&(b=r.default.createElement(l.BylineLink,{href:g},b)),b=r.default.createElement("span",{key:m,className:(0,s.cx)(l.spanClass,{"last-byline":m===t.length-1}),itemProp:"name"},b,v)),d.push(b)}return"string"===i?d.join(""):d}var d=function(e){var t=e.bylines,n=e.className,i=e.html,a=e.id,c=e.InlineTimestamp,d=e.children;if(!t)return[];var p="enabled"===i?"array":"string";return t.map((function(e,i){var f=e.creators,m=e.renderedRepresentation,h=e.prefix,g=!(null==f||!f.length);return r.default.createElement(l.default,{id:a,className:(0,s.cx)((0,o.default)({},l.compoundBylineClass,t.length>1),n),key:i.toString(16)},!g&&m&&r.default.createElement("span",{className:(0,s.cx)(l.spanClass,"last-byline")},m),u({authors:f,format:p,prefix:h,includePrefix:g}),c&&c,d)}))};d.defaultProps={bylines:[],className:void 0,html:"enabled",id:void 0,InlineTimestamp:null,children:null};t.default=d},bjNE:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getLabel=t.getKicker=t.getHeadlinePrefix=t.getHeadline=t.getFullLabel=t.getColumnist=void 0,t.getNewsStatus=function(e){if(!e)return"";if(!e.newsStatus)return"";if("string"!=typeof e.newsStatus)return"";if(e.newsStatus){var t=e.newsStatus.toLowerCase();if("live"===t)return"live";if("breaking"===t)return"breaking";if("developing"===t)return"developing"}return""},t.getPlainLabel=function(e){if(!e)return"";if(e.__typename){var t=e.__typename.toLowerCase();if("recipe"===t)return"cooking";if("video"===t)return"video";if("slideshow"===t)return"slide show"}return""},t.getPromotionalMedia=function e(t){var n=t.promotionalMedia;if(!n)return{};if(a(n))return{};var i=n.crops;if(!i||a(i))return e(n);return n},t.hasSection=t.getUrl=t.getSummary=void 0,t.hasValidPromotionalMedia=function e(t){var n=t.promotionalMedia;if(!n)return!1;if(a(n))return!1;var i=n.crops;if(!i||a(i))return e(n);return!0},t.isOpinion=void 0;var i=n("4mEQ"),a=function(e){return 0===Object.keys(e).length},o=(t.getHeadline=function(e){if(e){var t,n=null!==(t=e.headline)&&void 0!==t&&t.default?e.headline.default:null;return(0,i.getHeadline)(n,e.promotionalHeadline)||""}return""},t.isOpinion=function(e){if(e){var t,n=null!==(t=e.section)&&void 0!==t&&t.displayName?e.section.displayName:null;return(0,i.isOpinion)(n)}return!1},t.hasSection=function(e,t){if(t&&e){var n,a,o=(null===(n=t.subsection)||void 0===n?void 0:n.displayName)||(null===(a=t.section)||void 0===a?void 0:a.displayName)||null;return(0,i.themeHas)(e,{section:o})}return!1}),r=(t.getHeadlinePrefix=function(e){return o("opinion",e)?"Opinion":o("book review",e)?"Book Review":null},t.getColumnist=function(e){if(!e)return null;if(!e.bylines)return null;if(!e.bylines[0])return null;if(!e.bylines[0].creators)return null;if(!e.bylines[0].creators[0])return null;var t=e.bylines[0].creators.filter((function(e){return"string"==typeof e.displayName})).map((function(e){return e.displayName}));return t&&(0,i.joinContributers)(t)||null}),s=t.getKicker=function(e){var t;if(!e)return"";var n=e.__typename||null,a=null!==(t=e.section)&&void 0!==t&&t.displayName?e.section.displayName:null,o=r(e)||null;return(0,i.getLabel)(n,a,o)||""};t.getLabel=function(e){return e?s(e):""},t.getFullLabel=function(e){var t;if(!e)return"";var n=e.__typename||null,a=null!==(t=e.section)&&void 0!==t&&t.displayName?e.section.displayName:null,o=r(e)||null;return(0,i.getLabel)(n,a,o)||""};t.getSummary=function(e){return e&&(0,i.getSummary)(e.summary,e.promotionalSummary)||""},t.getUrl=function(e){return e&&(0,i.getUrl)(e.url,e.targetUrl)||""}},bkJC:function(e,t,n){"use strict";var i=n("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=i(n("q1tI")),o=(i(n("17x9")),function(e){var t=e.className,n=e.fill;return a.default.createElement("svg",{viewBox:"0 0 13 10",className:t,width:"13",height:"10",xmlns:"http://www.w3.org/2000/svg"},a.default.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M5.987 2.772l.025.425-.429-.052c-1.562-.2-2.927-.876-4.086-2.011L.93.571.784.987c-.309.927-.111 1.906.533 2.565.343.364.266.416-.327.2-.206-.07-.386-.122-.403-.096-.06.06.146.85.309 1.161.223.434.678.858 1.176 1.11l.42.199-.497.009c-.481 0-.498.008-.447.19.172.564.85 1.162 1.606 1.422l.532.182-.464.277a4.833 4.833 0 0 1-2.3.641c-.387.009-.704.044-.704.07 0 .086 1.047.572 1.657.762 1.828.564 4 .32 5.631-.641 1.159-.685 2.318-2.045 2.859-3.363.292-.702.583-1.984.583-2.6 0-.398.026-.45.507-.927.283-.277.55-.58.6-.667.087-.165.078-.165-.36-.018-.73.26-.832.226-.472-.164.266-.278.584-.78.584-.928 0-.026-.129.018-.275.096a4.79 4.79 0 0 1-.755.294l-.464.148-.42-.286C9.66.467 9.335.293 9.163.24 8.725.12 8.055.137 7.66.276c-1.074.39-1.752 1.395-1.674 2.496z",fill:n}))});o.displayName="Twitter",o.defaultProps={className:void 0,fill:"#000"};t.default=o},bmDE:function(e,t,n){"use strict";n.d(t,"b",(function(){return i})),n.d(t,"c",(function(){return a})),n.d(t,"a",(function(){return o})),n.d(t,"d",(function(){return r}));var i=600,a=740,o=1220,r=["cooking"]},bqBd:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.hidePharmacyEmailSignup=t.hideEmailSignupBlock=t.hasPharmacyPlacedSignupBlock=t.hasEditorPlacedSignupBlock=t.createFallbackEmailSignupProps=void 0;var i=n("T25G"),a=t.hasEditorPlacedSignupBlock=function(e){var t,n;return(null==e||null===(t=e.sprinkledBody)||void 0===t||null===(n=t.content)||void 0===n?void 0:n.some((function(e){return"EmailSignupBlock"===e.__typename})))||!1},o=t.hideEmailSignupBlock=function(e){var t=!1;return null!=e&&e.collections&&(t=e.collections.some((function(e){var t=e.collectionType,n=e.name;return"SYNDICATED"===t&&"HideEmailSignup"===n}))),t};t.hasPharmacyPlacedSignupBlock=function(e){var t;return(null==e||null===(t=e.associatedAssets)||void 0===t?void 0:t.some((function(e){var t,n,i;return("Capsule"===(null==e||null===(t=e.asset)||void 0===t?void 0:t.__typename)||"EmbeddedInteractive"===(null==e||null===(n=e.asset)||void 0===n?void 0:n.__typename))&&(null==e||null===(i=e.assetName)||void 0===i?void 0:i.includes("email-signup"))})))||!1},t.hidePharmacyEmailSignup=function(e){var t,n,i,r=o(e),s=a(e),l=!(null===(t=e.associatedNewsletter)||void 0===t||null===(n=t.newsletterProduct)||void 0===n||null===(i=n.newsletterProductData)||void 0===i||!i.code);return r||s||l},t.createFallbackEmailSignupProps=function(e){var t=e||{},n=t.code,a=t.name,o=t.splashSignupCaption,r=t.allowedEntitlement,s=t.isOnsiteFreeTrialEnabled,l=t.subscriptionPageLink;return n&&a?{isOnsiteNewsletter:!0,data:{productCode:n,newsletterHeading:[{text:"You’re reading ".concat((0,i.nameWithArticle)(a),r?" newsletter, for Times subscribers only.":" newsletter.")}],productDefaults:{title:a,caption:o,allowedEntitlement:r,isOnsiteFreeTrialEnabled:s,subscriptionPageLink:l}}}:{}}},c106:function(e,t,n){"use strict";var i=n("VkAN"),a=n.n(i),o=n("gcR/"),r=n.n(o),s=n("lSNA"),l=n.n(s),c=n("J4zp"),u=n.n(c),d=n("q1tI"),p=n.n(d),f=n("eFc+"),m=n.n(f),h=n("X6oL"),g=n("IiD6"),y=n.n(g),v=n("UIP5"),b=n("nGF/"),_=n("4zjr"),w=n.n(_),x=n("OXmc"),k=n.n(x),O=n("pCca"),T=n("sOrY"),C=n("ZKN5"),E=n("M5Mg"),S=n("mAwq"),P=n("nosR"),I=n("uyHG"),M=n.n(I);function A(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function j(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?A(Object(n),!0).forEach((function(t){l()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):A(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var N=M()(P.findVideoRenditionOfBestFitUrl),L=M()(P.findRenditionsByRatio);function D(e){var t=e.props,n=e.options,i=t.media,a=t.videoOptions,o=t.adReq,r=t.deviceType,s=i.advertisingProperties;return{options:j(j({},n),{},{adSensitivity:null==s?void 0:s.sensitivity,category:i.contentSeries,controlsOverlay:{mode:"article"},deviceType:r,duration:i.duration,embeddedOnly:i.embedded,id:i.sourceId,is360:i.is360,live:i.isLive,liveUrls:i.liveUrls,section:i.section,series:i.contentSeries,shortUrl:i.shortUrl,subsection:i.subsection,timesTags:i.timesTags,url:i.url,videoCues:i.cues,adReq:o},a),props:t}}function R(e){var t=e.props,n=e.options,i=t.media,a=t.videoOptions;return n.summary="homepage"===a.type&&i.promotionalSummary||i.summary,{options:n,props:t}}function B(e){var t=e.props,n=e.options,i=t.media,a=t.deviceType;if(void 0===i||void 0===i.renditions)return{props:t,options:n};if(!i.renditions)return n.sources=[],{options:n,props:t};if(i.is360&&i.renditions)return n.sources=i.renditions,{options:n,props:t};for(var o,r=null==i?void 0:i.renditions.filter((function(e){var t;return!(null!=e&&null!==(t=e.type)&&void 0!==t&&t.includes("hls"))})),s=0;s<P.commonPrioritizedVideoRenditions[a].length&&!o;s+=1)for(var l=0;l<r.length&&!o;l+=1){var c=P.commonPrioritizedVideoRenditions[a][s],u=r[l];c===u.type&&(o=u)}return n.sources=o?[o]:(null==r?void 0:r.length)>0?r:null==i?void 0:i.renditions,{options:n,props:t}}function z(e){var t,n,i,a,o,r,s=e.props,l=e.options;if(null!==(t=l.sources)&&void 0!==t&&null!==(n=t[0])&&void 0!==n&&null!==(i=n.type)&&void 0!==i&&i.includes("hls"))return{options:l,props:s};var c=null===(a=l.sources)||void 0===a||null===(o=a[0])||void 0===o||null===(r=o.url)||void 0===r?void 0:r.replace(".mp4",".vtt");return{options:j(j({},l),{},{captionsUrl:c}),props:s}}function F(e){var t,n=e.props,i=e.options,a=n.media,o=n.videoOptions;return i.headline=(null===(t=a.headline)||void 0===t?void 0:t.default)||"","homepage"===o.type&&a.promotionalHeadline&&(i.headline=a.promotionalHeadline),{options:i,props:n}}function U(e){var t,n=e.props,i=e.options,a=n.media.promotionalMedia,o=i.ratio;if(a){var r=n.media.promotionalMedia,s=r.renditions,l=r.crops,c=n.breakpoint;if(s){var u=s.filter((function(e){return/\.mp4$/.test(null==e?void 0:e.url)}));t=N(u,c)}else if(l){var d=L(l,o);t=N(d)}}return{options:j(j({},i),{},{posterUrl:t}),props:n}}function H(e){var t,n=e.props,i=e.options;if(!n.media.promotionalMedia)return{props:n,options:i};var a=n.media,o=a.promotionalMedia.renditions,r=a.promotionalMedia,s=i.ratio;if(o){var l,c=null===(l=r.promotionalMedia)||void 0===l?void 0:l.crops;if(c){var u=L(c,s);t=N(u)}}return{options:j(j({},i),{},{posterFallbackUrl:t}),props:n}}function W(e){var t=e.props,n=e.options,i=t.deviceType,a=t.adReq;if(!t.videoOptions.ads||!a)return n.adReq=void 0,{props:t,options:n};var o={amznslots:a.amznslots,edn:a.edn,plat:a.plat,prop:a.prop,Sub:a.Sub,typ:a.typ,vp:a.vp},r=(a.typ||"").split(",");if(r.indexOf("hp")>=0){var s={path:"29390238/nyt/homepage/us",ver:"smartphone"===i?"mvi":"vi"};n.adReq=j(j({},o),s)}else if(r.indexOf("art")>=0){var l="29390238/nyt";a.coll&&(l+="/".concat((a.coll||"").replace(/,/g,"/")));var c={auth:a.auth,col:a.coll,des:a.des,geo:a.geo,id:a.id,org:a.org,path:l,per:a.per,spon:a.spon,ttl:a.ttl,ver:a.ver};a.adv&&(c.adv=a.adv),n.adReq=j(j({},o),c)}return{options:n,props:t}}function q(e){var t=e.props,n=e.options,i=t.videoOptions;return n.ratio=i.ratio||"16:9",{options:n,props:t}}function V(e){var t,n,i,a=e.props,o=e.options,r=null===(t=a.media.playlist)||void 0===t||null===(n=t.videos)||void 0===n||null===(i=n.edges)||void 0===i?void 0:i.map((function(e){var t;if(!e||!e.node)return null;var n=e.node,i=n.url,a=n.headline,o=n.promotionalMedia,r=n.renditions,s=n.duration,l=n.sourceId,c=n.advertisingProperties;return{adSensitivity:null==c?void 0:c.sensitivity,url:i,duration:s,id:l,headline:null==a?void 0:a.default,images:(null==o||null===(t=o.crops)||void 0===t?void 0:t.reduce((function(e,t){return t.renditions?e.concat(t.renditions):e}),[]))||[],renditions:r}})).filter((function(e){return e}));return r&&(o.playlistVideos=r),{options:o,props:a}}function G(e){var t,n=e.options,i=e.props,a=i.media;return null!==(t=a.bylines)&&void 0!==t&&t[0]&&(n.byline=a.bylines[0].renderedRepresentation),{options:n,props:i}}function Y(e){var t=e.options,n=e.props,i=n.media;if("smartphone"===n.deviceType)if(i.is360)t.ratio="1:1";else if(t.sources){var a,o;if("9:16"===i.aspectRatio)t.ratio="2:3";else t.ratio=null==t||null===(a=t.sources)||void 0===a||null===(o=a[0])||void 0===o?void 0:o.aspectRatio;t.ratio||(t.ratio=i.aspectRatio)}return{options:t,props:n}}function X(e){var t=e.props,n=e.options,i=t.media;return i.playlist&&(n.playlistId=i.playlist.sourceId,n.playlistName=i.playlist.promotionalHeadline,n.playlistUrl=i.playlist.url),{options:n,props:t}}function Z(e){var t,n=e.props,i=e.options,a=n.media;return null!=a&&null!==(t=a.related)&&void 0!==t&&t[0]&&(i.related=[{headline:a.related[0].promotionalHeadline,url:a.related[0].url}]),{options:i,props:n}}var J,K=function(e){return function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];return n.forEach((function(t){e=t(e)})),e}({options:{},props:e},D,q,B,z,Y,U,F,R,H,W,V,X,G,Z)};function $(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function Q(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?$(Object(n),!0).forEach((function(t){l()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):$(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function ee(e){var t,n,i=e.media,a=e.locksmith,o=e.videoOptions,s=y()(),l=Object(d.useRef)(null),c=Object(h.useTracking)().trackEvent,f=Object(O.a)().deviceType,m=Object(d.useReducer)(T.a,{isLoading:!0,isPlaying:!1,currentTime:void 0,showTranscript:!1,endDateTime:new Date(i.firstPublished).getTime()+36e5}),g=u()(m,2),_=g[0],x=g[1],C=(new Date).getTime(),P=Object(d.useState)(!1),I=u()(P,2),M=I[0],A=I[1];Object(d.useEffect)((function(){C>=_.endDateTime&&!1===M&&(A(!0),x({endDateTime:_.endDateTime+36e5}))}),[C,_.endDateTime,M]);var j=function(){x({isLoading:!1})},N=i.isLive?Q(Q({},i),{},{endDateTime:_.endDateTime}):i,L=K({media:i,videoOptions:o,adReq:s,deviceType:f}).options,D=Object(b.useAutoPlay)(),R=null==i?void 0:i.transcript;R&&(L.transcript={onShowTranscript:function(e){e&&"function"==typeof e.stopPropagation&&(e.stopPropagation(),e.preventDefault()),x({showTranscript:!0}),l.current&&l.current.pause()}});var B=Object(d.useState)(!1),z=u()(B,2),F=z[0],U=z[1],H=Q(Q({},L),{},{gtmTrackEvent:c,playerRef:function(e){l.current=e,null!=o&&o.playerRef&&o.playerRef(e);var t=e.events;e.on(t.TIME_UPDATE,(function(e){x({currentTime:e})})),e.on(t.PLAY,(function(){x({isPlaying:!0})})),e.on(t.PAUSE,(function(){x({isPlaying:!1})})),e.on(t.READY,(function(){if(j(),a&&a.lock&&a.unlock){var n=e.props.instanceId,i=[t.PLAYING,t.AD_STARTED,t.AD_RESUMED],o=[t.PAUSE,t.ENDED,t.ERROR,t.AD_PAUSED,t.AD_COMPLETED,t.AD_SKIPPED,t.AD_STOPPED,t.AD_ERROR];i.forEach((function(t){e.on(t,(function(){a.lock(n)}))})),o.forEach((function(t){e.on(t,(function(){a.unlock(n)}))}))}}))},onErrorLoadingPlayer:function(){j()},autoplay:L.autoplay&&D,persistentShareButton:{onClick:function(){U(!0)}}}),W="9:16"===L.ratio?"2:3":L.ratio;return r()(E.a,{isLoading:_.isLoading,aspectRatio:W,backgroundMedia:L.posterUrl},void 0,R&&r()(k.a,{hideTranscript:function(){x({showTranscript:!1}),l.current&&l.current.play()},audioDuration:i.duration||0,currentTime:_.currentTime,isPlaying:_.isPlaying,onPlayPause:function(){l.current&&(_.isPlaying?l.current.pause():l.current.play())},isVisible:_.showTranscript,transcript:R,headline:(null===(t=i.headline)||void 0===t?void 0:t.default)||"",summary:i.summary||"",credits:i.credit}),p.a.createElement(v.VideoPlayer,H),r()(S.a,{isShareMenuOpen:F,hideShareMenu:function(){return U(!1)},share:{url:i.url,headline:(null===(n=i.headline)||void 0===n?void 0:n.default)||"",uri:i.uri,name:"share-url",label:"permalink"}}),r()(w.a,{data:N,platform:"vi",inlineAsset:!0}))}ee.displayName="SpanVideo",ee.fragments={media:m()(J||(J=a()(['\n    fragment SpanVideo_media on Video {\n      id\n      transcript\n      advertisingProperties {\n        sensitivity\n      }\n      aspectRatio\n      bylines {\n        renderedRepresentation\n      }\n      contentSeries\n      cues {\n        name\n        type\n        timeIn\n        timeOut\n      }\n      duration\n      embedded\n      headline {\n        default\n      }\n      is360\n      isLive\n      isCinemagraph\n      liveUrls\n      playlist {\n        videos(first: 4) {\n          edges @filterEmpty {\n            node {\n              advertisingProperties {\n                sensitivity\n                sponsored\n              }\n              id\n              sourceId\n              duration\n              section {\n                id\n                name\n              }\n              headline {\n                default\n              }\n              renditions {\n                url\n                type\n              }\n              url\n              promotionalMedia {\n                ... on Node {\n                  id\n                }\n                ... on Image {\n                  id\n                  # this is the only rendition accepted/used by VHS3 on the recommendation end slate\n                  crops(renditionNames: ["videoSixteenByNine540"]) {\n                    name\n                    renditions {\n                      name\n                      height\n                      width\n                      url\n                    }\n                  }\n                }\n              }\n            }\n          }\n        }\n        id\n        promotionalHeadline\n        url\n        sourceId\n      }\n      promotionalHeadline\n      promotionalMedia {\n        ...Video_promoImage\n      }\n      promotionalSummary\n      related @filterEmpty {\n        ... on Article {\n          id\n          promotionalHeadline\n          url\n          sourceId\n        }\n      }\n      renditions {\n        width\n        url\n        type\n        height\n        bitrate\n        aspectRatio\n      }\n      section {\n        id\n        name\n        displayName\n      }\n      shortUrl\n      sourceId\n      subsection {\n        id\n        name\n      }\n      summary\n      timesTags @filterEmpty {\n        __typename\n        displayName\n        isAdvertisingBrandSensitive\n        vernacular\n      }\n      url\n      uri\n      ... on Video {\n        id\n        url\n        duration\n        sourceId\n        promotionalMedia {\n          ...Video_promoVideo\n        }\n        renditions {\n          width\n          height\n          bitrate\n          url\n        }\n      }\n    }\n\n    fragment Video_promoVideo on Video {\n      id\n      renditions {\n        width\n        height\n        bitrate\n        url\n      }\n      promotionalMedia {\n        ... on Node {\n          id\n        }\n        ...Video_promoImage\n      }\n    }\n\n    fragment Video_promoImage on Image {\n      id\n      crops(\n        renditionNames: [\n          # MASTER\n          "articleLarge"\n          "jumbo"\n          "superJumbo"\n          # SIXTEEN_BY_NINE\n          "videoLarge"\n          "videoSixteenByNine1050"\n          "videoSixteenByNine3000"\n          # MEDIUM_SQUARE\n          "square640"\n          # TWO_BY_THREE\n          "verticalTwoByThree735"\n          # THREE_BY_TWO\n          "threeByTwoSmallAt2X"\n          "threeByTwoMediumAt2X"\n          "threeByTwoLargeAt2X"\n        ]\n      ) {\n        name\n        renditions {\n          name\n          width\n          height\n          url\n        }\n      }\n    }\n  '])))},ee.defaultProps={videoOptions:{ratio:"16:9",playerRef:void 0},locksmith:void 0};t.a=Object(C.a)(ee)},cCFw:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.canStorylineComposeLatestUpdates=function(e){var t,n=e.parentUri,i=e.storyline;if(!(null==i||null===(t=i.promotedLiveAssets)||void 0===t?void 0:t[0]))return!1;var a=u({storyline:i})||{},o=a.storylineDisplayName,r=a.liveAssetUri,s=a.items;return n!==r&&(!(null==s||!s.length)&&!!o)},t.getNewLiveBriefingProps=s,t.getNewLiveBriefingSubheads=r,t.getOldLiveBriefingProps=l,t.getSubheadsFromAsset=c,t.liveBlogPermalinkToAnchor=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=e.split("/"),i=n.pop(),a=n.join("/");t&&(a="".concat(a).concat(t));return a="".concat(a,"#").concat(i)},t.mapDataToProps=u;var i=n("t7vg"),a=n("V6Yu"),o=n("hZ4i");function r(e,t){return e.map((function(e){var n,i=e.node,a=i.url,r=i.headline,s=r.default,l=r.sentence,c=i.firstPublished,u=i.uri,d=i.summary;return{url:null===(n=(0,o.rewriteNodePermalinkToAnchor)({url:t},{url:a}))||void 0===n?void 0:n.url,text:l||s,firstPublished:c,uri:u,summary:d}}))}function s(e,t){var n,i,a;if(!(t&&(null!=t&&null!==(n=t.stream)&&void 0!==n&&null!==(i=n.edges)&&void 0!==i&&i.length||null!=e&&e.length)))return null;var o=e||(null==t||null===(a=t.stream)||void 0===a?void 0:a.edges),s=o[0].node.firstPublished;return{url:t.url,items:r(o,null==t?void 0:t.url),lastMajorModification:s}}function l(e){var t,n;if(null==e||null===(t=e.body)||void 0===t||null===(n=t.content)||void 0===n||!n.some((function(e){return"UnstructuredBlock"===(null==e?void 0:e.__typename)})))return null;var o=e.url,r=e.lastMajorModification,s=e.uri,l=e.body.content.filter((function(e){return"Heading2Block"===e.__typename})).map((function(e){var t,n=(0,i.getFormattedText)(e.content),r=null===(t=(0,a.textFromOakContent)(e.content))||void 0===t?void 0:t.trim();return n&&r?{url:"".concat(o,"#").concat((0,a.generateContentLink)(e.content)),text:n,textContent:r,uri:s}:null})).filter(Boolean);return{url:o,items:l,lastMajorModification:r}}function c(e){var t,n;return"LegacyCollection"===(null==e?void 0:e.__typename)?s(null==e||null===(t=e.stream)||void 0===t?void 0:t.edges,e):"FeedPublication"===(null==e?void 0:e.__typename)?s(null==e||null===(n=e.items_beta)||void 0===n?void 0:n.edges,e):"Article"===(null==e?void 0:e.__typename)?l(e):null}function u(e){var t,n,i,a,r,s,l,u=e.storyline,d=null==u?void 0:u.displayName,p=null==u||null===(t=u.hubAssets)||void 0===t||null===(n=t[0])||void 0===n||null===(i=n.asset)||void 0===i?void 0:i.url,f=null==u||null===(a=u.hubAssets)||void 0===a||null===(r=a[0])||void 0===r||null===(s=r.asset)||void 0===s?void 0:s.uri,m=(null==u||null===(l=u.promotedLiveAssets)||void 0===l?void 0:l[0])||{},h=m.displayName,g=m.asset,y=null==g?void 0:g.uri,v=(g||{}).url,b=(0,o.parseUnstructuredData)(g)||{},_=c(g)||{},w=_.items;return{storylineDisplayName:d,storylineUrl:p,storylineLinkUri:f,liveAssetUri:y,displayName:h,url:v,lastMajorModification:_.lastMajorModification,items:null==w?void 0:w.slice(0,3),unstructuredData:b,isActive:null==g?void 0:g.active}}},cFZn:function(e,t,n){"use strict";var i=n("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t=null,n=null,i=null,o=[];null!=e&&e.length&&(e.forEach((function(e){var r=e.speaker,s=e.text,l=e.timecode,c=(0,a.default)(s);if(r!==t){n&&o.push(n),t=r;var u=r.match(/^[<|^](.+)[\^|>]$/);n={isArchived:!!u,speaker:u&&u[1].toLowerCase()||r.toLowerCase(),text:[c]}}else if(l&&l.start&&l.start>i)n.text.push(c);else{var d=n.text.length-1;n.text[d]="".concat(n.text[d]," ").concat(c)}l&&l.end&&(i=l.end)})),o.push(n));return o};var a=i(n("pq3b"))},cKmz:function(e,t,n){"use strict";var i=n("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=i(n("ALE8")),o=i(n("pfWQ"));t.default=function(){var e,t;return(0,a.default)()&&(null===(e=(t=(0,o.default)()).getAdsOnPage)||void 0===e?void 0:e.call(t))||{}}},cRkx:function(e,t,n){"use strict";t.a="/vi-assets/static-assets/icon-audio_144x144-dc00c6581be29065cbd19ec7a83a3767.webp"},caSQ:function(e,t,n){"use strict";n.d(t,"a",(function(){return f}));var i=n("yXPU"),a=n.n(i),o=n("J4zp"),r=n.n(o),s=n("o0o1"),l=n.n(s),c=(n("ls82"),n("q1tI")),u=n("UQ7B"),d=n("+ClL"),p=n("qs2k");function f(){var e=Object(c.useRef)(null),t=Object(c.useState)(null),n=r()(t,2),i=n[0],o=n[1];return Object(c.useEffect)((function(){return e.current=u.a.subscribe(function(){var e=a()(l.a.mark((function e(t){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(p.d)();case 2:o(t);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),(function(e){return Object(d.a)(e,{geolocation:!0})})),function(){e.current.unsubscribe()}}),[]),i}},cc1G:function(e,t,n){"use strict";var i=n("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=i(n("lSNA")),o=i(n("q1tI")),r=(i(n("17x9")),n("Jqp9")),s=n("Ol7c");function l(e){var t=e.items,n=e.singleCard,i=e.trackLink;return o.default.createElement("div",{className:s.contextCardClass,"data-testid":"context-card"},t.map((function(e){return o.default.createElement("p",{key:e.text,className:(0,r.cx)(s.itemClass,(0,a.default)({},s.singleCardClass,n))},e.subtitle&&o.default.createElement("strong",null,e.subtitle," "),o.default.createElement("span",{onClick:i,dangerouslySetInnerHTML:{__html:e.text}}))})))}l.displayName="ContextCard",l.defaultProps={singleCard:!1,trackLink:function(){}};t.default=l},coEv:function(e,t,n){"use strict";n.d(t,"b",(function(){return o})),n.d(t,"a",(function(){return r}));var i=n("Jqp9"),a=n("3sMT"),o=Object(i.css)("display:inline-block;font-style:normal;line-height:0;vertical-align:middle;"),r=Object(i.css)("border-left:3px inset transparent;border-right:3px inset transparent;border-bottom:3px inset transparent;border-top:3px solid ",a.color.signal.editorial,";display:inline-block;height:0;margin-left:3px;margin-top:3px;width:0;");a.color.signal.editorial},crgc:function(e,t,n){"use strict";var i=n("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.summaryClass=t.overlayClass=t.modalClass=t.dismissClass=void 0;var a=n("3sMT"),o=n("Jqp9"),r=i(n("wXC7"));t.overlayClass=(0,o.css)("display:block;position:fixed;box-sizing:border-box;top:0;right:0;bottom:0;left:0;width:100%;height:100%;z-index:",r.default.zIndex.overlay,";background-color:",a.dark.colors.background.primary.transform(r.default.setAlpha(.5)).rgba,";opacity:1;"),t.modalClass=(0,o.css)("text-align:center;position:fixed;top:0;left:0;right:0;bottom:0;overflow:auto;width:unset;padding:32px 20px 40px;box-shadow:none;border-radius:0;background-color:",a.light.colors.background.primary.hex,";font-family:",r.default.font.franklinBase,";-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale;color:",a.color.content.primary,";z-index:",r.default.zIndex.interstitialModal,";",r.default.breakpoint.small,"{width:450px;left:50%;top:50%;border-radius:3px;box-shadow:0 0 8px ",a.dark.colors.background.primary.transform(r.default.setAlpha(.2)).rgba,";right:unset;bottom:unset;transform:translate(-50%,-50%);margin:0 auto;overflow:unset;position:absolute;padding:32px 30px 40px 30px;}"),t.dismissClass=(0,o.css)("position:absolute;top:1px;right:0;padding:16px;cursor:pointer;background-color:",a.light.colors.background.primary.hex,";"),t.summaryClass=(0,o.css)("display:block;font-family:",r.default.font.serifMedium,";font-size:",r.default.font.size(24),";line-height:26px;text-align:center;color:",a.color.black,";font-style:normal;margin-bottom:10px;padding:0 16px;")},d3NK:function(e,t,n){"use strict";var i=n("gcR/"),a=n.n(i),o=n("lSNA"),r=n.n(o),s=n("J4zp"),l=n.n(s),c=n("q1tI"),u=n("T5+l"),d=n.n(u),p=n("IiD6"),f=n.n(p),m=n("Jqp9"),h=n("QS0n"),g=n("cr+I"),y=n.n(g),v=n("pCca"),b=n("sOrY"),_=n("ZKN5"),w=n("TwAE"),x=n("DNUX"),k=n("Rb+W"),O=n("06b3"),T=n("wXC7"),C=n.n(T),E=n("3sMT"),S=Object(m.css)("display:none;@media (min-width:765px){background-color:",C.a.color.gray90,";border-bottom:1px solid ",C.a.color.gray80,";display:block;padding-bottom:15px;padding-top:15px;margin:0;}@media print{display:none;}position:relative;"),P=Object(m.css)("background-color:",C.a.color.gray90,";border-bottom:1px solid ",C.a.color.gray80,";border-top:1px solid ",C.a.color.gray80,";margin:2rem auto;padding-bottom:30px;padding-top:12px;text-align:center;",C.a.breakpoint.medium,"{margin:3rem auto;}@media print{display:none;}position:relative;"),I=Object(m.css)("min-height:280px;"),M=Object(m.css)("margin-top:60px;",C.a.breakpoint.medium,"{margin-bottom:0;margin-top:0;}"),A=Object(m.css)("width:100%;margin:2rem auto;border-top:1px solid ",C.a.color.gray80,";border-bottom:1px solid ",C.a.color.gray80,";",C.a.breakpoint.medium,"{margin:3rem auto;}",C.a.breakpoint.small,"{margin-left:auto;margin-right:auto;}"),j=Object(m.css)("position:relative;"),N=Object(m.css)("margin:0;"),L=Object(m.css)("display:none;"),D=Object(m.css)("border-top:1px solid ",C.a.color.gray70,";display:flex;margin:0 ",C.a.grid.pageMargin," 15px;max-width:",C.a.breakpoint.mediaMaxWidth,"px;padding-top:15px;",C.a.breakpoint.small,"{margin-left:auto;margin-right:auto;width:",C.a.breakpoint.textBodyWidth,"px;}",C.a.breakpoint.extraLarge,"{width:",C.a.breakpoint.textBodyWidthExtralarge,"px;}"),R=Object(m.css)("border-bottom:1px solid ",C.a.color.gray55,";display:flex;margin:15px ",C.a.grid.pageMargin,";max-width:",C.a.breakpoint.textBodyWidth,"px;padding-bottom:15px;",C.a.breakpoint.small,"{margin-left:auto;margin-right:auto;width:",C.a.breakpoint.textBodyWidth,"px;}",C.a.breakpoint.extraLarge,"{width:",C.a.breakpoint.textBodyWidthExtralarge,"px;max-width:",C.a.breakpoint.textBodyWidthExtralarge,"px;}"),B=Object(m.css)("color:",C.a.color.gray50,";display:none;font-family:",C.a.font.franklinBase,";font-size:",C.a.font.size(9),";font-weight:",C.a.font.weight.light,";letter-spacing:0.05rem;line-height:",C.a.font.size(9),";margin-left:auto;text-align:center;text-transform:uppercase;",C.a.breakpoint.small,"{display:inline-block;}p{margin-bottom:auto;margin-right:7px;margin-top:auto;text-transform:none;}"),z=Object(m.css)("color:",C.a.color.gray50,";font-family:",C.a.font.franklinBase,";font-size:",C.a.font.size(9),";font-weight:",C.a.font.weight.light,";letter-spacing:0.05rem;line-height:",C.a.font.size(9),";margin-bottom:9px;text-align:center;text-transform:uppercase;"),F=Object(m.css)("padding-bottom:15px;",C.a.breakpoint.medium,"{padding-bottom:0;}"),U=Object(m.css)("width:100%;"),H=Object(m.css)("background:transparent;border:0;border-radius:3px;color:",E.color.content.quaternary,";display:block;font-family:",C.a.font.franklinBase,";font-size:",C.a.font.size(10),";font-weight:",C.a.font.weight.book,";letter-spacing:0.05rem;line-height:",C.a.font.size(10),";margin:3px auto;padding:8px 9px;text-align:center;"),W=Object(m.css)("background-color:",E.color.background.secondary,";color:",E.color.content.quaternary,";");C.a.color.gray90,C.a.color.gray55,C.a.color.gray55,C.a.color.gray90,C.a.breakpoint.small;function q(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function V(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?q(Object(n),!0).forEach((function(t){r()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):q(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var G="Advertisement",Y="Capture Ad",X={pp_morein:!0,sponsor:!0,ribbon:!0,pp_edpick:!0};function Z(e){var t,n=e.id,i=e.sequence,o=e.dropzone,s=e.adDidNotDisplay,u=e.sponsorAdFullBleed,p=e.wrapperClassName,g=e.slugClassName,_=e.defaultAdSlotStyle,T=e.isPrioritized,C=e.lazyLoad,E=n;void 0===n&&i?(E="story-ad-".concat(i),t="mid".concat(i)):t=E=n;var q=f()().adTargeting,Z=void 0===q?{}:q,J=Object(h.useLocation)(),K=Object(m.useTheme)(),$=Object(v.a)().deviceType,Q=Object(c.useState)(!1),ee=l()(Q,2),te=ee[0],ne=ee[1],ie=Object(c.useState)(!0),ae=l()(ie,2),oe=ae[0],re=ae[1],se=Object(c.useState)(null),le=l()(se,2),ce=le[0],ue=le[1],de=Object(c.useState)(!1),pe=l()(de,2),fe=pe[0],me=pe[1],he=Object(c.useReducer)(b.a,{standardAdHeight:!0,isFlexFrame:!1,sponsorAdIsEmpty:!0,isTopAd:"top"===E,hideAd:function(e){var t=y.a.parse(J.search);return e&&K.chromeless||t&&"true"===t.nojoy}("top"===E)}),ge=l()(he,2),ye=ge[0],ve=ge[1],be=O.a.load("vi_show_report_btn")||"";Object(c.useEffect)((function(){te&&s&&s()}),[s,te]),Object(c.useEffect)((function(){!te&&fe&&re(!1)}),[E,fe,te]),Object(c.useEffect)((function(){if(ce){var e=ce.size,t=ce.isEmpty,n=ce.advertiserId,i=ce.sourceAgnosticCreativeId,a=ce.sourceAgnosticLineItemId,o=ce.slot;t||be&&(ve({debug:{sourceAgnosticCreativeId:i,sourceAgnosticLineItemId:a,googleQueryId:o.getEscapedQemQueryId(),advertiserId:n,pageUrl:window.location.href,clickUrl:"",size:e}}),Object(k.g)(o).then((function(e){ve((function(t){return{debug:V(V({},t.debug),{},{clickUrl:e})}}))})))}}),[ce,be]),Object(c.useEffect)((function(){if(!te&&ce){var e=ce.size;ce.isEmpty||("sponsor"===E&&ve({sponsorAdIsEmpty:!1}),0===e[0]&&0===e[1]?ve({isFlexFrame:!0}):ve({isFlexFrame:!1}),250===e[1]||0===e[1]&&"vi"===Z.ver?ve({standardAdHeight:!0}):ve({standardAdHeight:!1}))}}),[Z.ver,E,te,ce]);var _e=ye.isTopAd;if(ye.hideAd||Object(k.u)(E))return null;var we,xe="".concat(E,"-wrapper"),ke="".concat(E,"-slug"),Oe=P;if(_e?Oe=S:"ribbon"===E&&(Oe=j),ye.standardAdHeight&&(we="smartphone"===$&&_e||"smartphone"===$&&"pp_morein"===E||"desktop"===$&&"pp_edpick"===E?{}:"desktop"===$&&_e||"bottom"===E?{minHeight:"90px"}:"sponsor"===E?{}:{minHeight:"250px"}),te&&oe&&o.adsDesktop)return a()("div",{className:U});return a()("div",{id:xe,className:Object(m.cx)(function(e){return te&&oe||"sponsor"===E&&!ce||te?L:"sponsor"===E&&u?R:"sponsor"===E?D:"pp_morein"===E?F:X[E]?null:ye.isFlexFrame?Object(m.cx)(A,e,I,r()({},N,[S,j].includes(e))):"bottom"===E?Object(m.cx)(e,r()(r()({},M,e===P),I,ye.standardAdHeight)):"top"===E?Object(m.cx)(e,r()({},I,ye.standardAdHeight)):ye.standardAdHeight?Object(m.cx)(e,r()({},I,e===P)):e}(Oe),p)},void 0,a()("div",{id:ke,className:Object(m.cx)(te&&oe?L:"sponsor"===E?B:X[E]?L:z,g)},void 0,a()("p",{},void 0,"sponsor"===E?"Supported by":G)),a()(d.a,{userStyle:_||we,id:E,position:t,onDFPResponse:function(e){ue(e)},onEmpty:function(){ne(!0)},isPrioritized:_e||T,onImpressionViewable:function(){me(!0)},lazyLoad:C}),be&&a()(w.a,{width:360,className:H,activeClassName:W,buttonContent:Y,modalContent:a()(x.a,{adData:V({page:Z.typ,position:t,deviceType:$},ye.debug)})}))}Z.displayName="ResponsiveAd",Z.displayName="ResponsiveAd",Z.defaultProps={wrapperClassName:void 0,slugClassName:void 0,defaultAdSlotStyle:void 0,id:void 0,sequence:void 0,adDidNotDisplay:void 0,sponsorAdFullBleed:void 0,dropzone:{adsDesktop:!1,adsMobile:!1,index:void 0},isPrioritized:!1,lazyLoad:void 0};t.a=Object(_.a)(Z)},d4gE:function(e,t,n){(function(t){e.exports=function(){"use strict";var e,n,i;function a(t,a){if(e)if(n){var o="self.onerror = function() { console.error('An error occurred while parsing the WebWorker bundle. This is most likely due to improper transpilation by Babel; please see https://docs.mapbox.com/mapbox-gl-js/guides/install/#transpiling'); }; var sharedChunk = {}; ("+e+")(sharedChunk); ("+n+")(sharedChunk); self.onerror = null;",r={};e(r),i=a(r),"undefined"!=typeof window&&window&&window.URL&&window.URL.createObjectURL&&(i.workerUrl=window.URL.createObjectURL(new Blob([o],{type:"text/javascript"})))}else n=a;else e=a}return a(0,(function(e){var n="undefined"!=typeof self?self:{},i="2.15.0";let a;const o={API_URL:"https://api.mapbox.com",get API_URL_REGEX(){if(null==a){const e=/^((https?:)?\/\/)?([^\/]+\.)?mapbox\.c(n|om)(\/|\?|$)/i;try{a=null!=t.env.API_URL_REGEX?new RegExp(t.env.API_URL_REGEX):e}catch(t){a=e}}return a},get API_TILEJSON_REGEX(){return/^((https?:)?\/\/)?([^\/]+\.)?mapbox\.c(n|om)(\/v[0-9]*\/.*\.json.*$)/i},get API_SPRITE_REGEX(){return/^((https?:)?\/\/)?([^\/]+\.)?mapbox\.c(n|om)(\/styles\/v[0-9]*\/)(.*\/sprite.*\..*$)/i},get API_FONTS_REGEX(){return/^((https?:)?\/\/)?([^\/]+\.)?mapbox\.c(n|om)(\/fonts\/v[0-9]*\/)(.*\.pbf.*$)/i},get API_STYLE_REGEX(){return/^((https?:)?\/\/)?([^\/]+\.)?mapbox\.c(n|om)(\/styles\/v[0-9]*\/)(.*$)/i},get API_CDN_URL_REGEX(){return/^((https?:)?\/\/)?api\.mapbox\.c(n|om)(\/mapbox-gl-js\/)(.*$)/i},get EVENTS_URL(){if(!o.API_URL)return null;try{const e=new URL(o.API_URL);return"api.mapbox.cn"===e.hostname?"https://events.mapbox.cn/events/v2":"api.mapbox.com"===e.hostname?"https://events.mapbox.com/events/v2":null}catch(e){return null}},SESSION_PATH:"/map-sessions/v1",FEEDBACK_URL:"https://apps.mapbox.com/feedback",TILE_URL_VERSION:"v4",RASTER_URL_PREFIX:"raster/v1",REQUIRE_ACCESS_TOKEN:!0,ACCESS_TOKEN:null,MAX_PARALLEL_IMAGE_REQUESTS:16},r={supported:!1,testSupport:function(e){!c&&l&&(u?d(e):s=e)}};let s,l,c=!1,u=!1;function d(e){const t=e.createTexture();e.bindTexture(e.TEXTURE_2D,t);try{if(e.texImage2D(e.TEXTURE_2D,0,e.RGBA,e.RGBA,e.UNSIGNED_BYTE,l),e.isContextLost())return;r.supported=!0}catch(e){}e.deleteTexture(t),c=!0}n.document&&(l=n.document.createElement("img"),l.onload=function(){s&&d(s),s=null,u=!0},l.onerror=function(){c=!0,s=null},l.src="data:image/webp;base64,UklGRh4AAABXRUJQVlA4TBEAAAAvAQAAAAfQ//73v/+BiOh/AAA=");const p="01";function f(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var m=h;function h(e,t,n,i){this.cx=3*e,this.bx=3*(n-e)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*t,this.by=3*(i-t)-this.cy,this.ay=1-this.cy-this.by,this.p1x=e,this.p1y=t,this.p2x=n,this.p2y=i}h.prototype={sampleCurveX:function(e){return((this.ax*e+this.bx)*e+this.cx)*e},sampleCurveY:function(e){return((this.ay*e+this.by)*e+this.cy)*e},sampleCurveDerivativeX:function(e){return(3*this.ax*e+2*this.bx)*e+this.cx},solveCurveX:function(e,t){if(void 0===t&&(t=1e-6),e<0)return 0;if(e>1)return 1;for(var n=e,i=0;i<8;i++){var a=this.sampleCurveX(n)-e;if(Math.abs(a)<t)return n;var o=this.sampleCurveDerivativeX(n);if(Math.abs(o)<1e-6)break;n-=a/o}var r=0,s=1;for(n=e,i=0;i<20&&(a=this.sampleCurveX(n),!(Math.abs(a-e)<t));i++)e>a?r=n:s=n,n=.5*(s-r)+r;return n},solve:function(e,t){return this.sampleCurveY(this.solveCurveX(e,t))}};var g=f(m),y=v;function v(e,t){this.x=e,this.y=t}v.prototype={clone:function(){return new v(this.x,this.y)},add:function(e){return this.clone()._add(e)},sub:function(e){return this.clone()._sub(e)},multByPoint:function(e){return this.clone()._multByPoint(e)},divByPoint:function(e){return this.clone()._divByPoint(e)},mult:function(e){return this.clone()._mult(e)},div:function(e){return this.clone()._div(e)},rotate:function(e){return this.clone()._rotate(e)},rotateAround:function(e,t){return this.clone()._rotateAround(e,t)},matMult:function(e){return this.clone()._matMult(e)},unit:function(){return this.clone()._unit()},perp:function(){return this.clone()._perp()},round:function(){return this.clone()._round()},mag:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},equals:function(e){return this.x===e.x&&this.y===e.y},dist:function(e){return Math.sqrt(this.distSqr(e))},distSqr:function(e){var t=e.x-this.x,n=e.y-this.y;return t*t+n*n},angle:function(){return Math.atan2(this.y,this.x)},angleTo:function(e){return Math.atan2(this.y-e.y,this.x-e.x)},angleWith:function(e){return this.angleWithSep(e.x,e.y)},angleWithSep:function(e,t){return Math.atan2(this.x*t-this.y*e,this.x*e+this.y*t)},_matMult:function(e){var t=e[2]*this.x+e[3]*this.y;return this.x=e[0]*this.x+e[1]*this.y,this.y=t,this},_add:function(e){return this.x+=e.x,this.y+=e.y,this},_sub:function(e){return this.x-=e.x,this.y-=e.y,this},_mult:function(e){return this.x*=e,this.y*=e,this},_div:function(e){return this.x/=e,this.y/=e,this},_multByPoint:function(e){return this.x*=e.x,this.y*=e.y,this},_divByPoint:function(e){return this.x/=e.x,this.y/=e.y,this},_unit:function(){return this._div(this.mag()),this},_perp:function(){var e=this.y;return this.y=this.x,this.x=-e,this},_rotate:function(e){var t=Math.cos(e),n=Math.sin(e),i=n*this.x+t*this.y;return this.x=t*this.x-n*this.y,this.y=i,this},_rotateAround:function(e,t){var n=Math.cos(e),i=Math.sin(e),a=t.y+i*(this.x-t.x)+n*(this.y-t.y);return this.x=t.x+n*(this.x-t.x)-i*(this.y-t.y),this.y=a,this},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}},v.convert=function(e){return e instanceof v?e:Array.isArray(e)?new v(e[0],e[1]):e};var b=f(y);const _=Math.PI/180,w=180/Math.PI;function x(e){return e*_}function k(e){return e*w}const O=[[0,0],[1,0],[1,1],[0,1]];function T(e){if(e<=0)return 0;if(e>=1)return 1;const t=e*e,n=t*e;return 4*(e<.5?n:3*(e-t)+n-.75)}function C(e,t,n,i){const a=new g(e,t,n,i);return function(e){return a.solve(e)}}const E=C(.25,.1,.25,1);function S(e,t,n){return Math.min(n,Math.max(t,e))}function P(e,t,n){return(n=S((n-e)/(t-e),0,1))*n*(3-2*n)}function I(e,t,n){const i=n-t,a=((e-t)%i+i)%i+t;return a===t?n:a}function M(e,t,n){if(!e.length)return n(null,[]);let i=e.length;const a=new Array(e.length);let o=null;e.forEach((e,r)=>{t(e,(e,t)=>{e&&(o=e),a[r]=t,0==--i&&n(o,a)})})}function A(e){const t=[];for(const n in e)t.push(e[n]);return t}function j(e,...t){for(const n of t)for(const t in n)e[t]=n[t];return e}let N=1;function L(){return N++}function D(){return function e(t){return t?(t^Math.random()*(16>>t/4)).toString(16):([1e7]+-[1e3]+-4e3+-8e3+-1e11).replace(/[018]/g,e)}()}function R(e){return e<=1?1:Math.pow(2,Math.ceil(Math.log(e)/Math.LN2))}function B(e){return!!e&&/^[0-9a-f]{8}-[0-9a-f]{4}-[4][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}$/i.test(e)}function z(e,t){e.forEach(e=>{t[e]&&(t[e]=t[e].bind(t))})}function F(e,t){return-1!==e.indexOf(t,e.length-t.length)}function U(e,t,n){const i={};for(const a in e)i[a]=t.call(n||this,e[a],a,e);return i}function H(e,t,n){const i={};for(const a in e)t.call(n||this,e[a],a,e)&&(i[a]=e[a]);return i}function W(e){return Array.isArray(e)?e.map(W):"object"==typeof e&&e?U(e,W):e}const q={};function V(e){q[e]||("undefined"!=typeof console&&console.warn(e),q[e]=!0)}function G(e,t,n){return(n.y-e.y)*(t.x-e.x)>(t.y-e.y)*(n.x-e.x)}function Y(e){let t=0;for(let n,i,a=0,o=e.length,r=o-1;a<o;r=a++)n=e[a],i=e[r],t+=(i.x-n.x)*(n.y+i.y);return t}function X(){return"undefined"!=typeof WorkerGlobalScope&&"undefined"!=typeof self&&self instanceof WorkerGlobalScope}function Z(e){const t={};if(e.replace(/(?:^|(?:\s*\,\s*))([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)(?:\=(?:([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)|(?:\"((?:[^"\\]|\\.)*)\")))?/g,(e,n,i,a)=>{const o=i||a;return t[n]=!o||o.toLowerCase(),""}),t["max-age"]){const e=parseInt(t["max-age"],10);isNaN(e)?delete t["max-age"]:t["max-age"]=e}return t}let J=null;function K(e){if(null==J){const t=e.navigator?e.navigator.userAgent:null;J=!!e.safari||!(!t||!(/\b(iPad|iPhone|iPod)\b/.test(t)||t.match("Safari")&&!t.match("Chrome")))}return J}function $(e){try{const t=n[e];return t.setItem("_mapbox_test_",1),t.removeItem("_mapbox_test_"),!0}catch(e){return!1}}function Q(e,t){return[e[4*t],e[4*t+1],e[4*t+2],e[4*t+3]]}const ee="mapbox-tiles";let te,ne,ie=500,ae=50;function oe(){try{return n.caches}catch(e){}}function re(){oe()&&!te&&(te=n.caches.open(ee))}function se(e){const t=e.indexOf("?");if(t<0)return e;const n=function(e){const t=e.indexOf("?");return t>0?e.slice(t+1).split("&"):[]}(e).filter(e=>{const t=e.split("=");return"language"===t[0]||"worldview"===t[0]});return n.length?`${e.slice(0,t)}?${n.join("&")}`:e.slice(0,t)}let le=1/0;const ce={Unknown:"Unknown",Style:"Style",Source:"Source",Tile:"Tile",Glyphs:"Glyphs",SpriteImage:"SpriteImage",SpriteJSON:"SpriteJSON",Image:"Image"};"function"==typeof Object.freeze&&Object.freeze(ce);class ue extends Error{constructor(e,t,n){401===t&&we(n)&&(e+=": you may have provided an invalid Mapbox access token. See https://docs.mapbox.com/api/overview/#access-tokens-and-token-scopes"),super(e),this.status=t,this.url=n}toString(){return`${this.name}: ${this.message} (${this.status}): ${this.url}`}}const de=X()?()=>self.worker&&self.worker.referrer:()=>("blob:"===n.location.protocol?n.parent:n).location.href,pe=function(e,t){if(!(/^file:/.test(i=e.url)||/^file:/.test(de())&&!/^\w+:/.test(i))){if(n.fetch&&n.Request&&n.AbortController&&n.Request.prototype.hasOwnProperty("signal"))return function(e,t){const i=new n.AbortController,a=new n.Request(e.url,{method:e.method||"GET",body:e.body,credentials:e.credentials,headers:e.headers,referrer:de(),referrerPolicy:e.referrerPolicy,signal:i.signal});let o=!1,r=!1;const s=(l=a.url).indexOf("sku=")>0&&we(l);var l;"json"===e.type&&a.headers.set("Accept","application/json");const c=(i,o,l)=>{if(r)return;if(i&&"SecurityError"!==i.message&&V(i.toString()),o&&l)return u(o);const c=Date.now();n.fetch(a).then(n=>{if(n.ok){const e=s?n.clone():null;return u(n,e,c)}return t(new ue(n.statusText,n.status,e.url))}).catch(n=>{"AbortError"!==n.name&&t(new Error(`${n.message} ${e.url}`))})},u=(i,s,l)=>{("arrayBuffer"===e.type?i.arrayBuffer():"json"===e.type?i.json():i.text()).then(e=>{r||(s&&l&&function(e,t,i){if(re(),!te)return;const a={status:t.status,statusText:t.statusText,headers:new n.Headers};t.headers.forEach((e,t)=>a.headers.set(t,e));const o=Z(t.headers.get("Cache-Control")||"");if(o["no-store"])return;o["max-age"]&&a.headers.set("Expires",new Date(i+1e3*o["max-age"]).toUTCString());const r=a.headers.get("Expires");r&&(new Date(r).getTime()-i<42e4||function(e,t){if(void 0===ne)try{new Response(new ReadableStream),ne=!0}catch(e){ne=!1}ne?t(e.body):e.blob().then(t)}(t,t=>{const i=new n.Response(t,a);re(),te&&te.then(t=>t.put(se(e.url),i)).catch(e=>V(e.message))}))}(a,s,l),o=!0,t(null,e,i.headers.get("Cache-Control"),i.headers.get("Expires")))}).catch(e=>{r||t(new Error(e.message))})};return s?function(e,t){if(re(),!te)return t(null);const n=se(e.url);te.then(e=>{e.match(n).then(i=>{const a=function(e){if(!e)return!1;const t=new Date(e.headers.get("Expires")||0),n=Z(e.headers.get("Cache-Control")||"");return t>Date.now()&&!n["no-cache"]}(i);e.delete(n),a&&e.put(n,i.clone()),t(null,i,a)}).catch(t)}).catch(t)}(a,c):c(null,null),{cancel:()=>{r=!0,o||i.abort()}}}(e,t);if(X()&&self.worker&&self.worker.actor)return self.worker.actor.send("getResource",e,t,void 0,!0)}var i;return function(e,t){const i=new n.XMLHttpRequest;i.open(e.method||"GET",e.url,!0),"arrayBuffer"===e.type&&(i.responseType="arraybuffer");for(const t in e.headers)i.setRequestHeader(t,e.headers[t]);return"json"===e.type&&(i.responseType="text",i.setRequestHeader("Accept","application/json")),i.withCredentials="include"===e.credentials,i.onerror=()=>{t(new Error(i.statusText))},i.onload=()=>{if((i.status>=200&&i.status<300||0===i.status)&&null!==i.response){let n=i.response;if("json"===e.type)try{n=JSON.parse(i.response)}catch(e){return t(e)}t(null,n,i.getResponseHeader("Cache-Control"),i.getResponseHeader("Expires"))}else t(new ue(i.statusText,i.status,e.url))},i.send(e.body),{cancel:()=>i.abort()}}(e,t)},fe=function(e,t){return pe(j(e,{type:"arrayBuffer"}),t)};function me(e){const t=n.document.createElement("a");return t.href=e,t.protocol===n.document.location.protocol&&t.host===n.document.location.host}const he="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAC0lEQVQYV2NgAAIAAAUAAarVyFEAAAAASUVORK5CYII=";let ge,ye;ge=[],ye=0;const ve=function(e,t){if(r.supported&&(e.headers||(e.headers={}),e.headers.accept="image/webp,*/*"),ye>=o.MAX_PARALLEL_IMAGE_REQUESTS){const n={requestParameters:e,callback:t,cancelled:!1,cancel(){this.cancelled=!0}};return ge.push(n),n}ye++;let i=!1;const a=()=>{if(!i)for(i=!0,ye--;ge.length&&ye<o.MAX_PARALLEL_IMAGE_REQUESTS;){const e=ge.shift(),{requestParameters:t,callback:n,cancelled:i}=e;i||(e.cancel=ve(t,n).cancel)}},s=fe(e,(e,i,o,r)=>{a(),e?t(e):i&&(n.createImageBitmap?function(e,t){const i=new n.Blob([new Uint8Array(e)],{type:"image/png"});n.createImageBitmap(i).then(e=>{t(null,e)}).catch(e=>{t(new Error(`Could not load image because of ${e.message}. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported.`))})}(i,(e,n)=>t(e,n,o,r)):function(e,t){const i=new n.Image,a=n.URL;i.onload=()=>{t(null,i),a.revokeObjectURL(i.src),i.onload=null,n.requestAnimationFrame(()=>{i.src=he})},i.onerror=()=>t(new Error("Could not load image. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."));const o=new n.Blob([new Uint8Array(e)],{type:"image/png"});i.src=e.byteLength?a.createObjectURL(o):he}(i,(e,n)=>t(e,n,o,r)))});return{cancel:()=>{s.cancel(),a()}}},be="NO_ACCESS_TOKEN";function _e(e){return 0===e.indexOf("mapbox:")}function we(e){return o.API_URL_REGEX.test(e)}function xe(e){return o.API_CDN_URL_REGEX.test(e)}function ke(e){return o.API_STYLE_REGEX.test(e)&&!Oe(e)}function Oe(e){return o.API_SPRITE_REGEX.test(e)}const Te=/^(\w+):\/\/([^/?]*)(\/[^?]+)?\??(.+)?/;function Ce(e){const t=e.match(Te);if(!t)throw new Error("Unable to parse URL object");return{protocol:t[1],authority:t[2],path:t[3]||"/",params:t[4]?t[4].split("&"):[]}}function Ee(e){const t=e.params.length?"?"+e.params.join("&"):"";return`${e.protocol}://${e.authority}${e.path}${t}`}const Se="mapbox.eventData";function Pe(e){if(!e)return null;const t=e.split(".");if(!t||3!==t.length)return null;try{return JSON.parse(decodeURIComponent(n.atob(t[1]).split("").map(e=>"%"+("00"+e.charCodeAt(0).toString(16)).slice(-2)).join("")))}catch(e){return null}}class Ie{constructor(e){this.type=e,this.anonId=null,this.eventData={},this.queue=[],this.pendingRequest=null}getStorageKey(e){const t=Pe(o.ACCESS_TOKEN);let i="";return i=t&&t.u?n.btoa(encodeURIComponent(t.u).replace(/%([0-9A-F]{2})/g,(e,t)=>String.fromCharCode(Number("0x"+t)))):o.ACCESS_TOKEN||"",e?`${Se}.${e}:${i}`:`${Se}:${i}`}fetchEventData(){const e=$("localStorage"),t=this.getStorageKey(),i=this.getStorageKey("uuid");if(e)try{const e=n.localStorage.getItem(t);e&&(this.eventData=JSON.parse(e));const a=n.localStorage.getItem(i);a&&(this.anonId=a)}catch(e){V("Unable to read from LocalStorage")}}saveEventData(){const e=$("localStorage"),t=this.getStorageKey(),i=this.getStorageKey("uuid");if(e)try{n.localStorage.setItem(i,this.anonId),Object.keys(this.eventData).length>=1&&n.localStorage.setItem(t,JSON.stringify(this.eventData))}catch(e){V("Unable to write to LocalStorage")}}processRequests(e){}postEvent(e,t,n,i){if(!o.EVENTS_URL)return;const a=Ce(o.EVENTS_URL);a.params.push("access_token="+(i||o.ACCESS_TOKEN||""));const r={event:this.type,created:new Date(e).toISOString()},s=t?j(r,t):r,l={url:Ee(a),headers:{"Content-Type":"text/plain"},body:JSON.stringify([s])};this.pendingRequest=function(e,t){return pe(j(e,{method:"POST"}),t)}(l,e=>{this.pendingRequest=null,n(e),this.saveEventData(),this.processRequests(i)})}queueRequest(e,t){this.queue.push(e),this.processRequests(t)}}const Me=new class extends Ie{constructor(e){super("appUserTurnstile"),this._customAccessToken=e}postTurnstileEvent(e,t){o.EVENTS_URL&&o.ACCESS_TOKEN&&Array.isArray(e)&&e.some(e=>_e(e)||we(e))&&this.queueRequest(Date.now(),t)}processRequests(e){if(this.pendingRequest||0===this.queue.length)return;this.anonId&&this.eventData.lastSuccess&&this.eventData.tokenU||this.fetchEventData();const t=Pe(o.ACCESS_TOKEN),n=t?t.u:o.ACCESS_TOKEN;let a=n!==this.eventData.tokenU;B(this.anonId)||(this.anonId=D(),a=!0);const r=this.queue.shift();if(this.eventData.lastSuccess){const e=new Date(this.eventData.lastSuccess),t=new Date(r),n=(r-this.eventData.lastSuccess)/864e5;a=a||n>=1||n<-1||e.getDate()!==t.getDate()}else a=!0;a?this.postEvent(r,{sdkIdentifier:"mapbox-gl-js",sdkVersion:i,skuId:p,"enabled.telemetry":!1,userId:this.anonId},e=>{e||(this.eventData.lastSuccess=r,this.eventData.tokenU=n)},e):this.processRequests()}},Ae=Me.postTurnstileEvent.bind(Me),je=new class extends Ie{constructor(){super("map.load"),this.success={},this.skuToken=""}postMapLoadEvent(e,t,n,i){this.skuToken=t,this.errorCb=i,o.EVENTS_URL&&(n||o.ACCESS_TOKEN?this.queueRequest({id:e,timestamp:Date.now()},n):this.errorCb(new Error(be)))}processRequests(e){if(this.pendingRequest||0===this.queue.length)return;const{id:t,timestamp:n}=this.queue.shift();t&&this.success[t]||(this.anonId||this.fetchEventData(),B(this.anonId)||(this.anonId=D()),this.postEvent(n,{sdkIdentifier:"mapbox-gl-js",sdkVersion:i,skuId:p,skuToken:this.skuToken,userId:this.anonId},e=>{e?this.errorCb(e):t&&(this.success[t]=!0)},e))}},Ne=je.postMapLoadEvent.bind(je),Le=new class extends Ie{constructor(){super("gljs.performance")}postPerformanceEvent(e,t){o.EVENTS_URL&&(e||o.ACCESS_TOKEN)&&this.queueRequest({timestamp:Date.now(),performanceData:t},e)}processRequests(e){if(this.pendingRequest||0===this.queue.length)return;const{timestamp:t,performanceData:a}=this.queue.shift(),o=function(e){const t=n.performance.getEntriesByType("resource"),a=n.performance.getEntriesByType("mark"),o=function(e){const t={};if(e)for(const n in e)if("other"!==n)for(const i of e[n]){const e=n+"ResolveRangeMin",a=n+"ResolveRangeMax",o=n+"RequestCount",r=n+"RequestCachedCount";t[e]=Math.min(t[e]||1/0,i.startTime),t[a]=Math.max(t[a]||-1/0,i.responseEnd);const s=e=>{void 0===t[e]&&(t[e]=0),++t[e]};void 0!==i.transferSize&&0===i.transferSize&&s(r),s(o)}return t}(function(e,t){const n={};if(e)for(const i of e){const e=t(i);void 0===n[e]&&(n[e]=[]),n[e].push(i)}return n}(t,He)),r=n.devicePixelRatio,s=n.navigator.connection||n.navigator.mozConnection||n.navigator.webkitConnection,l={counters:[],metadata:[],attributes:[]},c=(e,t,n)=>{null!=n&&e.push({name:t,value:n.toString()})};for(const e in o)c(l.counters,e,o[e]);if(e.interactionRange[0]!==1/0&&e.interactionRange[1]!==-1/0&&(c(l.counters,"interactionRangeMin",e.interactionRange[0]),c(l.counters,"interactionRangeMax",e.interactionRange[1])),a)for(const e of Object.keys(Fe)){const t=Fe[e],n=a.find(e=>e.name===t);n&&c(l.counters,t,n.startTime)}return c(l.counters,"visibilityHidden",e.visibilityHidden),c(l.attributes,"style",function(e){if(e)for(const t of e){const e=t.name.split("?")[0];if(ke(e)){const t=e.split("/").slice(-2);if(2===t.length)return`mapbox://styles/${t[0]}/${t[1]}`}}}(t)),c(l.attributes,"terrainEnabled",e.terrainEnabled?"true":"false"),c(l.attributes,"fogEnabled",e.fogEnabled?"true":"false"),c(l.attributes,"projection",e.projection),c(l.attributes,"zoom",e.zoom),c(l.metadata,"devicePixelRatio",r),c(l.metadata,"connectionEffectiveType",s?s.effectiveType:void 0),c(l.metadata,"navigatorUserAgent",n.navigator.userAgent),c(l.metadata,"screenWidth",n.screen.width),c(l.metadata,"screenHeight",n.screen.height),c(l.metadata,"windowWidth",n.innerWidth),c(l.metadata,"windowHeight",n.innerHeight),c(l.metadata,"mapWidth",e.width/r),c(l.metadata,"mapHeight",e.height/r),c(l.metadata,"webglRenderer",e.renderer),c(l.metadata,"webglVendor",e.vendor),c(l.metadata,"sdkVersion",i),c(l.metadata,"sdkIdentifier","mapbox-gl-js"),l}(a);for(const e of o.metadata);for(const e of o.counters);for(const e of o.attributes);this.postEvent(t,o,()=>{},e)}},De=Le.postPerformanceEvent.bind(Le),Re=new class extends Ie{constructor(){super("map.auth"),this.success={},this.skuToken=""}getSession(e,t,n,i){if(!o.API_URL||!o.SESSION_PATH)return;const a=Ce(o.API_URL+o.SESSION_PATH);a.params.push("sku="+(t||"")),a.params.push("access_token="+(i||o.ACCESS_TOKEN||""));const r={url:Ee(a),headers:{"Content-Type":"text/plain"}};this.pendingRequest=function(e,t){return pe(j(e,{method:"GET"}),t)}(r,e=>{this.pendingRequest=null,n(e),this.saveEventData(),this.processRequests(i)})}getSessionAPI(e,t,n,i){this.skuToken=t,this.errorCb=i,o.SESSION_PATH&&o.API_URL&&(n||o.ACCESS_TOKEN?this.queueRequest({id:e,timestamp:Date.now()},n):this.errorCb(new Error(be)))}processRequests(e){if(this.pendingRequest||0===this.queue.length)return;const{id:t,timestamp:n}=this.queue.shift();t&&this.success[t]||this.getSession(n,this.skuToken,e=>{e?this.errorCb(e):t&&(this.success[t]=!0)},e)}},Be=Re.getSessionAPI.bind(Re),ze=new Set,Fe={create:"create",load:"load",fullLoad:"fullLoad"},Ue={mark(e){n.performance.mark(e)},measure(e,t,i){n.performance.measure(e,t,i)}};function He(e){const t=e.name.split("?")[0];return xe(t)&&t.includes("mapbox-gl.js")?"javascript":xe(t)&&t.includes("mapbox-gl.css")?"css":function(e){return o.API_FONTS_REGEX.test(e)}(t)?"fontRange":Oe(t)?"sprite":ke(t)?"style":function(e){return o.API_TILEJSON_REGEX.test(e)}(t)?"tilejson":"other"}const We=n.performance;function qe(e){const t=e?e.url.toString():void 0;return We.getEntriesByName(t)}let Ve,Ge,Ye,Xe;const Ze={now:()=>void 0!==Ye?Ye:n.performance.now(),setNow(e){Ye=e},restoreNow(){Ye=void 0},frame(e){const t=n.requestAnimationFrame(e);return{cancel:()=>n.cancelAnimationFrame(t)}},getImageData(e,t=0){const{width:i,height:a}=e;Xe||(Xe=n.document.createElement("canvas"));const o=Xe.getContext("2d",{willReadFrequently:!0});if(!o)throw new Error("failed to create canvas 2d context");return(i>Xe.width||a>Xe.height)&&(Xe.width=i,Xe.height=a),o.clearRect(-t,-t,i+2*t,a+2*t),o.drawImage(e,0,0,i,a),o.getImageData(-t,-t,i+2*t,a+2*t)},resolveURL:e=>(Ve||(Ve=n.document.createElement("a")),Ve.href=e,Ve.href),get devicePixelRatio(){return n.devicePixelRatio},get prefersReducedMotion(){return!!n.matchMedia&&(null==Ge&&(Ge=n.matchMedia("(prefers-reduced-motion: reduce)")),Ge.matches)}};function Je(e,t,n){n[e]&&-1!==n[e].indexOf(t)||(n[e]=n[e]||[],n[e].push(t))}function Ke(e,t,n){if(n&&n[e]){const i=n[e].indexOf(t);-1!==i&&n[e].splice(i,1)}}class $e{constructor(e,t={}){j(this,t),this.type=e}}class Qe extends $e{constructor(e,t={}){super("error",j({error:e},t))}}class et{on(e,t){return this._listeners=this._listeners||{},Je(e,t,this._listeners),this}off(e,t){return Ke(e,t,this._listeners),Ke(e,t,this._oneTimeListeners),this}once(e,t){return t?(this._oneTimeListeners=this._oneTimeListeners||{},Je(e,t,this._oneTimeListeners),this):new Promise(t=>this.once(e,t))}fire(e,t){"string"==typeof e&&(e=new $e(e,t||{}));const n=e.type;if(this.listens(n)){e.target=this;const t=this._listeners&&this._listeners[n]?this._listeners[n].slice():[];for(const n of t)n.call(this,e);const i=this._oneTimeListeners&&this._oneTimeListeners[n]?this._oneTimeListeners[n].slice():[];for(const t of i)Ke(n,t,this._oneTimeListeners),t.call(this,e);const a=this._eventedParent;a&&(j(e,"function"==typeof this._eventedParentData?this._eventedParentData():this._eventedParentData),a.fire(e))}else e instanceof Qe&&console.error(e.error);return this}listens(e){return!!(this._listeners&&this._listeners[e]&&this._listeners[e].length>0||this._oneTimeListeners&&this._oneTimeListeners[e]&&this._oneTimeListeners[e].length>0||this._eventedParent&&this._eventedParent.listens(e))}setEventedParent(e,t){return this._eventedParent=e,this._eventedParentData=t,this}}var tt=JSON.parse('{"$version":8,"$root":{"version":{"required":true,"type":"enum","values":[8]},"name":{"type":"string"},"metadata":{"type":"*"},"center":{"type":"array","value":"number"},"zoom":{"type":"number"},"bearing":{"type":"number","default":0,"period":360,"units":"degrees"},"pitch":{"type":"number","default":0,"units":"degrees"},"light":{"type":"light"},"terrain":{"type":"terrain"},"fog":{"type":"fog"},"sources":{"required":true,"type":"sources"},"sprite":{"type":"string"},"glyphs":{"type":"string"},"transition":{"type":"transition"},"projection":{"type":"projection"},"layers":{"required":true,"type":"array","value":"layer"}},"sources":{"*":{"type":"source"}},"source":["source_vector","source_raster","source_raster_dem","source_geojson","source_video","source_image"],"source_vector":{"type":{"required":true,"type":"enum","values":{"vector":{}}},"url":{"type":"string"},"tiles":{"type":"array","value":"string"},"bounds":{"type":"array","value":"number","length":4,"default":[-180,-85.051129,180,85.051129]},"scheme":{"type":"enum","values":{"xyz":{},"tms":{}},"default":"xyz"},"minzoom":{"type":"number","default":0},"maxzoom":{"type":"number","default":22},"attribution":{"type":"string"},"promoteId":{"type":"promoteId"},"volatile":{"type":"boolean","default":false},"*":{"type":"*"}},"source_raster":{"type":{"required":true,"type":"enum","values":{"raster":{}}},"url":{"type":"string"},"tiles":{"type":"array","value":"string"},"bounds":{"type":"array","value":"number","length":4,"default":[-180,-85.051129,180,85.051129]},"minzoom":{"type":"number","default":0},"maxzoom":{"type":"number","default":22},"tileSize":{"type":"number","default":512,"units":"pixels"},"scheme":{"type":"enum","values":{"xyz":{},"tms":{}},"default":"xyz"},"attribution":{"type":"string"},"volatile":{"type":"boolean","default":false},"*":{"type":"*"}},"source_raster_dem":{"type":{"required":true,"type":"enum","values":{"raster-dem":{}}},"url":{"type":"string"},"tiles":{"type":"array","value":"string"},"bounds":{"type":"array","value":"number","length":4,"default":[-180,-85.051129,180,85.051129]},"minzoom":{"type":"number","default":0},"maxzoom":{"type":"number","default":22},"tileSize":{"type":"number","default":512,"units":"pixels"},"attribution":{"type":"string"},"encoding":{"type":"enum","values":{"terrarium":{},"mapbox":{}},"default":"mapbox"},"volatile":{"type":"boolean","default":false},"*":{"type":"*"}},"source_geojson":{"type":{"required":true,"type":"enum","values":{"geojson":{}}},"data":{"type":"*"},"maxzoom":{"type":"number","default":18},"attribution":{"type":"string"},"buffer":{"type":"number","default":128,"maximum":512,"minimum":0},"filter":{"type":"*"},"tolerance":{"type":"number","default":0.375},"cluster":{"type":"boolean","default":false},"clusterRadius":{"type":"number","default":50,"minimum":0},"clusterMaxZoom":{"type":"number"},"clusterMinPoints":{"type":"number"},"clusterProperties":{"type":"*"},"lineMetrics":{"type":"boolean","default":false},"generateId":{"type":"boolean","default":false},"promoteId":{"type":"promoteId"}},"source_video":{"type":{"required":true,"type":"enum","values":{"video":{}}},"urls":{"required":true,"type":"array","value":"string"},"coordinates":{"required":true,"type":"array","length":4,"value":{"type":"array","length":2,"value":"number"}}},"source_image":{"type":{"required":true,"type":"enum","values":{"image":{}}},"url":{"required":true,"type":"string"},"coordinates":{"required":true,"type":"array","length":4,"value":{"type":"array","length":2,"value":"number"}}},"layer":{"id":{"type":"string","required":true},"type":{"type":"enum","values":{"fill":{},"line":{},"symbol":{},"circle":{},"heatmap":{},"fill-extrusion":{},"raster":{},"hillshade":{},"background":{},"sky":{}},"required":true},"metadata":{"type":"*"},"source":{"type":"string"},"source-layer":{"type":"string"},"minzoom":{"type":"number","minimum":0,"maximum":24},"maxzoom":{"type":"number","minimum":0,"maximum":24},"filter":{"type":"filter"},"layout":{"type":"layout"},"paint":{"type":"paint"}},"layout":["layout_fill","layout_line","layout_circle","layout_heatmap","layout_fill-extrusion","layout_symbol","layout_raster","layout_hillshade","layout_background","layout_sky"],"layout_background":{"visibility":{"type":"enum","values":{"visible":{},"none":{}},"default":"visible","property-type":"constant"}},"layout_sky":{"visibility":{"type":"enum","values":{"visible":{},"none":{}},"default":"visible","property-type":"constant"}},"layout_fill":{"fill-sort-key":{"type":"number","expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"visibility":{"type":"enum","values":{"visible":{},"none":{}},"default":"visible","property-type":"constant"}},"layout_circle":{"circle-sort-key":{"type":"number","expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"visibility":{"type":"enum","values":{"visible":{},"none":{}},"default":"visible","property-type":"constant"}},"layout_heatmap":{"visibility":{"type":"enum","values":{"visible":{},"none":{}},"default":"visible","property-type":"constant"}},"layout_fill-extrusion":{"visibility":{"type":"enum","values":{"visible":{},"none":{}},"default":"visible","property-type":"constant"},"fill-extrusion-edge-radius":{"type":"number","private":true,"default":0,"minimum":0,"maximum":1,"property-type":"constant"}},"layout_line":{"line-cap":{"type":"enum","values":{"butt":{},"round":{},"square":{}},"default":"butt","expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"line-join":{"type":"enum","values":{"bevel":{},"round":{},"miter":{}},"default":"miter","expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"line-miter-limit":{"type":"number","default":2,"requires":[{"line-join":"miter"}],"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"line-round-limit":{"type":"number","default":1.05,"requires":[{"line-join":"round"}],"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"line-sort-key":{"type":"number","expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"visibility":{"type":"enum","values":{"visible":{},"none":{}},"default":"visible","property-type":"constant"}},"layout_symbol":{"symbol-placement":{"type":"enum","values":{"point":{},"line":{},"line-center":{}},"default":"point","expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"symbol-spacing":{"type":"number","default":250,"minimum":1,"units":"pixels","requires":[{"symbol-placement":"line"}],"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"symbol-avoid-edges":{"type":"boolean","default":false,"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"symbol-sort-key":{"type":"number","expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"symbol-z-order":{"type":"enum","values":{"auto":{},"viewport-y":{},"source":{}},"default":"auto","expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"icon-allow-overlap":{"type":"boolean","default":false,"requires":["icon-image"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"icon-ignore-placement":{"type":"boolean","default":false,"requires":["icon-image"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"icon-optional":{"type":"boolean","default":false,"requires":["icon-image","text-field"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"icon-rotation-alignment":{"type":"enum","values":{"map":{},"viewport":{},"auto":{}},"default":"auto","requires":["icon-image"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"icon-size":{"type":"number","default":1,"minimum":0,"units":"factor of the original icon size","requires":["icon-image"],"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"icon-text-fit":{"type":"enum","values":{"none":{},"width":{},"height":{},"both":{}},"default":"none","requires":["icon-image","text-field"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"icon-text-fit-padding":{"type":"array","value":"number","length":4,"default":[0,0,0,0],"units":"pixels","requires":["icon-image","text-field",{"icon-text-fit":["both","width","height"]}],"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"icon-image":{"type":"resolvedImage","tokens":true,"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"icon-rotate":{"type":"number","default":0,"period":360,"units":"degrees","requires":["icon-image"],"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"icon-padding":{"type":"number","default":2,"minimum":0,"units":"pixels","requires":["icon-image"],"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"icon-keep-upright":{"type":"boolean","default":false,"requires":["icon-image",{"icon-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"icon-offset":{"type":"array","value":"number","length":2,"default":[0,0],"requires":["icon-image"],"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"icon-anchor":{"type":"enum","values":{"center":{},"left":{},"right":{},"top":{},"bottom":{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},"default":"center","requires":["icon-image"],"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"icon-pitch-alignment":{"type":"enum","values":{"map":{},"viewport":{},"auto":{}},"default":"auto","requires":["icon-image"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"text-pitch-alignment":{"type":"enum","values":{"map":{},"viewport":{},"auto":{}},"default":"auto","requires":["text-field"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"text-rotation-alignment":{"type":"enum","values":{"map":{},"viewport":{},"auto":{}},"default":"auto","requires":["text-field"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"text-field":{"type":"formatted","default":"","tokens":true,"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-font":{"type":"array","value":"string","default":["Open Sans Regular","Arial Unicode MS Regular"],"requires":["text-field"],"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-size":{"type":"number","default":16,"minimum":0,"units":"pixels","requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-max-width":{"type":"number","default":10,"minimum":0,"units":"ems","requires":["text-field",{"symbol-placement":["point"]}],"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-line-height":{"type":"number","default":1.2,"units":"ems","requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-letter-spacing":{"type":"number","default":0,"units":"ems","requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-justify":{"type":"enum","values":{"auto":{},"left":{},"center":{},"right":{}},"default":"center","requires":["text-field"],"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-radial-offset":{"type":"number","units":"ems","default":0,"requires":["text-field"],"property-type":"data-driven","expression":{"interpolated":true,"parameters":["zoom","feature"]}},"text-variable-anchor":{"type":"array","value":"enum","values":{"center":{},"left":{},"right":{},"top":{},"bottom":{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},"requires":["text-field",{"symbol-placement":["point"]}],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"text-anchor":{"type":"enum","values":{"center":{},"left":{},"right":{},"top":{},"bottom":{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},"default":"center","requires":["text-field",{"!":"text-variable-anchor"}],"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-max-angle":{"type":"number","default":45,"units":"degrees","requires":["text-field",{"symbol-placement":["line","line-center"]}],"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"text-writing-mode":{"type":"array","value":"enum","values":{"horizontal":{},"vertical":{}},"requires":["text-field"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"text-rotate":{"type":"number","default":0,"period":360,"units":"degrees","requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-padding":{"type":"number","default":2,"minimum":0,"units":"pixels","requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"text-keep-upright":{"type":"boolean","default":true,"requires":["text-field",{"text-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"text-transform":{"type":"enum","values":{"none":{},"uppercase":{},"lowercase":{}},"default":"none","requires":["text-field"],"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-offset":{"type":"array","value":"number","units":"ems","length":2,"default":[0,0],"requires":["text-field",{"!":"text-radial-offset"}],"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-allow-overlap":{"type":"boolean","default":false,"requires":["text-field"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"text-ignore-placement":{"type":"boolean","default":false,"requires":["text-field"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"text-optional":{"type":"boolean","default":false,"requires":["text-field","icon-image"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"visibility":{"type":"enum","values":{"visible":{},"none":{}},"default":"visible","property-type":"constant"}},"layout_raster":{"visibility":{"type":"enum","values":{"visible":{},"none":{}},"default":"visible","property-type":"constant"}},"layout_hillshade":{"visibility":{"type":"enum","values":{"visible":{},"none":{}},"default":"visible","property-type":"constant"}},"filter":{"type":"array","value":"*"},"filter_symbol":{"type":"boolean","default":false,"transition":false,"property-type":"data-driven","expression":{"interpolated":false,"parameters":["zoom","feature","pitch","distance-from-center"]}},"filter_fill":{"type":"boolean","default":false,"transition":false,"property-type":"data-driven","expression":{"interpolated":false,"parameters":["zoom","feature"]}},"filter_line":{"type":"boolean","default":false,"transition":false,"property-type":"data-driven","expression":{"interpolated":false,"parameters":["zoom","feature"]}},"filter_circle":{"type":"boolean","default":false,"transition":false,"property-type":"data-driven","expression":{"interpolated":false,"parameters":["zoom","feature"]}},"filter_fill-extrusion":{"type":"boolean","default":false,"transition":false,"property-type":"data-driven","expression":{"interpolated":false,"parameters":["zoom","feature"]}},"filter_heatmap":{"type":"boolean","default":false,"transition":false,"property-type":"data-driven","expression":{"interpolated":false,"parameters":["zoom","feature"]}},"filter_operator":{"type":"enum","values":{"==":{},"!=":{},">":{},">=":{},"<":{},"<=":{},"in":{},"!in":{},"all":{},"any":{},"none":{},"has":{},"!has":{},"within":{}}},"geometry_type":{"type":"enum","values":{"Point":{},"LineString":{},"Polygon":{}}},"function":{"expression":{"type":"expression"},"stops":{"type":"array","value":"function_stop"},"base":{"type":"number","default":1,"minimum":0},"property":{"type":"string","default":"$zoom"},"type":{"type":"enum","values":{"identity":{},"exponential":{},"interval":{},"categorical":{}},"default":"exponential"},"colorSpace":{"type":"enum","values":{"rgb":{},"lab":{},"hcl":{}},"default":"rgb"},"default":{"type":"*","required":false}},"function_stop":{"type":"array","minimum":0,"maximum":24,"value":["number","color"],"length":2},"expression":{"type":"array","value":"*","minimum":1},"fog":{"range":{"type":"array","default":[0.5,10],"minimum":-20,"maximum":20,"length":2,"value":"number","property-type":"data-constant","transition":true,"expression":{"interpolated":true,"parameters":["zoom"]}},"color":{"type":"color","property-type":"data-constant","default":"#ffffff","expression":{"interpolated":true,"parameters":["zoom"]},"transition":true},"high-color":{"type":"color","property-type":"data-constant","default":"#245cdf","expression":{"interpolated":true,"parameters":["zoom"]},"transition":true},"space-color":{"type":"color","property-type":"data-constant","default":["interpolate",["linear"],["zoom"],4,"#010b19",7,"#367ab9"],"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true},"horizon-blend":{"type":"number","property-type":"data-constant","default":["interpolate",["linear"],["zoom"],4,0.2,7,0.1],"minimum":0,"maximum":1,"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true},"star-intensity":{"type":"number","property-type":"data-constant","default":["interpolate",["linear"],["zoom"],5,0.35,6,0],"minimum":0,"maximum":1,"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true}},"light":{"anchor":{"type":"enum","default":"viewport","values":{"map":{},"viewport":{}},"property-type":"data-constant","transition":false,"expression":{"interpolated":false,"parameters":["zoom"]}},"position":{"type":"array","default":[1.15,210,30],"length":3,"value":"number","property-type":"data-constant","transition":true,"expression":{"interpolated":true,"parameters":["zoom"]}},"color":{"type":"color","property-type":"data-constant","default":"#ffffff","expression":{"interpolated":true,"parameters":["zoom"]},"transition":true},"intensity":{"type":"number","property-type":"data-constant","default":0.5,"minimum":0,"maximum":1,"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true}},"projection":{"name":{"type":"enum","values":{"albers":{},"equalEarth":{},"equirectangular":{},"lambertConformalConic":{},"mercator":{},"naturalEarth":{},"winkelTripel":{},"globe":{}},"default":"mercator","required":true},"center":{"type":"array","length":2,"value":"number","property-type":"data-constant","minimum":[-180,-90],"maximum":[180,90],"transition":false,"requires":[{"name":["albers","lambertConformalConic"]}]},"parallels":{"type":"array","length":2,"value":"number","property-type":"data-constant","minimum":[-90,-90],"maximum":[90,90],"transition":false,"requires":[{"name":["albers","lambertConformalConic"]}]}},"terrain":{"source":{"type":"string","required":true},"exaggeration":{"type":"number","property-type":"data-constant","default":1,"minimum":0,"maximum":1000,"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true,"requires":["source"]}},"paint":["paint_fill","paint_line","paint_circle","paint_heatmap","paint_fill-extrusion","paint_symbol","paint_raster","paint_hillshade","paint_background","paint_sky"],"paint_fill":{"fill-antialias":{"type":"boolean","default":true,"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"fill-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-color":{"type":"color","default":"#000000","transition":true,"requires":[{"!":"fill-pattern"}],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-outline-color":{"type":"color","transition":true,"requires":[{"!":"fill-pattern"},{"fill-antialias":true}],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-translate":{"type":"array","value":"number","length":2,"default":[0,0],"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"fill-translate-anchor":{"type":"enum","values":{"map":{},"viewport":{}},"default":"map","requires":["fill-translate"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"fill-pattern":{"type":"resolvedImage","transition":false,"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"}},"paint_fill-extrusion":{"fill-extrusion-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"fill-extrusion-color":{"type":"color","default":"#000000","transition":true,"requires":[{"!":"fill-extrusion-pattern"}],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-translate":{"type":"array","value":"number","length":2,"default":[0,0],"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"fill-extrusion-translate-anchor":{"type":"enum","values":{"map":{},"viewport":{}},"default":"map","requires":["fill-extrusion-translate"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"fill-extrusion-pattern":{"type":"resolvedImage","transition":false,"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"fill-extrusion-height":{"type":"number","default":0,"minimum":0,"units":"meters","transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-base":{"type":"number","default":0,"minimum":0,"units":"meters","transition":true,"requires":["fill-extrusion-height"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-vertical-gradient":{"type":"boolean","default":true,"transition":false,"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"fill-extrusion-ambient-occlusion-intensity":{"property-type":"data-constant","type":"number","private":true,"default":0,"minimum":0,"maximum":1,"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true},"fill-extrusion-ambient-occlusion-radius":{"property-type":"data-constant","type":"number","private":true,"default":3,"minimum":0,"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true,"requires":["fill-extrusion-edge-radius"]},"fill-extrusion-rounded-roof":{"type":"boolean","default":true,"requires":["fill-extrusion-edge-radius"],"transition":false,"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"}},"paint_line":{"line-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-color":{"type":"color","default":"#000000","transition":true,"requires":[{"!":"line-pattern"}],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-translate":{"type":"array","value":"number","length":2,"default":[0,0],"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"line-translate-anchor":{"type":"enum","values":{"map":{},"viewport":{}},"default":"map","requires":["line-translate"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"line-width":{"type":"number","default":1,"minimum":0,"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-gap-width":{"type":"number","default":0,"minimum":0,"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-offset":{"type":"number","default":0,"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-blur":{"type":"number","default":0,"minimum":0,"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-dasharray":{"type":"array","value":"number","minimum":0,"transition":false,"units":"line widths","requires":[{"!":"line-pattern"}],"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"line-pattern":{"type":"resolvedImage","transition":false,"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"line-gradient":{"type":"color","transition":false,"requires":[{"!":"line-pattern"},{"source":"geojson","has":{"lineMetrics":true}}],"expression":{"interpolated":true,"parameters":["line-progress"]},"property-type":"color-ramp"},"line-trim-offset":{"type":"array","value":"number","length":2,"default":[0,0],"minimum":[0,0],"maximum":[1,1],"transition":false,"requires":[{"source":"geojson","has":{"lineMetrics":true}}],"property-type":"constant"}},"paint_circle":{"circle-radius":{"type":"number","default":5,"minimum":0,"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-color":{"type":"color","default":"#000000","transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-blur":{"type":"number","default":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-translate":{"type":"array","value":"number","length":2,"default":[0,0],"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"circle-translate-anchor":{"type":"enum","values":{"map":{},"viewport":{}},"default":"map","requires":["circle-translate"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"circle-pitch-scale":{"type":"enum","values":{"map":{},"viewport":{}},"default":"map","expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"circle-pitch-alignment":{"type":"enum","values":{"map":{},"viewport":{}},"default":"viewport","expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"circle-stroke-width":{"type":"number","default":0,"minimum":0,"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-color":{"type":"color","default":"#000000","transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"}},"paint_heatmap":{"heatmap-radius":{"type":"number","default":30,"minimum":1,"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-weight":{"type":"number","default":1,"minimum":0,"transition":false,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-intensity":{"type":"number","default":1,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"heatmap-color":{"type":"color","default":["interpolate",["linear"],["heatmap-density"],0,"rgba(0, 0, 255, 0)",0.1,"royalblue",0.3,"cyan",0.5,"lime",0.7,"yellow",1,"red"],"transition":false,"expression":{"interpolated":true,"parameters":["heatmap-density"]},"property-type":"color-ramp"},"heatmap-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"}},"paint_symbol":{"icon-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"requires":["icon-image"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-color":{"type":"color","default":"#000000","transition":true,"requires":["icon-image"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-color":{"type":"color","default":"rgba(0, 0, 0, 0)","transition":true,"requires":["icon-image"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-width":{"type":"number","default":0,"minimum":0,"transition":true,"units":"pixels","requires":["icon-image"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-blur":{"type":"number","default":0,"minimum":0,"transition":true,"units":"pixels","requires":["icon-image"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-translate":{"type":"array","value":"number","length":2,"default":[0,0],"transition":true,"units":"pixels","requires":["icon-image"],"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"icon-translate-anchor":{"type":"enum","values":{"map":{},"viewport":{}},"default":"map","requires":["icon-image","icon-translate"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"text-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-color":{"type":"color","default":"#000000","transition":true,"overridable":true,"requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-color":{"type":"color","default":"rgba(0, 0, 0, 0)","transition":true,"requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-width":{"type":"number","default":0,"minimum":0,"transition":true,"units":"pixels","requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-blur":{"type":"number","default":0,"minimum":0,"transition":true,"units":"pixels","requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-translate":{"type":"array","value":"number","length":2,"default":[0,0],"transition":true,"units":"pixels","requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"text-translate-anchor":{"type":"enum","values":{"map":{},"viewport":{}},"default":"map","requires":["text-field","text-translate"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"}},"paint_raster":{"raster-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"raster-hue-rotate":{"type":"number","default":0,"period":360,"transition":true,"units":"degrees","expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"raster-brightness-min":{"type":"number","default":0,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"raster-brightness-max":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"raster-saturation":{"type":"number","default":0,"minimum":-1,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"raster-contrast":{"type":"number","default":0,"minimum":-1,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"raster-resampling":{"type":"enum","values":{"linear":{},"nearest":{}},"default":"linear","expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"raster-fade-duration":{"type":"number","default":300,"minimum":0,"transition":false,"units":"milliseconds","expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"}},"paint_hillshade":{"hillshade-illumination-direction":{"type":"number","default":335,"minimum":0,"maximum":359,"transition":false,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"hillshade-illumination-anchor":{"type":"enum","values":{"map":{},"viewport":{}},"default":"viewport","expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"hillshade-exaggeration":{"type":"number","default":0.5,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"hillshade-shadow-color":{"type":"color","default":"#000000","transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"hillshade-highlight-color":{"type":"color","default":"#FFFFFF","transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"hillshade-accent-color":{"type":"color","default":"#000000","transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"}},"paint_background":{"background-color":{"type":"color","default":"#000000","transition":true,"requires":[{"!":"background-pattern"}],"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"background-pattern":{"type":"resolvedImage","transition":false,"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"background-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"}},"paint_sky":{"sky-type":{"type":"enum","values":{"gradient":{},"atmosphere":{}},"default":"atmosphere","expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"sky-atmosphere-sun":{"type":"array","value":"number","length":2,"units":"degrees","minimum":[0,0],"maximum":[360,180],"transition":false,"requires":[{"sky-type":"atmosphere"}],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"sky-atmosphere-sun-intensity":{"type":"number","requires":[{"sky-type":"atmosphere"}],"default":10,"minimum":0,"maximum":100,"transition":false,"property-type":"data-constant"},"sky-gradient-center":{"type":"array","requires":[{"sky-type":"gradient"}],"value":"number","default":[0,0],"length":2,"units":"degrees","minimum":[0,0],"maximum":[360,180],"transition":false,"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"sky-gradient-radius":{"type":"number","requires":[{"sky-type":"gradient"}],"default":90,"minimum":0,"maximum":180,"transition":false,"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"sky-gradient":{"type":"color","default":["interpolate",["linear"],["sky-radial-progress"],0.8,"#87ceeb",1,"white"],"transition":false,"requires":[{"sky-type":"gradient"}],"expression":{"interpolated":true,"parameters":["sky-radial-progress"]},"property-type":"color-ramp"},"sky-atmosphere-halo-color":{"type":"color","default":"white","transition":false,"requires":[{"sky-type":"atmosphere"}],"property-type":"data-constant"},"sky-atmosphere-color":{"type":"color","default":"white","transition":false,"requires":[{"sky-type":"atmosphere"}],"property-type":"data-constant"},"sky-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"}},"transition":{"duration":{"type":"number","default":300,"minimum":0,"units":"milliseconds"},"delay":{"type":"number","default":0,"minimum":0,"units":"milliseconds"}},"property-type":{"data-driven":{"type":"property-type"},"color-ramp":{"type":"property-type"},"data-constant":{"type":"property-type"},"constant":{"type":"property-type"}},"promoteId":{"*":{"type":"string"}}}');function nt(e,...t){for(const n of t)for(const t in n)e[t]=n[t];return e}function it(e){return e instanceof Number||e instanceof String||e instanceof Boolean?e.valueOf():e}function at(e){if(Array.isArray(e))return e.map(at);if(e instanceof Object&&!(e instanceof Number||e instanceof String||e instanceof Boolean)){const t={};for(const n in e)t[n]=at(e[n]);return t}return it(e)}class ot extends Error{constructor(e,t){super(t),this.message=t,this.key=e}}var rt=ot;class st{constructor(e,t=[]){this.parent=e,this.bindings={};for(const[e,n]of t)this.bindings[e]=n}concat(e){return new st(this,e)}get(e){if(this.bindings[e])return this.bindings[e];if(this.parent)return this.parent.get(e);throw new Error(e+" not found in scope.")}has(e){return!!this.bindings[e]||!!this.parent&&this.parent.has(e)}}var lt=st;const ct={kind:"null"},ut={kind:"number"},dt={kind:"string"},pt={kind:"boolean"},ft={kind:"color"},mt={kind:"object"},ht={kind:"value"},gt={kind:"collator"},yt={kind:"formatted"},vt={kind:"resolvedImage"};function bt(e,t){return{kind:"array",itemType:e,N:t}}function _t(e){if("array"===e.kind){const t=_t(e.itemType);return"number"==typeof e.N?`array<${t}, ${e.N}>`:"value"===e.itemType.kind?"array":`array<${t}>`}return e.kind}const wt=[ct,ut,dt,pt,ft,yt,mt,bt(ht),vt];function xt(e,t){if("error"===t.kind)return null;if("array"===e.kind){if("array"===t.kind&&(0===t.N&&"value"===t.itemType.kind||!xt(e.itemType,t.itemType))&&("number"!=typeof e.N||e.N===t.N))return null}else{if(e.kind===t.kind)return null;if("value"===e.kind)for(const e of wt)if(!xt(e,t))return null}return`Expected ${_t(e)} but found ${_t(t)} instead.`}function kt(e,t){return t.some(t=>t.kind===e.kind)}function Ot(e,t){return t.some(t=>"null"===t?null===e:"array"===t?Array.isArray(e):"object"===t?e&&!Array.isArray(e)&&"object"==typeof e:t===typeof e)}var Tt,Ct={transparent:[0,0,0,0],aliceblue:[240,248,255,1],antiquewhite:[250,235,215,1],aqua:[0,255,255,1],aquamarine:[127,255,212,1],azure:[240,255,255,1],beige:[245,245,220,1],bisque:[255,228,196,1],black:[0,0,0,1],blanchedalmond:[255,235,205,1],blue:[0,0,255,1],blueviolet:[138,43,226,1],brown:[165,42,42,1],burlywood:[222,184,135,1],cadetblue:[95,158,160,1],chartreuse:[127,255,0,1],chocolate:[210,105,30,1],coral:[255,127,80,1],cornflowerblue:[100,149,237,1],cornsilk:[255,248,220,1],crimson:[220,20,60,1],cyan:[0,255,255,1],darkblue:[0,0,139,1],darkcyan:[0,139,139,1],darkgoldenrod:[184,134,11,1],darkgray:[169,169,169,1],darkgreen:[0,100,0,1],darkgrey:[169,169,169,1],darkkhaki:[189,183,107,1],darkmagenta:[139,0,139,1],darkolivegreen:[85,107,47,1],darkorange:[255,140,0,1],darkorchid:[153,50,204,1],darkred:[139,0,0,1],darksalmon:[233,150,122,1],darkseagreen:[143,188,143,1],darkslateblue:[72,61,139,1],darkslategray:[47,79,79,1],darkslategrey:[47,79,79,1],darkturquoise:[0,206,209,1],darkviolet:[148,0,211,1],deeppink:[255,20,147,1],deepskyblue:[0,191,255,1],dimgray:[105,105,105,1],dimgrey:[105,105,105,1],dodgerblue:[30,144,255,1],firebrick:[178,34,34,1],floralwhite:[255,250,240,1],forestgreen:[34,139,34,1],fuchsia:[255,0,255,1],gainsboro:[220,220,220,1],ghostwhite:[248,248,255,1],gold:[255,215,0,1],goldenrod:[218,165,32,1],gray:[128,128,128,1],green:[0,128,0,1],greenyellow:[173,255,47,1],grey:[128,128,128,1],honeydew:[240,255,240,1],hotpink:[255,105,180,1],indianred:[205,92,92,1],indigo:[75,0,130,1],ivory:[255,255,240,1],khaki:[240,230,140,1],lavender:[230,230,250,1],lavenderblush:[255,240,245,1],lawngreen:[124,252,0,1],lemonchiffon:[255,250,205,1],lightblue:[173,216,230,1],lightcoral:[240,128,128,1],lightcyan:[224,255,255,1],lightgoldenrodyellow:[250,250,210,1],lightgray:[211,211,211,1],lightgreen:[144,238,144,1],lightgrey:[211,211,211,1],lightpink:[255,182,193,1],lightsalmon:[255,160,122,1],lightseagreen:[32,178,170,1],lightskyblue:[135,206,250,1],lightslategray:[119,136,153,1],lightslategrey:[119,136,153,1],lightsteelblue:[176,196,222,1],lightyellow:[255,255,224,1],lime:[0,255,0,1],limegreen:[50,205,50,1],linen:[250,240,230,1],magenta:[255,0,255,1],maroon:[128,0,0,1],mediumaquamarine:[102,205,170,1],mediumblue:[0,0,205,1],mediumorchid:[186,85,211,1],mediumpurple:[147,112,219,1],mediumseagreen:[60,179,113,1],mediumslateblue:[123,104,238,1],mediumspringgreen:[0,250,154,1],mediumturquoise:[72,209,204,1],mediumvioletred:[199,21,133,1],midnightblue:[25,25,112,1],mintcream:[245,255,250,1],mistyrose:[255,228,225,1],moccasin:[255,228,181,1],navajowhite:[255,222,173,1],navy:[0,0,128,1],oldlace:[253,245,230,1],olive:[128,128,0,1],olivedrab:[107,142,35,1],orange:[255,165,0,1],orangered:[255,69,0,1],orchid:[218,112,214,1],palegoldenrod:[238,232,170,1],palegreen:[152,251,152,1],paleturquoise:[175,238,238,1],palevioletred:[219,112,147,1],papayawhip:[255,239,213,1],peachpuff:[255,218,185,1],peru:[205,133,63,1],pink:[255,192,203,1],plum:[221,160,221,1],powderblue:[176,224,230,1],purple:[128,0,128,1],rebeccapurple:[102,51,153,1],red:[255,0,0,1],rosybrown:[188,143,143,1],royalblue:[65,105,225,1],saddlebrown:[139,69,19,1],salmon:[250,128,114,1],sandybrown:[244,164,96,1],seagreen:[46,139,87,1],seashell:[255,245,238,1],sienna:[160,82,45,1],silver:[192,192,192,1],skyblue:[135,206,235,1],slateblue:[106,90,205,1],slategray:[112,128,144,1],slategrey:[112,128,144,1],snow:[255,250,250,1],springgreen:[0,255,127,1],steelblue:[70,130,180,1],tan:[210,180,140,1],teal:[0,128,128,1],thistle:[216,191,216,1],tomato:[255,99,71,1],turquoise:[64,224,208,1],violet:[238,130,238,1],wheat:[245,222,179,1],white:[255,255,255,1],whitesmoke:[245,245,245,1],yellow:[255,255,0,1],yellowgreen:[154,205,50,1]};function Et(e){return(e=Math.round(e))<0?0:e>255?255:e}function St(e){return Et("%"===e[e.length-1]?parseFloat(e)/100*255:parseInt(e))}function Pt(e){return(t="%"===e[e.length-1]?parseFloat(e)/100:parseFloat(e))<0?0:t>1?1:t;var t}function It(e,t,n){return n<0?n+=1:n>1&&(n-=1),6*n<1?e+(t-e)*n*6:2*n<1?t:3*n<2?e+(t-e)*(2/3-n)*6:e}try{Tt={}.parseCSSColor=function(e){var t,n=e.replace(/ /g,"").toLowerCase();if(n in Ct)return Ct[n].slice();if("#"===n[0])return 4===n.length?(t=parseInt(n.substr(1),16))>=0&&t<=4095?[(3840&t)>>4|(3840&t)>>8,240&t|(240&t)>>4,15&t|(15&t)<<4,1]:null:7===n.length&&(t=parseInt(n.substr(1),16))>=0&&t<=16777215?[(16711680&t)>>16,(65280&t)>>8,255&t,1]:null;var i=n.indexOf("("),a=n.indexOf(")");if(-1!==i&&a+1===n.length){var o=n.substr(0,i),r=n.substr(i+1,a-(i+1)).split(","),s=1;switch(o){case"rgba":if(4!==r.length)return null;s=Pt(r.pop());case"rgb":return 3!==r.length?null:[St(r[0]),St(r[1]),St(r[2]),s];case"hsla":if(4!==r.length)return null;s=Pt(r.pop());case"hsl":if(3!==r.length)return null;var l=(parseFloat(r[0])%360+360)%360/360,c=Pt(r[1]),u=Pt(r[2]),d=u<=.5?u*(c+1):u+c-u*c,p=2*u-d;return[Et(255*It(p,d,l+1/3)),Et(255*It(p,d,l)),Et(255*It(p,d,l-1/3)),s];default:return null}}return null}}catch(e){}class Mt{constructor(e,t,n,i=1){this.r=e,this.g=t,this.b=n,this.a=i}static parse(e){if(!e)return;if(e instanceof Mt)return e;if("string"!=typeof e)return;const t=Tt(e);return t?new Mt(t[0]/255*t[3],t[1]/255*t[3],t[2]/255*t[3],t[3]):void 0}toString(){const[e,t,n,i]=this.toArray();return`rgba(${Math.round(e)},${Math.round(t)},${Math.round(n)},${i})`}toArray(){const{r:e,g:t,b:n,a:i}=this;return 0===i?[0,0,0,0]:[255*e/i,255*t/i,255*n/i,i]}toArray01(){const{r:e,g:t,b:n,a:i}=this;return 0===i?[0,0,0,0]:[e/i,t/i,n/i,i]}toArray01PremultipliedAlpha(){const{r:e,g:t,b:n,a:i}=this;return[e,t,n,i]}}Mt.black=new Mt(0,0,0,1),Mt.white=new Mt(1,1,1,1),Mt.transparent=new Mt(0,0,0,0),Mt.red=new Mt(1,0,0,1),Mt.blue=new Mt(0,0,1,1);var At=Mt;class jt{constructor(e,t,n){this.sensitivity=e?t?"variant":"case":t?"accent":"base",this.locale=n,this.collator=new Intl.Collator(this.locale?this.locale:[],{sensitivity:this.sensitivity,usage:"search"})}compare(e,t){return this.collator.compare(e,t)}resolvedLocale(){return new Intl.Collator(this.locale?this.locale:[]).resolvedOptions().locale}}class Nt{constructor(e,t,n,i,a){this.text=e.normalize?e.normalize():e,this.image=t,this.scale=n,this.fontStack=i,this.textColor=a}}class Lt{constructor(e){this.sections=e}static fromString(e){return new Lt([new Nt(e,null,null,null,null)])}isEmpty(){return 0===this.sections.length||!this.sections.some(e=>0!==e.text.length||e.image&&0!==e.image.name.length)}static factory(e){return e instanceof Lt?e:Lt.fromString(e)}toString(){return 0===this.sections.length?"":this.sections.map(e=>e.text).join("")}serialize(){const e=["format"];for(const t of this.sections){if(t.image){e.push(["image",t.image.name]);continue}e.push(t.text);const n={};t.fontStack&&(n["text-font"]=["literal",t.fontStack.split(",")]),t.scale&&(n["font-scale"]=t.scale),t.textColor&&(n["text-color"]=["rgba"].concat(t.textColor.toArray())),e.push(n)}return e}}class Dt{constructor(e){this.name=e.name,this.available=e.available}toString(){return this.name}static fromString(e){return e?new Dt({name:e,available:!1}):null}serialize(){return["image",this.name]}}function Rt(e,t,n,i){return"number"==typeof e&&e>=0&&e<=255&&"number"==typeof t&&t>=0&&t<=255&&"number"==typeof n&&n>=0&&n<=255?void 0===i||"number"==typeof i&&i>=0&&i<=1?null:`Invalid rgba value [${[e,t,n,i].join(", ")}]: 'a' must be between 0 and 1.`:`Invalid rgba value [${("number"==typeof i?[e,t,n,i]:[e,t,n]).join(", ")}]: 'r', 'g', and 'b' must be between 0 and 255.`}function Bt(e){if(null===e)return!0;if("string"==typeof e)return!0;if("boolean"==typeof e)return!0;if("number"==typeof e)return!0;if(e instanceof At)return!0;if(e instanceof jt)return!0;if(e instanceof Lt)return!0;if(e instanceof Dt)return!0;if(Array.isArray(e)){for(const t of e)if(!Bt(t))return!1;return!0}if("object"==typeof e){for(const t in e)if(!Bt(e[t]))return!1;return!0}return!1}function zt(e){if(null===e)return ct;if("string"==typeof e)return dt;if("boolean"==typeof e)return pt;if("number"==typeof e)return ut;if(e instanceof At)return ft;if(e instanceof jt)return gt;if(e instanceof Lt)return yt;if(e instanceof Dt)return vt;if(Array.isArray(e)){const t=e.length;let n;for(const t of e){const e=zt(t);if(n){if(n===e)continue;n=ht;break}n=e}return bt(n||ht,t)}return mt}function Ft(e){const t=typeof e;return null===e?"":"string"===t||"number"===t||"boolean"===t?String(e):e instanceof At||e instanceof Lt||e instanceof Dt?e.toString():JSON.stringify(e)}class Ut{constructor(e,t){this.type=e,this.value=t}static parse(e,t){if(2!==e.length)return t.error(`'literal' expression requires exactly one argument, but found ${e.length-1} instead.`);if(!Bt(e[1]))return t.error("invalid value");const n=e[1];let i=zt(n);const a=t.expectedType;return"array"!==i.kind||0!==i.N||!a||"array"!==a.kind||"number"==typeof a.N&&0!==a.N||(i=a),new Ut(i,n)}evaluate(){return this.value}eachChild(){}outputDefined(){return!0}serialize(){return"array"===this.type.kind||"object"===this.type.kind?["literal",this.value]:this.value instanceof At?["rgba"].concat(this.value.toArray()):this.value instanceof Lt?this.value.serialize():this.value}}var Ht=Ut,Wt=class{constructor(e){this.name="ExpressionEvaluationError",this.message=e}toJSON(){return this.message}};const qt={string:dt,number:ut,boolean:pt,object:mt};class Vt{constructor(e,t){this.type=e,this.args=t}static parse(e,t){if(e.length<2)return t.error("Expected at least one argument.");let n,i=1;const a=e[0];if("array"===a){let a,o;if(e.length>2){const n=e[1];if("string"!=typeof n||!(n in qt)||"object"===n)return t.error('The item type argument of "array" must be one of string, number, boolean',1);a=qt[n],i++}else a=ht;if(e.length>3){if(null!==e[2]&&("number"!=typeof e[2]||e[2]<0||e[2]!==Math.floor(e[2])))return t.error('The length argument to "array" must be a positive integer literal',2);o=e[2],i++}n=bt(a,o)}else n=qt[a];const o=[];for(;i<e.length;i++){const n=t.parse(e[i],i,ht);if(!n)return null;o.push(n)}return new Vt(n,o)}evaluate(e){for(let t=0;t<this.args.length;t++){const n=this.args[t].evaluate(e);if(!xt(this.type,zt(n)))return n;if(t===this.args.length-1)throw new Wt(`Expected value to be of type ${_t(this.type)}, but found ${_t(zt(n))} instead.`)}return null}eachChild(e){this.args.forEach(e)}outputDefined(){return this.args.every(e=>e.outputDefined())}serialize(){const e=this.type,t=[e.kind];if("array"===e.kind){const n=e.itemType;if("string"===n.kind||"number"===n.kind||"boolean"===n.kind){t.push(n.kind);const i=e.N;("number"==typeof i||this.args.length>1)&&t.push(i)}}return t.concat(this.args.map(e=>e.serialize()))}}var Gt=Vt;class Yt{constructor(e){this.type=yt,this.sections=e}static parse(e,t){if(e.length<2)return t.error("Expected at least one argument.");const n=e[1];if(!Array.isArray(n)&&"object"==typeof n)return t.error("First argument must be an image or text section.");const i=[];let a=!1;for(let n=1;n<=e.length-1;++n){const o=e[n];if(a&&"object"==typeof o&&!Array.isArray(o)){a=!1;let e=null;if(o["font-scale"]&&(e=t.parse(o["font-scale"],1,ut),!e))return null;let n=null;if(o["text-font"]&&(n=t.parse(o["text-font"],1,bt(dt)),!n))return null;let r=null;if(o["text-color"]&&(r=t.parse(o["text-color"],1,ft),!r))return null;const s=i[i.length-1];s.scale=e,s.font=n,s.textColor=r}else{const o=t.parse(e[n],1,ht);if(!o)return null;const r=o.type.kind;if("string"!==r&&"value"!==r&&"null"!==r&&"resolvedImage"!==r)return t.error("Formatted text type must be 'string', 'value', 'image' or 'null'.");a=!0,i.push({content:o,scale:null,font:null,textColor:null})}}return new Yt(i)}evaluate(e){return new Lt(this.sections.map(t=>{const n=t.content.evaluate(e);return zt(n)===vt?new Nt("",n,null,null,null):new Nt(Ft(n),null,t.scale?t.scale.evaluate(e):null,t.font?t.font.evaluate(e).join(","):null,t.textColor?t.textColor.evaluate(e):null)}))}eachChild(e){for(const t of this.sections)e(t.content),t.scale&&e(t.scale),t.font&&e(t.font),t.textColor&&e(t.textColor)}outputDefined(){return!1}serialize(){const e=["format"];for(const t of this.sections){e.push(t.content.serialize());const n={};t.scale&&(n["font-scale"]=t.scale.serialize()),t.font&&(n["text-font"]=t.font.serialize()),t.textColor&&(n["text-color"]=t.textColor.serialize()),e.push(n)}return e}}class Xt{constructor(e){this.type=vt,this.input=e}static parse(e,t){if(2!==e.length)return t.error("Expected two arguments.");const n=t.parse(e[1],1,dt);return n?new Xt(n):t.error("No image name provided.")}evaluate(e){const t=this.input.evaluate(e),n=Dt.fromString(t);return n&&e.availableImages&&(n.available=e.availableImages.indexOf(t)>-1),n}eachChild(e){e(this.input)}outputDefined(){return!1}serialize(){return["image",this.input.serialize()]}}const Zt={"to-boolean":pt,"to-color":ft,"to-number":ut,"to-string":dt};class Jt{constructor(e,t){this.type=e,this.args=t}static parse(e,t){if(e.length<2)return t.error("Expected at least one argument.");const n=e[0];if(("to-boolean"===n||"to-string"===n)&&2!==e.length)return t.error("Expected one argument.");const i=Zt[n],a=[];for(let n=1;n<e.length;n++){const i=t.parse(e[n],n,ht);if(!i)return null;a.push(i)}return new Jt(i,a)}evaluate(e){if("boolean"===this.type.kind)return Boolean(this.args[0].evaluate(e));if("color"===this.type.kind){let t,n;for(const i of this.args){if(t=i.evaluate(e),n=null,t instanceof At)return t;if("string"==typeof t){const n=e.parseColor(t);if(n)return n}else if(Array.isArray(t)&&(n=t.length<3||t.length>4?`Invalid rbga value ${JSON.stringify(t)}: expected an array containing either three or four numeric values.`:Rt(t[0],t[1],t[2],t[3]),!n))return new At(t[0]/255,t[1]/255,t[2]/255,t[3])}throw new Wt(n||`Could not parse color from value '${"string"==typeof t?t:String(JSON.stringify(t))}'`)}if("number"===this.type.kind){let t=null;for(const n of this.args){if(t=n.evaluate(e),null===t)return 0;const i=Number(t);if(!isNaN(i))return i}throw new Wt(`Could not convert ${JSON.stringify(t)} to number.`)}return"formatted"===this.type.kind?Lt.fromString(Ft(this.args[0].evaluate(e))):"resolvedImage"===this.type.kind?Dt.fromString(Ft(this.args[0].evaluate(e))):Ft(this.args[0].evaluate(e))}eachChild(e){this.args.forEach(e)}outputDefined(){return this.args.every(e=>e.outputDefined())}serialize(){if("formatted"===this.type.kind)return new Yt([{content:this.args[0],scale:null,font:null,textColor:null}]).serialize();if("resolvedImage"===this.type.kind)return new Xt(this.args[0]).serialize();const e=["to-"+this.type.kind];return this.eachChild(t=>{e.push(t.serialize())}),e}}var Kt=Jt;const $t=["Unknown","Point","LineString","Polygon"];var Qt=class{constructor(){this.globals=null,this.feature=null,this.featureState=null,this.formattedSection=null,this._parseColorCache={},this.availableImages=null,this.canonical=null,this.featureTileCoord=null,this.featureDistanceData=null}id(){return this.feature&&void 0!==this.feature.id?this.feature.id:null}geometryType(){return this.feature?"number"==typeof this.feature.type?$t[this.feature.type]:this.feature.type:null}geometry(){return this.feature&&"geometry"in this.feature?this.feature.geometry:null}canonicalID(){return this.canonical}properties(){return this.feature&&this.feature.properties||{}}distanceFromCenter(){if(this.featureTileCoord&&this.featureDistanceData){const e=this.featureDistanceData.center,t=this.featureDistanceData.scale,{x:n,y:i}=this.featureTileCoord;return this.featureDistanceData.bearing[0]*(n*t-e[0])+this.featureDistanceData.bearing[1]*(i*t-e[1])}return 0}parseColor(e){let t=this._parseColorCache[e];return t||(t=this._parseColorCache[e]=At.parse(e)),t}};class en{constructor(e,t,n,i){this.name=e,this.type=t,this._evaluate=n,this.args=i}evaluate(e){return this._evaluate(e,this.args)}eachChild(e){this.args.forEach(e)}outputDefined(){return!1}serialize(){return[this.name].concat(this.args.map(e=>e.serialize()))}static parse(e,t){const n=e[0],i=en.definitions[n];if(!i)return t.error(`Unknown expression "${n}". If you wanted a literal array, use ["literal", [...]].`,0);const a=Array.isArray(i)?i[0]:i.type,o=Array.isArray(i)?[[i[1],i[2]]]:i.overloads,r=o.filter(([t])=>!Array.isArray(t)||t.length===e.length-1);let s=null;for(const[i,o]of r){s=new Sn(t.registry,t.path,null,t.scope);const r=[];let l=!1;for(let t=1;t<e.length;t++){const n=e[t],a=Array.isArray(i)?i[t-1]:i.type,o=s.parse(n,1+r.length,a);if(!o){l=!0;break}r.push(o)}if(!l)if(Array.isArray(i)&&i.length!==r.length)s.error(`Expected ${i.length} arguments, but found ${r.length} instead.`);else{for(let e=0;e<r.length;e++){const t=Array.isArray(i)?i[e]:i.type,n=r[e];s.concat(e+1).checkSubtype(t,n.type)}if(0===s.errors.length)return new en(n,a,o,r)}}if(1===r.length)t.errors.push(...s.errors);else{const n=(r.length?r:o).map(([e])=>{return t=e,Array.isArray(t)?`(${t.map(_t).join(", ")})`:`(${_t(t.type)}...)`;var t}).join(" | "),i=[];for(let n=1;n<e.length;n++){const a=t.parse(e[n],1+i.length);if(!a)return null;i.push(_t(a.type))}t.error(`Expected arguments of type ${n}, but found (${i.join(", ")}) instead.`)}return null}static register(e,t){en.definitions=t;for(const n in t)e[n]=en}}var tn=en;class nn{constructor(e,t,n){this.type=gt,this.locale=n,this.caseSensitive=e,this.diacriticSensitive=t}static parse(e,t){if(2!==e.length)return t.error("Expected one argument.");const n=e[1];if("object"!=typeof n||Array.isArray(n))return t.error("Collator options argument must be an object.");const i=t.parse(void 0!==n["case-sensitive"]&&n["case-sensitive"],1,pt);if(!i)return null;const a=t.parse(void 0!==n["diacritic-sensitive"]&&n["diacritic-sensitive"],1,pt);if(!a)return null;let o=null;return n.locale&&(o=t.parse(n.locale,1,dt),!o)?null:new nn(i,a,o)}evaluate(e){return new jt(this.caseSensitive.evaluate(e),this.diacriticSensitive.evaluate(e),this.locale?this.locale.evaluate(e):null)}eachChild(e){e(this.caseSensitive),e(this.diacriticSensitive),this.locale&&e(this.locale)}outputDefined(){return!1}serialize(){const e={};return e["case-sensitive"]=this.caseSensitive.serialize(),e["diacritic-sensitive"]=this.diacriticSensitive.serialize(),this.locale&&(e.locale=this.locale.serialize()),["collator",e]}}const an=8192;function on(e,t){e[0]=Math.min(e[0],t[0]),e[1]=Math.min(e[1],t[1]),e[2]=Math.max(e[2],t[0]),e[3]=Math.max(e[3],t[1])}function rn(e,t){return!(e[0]<=t[0]||e[2]>=t[2]||e[1]<=t[1]||e[3]>=t[3])}function sn(e,t){const n=(180+e[0])/360,i=(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+e[1]*Math.PI/360)))/360,a=Math.pow(2,t.z);return[Math.round(n*a*an),Math.round(i*a*an)]}function ln(e,t,n){const i=e[0]-t[0],a=e[1]-t[1],o=e[0]-n[0],r=e[1]-n[1];return i*r-o*a==0&&i*o<=0&&a*r<=0}function cn(e,t){let n=!1;for(let r=0,s=t.length;r<s;r++){const s=t[r];for(let t=0,r=s.length;t<r-1;t++){if(ln(e,s[t],s[t+1]))return!1;(a=s[t])[1]>(i=e)[1]!=(o=s[t+1])[1]>i[1]&&i[0]<(o[0]-a[0])*(i[1]-a[1])/(o[1]-a[1])+a[0]&&(n=!n)}}var i,a,o;return n}function un(e,t){for(let n=0;n<t.length;n++)if(cn(e,t[n]))return!0;return!1}function dn(e,t,n,i){const a=i[0]-n[0],o=i[1]-n[1],r=(e[0]-n[0])*o-a*(e[1]-n[1]),s=(t[0]-n[0])*o-a*(t[1]-n[1]);return r>0&&s<0||r<0&&s>0}function pn(e,t,n){for(const c of n)for(let n=0;n<c.length-1;++n)if(0!=(s=[(r=c[n+1])[0]-(o=c[n])[0],r[1]-o[1]])[0]*(l=[(a=t)[0]-(i=e)[0],a[1]-i[1]])[1]-s[1]*l[0]&&dn(i,a,o,r)&&dn(o,r,i,a))return!0;var i,a,o,r,s,l;return!1}function fn(e,t){for(let n=0;n<e.length;++n)if(!cn(e[n],t))return!1;for(let n=0;n<e.length-1;++n)if(pn(e[n],e[n+1],t))return!1;return!0}function mn(e,t){for(let n=0;n<t.length;n++)if(fn(e,t[n]))return!0;return!1}function hn(e,t,n){const i=[];for(let a=0;a<e.length;a++){const o=[];for(let i=0;i<e[a].length;i++){const r=sn(e[a][i],n);on(t,r),o.push(r)}i.push(o)}return i}function gn(e,t,n){const i=[];for(let a=0;a<e.length;a++){const o=hn(e[a],t,n);i.push(o)}return i}function yn(e,t,n,i){if(e[0]<n[0]||e[0]>n[2]){const t=.5*i;let a=e[0]-n[0]>t?-i:n[0]-e[0]>t?i:0;0===a&&(a=e[0]-n[2]>t?-i:n[2]-e[0]>t?i:0),e[0]+=a}on(t,e)}function vn(e,t,n,i){const a=Math.pow(2,i.z)*an,o=[i.x*an,i.y*an],r=[];if(!e)return r;for(const i of e)for(const e of i){const i=[e.x+o[0],e.y+o[1]];yn(i,t,n,a),r.push(i)}return r}function bn(e,t,n,i){const a=Math.pow(2,i.z)*an,o=[i.x*an,i.y*an],r=[];if(!e)return r;for(const n of e){const e=[];for(const i of n){const n=[i.x+o[0],i.y+o[1]];on(t,n),e.push(n)}r.push(e)}if(t[2]-t[0]<=a/2){(s=t)[0]=s[1]=1/0,s[2]=s[3]=-1/0;for(const e of r)for(const i of e)yn(i,t,n,a)}var s;return r}class _n{constructor(e,t){this.type=pt,this.geojson=e,this.geometries=t}static parse(e,t){if(2!==e.length)return t.error(`'within' expression requires exactly one argument, but found ${e.length-1} instead.`);if(Bt(e[1])){const t=e[1];if("FeatureCollection"===t.type)for(let e=0;e<t.features.length;++e){const n=t.features[e].geometry.type;if("Polygon"===n||"MultiPolygon"===n)return new _n(t,t.features[e].geometry)}else if("Feature"===t.type){const e=t.geometry.type;if("Polygon"===e||"MultiPolygon"===e)return new _n(t,t.geometry)}else if("Polygon"===t.type||"MultiPolygon"===t.type)return new _n(t,t)}return t.error("'within' expression requires valid geojson object that contains polygon geometry type.")}evaluate(e){if(null!=e.geometry()&&null!=e.canonicalID()){if("Point"===e.geometryType())return function(e,t){const n=[1/0,1/0,-1/0,-1/0],i=[1/0,1/0,-1/0,-1/0],a=e.canonicalID();if(!a)return!1;if("Polygon"===t.type){const o=hn(t.coordinates,i,a),r=vn(e.geometry(),n,i,a);if(!rn(n,i))return!1;for(const e of r)if(!cn(e,o))return!1}if("MultiPolygon"===t.type){const o=gn(t.coordinates,i,a),r=vn(e.geometry(),n,i,a);if(!rn(n,i))return!1;for(const e of r)if(!un(e,o))return!1}return!0}(e,this.geometries);if("LineString"===e.geometryType())return function(e,t){const n=[1/0,1/0,-1/0,-1/0],i=[1/0,1/0,-1/0,-1/0],a=e.canonicalID();if(!a)return!1;if("Polygon"===t.type){const o=hn(t.coordinates,i,a),r=bn(e.geometry(),n,i,a);if(!rn(n,i))return!1;for(const e of r)if(!fn(e,o))return!1}if("MultiPolygon"===t.type){const o=gn(t.coordinates,i,a),r=bn(e.geometry(),n,i,a);if(!rn(n,i))return!1;for(const e of r)if(!mn(e,o))return!1}return!0}(e,this.geometries)}return!1}eachChild(){}outputDefined(){return!0}serialize(){return["within",this.geojson]}}var wn=_n;function xn(e){if(e instanceof tn){if("get"===e.name&&1===e.args.length)return!1;if("feature-state"===e.name)return!1;if("has"===e.name&&1===e.args.length)return!1;if("properties"===e.name||"geometry-type"===e.name||"id"===e.name)return!1;if(/^filter-/.test(e.name))return!1}if(e instanceof wn)return!1;let t=!0;return e.eachChild(e=>{t&&!xn(e)&&(t=!1)}),t}function kn(e){if(e instanceof tn&&"feature-state"===e.name)return!1;let t=!0;return e.eachChild(e=>{t&&!kn(e)&&(t=!1)}),t}function On(e,t){if(e instanceof tn&&t.indexOf(e.name)>=0)return!1;let n=!0;return e.eachChild(e=>{n&&!On(e,t)&&(n=!1)}),n}class Tn{constructor(e,t){this.type=t.type,this.name=e,this.boundExpression=t}static parse(e,t){if(2!==e.length||"string"!=typeof e[1])return t.error("'var' expression requires exactly one string literal argument.");const n=e[1];return t.scope.has(n)?new Tn(n,t.scope.get(n)):t.error(`Unknown variable "${n}". Make sure "${n}" has been bound in an enclosing "let" expression before using it.`,1)}evaluate(e){return this.boundExpression.evaluate(e)}eachChild(){}outputDefined(){return!1}serialize(){return["var",this.name]}}var Cn=Tn;class En{constructor(e,t=[],n,i=new lt,a=[]){this.registry=e,this.path=t,this.key=t.map(e=>`[${e}]`).join(""),this.scope=i,this.errors=a,this.expectedType=n}parse(e,t,n,i,a={}){return t?this.concat(t,n,i)._parse(e,a):this._parse(e,a)}_parse(e,t){function n(e,t,n){return"assert"===n?new Gt(t,[e]):"coerce"===n?new Kt(t,[e]):e}if(null!==e&&"string"!=typeof e&&"boolean"!=typeof e&&"number"!=typeof e||(e=["literal",e]),Array.isArray(e)){if(0===e.length)return this.error('Expected an array with at least one element. If you wanted a literal array, use ["literal", []].');const i=e[0];if("string"!=typeof i)return this.error(`Expression name must be a string, but found ${typeof i} instead. If you wanted a literal array, use ["literal", [...]].`,0),null;const a=this.registry[i];if(a){let i=a.parse(e,this);if(!i)return null;if(this.expectedType){const e=this.expectedType,a=i.type;if("string"!==e.kind&&"number"!==e.kind&&"boolean"!==e.kind&&"object"!==e.kind&&"array"!==e.kind||"value"!==a.kind)if("color"!==e.kind&&"formatted"!==e.kind&&"resolvedImage"!==e.kind||"value"!==a.kind&&"string"!==a.kind){if(this.checkSubtype(e,a))return null}else i=n(i,e,t.typeAnnotation||"coerce");else i=n(i,e,t.typeAnnotation||"assert")}if(!(i instanceof Ht)&&"resolvedImage"!==i.type.kind&&function e(t){if(t instanceof Cn)return e(t.boundExpression);if(t instanceof tn&&"error"===t.name)return!1;if(t instanceof nn)return!1;if(t instanceof wn)return!1;const n=t instanceof Kt||t instanceof Gt;let i=!0;return t.eachChild(t=>{i=n?i&&e(t):i&&t instanceof Ht}),!!i&&xn(t)&&On(t,["zoom","heatmap-density","line-progress","sky-radial-progress","accumulated","is-supported-script","pitch","distance-from-center"])}(i)){const t=new Qt;try{i=new Ht(i.type,i.evaluate(t))}catch(e){return this.error(e.message),null}}return i}return this.error(`Unknown expression "${i}". If you wanted a literal array, use ["literal", [...]].`,0)}return this.error(void 0===e?"'undefined' value invalid. Use null instead.":"object"==typeof e?'Bare objects invalid. Use ["literal", {...}] instead.':`Expected an array, but found ${typeof e} instead.`)}concat(e,t,n){const i="number"==typeof e?this.path.concat(e):this.path,a=n?this.scope.concat(n):this.scope;return new En(this.registry,i,t||null,a,this.errors)}error(e,...t){const n=`${this.key}${t.map(e=>`[${e}]`).join("")}`;this.errors.push(new rt(n,e))}checkSubtype(e,t){const n=xt(e,t);return n&&this.error(n),n}}var Sn=En;function Pn(e,t){const n=e.length-1;let i,a,o=0,r=n,s=0;for(;o<=r;)if(s=Math.floor((o+r)/2),i=e[s],a=e[s+1],i<=t){if(s===n||t<a)return s;o=s+1}else{if(!(i>t))throw new Wt("Input is not a number.");r=s-1}return 0}class In{constructor(e,t,n){this.type=e,this.input=t,this.labels=[],this.outputs=[];for(const[e,t]of n)this.labels.push(e),this.outputs.push(t)}static parse(e,t){if(e.length-1<4)return t.error(`Expected at least 4 arguments, but found only ${e.length-1}.`);if((e.length-1)%2!=0)return t.error("Expected an even number of arguments.");const n=t.parse(e[1],1,ut);if(!n)return null;const i=[];let a=null;t.expectedType&&"value"!==t.expectedType.kind&&(a=t.expectedType);for(let n=1;n<e.length;n+=2){const o=1===n?-1/0:e[n],r=e[n+1],s=n,l=n+1;if("number"!=typeof o)return t.error('Input/output pairs for "step" expressions must be defined using literal numeric values (not computed expressions) for the input values.',s);if(i.length&&i[i.length-1][0]>=o)return t.error('Input/output pairs for "step" expressions must be arranged with input values in strictly ascending order.',s);const c=t.parse(r,l,a);if(!c)return null;a=a||c.type,i.push([o,c])}return new In(a,n,i)}evaluate(e){const t=this.labels,n=this.outputs;if(1===t.length)return n[0].evaluate(e);const i=this.input.evaluate(e);if(i<=t[0])return n[0].evaluate(e);const a=t.length;return i>=t[a-1]?n[a-1].evaluate(e):n[Pn(t,i)].evaluate(e)}eachChild(e){e(this.input);for(const t of this.outputs)e(t)}outputDefined(){return this.outputs.every(e=>e.outputDefined())}serialize(){const e=["step",this.input.serialize()];for(let t=0;t<this.labels.length;t++)t>0&&e.push(this.labels[t]),e.push(this.outputs[t].serialize());return e}}var Mn=In;function An(e,t,n){return e*(1-n)+t*n}var jn=Object.freeze({__proto__:null,array:function(e,t,n){return e.map((e,i)=>An(e,t[i],n))},color:function(e,t,n){return new At(An(e.r,t.r,n),An(e.g,t.g,n),An(e.b,t.b,n),An(e.a,t.a,n))},number:An});const Nn=6/29,Ln=3*Nn*Nn,Dn=Math.PI/180,Rn=180/Math.PI;function Bn(e){return e>.008856451679035631?Math.pow(e,1/3):e/Ln+4/29}function zn(e){return e>Nn?e*e*e:Ln*(e-4/29)}function Fn(e){return 255*(e<=.0031308?12.92*e:1.055*Math.pow(e,1/2.4)-.055)}function Un(e){return(e/=255)<=.04045?e/12.92:Math.pow((e+.055)/1.055,2.4)}function Hn(e){const t=Un(e.r),n=Un(e.g),i=Un(e.b),a=Bn((.4124564*t+.3575761*n+.1804375*i)/.95047),o=Bn((.2126729*t+.7151522*n+.072175*i)/1);return{l:116*o-16,a:500*(a-o),b:200*(o-Bn((.0193339*t+.119192*n+.9503041*i)/1.08883)),alpha:e.a}}function Wn(e){let t=(e.l+16)/116,n=isNaN(e.a)?t:t+e.a/500,i=isNaN(e.b)?t:t-e.b/200;return t=1*zn(t),n=.95047*zn(n),i=1.08883*zn(i),new At(Fn(3.2404542*n-1.5371385*t-.4985314*i),Fn(-.969266*n+1.8760108*t+.041556*i),Fn(.0556434*n-.2040259*t+1.0572252*i),e.alpha)}function qn(e,t,n){const i=t-e;return e+n*(i>180||i<-180?i-360*Math.round(i/360):i)}const Vn={forward:Hn,reverse:Wn,interpolate:function(e,t,n){return{l:An(e.l,t.l,n),a:An(e.a,t.a,n),b:An(e.b,t.b,n),alpha:An(e.alpha,t.alpha,n)}}},Gn={forward:function(e){const{l:t,a:n,b:i}=Hn(e),a=Math.atan2(i,n)*Rn;return{h:a<0?a+360:a,c:Math.sqrt(n*n+i*i),l:t,alpha:e.a}},reverse:function(e){const t=e.h*Dn,n=e.c;return Wn({l:e.l,a:Math.cos(t)*n,b:Math.sin(t)*n,alpha:e.alpha})},interpolate:function(e,t,n){return{h:qn(e.h,t.h,n),c:An(e.c,t.c,n),l:An(e.l,t.l,n),alpha:An(e.alpha,t.alpha,n)}}};var Yn=Object.freeze({__proto__:null,hcl:Gn,lab:Vn});class Xn{constructor(e,t,n,i,a){this.type=e,this.operator=t,this.interpolation=n,this.input=i,this.labels=[],this.outputs=[];for(const[e,t]of a)this.labels.push(e),this.outputs.push(t)}static interpolationFactor(e,t,n,i){let a=0;if("exponential"===e.name)a=Zn(t,e.base,n,i);else if("linear"===e.name)a=Zn(t,1,n,i);else if("cubic-bezier"===e.name){const o=e.controlPoints;a=new g(o[0],o[1],o[2],o[3]).solve(Zn(t,1,n,i))}return a}static parse(e,t){let[n,i,a,...o]=e;if(!Array.isArray(i)||0===i.length)return t.error("Expected an interpolation type expression.",1);if("linear"===i[0])i={name:"linear"};else if("exponential"===i[0]){const e=i[1];if("number"!=typeof e)return t.error("Exponential interpolation requires a numeric base.",1,1);i={name:"exponential",base:e}}else{if("cubic-bezier"!==i[0])return t.error("Unknown interpolation type "+String(i[0]),1,0);{const e=i.slice(1);if(4!==e.length||e.some(e=>"number"!=typeof e||e<0||e>1))return t.error("Cubic bezier interpolation requires four numeric arguments with values between 0 and 1.",1);i={name:"cubic-bezier",controlPoints:e}}}if(e.length-1<4)return t.error(`Expected at least 4 arguments, but found only ${e.length-1}.`);if((e.length-1)%2!=0)return t.error("Expected an even number of arguments.");if(a=t.parse(a,2,ut),!a)return null;const r=[];let s=null;"interpolate-hcl"===n||"interpolate-lab"===n?s=ft:t.expectedType&&"value"!==t.expectedType.kind&&(s=t.expectedType);for(let e=0;e<o.length;e+=2){const n=o[e],i=o[e+1],a=e+3,l=e+4;if("number"!=typeof n)return t.error('Input/output pairs for "interpolate" expressions must be defined using literal numeric values (not computed expressions) for the input values.',a);if(r.length&&r[r.length-1][0]>=n)return t.error('Input/output pairs for "interpolate" expressions must be arranged with input values in strictly ascending order.',a);const c=t.parse(i,l,s);if(!c)return null;s=s||c.type,r.push([n,c])}return"number"===s.kind||"color"===s.kind||"array"===s.kind&&"number"===s.itemType.kind&&"number"==typeof s.N?new Xn(s,n,i,a,r):t.error(`Type ${_t(s)} is not interpolatable.`)}evaluate(e){const t=this.labels,n=this.outputs;if(1===t.length)return n[0].evaluate(e);const i=this.input.evaluate(e);if(i<=t[0])return n[0].evaluate(e);const a=t.length;if(i>=t[a-1])return n[a-1].evaluate(e);const o=Pn(t,i),r=Xn.interpolationFactor(this.interpolation,i,t[o],t[o+1]),s=n[o].evaluate(e),l=n[o+1].evaluate(e);return"interpolate"===this.operator?jn[this.type.kind.toLowerCase()](s,l,r):"interpolate-hcl"===this.operator?Gn.reverse(Gn.interpolate(Gn.forward(s),Gn.forward(l),r)):Vn.reverse(Vn.interpolate(Vn.forward(s),Vn.forward(l),r))}eachChild(e){e(this.input);for(const t of this.outputs)e(t)}outputDefined(){return this.outputs.every(e=>e.outputDefined())}serialize(){let e;e="linear"===this.interpolation.name?["linear"]:"exponential"===this.interpolation.name?1===this.interpolation.base?["linear"]:["exponential",this.interpolation.base]:["cubic-bezier"].concat(this.interpolation.controlPoints);const t=[this.operator,e,this.input.serialize()];for(let e=0;e<this.labels.length;e++)t.push(this.labels[e],this.outputs[e].serialize());return t}}function Zn(e,t,n,i){const a=i-n,o=e-n;return 0===a?0:1===t?o/a:(Math.pow(t,o)-1)/(Math.pow(t,a)-1)}var Jn=Xn;class Kn{constructor(e,t){this.type=e,this.args=t}static parse(e,t){if(e.length<2)return t.error("Expectected at least one argument.");let n=null;const i=t.expectedType;i&&"value"!==i.kind&&(n=i);const a=[];for(const i of e.slice(1)){const e=t.parse(i,1+a.length,n,void 0,{typeAnnotation:"omit"});if(!e)return null;n=n||e.type,a.push(e)}const o=i&&a.some(e=>xt(i,e.type));return new Kn(o?ht:n,a)}evaluate(e){let t,n=null,i=0;for(const a of this.args){if(i++,n=a.evaluate(e),n&&n instanceof Dt&&!n.available&&(t||(t=n),n=null,i===this.args.length))return t;if(null!==n)break}return n}eachChild(e){this.args.forEach(e)}outputDefined(){return this.args.every(e=>e.outputDefined())}serialize(){const e=["coalesce"];return this.eachChild(t=>{e.push(t.serialize())}),e}}var $n=Kn;class Qn{constructor(e,t){this.type=t.type,this.bindings=[].concat(e),this.result=t}evaluate(e){return this.result.evaluate(e)}eachChild(e){for(const t of this.bindings)e(t[1]);e(this.result)}static parse(e,t){if(e.length<4)return t.error(`Expected at least 3 arguments, but found ${e.length-1} instead.`);const n=[];for(let i=1;i<e.length-1;i+=2){const a=e[i];if("string"!=typeof a)return t.error(`Expected string, but found ${typeof a} instead.`,i);if(/[^a-zA-Z0-9_]/.test(a))return t.error("Variable names must contain only alphanumeric characters or '_'.",i);const o=t.parse(e[i+1],i+1);if(!o)return null;n.push([a,o])}const i=t.parse(e[e.length-1],e.length-1,t.expectedType,n);return i?new Qn(n,i):null}outputDefined(){return this.result.outputDefined()}serialize(){const e=["let"];for(const[t,n]of this.bindings)e.push(t,n.serialize());return e.push(this.result.serialize()),e}}var ei=Qn;class ti{constructor(e,t,n){this.type=e,this.index=t,this.input=n}static parse(e,t){if(3!==e.length)return t.error(`Expected 2 arguments, but found ${e.length-1} instead.`);const n=t.parse(e[1],1,ut),i=t.parse(e[2],2,bt(t.expectedType||ht));return n&&i?new ti(i.type.itemType,n,i):null}evaluate(e){const t=this.index.evaluate(e),n=this.input.evaluate(e);if(t<0)throw new Wt(`Array index out of bounds: ${t} < 0.`);if(t>=n.length)throw new Wt(`Array index out of bounds: ${t} > ${n.length-1}.`);if(t!==Math.floor(t))throw new Wt(`Array index must be an integer, but found ${t} instead.`);return n[t]}eachChild(e){e(this.index),e(this.input)}outputDefined(){return!1}serialize(){return["at",this.index.serialize(),this.input.serialize()]}}var ni=ti;class ii{constructor(e,t){this.type=pt,this.needle=e,this.haystack=t}static parse(e,t){if(3!==e.length)return t.error(`Expected 2 arguments, but found ${e.length-1} instead.`);const n=t.parse(e[1],1,ht),i=t.parse(e[2],2,ht);return n&&i?kt(n.type,[pt,dt,ut,ct,ht])?new ii(n,i):t.error(`Expected first argument to be of type boolean, string, number or null, but found ${_t(n.type)} instead`):null}evaluate(e){const t=this.needle.evaluate(e),n=this.haystack.evaluate(e);if(null==n)return!1;if(!Ot(t,["boolean","string","number","null"]))throw new Wt(`Expected first argument to be of type boolean, string, number or null, but found ${_t(zt(t))} instead.`);if(!Ot(n,["string","array"]))throw new Wt(`Expected second argument to be of type array or string, but found ${_t(zt(n))} instead.`);return n.indexOf(t)>=0}eachChild(e){e(this.needle),e(this.haystack)}outputDefined(){return!0}serialize(){return["in",this.needle.serialize(),this.haystack.serialize()]}}var ai=ii;class oi{constructor(e,t,n){this.type=ut,this.needle=e,this.haystack=t,this.fromIndex=n}static parse(e,t){if(e.length<=2||e.length>=5)return t.error(`Expected 3 or 4 arguments, but found ${e.length-1} instead.`);const n=t.parse(e[1],1,ht),i=t.parse(e[2],2,ht);if(!n||!i)return null;if(!kt(n.type,[pt,dt,ut,ct,ht]))return t.error(`Expected first argument to be of type boolean, string, number or null, but found ${_t(n.type)} instead`);if(4===e.length){const a=t.parse(e[3],3,ut);return a?new oi(n,i,a):null}return new oi(n,i)}evaluate(e){const t=this.needle.evaluate(e),n=this.haystack.evaluate(e);if(!Ot(t,["boolean","string","number","null"]))throw new Wt(`Expected first argument to be of type boolean, string, number or null, but found ${_t(zt(t))} instead.`);if(!Ot(n,["string","array"]))throw new Wt(`Expected second argument to be of type array or string, but found ${_t(zt(n))} instead.`);if(this.fromIndex){const i=this.fromIndex.evaluate(e);return n.indexOf(t,i)}return n.indexOf(t)}eachChild(e){e(this.needle),e(this.haystack),this.fromIndex&&e(this.fromIndex)}outputDefined(){return!1}serialize(){if(null!=this.fromIndex&&void 0!==this.fromIndex){const e=this.fromIndex.serialize();return["index-of",this.needle.serialize(),this.haystack.serialize(),e]}return["index-of",this.needle.serialize(),this.haystack.serialize()]}}var ri=oi;class si{constructor(e,t,n,i,a,o){this.inputType=e,this.type=t,this.input=n,this.cases=i,this.outputs=a,this.otherwise=o}static parse(e,t){if(e.length<5)return t.error(`Expected at least 4 arguments, but found only ${e.length-1}.`);if(e.length%2!=1)return t.error("Expected an even number of arguments.");let n,i;t.expectedType&&"value"!==t.expectedType.kind&&(i=t.expectedType);const a={},o=[];for(let r=2;r<e.length-1;r+=2){let s=e[r];const l=e[r+1];Array.isArray(s)||(s=[s]);const c=t.concat(r);if(0===s.length)return c.error("Expected at least one branch label.");for(const e of s){if("number"!=typeof e&&"string"!=typeof e)return c.error("Branch labels must be numbers or strings.");if("number"==typeof e&&Math.abs(e)>Number.MAX_SAFE_INTEGER)return c.error(`Branch labels must be integers no larger than ${Number.MAX_SAFE_INTEGER}.`);if("number"==typeof e&&Math.floor(e)!==e)return c.error("Numeric branch labels must be integer values.");if(n){if(c.checkSubtype(n,zt(e)))return null}else n=zt(e);if(void 0!==a[String(e)])return c.error("Branch labels must be unique.");a[String(e)]=o.length}const u=t.parse(l,r,i);if(!u)return null;i=i||u.type,o.push(u)}const r=t.parse(e[1],1,ht);if(!r)return null;const s=t.parse(e[e.length-1],e.length-1,i);return s?"value"!==r.type.kind&&t.concat(1).checkSubtype(n,r.type)?null:new si(n,i,r,a,o,s):null}evaluate(e){const t=this.input.evaluate(e);return(zt(t)===this.inputType&&this.outputs[this.cases[t]]||this.otherwise).evaluate(e)}eachChild(e){e(this.input),this.outputs.forEach(e),e(this.otherwise)}outputDefined(){return this.outputs.every(e=>e.outputDefined())&&this.otherwise.outputDefined()}serialize(){const e=["match",this.input.serialize()],t=Object.keys(this.cases).sort(),n=[],i={};for(const e of t){const t=i[this.cases[e]];void 0===t?(i[this.cases[e]]=n.length,n.push([this.cases[e],[e]])):n[t][1].push(e)}const a=e=>"number"===this.inputType.kind?Number(e):e;for(const[t,i]of n)e.push(1===i.length?a(i[0]):i.map(a)),e.push(this.outputs[t].serialize());return e.push(this.otherwise.serialize()),e}}var li=si;class ci{constructor(e,t,n){this.type=e,this.branches=t,this.otherwise=n}static parse(e,t){if(e.length<4)return t.error(`Expected at least 3 arguments, but found only ${e.length-1}.`);if(e.length%2!=0)return t.error("Expected an odd number of arguments.");let n;t.expectedType&&"value"!==t.expectedType.kind&&(n=t.expectedType);const i=[];for(let a=1;a<e.length-1;a+=2){const o=t.parse(e[a],a,pt);if(!o)return null;const r=t.parse(e[a+1],a+1,n);if(!r)return null;i.push([o,r]),n=n||r.type}const a=t.parse(e[e.length-1],e.length-1,n);return a?new ci(n,i,a):null}evaluate(e){for(const[t,n]of this.branches)if(t.evaluate(e))return n.evaluate(e);return this.otherwise.evaluate(e)}eachChild(e){for(const[t,n]of this.branches)e(t),e(n);e(this.otherwise)}outputDefined(){return this.branches.every(([e,t])=>t.outputDefined())&&this.otherwise.outputDefined()}serialize(){const e=["case"];return this.eachChild(t=>{e.push(t.serialize())}),e}}var ui=ci;class di{constructor(e,t,n,i){this.type=e,this.input=t,this.beginIndex=n,this.endIndex=i}static parse(e,t){if(e.length<=2||e.length>=5)return t.error(`Expected 3 or 4 arguments, but found ${e.length-1} instead.`);const n=t.parse(e[1],1,ht),i=t.parse(e[2],2,ut);if(!n||!i)return null;if(!kt(n.type,[bt(ht),dt,ht]))return t.error(`Expected first argument to be of type array or string, but found ${_t(n.type)} instead`);if(4===e.length){const a=t.parse(e[3],3,ut);return a?new di(n.type,n,i,a):null}return new di(n.type,n,i)}evaluate(e){const t=this.input.evaluate(e),n=this.beginIndex.evaluate(e);if(!Ot(t,["string","array"]))throw new Wt(`Expected first argument to be of type array or string, but found ${_t(zt(t))} instead.`);if(this.endIndex){const i=this.endIndex.evaluate(e);return t.slice(n,i)}return t.slice(n)}eachChild(e){e(this.input),e(this.beginIndex),this.endIndex&&e(this.endIndex)}outputDefined(){return!1}serialize(){if(null!=this.endIndex&&void 0!==this.endIndex){const e=this.endIndex.serialize();return["slice",this.input.serialize(),this.beginIndex.serialize(),e]}return["slice",this.input.serialize(),this.beginIndex.serialize()]}}var pi=di;function fi(e,t){return"=="===e||"!="===e?"boolean"===t.kind||"string"===t.kind||"number"===t.kind||"null"===t.kind||"value"===t.kind:"string"===t.kind||"number"===t.kind||"value"===t.kind}function mi(e,t,n,i){return 0===i.compare(t,n)}function hi(e,t,n){const i="=="!==e&&"!="!==e;return class a{constructor(e,t,n){this.type=pt,this.lhs=e,this.rhs=t,this.collator=n,this.hasUntypedArgument="value"===e.type.kind||"value"===t.type.kind}static parse(e,t){if(3!==e.length&&4!==e.length)return t.error("Expected two or three arguments.");const n=e[0];let o=t.parse(e[1],1,ht);if(!o)return null;if(!fi(n,o.type))return t.concat(1).error(`"${n}" comparisons are not supported for type '${_t(o.type)}'.`);let r=t.parse(e[2],2,ht);if(!r)return null;if(!fi(n,r.type))return t.concat(2).error(`"${n}" comparisons are not supported for type '${_t(r.type)}'.`);if(o.type.kind!==r.type.kind&&"value"!==o.type.kind&&"value"!==r.type.kind)return t.error(`Cannot compare types '${_t(o.type)}' and '${_t(r.type)}'.`);i&&("value"===o.type.kind&&"value"!==r.type.kind?o=new Gt(r.type,[o]):"value"!==o.type.kind&&"value"===r.type.kind&&(r=new Gt(o.type,[r])));let s=null;if(4===e.length){if("string"!==o.type.kind&&"string"!==r.type.kind&&"value"!==o.type.kind&&"value"!==r.type.kind)return t.error("Cannot use collator to compare non-string types.");if(s=t.parse(e[3],3,gt),!s)return null}return new a(o,r,s)}evaluate(a){const o=this.lhs.evaluate(a),r=this.rhs.evaluate(a);if(i&&this.hasUntypedArgument){const t=zt(o),n=zt(r);if(t.kind!==n.kind||"string"!==t.kind&&"number"!==t.kind)throw new Wt(`Expected arguments for "${e}" to be (string, string) or (number, number), but found (${t.kind}, ${n.kind}) instead.`)}if(this.collator&&!i&&this.hasUntypedArgument){const e=zt(o),n=zt(r);if("string"!==e.kind||"string"!==n.kind)return t(a,o,r)}return this.collator?n(a,o,r,this.collator.evaluate(a)):t(a,o,r)}eachChild(e){e(this.lhs),e(this.rhs),this.collator&&e(this.collator)}outputDefined(){return!0}serialize(){const t=[e];return this.eachChild(e=>{t.push(e.serialize())}),t}}}const gi=hi("==",(function(e,t,n){return t===n}),mi),yi=hi("!=",(function(e,t,n){return t!==n}),(function(e,t,n,i){return!mi(0,t,n,i)})),vi=hi("<",(function(e,t,n){return t<n}),(function(e,t,n,i){return i.compare(t,n)<0})),bi=hi(">",(function(e,t,n){return t>n}),(function(e,t,n,i){return i.compare(t,n)>0})),_i=hi("<=",(function(e,t,n){return t<=n}),(function(e,t,n,i){return i.compare(t,n)<=0})),wi=hi(">=",(function(e,t,n){return t>=n}),(function(e,t,n,i){return i.compare(t,n)>=0}));class xi{constructor(e,t,n,i,a,o){this.type=dt,this.number=e,this.locale=t,this.currency=n,this.unit=i,this.minFractionDigits=a,this.maxFractionDigits=o}static parse(e,t){if(3!==e.length)return t.error("Expected two arguments.");const n=t.parse(e[1],1,ut);if(!n)return null;const i=e[2];if("object"!=typeof i||Array.isArray(i))return t.error("NumberFormat options argument must be an object.");let a=null;if(i.locale&&(a=t.parse(i.locale,1,dt),!a))return null;let o=null;if(i.currency&&(o=t.parse(i.currency,1,dt),!o))return null;let r=null;if(i.unit&&(r=t.parse(i.unit,1,dt),!r))return null;let s=null;if(i["min-fraction-digits"]&&(s=t.parse(i["min-fraction-digits"],1,ut),!s))return null;let l=null;return i["max-fraction-digits"]&&(l=t.parse(i["max-fraction-digits"],1,ut),!l)?null:new xi(n,a,o,r,s,l)}evaluate(e){return new Intl.NumberFormat(this.locale?this.locale.evaluate(e):[],{style:(this.currency?"currency":this.unit&&"unit")||"decimal",currency:this.currency?this.currency.evaluate(e):void 0,unit:this.unit?this.unit.evaluate(e):void 0,minimumFractionDigits:this.minFractionDigits?this.minFractionDigits.evaluate(e):void 0,maximumFractionDigits:this.maxFractionDigits?this.maxFractionDigits.evaluate(e):void 0}).format(this.number.evaluate(e))}eachChild(e){e(this.number),this.locale&&e(this.locale),this.currency&&e(this.currency),this.unit&&e(this.unit),this.minFractionDigits&&e(this.minFractionDigits),this.maxFractionDigits&&e(this.maxFractionDigits)}outputDefined(){return!1}serialize(){const e={};return this.locale&&(e.locale=this.locale.serialize()),this.currency&&(e.currency=this.currency.serialize()),this.unit&&(e.unit=this.unit.serialize()),this.minFractionDigits&&(e["min-fraction-digits"]=this.minFractionDigits.serialize()),this.maxFractionDigits&&(e["max-fraction-digits"]=this.maxFractionDigits.serialize()),["number-format",this.number.serialize(),e]}}class ki{constructor(e){this.type=ut,this.input=e}static parse(e,t){if(2!==e.length)return t.error(`Expected 1 argument, but found ${e.length-1} instead.`);const n=t.parse(e[1],1);return n?"array"!==n.type.kind&&"string"!==n.type.kind&&"value"!==n.type.kind?t.error(`Expected argument of type string or array, but found ${_t(n.type)} instead.`):new ki(n):null}evaluate(e){const t=this.input.evaluate(e);if("string"==typeof t)return t.length;if(Array.isArray(t))return t.length;throw new Wt(`Expected value to be of type string or array, but found ${_t(zt(t))} instead.`)}eachChild(e){e(this.input)}outputDefined(){return!1}serialize(){const e=["length"];return this.eachChild(t=>{e.push(t.serialize())}),e}}const Oi={"==":gi,"!=":yi,">":bi,"<":vi,">=":wi,"<=":_i,array:Gt,at:ni,boolean:Gt,case:ui,coalesce:$n,collator:nn,format:Yt,image:Xt,in:ai,"index-of":ri,interpolate:Jn,"interpolate-hcl":Jn,"interpolate-lab":Jn,length:ki,let:ei,literal:Ht,match:li,number:Gt,"number-format":xi,object:Gt,slice:pi,step:Mn,string:Gt,"to-boolean":Kt,"to-color":Kt,"to-number":Kt,"to-string":Kt,var:Cn,within:wn};function Ti(e,[t,n,i,a]){t=t.evaluate(e),n=n.evaluate(e),i=i.evaluate(e);const o=a?a.evaluate(e):1,r=Rt(t,n,i,o);if(r)throw new Wt(r);return new At(t/255*o,n/255*o,i/255*o,o)}function Ci(e,t){return e in t}function Ei(e,t){const n=t[e];return void 0===n?null:n}function Si(e){return{type:e}}tn.register(Oi,{error:[{kind:"error"},[dt],(e,[t])=>{throw new Wt(t.evaluate(e))}],typeof:[dt,[ht],(e,[t])=>_t(zt(t.evaluate(e)))],"to-rgba":[bt(ut,4),[ft],(e,[t])=>t.evaluate(e).toArray()],rgb:[ft,[ut,ut,ut],Ti],rgba:[ft,[ut,ut,ut,ut],Ti],has:{type:pt,overloads:[[[dt],(e,[t])=>Ci(t.evaluate(e),e.properties())],[[dt,mt],(e,[t,n])=>Ci(t.evaluate(e),n.evaluate(e))]]},get:{type:ht,overloads:[[[dt],(e,[t])=>Ei(t.evaluate(e),e.properties())],[[dt,mt],(e,[t,n])=>Ei(t.evaluate(e),n.evaluate(e))]]},"feature-state":[ht,[dt],(e,[t])=>Ei(t.evaluate(e),e.featureState||{})],properties:[mt,[],e=>e.properties()],"geometry-type":[dt,[],e=>e.geometryType()],id:[ht,[],e=>e.id()],zoom:[ut,[],e=>e.globals.zoom],pitch:[ut,[],e=>e.globals.pitch||0],"distance-from-center":[ut,[],e=>e.distanceFromCenter()],"heatmap-density":[ut,[],e=>e.globals.heatmapDensity||0],"line-progress":[ut,[],e=>e.globals.lineProgress||0],"sky-radial-progress":[ut,[],e=>e.globals.skyRadialProgress||0],accumulated:[ht,[],e=>void 0===e.globals.accumulated?null:e.globals.accumulated],"+":[ut,Si(ut),(e,t)=>{let n=0;for(const i of t)n+=i.evaluate(e);return n}],"*":[ut,Si(ut),(e,t)=>{let n=1;for(const i of t)n*=i.evaluate(e);return n}],"-":{type:ut,overloads:[[[ut,ut],(e,[t,n])=>t.evaluate(e)-n.evaluate(e)],[[ut],(e,[t])=>-t.evaluate(e)]]},"/":[ut,[ut,ut],(e,[t,n])=>t.evaluate(e)/n.evaluate(e)],"%":[ut,[ut,ut],(e,[t,n])=>t.evaluate(e)%n.evaluate(e)],ln2:[ut,[],()=>Math.LN2],pi:[ut,[],()=>Math.PI],e:[ut,[],()=>Math.E],"^":[ut,[ut,ut],(e,[t,n])=>Math.pow(t.evaluate(e),n.evaluate(e))],sqrt:[ut,[ut],(e,[t])=>Math.sqrt(t.evaluate(e))],log10:[ut,[ut],(e,[t])=>Math.log(t.evaluate(e))/Math.LN10],ln:[ut,[ut],(e,[t])=>Math.log(t.evaluate(e))],log2:[ut,[ut],(e,[t])=>Math.log(t.evaluate(e))/Math.LN2],sin:[ut,[ut],(e,[t])=>Math.sin(t.evaluate(e))],cos:[ut,[ut],(e,[t])=>Math.cos(t.evaluate(e))],tan:[ut,[ut],(e,[t])=>Math.tan(t.evaluate(e))],asin:[ut,[ut],(e,[t])=>Math.asin(t.evaluate(e))],acos:[ut,[ut],(e,[t])=>Math.acos(t.evaluate(e))],atan:[ut,[ut],(e,[t])=>Math.atan(t.evaluate(e))],min:[ut,Si(ut),(e,t)=>Math.min(...t.map(t=>t.evaluate(e)))],max:[ut,Si(ut),(e,t)=>Math.max(...t.map(t=>t.evaluate(e)))],abs:[ut,[ut],(e,[t])=>Math.abs(t.evaluate(e))],round:[ut,[ut],(e,[t])=>{const n=t.evaluate(e);return n<0?-Math.round(-n):Math.round(n)}],floor:[ut,[ut],(e,[t])=>Math.floor(t.evaluate(e))],ceil:[ut,[ut],(e,[t])=>Math.ceil(t.evaluate(e))],"filter-==":[pt,[dt,ht],(e,[t,n])=>e.properties()[t.value]===n.value],"filter-id-==":[pt,[ht],(e,[t])=>e.id()===t.value],"filter-type-==":[pt,[dt],(e,[t])=>e.geometryType()===t.value],"filter-<":[pt,[dt,ht],(e,[t,n])=>{const i=e.properties()[t.value],a=n.value;return typeof i==typeof a&&i<a}],"filter-id-<":[pt,[ht],(e,[t])=>{const n=e.id(),i=t.value;return typeof n==typeof i&&n<i}],"filter->":[pt,[dt,ht],(e,[t,n])=>{const i=e.properties()[t.value],a=n.value;return typeof i==typeof a&&i>a}],"filter-id->":[pt,[ht],(e,[t])=>{const n=e.id(),i=t.value;return typeof n==typeof i&&n>i}],"filter-<=":[pt,[dt,ht],(e,[t,n])=>{const i=e.properties()[t.value],a=n.value;return typeof i==typeof a&&i<=a}],"filter-id-<=":[pt,[ht],(e,[t])=>{const n=e.id(),i=t.value;return typeof n==typeof i&&n<=i}],"filter->=":[pt,[dt,ht],(e,[t,n])=>{const i=e.properties()[t.value],a=n.value;return typeof i==typeof a&&i>=a}],"filter-id->=":[pt,[ht],(e,[t])=>{const n=e.id(),i=t.value;return typeof n==typeof i&&n>=i}],"filter-has":[pt,[ht],(e,[t])=>t.value in e.properties()],"filter-has-id":[pt,[],e=>null!==e.id()&&void 0!==e.id()],"filter-type-in":[pt,[bt(dt)],(e,[t])=>t.value.indexOf(e.geometryType())>=0],"filter-id-in":[pt,[bt(ht)],(e,[t])=>t.value.indexOf(e.id())>=0],"filter-in-small":[pt,[dt,bt(ht)],(e,[t,n])=>n.value.indexOf(e.properties()[t.value])>=0],"filter-in-large":[pt,[dt,bt(ht)],(e,[t,n])=>function(e,t,n,i){for(;n<=i;){const a=n+i>>1;if(t[a]===e)return!0;t[a]>e?i=a-1:n=a+1}return!1}(e.properties()[t.value],n.value,0,n.value.length-1)],all:{type:pt,overloads:[[[pt,pt],(e,[t,n])=>t.evaluate(e)&&n.evaluate(e)],[Si(pt),(e,t)=>{for(const n of t)if(!n.evaluate(e))return!1;return!0}]]},any:{type:pt,overloads:[[[pt,pt],(e,[t,n])=>t.evaluate(e)||n.evaluate(e)],[Si(pt),(e,t)=>{for(const n of t)if(n.evaluate(e))return!0;return!1}]]},"!":[pt,[pt],(e,[t])=>!t.evaluate(e)],"is-supported-script":[pt,[dt],(e,[t])=>{const n=e.globals&&e.globals.isSupportedScript;return!n||n(t.evaluate(e))}],upcase:[dt,[dt],(e,[t])=>t.evaluate(e).toUpperCase()],downcase:[dt,[dt],(e,[t])=>t.evaluate(e).toLowerCase()],concat:[dt,Si(ht),(e,t)=>t.map(t=>Ft(t.evaluate(e))).join("")],"resolved-locale":[dt,[gt],(e,[t])=>t.evaluate(e).resolvedLocale()]});var Pi=Oi;function Ii(e){return{result:"success",value:e}}function Mi(e){return{result:"error",value:e}}function Ai(e){return"data-driven"===e["property-type"]}function ji(e){return!!e.expression&&e.expression.parameters.indexOf("zoom")>-1}function Ni(e){return!!e.expression&&e.expression.interpolated}function Li(e){return e instanceof Number?"number":e instanceof String?"string":e instanceof Boolean?"boolean":Array.isArray(e)?"array":null===e?"null":typeof e}function Di(e){return"object"==typeof e&&null!==e&&!Array.isArray(e)}function Ri(e){return e}function Bi(e,t,n){return void 0!==e?e:void 0!==t?t:void 0!==n?n:void 0}function zi(e,t,n,i,a){return Bi(typeof n===a?i[n]:void 0,e.default,t.default)}function Fi(e,t,n){if("number"!==Li(n))return Bi(e.default,t.default);const i=e.stops.length;if(1===i)return e.stops[0][1];if(n<=e.stops[0][0])return e.stops[0][1];if(n>=e.stops[i-1][0])return e.stops[i-1][1];const a=Pn(e.stops.map(e=>e[0]),n);return e.stops[a][1]}function Ui(e,t,n){const i=void 0!==e.base?e.base:1;if("number"!==Li(n))return Bi(e.default,t.default);const a=e.stops.length;if(1===a)return e.stops[0][1];if(n<=e.stops[0][0])return e.stops[0][1];if(n>=e.stops[a-1][0])return e.stops[a-1][1];const o=Pn(e.stops.map(e=>e[0]),n),r=function(e,t,n,i){const a=i-n,o=e-n;return 0===a?0:1===t?o/a:(Math.pow(t,o)-1)/(Math.pow(t,a)-1)}(n,i,e.stops[o][0],e.stops[o+1][0]),s=e.stops[o][1],l=e.stops[o+1][1];let c=jn[t.type]||Ri;if(e.colorSpace&&"rgb"!==e.colorSpace){const t=Yn[e.colorSpace];c=(e,n)=>t.reverse(t.interpolate(t.forward(e),t.forward(n),r))}return"function"==typeof s.evaluate?{evaluate(...e){const t=s.evaluate.apply(void 0,e),n=l.evaluate.apply(void 0,e);if(void 0!==t&&void 0!==n)return c(t,n,r)}}:c(s,l,r)}function Hi(e,t,n){return"color"===t.type?n=At.parse(n):"formatted"===t.type?n=Lt.fromString(n.toString()):"resolvedImage"===t.type?n=Dt.fromString(n.toString()):Li(n)===t.type||"enum"===t.type&&t.values[n]||(n=void 0),Bi(n,e.default,t.default)}class Wi{constructor(e,t){this.expression=e,this._warningHistory={},this._evaluator=new Qt,this._defaultValue=t?function(e){return"color"===e.type&&(Di(e.default)||Array.isArray(e.default))?new At(0,0,0,0):"color"===e.type?At.parse(e.default)||null:void 0===e.default?null:e.default}(t):null,this._enumValues=t&&"enum"===t.type?t.values:null}evaluateWithoutErrorHandling(e,t,n,i,a,o,r,s){return this._evaluator.globals=e,this._evaluator.feature=t,this._evaluator.featureState=n,this._evaluator.canonical=i||null,this._evaluator.availableImages=a||null,this._evaluator.formattedSection=o,this._evaluator.featureTileCoord=r||null,this._evaluator.featureDistanceData=s||null,this.expression.evaluate(this._evaluator)}evaluate(e,t,n,i,a,o,r,s){this._evaluator.globals=e,this._evaluator.feature=t||null,this._evaluator.featureState=n||null,this._evaluator.canonical=i||null,this._evaluator.availableImages=a||null,this._evaluator.formattedSection=o||null,this._evaluator.featureTileCoord=r||null,this._evaluator.featureDistanceData=s||null;try{const e=this.expression.evaluate(this._evaluator);if(null==e||"number"==typeof e&&e!=e)return this._defaultValue;if(this._enumValues&&!(e in this._enumValues))throw new Wt(`Expected value to be one of ${Object.keys(this._enumValues).map(e=>JSON.stringify(e)).join(", ")}, but found ${JSON.stringify(e)} instead.`);return e}catch(e){return this._warningHistory[e.message]||(this._warningHistory[e.message]=!0,"undefined"!=typeof console&&console.warn(e.message)),this._defaultValue}}}function qi(e){return Array.isArray(e)&&e.length>0&&"string"==typeof e[0]&&e[0]in Pi}function Vi(e,t){const n=new Sn(Pi,[],t?function(e){const t={color:ft,string:dt,number:ut,enum:dt,boolean:pt,formatted:yt,resolvedImage:vt};return"array"===e.type?bt(t[e.value]||ht,e.length):t[e.type]}(t):void 0),i=n.parse(e,void 0,void 0,void 0,t&&"string"===t.type?{typeAnnotation:"coerce"}:void 0);return i?Ii(new Wi(i,t)):Mi(n.errors)}class Gi{constructor(e,t){this.kind=e,this._styleExpression=t,this.isStateDependent="constant"!==e&&!kn(t.expression)}evaluateWithoutErrorHandling(e,t,n,i,a,o){return this._styleExpression.evaluateWithoutErrorHandling(e,t,n,i,a,o)}evaluate(e,t,n,i,a,o){return this._styleExpression.evaluate(e,t,n,i,a,o)}}class Yi{constructor(e,t,n,i){this.kind=e,this.zoomStops=n,this._styleExpression=t,this.isStateDependent="camera"!==e&&!kn(t.expression),this.interpolationType=i}evaluateWithoutErrorHandling(e,t,n,i,a,o){return this._styleExpression.evaluateWithoutErrorHandling(e,t,n,i,a,o)}evaluate(e,t,n,i,a,o){return this._styleExpression.evaluate(e,t,n,i,a,o)}interpolationFactor(e,t,n){return this.interpolationType?Jn.interpolationFactor(this.interpolationType,e,t,n):0}}function Xi(e,t){if("error"===(e=Vi(e,t)).result)return e;const n=e.value.expression,i=xn(n);if(!i&&!Ai(t))return Mi([new rt("","data expressions not supported")]);const a=On(n,["zoom","pitch","distance-from-center"]);if(!a&&!ji(t))return Mi([new rt("","zoom expressions not supported")]);const o=function e(t){let n=null;if(t instanceof ei)n=e(t.result);else if(t instanceof $n){for(const i of t.args)if(n=e(i),n)break}else(t instanceof Mn||t instanceof Jn)&&t.input instanceof tn&&"zoom"===t.input.name&&(n=t);return n instanceof rt||t.eachChild(t=>{const i=e(t);i instanceof rt?n=i:!n&&i?n=new rt("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.'):n&&i&&n!==i&&(n=new rt("",'Only one zoom-based "step" or "interpolate" subexpression may be used in an expression.'))}),n}(n);return o||a?o instanceof rt?Mi([o]):o instanceof Jn&&!Ni(t)?Mi([new rt("",'"interpolate" expressions cannot be used with this property')]):Ii(o?new Yi(i?"camera":"composite",e.value,o.labels,o instanceof Jn?o.interpolation:void 0):new Gi(i?"constant":"source",e.value)):Mi([new rt("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.')])}class Zi{constructor(e,t){this._parameters=e,this._specification=t,nt(this,function e(t,n){const i="color"===n.type,a=t.stops&&"object"==typeof t.stops[0][0],o=a||!(a||void 0!==t.property),r=t.type||(Ni(n)?"exponential":"interval");if(i&&((t=nt({},t)).stops&&(t.stops=t.stops.map(e=>[e[0],At.parse(e[1])])),t.default=At.parse(t.default?t.default:n.default)),t.colorSpace&&"rgb"!==t.colorSpace&&!Yn[t.colorSpace])throw new Error("Unknown color space: "+t.colorSpace);let s,l,c;if("exponential"===r)s=Ui;else if("interval"===r)s=Fi;else if("categorical"===r){s=zi,l=Object.create(null);for(const e of t.stops)l[e[0]]=e[1];c=typeof t.stops[0][0]}else{if("identity"!==r)throw new Error(`Unknown function type "${r}"`);s=Hi}if(a){const i={},a=[];for(let e=0;e<t.stops.length;e++){const n=t.stops[e],o=n[0].zoom;void 0===i[o]&&(i[o]={zoom:o,type:t.type,property:t.property,default:t.default,stops:[]},a.push(o)),i[o].stops.push([n[0].value,n[1]])}const o=[];for(const t of a)o.push([i[t].zoom,e(i[t],n)]);const r={name:"linear"};return{kind:"composite",interpolationType:r,interpolationFactor:Jn.interpolationFactor.bind(void 0,r),zoomStops:o.map(e=>e[0]),evaluate:({zoom:e},i)=>Ui({stops:o,base:t.base},n,e).evaluate(e,i)}}if(o){const e="exponential"===r?{name:"exponential",base:void 0!==t.base?t.base:1}:null;return{kind:"camera",interpolationType:e,interpolationFactor:Jn.interpolationFactor.bind(void 0,e),zoomStops:t.stops.map(e=>e[0]),evaluate:({zoom:e})=>s(t,n,e,l,c)}}return{kind:"source",evaluate(e,i){const a=i&&i.properties?i.properties[t.property]:void 0;return void 0===a?Bi(t.default,n.default):s(t,n,a,l,c)}}}(this._parameters,this._specification))}static deserialize(e){return new Zi(e._parameters,e._specification)}static serialize(e){return{_parameters:e._parameters,_specification:e._specification}}}class Ji{constructor(e,t,n,i){this.message=(e?e+": ":"")+n,i&&(this.identifier=i),null!=t&&t.__line__&&(this.line=t.__line__)}}function Ki(e){const t=e.key,n=e.value,i=e.valueSpec||{},a=e.objectElementValidators||{},o=e.style,r=e.styleSpec;let s=[];const l=Li(n);if("object"!==l)return[new Ji(t,n,`object expected, ${l} found`)];for(const e in n){const l=e.split(".")[0];let c;a[l]?c=a[l]:i[l]?c=Ea:a["*"]?c=a["*"]:i["*"]&&(c=Ea),c?s=s.concat(c({key:(t?t+".":t)+e,value:n[e],valueSpec:i[l]||i["*"],style:o,styleSpec:r,object:n,objectKey:e},n)):s.push(new Ji(t,n[e],`unknown property "${e}"`))}for(const e in i)a[e]||i[e].required&&void 0===i[e].default&&void 0===n[e]&&s.push(new Ji(t,n,`missing required property "${e}"`));return s}function $i(e){const t=e.value,n=e.valueSpec,i=e.style,a=e.styleSpec,o=e.key,r=e.arrayElementValidator||Ea;if("array"!==Li(t))return[new Ji(o,t,`array expected, ${Li(t)} found`)];if(n.length&&t.length!==n.length)return[new Ji(o,t,`array length ${n.length} expected, length ${t.length} found`)];if(n["min-length"]&&t.length<n["min-length"])return[new Ji(o,t,`array length at least ${n["min-length"]} expected, length ${t.length} found`)];let s={type:n.value,values:n.values,minimum:n.minimum,maximum:n.maximum,function:void 0};a.$version<7&&(s.function=n.function),"object"===Li(n.value)&&(s=n.value);let l=[];for(let e=0;e<t.length;e++)l=l.concat(r({array:t,arrayIndex:e,value:t[e],valueSpec:s,style:i,styleSpec:a,key:`${o}[${e}]`}));return l}function Qi(e){const t=e.key,n=e.value,i=e.valueSpec;let a=Li(n);if("number"===a&&n!=n&&(a="NaN"),"number"!==a)return[new Ji(t,n,`number expected, ${a} found`)];if("minimum"in i){let a=i.minimum;if("array"===Li(i.minimum)&&(a=i.minimum[e.arrayIndex]),n<a)return[new Ji(t,n,`${n} is less than the minimum value ${a}`)]}if("maximum"in i){let a=i.maximum;if("array"===Li(i.maximum)&&(a=i.maximum[e.arrayIndex]),n>a)return[new Ji(t,n,`${n} is greater than the maximum value ${a}`)]}return[]}function ea(e){const t=e.valueSpec,n=it(e.value.type);let i,a,o,r={};const s="categorical"!==n&&void 0===e.value.property,l=!s,c="array"===Li(e.value.stops)&&"array"===Li(e.value.stops[0])&&"object"===Li(e.value.stops[0][0]),u=Ki({key:e.key,value:e.value,valueSpec:e.styleSpec.function,style:e.style,styleSpec:e.styleSpec,objectElementValidators:{stops:function(e){if("identity"===n)return[new Ji(e.key,e.value,'identity function may not have a "stops" property')];let t=[];const i=e.value;return t=t.concat($i({key:e.key,value:i,valueSpec:e.valueSpec,style:e.style,styleSpec:e.styleSpec,arrayElementValidator:d})),"array"===Li(i)&&0===i.length&&t.push(new Ji(e.key,i,"array must have at least one stop")),t},default:function(e){return Ea({key:e.key,value:e.value,valueSpec:t,style:e.style,styleSpec:e.styleSpec})}}});return"identity"===n&&s&&u.push(new Ji(e.key,e.value,'missing required property "property"')),"identity"===n||e.value.stops||u.push(new Ji(e.key,e.value,'missing required property "stops"')),"exponential"===n&&e.valueSpec.expression&&!Ni(e.valueSpec)&&u.push(new Ji(e.key,e.value,"exponential functions not supported")),e.styleSpec.$version>=8&&(l&&!Ai(e.valueSpec)?u.push(new Ji(e.key,e.value,"property functions not supported")):s&&!ji(e.valueSpec)&&u.push(new Ji(e.key,e.value,"zoom functions not supported"))),"categorical"!==n&&!c||void 0!==e.value.property||u.push(new Ji(e.key,e.value,'"property" property is required')),u;function d(e){let n=[];const i=e.value,s=e.key;if("array"!==Li(i))return[new Ji(s,i,`array expected, ${Li(i)} found`)];if(2!==i.length)return[new Ji(s,i,`array length 2 expected, length ${i.length} found`)];if(c){if("object"!==Li(i[0]))return[new Ji(s,i,`object expected, ${Li(i[0])} found`)];if(void 0===i[0].zoom)return[new Ji(s,i,"object stop key must have zoom")];if(void 0===i[0].value)return[new Ji(s,i,"object stop key must have value")];const t=it(i[0].zoom);if("number"!=typeof t)return[new Ji(s,i[0].zoom,"stop zoom values must be numbers")];if(o&&o>t)return[new Ji(s,i[0].zoom,"stop zoom values must appear in ascending order")];t!==o&&(o=t,a=void 0,r={}),n=n.concat(Ki({key:s+"[0]",value:i[0],valueSpec:{zoom:{}},style:e.style,styleSpec:e.styleSpec,objectElementValidators:{zoom:Qi,value:p}}))}else n=n.concat(p({key:s+"[0]",value:i[0],valueSpec:{},style:e.style,styleSpec:e.styleSpec},i));return qi(at(i[1]))?n.concat([new Ji(s+"[1]",i[1],"expressions are not allowed in function stops.")]):n.concat(Ea({key:s+"[1]",value:i[1],valueSpec:t,style:e.style,styleSpec:e.styleSpec}))}function p(e,o){const s=Li(e.value),l=it(e.value),c=null!==e.value?e.value:o;if(i){if(s!==i)return[new Ji(e.key,c,`${s} stop domain type must match previous stop domain type ${i}`)]}else i=s;if("number"!==s&&"string"!==s&&"boolean"!==s&&"number"!=typeof l&&"string"!=typeof l&&"boolean"!=typeof l)return[new Ji(e.key,c,"stop domain value must be a number, string, or boolean")];if("number"!==s&&"categorical"!==n){let i=`number expected, ${s} found`;return Ai(t)&&void 0===n&&(i+='\nIf you intended to use a categorical function, specify `"type": "categorical"`.'),[new Ji(e.key,c,i)]}return"categorical"!==n||"number"!==s||"number"==typeof l&&isFinite(l)&&Math.floor(l)===l?"categorical"!==n&&"number"===s&&"number"==typeof l&&"number"==typeof a&&void 0!==a&&l<a?[new Ji(e.key,c,"stop domain values must appear in ascending order")]:(a=l,"categorical"===n&&l in r?[new Ji(e.key,c,"stop domain values must be unique")]:(r[l]=!0,[])):[new Ji(e.key,c,"integer expected, found "+String(l))]}}function ta(e){const t=("property"===e.expressionContext?Xi:Vi)(at(e.value),e.valueSpec);if("error"===t.result)return t.value.map(t=>new Ji(`${e.key}${t.key}`,e.value,t.message));const n=t.value.expression||t.value._styleExpression.expression;if("property"===e.expressionContext&&"text-font"===e.propertyKey&&!n.outputDefined())return[new Ji(e.key,e.value,`Invalid data expression for "${e.propertyKey}". Output values must be contained as literals within the expression.`)];if("property"===e.expressionContext&&"layout"===e.propertyType&&!kn(n))return[new Ji(e.key,e.value,'"feature-state" data expressions are not supported with layout properties.')];if("filter"===e.expressionContext)return function e(t,n){const i=new Set(["zoom","feature-state","pitch","distance-from-center"]);if(n.valueSpec&&n.valueSpec.expression)for(const e of n.valueSpec.expression.parameters)i.delete(e);if(0===i.size)return[];const a=[];return t instanceof tn&&i.has(t.name)?[new Ji(n.key,n.value,`["${t.name}"] expression is not supported in a filter for a ${n.object.type} layer with id: ${n.object.id}`)]:(t.eachChild(t=>{a.push(...e(t,n))}),a)}(n,e);if(e.expressionContext&&0===e.expressionContext.indexOf("cluster")){if(!On(n,["zoom","feature-state"]))return[new Ji(e.key,e.value,'"zoom" and "feature-state" expressions are not supported with cluster properties.')];if("cluster-initial"===e.expressionContext&&!xn(n))return[new Ji(e.key,e.value,"Feature data expressions are not supported with initial expression part of cluster properties.")]}return[]}function na(e){const t=e.key,n=e.value,i=e.valueSpec,a=[];return Array.isArray(i.values)?-1===i.values.indexOf(it(n))&&a.push(new Ji(t,n,`expected one of [${i.values.join(", ")}], ${JSON.stringify(n)} found`)):-1===Object.keys(i.values).indexOf(it(n))&&a.push(new Ji(t,n,`expected one of [${Object.keys(i.values).join(", ")}], ${JSON.stringify(n)} found`)),a}function ia(e){if(!0===e||!1===e)return!0;if(!Array.isArray(e)||0===e.length)return!1;switch(e[0]){case"has":return e.length>=2&&"$id"!==e[1]&&"$type"!==e[1];case"in":return e.length>=3&&("string"!=typeof e[1]||Array.isArray(e[2]));case"!in":case"!has":case"none":return!1;case"==":case"!=":case">":case">=":case"<":case"<=":return 3!==e.length||Array.isArray(e[1])||Array.isArray(e[2]);case"any":case"all":for(const t of e.slice(1))if(!ia(t)&&"boolean"!=typeof t)return!1;return!0;default:return!0}}function aa(e,t="fill"){if(null==e)return{filter:()=>!0,needGeometry:!1,needFeature:!1};ia(e)||(e=ca(e));const n=e;let i=!0;try{i=function(e){if(!oa(e))return e;let t=at(e);return function e(t){let n=!1;const i=[];if("case"===t[0]){for(let e=1;e<t.length-1;e+=2)n=n||oa(t[e]),i.push(t[e+1]);i.push(t[t.length-1])}else if("match"===t[0]){n=n||oa(t[1]);for(let e=2;e<t.length-1;e+=2)i.push(t[e+1]);i.push(t[t.length-1])}else if("step"===t[0]){n=n||oa(t[1]);for(let e=1;e<t.length-1;e+=2)i.push(t[e+1])}n&&(t.length=0,t.push("any",...i));for(let n=1;n<t.length;n++)e(t[n])}(t),t=function e(t){if(!Array.isArray(t))return t;const n=function(e){if(ra.has(e[0]))for(let t=1;t<e.length;t++)if(oa(e[t]))return!0;return e}(t);return!0===n?n:n.map(t=>e(t))}(t),t}(n)}catch(e){console.warn(`Failed to extract static filter. Filter will continue working, but at higher memory usage and slower framerate.\nThis is most likely a bug, please report this via https://github.com/mapbox/mapbox-gl-js/issues/new?assignees=&labels=&template=Bug_report.md\nand paste the contents of this message in the report.\nThank you!\nFilter Expression:\n${JSON.stringify(n,null,2)}\n        `)}const a=tt["filter_"+t],o=Vi(i,a);let r=null;if("error"===o.result)throw new Error(o.value.map(e=>`${e.key}: ${e.message}`).join(", "));r=(e,t,n)=>o.value.evaluate(e,t,{},n);let s=null,l=null;if(i!==n){const e=Vi(n,a);if("error"===e.result)throw new Error(e.value.map(e=>`${e.key}: ${e.message}`).join(", "));s=(t,n,i,a,o)=>e.value.evaluate(t,n,{},i,void 0,void 0,a,o),l=!xn(e.value.expression)}return{filter:r,dynamicFilter:s||void 0,needGeometry:la(i),needFeature:!!l}}function oa(e){if(!Array.isArray(e))return!1;if("pitch"===(t=e[0])||"distance-from-center"===t)return!0;var t;for(let t=1;t<e.length;t++)if(oa(e[t]))return!0;return!1}const ra=new Set(["in","==","!=",">",">=","<","<=","to-boolean"]);function sa(e,t){return e<t?-1:e>t?1:0}function la(e){if(!Array.isArray(e))return!1;if("within"===e[0])return!0;for(let t=1;t<e.length;t++)if(la(e[t]))return!0;return!1}function ca(e){if(!e)return!0;const t=e[0];return e.length<=1?"any"!==t:"=="===t?ua(e[1],e[2],"=="):"!="===t?fa(ua(e[1],e[2],"==")):"<"===t||">"===t||"<="===t||">="===t?ua(e[1],e[2],t):"any"===t?(n=e.slice(1),["any"].concat(n.map(ca))):"all"===t?["all"].concat(e.slice(1).map(ca)):"none"===t?["all"].concat(e.slice(1).map(ca).map(fa)):"in"===t?da(e[1],e.slice(2)):"!in"===t?fa(da(e[1],e.slice(2))):"has"===t?pa(e[1]):"!has"===t?fa(pa(e[1])):"within"!==t||e;var n}function ua(e,t,n){switch(e){case"$type":return["filter-type-"+n,t];case"$id":return["filter-id-"+n,t];default:return["filter-"+n,e,t]}}function da(e,t){if(0===t.length)return!1;switch(e){case"$type":return["filter-type-in",["literal",t]];case"$id":return["filter-id-in",["literal",t]];default:return t.length>200&&!t.some(e=>typeof e!=typeof t[0])?["filter-in-large",e,["literal",t.sort(sa)]]:["filter-in-small",e,["literal",t]]}}function pa(e){switch(e){case"$type":return!0;case"$id":return["filter-has-id"];default:return["filter-has",e]}}function fa(e){return["!",e]}function ma(e){return ia(at(e.value))?ta(nt({},e,{expressionContext:"filter",valueSpec:e.styleSpec["filter_"+(e.layerType||"fill")]})):function e(t){const n=t.value,i=t.key;if("array"!==Li(n))return[new Ji(i,n,`array expected, ${Li(n)} found`)];const a=t.styleSpec;let o,r=[];if(n.length<1)return[new Ji(i,n,"filter array must have at least 1 element")];switch(r=r.concat(na({key:i+"[0]",value:n[0],valueSpec:a.filter_operator,style:t.style,styleSpec:t.styleSpec})),it(n[0])){case"<":case"<=":case">":case">=":n.length>=2&&"$type"===it(n[1])&&r.push(new Ji(i,n,`"$type" cannot be use with operator "${n[0]}"`));case"==":case"!=":3!==n.length&&r.push(new Ji(i,n,`filter array for operator "${n[0]}" must have 3 elements`));case"in":case"!in":n.length>=2&&(o=Li(n[1]),"string"!==o&&r.push(new Ji(i+"[1]",n[1],`string expected, ${o} found`)));for(let e=2;e<n.length;e++)o=Li(n[e]),"$type"===it(n[1])?r=r.concat(na({key:`${i}[${e}]`,value:n[e],valueSpec:a.geometry_type,style:t.style,styleSpec:t.styleSpec})):"string"!==o&&"number"!==o&&"boolean"!==o&&r.push(new Ji(`${i}[${e}]`,n[e],`string, number, or boolean expected, ${o} found`));break;case"any":case"all":case"none":for(let a=1;a<n.length;a++)r=r.concat(e({key:`${i}[${a}]`,value:n[a],style:t.style,styleSpec:t.styleSpec}));break;case"has":case"!has":o=Li(n[1]),2!==n.length?r.push(new Ji(i,n,`filter array for "${n[0]}" operator must have 2 elements`)):"string"!==o&&r.push(new Ji(i+"[1]",n[1],`string expected, ${o} found`));break;case"within":o=Li(n[1]),2!==n.length?r.push(new Ji(i,n,`filter array for "${n[0]}" operator must have 2 elements`)):"object"!==o&&r.push(new Ji(i+"[1]",n[1],`object expected, ${o} found`))}return r}(e)}function ha(e,t){const n=e.key,i=e.style,a=e.styleSpec,o=e.value,r=e.objectKey,s=a[`${t}_${e.layerType}`];if(!s)return[];const l=r.match(/^(.*)-transition$/);if("paint"===t&&l&&s[l[1]]&&s[l[1]].transition)return Ea({key:n,value:o,valueSpec:a.transition,style:i,styleSpec:a});const c=e.valueSpec||s[r];if(!c)return[new Ji(n,o,`unknown property "${r}"`)];let u;if("string"===Li(o)&&Ai(c)&&!c.tokens&&(u=/^{([^}]+)}$/.exec(o))){const e=`\`{ "type": "identity", "property": ${u?JSON.stringify(u[1]):'"_"'} }\``;return[new Ji(n,o,`"${r}" does not support interpolation syntax\nUse an identity property function instead: ${e}.`)]}const d=[];return"symbol"===e.layerType&&("text-field"===r&&i&&!i.glyphs&&d.push(new Ji(n,o,'use of "text-field" requires a style "glyphs" property')),"text-font"===r&&Di(at(o))&&"identity"===it(o.type)&&d.push(new Ji(n,o,'"text-font" does not support identity functions'))),d.concat(Ea({key:e.key,value:o,valueSpec:c,style:i,styleSpec:a,expressionContext:"property",propertyType:t,propertyKey:r}))}function ga(e){return ha(e,"paint")}function ya(e){return ha(e,"layout")}function va(e){let t=[];const n=e.value,i=e.key,a=e.style,o=e.styleSpec;n.type||n.ref||t.push(new Ji(i,n,'either "type" or "ref" is required'));let r=it(n.type);const s=it(n.ref);if(n.id){const o=it(n.id);for(let r=0;r<e.arrayIndex;r++){const e=a.layers[r];it(e.id)===o&&t.push(new Ji(i,n.id,`duplicate layer id "${n.id}", previously used at line ${e.id.__line__}`))}}if("ref"in n){let e;["type","source","source-layer","filter","layout"].forEach(e=>{e in n&&t.push(new Ji(i,n[e],`"${e}" is prohibited for ref layers`))}),a.layers.forEach(t=>{it(t.id)===s&&(e=t)}),e?e.ref?t.push(new Ji(i,n.ref,"ref cannot reference another ref layer")):r=it(e.type):"string"==typeof s&&t.push(new Ji(i,n.ref,`ref layer "${s}" not found`))}else if("background"!==r&&"sky"!==r)if(n.source){const e=a.sources&&a.sources[n.source],o=e&&it(e.type);e?"vector"===o&&"raster"===r?t.push(new Ji(i,n.source,`layer "${n.id}" requires a raster source`)):"raster"===o&&"raster"!==r?t.push(new Ji(i,n.source,`layer "${n.id}" requires a vector source`)):"vector"!==o||n["source-layer"]?"raster-dem"===o&&"hillshade"!==r?t.push(new Ji(i,n.source,"raster-dem source can only be used with layer type 'hillshade'.")):"line"!==r||!n.paint||!n.paint["line-gradient"]&&!n.paint["line-trim-offset"]||"geojson"===o&&e.lineMetrics||t.push(new Ji(i,n,`layer "${n.id}" specifies a line-gradient, which requires a GeoJSON source with \`lineMetrics\` enabled.`)):t.push(new Ji(i,n,`layer "${n.id}" must specify a "source-layer"`)):t.push(new Ji(i,n.source,`source "${n.source}" not found`))}else t.push(new Ji(i,n,'missing required property "source"'));return t=t.concat(Ki({key:i,value:n,valueSpec:o.layer,style:e.style,styleSpec:e.styleSpec,objectElementValidators:{"*":()=>[],type:()=>Ea({key:i+".type",value:n.type,valueSpec:o.layer.type,style:e.style,styleSpec:e.styleSpec,object:n,objectKey:"type"}),filter:e=>ma(nt({layerType:r},e)),layout:e=>Ki({layer:n,key:e.key,value:e.value,valueSpec:{},style:e.style,styleSpec:e.styleSpec,objectElementValidators:{"*":e=>ya(nt({layerType:r},e))}}),paint:e=>Ki({layer:n,key:e.key,value:e.value,valueSpec:{},style:e.style,styleSpec:e.styleSpec,objectElementValidators:{"*":e=>ga(nt({layerType:r},e))}})}})),t}function ba(e){const t=e.value,n=e.key,i=Li(t);return"string"!==i?[new Ji(n,t,`string expected, ${i} found`)]:[]}const _a={promoteId:function({key:e,value:t}){if("string"===Li(t))return ba({key:e,value:t});{const n=[];for(const i in t)n.push(...ba({key:`${e}.${i}`,value:t[i]}));return n}}};function wa(e){const t=e.value,n=e.key,i=e.styleSpec,a=e.style;if(!t.type)return[new Ji(n,t,'"type" is required')];const o=it(t.type);let r;switch(o){case"vector":case"raster":case"raster-dem":return r=Ki({key:n,value:t,valueSpec:i["source_"+o.replace("-","_")],style:e.style,styleSpec:i,objectElementValidators:_a}),r;case"geojson":if(r=Ki({key:n,value:t,valueSpec:i.source_geojson,style:a,styleSpec:i,objectElementValidators:_a}),t.cluster)for(const e in t.clusterProperties){const[i,a]=t.clusterProperties[e],o="string"==typeof i?[i,["accumulated"],["get",e]]:i;r.push(...ta({key:`${n}.${e}.map`,value:a,expressionContext:"cluster-map"})),r.push(...ta({key:`${n}.${e}.reduce`,value:o,expressionContext:"cluster-reduce"}))}return r;case"video":return Ki({key:n,value:t,valueSpec:i.source_video,style:a,styleSpec:i});case"image":return Ki({key:n,value:t,valueSpec:i.source_image,style:a,styleSpec:i});case"canvas":return[new Ji(n,null,"Please use runtime APIs to add canvas sources, rather than including them in stylesheets.","source.canvas")];default:return na({key:n+".type",value:t.type,valueSpec:{values:xa(i)},style:a,styleSpec:i})}}function xa(e){return e.source.reduce((t,n)=>{const i=e[n];return"enum"===i.type.type&&(t=t.concat(Object.keys(i.type.values))),t},[])}function ka(e){const t=e.value,n=e.styleSpec,i=n.light,a=e.style;let o=[];const r=Li(t);if(void 0===t)return o;if("object"!==r)return o=o.concat([new Ji("light",t,`object expected, ${r} found`)]),o;for(const e in t){const r=e.match(/^(.*)-transition$/);o=o.concat(r&&i[r[1]]&&i[r[1]].transition?Ea({key:e,value:t[e],valueSpec:n.transition,style:a,styleSpec:n}):i[e]?Ea({key:e,value:t[e],valueSpec:i[e],style:a,styleSpec:n}):[new Ji(e,t[e],`unknown property "${e}"`)])}return o}function Oa(e){const t=e.value,n=e.key,i=e.style,a=e.styleSpec,o=a.terrain;let r=[];const s=Li(t);if(void 0===t)return r;if("object"!==s)return r=r.concat([new Ji("terrain",t,`object expected, ${s} found`)]),r;for(const e in t){const n=e.match(/^(.*)-transition$/);r=r.concat(n&&o[n[1]]&&o[n[1]].transition?Ea({key:e,value:t[e],valueSpec:a.transition,style:i,styleSpec:a}):o[e]?Ea({key:e,value:t[e],valueSpec:o[e],style:i,styleSpec:a}):[new Ji(e,t[e],`unknown property "${e}"`)])}if(t.source){const e=i.sources&&i.sources[t.source],a=e&&it(e.type);e?"raster-dem"!==a&&r.push(new Ji(n,t.source,`terrain cannot be used with a source of type ${String(a)}, it only be used with a "raster-dem" source type`)):r.push(new Ji(n,t.source,`source "${t.source}" not found`))}else r.push(new Ji(n,t,'terrain is missing required property "source"'));return r}function Ta(e){const t=e.value,n=e.style,i=e.styleSpec,a=i.fog;let o=[];const r=Li(t);if(void 0===t)return o;if("object"!==r)return o=o.concat([new Ji("fog",t,`object expected, ${r} found`)]),o;for(const e in t){const r=e.match(/^(.*)-transition$/);o=o.concat(r&&a[r[1]]&&a[r[1]].transition?Ea({key:e,value:t[e],valueSpec:i.transition,style:n,styleSpec:i}):a[e]?Ea({key:e,value:t[e],valueSpec:a[e],style:n,styleSpec:i}):[new Ji(e,t[e],`unknown property "${e}"`)])}return o}const Ca={"*":()=>[],array:$i,boolean:function(e){const t=e.value,n=e.key,i=Li(t);return"boolean"!==i?[new Ji(n,t,`boolean expected, ${i} found`)]:[]},number:Qi,color:function(e){const t=e.key,n=e.value,i=Li(n);return"string"!==i?[new Ji(t,n,`color expected, ${i} found`)]:null===Tt(n)?[new Ji(t,n,`color expected, "${n}" found`)]:[]},enum:na,filter:ma,function:ea,layer:va,object:Ki,source:wa,light:ka,terrain:Oa,fog:Ta,string:ba,formatted:function(e){return 0===ba(e).length?[]:ta(e)},resolvedImage:function(e){return 0===ba(e).length?[]:ta(e)},projection:function(e){const t=e.value,n=e.styleSpec,i=n.projection,a=e.style;let o=[];const r=Li(t);if("object"===r)for(const e in t)o=o.concat(Ea({key:e,value:t[e],valueSpec:i[e],style:a,styleSpec:n}));else"string"!==r&&(o=o.concat([new Ji("projection",t,`object or string expected, ${r} found`)]));return o}};function Ea(e){const t=e.value,n=e.valueSpec,i=e.styleSpec;return n.expression&&Di(it(t))?ea(e):n.expression&&qi(at(t))?ta(e):n.type&&Ca[n.type]?Ca[n.type](e):Ki(nt({},e,{valueSpec:n.type?i[n.type]:n}))}function Sa(e){const t=e.value,n=e.key,i=ba(e);return i.length||(-1===t.indexOf("{fontstack}")&&i.push(new Ji(n,t,'"glyphs" url must include a "{fontstack}" token')),-1===t.indexOf("{range}")&&i.push(new Ji(n,t,'"glyphs" url must include a "{range}" token'))),i}function Pa(e,t=tt){return Aa(Ea({key:"",value:e,valueSpec:t.$root,styleSpec:t,style:e,objectElementValidators:{glyphs:Sa,"*":()=>[]}}))}const Ia=e=>Aa(ga(e)),Ma=e=>Aa(ya(e));function Aa(e){return e.slice().sort((e,t)=>e.line&&t.line?e.line-t.line:0)}function ja(e,t){let n=!1;if(t&&t.length)for(const i of t)e.fire(new Qe(new Error(i.message))),n=!0;return n}var Na=La;function La(e,t,n){var i=this.cells=[];if(e instanceof ArrayBuffer){this.arrayBuffer=e;var a=new Int32Array(this.arrayBuffer);e=a[0],this.d=(t=a[1])+2*(n=a[2]);for(var o=0;o<this.d*this.d;o++){var r=a[3+o],s=a[3+o+1];i.push(r===s?null:a.subarray(r,s))}var l=a[3+i.length+1];this.keys=a.subarray(a[3+i.length],l),this.bboxes=a.subarray(l),this.insert=this._insertReadonly}else{this.d=t+2*n;for(var c=0;c<this.d*this.d;c++)i.push([]);this.keys=[],this.bboxes=[]}this.n=t,this.extent=e,this.padding=n,this.scale=t/e,this.uid=0;var u=n/t*e;this.min=-u,this.max=e+u}La.prototype.insert=function(e,t,n,i,a){this._forEachCell(t,n,i,a,this._insertCell,this.uid++),this.keys.push(e),this.bboxes.push(t),this.bboxes.push(n),this.bboxes.push(i),this.bboxes.push(a)},La.prototype._insertReadonly=function(){throw"Cannot insert into a GridIndex created from an ArrayBuffer."},La.prototype._insertCell=function(e,t,n,i,a,o){this.cells[a].push(o)},La.prototype.query=function(e,t,n,i,a){var o=this.min,r=this.max;if(e<=o&&t<=o&&r<=n&&r<=i&&!a)return Array.prototype.slice.call(this.keys);var s=[];return this._forEachCell(e,t,n,i,this._queryCell,s,{},a),s},La.prototype._queryCell=function(e,t,n,i,a,o,r,s){var l=this.cells[a];if(null!==l)for(var c=this.keys,u=this.bboxes,d=0;d<l.length;d++){var p=l[d];if(void 0===r[p]){var f=4*p;(s?s(u[f+0],u[f+1],u[f+2],u[f+3]):e<=u[f+2]&&t<=u[f+3]&&n>=u[f+0]&&i>=u[f+1])?(r[p]=!0,o.push(c[p])):r[p]=!1}}},La.prototype._forEachCell=function(e,t,n,i,a,o,r,s){for(var l=this._convertToCellCoord(e),c=this._convertToCellCoord(t),u=this._convertToCellCoord(n),d=this._convertToCellCoord(i),p=l;p<=u;p++)for(var f=c;f<=d;f++){var m=this.d*f+p;if((!s||s(this._convertFromCellCoord(p),this._convertFromCellCoord(f),this._convertFromCellCoord(p+1),this._convertFromCellCoord(f+1)))&&a.call(this,e,t,n,i,m,o,r,s))return}},La.prototype._convertFromCellCoord=function(e){return(e-this.padding)/this.scale},La.prototype._convertToCellCoord=function(e){return Math.max(0,Math.min(this.d-1,Math.floor(e*this.scale)+this.padding))},La.prototype.toArrayBuffer=function(){if(this.arrayBuffer)return this.arrayBuffer;for(var e=this.cells,t=3+this.cells.length+1+1,n=0,i=0;i<this.cells.length;i++)n+=this.cells[i].length;var a=new Int32Array(t+n+this.keys.length+this.bboxes.length);a[0]=this.extent,a[1]=this.n,a[2]=this.padding;for(var o=t,r=0;r<e.length;r++){var s=e[r];a[3+r]=o,a.set(s,o),o+=s.length}return a[3+e.length]=o,a.set(this.keys,o),a[3+e.length+1]=o+=this.keys.length,a.set(this.bboxes,o),o+=this.bboxes.length,a.buffer};var Da=f(Na);const Ra={};function Ba(e,t,n={}){Object.defineProperty(e,"_classRegistryKey",{value:t,writeable:!1}),Ra[t]={klass:e,omit:n.omit||[]}}Ba(Object,"Object"),Da.serialize=function(e,t){const n=e.toArrayBuffer();return t&&t.push(n),{buffer:n}},Da.deserialize=function(e){return new Da(e.buffer)},Object.defineProperty(Da,"name",{value:"Grid"}),Ba(Da,"Grid"),Ba(At,"Color"),Ba(Error,"Error"),Ba(ue,"AJAXError"),Ba(Dt,"ResolvedImage"),Ba(Zi,"StylePropertyFunction"),Ba(Wi,"StyleExpression",{omit:["_evaluator"]}),Ba(Yi,"ZoomDependentExpression"),Ba(Gi,"ZoomConstantExpression"),Ba(tn,"CompoundExpression",{omit:["_evaluate"]});for(const e in Pi)Ra[Pi[e]._classRegistryKey]||Ba(Pi[e],"Expression"+e);function za(e){return e&&"undefined"!=typeof ArrayBuffer&&(e instanceof ArrayBuffer||e.constructor&&"ArrayBuffer"===e.constructor.name)}function Fa(e){return n.ImageBitmap&&e instanceof n.ImageBitmap}function Ua(e,t){if(null==e||"boolean"==typeof e||"number"==typeof e||"string"==typeof e||e instanceof Boolean||e instanceof Number||e instanceof String||e instanceof Date||e instanceof RegExp)return e;if(za(e)||Fa(e))return t&&t.push(e),e;if(ArrayBuffer.isView(e)){const n=e;return t&&t.push(n.buffer),n}if(e instanceof n.ImageData)return t&&t.push(e.data.buffer),e;if(Array.isArray(e)){const n=[];for(const i of e)n.push(Ua(i,t));return n}if("object"==typeof e){const n=e.constructor,i=n._classRegistryKey;if(!i)throw new Error("can't serialize object of unregistered class "+i);const a=n.serialize?n.serialize(e,t):{};if(!n.serialize){for(const n in e)e.hasOwnProperty(n)&&(Ra[i].omit.indexOf(n)>=0||(a[n]=Ua(e[n],t)));e instanceof Error&&(a.message=e.message)}if(a.$name)throw new Error("$name property is reserved for worker serialization logic.");return"Object"!==i&&(a.$name=i),a}throw new Error("can't serialize object of type "+typeof e)}function Ha(e){if(null==e||"boolean"==typeof e||"number"==typeof e||"string"==typeof e||e instanceof Boolean||e instanceof Number||e instanceof String||e instanceof Date||e instanceof RegExp||za(e)||Fa(e)||ArrayBuffer.isView(e)||e instanceof n.ImageData)return e;if(Array.isArray(e))return e.map(Ha);if("object"==typeof e){const t=e.$name||"Object",{klass:n}=Ra[t];if(!n)throw new Error("can't deserialize unregistered class "+t);if(n.deserialize)return n.deserialize(e);const i=Object.create(n.prototype);for(const t of Object.keys(e))"$name"!==t&&(i[t]=Ha(e[t]));return i}throw new Error("can't deserialize object of type "+typeof e)}const Wa=e=>e>=128&&e<=255,qa=e=>e>=1536&&e<=1791,Va=e=>e>=1872&&e<=1919,Ga=e=>e>=2208&&e<=2303,Ya=e=>e>=4352&&e<=4607,Xa=e=>e>=5120&&e<=5759,Za=e=>e>=6016&&e<=6143,Ja=e=>e>=6320&&e<=6399,Ka=e=>e>=8192&&e<=8303,$a=e=>e>=8448&&e<=8527,Qa=e=>e>=8528&&e<=8591,eo=e=>e>=8960&&e<=9215,to=e=>e>=9216&&e<=9279,no=e=>e>=9280&&e<=9311,io=e=>e>=9312&&e<=9471,ao=e=>e>=9632&&e<=9727,oo=e=>e>=9728&&e<=9983,ro=e=>e>=11008&&e<=11263,so=e=>e>=11904&&e<=12031,lo=e=>e>=12032&&e<=12255,co=e=>e>=12272&&e<=12287,uo=e=>e>=12288&&e<=12351,po=e=>e>=12352&&e<=12447,fo=e=>e>=12448&&e<=12543,mo=e=>e>=12544&&e<=12591,ho=e=>e>=12592&&e<=12687,go=e=>e>=12688&&e<=12703,yo=e=>e>=12704&&e<=12735,vo=e=>e>=12736&&e<=12783,bo=e=>e>=12784&&e<=12799,_o=e=>e>=12800&&e<=13055,wo=e=>e>=13056&&e<=13311,xo=e=>e>=13312&&e<=19903,ko=e=>e>=19904&&e<=19967,Oo=e=>e>=19968&&e<=40959,To=e=>e>=40960&&e<=42127,Co=e=>e>=42128&&e<=42191,Eo=e=>e>=43360&&e<=43391,So=e=>e>=44032&&e<=55215,Po=e=>e>=55216&&e<=55295,Io=e=>e>=57344&&e<=63743,Mo=e=>e>=63744&&e<=64255,Ao=e=>e>=64336&&e<=65023,jo=e=>e>=65040&&e<=65055,No=e=>e>=65072&&e<=65103,Lo=e=>e>=65104&&e<=65135,Do=e=>e>=65136&&e<=65279,Ro=e=>e>=65280&&e<=65519;function Bo(e){for(const t of e)if(Uo(t.charCodeAt(0)))return!0;return!1}function zo(e){for(const t of e)if(!Fo(t.charCodeAt(0)))return!1;return!0}function Fo(e){return!(qa(e)||Va(e)||Ga(e)||Ao(e)||Do(e))}function Uo(e){return!(746!==e&&747!==e&&(e<4352||!(yo(e)||mo(e)||No(e)&&!(e>=65097&&e<=65103)||Mo(e)||wo(e)||so(e)||vo(e)||!(!uo(e)||e>=12296&&e<=12305||e>=12308&&e<=12319||12336===e)||xo(e)||Oo(e)||_o(e)||ho(e)||Eo(e)||Po(e)||Ya(e)||So(e)||po(e)||co(e)||go(e)||lo(e)||bo(e)||fo(e)&&12540!==e||!(!Ro(e)||65288===e||65289===e||65293===e||e>=65306&&e<=65310||65339===e||65341===e||65343===e||e>=65371&&e<=65503||65507===e||e>=65512&&e<=65519)||!(!Lo(e)||e>=65112&&e<=65118||e>=65123&&e<=65126)||Xa(e)||Ja(e)||jo(e)||ko(e)||To(e)||Co(e))))}function Ho(e){return!(Uo(e)||function(e){return!!(Wa(e)&&(167===e||169===e||174===e||177===e||188===e||189===e||190===e||215===e||247===e)||Ka(e)&&(8214===e||8224===e||8225===e||8240===e||8241===e||8251===e||8252===e||8258===e||8263===e||8264===e||8265===e||8273===e)||$a(e)||Qa(e)||eo(e)&&(e>=8960&&e<=8967||e>=8972&&e<=8991||e>=8996&&e<=9e3||9003===e||e>=9085&&e<=9114||e>=9150&&e<=9165||9167===e||e>=9169&&e<=9179||e>=9186&&e<=9215)||to(e)&&9251!==e||no(e)||io(e)||ao(e)||oo(e)&&!(e>=9754&&e<=9759)||ro(e)&&(e>=11026&&e<=11055||e>=11088&&e<=11097||e>=11192&&e<=11243)||uo(e)||fo(e)||Io(e)||No(e)||Lo(e)||Ro(e)||8734===e||8756===e||8757===e||e>=9984&&e<=10087||e>=10102&&e<=10131||65532===e||65533===e)}(e))}function Wo(e){return e>=1424&&e<=2303||Ao(e)||Do(e)}function qo(e,t){return!(!t&&Wo(e)||e>=2304&&e<=3583||e>=3840&&e<=4255||Za(e))}function Vo(e){for(const t of e)if(Wo(t.charCodeAt(0)))return!0;return!1}const Go="deferred",Yo="loading",Xo="loaded";let Zo=null,Jo="unavailable",Ko=null;const $o=function(e){e&&"string"==typeof e&&e.indexOf("NetworkError")>-1&&(Jo="error"),Zo&&Zo(e)};function Qo(){er.fire(new $e("pluginStateChange",{pluginStatus:Jo,pluginURL:Ko}))}const er=new et,tr=function(){return Jo},nr=function(){if(Jo!==Go||!Ko)throw new Error("rtl-text-plugin cannot be downloaded unless a pluginURL is specified");Jo=Yo,Qo(),Ko&&fe({url:Ko},e=>{e?$o(e):(Jo=Xo,Qo())})},ir={applyArabicShaping:null,processBidirectionalText:null,processStyledBidirectionalText:null,isLoaded:()=>Jo===Xo||null!=ir.applyArabicShaping,isLoading:()=>Jo===Yo,setState(e){Jo=e.pluginStatus,Ko=e.pluginURL},isParsed:()=>null!=ir.applyArabicShaping&&null!=ir.processBidirectionalText&&null!=ir.processStyledBidirectionalText,getPluginURL:()=>Ko};class ar{constructor(e,t){this.zoom=e,t?(this.now=t.now,this.fadeDuration=t.fadeDuration,this.transition=t.transition,this.pitch=t.pitch):(this.now=0,this.fadeDuration=0,this.transition={},this.pitch=0)}isSupportedScript(e){return function(e,t){for(const n of e)if(!qo(n.charCodeAt(0),t))return!1;return!0}(e,ir.isLoaded())}}class or{constructor(e,t){this.property=e,this.value=t,this.expression=function(e,t){if(Di(e))return new Zi(e,t);if(qi(e)){const n=Xi(e,t);if("error"===n.result)throw new Error(n.value.map(e=>`${e.key}: ${e.message}`).join(", "));return n.value}{let n=e;return"string"==typeof e&&"color"===t.type&&(n=At.parse(e)),{kind:"constant",evaluate:()=>n}}}(void 0===t?e.specification.default:t,e.specification)}isDataDriven(){return"source"===this.expression.kind||"composite"===this.expression.kind}possiblyEvaluate(e,t,n){return this.property.possiblyEvaluate(this,e,t,n)}}class rr{constructor(e){this.property=e,this.value=new or(e,void 0)}transitioned(e,t){return new lr(this.property,this.value,t,j({},e.transition,this.transition),e.now)}untransitioned(){return new lr(this.property,this.value,null,{},0)}}class sr{constructor(e){this._properties=e,this._values=Object.create(e.defaultTransitionablePropertyValues)}getValue(e){return W(this._values[e].value.value)}setValue(e,t){this._values.hasOwnProperty(e)||(this._values[e]=new rr(this._values[e].property)),this._values[e].value=new or(this._values[e].property,null===t?void 0:W(t))}getTransition(e){return W(this._values[e].transition)}setTransition(e,t){this._values.hasOwnProperty(e)||(this._values[e]=new rr(this._values[e].property)),this._values[e].transition=W(t)||void 0}serialize(){const e={};for(const t of Object.keys(this._values)){const n=this.getValue(t);void 0!==n&&(e[t]=n);const i=this.getTransition(t);void 0!==i&&(e[t+"-transition"]=i)}return e}transitioned(e,t){const n=new cr(this._properties);for(const i of Object.keys(this._values))n._values[i]=this._values[i].transitioned(e,t._values[i]);return n}untransitioned(){const e=new cr(this._properties);for(const t of Object.keys(this._values))e._values[t]=this._values[t].untransitioned();return e}}class lr{constructor(e,t,n,i,a){const o=i.delay||0,r=i.duration||0;a=a||0,this.property=e,this.value=t,this.begin=a+o,this.end=this.begin+r,e.specification.transition&&(i.delay||i.duration)&&(this.prior=n)}possiblyEvaluate(e,t,n){const i=e.now||0,a=this.value.possiblyEvaluate(e,t,n),o=this.prior;if(o){if(i>this.end)return this.prior=null,a;if(this.value.isDataDriven())return this.prior=null,a;if(i<this.begin)return o.possiblyEvaluate(e,t,n);{const r=(i-this.begin)/(this.end-this.begin);return this.property.interpolate(o.possiblyEvaluate(e,t,n),a,T(r))}}return a}}class cr{constructor(e){this._properties=e,this._values=Object.create(e.defaultTransitioningPropertyValues)}possiblyEvaluate(e,t,n){const i=new pr(this._properties);for(const a of Object.keys(this._values))i._values[a]=this._values[a].possiblyEvaluate(e,t,n);return i}hasTransition(){for(const e of Object.keys(this._values))if(this._values[e].prior)return!0;return!1}}class ur{constructor(e){this._properties=e,this._values=Object.create(e.defaultPropertyValues)}getValue(e){return W(this._values[e].value)}setValue(e,t){this._values[e]=new or(this._values[e].property,null===t?void 0:W(t))}serialize(){const e={};for(const t of Object.keys(this._values)){const n=this.getValue(t);void 0!==n&&(e[t]=n)}return e}possiblyEvaluate(e,t,n){const i=new pr(this._properties);for(const a of Object.keys(this._values))i._values[a]=this._values[a].possiblyEvaluate(e,t,n);return i}}class dr{constructor(e,t,n){this.property=e,this.value=t,this.parameters=n}isConstant(){return"constant"===this.value.kind}constantOr(e){return"constant"===this.value.kind?this.value.value:e}evaluate(e,t,n,i){return this.property.evaluate(this.value,this.parameters,e,t,n,i)}}class pr{constructor(e){this._properties=e,this._values=Object.create(e.defaultPossiblyEvaluatedValues)}get(e){return this._values[e]}}class fr{constructor(e){this.specification=e}possiblyEvaluate(e,t){return e.expression.evaluate(t)}interpolate(e,t,n){const i=jn[this.specification.type];return i?i(e,t,n):e}}class mr{constructor(e,t){this.specification=e,this.overrides=t}possiblyEvaluate(e,t,n,i){return new dr(this,"constant"===e.expression.kind||"camera"===e.expression.kind?{kind:"constant",value:e.expression.evaluate(t,null,{},n,i)}:e.expression,t)}interpolate(e,t,n){if("constant"!==e.value.kind||"constant"!==t.value.kind)return e;if(void 0===e.value.value||void 0===t.value.value)return new dr(this,{kind:"constant",value:void 0},e.parameters);const i=jn[this.specification.type];return i?new dr(this,{kind:"constant",value:i(e.value.value,t.value.value,n)},e.parameters):e}evaluate(e,t,n,i,a,o){return"constant"===e.kind?e.value:e.evaluate(t,n,i,a,o)}}class hr{constructor(e){this.specification=e}possiblyEvaluate(e,t,n,i){return!!e.expression.evaluate(t,null,{},n,i)}interpolate(){return!1}}class gr{constructor(e){this.properties=e,this.defaultPropertyValues={},this.defaultTransitionablePropertyValues={},this.defaultTransitioningPropertyValues={},this.defaultPossiblyEvaluatedValues={},this.overridableProperties=[];const t=new ar(0,{});for(const n in e){const i=e[n];i.specification.overridable&&this.overridableProperties.push(n);const a=this.defaultPropertyValues[n]=new or(i,void 0),o=this.defaultTransitionablePropertyValues[n]=new rr(i);this.defaultTransitioningPropertyValues[n]=o.untransitioned(),this.defaultPossiblyEvaluatedValues[n]=a.possiblyEvaluate(t)}}}function yr(e,t){return 256*(e=S(Math.floor(e),0,255))+S(Math.floor(t),0,255)}Ba(mr,"DataDrivenProperty"),Ba(fr,"DataConstantProperty"),Ba(hr,"ColorRampProperty");const vr={Int8:Int8Array,Uint8:Uint8Array,Int16:Int16Array,Uint16:Uint16Array,Int32:Int32Array,Uint32:Uint32Array,Float32:Float32Array};class br{constructor(e,t){this._structArray=e,this._pos1=t*this.size,this._pos2=this._pos1/2,this._pos4=this._pos1/4,this._pos8=this._pos1/8}}class _r{constructor(){this.isTransferred=!1,this.capacity=-1,this.resize(0)}static serialize(e,t){return e._trim(),t&&(e.isTransferred=!0,t.push(e.arrayBuffer)),{length:e.length,arrayBuffer:e.arrayBuffer}}static deserialize(e){const t=Object.create(this.prototype);return t.arrayBuffer=e.arrayBuffer,t.length=e.length,t.capacity=e.arrayBuffer.byteLength/t.bytesPerElement,t._refreshViews(),t}_trim(){this.length!==this.capacity&&(this.capacity=this.length,this.arrayBuffer=this.arrayBuffer.slice(0,this.length*this.bytesPerElement),this._refreshViews())}clear(){this.length=0}resize(e){this.reserve(e),this.length=e}reserve(e){if(e>this.capacity){this.capacity=Math.max(e,Math.floor(5*this.capacity),128),this.arrayBuffer=new ArrayBuffer(this.capacity*this.bytesPerElement);const t=this.uint8;this._refreshViews(),t&&this.uint8.set(t)}}_refreshViews(){throw new Error("_refreshViews() must be implemented by each concrete StructArray layout")}destroy(){this.int8=this.uint8=this.int16=this.uint16=this.int32=this.uint32=this.float32=null,this.arrayBuffer=null}}function wr(e,t=1){let n=0,i=0;return{members:e.map(e=>{const a=vr[e.type].BYTES_PER_ELEMENT,o=n=xr(n,Math.max(t,a)),r=e.components||1;return i=Math.max(i,a),n+=a*r,{name:e.name,type:e.type,components:r,offset:o}}),size:xr(n,Math.max(i,t)),alignment:t}}function xr(e,t){return Math.ceil(e/t)*t}class kr extends _r{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(e,t){const n=this.length;return this.resize(n+1),this.emplace(n,e,t)}emplace(e,t,n){const i=2*e;return this.int16[i+0]=t,this.int16[i+1]=n,e}}kr.prototype.bytesPerElement=4,Ba(kr,"StructArrayLayout2i4");class Or extends _r{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(e,t,n){const i=this.length;return this.resize(i+1),this.emplace(i,e,t,n)}emplace(e,t,n,i){const a=3*e;return this.int16[a+0]=t,this.int16[a+1]=n,this.int16[a+2]=i,e}}Or.prototype.bytesPerElement=6,Ba(Or,"StructArrayLayout3i6");class Tr extends _r{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(e,t,n,i){const a=this.length;return this.resize(a+1),this.emplace(a,e,t,n,i)}emplace(e,t,n,i,a){const o=4*e;return this.int16[o+0]=t,this.int16[o+1]=n,this.int16[o+2]=i,this.int16[o+3]=a,e}}Tr.prototype.bytesPerElement=8,Ba(Tr,"StructArrayLayout4i8");class Cr extends _r{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(e,t,n,i,a,o,r){const s=this.length;return this.resize(s+1),this.emplace(s,e,t,n,i,a,o,r)}emplace(e,t,n,i,a,o,r,s){const l=6*e,c=12*e,u=3*e;return this.int16[l+0]=t,this.int16[l+1]=n,this.uint8[c+4]=i,this.uint8[c+5]=a,this.uint8[c+6]=o,this.uint8[c+7]=r,this.float32[u+2]=s,e}}Cr.prototype.bytesPerElement=12,Ba(Cr,"StructArrayLayout2i4ub1f12");class Er extends _r{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(e,t,n,i){const a=this.length;return this.resize(a+1),this.emplace(a,e,t,n,i)}emplace(e,t,n,i,a){const o=4*e;return this.float32[o+0]=t,this.float32[o+1]=n,this.float32[o+2]=i,this.float32[o+3]=a,e}}Er.prototype.bytesPerElement=16,Ba(Er,"StructArrayLayout4f16");class Sr extends _r{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(e,t,n,i,a){const o=this.length;return this.resize(o+1),this.emplace(o,e,t,n,i,a)}emplace(e,t,n,i,a,o){const r=6*e,s=3*e;return this.uint16[r+0]=t,this.uint16[r+1]=n,this.uint16[r+2]=i,this.uint16[r+3]=a,this.float32[s+2]=o,e}}Sr.prototype.bytesPerElement=12,Ba(Sr,"StructArrayLayout4ui1f12");class Pr extends _r{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(e,t,n,i){const a=this.length;return this.resize(a+1),this.emplace(a,e,t,n,i)}emplace(e,t,n,i,a){const o=4*e;return this.uint16[o+0]=t,this.uint16[o+1]=n,this.uint16[o+2]=i,this.uint16[o+3]=a,e}}Pr.prototype.bytesPerElement=8,Ba(Pr,"StructArrayLayout4ui8");class Ir extends _r{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(e,t,n,i,a,o){const r=this.length;return this.resize(r+1),this.emplace(r,e,t,n,i,a,o)}emplace(e,t,n,i,a,o,r){const s=6*e;return this.int16[s+0]=t,this.int16[s+1]=n,this.int16[s+2]=i,this.int16[s+3]=a,this.int16[s+4]=o,this.int16[s+5]=r,e}}Ir.prototype.bytesPerElement=12,Ba(Ir,"StructArrayLayout6i12");class Mr extends _r{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(e,t,n,i,a,o,r,s,l,c,u,d){const p=this.length;return this.resize(p+1),this.emplace(p,e,t,n,i,a,o,r,s,l,c,u,d)}emplace(e,t,n,i,a,o,r,s,l,c,u,d,p){const f=12*e;return this.int16[f+0]=t,this.int16[f+1]=n,this.int16[f+2]=i,this.int16[f+3]=a,this.uint16[f+4]=o,this.uint16[f+5]=r,this.uint16[f+6]=s,this.uint16[f+7]=l,this.int16[f+8]=c,this.int16[f+9]=u,this.int16[f+10]=d,this.int16[f+11]=p,e}}Mr.prototype.bytesPerElement=24,Ba(Mr,"StructArrayLayout4i4ui4i24");class Ar extends _r{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(e,t,n,i,a,o){const r=this.length;return this.resize(r+1),this.emplace(r,e,t,n,i,a,o)}emplace(e,t,n,i,a,o,r){const s=10*e,l=5*e;return this.int16[s+0]=t,this.int16[s+1]=n,this.int16[s+2]=i,this.float32[l+2]=a,this.float32[l+3]=o,this.float32[l+4]=r,e}}Ar.prototype.bytesPerElement=20,Ba(Ar,"StructArrayLayout3i3f20");class jr extends _r{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer)}emplaceBack(e){const t=this.length;return this.resize(t+1),this.emplace(t,e)}emplace(e,t){return this.uint32[1*e+0]=t,e}}jr.prototype.bytesPerElement=4,Ba(jr,"StructArrayLayout1ul4");class Nr extends _r{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(e,t,n,i,a,o,r,s,l,c,u,d,p){const f=this.length;return this.resize(f+1),this.emplace(f,e,t,n,i,a,o,r,s,l,c,u,d,p)}emplace(e,t,n,i,a,o,r,s,l,c,u,d,p,f){const m=20*e,h=10*e;return this.int16[m+0]=t,this.int16[m+1]=n,this.int16[m+2]=i,this.int16[m+3]=a,this.int16[m+4]=o,this.float32[h+3]=r,this.float32[h+4]=s,this.float32[h+5]=l,this.float32[h+6]=c,this.int16[m+14]=u,this.uint32[h+8]=d,this.uint16[m+18]=p,this.uint16[m+19]=f,e}}Nr.prototype.bytesPerElement=40,Ba(Nr,"StructArrayLayout5i4f1i1ul2ui40");class Lr extends _r{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(e,t,n,i,a,o,r){const s=this.length;return this.resize(s+1),this.emplace(s,e,t,n,i,a,o,r)}emplace(e,t,n,i,a,o,r,s){const l=8*e;return this.int16[l+0]=t,this.int16[l+1]=n,this.int16[l+2]=i,this.int16[l+4]=a,this.int16[l+5]=o,this.int16[l+6]=r,this.int16[l+7]=s,e}}Lr.prototype.bytesPerElement=16,Ba(Lr,"StructArrayLayout3i2i2i16");class Dr extends _r{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(e,t,n,i,a){const o=this.length;return this.resize(o+1),this.emplace(o,e,t,n,i,a)}emplace(e,t,n,i,a,o){const r=4*e,s=8*e;return this.float32[r+0]=t,this.float32[r+1]=n,this.float32[r+2]=i,this.int16[s+6]=a,this.int16[s+7]=o,e}}Dr.prototype.bytesPerElement=16,Ba(Dr,"StructArrayLayout2f1f2i16");class Rr extends _r{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(e,t,n,i){const a=this.length;return this.resize(a+1),this.emplace(a,e,t,n,i)}emplace(e,t,n,i,a){const o=12*e,r=3*e;return this.uint8[o+0]=t,this.uint8[o+1]=n,this.float32[r+1]=i,this.float32[r+2]=a,e}}Rr.prototype.bytesPerElement=12,Ba(Rr,"StructArrayLayout2ub2f12");class Br extends _r{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(e,t,n){const i=this.length;return this.resize(i+1),this.emplace(i,e,t,n)}emplace(e,t,n,i){const a=3*e;return this.float32[a+0]=t,this.float32[a+1]=n,this.float32[a+2]=i,e}}Br.prototype.bytesPerElement=12,Ba(Br,"StructArrayLayout3f12");class zr extends _r{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(e,t,n){const i=this.length;return this.resize(i+1),this.emplace(i,e,t,n)}emplace(e,t,n,i){const a=3*e;return this.uint16[a+0]=t,this.uint16[a+1]=n,this.uint16[a+2]=i,e}}zr.prototype.bytesPerElement=6,Ba(zr,"StructArrayLayout3ui6");class Fr extends _r{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer)}emplaceBack(e,t,n,i,a,o,r,s,l,c,u,d,p,f,m,h,g,y,v,b,_){const w=this.length;return this.resize(w+1),this.emplace(w,e,t,n,i,a,o,r,s,l,c,u,d,p,f,m,h,g,y,v,b,_)}emplace(e,t,n,i,a,o,r,s,l,c,u,d,p,f,m,h,g,y,v,b,_,w){const x=30*e,k=15*e,O=60*e;return this.int16[x+0]=t,this.int16[x+1]=n,this.int16[x+2]=i,this.float32[k+2]=a,this.float32[k+3]=o,this.uint16[x+8]=r,this.uint16[x+9]=s,this.uint32[k+5]=l,this.uint32[k+6]=c,this.uint32[k+7]=u,this.uint16[x+16]=d,this.uint16[x+17]=p,this.uint16[x+18]=f,this.float32[k+10]=m,this.float32[k+11]=h,this.uint8[O+48]=g,this.uint8[O+49]=y,this.uint8[O+50]=v,this.uint32[k+13]=b,this.int16[x+28]=_,this.uint8[O+58]=w,e}}Fr.prototype.bytesPerElement=60,Ba(Fr,"StructArrayLayout3i2f2ui3ul3ui2f3ub1ul1i1ub60");class Ur extends _r{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer)}emplaceBack(e,t,n,i,a,o,r,s,l,c,u,d,p,f,m,h,g,y,v,b,_,w,x,k,O,T,C,E,S,P){const I=this.length;return this.resize(I+1),this.emplace(I,e,t,n,i,a,o,r,s,l,c,u,d,p,f,m,h,g,y,v,b,_,w,x,k,O,T,C,E,S,P)}emplace(e,t,n,i,a,o,r,s,l,c,u,d,p,f,m,h,g,y,v,b,_,w,x,k,O,T,C,E,S,P,I){const M=38*e,A=19*e;return this.int16[M+0]=t,this.int16[M+1]=n,this.int16[M+2]=i,this.float32[A+2]=a,this.float32[A+3]=o,this.int16[M+8]=r,this.int16[M+9]=s,this.int16[M+10]=l,this.int16[M+11]=c,this.int16[M+12]=u,this.int16[M+13]=d,this.uint16[M+14]=p,this.uint16[M+15]=f,this.uint16[M+16]=m,this.uint16[M+17]=h,this.uint16[M+18]=g,this.uint16[M+19]=y,this.uint16[M+20]=v,this.uint16[M+21]=b,this.uint16[M+22]=_,this.uint16[M+23]=w,this.uint16[M+24]=x,this.uint16[M+25]=k,this.uint16[M+26]=O,this.uint16[M+27]=T,this.uint16[M+28]=C,this.uint32[A+15]=E,this.float32[A+16]=S,this.float32[A+17]=P,this.float32[A+18]=I,e}}Ur.prototype.bytesPerElement=76,Ba(Ur,"StructArrayLayout3i2f6i15ui1ul3f76");class Hr extends _r{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(e){const t=this.length;return this.resize(t+1),this.emplace(t,e)}emplace(e,t){return this.float32[1*e+0]=t,e}}Hr.prototype.bytesPerElement=4,Ba(Hr,"StructArrayLayout1f4");class Wr extends _r{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(e,t,n,i,a){const o=this.length;return this.resize(o+1),this.emplace(o,e,t,n,i,a)}emplace(e,t,n,i,a,o){const r=5*e;return this.float32[r+0]=t,this.float32[r+1]=n,this.float32[r+2]=i,this.float32[r+3]=a,this.float32[r+4]=o,e}}Wr.prototype.bytesPerElement=20,Ba(Wr,"StructArrayLayout5f20");class qr extends _r{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(e,t,n,i){const a=this.length;return this.resize(a+1),this.emplace(a,e,t,n,i)}emplace(e,t,n,i,a){const o=6*e;return this.uint32[3*e+0]=t,this.uint16[o+2]=n,this.uint16[o+3]=i,this.uint16[o+4]=a,e}}qr.prototype.bytesPerElement=12,Ba(qr,"StructArrayLayout1ul3ui12");class Vr extends _r{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(e,t){const n=this.length;return this.resize(n+1),this.emplace(n,e,t)}emplace(e,t,n){const i=2*e;return this.uint16[i+0]=t,this.uint16[i+1]=n,e}}Vr.prototype.bytesPerElement=4,Ba(Vr,"StructArrayLayout2ui4");class Gr extends _r{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(e){const t=this.length;return this.resize(t+1),this.emplace(t,e)}emplace(e,t){return this.uint16[1*e+0]=t,e}}Gr.prototype.bytesPerElement=2,Ba(Gr,"StructArrayLayout1ui2");class Yr extends _r{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(e,t){const n=this.length;return this.resize(n+1),this.emplace(n,e,t)}emplace(e,t,n){const i=2*e;return this.float32[i+0]=t,this.float32[i+1]=n,e}}Yr.prototype.bytesPerElement=8,Ba(Yr,"StructArrayLayout2f8");class Xr extends br{get projectedAnchorX(){return this._structArray.int16[this._pos2+0]}get projectedAnchorY(){return this._structArray.int16[this._pos2+1]}get projectedAnchorZ(){return this._structArray.int16[this._pos2+2]}get tileAnchorX(){return this._structArray.int16[this._pos2+3]}get tileAnchorY(){return this._structArray.int16[this._pos2+4]}get x1(){return this._structArray.float32[this._pos4+3]}get y1(){return this._structArray.float32[this._pos4+4]}get x2(){return this._structArray.float32[this._pos4+5]}get y2(){return this._structArray.float32[this._pos4+6]}get padding(){return this._structArray.int16[this._pos2+14]}get featureIndex(){return this._structArray.uint32[this._pos4+8]}get sourceLayerIndex(){return this._structArray.uint16[this._pos2+18]}get bucketIndex(){return this._structArray.uint16[this._pos2+19]}}Xr.prototype.size=40;class Zr extends Nr{get(e){return new Xr(this,e)}}Ba(Zr,"CollisionBoxArray");class Jr extends br{get projectedAnchorX(){return this._structArray.int16[this._pos2+0]}get projectedAnchorY(){return this._structArray.int16[this._pos2+1]}get projectedAnchorZ(){return this._structArray.int16[this._pos2+2]}get tileAnchorX(){return this._structArray.float32[this._pos4+2]}get tileAnchorY(){return this._structArray.float32[this._pos4+3]}get glyphStartIndex(){return this._structArray.uint16[this._pos2+8]}get numGlyphs(){return this._structArray.uint16[this._pos2+9]}get vertexStartIndex(){return this._structArray.uint32[this._pos4+5]}get lineStartIndex(){return this._structArray.uint32[this._pos4+6]}get lineLength(){return this._structArray.uint32[this._pos4+7]}get segment(){return this._structArray.uint16[this._pos2+16]}get lowerSize(){return this._structArray.uint16[this._pos2+17]}get upperSize(){return this._structArray.uint16[this._pos2+18]}get lineOffsetX(){return this._structArray.float32[this._pos4+10]}get lineOffsetY(){return this._structArray.float32[this._pos4+11]}get writingMode(){return this._structArray.uint8[this._pos1+48]}get placedOrientation(){return this._structArray.uint8[this._pos1+49]}set placedOrientation(e){this._structArray.uint8[this._pos1+49]=e}get hidden(){return this._structArray.uint8[this._pos1+50]}set hidden(e){this._structArray.uint8[this._pos1+50]=e}get crossTileID(){return this._structArray.uint32[this._pos4+13]}set crossTileID(e){this._structArray.uint32[this._pos4+13]=e}get associatedIconIndex(){return this._structArray.int16[this._pos2+28]}get flipState(){return this._structArray.uint8[this._pos1+58]}set flipState(e){this._structArray.uint8[this._pos1+58]=e}}Jr.prototype.size=60;class Kr extends Fr{get(e){return new Jr(this,e)}}Ba(Kr,"PlacedSymbolArray");class $r extends br{get projectedAnchorX(){return this._structArray.int16[this._pos2+0]}get projectedAnchorY(){return this._structArray.int16[this._pos2+1]}get projectedAnchorZ(){return this._structArray.int16[this._pos2+2]}get tileAnchorX(){return this._structArray.float32[this._pos4+2]}get tileAnchorY(){return this._structArray.float32[this._pos4+3]}get rightJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+8]}get centerJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+9]}get leftJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+10]}get verticalPlacedTextSymbolIndex(){return this._structArray.int16[this._pos2+11]}get placedIconSymbolIndex(){return this._structArray.int16[this._pos2+12]}get verticalPlacedIconSymbolIndex(){return this._structArray.int16[this._pos2+13]}get key(){return this._structArray.uint16[this._pos2+14]}get textBoxStartIndex(){return this._structArray.uint16[this._pos2+15]}get textBoxEndIndex(){return this._structArray.uint16[this._pos2+16]}get verticalTextBoxStartIndex(){return this._structArray.uint16[this._pos2+17]}get verticalTextBoxEndIndex(){return this._structArray.uint16[this._pos2+18]}get iconBoxStartIndex(){return this._structArray.uint16[this._pos2+19]}get iconBoxEndIndex(){return this._structArray.uint16[this._pos2+20]}get verticalIconBoxStartIndex(){return this._structArray.uint16[this._pos2+21]}get verticalIconBoxEndIndex(){return this._structArray.uint16[this._pos2+22]}get featureIndex(){return this._structArray.uint16[this._pos2+23]}get numHorizontalGlyphVertices(){return this._structArray.uint16[this._pos2+24]}get numVerticalGlyphVertices(){return this._structArray.uint16[this._pos2+25]}get numIconVertices(){return this._structArray.uint16[this._pos2+26]}get numVerticalIconVertices(){return this._structArray.uint16[this._pos2+27]}get useRuntimeCollisionCircles(){return this._structArray.uint16[this._pos2+28]}get crossTileID(){return this._structArray.uint32[this._pos4+15]}set crossTileID(e){this._structArray.uint32[this._pos4+15]=e}get textOffset0(){return this._structArray.float32[this._pos4+16]}get textOffset1(){return this._structArray.float32[this._pos4+17]}get collisionCircleDiameter(){return this._structArray.float32[this._pos4+18]}}$r.prototype.size=76;class Qr extends Ur{get(e){return new $r(this,e)}}Ba(Qr,"SymbolInstanceArray");class es extends Hr{getoffsetX(e){return this.float32[1*e+0]}}Ba(es,"GlyphOffsetArray");class ts extends kr{getx(e){return this.int16[2*e+0]}gety(e){return this.int16[2*e+1]}}Ba(ts,"SymbolLineVertexArray");class ns extends br{get featureIndex(){return this._structArray.uint32[this._pos4+0]}get sourceLayerIndex(){return this._structArray.uint16[this._pos2+2]}get bucketIndex(){return this._structArray.uint16[this._pos2+3]}get layoutVertexArrayOffset(){return this._structArray.uint16[this._pos2+4]}}ns.prototype.size=12;class is extends qr{get(e){return new ns(this,e)}}Ba(is,"FeatureIndexArray");class as extends Vr{geta_centroid_pos0(e){return this.uint16[2*e+0]}geta_centroid_pos1(e){return this.uint16[2*e+1]}}Ba(as,"FillExtrusionCentroidArray");const os=wr([{name:"a_pattern",components:4,type:"Uint16"},{name:"a_pixel_ratio",components:1,type:"Float32"}]),rs=wr([{name:"a_dash",components:4,type:"Uint16"}]);var ss={exports:{}},ls={exports:{}};ls.exports=function(e,t){var n,i,a,o,r,s,l,c;for(i=e.length-(n=3&e.length),a=t,r=3432918353,s=461845907,c=0;c<i;)l=255&e.charCodeAt(c)|(255&e.charCodeAt(++c))<<8|(255&e.charCodeAt(++c))<<16|(255&e.charCodeAt(++c))<<24,++c,a=27492+(65535&(o=5*(65535&(a=(a^=l=(65535&(l=(l=(65535&l)*r+(((l>>>16)*r&65535)<<16)&4294967295)<<15|l>>>17))*s+(((l>>>16)*s&65535)<<16)&4294967295)<<13|a>>>19))+((5*(a>>>16)&65535)<<16)&4294967295))+((58964+(o>>>16)&65535)<<16);switch(l=0,n){case 3:l^=(255&e.charCodeAt(c+2))<<16;case 2:l^=(255&e.charCodeAt(c+1))<<8;case 1:a^=l=(65535&(l=(l=(65535&(l^=255&e.charCodeAt(c)))*r+(((l>>>16)*r&65535)<<16)&4294967295)<<15|l>>>17))*s+(((l>>>16)*s&65535)<<16)&4294967295}return a^=e.length,a=2246822507*(65535&(a^=a>>>16))+((2246822507*(a>>>16)&65535)<<16)&4294967295,a=3266489909*(65535&(a^=a>>>13))+((3266489909*(a>>>16)&65535)<<16)&4294967295,(a^=a>>>16)>>>0};var cs=ls.exports,us={exports:{}};us.exports=function(e,t){for(var n,i=e.length,a=t^i,o=0;i>=4;)n=1540483477*(65535&(n=255&e.charCodeAt(o)|(255&e.charCodeAt(++o))<<8|(255&e.charCodeAt(++o))<<16|(255&e.charCodeAt(++o))<<24))+((1540483477*(n>>>16)&65535)<<16),a=1540483477*(65535&a)+((1540483477*(a>>>16)&65535)<<16)^(n=1540483477*(65535&(n^=n>>>24))+((1540483477*(n>>>16)&65535)<<16)),i-=4,++o;switch(i){case 3:a^=(255&e.charCodeAt(o+2))<<16;case 2:a^=(255&e.charCodeAt(o+1))<<8;case 1:a=1540483477*(65535&(a^=255&e.charCodeAt(o)))+((1540483477*(a>>>16)&65535)<<16)}return a=1540483477*(65535&(a^=a>>>13))+((1540483477*(a>>>16)&65535)<<16),(a^=a>>>15)>>>0};var ds=cs,ps=us.exports;ss.exports=ds,ss.exports.murmur3=ds,ss.exports.murmur2=ps;var fs=f(ss.exports);class ms{constructor(){this.ids=[],this.positions=[],this.indexed=!1}add(e,t,n,i){this.ids.push(hs(e)),this.positions.push(t,n,i)}getPositions(e){const t=hs(e);let n=0,i=this.ids.length-1;for(;n<i;){const e=n+i>>1;this.ids[e]>=t?i=e:n=e+1}const a=[];for(;this.ids[n]===t;)a.push({index:this.positions[3*n],start:this.positions[3*n+1],end:this.positions[3*n+2]}),n++;return a}static serialize(e,t){const n=new Float64Array(e.ids),i=new Uint32Array(e.positions);return function e(t,n,i,a){for(;i<a;){const o=t[i+a>>1];let r=i-1,s=a+1;for(;;){do{r++}while(t[r]<o);do{s--}while(t[s]>o);if(r>=s)break;gs(t,r,s),gs(n,3*r,3*s),gs(n,3*r+1,3*s+1),gs(n,3*r+2,3*s+2)}s-i<a-s?(e(t,n,i,s),i=s+1):(e(t,n,s+1,a),a=s)}}(n,i,0,n.length-1),t&&t.push(n.buffer,i.buffer),{ids:n,positions:i}}static deserialize(e){const t=new ms;return t.ids=e.ids,t.positions=e.positions,t.indexed=!0,t}}function hs(e){const t=+e;return!isNaN(t)&&Number.MIN_SAFE_INTEGER<=t&&t<=Number.MAX_SAFE_INTEGER?t:fs(String(e))}function gs(e,t,n){const i=e[t];e[t]=e[n],e[n]=i}Ba(ms,"FeaturePositionMap");class ys{constructor(e){this.gl=e.gl,this.initialized=!1}fetchUniformLocation(e,t){return this.location||this.initialized||(this.location=this.gl.getUniformLocation(e,t),this.initialized=!0),!!this.location}}class vs extends ys{constructor(e){super(e),this.current=0}set(e,t,n){this.fetchUniformLocation(e,t)&&this.current!==n&&(this.current=n,this.gl.uniform1f(this.location,n))}}class bs extends ys{constructor(e){super(e),this.current=[0,0,0,0]}set(e,t,n){this.fetchUniformLocation(e,t)&&(n[0]===this.current[0]&&n[1]===this.current[1]&&n[2]===this.current[2]&&n[3]===this.current[3]||(this.current=n,this.gl.uniform4f(this.location,n[0],n[1],n[2],n[3])))}}class _s extends ys{constructor(e){super(e),this.current=At.transparent}set(e,t,n){this.fetchUniformLocation(e,t)&&(n.r===this.current.r&&n.g===this.current.g&&n.b===this.current.b&&n.a===this.current.a||(this.current=n,this.gl.uniform4f(this.location,n.r,n.g,n.b,n.a)))}}const ws=new Float32Array(16),xs=new Float32Array(9),ks=new Float32Array(4);function Os(e){return[yr(255*e.r,255*e.g),yr(255*e.b,255*e.a)]}class Ts{constructor(e,t,n){this.value=e,this.uniformNames=t.map(e=>"u_"+e),this.type=n}setUniform(e,t,n,i,a){t.set(e,a,i.constantOr(this.value))}getBinding(e,t){return"color"===this.type?new _s(e):new vs(e)}}class Cs{constructor(e,t){this.uniformNames=t.map(e=>"u_"+e),this.pattern=null,this.pixelRatio=1}setConstantPatternPositions(e){this.pixelRatio=e.pixelRatio||1,this.pattern=e.tl.concat(e.br)}setUniform(e,t,n,i,a){const o="u_pattern"===a||"u_dash"===a?this.pattern:"u_pixel_ratio"===a?this.pixelRatio:null;o&&t.set(e,a,o)}getBinding(e,t){return"u_pattern"===t||"u_dash"===t?new bs(e):new vs(e)}}class Es{constructor(e,t,n,i){this.expression=e,this.type=n,this.maxValue=0,this.paintVertexAttributes=t.map(e=>({name:"a_"+e,type:"Float32",components:"color"===n?2:1,offset:0})),this.paintVertexArray=new i}populatePaintArray(e,t,n,i,a,o){const r=this.paintVertexArray.length,s=this.expression.evaluate(new ar(0),t,{},a,i,o);this.paintVertexArray.resize(e),this._setPaintValue(r,e,s)}updatePaintArray(e,t,n,i,a){const o=this.expression.evaluate({zoom:0},n,i,void 0,a);this._setPaintValue(e,t,o)}_setPaintValue(e,t,n){if("color"===this.type){const i=Os(n);for(let n=e;n<t;n++)this.paintVertexArray.emplace(n,i[0],i[1])}else{for(let i=e;i<t;i++)this.paintVertexArray.emplace(i,n);this.maxValue=Math.max(this.maxValue,Math.abs(n))}}upload(e){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=e.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))}destroy(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}}class Ss{constructor(e,t,n,i,a,o){this.expression=e,this.uniformNames=t.map(e=>`u_${e}_t`),this.type=n,this.useIntegerZoom=i,this.zoom=a,this.maxValue=0,this.paintVertexAttributes=t.map(e=>({name:"a_"+e,type:"Float32",components:"color"===n?4:2,offset:0})),this.paintVertexArray=new o}populatePaintArray(e,t,n,i,a,o){const r=this.expression.evaluate(new ar(this.zoom),t,{},a,i,o),s=this.expression.evaluate(new ar(this.zoom+1),t,{},a,i,o),l=this.paintVertexArray.length;this.paintVertexArray.resize(e),this._setPaintValue(l,e,r,s)}updatePaintArray(e,t,n,i,a){const o=this.expression.evaluate({zoom:this.zoom},n,i,void 0,a),r=this.expression.evaluate({zoom:this.zoom+1},n,i,void 0,a);this._setPaintValue(e,t,o,r)}_setPaintValue(e,t,n,i){if("color"===this.type){const a=Os(n),o=Os(i);for(let n=e;n<t;n++)this.paintVertexArray.emplace(n,a[0],a[1],o[0],o[1])}else{for(let a=e;a<t;a++)this.paintVertexArray.emplace(a,n,i);this.maxValue=Math.max(this.maxValue,Math.abs(n),Math.abs(i))}}upload(e){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=e.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))}destroy(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}setUniform(e,t,n,i,a){const o=this.useIntegerZoom?Math.floor(n.zoom):n.zoom,r=S(this.expression.interpolationFactor(o,this.zoom,this.zoom+1),0,1);t.set(e,a,r)}getBinding(e,t){return new vs(e)}}class Ps{constructor(e,t,n,i,a){this.expression=e,this.layerId=a,this.paintVertexAttributes=("array"===n?rs:os).members;for(let e=0;e<t.length;++e);this.paintVertexArray=new i}populatePaintArray(e,t,n){const i=this.paintVertexArray.length;this.paintVertexArray.resize(e),this._setPaintValues(i,e,t.patterns&&t.patterns[this.layerId],n)}updatePaintArray(e,t,n,i,a,o){this._setPaintValues(e,t,n.patterns&&n.patterns[this.layerId],o)}_setPaintValues(e,t,n,i){if(!i||!n)return;const a=i[n];if(!a)return;const{tl:o,br:r,pixelRatio:s}=a;for(let n=e;n<t;n++)this.paintVertexArray.emplace(n,o[0],o[1],r[0],r[1],s)}upload(e){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer=e.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))}destroy(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}}class Is{constructor(e,t,n=(()=>!0)){this.binders={},this._buffers=[];const i=[];for(const a in e.paint._values){if(!n(a))continue;const o=e.paint.get(a);if(!(o instanceof dr&&Ai(o.property.specification)))continue;const r=js(a,e.type),s=o.value,l=o.property.specification.type,c=!!o.property.useIntegerZoom,u="line-dasharray"===a||a.endsWith("pattern"),d="line-dasharray"===a&&"constant"!==e.layout.get("line-cap").value.kind;if("constant"!==s.kind||d)if("source"===s.kind||d||u){const t=Ds(a,l,"source");this.binders[a]=u?new Ps(s,r,l,t,e.id):new Es(s,r,l,t),i.push("/a_"+a)}else{const e=Ds(a,l,"composite");this.binders[a]=new Ss(s,r,l,c,t,e),i.push("/z_"+a)}else this.binders[a]=u?new Cs(s.value,r):new Ts(s.value,r,l),i.push("/u_"+a)}this.cacheKey=i.sort().join("")}getMaxValue(e){const t=this.binders[e];return t instanceof Es||t instanceof Ss?t.maxValue:0}populatePaintArrays(e,t,n,i,a,o){for(const r in this.binders){const s=this.binders[r];(s instanceof Es||s instanceof Ss||s instanceof Ps)&&s.populatePaintArray(e,t,n,i,a,o)}}setConstantPatternPositions(e){for(const t in this.binders){const n=this.binders[t];n instanceof Cs&&n.setConstantPatternPositions(e)}}updatePaintArrays(e,t,n,i,a,o){let r=!1;for(const s in e){const l=t.getPositions(s);for(const t of l){const l=n.feature(t.index);for(const n in this.binders){const c=this.binders[n];if((c instanceof Es||c instanceof Ss||c instanceof Ps)&&!0===c.expression.isStateDependent){const u=i.paint.get(n);c.expression=u.value,c.updatePaintArray(t.start,t.end,l,e[s],a,o),r=!0}}}}return r}defines(){const e=[];for(const t in this.binders){const n=this.binders[t];(n instanceof Ts||n instanceof Cs)&&e.push(...n.uniformNames.map(e=>"#define HAS_UNIFORM_"+e))}return e}getBinderAttributes(){const e=[];for(const t in this.binders){const n=this.binders[t];if(n instanceof Es||n instanceof Ss||n instanceof Ps)for(let t=0;t<n.paintVertexAttributes.length;t++)e.push(n.paintVertexAttributes[t].name)}return e}getBinderUniforms(){const e=[];for(const t in this.binders){const n=this.binders[t];if(n instanceof Ts||n instanceof Cs||n instanceof Ss)for(const t of n.uniformNames)e.push(t)}return e}getPaintVertexBuffers(){return this._buffers}getUniforms(e){const t=[];for(const n in this.binders){const i=this.binders[n];if(i instanceof Ts||i instanceof Cs||i instanceof Ss)for(const a of i.uniformNames)t.push({name:a,property:n,binding:i.getBinding(e,a)})}return t}setUniforms(e,t,n,i,a){for(const{name:t,property:o,binding:r}of n)this.binders[o].setUniform(e,r,a,i.get(o),t)}updatePaintBuffers(){this._buffers=[];for(const e in this.binders){const t=this.binders[e];(t instanceof Es||t instanceof Ss||t instanceof Ps)&&t.paintVertexBuffer&&this._buffers.push(t.paintVertexBuffer)}}upload(e){for(const t in this.binders){const n=this.binders[t];(n instanceof Es||n instanceof Ss||n instanceof Ps)&&n.upload(e)}this.updatePaintBuffers()}destroy(){for(const e in this.binders){const t=this.binders[e];(t instanceof Es||t instanceof Ss||t instanceof Ps)&&t.destroy()}}}class Ms{constructor(e,t,n=(()=>!0)){this.programConfigurations={};for(const i of e)this.programConfigurations[i.id]=new Is(i,t,n);this.needsUpload=!1,this._featureMap=new ms,this._bufferOffset=0}populatePaintArrays(e,t,n,i,a,o,r){for(const n in this.programConfigurations)this.programConfigurations[n].populatePaintArrays(e,t,i,a,o,r);void 0!==t.id&&this._featureMap.add(t.id,n,this._bufferOffset,e),this._bufferOffset=e,this.needsUpload=!0}updatePaintArrays(e,t,n,i,a){for(const o of n)this.needsUpload=this.programConfigurations[o.id].updatePaintArrays(e,this._featureMap,t,o,i,a)||this.needsUpload}get(e){return this.programConfigurations[e]}upload(e){if(this.needsUpload){for(const t in this.programConfigurations)this.programConfigurations[t].upload(e);this.needsUpload=!1}}destroy(){for(const e in this.programConfigurations)this.programConfigurations[e].destroy()}}const As={"text-opacity":["opacity"],"icon-opacity":["opacity"],"text-color":["fill_color"],"icon-color":["fill_color"],"text-halo-color":["halo_color"],"icon-halo-color":["halo_color"],"text-halo-blur":["halo_blur"],"icon-halo-blur":["halo_blur"],"text-halo-width":["halo_width"],"icon-halo-width":["halo_width"],"line-gap-width":["gapwidth"],"line-pattern":["pattern","pixel_ratio"],"fill-pattern":["pattern","pixel_ratio"],"fill-extrusion-pattern":["pattern","pixel_ratio"],"line-dasharray":["dash"]};function js(e,t){return As[e]||[e.replace(t+"-","").replace(/-/g,"_")]}const Ns={"line-pattern":{source:Sr,composite:Sr},"fill-pattern":{source:Sr,composite:Sr},"fill-extrusion-pattern":{source:Sr,composite:Sr},"line-dasharray":{source:Pr,composite:Pr}},Ls={color:{source:Yr,composite:Er},number:{source:Hr,composite:Yr}};function Ds(e,t,n){const i=Ns[e];return i&&i[n]||Ls[t][n]}Ba(Ts,"ConstantBinder"),Ba(Cs,"PatternConstantBinder"),Ba(Es,"SourceExpressionBinder"),Ba(Ps,"PatternCompositeBinder"),Ba(Ss,"CompositeExpressionBinder"),Ba(Is,"ProgramConfiguration",{omit:["_buffers"]}),Ba(Ms,"ProgramConfigurationSet");const Rs="-transition";class Bs extends et{constructor(e,t){if(super(),this.id=e.id,this.type=e.type,this._featureFilter={filter:()=>!0,needGeometry:!1,needFeature:!1},this._filterCompiled=!1,"custom"!==e.type&&(this.metadata=e.metadata,this.minzoom=e.minzoom,this.maxzoom=e.maxzoom,"background"!==e.type&&"sky"!==e.type&&(this.source=e.source,this.sourceLayer=e["source-layer"],this.filter=e.filter),t.layout&&(this._unevaluatedLayout=new ur(t.layout)),t.paint)){this._transitionablePaint=new sr(t.paint);for(const t in e.paint)this.setPaintProperty(t,e.paint[t],{validate:!1});for(const t in e.layout)this.setLayoutProperty(t,e.layout[t],{validate:!1});this._transitioningPaint=this._transitionablePaint.untransitioned(),this.paint=new pr(t.paint)}}getLayoutProperty(e){return"visibility"===e?this.visibility:this._unevaluatedLayout.getValue(e)}setLayoutProperty(e,t,n={}){null!=t&&this._validate(Ma,`layers.${this.id}.layout.${e}`,e,t,n)||("visibility"!==e?this._unevaluatedLayout.setValue(e,t):this.visibility=t)}getPaintProperty(e){return F(e,Rs)?this._transitionablePaint.getTransition(e.slice(0,-11)):this._transitionablePaint.getValue(e)}setPaintProperty(e,t,n={}){if(null!=t&&this._validate(Ia,`layers.${this.id}.paint.${e}`,e,t,n))return!1;if(F(e,Rs))return this._transitionablePaint.setTransition(e.slice(0,-11),t||void 0),!1;{const n=this._transitionablePaint._values[e],i=n.value.isDataDriven(),a=n.value;this._transitionablePaint.setValue(e,t),this._handleSpecialPaintPropertyUpdate(e);const o=this._transitionablePaint._values[e].value,r=o.isDataDriven(),s=F(e,"pattern")||"line-dasharray"===e;return r||i||s||this._handleOverridablePaintPropertyUpdate(e,a,o)}}_handleSpecialPaintPropertyUpdate(e){}getProgramIds(){return null}getProgramConfiguration(e){return null}_handleOverridablePaintPropertyUpdate(e,t,n){return!1}isHidden(e){return!!(this.minzoom&&e<this.minzoom)||!!(this.maxzoom&&e>=this.maxzoom)||"none"===this.visibility}updateTransitions(e){this._transitioningPaint=this._transitionablePaint.transitioned(e,this._transitioningPaint)}hasTransition(){return this._transitioningPaint.hasTransition()}recalculate(e,t){this._unevaluatedLayout&&(this.layout=this._unevaluatedLayout.possiblyEvaluate(e,void 0,t)),this.paint=this._transitioningPaint.possiblyEvaluate(e,void 0,t)}serialize(){const e={id:this.id,type:this.type,source:this.source,"source-layer":this.sourceLayer,metadata:this.metadata,minzoom:this.minzoom,maxzoom:this.maxzoom,filter:this.filter,layout:this._unevaluatedLayout&&this._unevaluatedLayout.serialize(),paint:this._transitionablePaint&&this._transitionablePaint.serialize()};return this.visibility&&(e.layout=e.layout||{},e.layout.visibility=this.visibility),H(e,(e,t)=>!(void 0===e||"layout"===t&&!Object.keys(e).length||"paint"===t&&!Object.keys(e).length))}_validate(e,t,n,i,a={}){return(!a||!1!==a.validate)&&ja(this,e.call(Pa,{key:t,layerType:this.type,objectKey:n,value:i,styleSpec:tt,style:{glyphs:!0,sprite:!0}}))}is3D(){return!1}isSky(){return!1}isTileClipped(){return!1}hasOffscreenPass(){return!1}resize(){}isStateDependent(){for(const e in this.paint._values){const t=this.paint.get(e);if(t instanceof dr&&Ai(t.property.specification)&&("source"===t.value.kind||"composite"===t.value.kind)&&t.value.isStateDependent)return!0}return!1}compileFilter(){this._filterCompiled||(this._featureFilter=aa(this.filter),this._filterCompiled=!0)}invalidateCompiledFilter(){this._filterCompiled=!1}dynamicFilter(){return this._featureFilter.dynamicFilter}dynamicFilterNeedsFeature(){return this._featureFilter.needFeature}}const zs=wr([{name:"a_pos",components:2,type:"Int16"}],4),Fs=wr([{name:"a_pos_3",components:3,type:"Int16"},{name:"a_pos_normal_3",components:3,type:"Int16"}]);class Us{constructor(e=[]){this.segments=e}prepareSegment(e,t,n,i){let a=this.segments[this.segments.length-1];return e>Us.MAX_VERTEX_ARRAY_LENGTH&&V(`Max vertices per segment is ${Us.MAX_VERTEX_ARRAY_LENGTH}: bucket requested ${e}`),(!a||a.vertexLength+e>Us.MAX_VERTEX_ARRAY_LENGTH||a.sortKey!==i)&&(a={vertexOffset:t.length,primitiveOffset:n.length,vertexLength:0,primitiveLength:0},void 0!==i&&(a.sortKey=i),this.segments.push(a)),a}get(){return this.segments}destroy(){for(const e of this.segments)for(const t in e.vaos)e.vaos[t].destroy()}static simpleSegment(e,t,n,i){return new Us([{vertexOffset:e,primitiveOffset:t,vertexLength:n,primitiveLength:i,vaos:{},sortKey:0}])}}Us.MAX_VERTEX_ARRAY_LENGTH=Math.pow(2,16)-1,Ba(Us,"SegmentVector");var Hs=8192;class Ws{constructor(e,t){e&&(t?this.setSouthWest(e).setNorthEast(t):4===e.length?this.setSouthWest([e[0],e[1]]).setNorthEast([e[2],e[3]]):this.setSouthWest(e[0]).setNorthEast(e[1]))}setNorthEast(e){return this._ne=e instanceof vc?new vc(e.lng,e.lat):vc.convert(e),this}setSouthWest(e){return this._sw=e instanceof vc?new vc(e.lng,e.lat):vc.convert(e),this}extend(e){const t=this._sw,n=this._ne;let i,a;if(e instanceof vc)i=e,a=e;else{if(!(e instanceof Ws))return Array.isArray(e)?4===e.length||e.every(Array.isArray)?this.extend(Ws.convert(e)):this.extend(vc.convert(e)):"object"==typeof e&&null!==e&&e.hasOwnProperty("lat")&&(e.hasOwnProperty("lon")||e.hasOwnProperty("lng"))?this.extend(vc.convert(e)):this;if(i=e._sw,a=e._ne,!i||!a)return this}return t||n?(t.lng=Math.min(i.lng,t.lng),t.lat=Math.min(i.lat,t.lat),n.lng=Math.max(a.lng,n.lng),n.lat=Math.max(a.lat,n.lat)):(this._sw=new vc(i.lng,i.lat),this._ne=new vc(a.lng,a.lat)),this}getCenter(){return new vc((this._sw.lng+this._ne.lng)/2,(this._sw.lat+this._ne.lat)/2)}getSouthWest(){return this._sw}getNorthEast(){return this._ne}getNorthWest(){return new vc(this.getWest(),this.getNorth())}getSouthEast(){return new vc(this.getEast(),this.getSouth())}getWest(){return this._sw.lng}getSouth(){return this._sw.lat}getEast(){return this._ne.lng}getNorth(){return this._ne.lat}toArray(){return[this._sw.toArray(),this._ne.toArray()]}toString(){return`LngLatBounds(${this._sw.toString()}, ${this._ne.toString()})`}isEmpty(){return!(this._sw&&this._ne)}contains(e){const{lng:t,lat:n}=vc.convert(e);let i=this._sw.lng<=t&&t<=this._ne.lng;return this._sw.lng>this._ne.lng&&(i=this._sw.lng>=t&&t>=this._ne.lng),this._sw.lat<=n&&n<=this._ne.lat&&i}static convert(e){return!e||e instanceof Ws?e:new Ws(e)}}var qs=1e-6,Vs="undefined"!=typeof Float32Array?Float32Array:Array;function Gs(){var e=new Vs(9);return Vs!=Float32Array&&(e[1]=0,e[2]=0,e[3]=0,e[5]=0,e[6]=0,e[7]=0),e[0]=1,e[4]=1,e[8]=1,e}function Ys(e,t,n){var i=t[0],a=t[1],o=t[2],r=t[3],s=t[4],l=t[5],c=t[6],u=t[7],d=t[8],p=n[0],f=n[1],m=n[2],h=n[3],g=n[4],y=n[5],v=n[6],b=n[7],_=n[8];return e[0]=p*i+f*r+m*c,e[1]=p*a+f*s+m*u,e[2]=p*o+f*l+m*d,e[3]=h*i+g*r+y*c,e[4]=h*a+g*s+y*u,e[5]=h*o+g*l+y*d,e[6]=v*i+b*r+_*c,e[7]=v*a+b*s+_*u,e[8]=v*o+b*l+_*d,e}function Xs(e){return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}function Zs(e,t){var n=t[0],i=t[1],a=t[2],o=t[3],r=t[4],s=t[5],l=t[6],c=t[7],u=t[8],d=t[9],p=t[10],f=t[11],m=t[12],h=t[13],g=t[14],y=t[15],v=n*s-i*r,b=n*l-a*r,_=n*c-o*r,w=i*l-a*s,x=i*c-o*s,k=a*c-o*l,O=u*h-d*m,T=u*g-p*m,C=u*y-f*m,E=d*g-p*h,S=d*y-f*h,P=p*y-f*g,I=v*P-b*S+_*E+w*C-x*T+k*O;return I?(e[0]=(s*P-l*S+c*E)*(I=1/I),e[1]=(a*S-i*P-o*E)*I,e[2]=(h*k-g*x+y*w)*I,e[3]=(p*x-d*k-f*w)*I,e[4]=(l*C-r*P-c*T)*I,e[5]=(n*P-a*C+o*T)*I,e[6]=(g*_-m*k-y*b)*I,e[7]=(u*k-p*_+f*b)*I,e[8]=(r*S-s*C+c*O)*I,e[9]=(i*C-n*S-o*O)*I,e[10]=(m*x-h*_+y*v)*I,e[11]=(d*_-u*x-f*v)*I,e[12]=(s*T-r*E-l*O)*I,e[13]=(n*E-i*T+a*O)*I,e[14]=(h*b-m*w-g*v)*I,e[15]=(u*w-d*b+p*v)*I,e):null}function Js(e,t,n){var i=t[0],a=t[1],o=t[2],r=t[3],s=t[4],l=t[5],c=t[6],u=t[7],d=t[8],p=t[9],f=t[10],m=t[11],h=t[12],g=t[13],y=t[14],v=t[15],b=n[0],_=n[1],w=n[2],x=n[3];return e[0]=b*i+_*s+w*d+x*h,e[1]=b*a+_*l+w*p+x*g,e[2]=b*o+_*c+w*f+x*y,e[3]=b*r+_*u+w*m+x*v,e[4]=(b=n[4])*i+(_=n[5])*s+(w=n[6])*d+(x=n[7])*h,e[5]=b*a+_*l+w*p+x*g,e[6]=b*o+_*c+w*f+x*y,e[7]=b*r+_*u+w*m+x*v,e[8]=(b=n[8])*i+(_=n[9])*s+(w=n[10])*d+(x=n[11])*h,e[9]=b*a+_*l+w*p+x*g,e[10]=b*o+_*c+w*f+x*y,e[11]=b*r+_*u+w*m+x*v,e[12]=(b=n[12])*i+(_=n[13])*s+(w=n[14])*d+(x=n[15])*h,e[13]=b*a+_*l+w*p+x*g,e[14]=b*o+_*c+w*f+x*y,e[15]=b*r+_*u+w*m+x*v,e}function Ks(e,t,n){var i,a,o,r,s,l,c,u,d,p,f,m,h=n[0],g=n[1],y=n[2];return t===e?(e[12]=t[0]*h+t[4]*g+t[8]*y+t[12],e[13]=t[1]*h+t[5]*g+t[9]*y+t[13],e[14]=t[2]*h+t[6]*g+t[10]*y+t[14],e[15]=t[3]*h+t[7]*g+t[11]*y+t[15]):(a=t[1],o=t[2],r=t[3],s=t[4],l=t[5],c=t[6],u=t[7],d=t[8],p=t[9],f=t[10],m=t[11],e[0]=i=t[0],e[1]=a,e[2]=o,e[3]=r,e[4]=s,e[5]=l,e[6]=c,e[7]=u,e[8]=d,e[9]=p,e[10]=f,e[11]=m,e[12]=i*h+s*g+d*y+t[12],e[13]=a*h+l*g+p*y+t[13],e[14]=o*h+c*g+f*y+t[14],e[15]=r*h+u*g+m*y+t[15]),e}function $s(e,t,n){var i=n[0],a=n[1],o=n[2];return e[0]=t[0]*i,e[1]=t[1]*i,e[2]=t[2]*i,e[3]=t[3]*i,e[4]=t[4]*a,e[5]=t[5]*a,e[6]=t[6]*a,e[7]=t[7]*a,e[8]=t[8]*o,e[9]=t[9]*o,e[10]=t[10]*o,e[11]=t[11]*o,e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15],e}function Qs(e,t,n){var i=Math.sin(n),a=Math.cos(n),o=t[4],r=t[5],s=t[6],l=t[7],c=t[8],u=t[9],d=t[10],p=t[11];return t!==e&&(e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e[4]=o*a+c*i,e[5]=r*a+u*i,e[6]=s*a+d*i,e[7]=l*a+p*i,e[8]=c*a-o*i,e[9]=u*a-r*i,e[10]=d*a-s*i,e[11]=p*a-l*i,e}function el(e,t,n){var i=Math.sin(n),a=Math.cos(n),o=t[0],r=t[1],s=t[2],l=t[3],c=t[8],u=t[9],d=t[10],p=t[11];return t!==e&&(e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e[0]=o*a-c*i,e[1]=r*a-u*i,e[2]=s*a-d*i,e[3]=l*a-p*i,e[8]=o*i+c*a,e[9]=r*i+u*a,e[10]=s*i+d*a,e[11]=l*i+p*a,e}function tl(e,t){return e[0]=t[0],e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=t[1],e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=t[2],e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}function nl(e,t,n){var i,a,o,r=n[0],s=n[1],l=n[2],c=Math.hypot(r,s,l);return c<qs?null:(r*=c=1/c,s*=c,l*=c,i=Math.sin(t),a=Math.cos(t),e[0]=r*r*(o=1-a)+a,e[1]=s*r*o+l*i,e[2]=l*r*o-s*i,e[3]=0,e[4]=r*s*o-l*i,e[5]=s*s*o+a,e[6]=l*s*o+r*i,e[7]=0,e[8]=r*l*o+s*i,e[9]=s*l*o-r*i,e[10]=l*l*o+a,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e)}Math.hypot||(Math.hypot=function(){for(var e=0,t=arguments.length;t--;)e+=arguments[t]*arguments[t];return Math.sqrt(e)});var il=Js;function al(){var e=new Vs(3);return Vs!=Float32Array&&(e[0]=0,e[1]=0,e[2]=0),e}function ol(e){var t=new Vs(3);return t[0]=e[0],t[1]=e[1],t[2]=e[2],t}function rl(e){return Math.hypot(e[0],e[1],e[2])}function sl(e,t,n){var i=new Vs(3);return i[0]=e,i[1]=t,i[2]=n,i}function ll(e,t,n){return e[0]=t[0]+n[0],e[1]=t[1]+n[1],e[2]=t[2]+n[2],e}function cl(e,t,n){return e[0]=t[0]-n[0],e[1]=t[1]-n[1],e[2]=t[2]-n[2],e}function ul(e,t,n){return e[0]=t[0]*n[0],e[1]=t[1]*n[1],e[2]=t[2]*n[2],e}function dl(e,t,n){return e[0]=Math.min(t[0],n[0]),e[1]=Math.min(t[1],n[1]),e[2]=Math.min(t[2],n[2]),e}function pl(e,t,n){return e[0]=Math.max(t[0],n[0]),e[1]=Math.max(t[1],n[1]),e[2]=Math.max(t[2],n[2]),e}function fl(e,t,n){return e[0]=t[0]*n,e[1]=t[1]*n,e[2]=t[2]*n,e}function ml(e,t,n,i){return e[0]=t[0]+n[0]*i,e[1]=t[1]+n[1]*i,e[2]=t[2]+n[2]*i,e}function hl(e,t){var n=t[0],i=t[1],a=t[2],o=n*n+i*i+a*a;return o>0&&(o=1/Math.sqrt(o)),e[0]=t[0]*o,e[1]=t[1]*o,e[2]=t[2]*o,e}function gl(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]}function yl(e,t,n){var i=t[0],a=t[1],o=t[2],r=n[0],s=n[1],l=n[2];return e[0]=a*l-o*s,e[1]=o*r-i*l,e[2]=i*s-a*r,e}function vl(e,t,n){var i=t[0],a=t[1],o=t[2],r=n[3]*i+n[7]*a+n[11]*o+n[15];return e[0]=(n[0]*i+n[4]*a+n[8]*o+n[12])/(r=r||1),e[1]=(n[1]*i+n[5]*a+n[9]*o+n[13])/r,e[2]=(n[2]*i+n[6]*a+n[10]*o+n[14])/r,e}function bl(e,t,n){var i=n[0],a=n[1],o=n[2],r=t[0],s=t[1],l=t[2],c=a*l-o*s,u=o*r-i*l,d=i*s-a*r,p=a*d-o*u,f=o*c-i*d,m=i*u-a*c,h=2*n[3];return u*=h,d*=h,f*=2,m*=2,e[0]=r+(c*=h)+(p*=2),e[1]=s+u+f,e[2]=l+d+m,e}var _l,wl=cl,xl=ul,kl=rl;function Ol(e,t,n){return e[0]=t[0]*n,e[1]=t[1]*n,e[2]=t[2]*n,e[3]=t[3]*n,e}function Tl(e,t){var n=t[0],i=t[1],a=t[2],o=t[3],r=n*n+i*i+a*a+o*o;return r>0&&(r=1/Math.sqrt(r)),e[0]=n*r,e[1]=i*r,e[2]=a*r,e[3]=o*r,e}function Cl(e,t,n){var i=t[0],a=t[1],o=t[2],r=t[3];return e[0]=n[0]*i+n[4]*a+n[8]*o+n[12]*r,e[1]=n[1]*i+n[5]*a+n[9]*o+n[13]*r,e[2]=n[2]*i+n[6]*a+n[10]*o+n[14]*r,e[3]=n[3]*i+n[7]*a+n[11]*o+n[15]*r,e}function El(){var e=new Vs(4);return Vs!=Float32Array&&(e[0]=0,e[1]=0,e[2]=0),e[3]=1,e}function Sl(e){return e[0]=0,e[1]=0,e[2]=0,e[3]=1,e}function Pl(e,t,n){n*=.5;var i=t[0],a=t[1],o=t[2],r=t[3],s=Math.sin(n),l=Math.cos(n);return e[0]=i*l+r*s,e[1]=a*l+o*s,e[2]=o*l-a*s,e[3]=r*l-i*s,e}function Il(e,t,n){n*=.5;var i=t[0],a=t[1],o=t[2],r=t[3],s=Math.sin(n),l=Math.cos(n);return e[0]=i*l-o*s,e[1]=a*l+r*s,e[2]=o*l+i*s,e[3]=r*l-a*s,e}al(),_l=new Vs(4),Vs!=Float32Array&&(_l[0]=0,_l[1]=0,_l[2]=0,_l[3]=0);var Ml=Tl;al(),sl(1,0,0),sl(0,1,0),El(),El(),Gs();const Al=wr([{type:"Float32",name:"a_globe_pos",components:3},{type:"Float32",name:"a_uv",components:2}]),{members:jl}=Al,Nl=wr([{name:"a_pos_3",components:3,type:"Int16"}]);var Ll=wr([{name:"a_pos",type:"Int16",components:2}]);class Dl{constructor(e,t){this.pos=e,this.dir=t}intersectsPlane(e,t,n){const i=gl(t,this.dir);if(Math.abs(i)<1e-6)return!1;const a=((e[0]-this.pos[0])*t[0]+(e[1]-this.pos[1])*t[1]+(e[2]-this.pos[2])*t[2])/i;return n[0]=this.pos[0]+this.dir[0]*a,n[1]=this.pos[1]+this.dir[1]*a,n[2]=this.pos[2]+this.dir[2]*a,!0}closestPointOnSphere(e,t,n){if(function(e,t){var n=e[0],i=e[1],a=e[2],o=t[0],r=t[1],s=t[2];return Math.abs(n-o)<=qs*Math.max(1,Math.abs(n),Math.abs(o))&&Math.abs(i-r)<=qs*Math.max(1,Math.abs(i),Math.abs(r))&&Math.abs(a-s)<=qs*Math.max(1,Math.abs(a),Math.abs(s))}(this.pos,e)||0===t)return n[0]=n[1]=n[2]=0,!1;const[i,a,o]=this.dir,r=this.pos[0]-e[0],s=this.pos[1]-e[1],l=this.pos[2]-e[2],c=i*i+a*a+o*o,u=2*(r*i+s*a+l*o),d=u*u-4*c*(r*r+s*s+l*l-t*t);if(d<0){const e=Math.max(-u/2,0),c=r+i*e,d=s+a*e,p=l+o*e,f=Math.hypot(c,d,p);return n[0]=c*t/f,n[1]=d*t/f,n[2]=p*t/f,!1}{const e=(-u-Math.sqrt(d))/(2*c);if(e<0){const e=Math.hypot(r,s,l);return n[0]=r*t/e,n[1]=s*t/e,n[2]=l*t/e,!1}return n[0]=r+i*e,n[1]=s+a*e,n[2]=l+o*e,!0}}}class Rl{constructor(e,t,n,i,a){this.TL=e,this.TR=t,this.BR=n,this.BL=i,this.horizon=a}static fromInvProjectionMatrix(e,t,n){const i=[-1,1,1],a=[1,1,1],o=[1,-1,1],r=[-1,-1,1],s=vl(i,i,e),l=vl(a,a,e),c=vl(o,o,e),u=vl(r,r,e);return new Rl(s,l,c,u,t/n)}}class Bl{constructor(e,t){this.points=e,this.planes=t}static fromInvProjectionMatrix(e,t,n,i){const a=Math.pow(2,n),o=[[-1,1,-1,1],[1,1,-1,1],[1,-1,-1,1],[-1,-1,-1,1],[-1,1,1,1],[1,1,1,1],[1,-1,1,1],[-1,-1,1,1]].map(n=>{const o=Cl([],n,e),r=1/o[3]/t*a;return function(e,t,n){return e[0]=t[0]*n[0],e[1]=t[1]*n[1],e[2]=t[2]*n[2],e[3]=t[3]*n[3],e}(o,o,[r,r,i?1/o[3]:r,r])}),r=[[0,1,2],[6,5,4],[0,3,7],[2,1,5],[3,2,6],[0,4,5]].map(e=>{const t=hl([],yl([],wl([],o[e[0]],o[e[1]]),wl([],o[e[2]],o[e[1]]))),n=-gl(t,o[e[1]]);return t.concat(n)});return new Bl(o,r)}}class zl{static fromPoints(e){const t=[1/0,1/0,1/0],n=[-1/0,-1/0,-1/0];for(const i of e)dl(t,t,i),pl(n,n,i);return new zl(t,n)}static applyTransform(e,t){const n=e.getCorners();for(let e=0;e<n.length;++e)vl(n[e],n[e],t);return zl.fromPoints(n)}constructor(e,t){this.min=e,this.max=t,this.center=fl([],ll([],this.min,this.max),.5)}quadrant(e){const t=[e%2==0,e<2],n=ol(this.min),i=ol(this.max);for(let e=0;e<t.length;e++)n[e]=t[e]?this.min[e]:this.center[e],i[e]=t[e]?this.center[e]:this.max[e];return i[2]=this.max[2],new zl(n,i)}distanceX(e){return Math.max(Math.min(this.max[0],e[0]),this.min[0])-e[0]}distanceY(e){return Math.max(Math.min(this.max[1],e[1]),this.min[1])-e[1]}distanceZ(e){return Math.max(Math.min(this.max[2],e[2]),this.min[2])-e[2]}getCorners(){const e=this.min,t=this.max;return[[e[0],e[1],e[2]],[t[0],e[1],e[2]],[t[0],t[1],e[2]],[e[0],t[1],e[2]],[e[0],e[1],t[2]],[t[0],e[1],t[2]],[t[0],t[1],t[2]],[e[0],t[1],t[2]]]}intersects(e){const t=this.getCorners();let n=!0;for(let i=0;i<e.planes.length;i++){const a=e.planes[i];let o=0;for(let e=0;e<t.length;e++)o+=gl(a,t[e])+a[3]>=0;if(0===o)return 0;o!==t.length&&(n=!1)}if(n)return 2;for(let t=0;t<3;t++){let n=Number.MAX_VALUE,i=-Number.MAX_VALUE;for(let a=0;a<e.points.length;a++){const o=e.points[a][t]-this.min[t];n=Math.min(n,o),i=Math.max(i,o)}if(i<0||n>this.max[t]-this.min[t])return 0}return 1}}const Fl=Hs/Math.PI/2,Ul=[64,32,16],Hl=-Fl,Wl=Fl,ql=[new zl([Hl,Hl,Hl],[Wl,Wl,Wl]),new zl([Hl,Hl,Hl],[0,0,Wl]),new zl([0,Hl,Hl],[Wl,0,Wl]),new zl([Hl,0,Hl],[0,Wl,Wl]),new zl([0,0,Hl],[Wl,Wl,Wl])];function Vl(e){return e*Fl/hc}function Gl(e,t,n,i=!0){const a=fl([],e._camera.position,e.worldSize),o=[t,n,1,1];Cl(o,o,e.pixelMatrixInverse),Ol(o,o,1/o[3]);const r=hl([],wl([],o,a)),s=e.globeMatrix,l=[s[12],s[13],s[14]],c=wl([],l,a),u=rl(c),d=hl([],c),p=e.worldSize/(2*Math.PI),f=gl(d,r),m=Math.asin(p/u);if(m<Math.acos(f)){if(!i)return null;const e=[],t=[];fl(e,r,u/f),hl(t,wl(t,e,c)),hl(r,ll(r,c,fl(r,t,Math.tan(m)*u)))}const h=[];new Dl(a,r).closestPointOnSphere(l,p,h);const g=hl([],Q(s,0)),y=hl([],Q(s,1)),v=hl([],Q(s,2)),b=gl(g,h),_=gl(y,h),w=gl(v,h),x=k(Math.asin(-_/p));let O=k(Math.atan2(b,w));O=e.center.lng+function(e,t){const n=(t-e+180)%360-180;return n<-180?n+360:n}(e.center.lng,O);const T=_c(O),C=S(wc(x),0,1);return new Sc(T,C)}class Yl{constructor(e,t,n){this.a=wl([],e,n),this.b=wl([],t,n),this.center=n;const i=hl([],this.a),a=hl([],this.b);this.angle=Math.acos(gl(i,a))}}function Xl(e,t){if(0===e.angle)return null;let n;return n=0===e.a[t]?1/e.angle*.5*Math.PI:1/e.angle*Math.atan(e.b[t]/e.a[t]/Math.sin(e.angle)-1/Math.tan(e.angle)),n<0||n>1?null:function(e,t,n,i){const a=Math.sin(n);return e*(Math.sin((1-i)*n)/a)+t*(Math.sin(i*n)/a)}(e.a[t],e.b[t],e.angle,S(n,0,1))+e.center[t]}function Zl(e){if(e.z<=1)return ql[e.z+2*e.y+e.x];const t=ec(Ql(e));return zl.fromPoints(t)}function Jl(e,t,n){return fl(e,e,1-n),ml(e,e,t,n)}function Kl(e,t){const n=cc(t.zoom);if(0===n)return Zl(e);const i=Ql(e),a=ec(i),o=_c(i.getWest())*t.worldSize,r=_c(i.getEast())*t.worldSize,s=wc(i.getNorth())*t.worldSize,l=wc(i.getSouth())*t.worldSize,c=[o,s,0],u=[r,s,0],d=[o,l,0],p=[r,l,0],f=Zs([],t.globeMatrix);return vl(c,c,f),vl(u,u,f),vl(d,d,f),vl(p,p,f),a[0]=Jl(a[0],d,n),a[1]=Jl(a[1],p,n),a[2]=Jl(a[2],u,n),a[3]=Jl(a[3],c,n),zl.fromPoints(a)}function $l(e,t,n){for(const i of e)vl(i,i,t),fl(i,i,n)}function Ql({x:e,y:t,z:n}){const i=1/(1<<n),a=new vc(kc(e*i),Oc((t+1)*i)),o=new vc(kc((e+1)*i),Oc(t*i));return new Ws(a,o)}function ec(e){const t=x(e.getNorth()),n=x(e.getSouth()),i=Math.cos(t),a=Math.cos(n),o=Math.sin(t),r=Math.sin(n),s=e.getWest(),l=e.getEast();return[tc(a,r,s),tc(a,r,l),tc(i,o,l),tc(i,o,s)]}function tc(e,t,n,i=Fl){return n=x(n),[e*Math.sin(n)*i,-t*i,e*Math.cos(n)*i]}function nc(e,t,n){return tc(Math.cos(x(e)),Math.sin(x(e)),t,n)}function ic(e,t,n,i){const a=1<<n.z,o=(e/Hs+n.x)/a;return nc(Oc((t/Hs+n.y)/a),kc(o),i)}function ac({min:e,max:t}){return 16383/Math.max(t[0]-e[0],t[1]-e[1],t[2]-e[2])}const oc=new Float64Array(16);function rc(e){const t=ac(e),n=tl(oc,[t,t,t]);return Ks(n,n,((i=[])[0]=-(a=e.min)[0],i[1]=-a[1],i[2]=-a[2],i));var i,a}function sc(e){const t=(i=e.min,(n=oc)[0]=1,n[1]=0,n[2]=0,n[3]=0,n[4]=0,n[5]=1,n[6]=0,n[7]=0,n[8]=0,n[9]=0,n[10]=1,n[11]=0,n[12]=i[0],n[13]=i[1],n[14]=i[2],n[15]=1,n);var n,i;const a=1/ac(e);return $s(t,t,[a,a,a])}function lc(e,t,n,i,a){const o=function(e){const t=Hs/(2*Math.PI);return e/(2*Math.PI)/t}(n),r=[e,t,-n/(2*Math.PI)],s=Xs(new Float64Array(16));return Ks(s,s,r),$s(s,s,[o,o,o]),Qs(s,s,x(-a)),el(s,s,x(-i)),s}function cc(e){return P(5,6,e)}function uc(e,t){const n=nc(t.lat,t.lng);return o=(i=cl([],function(e){const t=nc(e._center.lat,e._center.lng);let n=yl([],sl(0,1,0),t);const i=nl([],-e.angle,t);n=vl(n,n,i),nl(i,-e._pitch,n);const a=hl([],t);return fl(a,a,Vl(e.cameraToCenterDistance/e.pixelsPerMeter)),vl(a,a,i),ll([],t,a)}(e),n))[0],r=i[1],s=i[2],l=(a=n)[0],c=a[1],u=a[2],p=(d=Math.sqrt(o*o+r*r+s*s)*Math.sqrt(l*l+c*c+u*u))&&gl(i,a)/d,Math.acos(Math.min(Math.max(p,-1),1));var i,a,o,r,s,l,c,u,d,p}function dc(e,t){return uc(e,t)>Math.PI/2*1.01}const pc=x(85),fc=Math.cos(pc),mc=Math.sin(pc),hc=6371008.8,gc=2*Math.PI*hc;class yc{constructor(e,t){if(isNaN(e)||isNaN(t))throw new Error(`Invalid LngLat object: (${e}, ${t})`);if(this.lng=+e,this.lat=+t,this.lat>90||this.lat<-90)throw new Error("Invalid LngLat latitude value: must be between -90 and 90")}wrap(){return new yc(I(this.lng,-180,180),this.lat)}toArray(){return[this.lng,this.lat]}toString(){return`LngLat(${this.lng}, ${this.lat})`}distanceTo(e){const t=Math.PI/180,n=this.lat*t,i=e.lat*t,a=Math.sin(n)*Math.sin(i)+Math.cos(n)*Math.cos(i)*Math.cos((e.lng-this.lng)*t);return hc*Math.acos(Math.min(a,1))}toBounds(e=0){const t=360*e/40075017,n=t/Math.cos(Math.PI/180*this.lat);return new Ws(new yc(this.lng-n,this.lat-t),new yc(this.lng+n,this.lat+t))}toEcef(e){const t=Vl(e);return nc(this.lat,this.lng,Fl+t)}static convert(e){if(e instanceof yc)return e;if(Array.isArray(e)&&(2===e.length||3===e.length))return new yc(Number(e[0]),Number(e[1]));if(!Array.isArray(e)&&"object"==typeof e&&null!==e)return new yc(Number("lng"in e?e.lng:e.lon),Number(e.lat));throw new Error("`LngLatLike` argument must be specified as a LngLat instance, an object {lng: <lng>, lat: <lat>}, an object {lon: <lng>, lat: <lat>}, or an array of [<lng>, <lat>]")}}var vc=yc;function bc(e){return gc*Math.cos(e*Math.PI/180)}function _c(e){return(180+e)/360}function wc(e){return(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+e*Math.PI/360)))/360}function xc(e,t){return e/bc(t)}function kc(e){return 360*e-180}function Oc(e){return 360/Math.PI*Math.atan(Math.exp((180-360*e)*Math.PI/180))-90}function Tc(e,t){return e*bc(Oc(t))}const Cc=85.051129;function Ec(e){return 1/Math.cos(e*Math.PI/180)}class Sc{constructor(e,t,n=0){this.x=+e,this.y=+t,this.z=+n}static fromLngLat(e,t=0){const n=vc.convert(e);return new Sc(_c(n.lng),wc(n.lat),xc(t,n.lat))}toLngLat(){return new vc(kc(this.x),Oc(this.y))}toAltitude(){return Tc(this.z,this.y)}meterInMercatorCoordinateUnits(){return 1/gc*Ec(Oc(this.y))}}function Pc(e,t,n,i,a,o,r,s,l){const c=(t+i)/2,u=(n+a)/2,d=new b(c,u);s(d),function(e,t,n,i,a,o){const r=n-a,s=i-o;return Math.abs((i-t)*r-(n-e)*s)/Math.hypot(r,s)}(d.x,d.y,o.x,o.y,r.x,r.y)>=l?(Pc(e,t,n,c,u,o,d,s,l),Pc(e,c,u,i,a,d,r,s,l)):e.push(r)}function Ic(e,t,n){let i=e[0],a=i.x,o=i.y;t(i);const r=[i];for(let s=1;s<e.length;s++){const l=e[s],{x:c,y:u}=l;t(l),Pc(r,a,o,c,u,i,l,t,n),a=c,o=u,i=l}return r}function Mc(e,t,n,i){if(i(t,n)){const a=t.add(n)._mult(.5);Mc(e,t,a,i),Mc(e,a,n,i)}else e.push(n)}function Ac(e,t){let n=e[0];const i=[n];for(let a=1;a<e.length;a++){const o=e[a];Mc(i,n,o,t),n=o}return i}const jc=Math.pow(2,14)-1,Nc=-jc-1;function Lc(e,t){const n=Math.round(e.x*t),i=Math.round(e.y*t);return e.x=S(n,Nc,jc),e.y=S(i,Nc,jc),(n<e.x||n>e.x+1||i<e.y||i>e.y+1)&&V("Geometry exceeds allowed extent, reduce your vector tile buffer size"),e}function Dc(e,t,n){const i=e.loadGeometry(),a=e.extent,o=Hs/a;if(t&&n&&n.projection.isReprojectedInTileSpace){const o=1<<t.z,{scale:r,x:s,y:l,projection:c}=n,u=e=>{const n=kc((t.x+e.x/a)/o),i=Oc((t.y+e.y/a)/o),u=c.project(n,i);e.x=(u.x*r-s)*a,e.y=(u.y*r-l)*a};for(let t=0;t<i.length;t++)if(1!==e.type)i[t]=Ic(i[t],u,1);else{const e=[];for(const n of i[t])n.x<0||n.x>=a||n.y<0||n.y>=a||(u(n),e.push(n));i[t]=e}}for(const e of i)for(const t of e)Lc(t,o);return i}function Rc(e,t){return{type:e.type,id:e.id,properties:e.properties,geometry:t?Dc(e):[]}}function Bc(e,t,n,i,a){e.emplaceBack(2*t+(i+1)/2,2*n+(a+1)/2)}function zc(e,t,n){const i=16384;e.emplaceBack(t.x,t.y,t.z,n[0]*i,n[1]*i,n[2]*i)}class Fc{constructor(e){this.zoom=e.zoom,this.overscaling=e.overscaling,this.layers=e.layers,this.layerIds=this.layers.map(e=>e.id),this.index=e.index,this.hasPattern=!1,this.projection=e.projection,this.layoutVertexArray=new kr,this.indexArray=new zr,this.segments=new Us,this.programConfigurations=new Ms(e.layers,e.zoom),this.stateDependentLayerIds=this.layers.filter(e=>e.isStateDependent()).map(e=>e.id)}populate(e,t,n,i){const a=this.layers[0],o=[];let r=null;"circle"===a.type&&(r=a.layout.get("circle-sort-key"));for(const{feature:t,id:a,index:s,sourceLayerIndex:l}of e){const e=this.layers[0]._featureFilter.needGeometry,c=Rc(t,e);if(!this.layers[0]._featureFilter.filter(new ar(this.zoom),c,n))continue;const u=r?r.evaluate(c,{},n):void 0,d={id:a,properties:t.properties,type:t.type,sourceLayerIndex:l,index:s,geometry:e?c.geometry:Dc(t,n,i),patterns:{},sortKey:u};o.push(d)}r&&o.sort((e,t)=>e.sortKey-t.sortKey);let s=null;"globe"===i.projection.name&&(this.globeExtVertexArray=new Ir,s=i.projection);for(const i of o){const{geometry:a,index:o,sourceLayerIndex:r}=i,l=e[o].feature;this.addFeature(i,a,o,t.availableImages,n,s),t.featureIndex.insert(l,a,o,r,this.index)}}update(e,t,n,i){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(e,t,this.stateDependentLayers,n,i)}isEmpty(){return 0===this.layoutVertexArray.length}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(e){this.uploaded||(this.layoutVertexBuffer=e.createVertexBuffer(this.layoutVertexArray,zs.members),this.indexBuffer=e.createIndexBuffer(this.indexArray),this.globeExtVertexArray&&(this.globeExtVertexBuffer=e.createVertexBuffer(this.globeExtVertexArray,Fs.members))),this.programConfigurations.upload(e),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.globeExtVertexBuffer&&this.globeExtVertexBuffer.destroy())}addFeature(e,t,n,i,a,o){for(const n of t)for(const t of n){const n=t.x,i=t.y;if(n<0||n>=Hs||i<0||i>=Hs)continue;if(o){const e=o.projectTilePoint(n,i,a),t=o.upVector(a,n,i),r=this.globeExtVertexArray;zc(r,e,t),zc(r,e,t),zc(r,e,t),zc(r,e,t)}const r=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray,e.sortKey),s=r.vertexLength;Bc(this.layoutVertexArray,n,i,-1,-1),Bc(this.layoutVertexArray,n,i,1,-1),Bc(this.layoutVertexArray,n,i,1,1),Bc(this.layoutVertexArray,n,i,-1,1),this.indexArray.emplaceBack(s,s+1,s+2),this.indexArray.emplaceBack(s,s+2,s+3),r.vertexLength+=4,r.primitiveLength+=2}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,e,n,{},i,a)}}function Uc(e,t){for(let n=0;n<e.length;n++)if(Jc(t,e[n]))return!0;for(let n=0;n<t.length;n++)if(Jc(e,t[n]))return!0;return!!Vc(e,t)}function Hc(e,t,n){return!!Jc(e,t)||!!Yc(t,e,n)}function Wc(e,t){if(1===e.length)return Zc(t,e[0]);for(let n=0;n<t.length;n++){const i=t[n];for(let t=0;t<i.length;t++)if(Jc(e,i[t]))return!0}for(let n=0;n<e.length;n++)if(Zc(t,e[n]))return!0;for(let n=0;n<t.length;n++)if(Vc(e,t[n]))return!0;return!1}function qc(e,t,n){if(e.length>1){if(Vc(e,t))return!0;for(let i=0;i<t.length;i++)if(Yc(t[i],e,n))return!0}for(let i=0;i<e.length;i++)if(Yc(e[i],t,n))return!0;return!1}function Vc(e,t){if(0===e.length||0===t.length)return!1;for(let n=0;n<e.length-1;n++){const i=e[n],a=e[n+1];for(let e=0;e<t.length-1;e++)if(Gc(i,a,t[e],t[e+1]))return!0}return!1}function Gc(e,t,n,i){return G(e,n,i)!==G(t,n,i)&&G(e,t,n)!==G(e,t,i)}function Yc(e,t,n){const i=n*n;if(1===t.length)return e.distSqr(t[0])<i;for(let n=1;n<t.length;n++)if(Xc(e,t[n-1],t[n])<i)return!0;return!1}function Xc(e,t,n){const i=t.distSqr(n);if(0===i)return e.distSqr(t);const a=((e.x-t.x)*(n.x-t.x)+(e.y-t.y)*(n.y-t.y))/i;return e.distSqr(a<0?t:a>1?n:n.sub(t)._mult(a)._add(t))}function Zc(e,t){let n,i,a,o=!1;for(let r=0;r<e.length;r++){n=e[r];for(let e=0,r=n.length-1;e<n.length;r=e++)i=n[e],a=n[r],i.y>t.y!=a.y>t.y&&t.x<(a.x-i.x)*(t.y-i.y)/(a.y-i.y)+i.x&&(o=!o)}return o}function Jc(e,t){let n=!1;for(let i=0,a=e.length-1;i<e.length;a=i++){const o=e[i],r=e[a];o.y>t.y!=r.y>t.y&&t.x<(r.x-o.x)*(t.y-o.y)/(r.y-o.y)+o.x&&(n=!n)}return n}function Kc(e,t,n,i,a){for(const o of e)if(t<=o.x&&n<=o.y&&i>=o.x&&a>=o.y)return!0;const o=[new b(t,n),new b(t,a),new b(i,a),new b(i,n)];if(e.length>2)for(const t of o)if(Jc(e,t))return!0;for(let t=0;t<e.length-1;t++)if($c(e[t],e[t+1],o))return!0;return!1}function $c(e,t,n){const i=n[0],a=n[2];if(e.x<i.x&&t.x<i.x||e.x>a.x&&t.x>a.x||e.y<i.y&&t.y<i.y||e.y>a.y&&t.y>a.y)return!1;const o=G(e,t,n[0]);return o!==G(e,t,n[1])||o!==G(e,t,n[2])||o!==G(e,t,n[3])}function Qc(e,t,n){const i=t.paint.get(e).value;return"constant"===i.kind?i.value:n.programConfigurations.get(t.id).getMaxValue(e)}function eu(e){return Math.sqrt(e[0]*e[0]+e[1]*e[1])}function tu(e,t,n,i,a){if(!t[0]&&!t[1])return e;const o=b.convert(t)._mult(a);"viewport"===n&&o._rotate(-i);const r=[];for(let t=0;t<e.length;t++)r.push(e[t].sub(o));return r}function nu(e,t,n,i){const a=b.convert(e)._mult(i);return"viewport"===t&&a._rotate(-n),a}Ba(Fc,"CircleBucket",{omit:["layers"]});const iu=new gr({"circle-sort-key":new mr(tt.layout_circle["circle-sort-key"])});var au={paint:new gr({"circle-radius":new mr(tt.paint_circle["circle-radius"]),"circle-color":new mr(tt.paint_circle["circle-color"]),"circle-blur":new mr(tt.paint_circle["circle-blur"]),"circle-opacity":new mr(tt.paint_circle["circle-opacity"]),"circle-translate":new fr(tt.paint_circle["circle-translate"]),"circle-translate-anchor":new fr(tt.paint_circle["circle-translate-anchor"]),"circle-pitch-scale":new fr(tt.paint_circle["circle-pitch-scale"]),"circle-pitch-alignment":new fr(tt.paint_circle["circle-pitch-alignment"]),"circle-stroke-width":new mr(tt.paint_circle["circle-stroke-width"]),"circle-stroke-color":new mr(tt.paint_circle["circle-stroke-color"]),"circle-stroke-opacity":new mr(tt.paint_circle["circle-stroke-opacity"])}),layout:iu};function ou(e,t,n,i,a,o,r,s,l){if(o&&e.queryGeometry.isAboveHorizon)return!1;o&&(l*=e.pixelToTileUnitsFactor);const c=e.tileID.canonical,u=n.projection.upVectorScale(c,n.center.lat,n.worldSize).metersToTile;for(const d of t)for(const t of d){const d=t.add(s),p=a&&n.elevation?n.elevation.exaggeration()*a.getElevationAt(d.x,d.y,!0):0,f=n.projection.projectTilePoint(d.x,d.y,c);if(p>0){const e=n.projection.upVector(c,d.x,d.y);f.x+=e[0]*u*p,f.y+=e[1]*u*p,f.z+=e[2]*u*p}const m=o?d:ru(f.x,f.y,f.z,i),h=o?e.tilespaceRays.map(e=>cu(e,p)):e.queryGeometry.screenGeometry,g=Cl([],[f.x,f.y,f.z,1],i);if(!r&&o?l*=g[3]/n.cameraToCenterDistance:r&&!o&&(l*=n.cameraToCenterDistance/g[3]),o){const e=Oc((t.y/Hs+c.y)/(1<<c.z));l/=n.projection.pixelsPerMeter(e,1)/xc(1,e)}if(Hc(h,m,l))return!0}return!1}function ru(e,t,n,i){const a=Cl([],[e,t,n,1],i);return new b(a[0]/a[3],a[1]/a[3])}const su=sl(0,0,0),lu=sl(0,0,1);function cu(e,t){const n=al();return su[2]=t,e.intersectsPlane(su,lu,n),new b(n[0],n[1])}class uu extends Fc{}function du(e,{width:t,height:n},i,a){if(a){if(a instanceof Uint8ClampedArray)a=new Uint8Array(a.buffer);else if(a.length!==t*n*i)throw new RangeError("mismatched image size")}else a=new Uint8Array(t*n*i);return e.width=t,e.height=n,e.data=a,e}function pu(e,t,n){const{width:i,height:a}=t;i===e.width&&a===e.height||(fu(e,t,{x:0,y:0},{x:0,y:0},{width:Math.min(e.width,i),height:Math.min(e.height,a)},n),e.width=i,e.height=a,e.data=t.data)}function fu(e,t,n,i,a,o){if(0===a.width||0===a.height)return t;if(a.width>e.width||a.height>e.height||n.x>e.width-a.width||n.y>e.height-a.height)throw new RangeError("out of range source coordinates for image copy");if(a.width>t.width||a.height>t.height||i.x>t.width-a.width||i.y>t.height-a.height)throw new RangeError("out of range destination coordinates for image copy");const r=e.data,s=t.data;for(let l=0;l<a.height;l++){const c=((n.y+l)*e.width+n.x)*o,u=((i.y+l)*t.width+i.x)*o;for(let e=0;e<a.width*o;e++)s[u+e]=r[c+e]}return t}Ba(uu,"HeatmapBucket",{omit:["layers"]});class mu{constructor(e,t){du(this,e,1,t)}resize(e){pu(this,new mu(e),1)}clone(){return new mu({width:this.width,height:this.height},new Uint8Array(this.data))}static copy(e,t,n,i,a){fu(e,t,n,i,a,1)}}class hu{constructor(e,t){du(this,e,4,t)}resize(e){pu(this,new hu(e),4)}replace(e,t){t?this.data.set(e):this.data=e instanceof Uint8ClampedArray?new Uint8Array(e.buffer):e}clone(){return new hu({width:this.width,height:this.height},new Uint8Array(this.data))}static copy(e,t,n,i,a){fu(e,t,n,i,a,4)}}Ba(mu,"AlphaImage"),Ba(hu,"RGBAImage");var gu={paint:new gr({"heatmap-radius":new mr(tt.paint_heatmap["heatmap-radius"]),"heatmap-weight":new mr(tt.paint_heatmap["heatmap-weight"]),"heatmap-intensity":new fr(tt.paint_heatmap["heatmap-intensity"]),"heatmap-color":new hr(tt.paint_heatmap["heatmap-color"]),"heatmap-opacity":new fr(tt.paint_heatmap["heatmap-opacity"])})};function yu(e){const t={},n=e.resolution||256,i=e.clips?e.clips.length:1,a=e.image||new hu({width:n,height:i}),o=(n,i,o)=>{t[e.evaluationKey]=o;const r=e.expression.evaluate(t);a.data[n+i+0]=Math.floor(255*r.r/r.a),a.data[n+i+1]=Math.floor(255*r.g/r.a),a.data[n+i+2]=Math.floor(255*r.b/r.a),a.data[n+i+3]=Math.floor(255*r.a)};if(e.clips)for(let t=0,a=0;t<i;++t,a+=4*n)for(let i=0,r=0;i<n;i++,r+=4){const s=i/(n-1),{start:l,end:c}=e.clips[t];o(a,r,l*(1-s)+c*s)}else for(let e=0,t=0;e<n;e++,t+=4)o(0,t,e/(n-1));return a}var vu={paint:new gr({"hillshade-illumination-direction":new fr(tt.paint_hillshade["hillshade-illumination-direction"]),"hillshade-illumination-anchor":new fr(tt.paint_hillshade["hillshade-illumination-anchor"]),"hillshade-exaggeration":new fr(tt.paint_hillshade["hillshade-exaggeration"]),"hillshade-shadow-color":new fr(tt.paint_hillshade["hillshade-shadow-color"]),"hillshade-highlight-color":new fr(tt.paint_hillshade["hillshade-highlight-color"]),"hillshade-accent-color":new fr(tt.paint_hillshade["hillshade-accent-color"])})};const bu=wr([{name:"a_pos",components:2,type:"Int16"}],4),{members:_u}=bu;var wu={exports:{}};function xu(e,t,n){n=n||2;var i,a,o,r,s,l,c,u=t&&t.length,d=u?t[0]*n:e.length,p=ku(e,0,d,n,!0),f=[];if(!p||p.next===p.prev)return f;if(u&&(p=function(e,t,n,i){var a,o,r,s=[];for(a=0,o=t.length;a<o;a++)(r=ku(e,t[a]*i,a<o-1?t[a+1]*i:e.length,i,!1))===r.next&&(r.steiner=!0),s.push(Nu(r));for(s.sort(Iu),a=0;a<s.length;a++)n=Mu(s[a],n);return n}(e,t,p,n)),e.length>80*n){i=o=e[0],a=r=e[1];for(var m=n;m<d;m+=n)(s=e[m])<i&&(i=s),(l=e[m+1])<a&&(a=l),s>o&&(o=s),l>r&&(r=l);c=0!==(c=Math.max(o-i,r-a))?32767/c:0}return Tu(p,f,n,i,a,c,0),f}function ku(e,t,n,i,a){var o,r;if(a===Yu(e,t,n,i)>0)for(o=t;o<n;o+=i)r=qu(o,e[o],e[o+1],r);else for(o=n-i;o>=t;o-=i)r=qu(o,e[o],e[o+1],r);return r&&Bu(r,r.next)&&(Vu(r),r=r.next),r}function Ou(e,t){if(!e)return e;t||(t=e);var n,i=e;do{if(n=!1,i.steiner||!Bu(i,i.next)&&0!==Ru(i.prev,i,i.next))i=i.next;else{if(Vu(i),(i=t=i.prev)===i.next)break;n=!0}}while(n||i!==t);return t}function Tu(e,t,n,i,a,o,r){if(e){!r&&o&&function(e,t,n,i){var a=e;do{0===a.z&&(a.z=ju(a.x,a.y,t,n,i)),a.prevZ=a.prev,a.nextZ=a.next,a=a.next}while(a!==e);a.prevZ.nextZ=null,a.prevZ=null,function(e){var t,n,i,a,o,r,s,l,c=1;do{for(n=e,e=null,o=null,r=0;n;){for(r++,i=n,s=0,t=0;t<c&&(s++,i=i.nextZ);t++);for(l=c;s>0||l>0&&i;)0!==s&&(0===l||!i||n.z<=i.z)?(a=n,n=n.nextZ,s--):(a=i,i=i.nextZ,l--),o?o.nextZ=a:e=a,a.prevZ=o,o=a;n=i}o.nextZ=null,c*=2}while(r>1)}(a)}(e,i,a,o);for(var s,l,c=e;e.prev!==e.next;)if(s=e.prev,l=e.next,o?Eu(e,i,a,o):Cu(e))t.push(s.i/n|0),t.push(e.i/n|0),t.push(l.i/n|0),Vu(e),e=l.next,c=l.next;else if((e=l)===c){r?1===r?Tu(e=Su(Ou(e),t,n),t,n,i,a,o,2):2===r&&Pu(e,t,n,i,a,o):Tu(Ou(e),t,n,i,a,o,1);break}}}function Cu(e){var t=e.prev,n=e,i=e.next;if(Ru(t,n,i)>=0)return!1;for(var a=t.x,o=n.x,r=i.x,s=t.y,l=n.y,c=i.y,u=a<o?a<r?a:r:o<r?o:r,d=s<l?s<c?s:c:l<c?l:c,p=a>o?a>r?a:r:o>r?o:r,f=s>l?s>c?s:c:l>c?l:c,m=i.next;m!==t;){if(m.x>=u&&m.x<=p&&m.y>=d&&m.y<=f&&Lu(a,s,o,l,r,c,m.x,m.y)&&Ru(m.prev,m,m.next)>=0)return!1;m=m.next}return!0}function Eu(e,t,n,i){var a=e.prev,o=e,r=e.next;if(Ru(a,o,r)>=0)return!1;for(var s=a.x,l=o.x,c=r.x,u=a.y,d=o.y,p=r.y,f=s<l?s<c?s:c:l<c?l:c,m=u<d?u<p?u:p:d<p?d:p,h=s>l?s>c?s:c:l>c?l:c,g=u>d?u>p?u:p:d>p?d:p,y=ju(f,m,t,n,i),v=ju(h,g,t,n,i),b=e.prevZ,_=e.nextZ;b&&b.z>=y&&_&&_.z<=v;){if(b.x>=f&&b.x<=h&&b.y>=m&&b.y<=g&&b!==a&&b!==r&&Lu(s,u,l,d,c,p,b.x,b.y)&&Ru(b.prev,b,b.next)>=0)return!1;if(b=b.prevZ,_.x>=f&&_.x<=h&&_.y>=m&&_.y<=g&&_!==a&&_!==r&&Lu(s,u,l,d,c,p,_.x,_.y)&&Ru(_.prev,_,_.next)>=0)return!1;_=_.nextZ}for(;b&&b.z>=y;){if(b.x>=f&&b.x<=h&&b.y>=m&&b.y<=g&&b!==a&&b!==r&&Lu(s,u,l,d,c,p,b.x,b.y)&&Ru(b.prev,b,b.next)>=0)return!1;b=b.prevZ}for(;_&&_.z<=v;){if(_.x>=f&&_.x<=h&&_.y>=m&&_.y<=g&&_!==a&&_!==r&&Lu(s,u,l,d,c,p,_.x,_.y)&&Ru(_.prev,_,_.next)>=0)return!1;_=_.nextZ}return!0}function Su(e,t,n){var i=e;do{var a=i.prev,o=i.next.next;!Bu(a,o)&&zu(a,i,i.next,o)&&Hu(a,o)&&Hu(o,a)&&(t.push(a.i/n|0),t.push(i.i/n|0),t.push(o.i/n|0),Vu(i),Vu(i.next),i=e=o),i=i.next}while(i!==e);return Ou(i)}function Pu(e,t,n,i,a,o){var r=e;do{for(var s=r.next.next;s!==r.prev;){if(r.i!==s.i&&Du(r,s)){var l=Wu(r,s);return r=Ou(r,r.next),l=Ou(l,l.next),Tu(r,t,n,i,a,o,0),void Tu(l,t,n,i,a,o,0)}s=s.next}r=r.next}while(r!==e)}function Iu(e,t){return e.x-t.x}function Mu(e,t){var n=function(e,t){var n,i=t,a=e.x,o=e.y,r=-1/0;do{if(o<=i.y&&o>=i.next.y&&i.next.y!==i.y){var s=i.x+(o-i.y)*(i.next.x-i.x)/(i.next.y-i.y);if(s<=a&&s>r&&(r=s,n=i.x<i.next.x?i:i.next,s===a))return n}i=i.next}while(i!==t);if(!n)return null;var l,c=n,u=n.x,d=n.y,p=1/0;i=n;do{a>=i.x&&i.x>=u&&a!==i.x&&Lu(o<d?a:r,o,u,d,o<d?r:a,o,i.x,i.y)&&(l=Math.abs(o-i.y)/(a-i.x),Hu(i,e)&&(l<p||l===p&&(i.x>n.x||i.x===n.x&&Au(n,i)))&&(n=i,p=l)),i=i.next}while(i!==c);return n}(e,t);if(!n)return t;var i=Wu(n,e);return Ou(i,i.next),Ou(n,n.next)}function Au(e,t){return Ru(e.prev,e,t.prev)<0&&Ru(t.next,e,e.next)<0}function ju(e,t,n,i,a){return(e=1431655765&((e=858993459&((e=252645135&((e=16711935&((e=(e-n)*a|0)|e<<8))|e<<4))|e<<2))|e<<1))|(t=1431655765&((t=858993459&((t=252645135&((t=16711935&((t=(t-i)*a|0)|t<<8))|t<<4))|t<<2))|t<<1))<<1}function Nu(e){var t=e,n=e;do{(t.x<n.x||t.x===n.x&&t.y<n.y)&&(n=t),t=t.next}while(t!==e);return n}function Lu(e,t,n,i,a,o,r,s){return(a-r)*(t-s)>=(e-r)*(o-s)&&(e-r)*(i-s)>=(n-r)*(t-s)&&(n-r)*(o-s)>=(a-r)*(i-s)}function Du(e,t){return e.next.i!==t.i&&e.prev.i!==t.i&&!function(e,t){var n=e;do{if(n.i!==e.i&&n.next.i!==e.i&&n.i!==t.i&&n.next.i!==t.i&&zu(n,n.next,e,t))return!0;n=n.next}while(n!==e);return!1}(e,t)&&(Hu(e,t)&&Hu(t,e)&&function(e,t){var n=e,i=!1,a=(e.x+t.x)/2,o=(e.y+t.y)/2;do{n.y>o!=n.next.y>o&&n.next.y!==n.y&&a<(n.next.x-n.x)*(o-n.y)/(n.next.y-n.y)+n.x&&(i=!i),n=n.next}while(n!==e);return i}(e,t)&&(Ru(e.prev,e,t.prev)||Ru(e,t.prev,t))||Bu(e,t)&&Ru(e.prev,e,e.next)>0&&Ru(t.prev,t,t.next)>0)}function Ru(e,t,n){return(t.y-e.y)*(n.x-t.x)-(t.x-e.x)*(n.y-t.y)}function Bu(e,t){return e.x===t.x&&e.y===t.y}function zu(e,t,n,i){var a=Uu(Ru(e,t,n)),o=Uu(Ru(e,t,i)),r=Uu(Ru(n,i,e)),s=Uu(Ru(n,i,t));return a!==o&&r!==s||!(0!==a||!Fu(e,n,t))||!(0!==o||!Fu(e,i,t))||!(0!==r||!Fu(n,e,i))||!(0!==s||!Fu(n,t,i))}function Fu(e,t,n){return t.x<=Math.max(e.x,n.x)&&t.x>=Math.min(e.x,n.x)&&t.y<=Math.max(e.y,n.y)&&t.y>=Math.min(e.y,n.y)}function Uu(e){return e>0?1:e<0?-1:0}function Hu(e,t){return Ru(e.prev,e,e.next)<0?Ru(e,t,e.next)>=0&&Ru(e,e.prev,t)>=0:Ru(e,t,e.prev)<0||Ru(e,e.next,t)<0}function Wu(e,t){var n=new Gu(e.i,e.x,e.y),i=new Gu(t.i,t.x,t.y),a=e.next,o=t.prev;return e.next=t,t.prev=e,n.next=a,a.prev=n,i.next=n,n.prev=i,o.next=i,i.prev=o,i}function qu(e,t,n,i){var a=new Gu(e,t,n);return i?(a.next=i.next,a.prev=i,i.next.prev=a,i.next=a):(a.prev=a,a.next=a),a}function Vu(e){e.next.prev=e.prev,e.prev.next=e.next,e.prevZ&&(e.prevZ.nextZ=e.nextZ),e.nextZ&&(e.nextZ.prevZ=e.prevZ)}function Gu(e,t,n){this.i=e,this.x=t,this.y=n,this.prev=null,this.next=null,this.z=0,this.prevZ=null,this.nextZ=null,this.steiner=!1}function Yu(e,t,n,i){for(var a=0,o=t,r=n-i;o<n;o+=i)a+=(e[r]-e[o])*(e[o+1]+e[r+1]),r=o;return a}wu.exports=xu,wu.exports.default=xu,xu.deviation=function(e,t,n,i){var a=t&&t.length,o=Math.abs(Yu(e,0,a?t[0]*n:e.length,n));if(a)for(var r=0,s=t.length;r<s;r++)o-=Math.abs(Yu(e,t[r]*n,r<s-1?t[r+1]*n:e.length,n));var l=0;for(r=0;r<i.length;r+=3){var c=i[r]*n,u=i[r+1]*n,d=i[r+2]*n;l+=Math.abs((e[c]-e[d])*(e[u+1]-e[c+1])-(e[c]-e[u])*(e[d+1]-e[c+1]))}return 0===o&&0===l?0:Math.abs((l-o)/o)},xu.flatten=function(e){for(var t=e[0][0].length,n={vertices:[],holes:[],dimensions:t},i=0,a=0;a<e.length;a++){for(var o=0;o<e[a].length;o++)for(var r=0;r<t;r++)n.vertices.push(e[a][o][r]);a>0&&n.holes.push(i+=e[a-1].length)}return n};var Xu=f(wu.exports);function Zu(e,t,n,i,a){!function e(t,n,i,a,o){for(;a>i;){if(a-i>600){var r=a-i+1,s=n-i+1,l=Math.log(r),c=.5*Math.exp(2*l/3),u=.5*Math.sqrt(l*c*(r-c)/r)*(s-r/2<0?-1:1);e(t,n,Math.max(i,Math.floor(n-s*c/r+u)),Math.min(a,Math.floor(n+(r-s)*c/r+u)),o)}var d=t[n],p=i,f=a;for(Ju(t,i,n),o(t[a],d)>0&&Ju(t,i,a);p<f;){for(Ju(t,p,f),p++,f--;o(t[p],d)<0;)p++;for(;o(t[f],d)>0;)f--}0===o(t[i],d)?Ju(t,i,f):Ju(t,++f,a),f<=n&&(i=f+1),n<=f&&(a=f-1)}}(e,t,n||0,i||e.length-1,a||Ku)}function Ju(e,t,n){var i=e[t];e[t]=e[n],e[n]=i}function Ku(e,t){return e<t?-1:e>t?1:0}function $u(e,t){const n=e.length;if(n<=1)return[e];const i=[];let a,o;for(let t=0;t<n;t++){const n=Y(e[t]);0!==n&&(e[t].area=Math.abs(n),void 0===o&&(o=n<0),o===n<0?(a&&i.push(a),a=[e[t]]):a.push(e[t]))}if(a&&i.push(a),t>1)for(let e=0;e<i.length;e++)i[e].length<=t||(Zu(i[e],t,1,i[e].length-1,Qu),i[e]=i[e].slice(0,t));return i}function Qu(e,t){return t.area-e.area}function ed(e,t,n){const i=n.patternDependencies;let a=!1;for(const n of t){const t=n.paint.get(e+"-pattern");t.isConstant()||(a=!0);const o=t.constantOr(null);o&&(a=!0,i[o]=!0)}return a}function td(e,t,n,i,a){const o=a.patternDependencies;for(const r of t){const t=r.paint.get(e+"-pattern").value;if("constant"!==t.kind){let e=t.evaluate({zoom:i},n,{},a.availableImages);e=e&&e.name?e.name:e,o[e]=!0,n.patterns[r.id]=e}}return n}class nd{constructor(e){this.zoom=e.zoom,this.overscaling=e.overscaling,this.layers=e.layers,this.layerIds=this.layers.map(e=>e.id),this.index=e.index,this.hasPattern=!1,this.patternFeatures=[],this.layoutVertexArray=new kr,this.indexArray=new zr,this.indexArray2=new Vr,this.programConfigurations=new Ms(e.layers,e.zoom),this.segments=new Us,this.segments2=new Us,this.stateDependentLayerIds=this.layers.filter(e=>e.isStateDependent()).map(e=>e.id),this.projection=e.projection}populate(e,t,n,i){this.hasPattern=ed("fill",this.layers,t);const a=this.layers[0].layout.get("fill-sort-key"),o=[];for(const{feature:r,id:s,index:l,sourceLayerIndex:c}of e){const e=this.layers[0]._featureFilter.needGeometry,u=Rc(r,e);if(!this.layers[0]._featureFilter.filter(new ar(this.zoom),u,n))continue;const d=a?a.evaluate(u,{},n,t.availableImages):void 0,p={id:s,properties:r.properties,type:r.type,sourceLayerIndex:c,index:l,geometry:e?u.geometry:Dc(r,n,i),patterns:{},sortKey:d};o.push(p)}a&&o.sort((e,t)=>e.sortKey-t.sortKey);for(const i of o){const{geometry:a,index:o,sourceLayerIndex:r}=i;if(this.hasPattern){const e=td("fill",this.layers,i,this.zoom,t);this.patternFeatures.push(e)}else this.addFeature(i,a,o,n,{},t.availableImages);t.featureIndex.insert(e[o].feature,a,o,r,this.index)}}update(e,t,n,i){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(e,t,this.stateDependentLayers,n,i)}addFeatures(e,t,n,i,a){for(const e of this.patternFeatures)this.addFeature(e,e.geometry,e.index,t,n,i)}isEmpty(){return 0===this.layoutVertexArray.length}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(e){this.uploaded||(this.layoutVertexBuffer=e.createVertexBuffer(this.layoutVertexArray,_u),this.indexBuffer=e.createIndexBuffer(this.indexArray),this.indexBuffer2=e.createIndexBuffer(this.indexArray2)),this.programConfigurations.upload(e),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.indexBuffer2.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.segments2.destroy())}addFeature(e,t,n,i,a,o=[]){for(const e of $u(t,500)){let t=0;for(const n of e)t+=n.length;const n=this.segments.prepareSegment(t,this.layoutVertexArray,this.indexArray),i=n.vertexLength,a=[],o=[];for(const t of e){if(0===t.length)continue;t!==e[0]&&o.push(a.length/2);const n=this.segments2.prepareSegment(t.length,this.layoutVertexArray,this.indexArray2),i=n.vertexLength;this.layoutVertexArray.emplaceBack(t[0].x,t[0].y),this.indexArray2.emplaceBack(i+t.length-1,i),a.push(t[0].x),a.push(t[0].y);for(let e=1;e<t.length;e++)this.layoutVertexArray.emplaceBack(t[e].x,t[e].y),this.indexArray2.emplaceBack(i+e-1,i+e),a.push(t[e].x),a.push(t[e].y);n.vertexLength+=t.length,n.primitiveLength+=t.length}const r=Xu(a,o);for(let e=0;e<r.length;e+=3)this.indexArray.emplaceBack(i+r[e],i+r[e+1],i+r[e+2]);n.vertexLength+=t,n.primitiveLength+=r.length/3}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,e,n,a,o,i)}}Ba(nd,"FillBucket",{omit:["layers","patternFeatures"]});const id=new gr({"fill-sort-key":new mr(tt.layout_fill["fill-sort-key"])});var ad={paint:new gr({"fill-antialias":new fr(tt.paint_fill["fill-antialias"]),"fill-opacity":new mr(tt.paint_fill["fill-opacity"]),"fill-color":new mr(tt.paint_fill["fill-color"]),"fill-outline-color":new mr(tt.paint_fill["fill-outline-color"]),"fill-translate":new fr(tt.paint_fill["fill-translate"]),"fill-translate-anchor":new fr(tt.paint_fill["fill-translate-anchor"]),"fill-pattern":new mr(tt.paint_fill["fill-pattern"])}),layout:id};const od=wr([{name:"a_pos_normal_ed",components:4,type:"Int16"}]),rd=wr([{name:"a_centroid_pos",components:2,type:"Uint16"}]),sd=wr([{name:"a_pos_3",components:3,type:"Int16"},{name:"a_pos_normal_3",components:3,type:"Int16"}]),{members:ld}=od;var cd={},ud=y,dd=pd;function pd(e,t,n,i,a){this.properties={},this.extent=n,this.type=0,this._pbf=e,this._geometry=-1,this._keys=i,this._values=a,e.readFields(fd,this,t)}function fd(e,t,n){1==e?t.id=n.readVarint():2==e?function(e,t){for(var n=e.readVarint()+e.pos;e.pos<n;){var i=t._keys[e.readVarint()],a=t._values[e.readVarint()];t.properties[i]=a}}(n,t):3==e?t.type=n.readVarint():4==e&&(t._geometry=n.pos)}function md(e){for(var t,n,i=0,a=0,o=e.length,r=o-1;a<o;r=a++)i+=((n=e[r]).x-(t=e[a]).x)*(t.y+n.y);return i}pd.types=["Unknown","Point","LineString","Polygon"],pd.prototype.loadGeometry=function(){var e=this._pbf;e.pos=this._geometry;for(var t,n=e.readVarint()+e.pos,i=1,a=0,o=0,r=0,s=[];e.pos<n;){if(a<=0){var l=e.readVarint();i=7&l,a=l>>3}if(a--,1===i||2===i)o+=e.readSVarint(),r+=e.readSVarint(),1===i&&(t&&s.push(t),t=[]),t.push(new ud(o,r));else{if(7!==i)throw new Error("unknown command "+i);t&&t.push(t[0].clone())}}return t&&s.push(t),s},pd.prototype.bbox=function(){var e=this._pbf;e.pos=this._geometry;for(var t=e.readVarint()+e.pos,n=1,i=0,a=0,o=0,r=1/0,s=-1/0,l=1/0,c=-1/0;e.pos<t;){if(i<=0){var u=e.readVarint();n=7&u,i=u>>3}if(i--,1===n||2===n)(a+=e.readSVarint())<r&&(r=a),a>s&&(s=a),(o+=e.readSVarint())<l&&(l=o),o>c&&(c=o);else if(7!==n)throw new Error("unknown command "+n)}return[r,l,s,c]},pd.prototype.toGeoJSON=function(e,t,n){var i,a,o=this.extent*Math.pow(2,n),r=this.extent*e,s=this.extent*t,l=this.loadGeometry(),c=pd.types[this.type];function u(e){for(var t=0;t<e.length;t++){var n=e[t];e[t]=[360*(n.x+r)/o-180,360/Math.PI*Math.atan(Math.exp((180-360*(n.y+s)/o)*Math.PI/180))-90]}}switch(this.type){case 1:var d=[];for(i=0;i<l.length;i++)d[i]=l[i][0];u(l=d);break;case 2:for(i=0;i<l.length;i++)u(l[i]);break;case 3:for(l=function(e){var t=e.length;if(t<=1)return[e];for(var n,i,a=[],o=0;o<t;o++){var r=md(e[o]);0!==r&&(void 0===i&&(i=r<0),i===r<0?(n&&a.push(n),n=[e[o]]):n.push(e[o]))}return n&&a.push(n),a}(l),i=0;i<l.length;i++)for(a=0;a<l[i].length;a++)u(l[i][a])}1===l.length?l=l[0]:c="Multi"+c;var p={type:"Feature",geometry:{type:c,coordinates:l},properties:this.properties};return"id"in this&&(p.id=this.id),p};var hd=dd,gd=yd;function yd(e,t){this.version=1,this.name=null,this.extent=4096,this.length=0,this._pbf=e,this._keys=[],this._values=[],this._features=[],e.readFields(vd,this,t),this.length=this._features.length}function vd(e,t,n){15===e?t.version=n.readVarint():1===e?t.name=n.readString():5===e?t.extent=n.readVarint():2===e?t._features.push(n.pos):3===e?t._keys.push(n.readString()):4===e&&t._values.push(function(e){for(var t=null,n=e.readVarint()+e.pos;e.pos<n;){var i=e.readVarint()>>3;t=1===i?e.readString():2===i?e.readFloat():3===i?e.readDouble():4===i?e.readVarint64():5===i?e.readVarint():6===i?e.readSVarint():7===i?e.readBoolean():null}return t}(n))}yd.prototype.feature=function(e){if(e<0||e>=this._features.length)throw new Error("feature index out of bounds");this._pbf.pos=this._features[e];var t=this._pbf.readVarint()+this._pbf.pos;return new hd(this._pbf,t,this.extent,this._keys,this._values)};var bd=gd;function _d(e,t,n){if(3===e){var i=new bd(n,n.readVarint()+n.pos);i.length&&(t[i.name]=i)}}var wd=cd.VectorTile=function(e,t){this.layers=e.readFields(_d,{},t)},xd=cd.VectorTileFeature=dd;function kd(e,t,n,i){const a=[],o=0===i?(e,t,n,i,a,o)=>{e.push(new b(o,n+(o-t)/(i-t)*(a-n)))}:(e,t,n,i,a,o)=>{e.push(new b(t+(o-n)/(a-n)*(i-t),o))};for(const r of e){const e=[];for(const a of r){if(a.length<=2)continue;const r=[];for(let e=0;e<a.length-1;e++){const s=a[e].x,l=a[e].y,c=a[e+1].x,u=a[e+1].y,d=0===i?s:l,p=0===i?c:u;d<t?p>t&&o(r,s,l,c,u,t):d>n?p<n&&o(r,s,l,c,u,n):r.push(a[e]),p<t&&d>=t&&o(r,s,l,c,u,t),p>n&&d<=n&&o(r,s,l,c,u,n)}let s=a[a.length-1];const l=0===i?s.x:s.y;l>=t&&l<=n&&r.push(s),r.length&&(s=r[r.length-1],r[0].x===s.x&&r[0].y===s.y||r.push(r[0]),e.push(r))}e.length&&a.push(e)}return a}cd.VectorTileLayer=gd;const Od=xd.types,Td=Math.pow(2,13);function Cd(e,t,n,i,a,o,r,s){e.emplaceBack((t<<1)+r,(n<<1)+o,(Math.floor(i*Td)<<1)+a,Math.round(s))}function Ed(e,t,n){const i=16384;e.emplaceBack(t.x,t.y,t.z,n[0]*i,n[1]*i,n[2]*i)}class Sd{constructor(){this.acc=new b(0,0),this.polyCount=[]}startRing(e){this.currentPolyCount={edges:0,top:0},this.polyCount.push(this.currentPolyCount),this.min||(this.min=new b(e.x,e.y),this.max=new b(e.x,e.y))}append(e,t){this.currentPolyCount.edges++,this.acc._add(e);const n=this.min,i=this.max;e.x<n.x?n.x=e.x:e.x>i.x&&(i.x=e.x),e.y<n.y?n.y=e.y:e.y>i.y&&(i.y=e.y),((0===e.x||e.x===Hs)&&e.x===t.x)!=((0===e.y||e.y===Hs)&&e.y===t.y)&&this.processBorderOverlap(e,t),t.x<0!=e.x<0&&this.addBorderIntersection(0,An(t.y,e.y,(0-t.x)/(e.x-t.x))),t.x>Hs!=e.x>Hs&&this.addBorderIntersection(1,An(t.y,e.y,(Hs-t.x)/(e.x-t.x))),t.y<0!=e.y<0&&this.addBorderIntersection(2,An(t.x,e.x,(0-t.y)/(e.y-t.y))),t.y>Hs!=e.y>Hs&&this.addBorderIntersection(3,An(t.x,e.x,(Hs-t.y)/(e.y-t.y)))}addBorderIntersection(e,t){this.borders||(this.borders=[[Number.MAX_VALUE,-Number.MAX_VALUE],[Number.MAX_VALUE,-Number.MAX_VALUE],[Number.MAX_VALUE,-Number.MAX_VALUE],[Number.MAX_VALUE,-Number.MAX_VALUE]]);const n=this.borders[e];t<n[0]&&(n[0]=t),t>n[1]&&(n[1]=t)}processBorderOverlap(e,t){if(e.x===t.x){if(e.y===t.y)return;const n=0===e.x?0:1;this.addBorderIntersection(n,t.y),this.addBorderIntersection(n,e.y)}else{const n=0===e.y?2:3;this.addBorderIntersection(n,t.x),this.addBorderIntersection(n,e.x)}}centroid(){const e=this.polyCount.reduce((e,t)=>e+t.edges,0);return 0!==e?this.acc.div(e)._round():new b(0,0)}span(){return new b(this.max.x-this.min.x,this.max.y-this.min.y)}intersectsCount(){return this.borders.reduce((e,t)=>e+ +(t[0]!==Number.MAX_VALUE),0)}}class Pd{constructor(e){this.zoom=e.zoom,this.canonical=e.canonical,this.overscaling=e.overscaling,this.layers=e.layers,this.layerIds=this.layers.map(e=>e.id),this.index=e.index,this.hasPattern=!1,this.edgeRadius=0,this.projection=e.projection,this.layoutVertexArray=new Tr,this.centroidVertexArray=new as,this.indexArray=new zr,this.programConfigurations=new Ms(e.layers,e.zoom),this.segments=new Us,this.stateDependentLayerIds=this.layers.filter(e=>e.isStateDependent()).map(e=>e.id),this.enableTerrain=e.enableTerrain}populate(e,t,n,i){this.features=[],this.hasPattern=ed("fill-extrusion",this.layers,t),this.featuresOnBorder=[],this.borders=[[],[],[],[]],this.borderDoneWithNeighborZ=[-1,-1,-1,-1],this.tileToMeter=function(e){const t=Math.exp(Math.PI*(1-e.y/(1<<e.z)*2));return 80150034*t/(t*t+1)/Hs/(1<<e.z)}(n),this.edgeRadius=this.layers[0].layout.get("fill-extrusion-edge-radius")/this.tileToMeter;for(const{feature:a,id:o,index:r,sourceLayerIndex:s}of e){const e=this.layers[0]._featureFilter.needGeometry,l=Rc(a,e);if(!this.layers[0]._featureFilter.filter(new ar(this.zoom),l,n))continue;const c={id:o,sourceLayerIndex:s,index:r,geometry:e?l.geometry:Dc(a,n,i),properties:a.properties,type:a.type,patterns:{}},u=this.layoutVertexArray.length;this.hasPattern?this.features.push(td("fill-extrusion",this.layers,c,this.zoom,t)):this.addFeature(c,c.geometry,r,n,{},t.availableImages,i),t.featureIndex.insert(a,c.geometry,r,s,this.index,u)}this.sortBorders()}addFeatures(e,t,n,i,a){for(const e of this.features){const{geometry:o}=e;this.addFeature(e,o,e.index,t,n,i,a)}this.sortBorders()}update(e,t,n,i){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(e,t,this.stateDependentLayers,n,i)}isEmpty(){return 0===this.layoutVertexArray.length}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(e){this.uploaded||(this.layoutVertexBuffer=e.createVertexBuffer(this.layoutVertexArray,ld),this.indexBuffer=e.createIndexBuffer(this.indexArray),this.layoutVertexExtArray&&(this.layoutVertexExtBuffer=e.createVertexBuffer(this.layoutVertexExtArray,sd.members,!0))),this.programConfigurations.upload(e),this.uploaded=!0}uploadCentroid(e){0!==this.centroidVertexArray.length&&(this.centroidVertexBuffer?this.needsCentroidUpdate&&this.centroidVertexBuffer.updateData(this.centroidVertexArray):this.centroidVertexBuffer=e.createVertexBuffer(this.centroidVertexArray,rd.members,!0),this.needsCentroidUpdate=!1)}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.centroidVertexBuffer&&this.centroidVertexBuffer.destroy(),this.layoutVertexExtBuffer&&this.layoutVertexExtBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())}addFeature(e,t,n,i,a,o,r){const s=[new b(0,0),new b(Hs,Hs)],l=r.projection,c="globe"===l.name,u=this.enableTerrain&&!c?new Sd:null,d="Polygon"===Od[e.type];c&&!this.layoutVertexExtArray&&(this.layoutVertexExtArray=new Ir);const p=$u(t,500);for(let e=p.length-1;e>=0;e--){const t=p[e];(0===t.length||(f=t[0]).every(e=>e.x<=0)||f.every(e=>e.x>=Hs)||f.every(e=>e.y<=0)||f.every(e=>e.y>=Hs))&&p.splice(e,1)}var f;let m;if(c)m=Rd(p,s,i);else{m=[];for(const e of p)m.push({polygon:e,bounds:s})}const h=d?this.edgeRadius:0;for(const{polygon:e,bounds:t}of m){let n=0,a=0;for(const t of e)d&&!t[0].equals(t[t.length-1])&&t.push(t[0]),a+=d?t.length-1:t.length;const o=this.segments.prepareSegment((d?5:4)*a,this.layoutVertexArray,this.indexArray);if(d){const t=[],a=[];n=o.vertexLength;for(const n of e){let r,s;n.length&&n!==e[0]&&a.push(t.length/2),r=n[1].sub(n[0])._perp()._unit();for(let e=1;e<n.length;e++){const a=n[e],u=n[e===n.length-1?1:e+1];let{x:d,y:p}=a;if(h){s=u.sub(a)._perp()._unit();const e=r.add(s)._unit(),t=h*Math.min(4,1/(r.x*e.x+r.y*e.y));d+=t*e.x,p+=t*e.y,r=s}Cd(this.layoutVertexArray,d,p,0,0,1,1,0),o.vertexLength++,t.push(a.x,a.y),c&&Ed(this.layoutVertexExtArray,l.projectTilePoint(d,p,i),l.upVector(i,d,p))}}const r=Xu(t,a);for(let e=0;e<r.length;e+=3)this.indexArray.emplaceBack(n+r[e],n+r[e+2],n+r[e+1]),o.primitiveLength++}for(const a of e){u&&a.length&&u.startRing(a[0]);let e,r,s,p=a.length>4&&Nd(a[a.length-2],a[0],a[1]),f=h?Md(a[a.length-2],a[0],a[1],h):0;r=a[1].sub(a[0])._perp()._unit();let m=!0;for(let g=1,y=0;g<a.length;g++){let v=a[g-1],b=a[g];const _=a[g===a.length-1?1:g+1];if(u&&d&&u.currentPolyCount.top++,jd(b,v,t)){h&&(r=_.sub(b)._perp()._unit(),m=!m);continue}u&&u.append(b,v);const w=b.sub(v)._perp(),x=w.x/(Math.abs(w.x)+Math.abs(w.y)),k=w.y>0?1:0,O=v.dist(b);if(y+O>32768&&(y=0),h){s=_.sub(b)._perp()._unit();let e=Ad(v,b,_,Id(r,s),h);isNaN(e)&&(e=0);const t=b.sub(v)._unit();v=v.add(t.mult(f))._round(),b=b.add(t.mult(-e))._round(),f=e,r=s}const T=o.vertexLength,C=a.length>4&&Nd(v,b,_);let E=Ld(y,p,m);if(Cd(this.layoutVertexArray,v.x,v.y,x,k,0,0,E),Cd(this.layoutVertexArray,v.x,v.y,x,k,0,1,E),y+=O,E=Ld(y,C,!m),p=C,Cd(this.layoutVertexArray,b.x,b.y,x,k,0,0,E),Cd(this.layoutVertexArray,b.x,b.y,x,k,0,1,E),o.vertexLength+=4,this.indexArray.emplaceBack(T+0,T+1,T+2),this.indexArray.emplaceBack(T+1,T+3,T+2),o.primitiveLength+=2,h){const i=n+(1===g?a.length-2:g-2),r=1===g?n:i+1;if(this.indexArray.emplaceBack(T+1,i,T+3),this.indexArray.emplaceBack(i,r,T+3),o.primitiveLength+=2,void 0===e&&(e=T),!jd(_,a[g],t)){const t=g===a.length-1?e:o.vertexLength;this.indexArray.emplaceBack(T+2,T+3,t),this.indexArray.emplaceBack(T+3,t+1,t),this.indexArray.emplaceBack(T+3,r,t+1),o.primitiveLength+=3}m=!m}if(c){const e=this.layoutVertexExtArray,t=l.projectTilePoint(v.x,v.y,i),n=l.projectTilePoint(b.x,b.y,i),a=l.upVector(i,v.x,v.y),o=l.upVector(i,b.x,b.y);Ed(e,t,a),Ed(e,t,a),Ed(e,n,o),Ed(e,n,o)}}d&&(n+=a.length-1)}}if(u&&u.polyCount.length>0){if(u.borders){u.vertexArrayOffset=this.centroidVertexArray.length;const e=u.borders,t=this.featuresOnBorder.push(u)-1;for(let n=0;n<4;n++)e[n][0]!==Number.MAX_VALUE&&this.borders[n].push(t)}this.encodeCentroid(u.borders?void 0:u.centroid(),u)}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,e,n,a,o,i)}sortBorders(){for(let e=0;e<4;e++)this.borders[e].sort((t,n)=>this.featuresOnBorder[t].borders[e][0]-this.featuresOnBorder[n].borders[e][0])}encodeCentroid(e,t,n=!0){let i,a;if(e)if(0!==e.y){const n=t.span()._mult(this.tileToMeter);i=(Math.max(e.x,1)<<3)+Math.min(7,Math.round(n.x/10)),a=(Math.max(e.y,1)<<3)+Math.min(7,Math.round(n.y/10))}else i=Math.ceil(7*(e.x+450)),a=0;else i=0,a=+n;let o=n?this.centroidVertexArray.length:t.vertexArrayOffset;for(const e of t.polyCount){n&&this.centroidVertexArray.resize(this.centroidVertexArray.length+4*e.edges+e.top);for(let t=0;t<e.top;t++)this.centroidVertexArray.emplace(o++,i,a);for(let t=0;t<2*e.edges;t++)this.centroidVertexArray.emplace(o++,0,a),this.centroidVertexArray.emplace(o++,i,a)}}}function Id(e,t){const n=e.add(t)._unit();return e.x*n.x+e.y*n.y}function Md(e,t,n,i){const a=t.sub(e)._perp()._unit(),o=n.sub(t)._perp()._unit();return Ad(e,t,n,Id(a,o),i)}function Ad(e,t,n,i,a){const o=Math.sqrt(1-i*i);return Math.min(e.dist(t)/3,t.dist(n)/3,a*o/i)}function jd(e,t,n){return e.x<n[0].x&&t.x<n[0].x||e.x>n[1].x&&t.x>n[1].x||e.y<n[0].y&&t.y<n[0].y||e.y>n[1].y&&t.y>n[1].y}function Nd(e,t,n){if(e.x<0||e.x>=Hs||t.x<0||t.x>=Hs||n.x<0||n.x>=Hs)return!1;const i=n.sub(t),a=i.perp(),o=e.sub(t);return(i.x*o.x+i.y*o.y)/Math.sqrt((i.x*i.x+i.y*i.y)*(o.x*o.x+o.y*o.y))>-.866&&a.x*o.x+a.y*o.y<0}function Ld(e,t,n){const i=t?2|e:-3&e;return n?1|i:-2&i}function Dd(){const e=Math.PI/32,t=Math.tan(e),n=hc;return n*Math.sqrt(1+2*t*t)-n}function Rd(e,t,n){const i=1<<n.z,a=kc(n.x/i),o=kc((n.x+1)/i),r=Oc(n.y/i),s=Oc((n.y+1)/i);return function(e,t,n,i,a=0,o){const r=[];if(!e.length||!n||!i)return r;const s=(e,t)=>{for(const n of e)r.push({polygon:n,bounds:t})},l=Math.ceil(Math.log2(n)),c=Math.ceil(Math.log2(i)),u=l-c,d=[];for(let e=0;e<Math.abs(u);e++)d.push(u>0?0:1);for(let e=0;e<Math.min(l,c);e++)d.push(0),d.push(1);let p=e;if(p=kd(p,t[0].y-a,t[1].y+a,1),p=kd(p,t[0].x-a,t[1].x+a,0),!p.length)return r;const f=[];for(d.length?f.push({polygons:p,bounds:t,depth:0}):s(p,t);f.length;){const e=f.pop(),t=e.depth,n=d[t],i=e.bounds[0],r=e.bounds[1],l=0===n?i.x:i.y,c=0===n?r.x:r.y,u=o?o(n,l,c):.5*(l+c),p=kd(e.polygons,l-a,u+a,n),m=kd(e.polygons,u-a,c+a,n);if(p.length){const e=[i,new b(0===n?u:r.x,1===n?u:r.y)];d.length>t+1?f.push({polygons:p,bounds:e,depth:t+1}):s(p,e)}if(m.length){const e=[new b(0===n?u:i.x,1===n?u:i.y),r];d.length>t+1?f.push({polygons:m,bounds:e,depth:t+1}):s(m,e)}}return r}(e,t,Math.ceil((o-a)/11.25),Math.ceil((r-s)/11.25),1,(e,t,a)=>{if(0===e)return.5*(t+a);{const e=Oc((n.y+t/Hs)/i);return(wc(.5*(Oc((n.y+a/Hs)/i)+e))*i-n.y)*Hs}})}Ba(Pd,"FillExtrusionBucket",{omit:["layers","features"]}),Ba(Sd,"PartMetadata");const Bd=new gr({"fill-extrusion-edge-radius":new fr(tt["layout_fill-extrusion"]["fill-extrusion-edge-radius"])});var zd={paint:new gr({"fill-extrusion-opacity":new fr(tt["paint_fill-extrusion"]["fill-extrusion-opacity"]),"fill-extrusion-color":new mr(tt["paint_fill-extrusion"]["fill-extrusion-color"]),"fill-extrusion-translate":new fr(tt["paint_fill-extrusion"]["fill-extrusion-translate"]),"fill-extrusion-translate-anchor":new fr(tt["paint_fill-extrusion"]["fill-extrusion-translate-anchor"]),"fill-extrusion-pattern":new mr(tt["paint_fill-extrusion"]["fill-extrusion-pattern"]),"fill-extrusion-height":new mr(tt["paint_fill-extrusion"]["fill-extrusion-height"]),"fill-extrusion-base":new mr(tt["paint_fill-extrusion"]["fill-extrusion-base"]),"fill-extrusion-vertical-gradient":new fr(tt["paint_fill-extrusion"]["fill-extrusion-vertical-gradient"]),"fill-extrusion-ambient-occlusion-intensity":new fr(tt["paint_fill-extrusion"]["fill-extrusion-ambient-occlusion-intensity"]),"fill-extrusion-ambient-occlusion-radius":new fr(tt["paint_fill-extrusion"]["fill-extrusion-ambient-occlusion-radius"]),"fill-extrusion-rounded-roof":new fr(tt["paint_fill-extrusion"]["fill-extrusion-rounded-roof"])}),layout:Bd};function Fd(e,t,n){var i=2*Math.PI*6378137/256/Math.pow(2,n);return[e*i-2*Math.PI*6378137/2,t*i-2*Math.PI*6378137/2]}class Ud{constructor(e,t,n){this.z=e,this.x=t,this.y=n,this.key=qd(0,e,e,t,n)}equals(e){return this.z===e.z&&this.x===e.x&&this.y===e.y}url(e,t){const n=function(e,t,n){var i=Fd(256*e,256*(t=Math.pow(2,n)-t-1),n),a=Fd(256*(e+1),256*(t+1),n);return i[0]+","+i[1]+","+a[0]+","+a[1]}(this.x,this.y,this.z),i=function(e,t,n){let i,a="";for(let o=e;o>0;o--)i=1<<o-1,a+=(t&i?1:0)+(n&i?2:0);return a}(this.z,this.x,this.y);return e[(this.x+this.y)%e.length].replace("{prefix}",(this.x%16).toString(16)+(this.y%16).toString(16)).replace(/{z}/g,String(this.z)).replace(/{x}/g,String(this.x)).replace(/{y}/g,String("tms"===t?Math.pow(2,this.z)-this.y-1:this.y)).replace("{quadkey}",i).replace("{bbox-epsg-3857}",n)}toString(){return`${this.z}/${this.x}/${this.y}`}}class Hd{constructor(e,t){this.wrap=e,this.canonical=t,this.key=qd(e,t.z,t.z,t.x,t.y)}}class Wd{constructor(e,t,n,i,a){this.overscaledZ=e,this.wrap=t,this.canonical=new Ud(n,+i,+a),this.key=0===t&&e===n?this.canonical.key:qd(t,e,n,i,a)}equals(e){return this.overscaledZ===e.overscaledZ&&this.wrap===e.wrap&&this.canonical.equals(e.canonical)}scaledTo(e){const t=this.canonical.z-e;return e>this.canonical.z?new Wd(e,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y):new Wd(e,this.wrap,e,this.canonical.x>>t,this.canonical.y>>t)}calculateScaledKey(e,t=!0){if(this.overscaledZ===e&&t)return this.key;if(e>this.canonical.z)return qd(this.wrap*+t,e,this.canonical.z,this.canonical.x,this.canonical.y);{const n=this.canonical.z-e;return qd(this.wrap*+t,e,e,this.canonical.x>>n,this.canonical.y>>n)}}isChildOf(e){if(e.wrap!==this.wrap)return!1;const t=this.canonical.z-e.canonical.z;return 0===e.overscaledZ||e.overscaledZ<this.overscaledZ&&e.canonical.x===this.canonical.x>>t&&e.canonical.y===this.canonical.y>>t}children(e){if(this.overscaledZ>=e)return[new Wd(this.overscaledZ+1,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y)];const t=this.canonical.z+1,n=2*this.canonical.x,i=2*this.canonical.y;return[new Wd(t,this.wrap,t,n,i),new Wd(t,this.wrap,t,n+1,i),new Wd(t,this.wrap,t,n,i+1),new Wd(t,this.wrap,t,n+1,i+1)]}isLessThan(e){return this.wrap<e.wrap||!(this.wrap>e.wrap)&&(this.overscaledZ<e.overscaledZ||!(this.overscaledZ>e.overscaledZ)&&(this.canonical.x<e.canonical.x||!(this.canonical.x>e.canonical.x)&&this.canonical.y<e.canonical.y))}wrapped(){return new Wd(this.overscaledZ,0,this.canonical.z,this.canonical.x,this.canonical.y)}unwrapTo(e){return new Wd(this.overscaledZ,e,this.canonical.z,this.canonical.x,this.canonical.y)}overscaleFactor(){return Math.pow(2,this.overscaledZ-this.canonical.z)}toUnwrapped(){return new Hd(this.wrap,this.canonical)}toString(){return`${this.overscaledZ}/${this.canonical.x}/${this.canonical.y}`}}function qd(e,t,n,i,a){const o=1<<Math.min(n,22);let r=o*(a%o)+i%o;return e&&n<22&&(r+=o*o*((e<0?-2*e-1:2*e)%(1<<2*(22-n)))),16*(32*r+n)+(t-n)}Ba(Ud,"CanonicalTileID"),Ba(Wd,"OverscaledTileID",{omit:["projMatrix"]});class Vd extends b{constructor(e,t,n){super(e,t),this.z=n}}function Gd(e,t){return e.x*t.x+e.y*t.y}function Yd(e,t){if(1===e.length){let n=0;const i=t[n++];let a;for(;!a||i.equals(a);)if(a=t[n++],!a)return 1/0;for(;n<t.length;n++){const o=t[n],r=e[0],s=a.sub(i),l=o.sub(i),c=r.sub(i),u=Gd(s,s),d=Gd(s,l),p=Gd(l,l),f=Gd(c,s),m=Gd(c,l),h=u*p-d*d,g=(p*f-d*m)/h,y=(u*m-d*f)/h,v=i.z*(1-g-y)+a.z*g+o.z*y;if(isFinite(v))return v}return 1/0}{let e=1/0;for(const n of t)e=Math.min(e,n.z);return e}}function Xd(e,t,n,i,a,o,r,s){const l=r*a.getElevationAt(e,t,!0,!0),c=0!==o[0],u=c?0===o[1]?r*(o[0]/7-450):r*function(e,t,n){const i=Math.floor(t[0]/8),a=Math.floor(t[1]/8),o=10*(t[0]-8*i),r=10*(t[1]-8*a),s=e.getElevationAt(i,a,!0,!0),l=e.getMeterToDEM(n),c=Math.floor(.5*(o*l-1)),u=Math.floor(.5*(r*l-1)),d=e.tileCoordToPixel(i,a),p=2*c+1,f=2*u+1,m=function(e,t,n,i,a){return[e.getElevationAtPixel(t,n,!0),e.getElevationAtPixel(t+a,n,!0),e.getElevationAtPixel(t,n+a,!0),e.getElevationAtPixel(t+i,n+a,!0)]}(e,d.x-c,d.y-u,p,f),h=Math.abs(m[0]-m[1]),g=Math.abs(m[2]-m[3]),y=Math.abs(m[0]-m[2])+Math.abs(m[1]-m[3]),v=Math.min(.25,.5*l*(h+g)/p),b=Math.min(.25,.5*l*y/f);return s+Math.max(v*o,b*r)}(a,o,s):l;return{base:l+(0===n)?-1:n,top:c?Math.max(u+i,l+n+2):l+i}}const Zd=wr([{name:"a_pos_normal",components:2,type:"Int16"},{name:"a_data",components:4,type:"Uint8"},{name:"a_linesofar",components:1,type:"Float32"}],4),{members:Jd}=Zd,Kd=wr([{name:"a_packed",components:4,type:"Float32"}]),{members:$d}=Kd,Qd=xd.types,ep=Math.cos(Math.PI/180*37.5);class tp{constructor(e){this.zoom=e.zoom,this.overscaling=e.overscaling,this.layers=e.layers,this.layerIds=this.layers.map(e=>e.id),this.index=e.index,this.projection=e.projection,this.hasPattern=!1,this.patternFeatures=[],this.lineClipsArray=[],this.gradients={},this.layers.forEach(e=>{this.gradients[e.id]={}}),this.layoutVertexArray=new Cr,this.layoutVertexArray2=new Er,this.indexArray=new zr,this.programConfigurations=new Ms(e.layers,e.zoom),this.segments=new Us,this.maxLineLength=0,this.stateDependentLayerIds=this.layers.filter(e=>e.isStateDependent()).map(e=>e.id)}populate(e,t,n,i){this.hasPattern=ed("line",this.layers,t);const a=this.layers[0].layout.get("line-sort-key"),o=[];for(const{feature:t,id:r,index:s,sourceLayerIndex:l}of e){const e=this.layers[0]._featureFilter.needGeometry,c=Rc(t,e);if(!this.layers[0]._featureFilter.filter(new ar(this.zoom),c,n))continue;const u=a?a.evaluate(c,{},n):void 0,d={id:r,properties:t.properties,type:t.type,sourceLayerIndex:l,index:s,geometry:e?c.geometry:Dc(t,n,i),patterns:{},sortKey:u};o.push(d)}a&&o.sort((e,t)=>e.sortKey-t.sortKey);const{lineAtlas:r,featureIndex:s}=t,l=this.addConstantDashes(r);for(const i of o){const{geometry:a,index:o,sourceLayerIndex:c}=i;if(l&&this.addFeatureDashes(i,r),this.hasPattern){const e=td("line",this.layers,i,this.zoom,t);this.patternFeatures.push(e)}else this.addFeature(i,a,o,n,r.positions,t.availableImages);s.insert(e[o].feature,a,o,c,this.index)}}addConstantDashes(e){let t=!1;for(const n of this.layers){const i=n.paint.get("line-dasharray").value,a=n.layout.get("line-cap").value;if("constant"!==i.kind||"constant"!==a.kind)t=!0;else{const t=a.value,n=i.value;if(!n)continue;e.addDash(n,t)}}return t}addFeatureDashes(e,t){const n=this.zoom;for(const i of this.layers){const a=i.paint.get("line-dasharray").value,o=i.layout.get("line-cap").value;if("constant"===a.kind&&"constant"===o.kind)continue;let r,s;if("constant"===a.kind){if(r=a.value,!r)continue}else r=a.evaluate({zoom:n},e);s="constant"===o.kind?o.value:o.evaluate({zoom:n},e),t.addDash(r,s),e.patterns[i.id]=t.getKey(r,s)}}update(e,t,n,i){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(e,t,this.stateDependentLayers,n,i)}addFeatures(e,t,n,i,a){for(const e of this.patternFeatures)this.addFeature(e,e.geometry,e.index,t,n,i)}isEmpty(){return 0===this.layoutVertexArray.length}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(e){this.uploaded||(0!==this.layoutVertexArray2.length&&(this.layoutVertexBuffer2=e.createVertexBuffer(this.layoutVertexArray2,$d)),this.layoutVertexBuffer=e.createVertexBuffer(this.layoutVertexArray,Jd),this.indexBuffer=e.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(e),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())}lineFeatureClips(e){if(e.properties&&e.properties.hasOwnProperty("mapbox_clip_start")&&e.properties.hasOwnProperty("mapbox_clip_end"))return{start:+e.properties.mapbox_clip_start,end:+e.properties.mapbox_clip_end}}addFeature(e,t,n,i,a,o){const r=this.layers[0].layout,s=r.get("line-join").evaluate(e,{}),l=r.get("line-cap").evaluate(e,{}),c=r.get("line-miter-limit"),u=r.get("line-round-limit");this.lineClips=this.lineFeatureClips(e);for(const n of t)this.addLine(n,e,s,l,c,u);this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,e,n,a,o,i)}addLine(e,t,n,i,a,o){if(this.distance=0,this.scaledDistance=0,this.totalDistance=0,this.lineSoFar=0,this.lineClips){this.lineClipsArray.push(this.lineClips);for(let t=0;t<e.length-1;t++)this.totalDistance+=e[t].dist(e[t+1]);this.updateScaledDistance(),this.maxLineLength=Math.max(this.maxLineLength,this.totalDistance)}const r="Polygon"===Qd[t.type];let s=e.length;for(;s>=2&&e[s-1].equals(e[s-2]);)s--;let l=0;for(;l<s-1&&e[l].equals(e[l+1]);)l++;if(s<(r?3:2))return;"bevel"===n&&(a=1.05);const c=this.overscaling<=16?15*Hs/(512*this.overscaling):0,u=this.segments.prepareSegment(10*s,this.layoutVertexArray,this.indexArray);let d,p,f,m,h;this.e1=this.e2=-1,r&&(d=e[s-2],h=e[l].sub(d)._unit()._perp());for(let t=l;t<s;t++){if(f=t===s-1?r?e[l+1]:void 0:e[t+1],f&&e[t].equals(f))continue;h&&(m=h),d&&(p=d),d=e[t],h=f?f.sub(d)._unit()._perp():m,m=m||h;let g=m.add(h);0===g.x&&0===g.y||g._unit();const y=m.x*h.x+m.y*h.y,v=g.x*h.x+g.y*h.y,b=0!==v?1/v:1/0,_=2*Math.sqrt(2-2*v),w=v<ep&&p&&f,x=m.x*h.y-m.y*h.x>0;if(w&&t>l){const e=d.dist(p);if(e>2*c){const t=d.sub(d.sub(p)._mult(c/e)._round());this.updateDistance(p,t),this.addCurrentVertex(t,m,0,0,u),p=t}}const k=p&&f;let O=k?n:r?"butt":i;if(k&&"round"===O&&(b<o?O="miter":b<=2&&(O="fakeround")),"miter"===O&&b>a&&(O="bevel"),"bevel"===O&&(b>2&&(O="flipbevel"),b<a&&(O="miter")),p&&this.updateDistance(p,d),"miter"===O)g._mult(b),this.addCurrentVertex(d,g,0,0,u);else if("flipbevel"===O){if(b>100)g=h.mult(-1);else{const e=b*m.add(h).mag()/m.sub(h).mag();g._perp()._mult(e*(x?-1:1))}this.addCurrentVertex(d,g,0,0,u),this.addCurrentVertex(d,g.mult(-1),0,0,u)}else if("bevel"===O||"fakeround"===O){const e=-Math.sqrt(b*b-1),t=x?e:0,n=x?0:e;if(p&&this.addCurrentVertex(d,m,t,n,u),"fakeround"===O){const e=Math.round(180*_/Math.PI/20);for(let t=1;t<e;t++){let n=t/e;if(.5!==n){const e=n-.5;n+=n*e*(n-1)*((1.0904+y*(y*(3.55645-1.43519*y)-3.2452))*e*e+(.848013+y*(.215638*y-1.06021)))}const i=h.sub(m)._mult(n)._add(m)._unit()._mult(x?-1:1);this.addHalfVertex(d,i.x,i.y,!1,x,0,u)}}f&&this.addCurrentVertex(d,h,-t,-n,u)}else if("butt"===O)this.addCurrentVertex(d,g,0,0,u);else if("square"===O){const e=p?1:-1;p||this.addCurrentVertex(d,g,e,e,u),this.addCurrentVertex(d,g,0,0,u),p&&this.addCurrentVertex(d,g,e,e,u)}else"round"===O&&(p&&(this.addCurrentVertex(d,m,0,0,u),this.addCurrentVertex(d,m,1,1,u,!0)),f&&(this.addCurrentVertex(d,h,-1,-1,u,!0),this.addCurrentVertex(d,h,0,0,u)));if(w&&t<s-1){const e=d.dist(f);if(e>2*c){const t=d.add(f.sub(d)._mult(c/e)._round());this.updateDistance(d,t),this.addCurrentVertex(t,h,0,0,u),d=t}}}}addCurrentVertex(e,t,n,i,a,o=!1){const r=t.y*i-t.x,s=-t.y-t.x*i;this.addHalfVertex(e,t.x+t.y*n,t.y-t.x*n,o,!1,n,a),this.addHalfVertex(e,r,s,o,!0,-i,a)}addHalfVertex({x:e,y:t},n,i,a,o,r,s){this.layoutVertexArray.emplaceBack((e<<1)+(a?1:0),(t<<1)+(o?1:0),Math.round(63*n)+128,Math.round(63*i)+128,1+(0===r?0:r<0?-1:1),0,this.lineSoFar),this.lineClips&&this.layoutVertexArray2.emplaceBack(this.scaledDistance,this.lineClipsArray.length,this.lineClips.start,this.lineClips.end);const l=s.vertexLength++;this.e1>=0&&this.e2>=0&&(this.indexArray.emplaceBack(this.e1,this.e2,l),s.primitiveLength++),o?this.e2=l:this.e1=l}updateScaledDistance(){if(this.lineClips){const e=this.totalDistance/(this.lineClips.end-this.lineClips.start);this.scaledDistance=this.distance/this.totalDistance,this.lineSoFar=e*this.lineClips.start+this.distance}else this.lineSoFar=this.distance}updateDistance(e,t){this.distance+=e.dist(t),this.updateScaledDistance()}}Ba(tp,"LineBucket",{omit:["layers","patternFeatures"]});const np=new gr({"line-cap":new mr(tt.layout_line["line-cap"]),"line-join":new mr(tt.layout_line["line-join"]),"line-miter-limit":new fr(tt.layout_line["line-miter-limit"]),"line-round-limit":new fr(tt.layout_line["line-round-limit"]),"line-sort-key":new mr(tt.layout_line["line-sort-key"])});var ip={paint:new gr({"line-opacity":new mr(tt.paint_line["line-opacity"]),"line-color":new mr(tt.paint_line["line-color"]),"line-translate":new fr(tt.paint_line["line-translate"]),"line-translate-anchor":new fr(tt.paint_line["line-translate-anchor"]),"line-width":new mr(tt.paint_line["line-width"]),"line-gap-width":new mr(tt.paint_line["line-gap-width"]),"line-offset":new mr(tt.paint_line["line-offset"]),"line-blur":new mr(tt.paint_line["line-blur"]),"line-dasharray":new mr(tt.paint_line["line-dasharray"]),"line-pattern":new mr(tt.paint_line["line-pattern"]),"line-gradient":new hr(tt.paint_line["line-gradient"]),"line-trim-offset":new fr(tt.paint_line["line-trim-offset"])}),layout:np};const ap=new class extends mr{possiblyEvaluate(e,t){return t=new ar(Math.floor(t.zoom),{now:t.now,fadeDuration:t.fadeDuration,transition:t.transition}),super.possiblyEvaluate(e,t)}evaluate(e,t,n,i){return t=j({},t,{zoom:Math.floor(t.zoom)}),super.evaluate(e,t,n,i)}}(ip.paint.properties["line-width"].specification);function op(e,t){return t>0?t+2*e:e}ap.useIntegerZoom=!0;const rp=wr([{name:"a_pos_offset",components:4,type:"Int16"},{name:"a_tex_size",components:4,type:"Uint16"},{name:"a_pixeloffset",components:4,type:"Int16"}],4),sp=wr([{name:"a_globe_anchor",components:3,type:"Int16"},{name:"a_globe_normal",components:3,type:"Float32"}],4),lp=wr([{name:"a_projected_pos",components:4,type:"Float32"}],4);wr([{name:"a_fade_opacity",components:1,type:"Uint32"}],4);const cp=wr([{name:"a_placed",components:2,type:"Uint8"},{name:"a_shift",components:2,type:"Float32"}]),up=wr([{name:"a_size_scale",components:1,type:"Float32"},{name:"a_padding",components:2,type:"Float32"}]);wr([{type:"Int16",name:"projectedAnchorX"},{type:"Int16",name:"projectedAnchorY"},{type:"Int16",name:"projectedAnchorZ"},{type:"Int16",name:"tileAnchorX"},{type:"Int16",name:"tileAnchorY"},{type:"Float32",name:"x1"},{type:"Float32",name:"y1"},{type:"Float32",name:"x2"},{type:"Float32",name:"y2"},{type:"Int16",name:"padding"},{type:"Uint32",name:"featureIndex"},{type:"Uint16",name:"sourceLayerIndex"},{type:"Uint16",name:"bucketIndex"}]);const dp=wr([{name:"a_pos",components:3,type:"Int16"},{name:"a_anchor_pos",components:2,type:"Int16"},{name:"a_extrude",components:2,type:"Int16"}],4),pp=wr([{name:"a_pos_2f",components:2,type:"Float32"},{name:"a_radius",components:1,type:"Float32"},{name:"a_flags",components:2,type:"Int16"}],4);wr([{name:"triangle",components:3,type:"Uint16"}]),wr([{type:"Int16",name:"projectedAnchorX"},{type:"Int16",name:"projectedAnchorY"},{type:"Int16",name:"projectedAnchorZ"},{type:"Float32",name:"tileAnchorX"},{type:"Float32",name:"tileAnchorY"},{type:"Uint16",name:"glyphStartIndex"},{type:"Uint16",name:"numGlyphs"},{type:"Uint32",name:"vertexStartIndex"},{type:"Uint32",name:"lineStartIndex"},{type:"Uint32",name:"lineLength"},{type:"Uint16",name:"segment"},{type:"Uint16",name:"lowerSize"},{type:"Uint16",name:"upperSize"},{type:"Float32",name:"lineOffsetX"},{type:"Float32",name:"lineOffsetY"},{type:"Uint8",name:"writingMode"},{type:"Uint8",name:"placedOrientation"},{type:"Uint8",name:"hidden"},{type:"Uint32",name:"crossTileID"},{type:"Int16",name:"associatedIconIndex"},{type:"Uint8",name:"flipState"}]),wr([{type:"Int16",name:"projectedAnchorX"},{type:"Int16",name:"projectedAnchorY"},{type:"Int16",name:"projectedAnchorZ"},{type:"Float32",name:"tileAnchorX"},{type:"Float32",name:"tileAnchorY"},{type:"Int16",name:"rightJustifiedTextSymbolIndex"},{type:"Int16",name:"centerJustifiedTextSymbolIndex"},{type:"Int16",name:"leftJustifiedTextSymbolIndex"},{type:"Int16",name:"verticalPlacedTextSymbolIndex"},{type:"Int16",name:"placedIconSymbolIndex"},{type:"Int16",name:"verticalPlacedIconSymbolIndex"},{type:"Uint16",name:"key"},{type:"Uint16",name:"textBoxStartIndex"},{type:"Uint16",name:"textBoxEndIndex"},{type:"Uint16",name:"verticalTextBoxStartIndex"},{type:"Uint16",name:"verticalTextBoxEndIndex"},{type:"Uint16",name:"iconBoxStartIndex"},{type:"Uint16",name:"iconBoxEndIndex"},{type:"Uint16",name:"verticalIconBoxStartIndex"},{type:"Uint16",name:"verticalIconBoxEndIndex"},{type:"Uint16",name:"featureIndex"},{type:"Uint16",name:"numHorizontalGlyphVertices"},{type:"Uint16",name:"numVerticalGlyphVertices"},{type:"Uint16",name:"numIconVertices"},{type:"Uint16",name:"numVerticalIconVertices"},{type:"Uint16",name:"useRuntimeCollisionCircles"},{type:"Uint32",name:"crossTileID"},{type:"Float32",components:2,name:"textOffset"},{type:"Float32",name:"collisionCircleDiameter"}]),wr([{type:"Float32",name:"offsetX"}]),wr([{type:"Int16",name:"x"},{type:"Int16",name:"y"}]);const fp=128;function mp(e,t){const{expression:n}=t;if("constant"===n.kind)return{kind:"constant",layoutSize:n.evaluate(new ar(e+1))};if("source"===n.kind)return{kind:"source"};{const{zoomStops:t,interpolationType:i}=n;let a=0;for(;a<t.length&&t[a]<=e;)a++;a=Math.max(0,a-1);let o=a;for(;o<t.length&&t[o]<e+1;)o++;o=Math.min(t.length-1,o);const r=t[a],s=t[o];return"composite"===n.kind?{kind:"composite",minZoom:r,maxZoom:s,interpolationType:i}:{kind:"camera",minZoom:r,maxZoom:s,minSize:n.evaluate(new ar(r)),maxSize:n.evaluate(new ar(s)),interpolationType:i}}}function hp(e,{uSize:t,uSizeT:n},{lowerSize:i,upperSize:a}){return"source"===e.kind?i/fp:"composite"===e.kind?An(i/fp,a/fp,n):t}function gp(e,t){let n=0,i=0;if("constant"===e.kind)i=e.layoutSize;else if("source"!==e.kind){const{interpolationType:a,minZoom:o,maxZoom:r}=e,s=a?S(Jn.interpolationFactor(a,t,o,r),0,1):0;"camera"===e.kind?i=An(e.minSize,e.maxSize,s):n=s}return{uSizeT:n,uSize:i}}var yp=Object.freeze({__proto__:null,SIZE_PACK_FACTOR:fp,evaluateSizeForFeature:hp,evaluateSizeForZoom:gp,getSizeData:mp});function vp(e,t,n){return e.sections.forEach(e=>{e.text=function(e,t,n){const i=t.layout.get("text-transform").evaluate(n,{});return"uppercase"===i?e=e.toLocaleUpperCase():"lowercase"===i&&(e=e.toLocaleLowerCase()),ir.applyArabicShaping&&(e=ir.applyArabicShaping(e)),e}(e.text,t,n)}),e}const bp={"!":"︕","#":"＃",$:"＄","%":"％","&":"＆","(":"︵",")":"︶","*":"＊","+":"＋",",":"︐","-":"︲",".":"・","/":"／",":":"︓",";":"︔","<":"︿","=":"＝",">":"﹀","?":"︖","@":"＠","[":"﹇","\\":"＼","]":"﹈","^":"＾",_:"︳","`":"｀","{":"︷","|":"―","}":"︸","~":"～","¢":"￠","£":"￡","¥":"￥","¦":"￤","¬":"￢","¯":"￣","–":"︲","—":"︱","‘":"﹃","’":"﹄","“":"﹁","”":"﹂","…":"︙","‧":"・","₩":"￦","、":"︑","。":"︒","〈":"︿","〉":"﹀","《":"︽","》":"︾","「":"﹁","」":"﹂","『":"﹃","』":"﹄","【":"︻","】":"︼","〔":"︹","〕":"︺","〖":"︗","〗":"︘","！":"︕","（":"︵","）":"︶","，":"︐","－":"︲","．":"・","：":"︓","；":"︔","＜":"︿","＞":"﹀","？":"︖","［":"﹇","］":"﹈","＿":"︳","｛":"︷","｜":"―","｝":"︸","｟":"︵","｠":"︶","｡":"︒","｢":"﹁","｣":"﹂","←":"↑","→":"↓"};function _p(e){return"︶"===e||"﹈"===e||"︸"===e||"﹄"===e||"﹂"===e||"︾"===e||"︼"===e||"︺"===e||"︘"===e||"﹀"===e||"︐"===e||"︓"===e||"︔"===e||"｀"===e||"￣"===e||"︑"===e||"︒"===e}function wp(e){return"︵"===e||"﹇"===e||"︷"===e||"﹃"===e||"﹁"===e||"︽"===e||"︻"===e||"︹"===e||"︗"===e||"︿"===e}var xp=Tp,kp=function(e,t,n,i,a){var o,r,s=8*a-i-1,l=(1<<s)-1,c=l>>1,u=-7,d=n?a-1:0,p=n?-1:1,f=e[t+d];for(d+=p,o=f&(1<<-u)-1,f>>=-u,u+=s;u>0;o=256*o+e[t+d],d+=p,u-=8);for(r=o&(1<<-u)-1,o>>=-u,u+=i;u>0;r=256*r+e[t+d],d+=p,u-=8);if(0===o)o=1-c;else{if(o===l)return r?NaN:1/0*(f?-1:1);r+=Math.pow(2,i),o-=c}return(f?-1:1)*r*Math.pow(2,o-i)},Op=function(e,t,n,i,a,o){var r,s,l,c=8*o-a-1,u=(1<<c)-1,d=u>>1,p=23===a?Math.pow(2,-24)-Math.pow(2,-77):0,f=i?0:o-1,m=i?1:-1,h=t<0||0===t&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(s=isNaN(t)?1:0,r=u):(r=Math.floor(Math.log(t)/Math.LN2),t*(l=Math.pow(2,-r))<1&&(r--,l*=2),(t+=r+d>=1?p/l:p*Math.pow(2,1-d))*l>=2&&(r++,l/=2),r+d>=u?(s=0,r=u):r+d>=1?(s=(t*l-1)*Math.pow(2,a),r+=d):(s=t*Math.pow(2,d-1)*Math.pow(2,a),r=0));a>=8;e[n+f]=255&s,f+=m,s/=256,a-=8);for(r=r<<a|s,c+=a;c>0;e[n+f]=255&r,f+=m,r/=256,c-=8);e[n+f-m]|=128*h};
/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */function Tp(e){this.buf=ArrayBuffer.isView&&ArrayBuffer.isView(e)?e:new Uint8Array(e||0),this.pos=0,this.type=0,this.length=this.buf.length}Tp.Varint=0,Tp.Fixed64=1,Tp.Bytes=2,Tp.Fixed32=5;var Cp=4294967296,Ep=1/Cp,Sp="undefined"==typeof TextDecoder?null:new TextDecoder("utf8");function Pp(e){return e.type===Tp.Bytes?e.readVarint()+e.pos:e.pos+1}function Ip(e,t,n){return n?4294967296*t+(e>>>0):4294967296*(t>>>0)+(e>>>0)}function Mp(e,t,n){var i=t<=16383?1:t<=2097151?2:t<=268435455?3:Math.floor(Math.log(t)/(7*Math.LN2));n.realloc(i);for(var a=n.pos-1;a>=e;a--)n.buf[a+i]=n.buf[a]}function Ap(e,t){for(var n=0;n<e.length;n++)t.writeVarint(e[n])}function jp(e,t){for(var n=0;n<e.length;n++)t.writeSVarint(e[n])}function Np(e,t){for(var n=0;n<e.length;n++)t.writeFloat(e[n])}function Lp(e,t){for(var n=0;n<e.length;n++)t.writeDouble(e[n])}function Dp(e,t){for(var n=0;n<e.length;n++)t.writeBoolean(e[n])}function Rp(e,t){for(var n=0;n<e.length;n++)t.writeFixed32(e[n])}function Bp(e,t){for(var n=0;n<e.length;n++)t.writeSFixed32(e[n])}function zp(e,t){for(var n=0;n<e.length;n++)t.writeFixed64(e[n])}function Fp(e,t){for(var n=0;n<e.length;n++)t.writeSFixed64(e[n])}function Up(e,t){return(e[t]|e[t+1]<<8|e[t+2]<<16)+16777216*e[t+3]}function Hp(e,t,n){e[n]=t,e[n+1]=t>>>8,e[n+2]=t>>>16,e[n+3]=t>>>24}function Wp(e,t){return(e[t]|e[t+1]<<8|e[t+2]<<16)+(e[t+3]<<24)}Tp.prototype={destroy:function(){this.buf=null},readFields:function(e,t,n){for(n=n||this.length;this.pos<n;){var i=this.readVarint(),a=i>>3,o=this.pos;this.type=7&i,e(a,t,this),this.pos===o&&this.skip(i)}return t},readMessage:function(e,t){return this.readFields(e,t,this.readVarint()+this.pos)},readFixed32:function(){var e=Up(this.buf,this.pos);return this.pos+=4,e},readSFixed32:function(){var e=Wp(this.buf,this.pos);return this.pos+=4,e},readFixed64:function(){var e=Up(this.buf,this.pos)+Up(this.buf,this.pos+4)*Cp;return this.pos+=8,e},readSFixed64:function(){var e=Up(this.buf,this.pos)+Wp(this.buf,this.pos+4)*Cp;return this.pos+=8,e},readFloat:function(){var e=kp(this.buf,this.pos,!0,23,4);return this.pos+=4,e},readDouble:function(){var e=kp(this.buf,this.pos,!0,52,8);return this.pos+=8,e},readVarint:function(e){var t,n,i=this.buf;return t=127&(n=i[this.pos++]),n<128?t:(t|=(127&(n=i[this.pos++]))<<7,n<128?t:(t|=(127&(n=i[this.pos++]))<<14,n<128?t:(t|=(127&(n=i[this.pos++]))<<21,n<128?t:function(e,t,n){var i,a,o=n.buf;if(i=(112&(a=o[n.pos++]))>>4,a<128)return Ip(e,i,t);if(i|=(127&(a=o[n.pos++]))<<3,a<128)return Ip(e,i,t);if(i|=(127&(a=o[n.pos++]))<<10,a<128)return Ip(e,i,t);if(i|=(127&(a=o[n.pos++]))<<17,a<128)return Ip(e,i,t);if(i|=(127&(a=o[n.pos++]))<<24,a<128)return Ip(e,i,t);if(i|=(1&(a=o[n.pos++]))<<31,a<128)return Ip(e,i,t);throw new Error("Expected varint not more than 10 bytes")}(t|=(15&(n=i[this.pos]))<<28,e,this))))},readVarint64:function(){return this.readVarint(!0)},readSVarint:function(){var e=this.readVarint();return e%2==1?(e+1)/-2:e/2},readBoolean:function(){return Boolean(this.readVarint())},readString:function(){var e=this.readVarint()+this.pos,t=this.pos;return this.pos=e,e-t>=12&&Sp?function(e,t,n){return Sp.decode(e.subarray(t,n))}(this.buf,t,e):function(e,t,n){for(var i="",a=t;a<n;){var o,r,s,l=e[a],c=null,u=l>239?4:l>223?3:l>191?2:1;if(a+u>n)break;1===u?l<128&&(c=l):2===u?128==(192&(o=e[a+1]))&&(c=(31&l)<<6|63&o)<=127&&(c=null):3===u?(r=e[a+2],128==(192&(o=e[a+1]))&&128==(192&r)&&((c=(15&l)<<12|(63&o)<<6|63&r)<=2047||c>=55296&&c<=57343)&&(c=null)):4===u&&(r=e[a+2],s=e[a+3],128==(192&(o=e[a+1]))&&128==(192&r)&&128==(192&s)&&((c=(15&l)<<18|(63&o)<<12|(63&r)<<6|63&s)<=65535||c>=1114112)&&(c=null)),null===c?(c=65533,u=1):c>65535&&(c-=65536,i+=String.fromCharCode(c>>>10&1023|55296),c=56320|1023&c),i+=String.fromCharCode(c),a+=u}return i}(this.buf,t,e)},readBytes:function(){var e=this.readVarint()+this.pos,t=this.buf.subarray(this.pos,e);return this.pos=e,t},readPackedVarint:function(e,t){if(this.type!==Tp.Bytes)return e.push(this.readVarint(t));var n=Pp(this);for(e=e||[];this.pos<n;)e.push(this.readVarint(t));return e},readPackedSVarint:function(e){if(this.type!==Tp.Bytes)return e.push(this.readSVarint());var t=Pp(this);for(e=e||[];this.pos<t;)e.push(this.readSVarint());return e},readPackedBoolean:function(e){if(this.type!==Tp.Bytes)return e.push(this.readBoolean());var t=Pp(this);for(e=e||[];this.pos<t;)e.push(this.readBoolean());return e},readPackedFloat:function(e){if(this.type!==Tp.Bytes)return e.push(this.readFloat());var t=Pp(this);for(e=e||[];this.pos<t;)e.push(this.readFloat());return e},readPackedDouble:function(e){if(this.type!==Tp.Bytes)return e.push(this.readDouble());var t=Pp(this);for(e=e||[];this.pos<t;)e.push(this.readDouble());return e},readPackedFixed32:function(e){if(this.type!==Tp.Bytes)return e.push(this.readFixed32());var t=Pp(this);for(e=e||[];this.pos<t;)e.push(this.readFixed32());return e},readPackedSFixed32:function(e){if(this.type!==Tp.Bytes)return e.push(this.readSFixed32());var t=Pp(this);for(e=e||[];this.pos<t;)e.push(this.readSFixed32());return e},readPackedFixed64:function(e){if(this.type!==Tp.Bytes)return e.push(this.readFixed64());var t=Pp(this);for(e=e||[];this.pos<t;)e.push(this.readFixed64());return e},readPackedSFixed64:function(e){if(this.type!==Tp.Bytes)return e.push(this.readSFixed64());var t=Pp(this);for(e=e||[];this.pos<t;)e.push(this.readSFixed64());return e},skip:function(e){var t=7&e;if(t===Tp.Varint)for(;this.buf[this.pos++]>127;);else if(t===Tp.Bytes)this.pos=this.readVarint()+this.pos;else if(t===Tp.Fixed32)this.pos+=4;else{if(t!==Tp.Fixed64)throw new Error("Unimplemented type: "+t);this.pos+=8}},writeTag:function(e,t){this.writeVarint(e<<3|t)},realloc:function(e){for(var t=this.length||16;t<this.pos+e;)t*=2;if(t!==this.length){var n=new Uint8Array(t);n.set(this.buf),this.buf=n,this.length=t}},finish:function(){return this.length=this.pos,this.pos=0,this.buf.subarray(0,this.length)},writeFixed32:function(e){this.realloc(4),Hp(this.buf,e,this.pos),this.pos+=4},writeSFixed32:function(e){this.realloc(4),Hp(this.buf,e,this.pos),this.pos+=4},writeFixed64:function(e){this.realloc(8),Hp(this.buf,-1&e,this.pos),Hp(this.buf,Math.floor(e*Ep),this.pos+4),this.pos+=8},writeSFixed64:function(e){this.realloc(8),Hp(this.buf,-1&e,this.pos),Hp(this.buf,Math.floor(e*Ep),this.pos+4),this.pos+=8},writeVarint:function(e){(e=+e||0)>268435455||e<0?function(e,t){var n,i;if(e>=0?(n=e%4294967296|0,i=e/4294967296|0):(i=~(-e/4294967296),4294967295^(n=~(-e%4294967296))?n=n+1|0:(n=0,i=i+1|0)),e>=0x10000000000000000||e<-0x10000000000000000)throw new Error("Given varint doesn't fit into 10 bytes");t.realloc(10),function(e,t,n){n.buf[n.pos++]=127&e|128,e>>>=7,n.buf[n.pos++]=127&e|128,e>>>=7,n.buf[n.pos++]=127&e|128,e>>>=7,n.buf[n.pos++]=127&e|128,n.buf[n.pos]=127&(e>>>=7)}(n,0,t),function(e,t){var n=(7&e)<<4;t.buf[t.pos++]|=n|((e>>>=3)?128:0),e&&(t.buf[t.pos++]=127&e|((e>>>=7)?128:0),e&&(t.buf[t.pos++]=127&e|((e>>>=7)?128:0),e&&(t.buf[t.pos++]=127&e|((e>>>=7)?128:0),e&&(t.buf[t.pos++]=127&e|((e>>>=7)?128:0),e&&(t.buf[t.pos++]=127&e)))))}(i,t)}(e,this):(this.realloc(4),this.buf[this.pos++]=127&e|(e>127?128:0),e<=127||(this.buf[this.pos++]=127&(e>>>=7)|(e>127?128:0),e<=127||(this.buf[this.pos++]=127&(e>>>=7)|(e>127?128:0),e<=127||(this.buf[this.pos++]=e>>>7&127))))},writeSVarint:function(e){this.writeVarint(e<0?2*-e-1:2*e)},writeBoolean:function(e){this.writeVarint(Boolean(e))},writeString:function(e){e=String(e),this.realloc(4*e.length),this.pos++;var t=this.pos;this.pos=function(e,t,n){for(var i,a,o=0;o<t.length;o++){if((i=t.charCodeAt(o))>55295&&i<57344){if(!a){i>56319||o+1===t.length?(e[n++]=239,e[n++]=191,e[n++]=189):a=i;continue}if(i<56320){e[n++]=239,e[n++]=191,e[n++]=189,a=i;continue}i=a-55296<<10|i-56320|65536,a=null}else a&&(e[n++]=239,e[n++]=191,e[n++]=189,a=null);i<128?e[n++]=i:(i<2048?e[n++]=i>>6|192:(i<65536?e[n++]=i>>12|224:(e[n++]=i>>18|240,e[n++]=i>>12&63|128),e[n++]=i>>6&63|128),e[n++]=63&i|128)}return n}(this.buf,e,this.pos);var n=this.pos-t;n>=128&&Mp(t,n,this),this.pos=t-1,this.writeVarint(n),this.pos+=n},writeFloat:function(e){this.realloc(4),Op(this.buf,e,this.pos,!0,23,4),this.pos+=4},writeDouble:function(e){this.realloc(8),Op(this.buf,e,this.pos,!0,52,8),this.pos+=8},writeBytes:function(e){var t=e.length;this.writeVarint(t),this.realloc(t);for(var n=0;n<t;n++)this.buf[this.pos++]=e[n]},writeRawMessage:function(e,t){this.pos++;var n=this.pos;e(t,this);var i=this.pos-n;i>=128&&Mp(n,i,this),this.pos=n-1,this.writeVarint(i),this.pos+=i},writeMessage:function(e,t,n){this.writeTag(e,Tp.Bytes),this.writeRawMessage(t,n)},writePackedVarint:function(e,t){t.length&&this.writeMessage(e,Ap,t)},writePackedSVarint:function(e,t){t.length&&this.writeMessage(e,jp,t)},writePackedBoolean:function(e,t){t.length&&this.writeMessage(e,Dp,t)},writePackedFloat:function(e,t){t.length&&this.writeMessage(e,Np,t)},writePackedDouble:function(e,t){t.length&&this.writeMessage(e,Lp,t)},writePackedFixed32:function(e,t){t.length&&this.writeMessage(e,Rp,t)},writePackedSFixed32:function(e,t){t.length&&this.writeMessage(e,Bp,t)},writePackedFixed64:function(e,t){t.length&&this.writeMessage(e,zp,t)},writePackedSFixed64:function(e,t){t.length&&this.writeMessage(e,Fp,t)},writeBytesField:function(e,t){this.writeTag(e,Tp.Bytes),this.writeBytes(t)},writeFixed32Field:function(e,t){this.writeTag(e,Tp.Fixed32),this.writeFixed32(t)},writeSFixed32Field:function(e,t){this.writeTag(e,Tp.Fixed32),this.writeSFixed32(t)},writeFixed64Field:function(e,t){this.writeTag(e,Tp.Fixed64),this.writeFixed64(t)},writeSFixed64Field:function(e,t){this.writeTag(e,Tp.Fixed64),this.writeSFixed64(t)},writeVarintField:function(e,t){this.writeTag(e,Tp.Varint),this.writeVarint(t)},writeSVarintField:function(e,t){this.writeTag(e,Tp.Varint),this.writeSVarint(t)},writeStringField:function(e,t){this.writeTag(e,Tp.Bytes),this.writeString(t)},writeFloatField:function(e,t){this.writeTag(e,Tp.Fixed32),this.writeFloat(t)},writeDoubleField:function(e,t){this.writeTag(e,Tp.Fixed64),this.writeDouble(t)},writeBooleanField:function(e,t){this.writeVarintField(e,Boolean(t))}};var qp=f(xp);function Vp(e,t,n){t.glyphs=[],1===e&&n.readMessage(Gp,t)}function Gp(e,t,n){if(3===e){const{id:e,bitmap:i,width:a,height:o,left:r,top:s,advance:l}=n.readMessage(Yp,{});t.glyphs.push({id:e,bitmap:new mu({width:a+6,height:o+6},i),metrics:{width:a,height:o,left:r,top:s,advance:l}})}else 4===e?t.ascender=n.readSVarint():5===e&&(t.descender=n.readSVarint())}function Yp(e,t,n){1===e?t.id=n.readVarint():2===e?t.bitmap=n.readBytes():3===e?t.width=n.readVarint():4===e?t.height=n.readVarint():5===e?t.left=n.readSVarint():6===e?t.top=n.readSVarint():7===e&&(t.advance=n.readVarint())}function Xp(e){let t=0,n=0;for(const i of e)t+=i.w*i.h,n=Math.max(n,i.w);e.sort((e,t)=>t.h-e.h);const i=[{x:0,y:0,w:Math.max(Math.ceil(Math.sqrt(t/.95)),n),h:1/0}];let a=0,o=0;for(const t of e)for(let e=i.length-1;e>=0;e--){const n=i[e];if(!(t.w>n.w||t.h>n.h)){if(t.x=n.x,t.y=n.y,o=Math.max(o,t.y+t.h),a=Math.max(a,t.x+t.w),t.w===n.w&&t.h===n.h){const t=i.pop();e<i.length&&(i[e]=t)}else t.h===n.h?(n.x+=t.w,n.w-=t.w):t.w===n.w?(n.y+=t.h,n.h-=t.h):(i.push({x:n.x+t.w,y:n.y,w:n.w-t.w,h:t.h}),n.y+=t.h,n.h-=t.h);break}}return{w:a,h:o,fill:t/(a*o)||0}}class Zp{constructor(e,{pixelRatio:t,version:n,stretchX:i,stretchY:a,content:o}){this.paddedRect=e,this.pixelRatio=t,this.stretchX=i,this.stretchY=a,this.content=o,this.version=n}get tl(){return[this.paddedRect.x+1,this.paddedRect.y+1]}get br(){return[this.paddedRect.x+this.paddedRect.w-1,this.paddedRect.y+this.paddedRect.h-1]}get displaySize(){return[(this.paddedRect.w-2)/this.pixelRatio,(this.paddedRect.h-2)/this.pixelRatio]}}class Jp{constructor(e,t){const n={},i={};this.haveRenderCallbacks=[];const a=[];this.addImages(e,n,a),this.addImages(t,i,a);const{w:o,h:r}=Xp(a),s=new hu({width:o||1,height:r||1});for(const t in e){const i=e[t],a=n[t].paddedRect;hu.copy(i.data,s,{x:0,y:0},{x:a.x+1,y:a.y+1},i.data)}for(const e in t){const n=t[e],a=i[e].paddedRect,o=a.x+1,r=a.y+1,l=n.data.width,c=n.data.height;hu.copy(n.data,s,{x:0,y:0},{x:o,y:r},n.data),hu.copy(n.data,s,{x:0,y:c-1},{x:o,y:r-1},{width:l,height:1}),hu.copy(n.data,s,{x:0,y:0},{x:o,y:r+c},{width:l,height:1}),hu.copy(n.data,s,{x:l-1,y:0},{x:o-1,y:r},{width:1,height:c}),hu.copy(n.data,s,{x:0,y:0},{x:o+l,y:r},{width:1,height:c})}this.image=s,this.iconPositions=n,this.patternPositions=i}addImages(e,t,n){for(const i in e){const a=e[i],o={x:0,y:0,w:a.data.width+2,h:a.data.height+2};n.push(o),t[i]=new Zp(o,a),a.hasRenderCallback&&this.haveRenderCallbacks.push(i)}}patchUpdatedImages(e,t){this.haveRenderCallbacks=this.haveRenderCallbacks.filter(t=>e.hasImage(t)),e.dispatchRenderCallbacks(this.haveRenderCallbacks);for(const n in e.updatedImages)this.patchUpdatedImage(this.iconPositions[n],e.getImage(n),t),this.patchUpdatedImage(this.patternPositions[n],e.getImage(n),t)}patchUpdatedImage(e,t,n){if(!e||!t)return;if(e.version===t.version)return;e.version=t.version;const[i,a]=e.tl;n.update(t.data,void 0,{x:i,y:a})}}Ba(Zp,"ImagePosition"),Ba(Jp,"ImageAtlas");const Kp={horizontal:1,vertical:2,horizontalOnly:3};class $p{constructor(){this.scale=1,this.fontStack="",this.imageName=null}static forText(e,t){const n=new $p;return n.scale=e||1,n.fontStack=t,n}static forImage(e){const t=new $p;return t.imageName=e,t}}class Qp{constructor(){this.text="",this.sectionIndex=[],this.sections=[],this.imageSectionID=null}static fromFeature(e,t){const n=new Qp;for(let i=0;i<e.sections.length;i++){const a=e.sections[i];a.image?n.addImageSection(a):n.addTextSection(a,t)}return n}length(){return this.text.length}getSection(e){return this.sections[this.sectionIndex[e]]}getSections(){return this.sections}getSectionIndex(e){return this.sectionIndex[e]}getCharCode(e){return this.text.charCodeAt(e)}verticalizePunctuation(e){this.text=function(e,t){let n="";for(let i=0;i<e.length;i++){const a=e.charCodeAt(i+1)||null,o=e.charCodeAt(i-1)||null;n+=!t&&(a&&Ho(a)&&!bp[e[i+1]]||o&&Ho(o)&&!bp[e[i-1]])||!bp[e[i]]?e[i]:bp[e[i]]}return n}(this.text,e)}trim(){let e=0;for(let t=0;t<this.text.length&&tf[this.text.charCodeAt(t)];t++)e++;let t=this.text.length;for(let n=this.text.length-1;n>=0&&n>=e&&tf[this.text.charCodeAt(n)];n--)t--;this.text=this.text.substring(e,t),this.sectionIndex=this.sectionIndex.slice(e,t)}substring(e,t){const n=new Qp;return n.text=this.text.substring(e,t),n.sectionIndex=this.sectionIndex.slice(e,t),n.sections=this.sections,n}toString(){return this.text}getMaxScale(){return this.sectionIndex.reduce((e,t)=>Math.max(e,this.sections[t].scale),0)}addTextSection(e,t){this.text+=e.text,this.sections.push($p.forText(e.scale,e.fontStack||t));const n=this.sections.length-1;for(let t=0;t<e.text.length;++t)this.sectionIndex.push(n)}addImageSection(e){const t=e.image?e.image.name:"";if(0===t.length)return void V("Can't add FormattedSection with an empty image.");const n=this.getNextImageSectionCharCode();n?(this.text+=String.fromCharCode(n),this.sections.push($p.forImage(t)),this.sectionIndex.push(this.sections.length-1)):V("Reached maximum number of images 6401")}getNextImageSectionCharCode(){return this.imageSectionID?this.imageSectionID>=63743?null:++this.imageSectionID:(this.imageSectionID=57344,this.imageSectionID)}}function ef(e,t,n,i,a,o,r,s,l,c,u,d,p,f,m){const h=Qp.fromFeature(e,a);d===Kp.vertical&&h.verticalizePunctuation(p);let g=[];const y=function(e,t,n,i,a,o){if(!e)return[];const r=[],s=function(e,t,n,i,a,o){let r=0;for(let n=0;n<e.length();n++){const s=e.getSection(n);r+=af(e.getCharCode(n),s,i,a,t,o)}return r/Math.max(1,Math.ceil(r/n))}(e,t,n,i,a,o),l=e.text.indexOf("​")>=0;let c=0;for(let n=0;n<e.length();n++){const d=e.getSection(n),p=e.getCharCode(n);if(tf[p]||(c+=af(p,d,i,a,t,o)),n<e.length()-1){const t=!((u=p)<11904||!(yo(u)||mo(u)||No(u)||Mo(u)||wo(u)||so(u)||vo(u)||uo(u)||xo(u)||Oo(u)||_o(u)||Ro(u)||po(u)||co(u)||lo(u)||bo(u)||fo(u)||jo(u)||Co(u)||To(u)));(nf[p]||t||d.imageName)&&r.push(sf(n+1,c,s,r,rf(p,e.getCharCode(n+1),t&&l),!1))}}var u;return function e(t){return t?e(t.priorBreak).concat(t.index):[]}(sf(e.length(),c,s,r,0,!0))}(h,c,o,t,i,f),{processBidirectionalText:v,processStyledBidirectionalText:b}=ir;if(v&&1===h.sections.length){const e=v(h.toString(),y);for(const t of e){const e=new Qp;e.text=t,e.sections=h.sections;for(let n=0;n<t.length;n++)e.sectionIndex.push(0);g.push(e)}}else if(b){const e=b(h.text,h.sectionIndex,y);for(const t of e){const e=new Qp;e.text=t[0],e.sectionIndex=t[1],e.sections=h.sections,g.push(e)}}else g=function(e,t){const n=[],i=e.text;let a=0;for(const i of t)n.push(e.substring(a,i)),a=i;return a<i.length&&n.push(e.substring(a,i.length)),n}(h,y);const _=[],w={positionedLines:_,text:h.toString(),top:u[1],bottom:u[1],left:u[0],right:u[0],writingMode:d,iconsInText:!1,verticalizable:!1,hasBaseline:!1};return function(e,t,n,i,a,o,r,s,l,c,u,d){let p=0,f=0,m=0;const h="right"===s?1:"left"===s?0:.5;let g=!1;for(const e of a){const n=e.getSections();for(const e of n){if(e.imageName)continue;const n=t[e.fontStack];if(n&&(g=void 0!==n.ascender&&void 0!==n.descender,!g))break}if(!g)break}let y=0;for(const r of a){r.trim();const a=r.getMaxScale(),s=24*(a-1),b={positionedGlyphs:[],lineOffset:0};e.positionedLines[y]=b;const _=b.positionedGlyphs;let w=0;if(!r.length()){f+=o,++y;continue}let x=0,k=0;for(let o=0;o<r.length();o++){const s=r.getSection(o),m=r.getSectionIndex(o),h=r.getCharCode(o);let y=s.scale,b=null,O=null,T=null,C=24,E=0;const S=!(l===Kp.horizontal||!u&&!Uo(h)||u&&(tf[h]||(v=h,qa(v)||Va(v)||Ga(v)||Ao(v)||Do(v))));if(s.imageName){const t=i[s.imageName];if(!t)continue;T=s.imageName,e.iconsInText=e.iconsInText||!0,O=t.paddedRect;const n=t.displaySize;y=24*y/d,b={width:n[0],height:n[1],left:1,top:-3,advance:S?n[1]:n[0],localGlyph:!1},E=g?-b.height*y:24*a-17-n[1]*y,C=b.advance;const o=(S?n[0]:n[1])*y-24*a;o>0&&o>w&&(w=o)}else{const e=n[s.fontStack];if(!e)continue;e[h]&&(O=e[h]);const i=t[s.fontStack];if(!i)continue;const o=i.glyphs[h];if(!o)continue;if(b=o.metrics,C=8203!==h?24:0,g){const e=void 0!==i.ascender?Math.abs(i.ascender):0,t=void 0!==i.descender?Math.abs(i.descender):0,n=(e+t)*y;x<n&&(x=n,k=(e-t)/2*y),E=-e*y}else E=24*(a-y)-17}S?(e.verticalizable=!0,_.push({glyph:h,imageName:T,x:p,y:f+E,vertical:S,scale:y,localGlyph:b.localGlyph,fontStack:s.fontStack,sectionIndex:m,metrics:b,rect:O}),p+=C*y+c):(_.push({glyph:h,imageName:T,x:p,y:f+E,vertical:S,scale:y,localGlyph:b.localGlyph,fontStack:s.fontStack,sectionIndex:m,metrics:b,rect:O}),p+=b.advance*y+c)}0!==_.length&&(m=Math.max(p-c,m),g?cf(_,h,w,k,o*a/2):cf(_,h,w,0,o/2)),p=0;const O=o*a+w;b.lineOffset=Math.max(w,s),f+=O,++y}var v;const b=f,{horizontalAlign:_,verticalAlign:w}=lf(r);(function(e,t,n,i,a,o){const r=(t-n)*a,s=-o*i;for(const t of e)for(const e of t.positionedGlyphs)e.x+=r,e.y+=s})(e.positionedLines,h,_,w,m,b),e.top+=-w*b,e.bottom=e.top+b,e.left+=-_*m,e.right=e.left+m,e.hasBaseline=g}(w,t,n,i,g,r,s,l,d,c,p,m),!function(e){for(const t of e)if(0!==t.positionedGlyphs.length)return!1;return!0}(_)&&w}const tf={9:!0,10:!0,11:!0,12:!0,13:!0,32:!0},nf={10:!0,32:!0,38:!0,40:!0,41:!0,43:!0,45:!0,47:!0,173:!0,183:!0,8203:!0,8208:!0,8211:!0,8231:!0};function af(e,t,n,i,a,o){if(t.imageName){const e=i[t.imageName];return e?e.displaySize[0]*t.scale*24/o+a:0}{const i=n[t.fontStack],o=i&&i.glyphs[e];return o?o.metrics.advance*t.scale+a:0}}function of(e,t,n,i){const a=Math.pow(e-t,2);return i?e<t?a/2:2*a:a+Math.abs(n)*n}function rf(e,t,n){let i=0;return 10===e&&(i-=1e4),n&&(i+=150),40!==e&&65288!==e||(i+=50),41!==t&&65289!==t||(i+=50),i}function sf(e,t,n,i,a,o){let r=null,s=of(t,n,a,o);for(const e of i){const i=of(t-e.x,n,a,o)+e.badness;i<=s&&(r=e,s=i)}return{index:e,x:t,priorBreak:r,badness:s}}function lf(e){let t=.5,n=.5;switch(e){case"right":case"top-right":case"bottom-right":t=1;break;case"left":case"top-left":case"bottom-left":t=0}switch(e){case"bottom":case"bottom-right":case"bottom-left":n=1;break;case"top":case"top-right":case"top-left":n=0}return{horizontalAlign:t,verticalAlign:n}}function cf(e,t,n,i,a){if(!(t||n||i||a))return;const o=e.length-1,r=e[o],s=(r.x+r.metrics.advance*r.scale)*t;for(let t=0;t<=o;t++)e[t].x-=s,e[t].y+=n+i+a}function uf(e,t,n){const{horizontalAlign:i,verticalAlign:a}=lf(n),o=t[0]-e.displaySize[0]*i,r=t[1]-e.displaySize[1]*a;return{image:e,top:r,bottom:r+e.displaySize[1],left:o,right:o+e.displaySize[0]}}function df(e,t,n,i,a,o){const r=e.image;let s;if(r.content){const e=r.content,t=r.pixelRatio||1;s=[e[0]/t,e[1]/t,r.displaySize[0]-e[2]/t,r.displaySize[1]-e[3]/t]}const l=t.left*o,c=t.right*o;let u,d,p,f;"width"===n||"both"===n?(f=a[0]+l-i[3],d=a[0]+c+i[1]):(f=a[0]+(l+c-r.displaySize[0])/2,d=f+r.displaySize[0]);const m=t.top*o,h=t.bottom*o;return"height"===n||"both"===n?(u=a[1]+m-i[0],p=a[1]+h+i[2]):(u=a[1]+(m+h-r.displaySize[1])/2,p=u+r.displaySize[1]),{image:r,top:u,right:d,bottom:p,left:f,collisionPadding:s}}class pf extends b{constructor(e,t,n,i,a){super(e,t),this.angle=i,this.z=n,void 0!==a&&(this.segment=a)}clone(){return new pf(this.x,this.y,this.z,this.angle,this.segment)}}function ff(e,t,n,i,a){if(void 0===t.segment)return!0;let o=t,r=t.segment+1,s=0;for(;s>-n/2;){if(r--,r<0)return!1;s-=e[r].dist(o),o=e[r]}s+=e[r].dist(e[r+1]),r++;const l=[];let c=0;for(;s<n/2;){const t=e[r],n=e[r+1];if(!n)return!1;let o=e[r-1].angleTo(t)-t.angleTo(n);for(o=Math.abs((o+3*Math.PI)%(2*Math.PI)-Math.PI),l.push({distance:s,angleDelta:o}),c+=o;s-l[0].distance>i;)c-=l.shift().angleDelta;if(c>a)return!1;r++,s+=t.dist(n)}return!0}function mf(e){let t=0;for(let n=0;n<e.length-1;n++)t+=e[n].dist(e[n+1]);return t}function hf(e,t,n){return e?.6*t*n:0}function gf(e,t){return Math.max(e?e.right-e.left:0,t?t.right-t.left:0)}function yf(e,t,n,i,a,o){const r=hf(n,a,o),s=gf(n,i)*o;let l=0;const c=mf(e)/2;for(let n=0;n<e.length-1;n++){const i=e[n],a=e[n+1],o=i.dist(a);if(l+o>c){const u=(c-l)/o,d=An(i.x,a.x,u),p=An(i.y,a.y,u),f=new pf(d,p,0,a.angleTo(i),n);return!r||ff(e,f,s,r,t)?f:void 0}l+=o}}function vf(e,t,n,i,a,o,r,s,l){const c=hf(i,o,r),u=gf(i,a),d=u*r,p=0===e[0].x||e[0].x===l||0===e[0].y||e[0].y===l;return t-d<t/4&&(t=d+t/4),function e(t,n,i,a,o,r,s,l,c){const u=r/2,d=mf(t);let p=0,f=n-i,m=[];for(let e=0;e<t.length-1;e++){const n=t[e],s=t[e+1],l=n.dist(s),h=s.angleTo(n);for(;f+i<p+l;){f+=i;const g=(f-p)/l,y=An(n.x,s.x,g),v=An(n.y,s.y,g);if(y>=0&&y<c&&v>=0&&v<c&&f-u>=0&&f+u<=d){const n=new pf(y,v,0,h,e);n._round(),a&&!ff(t,n,r,a,o)||m.push(n)}}p+=l}return l||m.length||s||(m=e(t,p/2,i,a,o,r,s,!0,c)),m}(e,p?t/2*s%t:(u/2+2*o)*r*s%t,t,c,n,d,p,!1,l)}function bf(e,t,n,i,a){const o=[];for(let r=0;r<e.length;r++){const s=e[r];let l;for(let e=0;e<s.length-1;e++){let r=s[e],c=s[e+1];r.x<t&&c.x<t||(r.x<t?r=new b(t,r.y+(t-r.x)/(c.x-r.x)*(c.y-r.y))._round():c.x<t&&(c=new b(t,r.y+(t-r.x)/(c.x-r.x)*(c.y-r.y))._round()),r.y<n&&c.y<n||(r.y<n?r=new b(r.x+(n-r.y)/(c.y-r.y)*(c.x-r.x),n)._round():c.y<n&&(c=new b(r.x+(n-r.y)/(c.y-r.y)*(c.x-r.x),n)._round()),r.x>=i&&c.x>=i||(r.x>=i?r=new b(i,r.y+(i-r.x)/(c.x-r.x)*(c.y-r.y))._round():c.x>=i&&(c=new b(i,r.y+(i-r.x)/(c.x-r.x)*(c.y-r.y))._round()),r.y>=a&&c.y>=a||(r.y>=a?r=new b(r.x+(a-r.y)/(c.y-r.y)*(c.x-r.x),a)._round():c.y>=a&&(c=new b(r.x+(a-r.y)/(c.y-r.y)*(c.x-r.x),a)._round()),l&&r.equals(l[l.length-1])||(l=[r],o.push(l)),l.push(c)))))}}return o}Ba(pf,"Anchor");const _f=1e20;function wf(e,t,n,i,a,o,r,s,l){for(let c=t;c<t+i;c++)xf(e,n*o+c,o,a,r,s,l);for(let c=n;c<n+a;c++)xf(e,c*o+t,1,i,r,s,l)}function xf(e,t,n,i,a,o,r){o[0]=0,r[0]=-_f,r[1]=_f,a[0]=e[t];for(let s=1,l=0,c=0;s<i;s++){a[s]=e[t+s*n];const i=s*s;do{const e=o[l];c=(a[s]-a[e]+i-e*e)/(s-e)/2}while(c<=r[l]&&--l>-1);l++,o[l]=s,r[l]=c,r[l+1]=_f}for(let s=0,l=0;s<i;s++){for(;r[l+1]<s;)l++;const i=o[l],c=s-i;e[t+s*n]=a[i]+c*c}}const kf={none:0,ideographs:1,all:2};class Of{constructor(e,t,n){this.requestManager=e,this.localGlyphMode=t,this.localFontFamily=n,this.entries={},this.localGlyphs={200:{},400:{},500:{},900:{}}}setURL(e){this.url=e}getGlyphs(e,t){const n=[];for(const t in e)for(const i of e[t])n.push({stack:t,id:i});M(n,({stack:e,id:t},n)=>{let i=this.entries[e];i||(i=this.entries[e]={glyphs:{},requests:{},ranges:{},ascender:void 0,descender:void 0});let a=i.glyphs[t];if(void 0!==a)return void n(null,{stack:e,id:t,glyph:a});if(a=this._tinySDF(i,e,t),a)return i.glyphs[t]=a,void n(null,{stack:e,id:t,glyph:a});const o=Math.floor(t/256);if(256*o>65535)return void n(new Error("glyphs > 65535 not supported"));if(i.ranges[o])return void n(null,{stack:e,id:t,glyph:a});let r=i.requests[o];r||(r=i.requests[o]=[],Of.loadGlyphRange(e,o,this.url,this.requestManager,(e,t)=>{if(t){i.ascender=t.ascender,i.descender=t.descender;for(const e in t.glyphs)this._doesCharSupportLocalGlyph(+e)||(i.glyphs[+e]=t.glyphs[+e]);i.ranges[o]=!0}for(const n of r)n(e,t);delete i.requests[o]})),r.push((i,a)=>{i?n(i):a&&n(null,{stack:e,id:t,glyph:a.glyphs[t]||null})})},(e,n)=>{if(e)t(e);else if(n){const e={};for(const{stack:t,id:i,glyph:a}of n)void 0===e[t]&&(e[t]={}),void 0===e[t].glyphs&&(e[t].glyphs={}),e[t].glyphs[i]=a&&{id:a.id,bitmap:a.bitmap.clone(),metrics:a.metrics},e[t].ascender=this.entries[t].ascender,e[t].descender=this.entries[t].descender;t(null,e)}})}_doesCharSupportLocalGlyph(e){return this.localGlyphMode!==kf.none&&(this.localGlyphMode===kf.all?!!this.localFontFamily:!!this.localFontFamily&&(Oo(e)||So(e)||po(e)||fo(e)||uo(e)))}_tinySDF(e,t,n){const i=this.localFontFamily;if(!i||!this._doesCharSupportLocalGlyph(n))return;let a=e.tinySDF;if(!a){let n="400";/bold/i.test(t)?n="900":/medium/i.test(t)?n="500":/light/i.test(t)&&(n="200"),a=e.tinySDF=new Of.TinySDF({fontFamily:i,fontWeight:n,fontSize:48,buffer:6,radius:16}),a.fontWeight=n}if(this.localGlyphs[a.fontWeight][n])return this.localGlyphs[a.fontWeight][n];const o=String.fromCharCode(n),{data:r,width:s,height:l,glyphWidth:c,glyphHeight:u,glyphLeft:d,glyphTop:p,glyphAdvance:f}=a.draw(o);return this.localGlyphs[a.fontWeight][n]={id:n,bitmap:new mu({width:s,height:l},r),metrics:{width:c/2,height:u/2,left:d/2,top:p/2-27,advance:f/2,localGlyph:!0}}}}function Tf(e,t,n,i){const a=[],o=e.image,r=o.pixelRatio,s=o.paddedRect.w-2,l=o.paddedRect.h-2,c=e.right-e.left,u=e.bottom-e.top,d=o.stretchX||[[0,s]],p=o.stretchY||[[0,l]],f=(e,t)=>e+t[1]-t[0],m=d.reduce(f,0),h=p.reduce(f,0),g=s-m,y=l-h;let v=0,_=m,w=0,x=h,k=0,O=g,T=0,C=y;if(o.content&&i){const e=o.content;v=Cf(d,0,e[0]),w=Cf(p,0,e[1]),_=Cf(d,e[0],e[2]),x=Cf(p,e[1],e[3]),k=e[0]-v,T=e[1]-w,O=e[2]-e[0]-_,C=e[3]-e[1]-x}const E=(i,a,s,l)=>{const d=Sf(i.stretch-v,_,c,e.left),p=Pf(i.fixed-k,O,i.stretch,m),f=Sf(a.stretch-w,x,u,e.top),g=Pf(a.fixed-T,C,a.stretch,h),y=Sf(s.stretch-v,_,c,e.left),E=Pf(s.fixed-k,O,s.stretch,m),S=Sf(l.stretch-w,x,u,e.top),P=Pf(l.fixed-T,C,l.stretch,h),I=new b(d,f),M=new b(y,f),A=new b(y,S),j=new b(d,S),N=new b(p/r,g/r),L=new b(E/r,P/r),D=t*Math.PI/180;if(D){const e=Math.sin(D),t=Math.cos(D),n=[t,-e,e,t];I._matMult(n),M._matMult(n),j._matMult(n),A._matMult(n)}const R=i.stretch+i.fixed,B=a.stretch+a.fixed;return{tl:I,tr:M,bl:j,br:A,tex:{x:o.paddedRect.x+1+R,y:o.paddedRect.y+1+B,w:s.stretch+s.fixed-R,h:l.stretch+l.fixed-B},writingMode:void 0,glyphOffset:[0,0],sectionIndex:0,pixelOffsetTL:N,pixelOffsetBR:L,minFontScaleX:O/r/c,minFontScaleY:C/r/u,isSDF:n}};if(i&&(o.stretchX||o.stretchY)){const e=Ef(d,g,m),t=Ef(p,y,h);for(let n=0;n<e.length-1;n++){const i=e[n],o=e[n+1];for(let e=0;e<t.length-1;e++)a.push(E(i,t[e],o,t[e+1]))}}else a.push(E({fixed:0,stretch:-1},{fixed:0,stretch:-1},{fixed:0,stretch:s+1},{fixed:0,stretch:l+1}));return a}function Cf(e,t,n){let i=0;for(const a of e)i+=Math.max(t,Math.min(n,a[1]))-Math.max(t,Math.min(n,a[0]));return i}function Ef(e,t,n){const i=[{fixed:-1,stretch:0}];for(const[t,n]of e){const e=i[i.length-1];i.push({fixed:t-e.stretch,stretch:e.stretch}),i.push({fixed:t-e.stretch,stretch:e.stretch+(n-t)})}return i.push({fixed:t+1,stretch:n}),i}function Sf(e,t,n,i){return e/t*n+i}function Pf(e,t,n,i){return e-t*n/i}function If(e,t,n,i){const a=t+e.positionedLines[i].lineOffset;return 0===i?n+a/2:n+(a+(t+e.positionedLines[i-1].lineOffset))/2}Of.loadGlyphRange=function(e,t,n,i,a){const o=256*t,r=o+255,s=i.transformRequest(i.normalizeGlyphsURL(n).replace("{fontstack}",e).replace("{range}",`${o}-${r}`),ce.Glyphs);fe(s,(e,t)=>{if(e)a(e);else if(t){const e={},n=function(e){return new qp(e).readFields(Vp,{})}(t);for(const t of n.glyphs)e[t.id]=t;a(null,{glyphs:e,ascender:n.ascender,descender:n.descender})}})},Of.TinySDF=class{constructor({fontSize:e=24,buffer:t=3,radius:n=8,cutoff:i=.25,fontFamily:a="sans-serif",fontWeight:o="normal",fontStyle:r="normal"}={}){this.buffer=t,this.cutoff=i,this.radius=n;const s=this.size=e+4*t,l=this._createCanvas(s),c=this.ctx=l.getContext("2d",{willReadFrequently:!0});c.font=`${r} ${o} ${e}px ${a}`,c.textBaseline="alphabetic",c.textAlign="left",c.fillStyle="black",this.gridOuter=new Float64Array(s*s),this.gridInner=new Float64Array(s*s),this.f=new Float64Array(s),this.z=new Float64Array(s+1),this.v=new Uint16Array(s)}_createCanvas(e){const t=document.createElement("canvas");return t.width=t.height=e,t}draw(e){const{width:t,actualBoundingBoxAscent:n,actualBoundingBoxDescent:i,actualBoundingBoxLeft:a,actualBoundingBoxRight:o}=this.ctx.measureText(e),r=Math.ceil(n),s=Math.max(0,Math.min(this.size-this.buffer,Math.ceil(o-a))),l=Math.min(this.size-this.buffer,r+Math.ceil(i)),c=s+2*this.buffer,u=l+2*this.buffer,d=Math.max(c*u,0),p=new Uint8ClampedArray(d),f={data:p,width:c,height:u,glyphWidth:s,glyphHeight:l,glyphTop:r,glyphLeft:0,glyphAdvance:t};if(0===s||0===l)return f;const{ctx:m,buffer:h,gridInner:g,gridOuter:y}=this;m.clearRect(h,h,s,l),m.fillText(e,h,h+r);const v=m.getImageData(h,h,s,l);y.fill(_f,0,d),g.fill(0,0,d);for(let e=0;e<l;e++)for(let t=0;t<s;t++){const n=v.data[4*(e*s+t)+3]/255;if(0===n)continue;const i=(e+h)*c+t+h;if(1===n)y[i]=0,g[i]=_f;else{const e=.5-n;y[i]=e>0?e*e:0,g[i]=e<0?e*e:0}}wf(y,0,0,c,u,c,this.f,this.v,this.z),wf(g,h,h,s,l,c,this.f,this.v,this.z);for(let e=0;e<d;e++){const t=Math.sqrt(y[e])-Math.sqrt(g[e]);p[e]=Math.round(255-255*(t/this.radius+this.cutoff))}return f}};class Mf{constructor(e=[],t=Af){if(this.data=e,this.length=this.data.length,this.compare=t,this.length>0)for(let e=(this.length>>1)-1;e>=0;e--)this._down(e)}push(e){this.data.push(e),this.length++,this._up(this.length-1)}pop(){if(0===this.length)return;const e=this.data[0],t=this.data.pop();return this.length--,this.length>0&&(this.data[0]=t,this._down(0)),e}peek(){return this.data[0]}_up(e){const{data:t,compare:n}=this,i=t[e];for(;e>0;){const a=e-1>>1,o=t[a];if(n(i,o)>=0)break;t[e]=o,e=a}t[e]=i}_down(e){const{data:t,compare:n}=this,i=this.length>>1,a=t[e];for(;e<i;){let i=1+(e<<1),o=t[i];const r=i+1;if(r<this.length&&n(t[r],o)<0&&(i=r,o=t[r]),n(o,a)>=0)break;t[e]=o,e=i}t[e]=a}}function Af(e,t){return e<t?-1:e>t?1:0}function jf(e,t=1,n=!1){let i=1/0,a=1/0,o=-1/0,r=-1/0;const s=e[0];for(let e=0;e<s.length;e++){const t=s[e];(!e||t.x<i)&&(i=t.x),(!e||t.y<a)&&(a=t.y),(!e||t.x>o)&&(o=t.x),(!e||t.y>r)&&(r=t.y)}const l=Math.min(o-i,r-a);let c=l/2;const u=new Mf([],Nf);if(0===l)return new b(i,a);for(let t=i;t<o;t+=l)for(let n=a;n<r;n+=l)u.push(new Lf(t+c,n+c,c,e));let d=function(e){let t=0,n=0,i=0;const a=e[0];for(let e=0,o=a.length,r=o-1;e<o;r=e++){const o=a[e],s=a[r],l=o.x*s.y-s.x*o.y;n+=(o.x+s.x)*l,i+=(o.y+s.y)*l,t+=3*l}return new Lf(n/t,i/t,0,e)}(e),p=u.length;for(;u.length;){const i=u.pop();(i.d>d.d||!d.d)&&(d=i,n&&console.log("found best %d after %d probes",Math.round(1e4*i.d)/1e4,p)),i.max-d.d<=t||(c=i.h/2,u.push(new Lf(i.p.x-c,i.p.y-c,c,e)),u.push(new Lf(i.p.x+c,i.p.y-c,c,e)),u.push(new Lf(i.p.x-c,i.p.y+c,c,e)),u.push(new Lf(i.p.x+c,i.p.y+c,c,e)),p+=4)}return n&&(console.log("num probes: "+p),console.log("best distance: "+d.d)),d.p}function Nf(e,t){return t.max-e.max}class Lf{constructor(e,t,n,i){this.p=new b(e,t),this.h=n,this.d=function(e,t){let n=!1,i=1/0;for(let a=0;a<t.length;a++){const o=t[a];for(let t=0,a=o.length,r=a-1;t<a;r=t++){const a=o[t],s=o[r];a.y>e.y!=s.y>e.y&&e.x<(s.x-a.x)*(e.y-a.y)/(s.y-a.y)+a.x&&(n=!n),i=Math.min(i,Xc(e,a,s))}}return(n?1:-1)*Math.sqrt(i)}(this.p,i),this.max=this.d+this.h*Math.SQRT2}}const Df=Number.POSITIVE_INFINITY,Rf=Math.sqrt(2);function Bf(e,[t,n]){let i=0,a=0;if(n===Df){t<0&&(t=0);const n=t/Rf;switch(e){case"top-right":case"top-left":a=n-7;break;case"bottom-right":case"bottom-left":a=7-n;break;case"bottom":a=7-t;break;case"top":a=t-7}switch(e){case"top-right":case"bottom-right":i=-n;break;case"top-left":case"bottom-left":i=n;break;case"left":i=t;break;case"right":i=-t}}else{switch(t=Math.abs(t),n=Math.abs(n),e){case"top-right":case"top-left":case"top":a=n-7;break;case"bottom-right":case"bottom-left":case"bottom":a=7-n}switch(e){case"top-right":case"bottom-right":case"right":i=-t;break;case"top-left":case"bottom-left":case"left":i=t}}return[i,a]}function zf(e,t,n,i,a,o,r,s,l,c){e.createArrays(),e.tilePixelRatio=Hs/(512*e.overscaling),e.compareText={},e.iconsNeedLinear=!1;const u=e.layers[0].layout,d=e.layers[0]._unevaluatedLayout._values,p={};if("composite"===e.textSizeData.kind){const{minZoom:t,maxZoom:n}=e.textSizeData;p.compositeTextSizes=[d["text-size"].possiblyEvaluate(new ar(t),s),d["text-size"].possiblyEvaluate(new ar(n),s)]}if("composite"===e.iconSizeData.kind){const{minZoom:t,maxZoom:n}=e.iconSizeData;p.compositeIconSizes=[d["icon-size"].possiblyEvaluate(new ar(t),s),d["icon-size"].possiblyEvaluate(new ar(n),s)]}p.layoutTextSize=d["text-size"].possiblyEvaluate(new ar(l+1),s),p.layoutIconSize=d["icon-size"].possiblyEvaluate(new ar(l+1),s),p.textMaxSize=d["text-size"].possiblyEvaluate(new ar(18),s);const f="map"===u.get("text-rotation-alignment")&&"point"!==u.get("symbol-placement"),m=u.get("text-size");for(const o of e.features){const l=u.get("text-font").evaluate(o,{},s).join(","),d=m.evaluate(o,{},s),h=p.layoutTextSize.evaluate(o,{},s),g=(p.layoutIconSize.evaluate(o,{},s),{horizontal:{},vertical:void 0}),y=o.text;let v,b=[0,0];if(y){const i=y.toString(),r=24*u.get("text-letter-spacing").evaluate(o,{},s),c=24*u.get("text-line-height").evaluate(o,{},s),p=zo(i)?r:0,m=u.get("text-anchor").evaluate(o,{},s),v=u.get("text-variable-anchor");if(!v){const e=u.get("text-radial-offset").evaluate(o,{},s);b=e?Bf(m,[24*e,Df]):u.get("text-offset").evaluate(o,{},s).map(e=>24*e)}let _=f?"center":u.get("text-justify").evaluate(o,{},s);const w="point"===u.get("symbol-placement"),x=w?24*u.get("text-max-width").evaluate(o,{},s):1/0,k=o=>{e.allowVerticalPlacement&&Bo(i)&&(g.vertical=ef(y,t,n,a,l,x,c,m,o,p,b,Kp.vertical,!0,h,d))};if(!f&&v){const e="auto"===_?v.map(e=>Ff(e)):[_];let i=!1;for(let o=0;o<e.length;o++){const r=e[o];if(!g.horizontal[r])if(i)g.horizontal[r]=g.horizontal[0];else{const e=ef(y,t,n,a,l,x,c,"center",r,p,b,Kp.horizontal,!1,h,d);e&&(g.horizontal[r]=e,i=1===e.positionedLines.length)}}k("left")}else{if("auto"===_&&(_=Ff(m)),w||u.get("text-writing-mode").indexOf("horizontal")>=0||!Bo(i)){const e=ef(y,t,n,a,l,x,c,m,_,p,b,Kp.horizontal,!1,h,d);e&&(g.horizontal[_]=e)}k(w?"left":_)}}let _=!1;if(o.icon&&o.icon.name){const t=i[o.icon.name];t&&(v=uf(a[o.icon.name],u.get("icon-offset").evaluate(o,{},s),u.get("icon-anchor").evaluate(o,{},s)),_=t.sdf,void 0===e.sdfIcons?e.sdfIcons=t.sdf:e.sdfIcons!==t.sdf&&V("Style sheet warning: Cannot mix SDF and non-SDF icons in one buffer"),(t.pixelRatio!==e.pixelRatio||0!==u.get("icon-rotate").constantOr(1))&&(e.iconsNeedLinear=!0))}const w=Vf(g.horizontal)||g.vertical;e.iconsInText||(e.iconsInText=!!w&&w.iconsInText),(w||v)&&Uf(e,o,g,v,i,p,h,0,b,_,r,s,c)}o&&e.generateCollisionDebugBuffers(l,e.collisionBoxArray)}function Ff(e){switch(e){case"right":case"top-right":case"bottom-right":return"right";case"left":case"top-left":case"bottom-left":return"left"}return"center"}function Uf(e,t,n,i,a,o,r,s,l,c,u,d,p){let f=o.textMaxSize.evaluate(t,{},d);void 0===f&&(f=r);const m=e.layers[0].layout,h=m.get("icon-offset").evaluate(t,{},d),g=Vf(n.horizontal)||n.vertical,y="globe"===p.name,v=r/24,b=e.tilePixelRatio*f/24,_=(P=e.overscaling,e.zoom>18&&P>2&&(P>>=1),Math.max(Hs/(512*P),1)*m.get("symbol-spacing")),w=m.get("text-padding")*e.tilePixelRatio,k=m.get("icon-padding")*e.tilePixelRatio,O=x(m.get("text-max-angle")),T="map"===m.get("text-rotation-alignment")&&"point"!==m.get("symbol-placement"),C="map"===m.get("icon-rotation-alignment")&&"point"!==m.get("symbol-placement"),E=m.get("symbol-placement"),S=_/2;var P;const I=m.get("icon-text-fit");let M;i&&"none"!==I&&(e.allowVerticalPlacement&&n.vertical&&(M=df(i,n.vertical,I,m.get("icon-text-fit-padding"),h,v)),g&&(i=df(i,g,I,m.get("icon-text-fit-padding"),h,v)));const A=(r,s,f)=>{if(s.x<0||s.x>=Hs||s.y<0||s.y>=Hs)return;let m=null;if(y){const{x:e,y:t,z:n}=p.projectTilePoint(s.x,s.y,f);m={anchor:new pf(e,t,n,0,void 0),up:p.upVector(f,s.x,s.y)}}!function(e,t,n,i,a,o,r,s,l,c,u,d,p,f,m,h,g,y,v,b,_,w,x,k,O){const T=e.addToLineVertexArray(t,i);let C,E,S,P,I,M,A,j=0,N=0,L=0,D=0,R=-1,B=-1;const z={};let F=fs("");const U=n?n.anchor:t;let H=0,W=0;if(void 0===l._unevaluatedLayout.getValue("text-radial-offset")?[H,W]=l.layout.get("text-offset").evaluate(_,{},O).map(e=>24*e):(H=24*l.layout.get("text-radial-offset").evaluate(_,{},O),W=Df),e.allowVerticalPlacement&&a.vertical){const e=a.vertical;if(m)M=Yf(e),s&&(A=Yf(s));else{const n=l.layout.get("text-rotate").evaluate(_,{},O)+90;S=Gf(c,U,t,u,d,p,e,f,n,h),s&&(P=Gf(c,U,t,u,d,p,s,y,n))}}if(o){const i=l.layout.get("icon-rotate").evaluate(_,{},O),a="none"!==l.layout.get("icon-text-fit"),r=Tf(o,i,x,a),f=s?Tf(s,i,x,a):void 0;E=Gf(c,U,t,u,d,p,o,y,i),j=4*r.length;const m=e.iconSizeData;let h=null;"source"===m.kind?(h=[fp*l.layout.get("icon-size").evaluate(_,{},O)],h[0]>Wf&&V(`${e.layerIds[0]}: Value for "icon-size" is >= ${Hf}. Reduce your "icon-size".`)):"composite"===m.kind&&(h=[fp*w.compositeIconSizes[0].evaluate(_,{},O),fp*w.compositeIconSizes[1].evaluate(_,{},O)],(h[0]>Wf||h[1]>Wf)&&V(`${e.layerIds[0]}: Value for "icon-size" is >= ${Hf}. Reduce your "icon-size".`)),e.addSymbols(e.icon,r,h,b,v,_,!1,n,t,T.lineStartIndex,T.lineLength,-1,k,O),R=e.icon.placedSymbolArray.length-1,f&&(N=4*f.length,e.addSymbols(e.icon,f,h,b,v,_,Kp.vertical,n,t,T.lineStartIndex,T.lineLength,-1,k,O),B=e.icon.placedSymbolArray.length-1)}for(const i in a.horizontal){const o=a.horizontal[i];C||(F=fs(o.text),m?I=Yf(o):C=Gf(c,U,t,u,d,p,o,f,l.layout.get("text-rotate").evaluate(_,{},O),h));const s=1===o.positionedLines.length;if(L+=qf(e,n,t,o,r,l,m,_,h,T,a.vertical?Kp.horizontal:Kp.horizontalOnly,s?Object.keys(a.horizontal):[i],z,R,w,k,O),s)break}a.vertical&&(D+=qf(e,n,t,a.vertical,r,l,m,_,h,T,Kp.vertical,["vertical"],z,B,w,k,O));let q=-1;const G=(e,t)=>e?Math.max(e,t):t;q=G(I,q),q=G(M,q),q=G(A,q);const Y=q>-1?1:0;e.glyphOffsetArray.length>=Cm.MAX_GLYPHS&&V("Too many glyphs being rendered in a tile. See https://github.com/mapbox/mapbox-gl-js/issues/2907"),void 0!==_.sortKey&&e.addToSortKeyRanges(e.symbolInstances.length,_.sortKey),e.symbolInstances.emplaceBack(U.x,U.y,U.z,t.x,t.y,z.right>=0?z.right:-1,z.center>=0?z.center:-1,z.left>=0?z.left:-1,z.vertical>=0?z.vertical:-1,R,B,F,void 0!==C?C:e.collisionBoxArray.length,void 0!==C?C+1:e.collisionBoxArray.length,void 0!==S?S:e.collisionBoxArray.length,void 0!==S?S+1:e.collisionBoxArray.length,void 0!==E?E:e.collisionBoxArray.length,void 0!==E?E+1:e.collisionBoxArray.length,P||e.collisionBoxArray.length,P?P+1:e.collisionBoxArray.length,u,L,D,j,N,Y,0,H,W,q)}(e,s,m,r,n,i,a,M,e.layers[0],e.collisionBoxArray,t.index,t.sourceLayerIndex,e.index,w,T,l,0,k,C,h,t,o,c,u,d)};if("line"===E)for(const a of bf(t.geometry,0,0,Hs,Hs)){const t=vf(a,_,O,n.vertical||g,i,24,b,e.overscaling,Hs);for(const n of t)g&&Xf(e,g.text,S,n)||A(a,n,d)}else if("line-center"===E){for(const e of t.geometry)if(e.length>1){const t=yf(e,O,n.vertical||g,i,24,b);t&&A(e,t,d)}}else if("Polygon"===t.type)for(const e of $u(t.geometry,0)){const t=jf(e,16);A(e[0],new pf(t.x,t.y,0,0,void 0),d)}else if("LineString"===t.type)for(const e of t.geometry)A(e,new pf(e[0].x,e[0].y,0,0,void 0),d);else if("Point"===t.type)for(const e of t.geometry)for(const t of e)A([t],new pf(t.x,t.y,0,0,void 0),d)}const Hf=255,Wf=Hf*fp;function qf(e,t,n,i,a,o,r,s,l,c,u,d,p,f,m,h,g){const y=function(e,t,n,i,a,o,r,s){const l=[];if(0===t.positionedLines.length)return l;const c=i.layout.get("text-rotate").evaluate(o,{})*Math.PI/180,u=function(e){const t=e[0],n=e[1],i=t*n;return i>0?[t,-n]:i<0?[-t,n]:0===t?[n,t]:[n,-t]}(n);let d=Math.abs(t.top-t.bottom);for(const e of t.positionedLines)d-=e.lineOffset;const p=t.positionedLines.length,f=d/p;let m=t.top-n[1];for(let e=0;e<p;++e){const i=t.positionedLines[e];m=If(t,f,m,e);for(const e of i.positionedGlyphs){if(!e.rect)continue;const i=e.rect||{};let o=4,d=!0,p=1,f=0;if(e.imageName){const t=r[e.imageName];if(!t)continue;if(t.sdf){V("SDF images are not supported in formatted text and will be ignored.");continue}d=!1,p=t.pixelRatio,o=1/p}const h=(a||s)&&e.vertical,g=e.metrics.advance*e.scale/2,y=e.metrics,v=e.rect;if(null===v)continue;s&&t.verticalizable&&(f=e.imageName?g-e.metrics.width*e.scale/2:0);const _=a?[e.x+g,e.y]:[0,0];let w=[0,0],x=[0,0],k=!1;a||(h?(x=[e.x+g+u[0],e.y+u[1]-f],k=!0):w=[e.x+g+n[0],e.y+n[1]-f]);const O=v.w*e.scale/(p*(e.localGlyph?2:1)),T=v.h*e.scale/(p*(e.localGlyph?2:1));let C,E,S,P;if(h){const t=e.y-m,n=new b(-g,g-t),i=-Math.PI/2,a=new b(...x);C=new b(-g+w[0],w[1]),C._rotateAround(i,n)._add(a),C.x+=-t+g,C.y-=(y.left-o)*e.scale;const r=e.imageName?y.advance*e.scale:24*e.scale,s=String.fromCharCode(e.glyph);_p(s)?C.x+=(1-o)*e.scale:wp(s)?C.x+=r-y.height*e.scale+(-o-1)*e.scale:C.x+=e.imageName||y.width+2*o===v.w&&y.height+2*o===v.h?(r-T)/2:(r-(y.height+2*o)*e.scale)/2,E=new b(C.x,C.y-O),S=new b(C.x+T,C.y),P=new b(C.x+T,C.y-O)}else{const t=(y.left-o)*e.scale-g+w[0],n=(-y.top-o)*e.scale+w[1],i=t+O,a=n+T;C=new b(t,n),E=new b(i,n),S=new b(t,a),P=new b(i,a)}if(c){let e;e=a?new b(0,0):k?new b(u[0],u[1]):new b(n[0],n[1]),C._rotateAround(c,e),E._rotateAround(c,e),S._rotateAround(c,e),P._rotateAround(c,e)}const I=new b(0,0),M=new b(0,0);l.push({tl:C,tr:E,bl:S,br:P,tex:i,writingMode:t.writingMode,glyphOffset:_,sectionIndex:e.sectionIndex,isSDF:d,pixelOffsetTL:I,pixelOffsetBR:M,minFontScaleX:0,minFontScaleY:0})}}return l}(0,i,l,o,r,s,a,e.allowVerticalPlacement),v=e.textSizeData;let _=null;"source"===v.kind?(_=[fp*o.layout.get("text-size").evaluate(s,{},g)],_[0]>Wf&&V(`${e.layerIds[0]}: Value for "text-size" is >= ${Hf}. Reduce your "text-size".`)):"composite"===v.kind&&(_=[fp*m.compositeTextSizes[0].evaluate(s,{},g),fp*m.compositeTextSizes[1].evaluate(s,{},g)],(_[0]>Wf||_[1]>Wf)&&V(`${e.layerIds[0]}: Value for "text-size" is >= ${Hf}. Reduce your "text-size".`)),e.addSymbols(e.text,y,_,l,r,s,u,t,n,c.lineStartIndex,c.lineLength,f,h,g);for(const t of d)p[t]=e.text.placedSymbolArray.length-1;return 4*y.length}function Vf(e){for(const t in e)return e[t];return null}function Gf(e,t,n,i,a,o,r,s,l,c){let u=r.top,d=r.bottom,p=r.left,f=r.right;const m=r.collisionPadding;if(m&&(p-=m[0],u-=m[1],f+=m[2],d+=m[3]),l){const e=new b(p,u),t=new b(f,u),n=new b(p,d),i=new b(f,d),a=x(l);let o=new b(0,0);c&&(o=new b(c[0],c[1])),e._rotateAround(a,o),t._rotateAround(a,o),n._rotateAround(a,o),i._rotateAround(a,o),p=Math.min(e.x,t.x,n.x,i.x),f=Math.max(e.x,t.x,n.x,i.x),u=Math.min(e.y,t.y,n.y,i.y),d=Math.max(e.y,t.y,n.y,i.y)}return e.emplaceBack(t.x,t.y,t.z,n.x,n.y,p,u,f,d,s,i,a,o),e.length-1}function Yf(e){e.collisionPadding&&(e.top-=e.collisionPadding[1],e.bottom+=e.collisionPadding[3]);const t=e.bottom-e.top;return t>0?Math.max(10,t):null}function Xf(e,t,n,i){const a=e.compareText;if(t in a){const e=a[t];for(let t=e.length-1;t>=0;t--)if(i.dist(e[t])<n)return!0}else a[t]=[];return a[t].push(i),!1}function Zf(e,t){const n=e.fovAboveCenter,i=e.elevation?e.elevation.getMinElevationBelowMSL()*t:0,a=(e._camera.position[2]*e.worldSize-i)/Math.cos(e._pitch),o=Math.sin(n)*a/Math.sin(Math.max(Math.PI/2-e._pitch-n,.01)),r=Math.sin(e._pitch)*o+a;return Math.min(1.01*r,a*(1/e._horizonShift))}function Jf(e,t){if(!t.isReprojectedInTileSpace)return{scale:1<<e.z,x:e.x,y:e.y,x2:e.x+1,y2:e.y+1,projection:t};const n=Math.pow(2,-e.z),i=e.x*n,a=(e.x+1)*n,o=e.y*n,r=(e.y+1)*n,s=kc(i),l=kc(a),c=Oc(o),u=Oc(r),d=t.project(s,c),p=t.project(l,c),f=t.project(l,u),m=t.project(s,u);let h=Math.min(d.x,p.x,f.x,m.x),g=Math.min(d.y,p.y,f.y,m.y),y=Math.max(d.x,p.x,f.x,m.x),v=Math.max(d.y,p.y,f.y,m.y);const b=n/16;function _(e,n,i,a,o,r){const s=(i+o)/2,l=(a+r)/2,c=t.project(kc(s),Oc(l)),u=Math.max(0,h-c.x,g-c.y,c.x-y,c.y-v);h=Math.min(h,c.x),y=Math.max(y,c.x),g=Math.min(g,c.y),v=Math.max(v,c.y),u>b&&(_(e,c,i,a,s,l),_(c,n,s,l,o,r))}_(d,p,i,o,a,o),_(p,f,a,o,a,r),_(f,m,a,r,i,r),_(m,d,i,r,i,o),h-=b,g-=b,y+=b,v+=b;const w=1/Math.max(y-h,v-g);return{scale:w,x:h*w,y:g*w,x2:y*w,y2:v*w,projection:t}}const Kf=Xs(new Float32Array(16));class $f{constructor(e){this.spec=e,this.name=e.name,this.wrap=!1,this.requiresDraping=!1,this.supportsWorldCopies=!1,this.supportsTerrain=!1,this.supportsFog=!1,this.supportsFreeCamera=!1,this.zAxisUnit="meters",this.isReprojectedInTileSpace=!0,this.unsupportedLayers=["custom"],this.center=[0,0],this.range=[3.5,7]}project(e,t){return{x:0,y:0,z:0}}unproject(e,t){return new vc(0,0)}projectTilePoint(e,t,n){return{x:e,y:t,z:0}}locationPoint(e,t,n=!0){return e._coordinatePoint(e.locationCoordinate(t),n)}pixelsPerMeter(e,t){return xc(1,e)*t}pixelSpaceConversion(e,t,n){return 1}farthestPixelDistance(e){return Zf(e,e.pixelsPerMeter)}pointCoordinate(e,t,n,i){const a=e.horizonLineFromTop(!1),o=new b(t,Math.max(a,n));return e.rayIntersectionCoordinate(e.pointRayIntersection(o,i))}pointCoordinate3D(e,t,n){const i=new b(t,n);if(e.elevation)return e.elevation.pointCoordinate(i);{const t=this.pointCoordinate(e,i.x,i.y,0);return[t.x,t.y,t.z]}}isPointAboveHorizon(e,t){if(e.elevation)return!this.pointCoordinate3D(e,t.x,t.y);const n=e.horizonLineFromTop();return t.y<n}createInversionMatrix(e,t){return Kf}createTileMatrix(e,t,n){let i,a,o;const r=n.canonical,s=Xs(new Float64Array(16));if(this.isReprojectedInTileSpace){const l=Jf(r,this);i=1,a=l.x+n.wrap*l.scale,o=l.y,$s(s,s,[i/l.scale,i/l.scale,e.pixelsPerMeter/t])}else i=t/e.zoomScale(r.z),a=(r.x+Math.pow(2,r.z)*n.wrap)*i,o=r.y*i;return Ks(s,s,[a,o,0]),$s(s,s,[i/Hs,i/Hs,1]),s}upVector(e,t,n){return[0,0,1]}upVectorScale(e,t,n){return{metersToTile:1}}}class Qf extends $f{constructor(e){super(e),this.range=[4,7],this.center=e.center||[-96,37.5];const[t,n]=this.parallels=e.parallels||[29.5,45.5],i=Math.sin(x(t));this.n=(i+Math.sin(x(n)))/2,this.c=1+i*(2*this.n-i),this.r0=Math.sqrt(this.c)/this.n}project(e,t){const{n:n,c:i,r0:a}=this,o=x(e-this.center[0]),r=x(t),s=Math.sqrt(i-2*n*Math.sin(r))/n;return{x:s*Math.sin(o*n),y:s*Math.cos(o*n)-a,z:0}}unproject(e,t){const{n:n,c:i,r0:a}=this,o=a+t;let r=Math.atan2(e,Math.abs(o))*Math.sign(o);o*n<0&&(r-=Math.PI*Math.sign(e)*Math.sign(o));const s=x(this.center[0])*n;r=I(r,-Math.PI-s,Math.PI-s);const l=S(k(r/n)+this.center[0],-180,180),c=Math.asin(S((i-(e*e+o*o)*n*n)/(2*n),-1,1)),u=S(k(c),-Cc,Cc);return new vc(l,u)}}const em=1.340264,tm=-.081106,nm=893e-6,im=.003796,am=Math.sqrt(3)/2;class om extends $f{project(e,t){t=t/180*Math.PI,e=e/180*Math.PI;const n=Math.asin(am*Math.sin(t)),i=n*n,a=i*i*i;return{x:.5*(e*Math.cos(n)/(am*(em+3*tm*i+a*(7*nm+9*im*i)))/Math.PI+.5),y:1-.5*(n*(em+tm*i+a*(nm+im*i))/Math.PI+1),z:0}}unproject(e,t){e=(2*e-.5)*Math.PI;let n=t=(2*(1-t)-1)*Math.PI,i=n*n,a=i*i*i;for(let e,o,r,s=0;s<12&&(o=n*(em+tm*i+a*(nm+im*i))-t,r=em+3*tm*i+a*(7*nm+9*im*i),e=o/r,n=S(n-e,-Math.PI/3,Math.PI/3),i=n*n,a=i*i*i,!(Math.abs(e)<1e-12));++s);const o=am*e*(em+3*tm*i+a*(7*nm+9*im*i))/Math.cos(n),r=Math.asin(Math.sin(n)/am),s=S(180*o/Math.PI,-180,180),l=S(180*r/Math.PI,-Cc,Cc);return new vc(s,l)}}class rm extends $f{constructor(e){super(e),this.wrap=!0,this.supportsWorldCopies=!0}project(e,t){return{x:.5+e/360,y:.5-t/360,z:0}}unproject(e,t){const n=360*(e-.5),i=S(360*(.5-t),-Cc,Cc);return new vc(n,i)}}const sm=Math.PI/2;function lm(e){return Math.tan((sm+e)/2)}class cm extends $f{constructor(e){super(e),this.center=e.center||[0,30];const[t,n]=this.parallels=e.parallels||[30,30];let i=x(t),a=x(n);this.southernCenter=i+a<0,this.southernCenter&&(i=-i,a=-a);const o=Math.cos(i),r=lm(i);this.n=i===a?Math.sin(i):Math.log(o/Math.cos(a))/Math.log(lm(a)/r),this.f=o*Math.pow(lm(i),this.n)/this.n}project(e,t){t=x(t),this.southernCenter&&(t=-t),e=x(e-this.center[0]);const n=1e-6,{n:i,f:a}=this;a>0?t<-sm+n&&(t=-sm+n):t>sm-n&&(t=sm-n);const o=a/Math.pow(lm(t),i);let r=o*Math.sin(i*e),s=a-o*Math.cos(i*e);return r=.5*(r/Math.PI+.5),s=.5*(s/Math.PI+.5),{x:r,y:this.southernCenter?s:1-s,z:0}}unproject(e,t){e=(2*e-.5)*Math.PI,this.southernCenter&&(t=1-t),t=(2*(1-t)-.5)*Math.PI;const{n:n,f:i}=this,a=i-t,o=Math.sign(a),r=Math.sign(n)*Math.sqrt(e*e+a*a);let s=Math.atan2(e,Math.abs(a))*o;a*n<0&&(s-=Math.PI*Math.sign(e)*o);const l=S(k(s/n)+this.center[0],-180,180),c=S(k(2*Math.atan(Math.pow(i/r,1/n))-sm),-Cc,Cc);return new vc(l,this.southernCenter?-c:c)}}class um extends $f{constructor(e){super(e),this.wrap=!0,this.supportsWorldCopies=!0,this.supportsTerrain=!0,this.supportsFog=!0,this.supportsFreeCamera=!0,this.isReprojectedInTileSpace=!1,this.unsupportedLayers=[],this.range=null}project(e,t){return{x:_c(e),y:wc(t),z:0}}unproject(e,t){const n=kc(e),i=Oc(t);return new vc(n,i)}}const dm=x(Cc);class pm extends $f{project(e,t){const n=(t=x(t))*t,i=n*n;return{x:.5*((e=x(e))*(.8707-.131979*n+i*(i*(.003971*n-.001529*i)-.013791))/Math.PI+.5),y:1-.5*(t*(1.007226+n*(.015085+i*(.028874*n-.044475-.005916*i)))/Math.PI+1),z:0}}unproject(e,t){e=(2*e-.5)*Math.PI;let n=t=(2*(1-t)-1)*Math.PI,i=25,a=0,o=n*n;do{o=n*n;const e=o*o;a=(n*(1.007226+o*(.015085+e*(.028874*o-.044475-.005916*e)))-t)/(1.007226+o*(.045255+e*(.259866*o-.311325-.005916*11*e))),n=S(n-a,-dm,dm)}while(Math.abs(a)>1e-6&&--i>0);o=n*n;const r=S(k(e/(.8707+o*(o*(o*o*o*(.003971-.001529*o)-.013791)-.131979))),-180,180),s=k(n);return new vc(r,s)}}const fm=x(Cc);class mm extends $f{project(e,t){t=x(t),e=x(e);const n=Math.cos(t),i=2/Math.PI,a=Math.acos(n*Math.cos(e/2)),o=Math.sin(a)/a,r=.5*(e*i+2*n*Math.sin(e/2)/o)||0,s=.5*(t+Math.sin(t)/o)||0;return{x:.5*(r/Math.PI+.5),y:1-.5*(s/Math.PI+1),z:0}}unproject(e,t){let n=e=(2*e-.5)*Math.PI,i=t=(2*(1-t)-1)*Math.PI,a=25;const o=1e-6;let r=0,s=0;do{const a=Math.cos(i),o=Math.sin(i),l=2*o*a,c=o*o,u=a*a,d=Math.cos(n/2),p=Math.sin(n/2),f=2*d*p,m=p*p,h=1-u*d*d,g=h?1/h:0,y=h?Math.acos(a*d)*Math.sqrt(1/h):0,v=.5*(2*y*a*p+2*n/Math.PI)-e,b=.5*(y*o+i)-t,_=.5*g*(u*m+y*a*d*c)+1/Math.PI,w=g*(f*l/4-y*o*p),x=.125*g*(l*p-y*o*u*f),k=.5*g*(c*d+y*m*a)+.5,O=w*x-k*_;r=(b*w-v*k)/O,s=(v*x-b*_)/O,n=S(n-r,-Math.PI,Math.PI),i=S(i-s,-fm,fm)}while((Math.abs(r)>o||Math.abs(s)>o)&&--a>0);return new vc(k(n),k(i))}}class hm extends $f{constructor(e){super(e),this.center=e.center||[0,0],this.parallels=e.parallels||[0,0],this.cosPhi=Math.max(.01,Math.cos(x(this.parallels[0]))),this.scale=1/(2*Math.max(Math.PI*this.cosPhi,1/this.cosPhi)),this.wrap=!0,this.supportsWorldCopies=!0}project(e,t){const{scale:n,cosPhi:i}=this;return{x:x(e)*i*n+.5,y:-Math.sin(x(t))/i*n+.5,z:0}}unproject(e,t){const{scale:n,cosPhi:i}=this,a=-(t-.5)/n,o=S(k((e-.5)/n)/i,-180,180),r=Math.asin(S(a*i,-1,1)),s=S(k(r),-Cc,Cc);return new vc(o,s)}}class gm extends um{constructor(e){super(e),this.requiresDraping=!0,this.supportsWorldCopies=!1,this.supportsFog=!0,this.zAxisUnit="pixels",this.unsupportedLayers=["debug"],this.range=[3,5]}projectTilePoint(e,t,n){const i=ic(e,t,n);return vl(i,i,rc(Zl(n))),{x:i[0],y:i[1],z:i[2]}}locationPoint(e,t){const n=nc(t.lat,t.lng),i=hl([],n),a=e.elevation?e.elevation.getAtPointOrZero(e.locationCoordinate(t),e._centerAltitude):e._centerAltitude;ml(n,n,i,xc(1,0)*Hs*a);const o=Xs(new Float64Array(16));return Js(o,e.pixelMatrix,e.globeMatrix),vl(n,n,o),new b(n[0],n[1])}pixelsPerMeter(e,t){return xc(1,0)*t}pixelSpaceConversion(e,t,n){const i=xc(1,e)*t,a=An(xc(1,45)*t,i,n);return this.pixelsPerMeter(e,t)/a}createTileMatrix(e,t,n){const i=sc(Zl(n.canonical));return Js(new Float64Array(16),e.globeMatrix,i)}createInversionMatrix(e,t){const{center:n}=e,i=rc(Zl(t));return el(i,i,x(n.lng)),Qs(i,i,x(n.lat)),$s(i,i,[e._pixelsPerMercatorPixel,e._pixelsPerMercatorPixel,1]),Float32Array.from(i)}pointCoordinate(e,t,n,i){return Gl(e,t,n,!0)||new Sc(0,0)}pointCoordinate3D(e,t,n){const i=this.pointCoordinate(e,t,n,0);return[i.x,i.y,i.z]}isPointAboveHorizon(e,t){return!Gl(e,t.x,t.y,!1)}farthestPixelDistance(e){const t=function(e,t){const n=e.cameraToCenterDistance,i=e._centerAltitude*t,a=e._camera,o=e._camera.forward(),r=ll([],fl([],o,-n),[0,0,i]),s=e.worldSize/(2*Math.PI),l=[0,0,-s],c=e.width/e.height,u=Math.tan(e.fovAboveCenter),d=fl([],a.up(),u),p=fl([],a.right(),u*c),f=hl([],ll([],ll([],o,d),p)),m=[];let h;if(new Dl(r,f).closestPointOnSphere(l,s,m)){const t=ll([],m,l),n=wl([],t,r);h=Math.cos(e.fovAboveCenter)*rl(n)}else{const e=wl([],r,l),t=wl([],l,r);hl(t,t);const n=rl(e)-s;h=Math.sqrt(n*(n+2*s));const i=Math.acos(h/(s+n))-Math.acos(gl(o,t));h*=Math.cos(i)}return 1.01*h}(e,this.pixelsPerMeter(e.center.lat,e.worldSize)),n=cc(e.zoom);if(n>0){const i=Zf(e,xc(1,e.center.lat)*e.worldSize),a=e.worldSize/(2*Math.PI),o=Math.max(e.width,e.height)/e.worldSize*Math.PI;return An(t,i+a*(1-Math.cos(o)),Math.pow(n,10))}return t}upVector(e,t,n){return ic(t,n,e,1)}upVectorScale(e){return{metersToTile:Vl(ac(Zl(e)))}}}function ym(e){const t=e.parallels,n=!!t&&Math.abs(t[0]+t[1])<.01;switch(e.name){case"mercator":return new um(e);case"equirectangular":return new rm(e);case"naturalEarth":return new pm(e);case"equalEarth":return new om(e);case"winkelTripel":return new mm(e);case"albers":return n?new hm(e):new Qf(e);case"lambertConformalConic":return n?new hm(e):new cm(e);case"globe":return new gm(e)}throw new Error("Invalid projection name: "+e.name)}const vm=xd.types,bm=[{name:"a_fade_opacity",components:1,type:"Uint8",offset:0}];function _m(e,t,n,i,a,o,r,s,l,c,u,d,p){const f=s?Math.min(Wf,Math.round(s[0])):0,m=s?Math.min(Wf,Math.round(s[1])):0;e.emplaceBack(t,n,Math.round(32*i),Math.round(32*a),o,r,(f<<1)+(l?1:0),m,16*c,16*u,256*d,256*p)}function wm(e,t,n,i,a,o,r){e.emplaceBack(t,n,i,a,o,r)}function xm(e,t,n,i,a){e.emplaceBack(t,n,i,a),e.emplaceBack(t,n,i,a),e.emplaceBack(t,n,i,a),e.emplaceBack(t,n,i,a)}function km(e){for(const t of e.sections)if(Vo(t.text))return!0;return!1}class Om{constructor(e){this.layoutVertexArray=new Mr,this.indexArray=new zr,this.programConfigurations=e,this.segments=new Us,this.dynamicLayoutVertexArray=new Er,this.opacityVertexArray=new jr,this.placedSymbolArray=new Kr,this.globeExtVertexArray=new Ar}isEmpty(){return 0===this.layoutVertexArray.length&&0===this.indexArray.length&&0===this.dynamicLayoutVertexArray.length&&0===this.opacityVertexArray.length}upload(e,t,n,i){this.isEmpty()||(n&&(this.layoutVertexBuffer=e.createVertexBuffer(this.layoutVertexArray,rp.members),this.indexBuffer=e.createIndexBuffer(this.indexArray,t),this.dynamicLayoutVertexBuffer=e.createVertexBuffer(this.dynamicLayoutVertexArray,lp.members,!0),this.opacityVertexBuffer=e.createVertexBuffer(this.opacityVertexArray,bm,!0),this.globeExtVertexArray.length>0&&(this.globeExtVertexBuffer=e.createVertexBuffer(this.globeExtVertexArray,sp.members,!0)),this.opacityVertexBuffer.itemSize=1),(n||i)&&this.programConfigurations.upload(e))}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.dynamicLayoutVertexBuffer.destroy(),this.opacityVertexBuffer.destroy(),this.globeExtVertexBuffer&&this.globeExtVertexBuffer.destroy())}}Ba(Om,"SymbolBuffers");class Tm{constructor(e,t,n){this.layoutVertexArray=new e,this.layoutAttributes=t,this.indexArray=new n,this.segments=new Us,this.collisionVertexArray=new Rr,this.collisionVertexArrayExt=new Br}upload(e){this.layoutVertexBuffer=e.createVertexBuffer(this.layoutVertexArray,this.layoutAttributes),this.indexBuffer=e.createIndexBuffer(this.indexArray),this.collisionVertexBuffer=e.createVertexBuffer(this.collisionVertexArray,cp.members,!0),this.collisionVertexBufferExt=e.createVertexBuffer(this.collisionVertexArrayExt,up.members,!0)}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.segments.destroy(),this.collisionVertexBuffer.destroy(),this.collisionVertexBufferExt.destroy())}}Ba(Tm,"CollisionBuffers");class Cm{constructor(e){this.collisionBoxArray=e.collisionBoxArray,this.zoom=e.zoom,this.overscaling=e.overscaling,this.layers=e.layers,this.layerIds=this.layers.map(e=>e.id),this.index=e.index,this.pixelRatio=e.pixelRatio,this.sourceLayerIndex=e.sourceLayerIndex,this.hasPattern=!1,this.hasRTLText=!1,this.fullyClipped=!1,this.sortKeyRanges=[],this.collisionCircleArray=[],this.placementInvProjMatrix=Xs([]),this.placementViewportMatrix=Xs([]);const t=this.layers[0]._unevaluatedLayout._values;this.textSizeData=mp(this.zoom,t["text-size"]),this.iconSizeData=mp(this.zoom,t["icon-size"]);const n=this.layers[0].layout,i=n.get("symbol-sort-key"),a=n.get("symbol-z-order");this.canOverlap=n.get("text-allow-overlap")||n.get("icon-allow-overlap")||n.get("text-ignore-placement")||n.get("icon-ignore-placement"),this.sortFeaturesByKey="viewport-y"!==a&&void 0!==i.constantOr(1),this.sortFeaturesByY=("viewport-y"===a||"auto"===a&&!this.sortFeaturesByKey)&&this.canOverlap,this.writingModes=n.get("text-writing-mode").map(e=>Kp[e]),this.stateDependentLayerIds=this.layers.filter(e=>e.isStateDependent()).map(e=>e.id),this.sourceID=e.sourceID,this.projection=e.projection}createArrays(){this.text=new Om(new Ms(this.layers,this.zoom,e=>/^text/.test(e))),this.icon=new Om(new Ms(this.layers,this.zoom,e=>/^icon/.test(e))),this.glyphOffsetArray=new es,this.lineVertexArray=new ts,this.symbolInstances=new Qr}calculateGlyphDependencies(e,t,n,i,a){for(let n=0;n<e.length;n++)if(t[e.charCodeAt(n)]=!0,i&&a){const i=bp[e.charAt(n)];i&&(t[i.charCodeAt(0)]=!0)}}populate(e,t,n,i){const a=this.layers[0],o=a.layout,r="globe"===this.projection.name,s=o.get("text-font"),l=o.get("text-field"),c=o.get("icon-image"),u=("constant"!==l.value.kind||l.value.value instanceof Lt&&!l.value.value.isEmpty()||l.value.value.toString().length>0)&&("constant"!==s.value.kind||s.value.value.length>0),d="constant"!==c.value.kind||!!c.value.value||Object.keys(c.parameters).length>0,p=o.get("symbol-sort-key");if(this.features=[],!u&&!d)return;const f=t.iconDependencies,m=t.glyphDependencies,h=t.availableImages,g=new ar(this.zoom);for(const{feature:t,id:l,index:c,sourceLayerIndex:y}of e){const e=a._featureFilter.needGeometry,v=Rc(t,e);if(!a._featureFilter.filter(g,v,n))continue;if(e||(v.geometry=Dc(t,n,i)),r&&1!==t.type&&n.z<=5){const e=v.geometry,t=.98078528056,i=(e,i)=>gl(ic(e.x,e.y,n,1),ic(i.x,i.y,n,1))<t;for(let t=0;t<e.length;t++)e[t]=Ac(e[t],i)}let b,_;if(u){const e=a.getValueAndResolveTokens("text-field",v,n,h),t=Lt.factory(e);km(t)&&(this.hasRTLText=!0),(!this.hasRTLText||"unavailable"===tr()||this.hasRTLText&&ir.isParsed())&&(b=vp(t,a,v))}if(d){const e=a.getValueAndResolveTokens("icon-image",v,n,h);_=e instanceof Dt?e:Dt.fromString(e)}if(!b&&!_)continue;const w=this.sortFeaturesByKey?p.evaluate(v,{},n):void 0;if(this.features.push({id:l,text:b,icon:_,index:c,sourceLayerIndex:y,geometry:v.geometry,properties:t.properties,type:vm[t.type],sortKey:w}),_&&(f[_.name]=!0),b){const e=s.evaluate(v,{},n).join(","),t="map"===o.get("text-rotation-alignment")&&"point"!==o.get("symbol-placement");this.allowVerticalPlacement=this.writingModes&&this.writingModes.indexOf(Kp.vertical)>=0;for(const n of b.sections)if(n.image)f[n.image.name]=!0;else{const i=Bo(b.toString()),a=n.fontStack||e,o=m[a]=m[a]||{};this.calculateGlyphDependencies(n.text,o,t,this.allowVerticalPlacement,i)}}}"line"===o.get("symbol-placement")&&(this.features=function(e){const t={},n={},i=[];let a=0;function o(t){i.push(e[t]),a++}function r(e,t,a){const o=n[e];return delete n[e],n[t]=o,i[o].geometry[0].pop(),i[o].geometry[0]=i[o].geometry[0].concat(a[0]),o}function s(e,n,a){const o=t[n];return delete t[n],t[e]=o,i[o].geometry[0].shift(),i[o].geometry[0]=a[0].concat(i[o].geometry[0]),o}function l(e,t,n){const i=n?t[0][t[0].length-1]:t[0][0];return`${e}:${i.x}:${i.y}`}for(let c=0;c<e.length;c++){const u=e[c],d=u.geometry,p=u.text?u.text.toString():null;if(!p){o(c);continue}const f=l(p,d),m=l(p,d,!0);if(f in n&&m in t&&n[f]!==t[m]){const e=s(f,m,d),a=r(f,m,i[e].geometry);delete t[f],delete n[m],n[l(p,i[a].geometry,!0)]=a,i[e].geometry=null}else f in n?r(f,m,d):m in t?s(f,m,d):(o(c),t[f]=a-1,n[m]=a-1)}return i.filter(e=>e.geometry)}(this.features)),this.sortFeaturesByKey&&this.features.sort((e,t)=>e.sortKey-t.sortKey)}update(e,t,n,i){this.stateDependentLayers.length&&(this.text.programConfigurations.updatePaintArrays(e,t,this.layers,n,i),this.icon.programConfigurations.updatePaintArrays(e,t,this.layers,n,i))}isEmpty(){return 0===this.symbolInstances.length&&!this.hasRTLText}uploadPending(){return!this.uploaded||this.text.programConfigurations.needsUpload||this.icon.programConfigurations.needsUpload}upload(e){!this.uploaded&&this.hasDebugData()&&(this.textCollisionBox.upload(e),this.iconCollisionBox.upload(e)),this.text.upload(e,this.sortFeaturesByY,!this.uploaded,this.text.programConfigurations.needsUpload),this.icon.upload(e,this.sortFeaturesByY,!this.uploaded,this.icon.programConfigurations.needsUpload),this.uploaded=!0}destroyDebugData(){this.textCollisionBox.destroy(),this.iconCollisionBox.destroy()}getProjection(){return this.projectionInstance||(this.projectionInstance=ym(this.projection)),this.projectionInstance}destroy(){this.text.destroy(),this.icon.destroy(),this.hasDebugData()&&this.destroyDebugData()}addToLineVertexArray(e,t){const n=this.lineVertexArray.length;if(void 0!==e.segment)for(const{x:e,y:n}of t)this.lineVertexArray.emplaceBack(e,n);return{lineStartIndex:n,lineLength:this.lineVertexArray.length-n}}addSymbols(e,t,n,i,a,o,r,s,l,c,u,d,p,f){const m=e.indexArray,h=e.layoutVertexArray,g=e.globeExtVertexArray,y=e.segments.prepareSegment(4*t.length,h,m,this.canOverlap?o.sortKey:void 0),v=this.glyphOffsetArray.length,b=y.vertexLength,_=this.allowVerticalPlacement&&r===Kp.vertical?Math.PI/2:0,w=o.text&&o.text.sections;for(let i=0;i<t.length;i++){const{tl:a,tr:r,bl:c,br:u,tex:d,pixelOffsetTL:v,pixelOffsetBR:b,minFontScaleX:x,minFontScaleY:k,glyphOffset:O,isSDF:T,sectionIndex:C}=t[i],E=y.vertexLength,S=O[1];if(_m(h,l.x,l.y,a.x,S+a.y,d.x,d.y,n,T,v.x,v.y,x,k),_m(h,l.x,l.y,r.x,S+r.y,d.x+d.w,d.y,n,T,b.x,v.y,x,k),_m(h,l.x,l.y,c.x,S+c.y,d.x,d.y+d.h,n,T,v.x,b.y,x,k),_m(h,l.x,l.y,u.x,S+u.y,d.x+d.w,d.y+d.h,n,T,b.x,b.y,x,k),s){const{x:t,y:n,z:i}=s.anchor,[a,o,r]=s.up;wm(g,t,n,i,a,o,r),wm(g,t,n,i,a,o,r),wm(g,t,n,i,a,o,r),wm(g,t,n,i,a,o,r),xm(e.dynamicLayoutVertexArray,t,n,i,_)}else xm(e.dynamicLayoutVertexArray,l.x,l.y,l.z,_);m.emplaceBack(E,E+1,E+2),m.emplaceBack(E+1,E+2,E+3),y.vertexLength+=4,y.primitiveLength+=2,this.glyphOffsetArray.emplaceBack(O[0]),i!==t.length-1&&C===t[i+1].sectionIndex||e.programConfigurations.populatePaintArrays(h.length,o,o.index,{},p,f,w&&w[C])}const x=s?s.anchor:l;e.placedSymbolArray.emplaceBack(x.x,x.y,x.z,l.x,l.y,v,this.glyphOffsetArray.length-v,b,c,u,l.segment,n?n[0]:0,n?n[1]:0,i[0],i[1],r,0,!1,0,d,0)}_commitLayoutVertex(e,t,n,i,a,o,r){e.emplaceBack(t,n,i,a,o,Math.round(r.x),Math.round(r.y))}_addCollisionDebugVertices(e,t,n,i,a,o,r){const s=n.segments.prepareSegment(4,n.layoutVertexArray,n.indexArray),l=s.vertexLength,c=r.tileAnchorX,u=r.tileAnchorY;for(let e=0;e<4;e++)n.collisionVertexArray.emplaceBack(0,0,0,0);n.collisionVertexArrayExt.emplaceBack(t,-e.padding,-e.padding),n.collisionVertexArrayExt.emplaceBack(t,e.padding,-e.padding),n.collisionVertexArrayExt.emplaceBack(t,e.padding,e.padding),n.collisionVertexArrayExt.emplaceBack(t,-e.padding,e.padding),this._commitLayoutVertex(n.layoutVertexArray,i,a,o,c,u,new b(e.x1,e.y1)),this._commitLayoutVertex(n.layoutVertexArray,i,a,o,c,u,new b(e.x2,e.y1)),this._commitLayoutVertex(n.layoutVertexArray,i,a,o,c,u,new b(e.x2,e.y2)),this._commitLayoutVertex(n.layoutVertexArray,i,a,o,c,u,new b(e.x1,e.y2)),s.vertexLength+=4;const d=n.indexArray;d.emplaceBack(l,l+1),d.emplaceBack(l+1,l+2),d.emplaceBack(l+2,l+3),d.emplaceBack(l+3,l),s.primitiveLength+=4}_addTextDebugCollisionBoxes(e,t,n,i,a,o){for(let r=i;r<a;r++){const i=n.get(r),a=this.getSymbolInstanceTextSize(e,o,t,r);this._addCollisionDebugVertices(i,a,this.textCollisionBox,i.projectedAnchorX,i.projectedAnchorY,i.projectedAnchorZ,o)}}_addIconDebugCollisionBoxes(e,t,n,i,a,o){for(let r=i;r<a;r++){const i=n.get(r),a=this.getSymbolInstanceIconSize(e,t,o.placedIconSymbolIndex);this._addCollisionDebugVertices(i,a,this.iconCollisionBox,i.projectedAnchorX,i.projectedAnchorY,i.projectedAnchorZ,o)}}generateCollisionDebugBuffers(e,t){this.hasDebugData()&&this.destroyDebugData(),this.textCollisionBox=new Tm(Lr,dp.members,Vr),this.iconCollisionBox=new Tm(Lr,dp.members,Vr);const n=gp(this.iconSizeData,e),i=gp(this.textSizeData,e);for(let a=0;a<this.symbolInstances.length;a++){const o=this.symbolInstances.get(a);this._addTextDebugCollisionBoxes(i,e,t,o.textBoxStartIndex,o.textBoxEndIndex,o),this._addTextDebugCollisionBoxes(i,e,t,o.verticalTextBoxStartIndex,o.verticalTextBoxEndIndex,o),this._addIconDebugCollisionBoxes(n,e,t,o.iconBoxStartIndex,o.iconBoxEndIndex,o),this._addIconDebugCollisionBoxes(n,e,t,o.verticalIconBoxStartIndex,o.verticalIconBoxEndIndex,o)}}getSymbolInstanceTextSize(e,t,n,i){const a=this.text.placedSymbolArray.get(t.rightJustifiedTextSymbolIndex>=0?t.rightJustifiedTextSymbolIndex:t.centerJustifiedTextSymbolIndex>=0?t.centerJustifiedTextSymbolIndex:t.leftJustifiedTextSymbolIndex>=0?t.leftJustifiedTextSymbolIndex:t.verticalPlacedTextSymbolIndex>=0?t.verticalPlacedTextSymbolIndex:i),o=hp(this.textSizeData,e,a)/24;return this.tilePixelRatio*o}getSymbolInstanceIconSize(e,t,n){const i=this.icon.placedSymbolArray.get(n),a=hp(this.iconSizeData,e,i);return this.tilePixelRatio*a}_commitDebugCollisionVertexUpdate(e,t,n){e.emplaceBack(t,-n,-n),e.emplaceBack(t,n,-n),e.emplaceBack(t,n,n),e.emplaceBack(t,-n,n)}_updateTextDebugCollisionBoxes(e,t,n,i,a,o){for(let r=i;r<a;r++){const i=n.get(r),a=this.getSymbolInstanceTextSize(e,o,t,r);this._commitDebugCollisionVertexUpdate(this.textCollisionBox.collisionVertexArrayExt,a,i.padding)}}_updateIconDebugCollisionBoxes(e,t,n,i,a,o){for(let r=i;r<a;r++){const i=n.get(r),a=this.getSymbolInstanceIconSize(e,t,o);this._commitDebugCollisionVertexUpdate(this.iconCollisionBox.collisionVertexArrayExt,a,i.padding)}}updateCollisionDebugBuffers(e,t){if(!this.hasDebugData())return;this.hasTextCollisionBoxData()&&this.textCollisionBox.collisionVertexArrayExt.clear(),this.hasIconCollisionBoxData()&&this.iconCollisionBox.collisionVertexArrayExt.clear();const n=gp(this.iconSizeData,e),i=gp(this.textSizeData,e);for(let a=0;a<this.symbolInstances.length;a++){const o=this.symbolInstances.get(a);this._updateTextDebugCollisionBoxes(i,e,t,o.textBoxStartIndex,o.textBoxEndIndex,o),this._updateTextDebugCollisionBoxes(i,e,t,o.verticalTextBoxStartIndex,o.verticalTextBoxEndIndex,o),this._updateIconDebugCollisionBoxes(n,e,t,o.iconBoxStartIndex,o.iconBoxEndIndex,o.placedIconSymbolIndex),this._updateIconDebugCollisionBoxes(n,e,t,o.verticalIconBoxStartIndex,o.verticalIconBoxEndIndex,o.placedIconSymbolIndex)}this.hasTextCollisionBoxData()&&this.textCollisionBox.collisionVertexBufferExt&&this.textCollisionBox.collisionVertexBufferExt.updateData(this.textCollisionBox.collisionVertexArrayExt),this.hasIconCollisionBoxData()&&this.iconCollisionBox.collisionVertexBufferExt&&this.iconCollisionBox.collisionVertexBufferExt.updateData(this.iconCollisionBox.collisionVertexArrayExt)}_deserializeCollisionBoxesForSymbol(e,t,n,i,a,o,r,s,l){const c={};if(t<n){const{x1:n,y1:i,x2:a,y2:o,padding:r,projectedAnchorX:s,projectedAnchorY:l,projectedAnchorZ:u,tileAnchorX:d,tileAnchorY:p,featureIndex:f}=e.get(t);c.textBox={x1:n,y1:i,x2:a,y2:o,padding:r,projectedAnchorX:s,projectedAnchorY:l,projectedAnchorZ:u,tileAnchorX:d,tileAnchorY:p},c.textFeatureIndex=f}if(i<a){const{x1:t,y1:n,x2:a,y2:o,padding:r,projectedAnchorX:s,projectedAnchorY:l,projectedAnchorZ:u,tileAnchorX:d,tileAnchorY:p,featureIndex:f}=e.get(i);c.verticalTextBox={x1:t,y1:n,x2:a,y2:o,padding:r,projectedAnchorX:s,projectedAnchorY:l,projectedAnchorZ:u,tileAnchorX:d,tileAnchorY:p},c.verticalTextFeatureIndex=f}if(o<r){const{x1:t,y1:n,x2:i,y2:a,padding:r,projectedAnchorX:s,projectedAnchorY:l,projectedAnchorZ:u,tileAnchorX:d,tileAnchorY:p,featureIndex:f}=e.get(o);c.iconBox={x1:t,y1:n,x2:i,y2:a,padding:r,projectedAnchorX:s,projectedAnchorY:l,projectedAnchorZ:u,tileAnchorX:d,tileAnchorY:p},c.iconFeatureIndex=f}if(s<l){const{x1:t,y1:n,x2:i,y2:a,padding:o,projectedAnchorX:r,projectedAnchorY:l,projectedAnchorZ:u,tileAnchorX:d,tileAnchorY:p,featureIndex:f}=e.get(s);c.verticalIconBox={x1:t,y1:n,x2:i,y2:a,padding:o,projectedAnchorX:r,projectedAnchorY:l,projectedAnchorZ:u,tileAnchorX:d,tileAnchorY:p},c.verticalIconFeatureIndex=f}return c}deserializeCollisionBoxes(e){this.collisionArrays=[];for(let t=0;t<this.symbolInstances.length;t++){const n=this.symbolInstances.get(t);this.collisionArrays.push(this._deserializeCollisionBoxesForSymbol(e,n.textBoxStartIndex,n.textBoxEndIndex,n.verticalTextBoxStartIndex,n.verticalTextBoxEndIndex,n.iconBoxStartIndex,n.iconBoxEndIndex,n.verticalIconBoxStartIndex,n.verticalIconBoxEndIndex))}}hasTextData(){return this.text.segments.get().length>0}hasIconData(){return this.icon.segments.get().length>0}hasDebugData(){return this.textCollisionBox&&this.iconCollisionBox}hasTextCollisionBoxData(){return this.hasDebugData()&&this.textCollisionBox.segments.get().length>0}hasIconCollisionBoxData(){return this.hasDebugData()&&this.iconCollisionBox.segments.get().length>0}addIndicesForPlacedSymbol(e,t){const n=e.placedSymbolArray.get(t),i=n.vertexStartIndex+4*n.numGlyphs;for(let t=n.vertexStartIndex;t<i;t+=4)e.indexArray.emplaceBack(t,t+1,t+2),e.indexArray.emplaceBack(t+1,t+2,t+3)}getSortedSymbolIndexes(e){if(this.sortedAngle===e&&void 0!==this.symbolInstanceIndexes)return this.symbolInstanceIndexes;const t=Math.sin(e),n=Math.cos(e),i=[],a=[],o=[];for(let e=0;e<this.symbolInstances.length;++e){o.push(e);const r=this.symbolInstances.get(e);i.push(0|Math.round(t*r.tileAnchorX+n*r.tileAnchorY)),a.push(r.featureIndex)}return o.sort((e,t)=>i[e]-i[t]||a[t]-a[e]),o}addToSortKeyRanges(e,t){const n=this.sortKeyRanges[this.sortKeyRanges.length-1];n&&n.sortKey===t?n.symbolInstanceEnd=e+1:this.sortKeyRanges.push({sortKey:t,symbolInstanceStart:e,symbolInstanceEnd:e+1})}sortFeatures(e){if(this.sortFeaturesByY&&this.sortedAngle!==e&&!(this.text.segments.get().length>1||this.icon.segments.get().length>1)){this.symbolInstanceIndexes=this.getSortedSymbolIndexes(e),this.sortedAngle=e,this.text.indexArray.clear(),this.icon.indexArray.clear(),this.featureSortOrder=[];for(const e of this.symbolInstanceIndexes){const t=this.symbolInstances.get(e);this.featureSortOrder.push(t.featureIndex);const{rightJustifiedTextSymbolIndex:n,centerJustifiedTextSymbolIndex:i,leftJustifiedTextSymbolIndex:a,verticalPlacedTextSymbolIndex:o,placedIconSymbolIndex:r,verticalPlacedIconSymbolIndex:s}=t;n>=0&&this.addIndicesForPlacedSymbol(this.text,n),i>=0&&i!==n&&this.addIndicesForPlacedSymbol(this.text,i),a>=0&&a!==i&&a!==n&&this.addIndicesForPlacedSymbol(this.text,a),o>=0&&this.addIndicesForPlacedSymbol(this.text,o),r>=0&&this.addIndicesForPlacedSymbol(this.icon,r),s>=0&&this.addIndicesForPlacedSymbol(this.icon,s)}this.text.indexBuffer&&this.text.indexBuffer.updateData(this.text.indexArray),this.icon.indexBuffer&&this.icon.indexBuffer.updateData(this.icon.indexArray)}}}Ba(Cm,"SymbolBucket",{omit:["layers","collisionBoxArray","features","compareText"]}),Cm.MAX_GLYPHS=65535,Cm.addDynamicAttributes=xm;const Em=new gr({"symbol-placement":new fr(tt.layout_symbol["symbol-placement"]),"symbol-spacing":new fr(tt.layout_symbol["symbol-spacing"]),"symbol-avoid-edges":new fr(tt.layout_symbol["symbol-avoid-edges"]),"symbol-sort-key":new mr(tt.layout_symbol["symbol-sort-key"]),"symbol-z-order":new fr(tt.layout_symbol["symbol-z-order"]),"icon-allow-overlap":new fr(tt.layout_symbol["icon-allow-overlap"]),"icon-ignore-placement":new fr(tt.layout_symbol["icon-ignore-placement"]),"icon-optional":new fr(tt.layout_symbol["icon-optional"]),"icon-rotation-alignment":new fr(tt.layout_symbol["icon-rotation-alignment"]),"icon-size":new mr(tt.layout_symbol["icon-size"]),"icon-text-fit":new fr(tt.layout_symbol["icon-text-fit"]),"icon-text-fit-padding":new fr(tt.layout_symbol["icon-text-fit-padding"]),"icon-image":new mr(tt.layout_symbol["icon-image"]),"icon-rotate":new mr(tt.layout_symbol["icon-rotate"]),"icon-padding":new fr(tt.layout_symbol["icon-padding"]),"icon-keep-upright":new fr(tt.layout_symbol["icon-keep-upright"]),"icon-offset":new mr(tt.layout_symbol["icon-offset"]),"icon-anchor":new mr(tt.layout_symbol["icon-anchor"]),"icon-pitch-alignment":new fr(tt.layout_symbol["icon-pitch-alignment"]),"text-pitch-alignment":new fr(tt.layout_symbol["text-pitch-alignment"]),"text-rotation-alignment":new fr(tt.layout_symbol["text-rotation-alignment"]),"text-field":new mr(tt.layout_symbol["text-field"]),"text-font":new mr(tt.layout_symbol["text-font"]),"text-size":new mr(tt.layout_symbol["text-size"]),"text-max-width":new mr(tt.layout_symbol["text-max-width"]),"text-line-height":new mr(tt.layout_symbol["text-line-height"]),"text-letter-spacing":new mr(tt.layout_symbol["text-letter-spacing"]),"text-justify":new mr(tt.layout_symbol["text-justify"]),"text-radial-offset":new mr(tt.layout_symbol["text-radial-offset"]),"text-variable-anchor":new fr(tt.layout_symbol["text-variable-anchor"]),"text-anchor":new mr(tt.layout_symbol["text-anchor"]),"text-max-angle":new fr(tt.layout_symbol["text-max-angle"]),"text-writing-mode":new fr(tt.layout_symbol["text-writing-mode"]),"text-rotate":new mr(tt.layout_symbol["text-rotate"]),"text-padding":new fr(tt.layout_symbol["text-padding"]),"text-keep-upright":new fr(tt.layout_symbol["text-keep-upright"]),"text-transform":new mr(tt.layout_symbol["text-transform"]),"text-offset":new mr(tt.layout_symbol["text-offset"]),"text-allow-overlap":new fr(tt.layout_symbol["text-allow-overlap"]),"text-ignore-placement":new fr(tt.layout_symbol["text-ignore-placement"]),"text-optional":new fr(tt.layout_symbol["text-optional"])});var Sm={paint:new gr({"icon-opacity":new mr(tt.paint_symbol["icon-opacity"]),"icon-color":new mr(tt.paint_symbol["icon-color"]),"icon-halo-color":new mr(tt.paint_symbol["icon-halo-color"]),"icon-halo-width":new mr(tt.paint_symbol["icon-halo-width"]),"icon-halo-blur":new mr(tt.paint_symbol["icon-halo-blur"]),"icon-translate":new fr(tt.paint_symbol["icon-translate"]),"icon-translate-anchor":new fr(tt.paint_symbol["icon-translate-anchor"]),"text-opacity":new mr(tt.paint_symbol["text-opacity"]),"text-color":new mr(tt.paint_symbol["text-color"],{runtimeType:ft,getOverride:e=>e.textColor,hasOverride:e=>!!e.textColor}),"text-halo-color":new mr(tt.paint_symbol["text-halo-color"]),"text-halo-width":new mr(tt.paint_symbol["text-halo-width"]),"text-halo-blur":new mr(tt.paint_symbol["text-halo-blur"]),"text-translate":new fr(tt.paint_symbol["text-translate"]),"text-translate-anchor":new fr(tt.paint_symbol["text-translate-anchor"])}),layout:Em};class Pm{constructor(e){this.type=e.property.overrides?e.property.overrides.runtimeType:ct,this.defaultValue=e}evaluate(e){if(e.formattedSection){const t=this.defaultValue.property.overrides;if(t&&t.hasOverride(e.formattedSection))return t.getOverride(e.formattedSection)}return e.feature&&e.featureState?this.defaultValue.evaluate(e.feature,e.featureState):this.defaultValue.property.specification.default}eachChild(e){this.defaultValue.isConstant()||e(this.defaultValue.value._styleExpression.expression)}outputDefined(){return!1}serialize(){return null}}Ba(Pm,"FormatSectionOverride",{omit:["defaultValue"]});class Im extends Bs{constructor(e){super(e,Sm)}recalculate(e,t){super.recalculate(e,t),"auto"===this.layout.get("icon-rotation-alignment")&&(this.layout._values["icon-rotation-alignment"]="point"!==this.layout.get("symbol-placement")?"map":"viewport"),"auto"===this.layout.get("text-rotation-alignment")&&(this.layout._values["text-rotation-alignment"]="point"!==this.layout.get("symbol-placement")?"map":"viewport"),"auto"===this.layout.get("text-pitch-alignment")&&(this.layout._values["text-pitch-alignment"]=this.layout.get("text-rotation-alignment")),"auto"===this.layout.get("icon-pitch-alignment")&&(this.layout._values["icon-pitch-alignment"]=this.layout.get("icon-rotation-alignment"));const n=this.layout.get("text-writing-mode");if(n){const e=[];for(const t of n)e.indexOf(t)<0&&e.push(t);this.layout._values["text-writing-mode"]=e}else this.layout._values["text-writing-mode"]="point"===this.layout.get("symbol-placement")?["horizontal"]:["horizontal","vertical"];this._setPaintOverrides()}getValueAndResolveTokens(e,t,n,i){const a=this.layout.get(e).evaluate(t,{},n,i),o=this._unevaluatedLayout._values[e];return o.isDataDriven()||qi(o.value)||!a?a:function(e,t){return t.replace(/{([^{}]+)}/g,(t,n)=>n in e?String(e[n]):"")}(t.properties,a)}createBucket(e){return new Cm(e)}queryRadius(){return 0}queryIntersectsFeature(){return!1}_setPaintOverrides(){for(const e of Sm.paint.overridableProperties){if(!Im.hasPaintOverride(this.layout,e))continue;const t=this.paint.get(e),n=new Pm(t),i=new Wi(n,t.property.specification);let a=null;a="constant"===t.value.kind||"source"===t.value.kind?new Gi("source",i):new Yi("composite",i,t.value.zoomStops,t.value._interpolationType),this.paint._values[e]=new dr(t.property,a,t.parameters)}}_handleOverridablePaintPropertyUpdate(e,t,n){return!(!this.layout||t.isDataDriven()||n.isDataDriven())&&Im.hasPaintOverride(this.layout,e)}static hasPaintOverride(e,t){const n=e.get("text-field"),i=Sm.paint.properties[t];let a=!1;const o=e=>{for(const t of e)if(i.overrides&&i.overrides.hasOverride(t))return void(a=!0)};if("constant"===n.value.kind&&n.value.value instanceof Lt)o(n.value.value.sections);else if("source"===n.value.kind){const e=t=>{a||(t instanceof Ht&&zt(t.value)===yt?o(t.value.sections):t instanceof Yt?o(t.sections):t.eachChild(e))},t=n.value;t._styleExpression&&e(t._styleExpression.expression)}return a}getProgramConfiguration(e){return new Is(this,e)}}var Mm={paint:new gr({"background-color":new fr(tt.paint_background["background-color"]),"background-pattern":new fr(tt.paint_background["background-pattern"]),"background-opacity":new fr(tt.paint_background["background-opacity"])})},Am={paint:new gr({"raster-opacity":new fr(tt.paint_raster["raster-opacity"]),"raster-hue-rotate":new fr(tt.paint_raster["raster-hue-rotate"]),"raster-brightness-min":new fr(tt.paint_raster["raster-brightness-min"]),"raster-brightness-max":new fr(tt.paint_raster["raster-brightness-max"]),"raster-saturation":new fr(tt.paint_raster["raster-saturation"]),"raster-contrast":new fr(tt.paint_raster["raster-contrast"]),"raster-resampling":new fr(tt.paint_raster["raster-resampling"]),"raster-fade-duration":new fr(tt.paint_raster["raster-fade-duration"])})};class jm extends Bs{constructor(e){super(e,{}),this.implementation=e}is3D(){return"3d"===this.implementation.renderingMode}hasOffscreenPass(){return void 0!==this.implementation.prerender}isLayerDraped(){return void 0!==this.implementation.renderToTile}shouldRedrape(){return!!this.implementation.shouldRerenderTiles&&this.implementation.shouldRerenderTiles()}recalculate(){}updateTransitions(){}hasTransition(){return!1}serialize(){}onAdd(e){this.implementation.onAdd&&this.implementation.onAdd(e,e.painter.context.gl)}onRemove(e){this.implementation.onRemove&&this.implementation.onRemove(e,e.painter.context.gl)}}var Nm={paint:new gr({"sky-type":new fr(tt.paint_sky["sky-type"]),"sky-atmosphere-sun":new fr(tt.paint_sky["sky-atmosphere-sun"]),"sky-atmosphere-sun-intensity":new fr(tt.paint_sky["sky-atmosphere-sun-intensity"]),"sky-gradient-center":new fr(tt.paint_sky["sky-gradient-center"]),"sky-gradient-radius":new fr(tt.paint_sky["sky-gradient-radius"]),"sky-gradient":new hr(tt.paint_sky["sky-gradient"]),"sky-atmosphere-halo-color":new fr(tt.paint_sky["sky-atmosphere-halo-color"]),"sky-atmosphere-color":new fr(tt.paint_sky["sky-atmosphere-color"]),"sky-opacity":new fr(tt.paint_sky["sky-opacity"])})};function Lm(e,t,n){const i=[0,0,1],a=Sl([]);return Il(a,a,n?-x(e)+Math.PI:x(e)),Pl(a,a,-x(t)),bl(i,i,a),hl(i,i)}const Dm={circle:class extends Bs{constructor(e){super(e,au)}createBucket(e){return new Fc(e)}queryRadius(e){const t=e;return Qc("circle-radius",this,t)+Qc("circle-stroke-width",this,t)+eu(this.paint.get("circle-translate"))}queryIntersectsFeature(e,t,n,i,a,o,r,s){const l=nu(this.paint.get("circle-translate"),this.paint.get("circle-translate-anchor"),o.angle,e.pixelToTileUnitsFactor),c=this.paint.get("circle-radius").evaluate(t,n)+this.paint.get("circle-stroke-width").evaluate(t,n);return ou(e,i,o,r,s,"map"===this.paint.get("circle-pitch-alignment"),"map"===this.paint.get("circle-pitch-scale"),l,c)}getProgramIds(){return["circle"]}getProgramConfiguration(e){return new Is(this,e)}},heatmap:class extends Bs{createBucket(e){return new uu(e)}constructor(e){super(e,gu),this._updateColorRamp()}_handleSpecialPaintPropertyUpdate(e){"heatmap-color"===e&&this._updateColorRamp()}_updateColorRamp(){this.colorRamp=yu({expression:this._transitionablePaint._values["heatmap-color"].value.expression,evaluationKey:"heatmapDensity",image:this.colorRamp}),this.colorRampTexture=null}resize(){this.heatmapFbo&&(this.heatmapFbo.destroy(),this.heatmapFbo=null)}queryRadius(e){return Qc("heatmap-radius",this,e)}queryIntersectsFeature(e,t,n,i,a,o,r,s){const l=this.paint.get("heatmap-radius").evaluate(t,n);return ou(e,i,o,r,s,!0,!0,new b(0,0),l)}hasOffscreenPass(){return 0!==this.paint.get("heatmap-opacity")&&"none"!==this.visibility}getProgramIds(){return["heatmap","heatmapTexture"]}getProgramConfiguration(e){return new Is(this,e)}},hillshade:class extends Bs{constructor(e){super(e,vu)}hasOffscreenPass(){return 0!==this.paint.get("hillshade-exaggeration")&&"none"!==this.visibility}getProgramIds(){return["hillshade","hillshadePrepare"]}},fill:class extends Bs{constructor(e){super(e,ad)}getProgramIds(){const e=this.paint.get("fill-pattern"),t=e&&e.constantOr(1),n=[t?"fillPattern":"fill"];return this.paint.get("fill-antialias")&&n.push(t&&!this.getPaintProperty("fill-outline-color")?"fillOutlinePattern":"fillOutline"),n}getProgramConfiguration(e){return new Is(this,e)}recalculate(e,t){super.recalculate(e,t);const n=this.paint._values["fill-outline-color"];"constant"===n.value.kind&&void 0===n.value.value&&(this.paint._values["fill-outline-color"]=this.paint._values["fill-color"])}createBucket(e){return new nd(e)}queryRadius(){return eu(this.paint.get("fill-translate"))}queryIntersectsFeature(e,t,n,i,a,o){return!e.queryGeometry.isAboveHorizon&&Wc(tu(e.tilespaceGeometry,this.paint.get("fill-translate"),this.paint.get("fill-translate-anchor"),o.angle,e.pixelToTileUnitsFactor),i)}isTileClipped(){return!0}},"fill-extrusion":class extends Bs{constructor(e){super(e,zd)}createBucket(e){return new Pd(e)}queryRadius(){return eu(this.paint.get("fill-extrusion-translate"))}is3D(){return!0}getProgramIds(){return[this.paint.get("fill-extrusion-pattern").constantOr(1)?"fillExtrusionPattern":"fillExtrusion"]}getProgramConfiguration(e){return new Is(this,e)}queryIntersectsFeature(e,t,n,i,a,o,r,s,l){const c=nu(this.paint.get("fill-extrusion-translate"),this.paint.get("fill-extrusion-translate-anchor"),o.angle,e.pixelToTileUnitsFactor),u=this.paint.get("fill-extrusion-height").evaluate(t,n),d=this.paint.get("fill-extrusion-base").evaluate(t,n),p=[0,0],f=s&&o.elevation,m=o.elevation?o.elevation.exaggeration():1,h=e.tile.getBucket(this);if(f&&h instanceof Pd){const e=h.centroidVertexArray,t=l+1;t<e.length&&(p[0]=e.geta_centroid_pos0(t),p[1]=e.geta_centroid_pos1(t))}if(0===p[0]&&1===p[1])return!1;"globe"===o.projection.name&&(i=Rd([i],[new b(0,0),new b(Hs,Hs)],e.tileID.canonical).map(e=>e.polygon).flat());const g=f?s:null,[y,v]=function(e,t,n,i,a,o,r,s,l,c,u){return"globe"===e.projection.name?function(e,t,n,i,a,o,r,s,l,c,u){const d=[],p=[],f=e.projection.upVectorScale(u,e.center.lat,e.worldSize).metersToTile,m=[0,0,0,1],h=[0,0,0,1],g=(e,t,n,i)=>{e[0]=t,e[1]=n,e[2]=i,e[3]=1},y=Dd();n>0&&(n+=y),i+=y;for(const y of t){const t=[],v=[];for(const d of y){const p=d.x+a.x,y=d.y+a.y,b=e.projection.projectTilePoint(p,y,u),_=e.projection.upVector(u,d.x,d.y);let w=n,x=i;if(r){const e=Xd(p,y,n,i,r,s,l,c);w+=e.base,x+=e.top}0!==n?g(m,b.x+_[0]*f*w,b.y+_[1]*f*w,b.z+_[2]*f*w):g(m,b.x,b.y,b.z),g(h,b.x+_[0]*f*x,b.y+_[1]*f*x,b.z+_[2]*f*x),vl(m,m,o),vl(h,h,o),t.push(new Vd(m[0],m[1],m[2])),v.push(new Vd(h[0],h[1],h[2]))}d.push(t),p.push(v)}return[d,p]}(e,t,n,i,a,o,r,s,l,c,u):r?function(e,t,n,i,a,o,r,s,l){const c=[],u=[],d=[0,0,0,1];for(const p of e){const e=[],f=[];for(const c of p){const u=c.x+i.x,p=c.y+i.y,m=Xd(u,p,t,n,o,r,s,l);d[0]=u,d[1]=p,d[2]=m.base,d[3]=1,Cl(d,d,a),d[3]=Math.max(d[3],1e-5);const h=new Vd(d[0]/d[3],d[1]/d[3],d[2]/d[3]);d[0]=u,d[1]=p,d[2]=m.top,d[3]=1,Cl(d,d,a),d[3]=Math.max(d[3],1e-5);const g=new Vd(d[0]/d[3],d[1]/d[3],d[2]/d[3]);e.push(h),f.push(g)}c.push(e),u.push(f)}return[c,u]}(t,n,i,a,o,r,s,l,c):function(e,t,n,i,a){const o=[],r=[],s=a[8]*t,l=a[9]*t,c=a[10]*t,u=a[11]*t,d=a[8]*n,p=a[9]*n,f=a[10]*n,m=a[11]*n;for(const t of e){const e=[],n=[];for(const o of t){const t=o.x+i.x,r=o.y+i.y,h=a[0]*t+a[4]*r+a[12],g=a[1]*t+a[5]*r+a[13],y=a[2]*t+a[6]*r+a[14],v=a[3]*t+a[7]*r+a[15],b=h+s,_=g+l,w=y+c,x=Math.max(v+u,1e-5),k=h+d,O=g+p,T=y+f,C=Math.max(v+m,1e-5);e.push(new Vd(b/x,_/x,w/x)),n.push(new Vd(k/C,O/C,T/C))}o.push(e),r.push(n)}return[o,r]}(t,n,i,a,o)}(o,i,d,u,c,r,g,p,m,o.center.lat,e.tileID.canonical),_=e.queryGeometry;return function(e,t,n){let i=1/0;Wc(n,t)&&(i=Yd(n,t[0]));for(let a=0;a<t.length;a++){const o=t[a],r=e[a];for(let e=0;e<o.length-1;e++){const t=o[e],a=[t,o[e+1],r[e+1],r[e],t];Uc(n,a)&&(i=Math.min(i,Yd(n,a)))}}return i!==1/0&&i}(y,v,_.isPointQuery()?_.screenBounds:_.screenGeometry)}},line:class extends Bs{constructor(e){super(e,ip),this.gradientVersion=0}_handleSpecialPaintPropertyUpdate(e){if("line-gradient"===e){const e=this._transitionablePaint._values["line-gradient"].value.expression;this.stepInterpolant=e._styleExpression&&e._styleExpression.expression instanceof Mn,this.gradientVersion=(this.gradientVersion+1)%Number.MAX_SAFE_INTEGER}}gradientExpression(){return this._transitionablePaint._values["line-gradient"].value.expression}widthExpression(){return this._transitionablePaint._values["line-width"].value.expression}recalculate(e,t){super.recalculate(e,t),this.paint._values["line-floorwidth"]=ap.possiblyEvaluate(this._transitioningPaint._values["line-width"].value,e)}createBucket(e){return new tp(e)}getProgramIds(){return[this.paint.get("line-pattern").constantOr(1)?"linePattern":"line"]}getProgramConfiguration(e){return new Is(this,e)}queryRadius(e){const t=e,n=op(Qc("line-width",this,t),Qc("line-gap-width",this,t)),i=Qc("line-offset",this,t);return n/2+Math.abs(i)+eu(this.paint.get("line-translate"))}queryIntersectsFeature(e,t,n,i,a,o){if(e.queryGeometry.isAboveHorizon)return!1;const r=tu(e.tilespaceGeometry,this.paint.get("line-translate"),this.paint.get("line-translate-anchor"),o.angle,e.pixelToTileUnitsFactor),s=e.pixelToTileUnitsFactor/2*op(this.paint.get("line-width").evaluate(t,n),this.paint.get("line-gap-width").evaluate(t,n)),l=this.paint.get("line-offset").evaluate(t,n);return l&&(i=function(e,t){const n=[],i=new b(0,0);for(let a=0;a<e.length;a++){const o=e[a],r=[];for(let e=0;e<o.length;e++){const n=o[e],a=o[e+1],s=0===e?i:n.sub(o[e-1])._unit()._perp(),l=e===o.length-1?i:a.sub(n)._unit()._perp(),c=s._add(l)._unit();c._mult(1/(c.x*l.x+c.y*l.y)),r.push(c._mult(t)._add(n))}n.push(r)}return n}(i,l*e.pixelToTileUnitsFactor)),function(e,t,n){for(let i=0;i<t.length;i++){const a=t[i];if(e.length>=3)for(let t=0;t<a.length;t++)if(Jc(e,a[t]))return!0;if(qc(e,a,n))return!0}return!1}(r,i,s)}isTileClipped(){return!0}},symbol:Im,background:class extends Bs{constructor(e){super(e,Mm)}getProgramIds(){return[this.paint.get("background-pattern")?"backgroundPattern":"background"]}},raster:class extends Bs{constructor(e){super(e,Am)}getProgramIds(){return["raster"]}},sky:class extends Bs{constructor(e){super(e,Nm),this._updateColorRamp()}_handleSpecialPaintPropertyUpdate(e){"sky-gradient"===e?this._updateColorRamp():"sky-atmosphere-sun"!==e&&"sky-atmosphere-halo-color"!==e&&"sky-atmosphere-color"!==e&&"sky-atmosphere-sun-intensity"!==e||(this._skyboxInvalidated=!0)}_updateColorRamp(){this.colorRamp=yu({expression:this._transitionablePaint._values["sky-gradient"].value.expression,evaluationKey:"skyRadialProgress"}),this.colorRampTexture&&(this.colorRampTexture.destroy(),this.colorRampTexture=null)}needsSkyboxCapture(e){if(this._skyboxInvalidated||!this.skyboxTexture||!this.skyboxGeometry)return!0;if(!this.paint.get("sky-atmosphere-sun")){const t=e.style.light.properties.get("position");return this._lightPosition.azimuthal!==t.azimuthal||this._lightPosition.polar!==t.polar}return!1}getCenter(e,t){if("atmosphere"===this.paint.get("sky-type")){const n=this.paint.get("sky-atmosphere-sun"),i=!n,a=e.style.light,o=a.properties.get("position");return i&&"viewport"===a.properties.get("anchor")&&V("The sun direction is attached to a light with viewport anchor, lighting may behave unexpectedly."),i?Lm(o.azimuthal,90-o.polar,t):Lm(n[0],90-n[1],t)}const n=this.paint.get("sky-gradient-center");return Lm(n[0],90-n[1],t)}is3D(){return!1}isSky(){return!0}markSkyboxValid(e){this._skyboxInvalidated=!1,this._lightPosition=e.style.light.properties.get("position")}hasOffscreenPass(){return!0}getProgramIds(){const e=this.paint.get("sky-type");return"atmosphere"===e?["skyboxCapture","skybox"]:"gradient"===e?["skyboxGradient"]:null}}};class Rm{constructor(e,t,n,i){this.context=e,this.format=n,this.texture=e.gl.createTexture(),this.update(t,i)}update(e,t,i){const{width:a,height:o}=e,{context:r}=this,{gl:s}=r,{HTMLImageElement:l,HTMLCanvasElement:c,HTMLVideoElement:u,ImageData:d,ImageBitmap:p}=n;if(s.bindTexture(s.TEXTURE_2D,this.texture),r.pixelStoreUnpackFlipY.set(!1),r.pixelStoreUnpack.set(1),r.pixelStoreUnpackPremultiplyAlpha.set(this.format===s.RGBA&&(!t||!1!==t.premultiply)),i||this.size&&this.size[0]===a&&this.size[1]===o){const{x:t,y:n}=i||{x:0,y:0};e instanceof l||e instanceof c||e instanceof u||e instanceof d||p&&e instanceof p?s.texSubImage2D(s.TEXTURE_2D,0,t,n,s.RGBA,s.UNSIGNED_BYTE,e):s.texSubImage2D(s.TEXTURE_2D,0,t,n,a,o,s.RGBA,s.UNSIGNED_BYTE,e.data)}else this.size=[a,o],e instanceof l||e instanceof c||e instanceof u||e instanceof d||p&&e instanceof p?s.texImage2D(s.TEXTURE_2D,0,this.format,this.format,s.UNSIGNED_BYTE,e):s.texImage2D(s.TEXTURE_2D,0,this.format,a,o,0,this.format,s.UNSIGNED_BYTE,e.data);this.useMipmap=Boolean(t&&t.useMipmap&&this.isSizePowerOfTwo()),this.useMipmap&&s.generateMipmap(s.TEXTURE_2D)}bind(e,t){const{context:n}=this,{gl:i}=n;i.bindTexture(i.TEXTURE_2D,this.texture),e!==this.filter&&(i.texParameteri(i.TEXTURE_2D,i.TEXTURE_MAG_FILTER,e),i.texParameteri(i.TEXTURE_2D,i.TEXTURE_MIN_FILTER,this.useMipmap?e===i.NEAREST?i.NEAREST_MIPMAP_NEAREST:i.LINEAR_MIPMAP_NEAREST:e),this.filter=e),t!==this.wrap&&(i.texParameteri(i.TEXTURE_2D,i.TEXTURE_WRAP_S,t),i.texParameteri(i.TEXTURE_2D,i.TEXTURE_WRAP_T,t),this.wrap=t)}isSizePowerOfTwo(){return this.size[0]===this.size[1]&&Math.log(this.size[0])/Math.LN2%1==0}destroy(){const{gl:e}=this.context;e.deleteTexture(this.texture),this.texture=null}}class Bm{constructor(e){this._callback=e,this._triggered=!1,"undefined"!=typeof MessageChannel&&(this._channel=new MessageChannel,this._channel.port2.onmessage=()=>{this._triggered=!1,this._callback()})}trigger(){this._triggered||(this._triggered=!0,this._channel?this._channel.port1.postMessage(!0):setTimeout(()=>{this._triggered=!1,this._callback()},0))}remove(){this._channel=void 0,this._callback=()=>{}}}class zm{constructor(){this.tasks={},this.taskQueue=[],z(["process"],this),this.invoker=new Bm(this.process),this.nextId=0}add(e,t){const n=this.nextId++,i=function({type:e,isSymbolTile:t,zoom:n}){return n=n||0,"message"===e?0:"maybePrepare"!==e||t?"parseTile"!==e||t?"parseTile"===e&&t?300-n:"maybePrepare"===e&&t?400-n:500:200-n:100-n}(t);if(0===i){X();try{e()}finally{}return{cancel:()=>{}}}return this.tasks[n]={fn:e,metadata:t,priority:i,id:n},this.taskQueue.push(n),this.invoker.trigger(),{cancel:()=>{delete this.tasks[n]}}}process(){X();try{if(this.taskQueue=this.taskQueue.filter(e=>!!this.tasks[e]),!this.taskQueue.length)return;const e=this.pick();if(null===e)return;const t=this.tasks[e];if(delete this.tasks[e],this.taskQueue.length&&this.invoker.trigger(),!t)return;t.fn()}finally{}}pick(){let e=null,t=1/0;for(let n=0;n<this.taskQueue.length;n++){const i=this.tasks[this.taskQueue[n]];i.priority<t&&(t=i.priority,e=n)}if(null===e)return null;const n=this.taskQueue[e];return this.taskQueue.splice(e,1),n}remove(){this.invoker.remove()}}class Fm{constructor(e){this._stringToNumber={},this._numberToString=[];for(let t=0;t<e.length;t++){const n=e[t];this._stringToNumber[n]=t,this._numberToString[t]=n}}encode(e){return this._stringToNumber[e]}decode(e){return this._numberToString[e]}}const Um=["tile","layer","source","sourceLayer","state"];class Hm{constructor(e,t,n,i,a){this.type="Feature",this._vectorTileFeature=e,this._z=t,this._x=n,this._y=i,this.properties=e.properties,this.id=a}get geometry(){return void 0===this._geometry&&(this._geometry=this._vectorTileFeature.toGeoJSON(this._x,this._y,this._z).geometry),this._geometry}set geometry(e){this._geometry=e}toJSON(){const e={type:"Feature",state:void 0,geometry:this.geometry,properties:this.properties};void 0!==this.id&&(e.id=this.id);for(const t of Um)void 0!==this[t]&&(e[t]=this[t]);return e}}const Wm=new Uint16Array(8184);for(let e=0;e<2046;e++){let t=e+2,n=0,i=0,a=0,o=0,r=0,s=0;for(1&t?a=o=r=32:n=i=s=32;(t>>=1)>1;){const e=n+a>>1,l=i+o>>1;1&t?(a=n,o=i,n=r,i=s):(n=a,i=o,a=r,o=s),r=e,s=l}const l=4*e;Wm[l+0]=n,Wm[l+1]=i,Wm[l+2]=a,Wm[l+3]=o}const qm=new Uint16Array(2178),Vm=new Uint8Array(1089),Gm=new Uint16Array(1089);function Ym(e){return 0===e?-.03125:32===e?.03125:0}var Xm=wr([{name:"a_pos",type:"Int16",components:2},{name:"a_texture_pos",type:"Int16",components:2}]);const Zm={type:2,extent:Hs,loadGeometry:()=>[[new b(0,0),new b(8193,0),new b(8193,8193),new b(0,8193),new b(0,0)]]};class Jm{constructor(e,t,n,i,a){this.tileID=e,this.uid=L(),this.uses=0,this.tileSize=t,this.tileZoom=n,this.buckets={},this.expirationTime=null,this.queryPadding=0,this.hasSymbolBuckets=!1,this.hasRTLText=!1,this.dependencies={},this.isRaster=a,this.expiredRequestCount=0,this.state="loading",i&&i.transform&&(this.projection=i.transform.projection)}registerFadeDuration(e){const t=e+this.timeAdded;t<Ze.now()||this.fadeEndTime&&t<this.fadeEndTime||(this.fadeEndTime=t)}wasRequested(){return"errored"===this.state||"loaded"===this.state||"reloading"===this.state}get tileTransform(){return this._tileTransform||(this._tileTransform=Jf(this.tileID.canonical,this.projection)),this._tileTransform}loadVectorData(e,t,n){if(this.unloadVectorData(),this.state="loaded",e){e.featureIndex&&(this.latestFeatureIndex=e.featureIndex,e.rawTileData?(this.latestRawTileData=e.rawTileData,this.latestFeatureIndex.rawTileData=e.rawTileData):this.latestRawTileData&&(this.latestFeatureIndex.rawTileData=this.latestRawTileData)),this.collisionBoxArray=e.collisionBoxArray,this.buckets=function(e,t){const n={};if(!t)return n;for(const i of e){const e=i.layerIds.map(e=>t.getLayer(e)).filter(Boolean);if(0!==e.length){i.layers=e,i.stateDependentLayerIds&&(i.stateDependentLayers=i.stateDependentLayerIds.map(t=>e.filter(e=>e.id===t)[0]));for(const t of e)n[t.id]=i}}return n}(e.buckets,t.style),this.hasSymbolBuckets=!1;for(const e in this.buckets){const t=this.buckets[e];if(t instanceof Cm){if(this.hasSymbolBuckets=!0,!n)break;t.justReloaded=!0}}if(this.hasRTLText=!1,this.hasSymbolBuckets)for(const e in this.buckets){const t=this.buckets[e];if(t instanceof Cm&&t.hasRTLText){this.hasRTLText=!0,ir.isLoading()||ir.isLoaded()||"deferred"!==tr()||nr();break}}this.queryPadding=0;for(const e in this.buckets){const n=this.buckets[e];this.queryPadding=Math.max(this.queryPadding,t.style.getLayer(e).queryRadius(n))}e.imageAtlas&&(this.imageAtlas=e.imageAtlas),e.glyphAtlasImage&&(this.glyphAtlasImage=e.glyphAtlasImage),e.lineAtlas&&(this.lineAtlas=e.lineAtlas)}else this.collisionBoxArray=new Zr}unloadVectorData(){if(this.hasData()){for(const e in this.buckets)this.buckets[e].destroy();this.buckets={},this.imageAtlas&&(this.imageAtlas=null),this.lineAtlas&&(this.lineAtlas=null),this.imageAtlasTexture&&this.imageAtlasTexture.destroy(),this.glyphAtlasTexture&&this.glyphAtlasTexture.destroy(),this.lineAtlasTexture&&this.lineAtlasTexture.destroy(),this._tileBoundsBuffer&&(this._tileBoundsBuffer.destroy(),this._tileBoundsIndexBuffer.destroy(),this._tileBoundsSegments.destroy(),this._tileBoundsBuffer=null),this._tileDebugBuffer&&(this._tileDebugBuffer.destroy(),this._tileDebugSegments.destroy(),this._tileDebugBuffer=null),this._tileDebugIndexBuffer&&(this._tileDebugIndexBuffer.destroy(),this._tileDebugIndexBuffer=null),this._globeTileDebugBorderBuffer&&(this._globeTileDebugBorderBuffer.destroy(),this._globeTileDebugBorderBuffer=null),this._tileDebugTextBuffer&&(this._tileDebugTextBuffer.destroy(),this._tileDebugTextSegments.destroy(),this._tileDebugTextIndexBuffer.destroy(),this._tileDebugTextBuffer=null),this._globeTileDebugTextBuffer&&(this._globeTileDebugTextBuffer.destroy(),this._globeTileDebugTextBuffer=null),this.latestFeatureIndex=null,this.state="unloaded"}}getBucket(e){return this.buckets[e.id]}upload(e){for(const t in this.buckets){const n=this.buckets[t];n.uploadPending()&&n.upload(e)}const t=e.gl;this.imageAtlas&&!this.imageAtlas.uploaded&&(this.imageAtlasTexture=new Rm(e,this.imageAtlas.image,t.RGBA),this.imageAtlas.uploaded=!0),this.glyphAtlasImage&&(this.glyphAtlasTexture=new Rm(e,this.glyphAtlasImage,t.ALPHA),this.glyphAtlasImage=null),this.lineAtlas&&!this.lineAtlas.uploaded&&(this.lineAtlasTexture=new Rm(e,this.lineAtlas.image,t.ALPHA),this.lineAtlas.uploaded=!0)}prepare(e){this.imageAtlas&&this.imageAtlas.patchUpdatedImages(e,this.imageAtlasTexture)}queryRenderedFeatures(e,t,n,i,a,o,r,s){return this.latestFeatureIndex&&this.latestFeatureIndex.rawTileData?this.latestFeatureIndex.query({tileResult:i,pixelPosMatrix:r,transform:o,params:a,tileTransform:this.tileTransform},e,t,n):{}}querySourceFeatures(e,t){const n=this.latestFeatureIndex;if(!n||!n.rawTileData)return;const i=n.loadVTLayers(),a=t?t.sourceLayer:"",o=i._geojsonTileLayer||i[a];if(!o)return;const r=aa(t&&t.filter),{z:s,x:l,y:c}=this.tileID.canonical,u={z:s,x:l,y:c};for(let t=0;t<o.length;t++){const i=o.feature(t);if(r.needGeometry){const e=Rc(i,!0);if(!r.filter(new ar(this.tileID.overscaledZ),e,this.tileID.canonical))continue}else if(!r.filter(new ar(this.tileID.overscaledZ),i))continue;const d=n.getId(i,a),p=new Hm(i,s,l,c,d);p.tile=u,e.push(p)}}hasData(){return"loaded"===this.state||"reloading"===this.state||"expired"===this.state}patternsLoaded(){return!!this.imageAtlas&&!!Object.keys(this.imageAtlas.patternPositions).length}setExpiryData(e){const t=this.expirationTime;if(e.cacheControl){const t=Z(e.cacheControl);t["max-age"]&&(this.expirationTime=Date.now()+1e3*t["max-age"])}else e.expires&&(this.expirationTime=new Date(e.expires).getTime());if(this.expirationTime){const e=Date.now();let n=!1;if(this.expirationTime>e)n=!1;else if(t)if(this.expirationTime<t)n=!0;else{const i=this.expirationTime-t;i?this.expirationTime=e+Math.max(i,3e4):n=!0}else n=!0;n?(this.expiredRequestCount++,this.state="expired"):this.expiredRequestCount=0}}getExpiryTimeout(){if(this.expirationTime)return this.expiredRequestCount?1e3*(1<<Math.min(this.expiredRequestCount-1,31)):Math.min(this.expirationTime-(new Date).getTime(),Math.pow(2,31)-1)}setFeatureState(e,t){if(!this.latestFeatureIndex||!this.latestFeatureIndex.rawTileData||0===Object.keys(e).length||!t)return;const n=this.latestFeatureIndex.loadVTLayers(),i=t.style.listImages();for(const a in this.buckets){if(!t.style.hasLayer(a))continue;const o=this.buckets[a],r=o.layers[0].sourceLayer||"_geojsonTileLayer",s=n[r],l=e[r];if(!s||!l||0===Object.keys(l).length)continue;if(o.update(l,s,i,this.imageAtlas&&this.imageAtlas.patternPositions||{}),o instanceof tp||o instanceof nd){const e=t.style._getSourceCache(o.layers[0].source);t._terrain&&t._terrain.enabled&&e&&o.programConfigurations.needsUpload&&t._terrain._clearRenderCacheForTile(e.id,this.tileID)}const c=t&&t.style&&t.style.getLayer(a);c&&(this.queryPadding=Math.max(this.queryPadding,c.queryRadius(o)))}}holdingForFade(){return void 0!==this.symbolFadeHoldUntil}symbolFadeFinished(){return!this.symbolFadeHoldUntil||this.symbolFadeHoldUntil<Ze.now()}clearFadeHold(){this.symbolFadeHoldUntil=void 0}setHoldDuration(e){this.symbolFadeHoldUntil=Ze.now()+e}setTexture(e,t){const n=t.context,i=n.gl;this.texture=this.texture||t.getTileTexture(e.width),this.texture?this.texture.update(e,{useMipmap:!0}):(this.texture=new Rm(n,e,i.RGBA,{useMipmap:!0}),this.texture.bind(i.LINEAR,i.CLAMP_TO_EDGE))}setDependencies(e,t){const n={};for(const e of t)n[e]=!0;this.dependencies[e]=n}hasDependency(e,t){for(const n of e){const e=this.dependencies[n];if(e)for(const n of t)if(e[n])return!0}return!1}clearQueryDebugViz(){}_makeDebugTileBoundsBuffers(e,t){if(!t||"mercator"===t.name||this._tileDebugBuffer)return;const n=Dc(Zm,this.tileID.canonical,this.tileTransform)[0],i=new kr,a=new Gr;for(let e=0;e<n.length;e++){const{x:t,y:o}=n[e];i.emplaceBack(t,o),a.emplaceBack(e)}a.emplaceBack(0),this._tileDebugIndexBuffer=e.createIndexBuffer(a),this._tileDebugBuffer=e.createVertexBuffer(i,Ll.members),this._tileDebugSegments=Us.simpleSegment(0,0,i.length,a.length)}_makeTileBoundsBuffers(e,t){if(this._tileBoundsBuffer||!t||"mercator"===t.name)return;const n=Dc(Zm,this.tileID.canonical,this.tileTransform)[0];let i,a;if(this.isRaster){const e=function(e,t){const n=Jf(e,t),i=Math.pow(2,e.z);for(let a=0;a<33;a++)for(let o=0;o<33;o++){const r=kc((e.x+(o+Ym(o))/32)/i),s=Oc((e.y+(a+Ym(a))/32)/i),l=t.project(r,s),c=33*a+o;qm[2*c+0]=Math.round((l.x*n.scale-n.x)*Hs),qm[2*c+1]=Math.round((l.y*n.scale-n.y)*Hs)}Vm.fill(0),Gm.fill(0);for(let e=2045;e>=0;e--){const t=4*e,n=Wm[t+0],i=Wm[t+1],a=Wm[t+2],o=Wm[t+3],r=n+a>>1,s=i+o>>1,l=r+s-i,c=s+n-r,u=33*i+n,d=33*o+a,p=33*s+r,f=Math.hypot((qm[2*u+0]+qm[2*d+0])/2-qm[2*p+0],(qm[2*u+1]+qm[2*d+1])/2-qm[2*p+1])>=16;Vm[p]=Vm[p]||(f?1:0),e<1022&&(Vm[p]=Vm[p]||Vm[33*(i+c>>1)+(n+l>>1)]||Vm[33*(o+c>>1)+(a+l>>1)])}const a=new Tr,o=new zr;let r=0;function s(e,t){const n=33*t+e;return 0===Gm[n]&&(a.emplaceBack(qm[2*n+0],qm[2*n+1],e*Hs/32,t*Hs/32),Gm[n]=++r),Gm[n]-1}function l(e,t,n,i,a,r){const c=e+n>>1,u=t+i>>1;if(Math.abs(e-a)+Math.abs(t-r)>1&&Vm[33*u+c])l(a,r,e,t,c,u),l(n,i,a,r,c,u);else{const l=s(e,t),c=s(n,i),u=s(a,r);o.emplaceBack(l,c,u)}}return l(0,0,32,32,32,0),l(32,32,0,0,0,32),{vertices:a,indices:o}}(this.tileID.canonical,t);i=e.vertices,a=e.indices}else{i=new Tr,a=new zr;for(const{x:e,y:t}of n)i.emplaceBack(e,t,0,0);const e=Xu(i.int16,void 0,4);for(let t=0;t<e.length;t+=3)a.emplaceBack(e[t],e[t+1],e[t+2])}this._tileBoundsBuffer=e.createVertexBuffer(i,Xm.members),this._tileBoundsIndexBuffer=e.createIndexBuffer(a),this._tileBoundsSegments=Us.simpleSegment(0,0,i.length,a.length)}_makeGlobeTileDebugBuffers(e,t){const n=t.projection;if(!n||"globe"!==n.name||t.freezeTileCoverage)return;const i=this.tileID.canonical,a=rc(Kl(i,t)),o=cc(t.zoom);let r;o>0&&(r=Zs(new Float64Array(16),t.globeMatrix)),this._makeGlobeTileDebugBorderBuffer(e,i,t,a,r,o),this._makeGlobeTileDebugTextBuffer(e,i,t,a,r,o)}_globePoint(e,t,n,i,a,o,r){let s=ic(e,t,n);if(o){const a=1<<n.z,l=_c(i.center.lng),c=wc(i.center.lat),u=(n.x+.5)/a-l;let d=0;u>.5?d=-1:u<-.5&&(d=1);let p=(e/Hs+n.x)/a+d,f=(t/Hs+n.y)/a;p=(p-l)*i._pixelsPerMercatorPixel+l,f=(f-c)*i._pixelsPerMercatorPixel+c;const m=[p*i.worldSize,f*i.worldSize,0];vl(m,m,o),s=Jl(s,m,r)}return vl(s,s,a)}_makeGlobeTileDebugBorderBuffer(e,t,n,i,a,o){const r=new kr,s=new Gr,l=new Or,c=(e,c,u,d,p)=>{const f=(u-e)/(p-1),m=(d-c)/(p-1),h=r.length;for(let u=0;u<p;u++){const d=e+u*f,p=c+u*m;r.emplaceBack(d,p);const g=this._globePoint(d,p,t,n,i,a,o);l.emplaceBack(g[0],g[1],g[2]),s.emplaceBack(h+u)}},u=Hs;c(0,0,u,0,16),c(u,0,u,u,16),c(u,u,0,u,16),c(0,u,0,0,16),this._tileDebugIndexBuffer=e.createIndexBuffer(s),this._tileDebugBuffer=e.createVertexBuffer(r,Ll.members),this._globeTileDebugBorderBuffer=e.createVertexBuffer(l,Nl.members),this._tileDebugSegments=Us.simpleSegment(0,0,r.length,s.length)}_makeGlobeTileDebugTextBuffer(e,t,n,i,a,o){const r=new kr,s=new zr,l=new Or,c=25;s.reserve(32),r.reserve(c),l.reserve(c);const u=(e,t)=>c*e+t;for(let e=0;e<c;e++){const s=2048*e;for(let e=0;e<c;e++){const c=2048*e;r.emplaceBack(c,s);const u=this._globePoint(c,s,t,n,i,a,o);l.emplaceBack(u[0],u[1],u[2])}}for(let e=0;e<4;e++)for(let t=0;t<4;t++){const n=u(e,t),i=u(e,t+1),a=u(e+1,t),o=u(e+1,t+1);s.emplaceBack(n,i,a),s.emplaceBack(a,i,o)}this._tileDebugTextIndexBuffer=e.createIndexBuffer(s),this._tileDebugTextBuffer=e.createVertexBuffer(r,Ll.members),this._globeTileDebugTextBuffer=e.createVertexBuffer(l,Nl.members),this._tileDebugTextSegments=Us.simpleSegment(0,0,c,32)}}class Km{constructor(){this.state={},this.stateChanges={},this.deletedStates={}}updateState(e,t,n){const i=String(t);if(this.stateChanges[e]=this.stateChanges[e]||{},this.stateChanges[e][i]=this.stateChanges[e][i]||{},j(this.stateChanges[e][i],n),null===this.deletedStates[e]){this.deletedStates[e]={};for(const t in this.state[e])t!==i&&(this.deletedStates[e][t]=null)}else if(this.deletedStates[e]&&null===this.deletedStates[e][i]){this.deletedStates[e][i]={};for(const t in this.state[e][i])n[t]||(this.deletedStates[e][i][t]=null)}else for(const t in n)this.deletedStates[e]&&this.deletedStates[e][i]&&null===this.deletedStates[e][i][t]&&delete this.deletedStates[e][i][t]}removeFeatureState(e,t,n){if(null===this.deletedStates[e])return;const i=String(t);if(this.deletedStates[e]=this.deletedStates[e]||{},n&&void 0!==t)null!==this.deletedStates[e][i]&&(this.deletedStates[e][i]=this.deletedStates[e][i]||{},this.deletedStates[e][i][n]=null);else if(void 0!==t)if(this.stateChanges[e]&&this.stateChanges[e][i])for(n in this.deletedStates[e][i]={},this.stateChanges[e][i])this.deletedStates[e][i][n]=null;else this.deletedStates[e][i]=null;else this.deletedStates[e]=null}getState(e,t){const n=String(t),i=j({},(this.state[e]||{})[n],(this.stateChanges[e]||{})[n]);if(null===this.deletedStates[e])return{};if(this.deletedStates[e]){const n=this.deletedStates[e][t];if(null===n)return{};for(const e in n)delete i[e]}return i}initializeTileState(e,t){e.setFeatureState(this.state,t)}coalesceChanges(e,t){const n={};for(const e in this.stateChanges){this.state[e]=this.state[e]||{};const t={};for(const n in this.stateChanges[e])this.state[e][n]||(this.state[e][n]={}),j(this.state[e][n],this.stateChanges[e][n]),t[n]=this.state[e][n];n[e]=t}for(const e in this.deletedStates){this.state[e]=this.state[e]||{};const t={};if(null===this.deletedStates[e])for(const n in this.state[e])t[n]={},this.state[e][n]={};else for(const n in this.deletedStates[e]){if(null===this.deletedStates[e][n])this.state[e][n]={};else if(this.state[e][n])for(const t of Object.keys(this.deletedStates[e][n]))delete this.state[e][n][t];t[n]=this.state[e][n]}n[e]=n[e]||{},j(n[e],t)}if(this.stateChanges={},this.deletedStates={},0!==Object.keys(n).length)for(const i in e)e[i].setFeatureState(n,t)}}class $m{constructor(e){this.size=e,this.minimums=[],this.maximums=[],this.leaves=[]}getElevation(e,t){const n=this.toIdx(e,t);return{min:this.minimums[n],max:this.maximums[n]}}isLeaf(e,t){return this.leaves[this.toIdx(e,t)]}toIdx(e,t){return t*this.size+e}}function Qm(e,t,n,i){let a=0,o=Number.MAX_VALUE;for(let r=0;r<3;r++)if(Math.abs(i[r])<1e-15){if(n[r]<e[r]||n[r]>t[r])return null}else{const s=1/i[r];let l=(e[r]-n[r])*s,c=(t[r]-n[r])*s;if(l>c){const e=l;l=c,c=e}if(l>a&&(a=l),c<o&&(o=c),a>o)return null}return a}function eh(e,t,n,i,a,o,r,s,l,c,u){const d=i-e,p=a-t,f=o-n,m=r-e,h=s-t,g=l-n,y=u[1]*g-u[2]*h,v=u[2]*m-u[0]*g,b=u[0]*h-u[1]*m,_=d*y+p*v+f*b;if(Math.abs(_)<1e-15)return null;const w=1/_,x=c[0]-e,k=c[1]-t,O=c[2]-n,T=(x*y+k*v+O*b)*w;if(T<0||T>1)return null;const C=k*f-O*p,E=O*d-x*f,S=x*p-k*d,P=(u[0]*C+u[1]*E+u[2]*S)*w;return P<0||T+P>1?null:(m*C+h*E+g*S)*w}function th(e,t,n){return(e-t)/(n-t)}function nh(e,t,n,i,a,o,r,s,l){const c=1<<n,u=o-i,d=r-a,p=(e+1)/c*u+i,f=(t+0)/c*d+a,m=(t+1)/c*d+a;s[0]=(e+0)/c*u+i,s[1]=f,l[0]=p,l[1]=m}class ih{constructor(e){if(this.maximums=[],this.minimums=[],this.leaves=[],this.childOffsets=[],this.nodeCount=0,this.dem=e,this._siblingOffset=[[0,0],[1,0],[0,1],[1,1]],!this.dem)return;const t=function(e){const t=Math.ceil(Math.log2(e.dim/8)),n=[];let i=Math.ceil(Math.pow(2,t));const a=1/i,o=(e,t,n,i,a)=>{const o=i?1:0,r=(e+1)*n-o,s=t*n,l=(t+1)*n-o;a[0]=e*n,a[1]=s,a[2]=r,a[3]=l};let r=new $m(i);const s=[];for(let t=0;t<i*i;t++){o(t%i,Math.floor(t/i),a,!1,s);const n=oh(s[0],s[1],e),l=oh(s[2],s[1],e),c=oh(s[2],s[3],e),u=oh(s[0],s[3],e);r.minimums.push(Math.min(n,l,c,u)),r.maximums.push(Math.max(n,l,c,u)),r.leaves.push(1)}for(n.push(r),i/=2;i>=1;i/=2){const e=n[n.length-1];r=new $m(i);for(let t=0;t<i*i;t++){o(t%i,Math.floor(t/i),2,!0,s);const n=e.getElevation(s[0],s[1]),a=e.getElevation(s[2],s[1]),l=e.getElevation(s[2],s[3]),c=e.getElevation(s[0],s[3]),u=e.isLeaf(s[0],s[1]),d=e.isLeaf(s[2],s[1]),p=e.isLeaf(s[2],s[3]),f=e.isLeaf(s[0],s[3]),m=Math.min(n.min,a.min,l.min,c.min),h=Math.max(n.max,a.max,l.max,c.max),g=u&&d&&p&&f;r.maximums.push(h),r.minimums.push(m),r.leaves.push(h-m<=5&&g?1:0)}n.push(r)}return n}(this.dem),n=t.length-1,i=t[n];this._addNode(i.minimums[0],i.maximums[0],i.leaves[0]),this._construct(t,0,0,n,0)}raycastRoot(e,t,n,i,a,o,r=1){return Qm([e,t,-100],[n,i,this.maximums[0]*r],a,o)}raycast(e,t,n,i,a,o,r=1){if(!this.nodeCount)return null;const s=this.raycastRoot(e,t,n,i,a,o,r);if(null==s)return null;const l=[],c=[],u=[],d=[],p=[{idx:0,t:s,nodex:0,nodey:0,depth:0}];for(;p.length>0;){const{idx:s,t:f,nodex:m,nodey:h,depth:g}=p.pop();if(this.leaves[s]){nh(m,h,g,e,t,n,i,u,d);const s=1<<g,l=(m+0)/s,c=(m+1)/s,p=(h+0)/s,y=(h+1)/s,v=oh(l,p,this.dem)*r,b=oh(c,p,this.dem)*r,_=oh(c,y,this.dem)*r,w=oh(l,y,this.dem)*r,x=eh(u[0],u[1],v,d[0],u[1],b,d[0],d[1],_,a,o),k=eh(d[0],d[1],_,u[0],d[1],w,u[0],u[1],v,a,o),O=Math.min(null!==x?x:Number.MAX_VALUE,null!==k?k:Number.MAX_VALUE);if(O!==Number.MAX_VALUE)return O;{const e=ml([],a,o,f);if(ah(v,b,w,_,th(e[0],u[0],d[0]),th(e[1],u[1],d[1]))>=e[2])return f}continue}let y=0;for(let p=0;p<this._siblingOffset.length;p++){nh((m<<1)+this._siblingOffset[p][0],(h<<1)+this._siblingOffset[p][1],g+1,e,t,n,i,u,d),u[2]=-100,d[2]=this.maximums[this.childOffsets[s]+p]*r;const f=Qm(u,d,a,o);if(null!=f){const e=f;l[p]=e;let t=!1;for(let n=0;n<y&&!t;n++)e>=l[c[n]]&&(c.splice(n,0,p),t=!0);t||(c[y]=p),y++}}for(let e=0;e<y;e++){const t=c[e];p.push({idx:this.childOffsets[s]+t,t:l[t],nodex:(m<<1)+this._siblingOffset[t][0],nodey:(h<<1)+this._siblingOffset[t][1],depth:g+1})}}return null}_addNode(e,t,n){return this.minimums.push(e),this.maximums.push(t),this.leaves.push(n),this.childOffsets.push(0),this.nodeCount++}_construct(e,t,n,i,a){if(1===e[i].isLeaf(t,n))return;this.childOffsets[a]||(this.childOffsets[a]=this.nodeCount);const o=i-1,r=e[o];let s=0,l=0;for(let e=0;e<this._siblingOffset.length;e++){const i=2*t+this._siblingOffset[e][0],a=2*n+this._siblingOffset[e][1],o=r.getElevation(i,a),c=r.isLeaf(i,a),u=this._addNode(o.min,o.max,c);c&&(s|=1<<e),l||(l=u)}for(let i=0;i<this._siblingOffset.length;i++)s&1<<i||this._construct(e,2*t+this._siblingOffset[i][0],2*n+this._siblingOffset[i][1],o,l+i)}}function ah(e,t,n,i,a,o){return An(An(e,n,o),An(t,i,o),a)}function oh(e,t,n){const i=n.dim,a=S(e*i-.5,0,i-1),o=S(t*i-.5,0,i-1),r=Math.floor(a),s=Math.floor(o),l=Math.min(r+1,i-1),c=Math.min(s+1,i-1);return ah(n.get(r,s),n.get(l,s),n.get(r,c),n.get(l,c),a-r,o-s)}const rh={mapbox:[6553.6,25.6,.1,1e4],terrarium:[256,1,1/256,32768]};function sh(e,t,n){return(256*e*256+256*t+n)/10-1e4}function lh(e,t,n){return 256*e+t+n/256-32768}class ch{get tree(){return this._tree||this._buildQuadTree(),this._tree}constructor(e,t,n,i=!1,a=!1){if(this.uid=e,t.height!==t.width)throw new RangeError("DEM tiles must be square");if(n&&"mapbox"!==n&&"terrarium"!==n)return V(`"${n}" is not a valid encoding type. Valid types include "mapbox" and "terrarium".`);this.stride=t.height;const o=this.dim=t.height-2,r=new Uint32Array(t.data.buffer);if(this.pixels=new Uint8Array(t.data.buffer),this.encoding=n||"mapbox",this.borderReady=i,!i){for(let e=0;e<o;e++)r[this._idx(-1,e)]=r[this._idx(0,e)],r[this._idx(o,e)]=r[this._idx(o-1,e)],r[this._idx(e,-1)]=r[this._idx(e,0)],r[this._idx(e,o)]=r[this._idx(e,o-1)];r[this._idx(-1,-1)]=r[this._idx(0,0)],r[this._idx(o,-1)]=r[this._idx(o-1,0)],r[this._idx(-1,o)]=r[this._idx(0,o-1)],r[this._idx(o,o)]=r[this._idx(o-1,o-1)],a&&this._buildQuadTree()}}_buildQuadTree(){this._tree=new ih(this)}get(e,t,n=!1){n&&(e=S(e,-1,this.dim),t=S(t,-1,this.dim));const i=4*this._idx(e,t);return("terrarium"===this.encoding?lh:sh)(this.pixels[i],this.pixels[i+1],this.pixels[i+2])}static getUnpackVector(e){return rh[e]}get unpackVector(){return rh[this.encoding]}_idx(e,t){if(e<-1||e>=this.dim+1||t<-1||t>=this.dim+1)throw new RangeError("out of range source coordinates for DEM data");return(t+1)*this.stride+(e+1)}static pack(e,t){const n=[0,0,0,0],i=ch.getUnpackVector(t);let a=Math.floor((e+i[3])/i[2]);return n[2]=a%256,a=Math.floor(a/256),n[1]=a%256,a=Math.floor(a/256),n[0]=a,n}getPixels(){return new hu({width:this.stride,height:this.stride},this.pixels)}backfillBorder(e,t,n){if(this.dim!==e.dim)throw new Error("dem dimension mismatch");let i=t*this.dim,a=t*this.dim+this.dim,o=n*this.dim,r=n*this.dim+this.dim;switch(t){case-1:i=a-1;break;case 1:a=i+1}switch(n){case-1:o=r-1;break;case 1:r=o+1}const s=-t*this.dim,l=-n*this.dim;for(let t=o;t<r;t++)for(let n=i;n<a;n++){const i=4*this._idx(n,t),a=4*this._idx(n+s,t+l);this.pixels[i+0]=e.pixels[a+0],this.pixels[i+1]=e.pixels[a+1],this.pixels[i+2]=e.pixels[a+2],this.pixels[i+3]=e.pixels[a+3]}}onDeserialize(){this._tree&&(this._tree.dem=this)}}Ba(ch,"DEMData"),Ba(ih,"DemMinMaxQuadTree",{omit:["dem"]});class uh{constructor(e,t){this.max=e,this.onRemove=t,this.reset()}reset(){for(const e in this.data)for(const t of this.data[e])t.timeout&&clearTimeout(t.timeout),this.onRemove(t.value);return this.data={},this.order=[],this}add(e,t,n){const i=e.wrapped().key;void 0===this.data[i]&&(this.data[i]=[]);const a={value:t,timeout:void 0};if(void 0!==n&&(a.timeout=setTimeout(()=>{this.remove(e,a)},n)),this.data[i].push(a),this.order.push(i),this.order.length>this.max){const e=this._getAndRemoveByKey(this.order[0]);e&&this.onRemove(e)}return this}has(e){return e.wrapped().key in this.data}getAndRemove(e){return this.has(e)?this._getAndRemoveByKey(e.wrapped().key):null}_getAndRemoveByKey(e){const t=this.data[e].shift();return t.timeout&&clearTimeout(t.timeout),0===this.data[e].length&&delete this.data[e],this.order.splice(this.order.indexOf(e),1),t.value}getByKey(e){const t=this.data[e];return t?t[0].value:null}get(e){return this.has(e)?this.data[e.wrapped().key][0].value:null}remove(e,t){if(!this.has(e))return this;const n=e.wrapped().key,i=void 0===t?0:this.data[n].indexOf(t),a=this.data[n][i];return this.data[n].splice(i,1),a.timeout&&clearTimeout(a.timeout),0===this.data[n].length&&delete this.data[n],this.onRemove(a.value),this.order.splice(this.order.indexOf(n),1),this}setMaxSize(e){for(this.max=e;this.order.length>this.max;){const e=this._getAndRemoveByKey(this.order[0]);e&&this.onRemove(e)}return this}filter(e){const t=[];for(const n in this.data)for(const i of this.data[n])e(i.value)||t.push(i);for(const e of t)this.remove(e.value.tileID,e)}}class dh{constructor(e,t,n){this.func=e,this.mask=t,this.range=n}}dh.ReadOnly=!1,dh.ReadWrite=!0,dh.disabled=new dh(519,dh.ReadOnly,[0,1]);class ph{constructor(e,t,n,i,a,o){this.test=e,this.ref=t,this.mask=n,this.fail=i,this.depthFail=a,this.pass=o}}ph.disabled=new ph({func:519,mask:0},0,0,7680,7680,7680);class fh{constructor(e,t,n){this.blendFunction=e,this.blendColor=t,this.mask=n}}fh.Replace=[1,0],fh.disabled=new fh(fh.Replace,At.transparent,[!1,!1,!1,!1]),fh.unblended=new fh(fh.Replace,At.transparent,[!0,!0,!0,!0]),fh.alphaBlended=new fh([1,771],At.transparent,[!0,!0,!0,!0]);class mh{constructor(e,t,n){this.enable=e,this.mode=t,this.frontFace=n}}mh.disabled=new mh(!1,1029,2305),mh.backCCW=new mh(!0,1029,2305),mh.backCW=new mh(!0,1029,2304),mh.frontCW=new mh(!0,1028,2304),mh.frontCCW=new mh(!0,1028,2305);class hh extends et{constructor(e,t,n){super(),this.id=e,this._onlySymbols=n,t.on("data",e=>{"source"===e.dataType&&"metadata"===e.sourceDataType&&(this._sourceLoaded=!0),this._sourceLoaded&&!this._paused&&"source"===e.dataType&&"content"===e.sourceDataType&&(this.reload(),this.transform&&this.update(this.transform))}),t.on("error",()=>{this._sourceErrored=!0}),this._source=t,this._tiles={},this._cache=new uh(0,this._unloadTile.bind(this)),this._timers={},this._cacheTimers={},this._minTileCacheSize=t.minTileCacheSize,this._maxTileCacheSize=t.maxTileCacheSize,this._loadedParentTiles={},this._coveredTiles={},this._state=new Km,this._isRaster="raster"===this._source.type||"raster-dem"===this._source.type||"custom"===this._source.type&&"raster"===this._source._dataType}onAdd(e){this.map=e,this._minTileCacheSize=void 0===this._minTileCacheSize&&e?e._minTileCacheSize:this._minTileCacheSize,this._maxTileCacheSize=void 0===this._maxTileCacheSize&&e?e._maxTileCacheSize:this._maxTileCacheSize}loaded(){if(this._sourceErrored)return!0;if(!this._sourceLoaded)return!1;if(!this._source.loaded())return!1;for(const e in this._tiles){const t=this._tiles[e];if("loaded"!==t.state&&"errored"!==t.state)return!1}return!0}getSource(){return this._source}pause(){this._paused=!0}resume(){if(!this._paused)return;const e=this._shouldReloadOnResume;this._paused=!1,this._shouldReloadOnResume=!1,e&&this.reload(),this.transform&&this.update(this.transform)}_loadTile(e,t){return e.isSymbolTile=this._onlySymbols,this._source.loadTile(e,t)}_unloadTile(e){if(this._source.unloadTile)return this._source.unloadTile(e,()=>{})}_abortTile(e){if(this._source.abortTile)return this._source.abortTile(e,()=>{})}serialize(){return this._source.serialize()}prepare(e){this._source.prepare&&this._source.prepare(),this._state.coalesceChanges(this._tiles,this.map?this.map.painter:null);for(const t in this._tiles){const n=this._tiles[t];n.upload(e),n.prepare(this.map.style.imageManager)}}getIds(){return A(this._tiles).map(e=>e.tileID).sort(gh).map(e=>e.key)}getRenderableIds(e){const t=[];for(const n in this._tiles)this._isIdRenderable(+n,e)&&t.push(this._tiles[n]);return e?t.sort((e,t)=>{const n=e.tileID,i=t.tileID,a=new b(n.canonical.x,n.canonical.y)._rotate(this.transform.angle),o=new b(i.canonical.x,i.canonical.y)._rotate(this.transform.angle);return n.overscaledZ-i.overscaledZ||o.y-a.y||o.x-a.x}).map(e=>e.tileID.key):t.map(e=>e.tileID).sort(gh).map(e=>e.key)}hasRenderableParent(e){const t=this.findLoadedParent(e,0);return!!t&&this._isIdRenderable(t.tileID.key)}_isIdRenderable(e,t){return this._tiles[e]&&this._tiles[e].hasData()&&!this._coveredTiles[e]&&(t||!this._tiles[e].holdingForFade())}reload(){if(this._paused)this._shouldReloadOnResume=!0;else{this._cache.reset();for(const e in this._tiles)"errored"!==this._tiles[e].state&&this._reloadTile(+e,"reloading")}}_reloadTile(e,t){const n=this._tiles[e];n&&("loading"!==n.state&&(n.state=t),this._loadTile(n,this._tileLoaded.bind(this,n,e,t)))}_tileLoaded(e,t,n,i){if(i)if(e.state="errored",404!==i.status)this._source.fire(new Qe(i,{tile:e}));else if("raster-dem"===this._source.type&&this.usedForTerrain&&this.map.painter.terrain){const e=this.map.painter.terrain;this.update(this.transform,e.getScaledDemTileSize(),!0),e.resetTileLookupCache(this.id)}else this.update(this.transform);else e.timeAdded=Ze.now(),"expired"===n&&(e.refreshedUponExpiration=!0),this._setTileReloadTimer(t,e),"raster-dem"===this._source.type&&e.dem&&this._backfillDEM(e),this._state.initializeTileState(e,this.map?this.map.painter:null),this._source.fire(new $e("data",{dataType:"source",tile:e,coord:e.tileID,sourceCacheId:this.id}))}_backfillDEM(e){const t=this.getRenderableIds();for(let i=0;i<t.length;i++){const a=t[i];if(e.neighboringTiles&&e.neighboringTiles[a]){const t=this.getTileByID(a);n(e,t),n(t,e)}}function n(e,t){if(!e.dem||e.dem.borderReady)return;e.needsHillshadePrepare=!0,e.needsDEMTextureUpload=!0;let n=t.tileID.canonical.x-e.tileID.canonical.x;const i=t.tileID.canonical.y-e.tileID.canonical.y,a=Math.pow(2,e.tileID.canonical.z),o=t.tileID.key;0===n&&0===i||Math.abs(i)>1||(Math.abs(n)>1&&(1===Math.abs(n+a)?n+=a:1===Math.abs(n-a)&&(n-=a)),t.dem&&e.dem&&(e.dem.backfillBorder(t.dem,n,i),e.neighboringTiles&&e.neighboringTiles[o]&&(e.neighboringTiles[o].backfilled=!0)))}}getTile(e){return this.getTileByID(e.key)}getTileByID(e){return this._tiles[e]}_retainLoadedChildren(e,t,n,i){for(const a in this._tiles){let o=this._tiles[a];if(i[a]||!o.hasData()||o.tileID.overscaledZ<=t||o.tileID.overscaledZ>n)continue;let r=o.tileID;for(;o&&o.tileID.overscaledZ>t+1;){const e=o.tileID.scaledTo(o.tileID.overscaledZ-1);o=this._tiles[e.key],o&&o.hasData()&&(r=e)}let s=r;for(;s.overscaledZ>t;)if(s=s.scaledTo(s.overscaledZ-1),e[s.key]){i[r.key]=r;break}}}findLoadedParent(e,t){if(e.key in this._loadedParentTiles){const n=this._loadedParentTiles[e.key];return n&&n.tileID.overscaledZ>=t?n:null}for(let n=e.overscaledZ-1;n>=t;n--){const t=e.scaledTo(n),i=this._getLoadedTile(t);if(i)return i}}_getLoadedTile(e){const t=this._tiles[e.key];return t&&t.hasData()?t:this._cache.getByKey(this._source.reparseOverscaled?e.wrapped().key:e.canonical.key)}updateCacheSize(e,t){t=t||this._source.tileSize;const n=Math.ceil(e.width/t)+1,i=Math.ceil(e.height/t)+1,a=Math.floor(n*i*5),o="number"==typeof this._minTileCacheSize?Math.max(this._minTileCacheSize,a):a,r="number"==typeof this._maxTileCacheSize?Math.min(this._maxTileCacheSize,o):o;this._cache.setMaxSize(r)}handleWrapJump(e){const t=Math.round((e-(void 0===this._prevLng?e:this._prevLng))/360);if(this._prevLng=e,t){const e={};for(const n in this._tiles){const i=this._tiles[n];i.tileID=i.tileID.unwrapTo(i.tileID.wrap+t),e[i.tileID.key]=i}this._tiles=e;for(const e in this._timers)clearTimeout(this._timers[e]),delete this._timers[e];for(const e in this._tiles)this._setTileReloadTimer(+e,this._tiles[e])}}update(e,t,n){if(this.transform=e,!this._sourceLoaded||this._paused||this.transform.freezeTileCoverage)return;if(this.usedForTerrain&&!n)return;let i;this.updateCacheSize(e,t),"globe"!==this.transform.projection.name&&this.handleWrapJump(this.transform.center.lng),this._coveredTiles={},this.used||this.usedForTerrain?this._source.tileID?i=e.getVisibleUnwrappedCoordinates(this._source.tileID).map(e=>new Wd(e.canonical.z,e.wrap,e.canonical.z,e.canonical.x,e.canonical.y)):(i=e.coveringTiles({tileSize:t||this._source.tileSize,minzoom:this._source.minzoom,maxzoom:this._source.maxzoom,roundZoom:this._source.roundZoom&&!n,reparseOverscaled:this._source.reparseOverscaled,isTerrainDEM:this.usedForTerrain}),this._source.hasTile&&(i=i.filter(e=>this._source.hasTile(e)))):i=[];const a=this._updateRetainedTiles(i);if(yh(this._source.type)&&0!==i.length){const e={},t={},n=Object.keys(a);for(const i of n){const n=a[i],o=this._tiles[i];if(!o||o.fadeEndTime&&o.fadeEndTime<=Ze.now())continue;const r=this.findLoadedParent(n,Math.max(n.overscaledZ-hh.maxOverzooming,this._source.minzoom));r&&(this._addTile(r.tileID),e[r.tileID.key]=r.tileID),t[i]=n}const o=i[i.length-1].overscaledZ;for(const e in this._tiles){const n=this._tiles[e];if(a[e]||!n.hasData())continue;let i=n.tileID;for(;i.overscaledZ>o;){i=i.scaledTo(i.overscaledZ-1);const o=this._tiles[i.key];if(o&&o.hasData()&&t[i.key]){a[e]=n.tileID;break}}}for(const t in e)a[t]||(this._coveredTiles[t]=!0,a[t]=e[t])}for(const e in a)this._tiles[e].clearFadeHold();const o=function(e,t){const n=[];for(const i in e)i in t||n.push(i);return n}(this._tiles,a);for(const e of o){const t=this._tiles[e];t.hasSymbolBuckets&&!t.holdingForFade()?t.setHoldDuration(this.map._fadeDuration):t.hasSymbolBuckets&&!t.symbolFadeFinished()||this._removeTile(+e)}this._updateLoadedParentTileCache(),this._onlySymbols&&this._source.afterUpdate&&this._source.afterUpdate()}releaseSymbolFadeTiles(){for(const e in this._tiles)this._tiles[e].holdingForFade()&&this._removeTile(+e)}_updateRetainedTiles(e){const t={};if(0===e.length)return t;const n={},i=e.reduce((e,t)=>Math.min(e,t.overscaledZ),1/0),a=e[0].overscaledZ,o=Math.max(a-hh.maxOverzooming,this._source.minzoom),r=Math.max(a+hh.maxUnderzooming,this._source.minzoom),s={};for(const n of e){const e=this._addTile(n);t[n.key]=n,e.hasData()||i<this._source.maxzoom&&(s[n.key]=n)}this._retainLoadedChildren(s,i,r,t);for(const i of e){let e=this._tiles[i.key];if(e.hasData())continue;if(i.canonical.z>=this._source.maxzoom){const e=i.children(this._source.maxzoom)[0],n=this.getTile(e);if(n&&n.hasData()){t[e.key]=e;continue}}else{const e=i.children(this._source.maxzoom);if(t[e[0].key]&&t[e[1].key]&&t[e[2].key]&&t[e[3].key])continue}let a=e.wasRequested();for(let r=i.overscaledZ-1;r>=o;--r){const o=i.scaledTo(r);if(n[o.key])break;if(n[o.key]=!0,e=this.getTile(o),!e&&a&&(e=this._addTile(o)),e&&(t[o.key]=o,a=e.wasRequested(),e.hasData()))break}}return t}_updateLoadedParentTileCache(){this._loadedParentTiles={};for(const e in this._tiles){const t=[];let n,i=this._tiles[e].tileID;for(;i.overscaledZ>0;){if(i.key in this._loadedParentTiles){n=this._loadedParentTiles[i.key];break}t.push(i.key);const e=i.scaledTo(i.overscaledZ-1);if(n=this._getLoadedTile(e),n)break;i=e}for(const e of t)this._loadedParentTiles[e]=n}}_addTile(e){let t=this._tiles[e.key];if(t)return t;t=this._cache.getAndRemove(e),t&&(this._setTileReloadTimer(e.key,t),t.tileID=e,this._state.initializeTileState(t,this.map?this.map.painter:null),this._cacheTimers[e.key]&&(clearTimeout(this._cacheTimers[e.key]),delete this._cacheTimers[e.key],this._setTileReloadTimer(e.key,t)));const n=Boolean(t);if(!n){const n=this.map?this.map.painter:null;t=new Jm(e,this._source.tileSize*e.overscaleFactor(),this.transform.tileZoom,n,this._isRaster),this._loadTile(t,this._tileLoaded.bind(this,t,e.key,t.state))}return t?(t.uses++,this._tiles[e.key]=t,n||this._source.fire(new $e("dataloading",{tile:t,coord:t.tileID,dataType:"source"})),t):null}_setTileReloadTimer(e,t){e in this._timers&&(clearTimeout(this._timers[e]),delete this._timers[e]);const n=t.getExpiryTimeout();n&&(this._timers[e]=setTimeout(()=>{this._reloadTile(e,"expired"),delete this._timers[e]},n))}_removeTile(e){const t=this._tiles[e];t&&(t.uses--,delete this._tiles[e],this._timers[e]&&(clearTimeout(this._timers[e]),delete this._timers[e]),t.uses>0||(t.hasData()&&"reloading"!==t.state?this._cache.add(t.tileID,t,t.getExpiryTimeout()):(t.aborted=!0,this._abortTile(t),this._unloadTile(t))))}clearTiles(){this._shouldReloadOnResume=!1,this._paused=!1;for(const e in this._tiles)this._removeTile(+e);this._source._clear&&this._source._clear(),this._cache.reset(),this.map&&this.usedForTerrain&&this.map.painter.terrain&&this.map.painter.terrain.resetTileLookupCache(this.id)}tilesIn(e,t,n){const i=[],a=this.transform;if(!a)return i;const o="globe"===a.projection.name,r=_c(a.center.lng);for(const s in this._tiles){const l=this._tiles[s];if(n&&l.clearQueryDebugViz(),l.holdingForFade())continue;let c;if(o){const e=l.tileID.canonical;if(0===e.z){const t=[Math.abs(S(r,...vh(e,-1))-r),Math.abs(S(r,...vh(e,1))-r)];c=[0,2*t.indexOf(Math.min(...t))-1]}else{const t=[Math.abs(S(r,...vh(e,-1))-r),Math.abs(S(r,...vh(e,0))-r),Math.abs(S(r,...vh(e,1))-r)];c=[t.indexOf(Math.min(...t))-1]}}else c=[0];for(const n of c){const o=e.containsTile(l,a,t,n);o&&i.push(o)}}return i}getVisibleCoordinates(e){const t=this.getRenderableIds(e).map(e=>this._tiles[e].tileID);for(const e of t)e.projMatrix=this.transform.calculateProjMatrix(e.toUnwrapped());return t}hasTransition(){if(this._source.hasTransition())return!0;if(yh(this._source.type))for(const e in this._tiles){const t=this._tiles[e];if(void 0!==t.fadeEndTime&&t.fadeEndTime>=Ze.now())return!0}return!1}setFeatureState(e,t,n){this._state.updateState(e=e||"_geojsonTileLayer",t,n)}removeFeatureState(e,t,n){this._state.removeFeatureState(e=e||"_geojsonTileLayer",t,n)}getFeatureState(e,t){return this._state.getState(e=e||"_geojsonTileLayer",t)}setDependencies(e,t,n){const i=this._tiles[e];i&&i.setDependencies(t,n)}reloadTilesForDependencies(e,t){for(const n in this._tiles)this._tiles[n].hasDependency(e,t)&&this._reloadTile(+n,"reloading");this._cache.filter(n=>!n.hasDependency(e,t))}_preloadTiles(e,t){if(!this._sourceLoaded){const n=()=>{this._sourceLoaded&&(this._source.off("data",n),this._preloadTiles(e,t))};return void this._source.on("data",n)}const n=new Map,i=Array.isArray(e)?e:[e],a=this.map.painter.terrain,o=this.usedForTerrain&&a?a.getScaledDemTileSize():this._source.tileSize;for(const e of i){const t=e.coveringTiles({tileSize:o,minzoom:this._source.minzoom,maxzoom:this._source.maxzoom,roundZoom:this._source.roundZoom&&!this.usedForTerrain,reparseOverscaled:this._source.reparseOverscaled,isTerrainDEM:this.usedForTerrain});for(const e of t)n.set(e.key,e);this.usedForTerrain&&e.updateElevation(!1)}M(Array.from(n.values()),(e,t)=>{const n=new Jm(e,this._source.tileSize*e.overscaleFactor(),this.transform.tileZoom,this.map.painter,this._isRaster);this._loadTile(n,e=>{"raster-dem"===this._source.type&&n.dem&&this._backfillDEM(n),t(e,n)})},t)}}function gh(e,t){const n=Math.abs(2*e.wrap)-+(e.wrap<0),i=Math.abs(2*t.wrap)-+(t.wrap<0);return e.overscaledZ-t.overscaledZ||i-n||t.canonical.y-e.canonical.y||t.canonical.x-e.canonical.x}function yh(e){return"raster"===e||"image"===e||"video"===e||"custom"===e}function vh(e,t){const n=1<<e.z;return[e.x/n+t,(e.x+1)/n+t]}hh.maxOverzooming=10,hh.maxUnderzooming=3;class bh{constructor(e,t,n){this._demTile=e,this._dem=this._demTile.dem,this._scale=t,this._offset=n}static create(e,t,n){const i=n||e.findDEMTileFor(t);if(!i||!i.dem)return;const a=i.dem,o=i.tileID,r=1<<t.canonical.z-o.canonical.z;return new bh(i,i.tileSize/Hs/r,[(t.canonical.x/r-o.canonical.x)*a.dim,(t.canonical.y/r-o.canonical.y)*a.dim])}tileCoordToPixel(e,t){const n=t*this._scale+this._offset[1],i=Math.floor(e*this._scale+this._offset[0]),a=Math.floor(n);return new b(i,a)}getElevationAt(e,t,n,i){const a=e*this._scale+this._offset[0],o=t*this._scale+this._offset[1],r=Math.floor(a),s=Math.floor(o),l=this._dem;return i=!!i,n?An(An(l.get(r,s,i),l.get(r,s+1,i),o-s),An(l.get(r+1,s,i),l.get(r+1,s+1,i),o-s),a-r):l.get(r,s,i)}getElevationAtPixel(e,t,n){return this._dem.get(e,t,!!n)}getMeterToDEM(e){return(1<<this._demTile.tileID.canonical.z)*xc(1,e)*this._dem.stride}}class _h{constructor(e,t){this.tileID=e,this.x=e.canonical.x,this.y=e.canonical.y,this.z=e.canonical.z,this.grid=new Da(Hs,16,0),this.featureIndexArray=new is,this.promoteId=t}insert(e,t,n,i,a,o=0){const r=this.featureIndexArray.length;this.featureIndexArray.emplaceBack(n,i,a,o);const s=this.grid;for(let e=0;e<t.length;e++){const n=t[e],i=[1/0,1/0,-1/0,-1/0];for(let e=0;e<n.length;e++){const t=n[e];i[0]=Math.min(i[0],t.x),i[1]=Math.min(i[1],t.y),i[2]=Math.max(i[2],t.x),i[3]=Math.max(i[3],t.y)}i[0]<Hs&&i[1]<Hs&&i[2]>=0&&i[3]>=0&&s.insert(r,i[0],i[1],i[2],i[3])}}loadVTLayers(){if(!this.vtLayers){this.vtLayers=new wd(new qp(this.rawTileData)).layers,this.sourceLayerCoder=new Fm(this.vtLayers?Object.keys(this.vtLayers).sort():["_geojsonTileLayer"]),this.vtFeatures={};for(const e in this.vtLayers)this.vtFeatures[e]=[]}return this.vtLayers}query(e,t,n,i){this.loadVTLayers();const a=e.params||{},o=aa(a.filter),r=e.tileResult,s=e.transform,l=r.bufferedTilespaceBounds,c=this.grid.query(l.min.x,l.min.y,l.max.x,l.max.y,(e,t,n,i)=>Kc(r.bufferedTilespaceGeometry,e,t,n,i));c.sort(xh);let u=null;s.elevation&&c.length>0&&(u=bh.create(s.elevation,this.tileID));const d={};let p;for(let s=0;s<c.length;s++){const l=c[s];if(l===p)continue;p=l;const f=this.featureIndexArray.get(l);let m=null;this.loadMatchingFeature(d,f,o,a.layers,a.availableImages,t,n,i,(t,n,i,a=0)=>(m||(m=Dc(t,this.tileID.canonical,e.tileTransform)),n.queryIntersectsFeature(r,t,i,m,this.z,e.transform,e.pixelPosMatrix,u,a)))}return d}loadMatchingFeature(e,t,n,i,a,o,r,s,l){const{featureIndex:c,bucketIndex:u,sourceLayerIndex:d,layoutVertexArrayOffset:p}=t,f=this.bucketLayerIDs[u];if(i&&!function(e,t){for(let n=0;n<e.length;n++)if(t.indexOf(e[n])>=0)return!0;return!1}(i,f))return;const m=this.sourceLayerCoder.decode(d),h=this.vtLayers[m].feature(c);if(n.needGeometry){const e=Rc(h,!0);if(!n.filter(new ar(this.tileID.overscaledZ),e,this.tileID.canonical))return}else if(!n.filter(new ar(this.tileID.overscaledZ),h))return;const g=this.getId(h,m);for(let t=0;t<f.length;t++){const n=f[t];if(i&&i.indexOf(n)<0)continue;const u=o[n];if(!u)continue;let d={};void 0!==g&&s&&(d=s.getState(u.sourceLayer||"_geojsonTileLayer",g));const m=j({},r[n]);m.paint=wh(m.paint,u.paint,h,d,a),m.layout=wh(m.layout,u.layout,h,d,a);const y=!l||l(h,u,d,p);if(!y)continue;const v=new Hm(h,this.z,this.x,this.y,g);v.layer=m;let b=e[n];void 0===b&&(b=e[n]=[]),b.push({featureIndex:c,feature:v,intersectionZ:y})}}lookupSymbolFeatures(e,t,n,i,a,o,r,s){const l={};this.loadVTLayers();const c=aa(a);for(const a of e)this.loadMatchingFeature(l,{bucketIndex:n,sourceLayerIndex:i,featureIndex:a,layoutVertexArrayOffset:0},c,o,r,s,t);return l}loadFeature(e){const{featureIndex:t,sourceLayerIndex:n}=e;this.loadVTLayers();const i=this.sourceLayerCoder.decode(n),a=this.vtFeatures[i];if(a[t])return a[t];const o=this.vtLayers[i].feature(t);return a[t]=o,o}hasLayer(e){for(const t of this.bucketLayerIDs)for(const n of t)if(e===n)return!0;return!1}getId(e,t){let n=e.id;if(this.promoteId){const i="string"==typeof this.promoteId?this.promoteId:this.promoteId[t];null!=i&&(n=e.properties[i]),"boolean"==typeof n&&(n=Number(n))}return n}}function wh(e,t,n,i,a){return U(e,(e,o)=>{const r=t instanceof pr?t.get(o):null;return r&&r.evaluate?r.evaluate(n,i,a):r})}function xh(e,t){return t-e}Ba(_h,"FeatureIndex",{omit:["rawTileData","sourceLayerCoder"]});class kh{constructor(e,t){this.width=e,this.height=t,this.nextRow=0,this.image=new mu({width:e,height:t}),this.positions={},this.uploaded=!1}getDash(e,t){const n=this.getKey(e,t);return this.positions[n]}trim(){const e=this.width,t=this.height=R(this.nextRow);this.image.resize({width:e,height:t})}getKey(e,t){return e.join(",")+t}getDashRanges(e,t,n){const i=[];let a=e.length%2==1?-e[e.length-1]*n:0,o=e[0]*n,r=!0;i.push({left:a,right:o,isDash:r,zeroLength:0===e[0]});let s=e[0];for(let t=1;t<e.length;t++){r=!r;const l=e[t];a=s*n,s+=l,o=s*n,i.push({left:a,right:o,isDash:r,zeroLength:0===l})}return i}addRoundDash(e,t,n){const i=t/2;for(let t=-n;t<=n;t++){const a=this.width*(this.nextRow+n+t);let o=0,r=e[o];for(let s=0;s<this.width;s++){s/r.right>1&&(r=e[++o]);const l=Math.abs(s-r.left),c=Math.abs(s-r.right),u=Math.min(l,c);let d;const p=t/n*(i+1);if(r.isDash){const e=i-Math.abs(p);d=Math.sqrt(u*u+e*e)}else d=i-Math.sqrt(u*u+p*p);this.image.data[a+s]=Math.max(0,Math.min(255,d+128))}}}addRegularDash(e,t){for(let t=e.length-1;t>=0;--t){const n=e[t],i=e[t+1];n.zeroLength?e.splice(t,1):i&&i.isDash===n.isDash&&(i.left=n.left,e.splice(t,1))}const n=e[0],i=e[e.length-1];n.isDash===i.isDash&&(n.left=i.left-this.width,i.right=n.right+this.width);const a=this.width*this.nextRow;let o=0,r=e[o];for(let n=0;n<this.width;n++){n/r.right>1&&(r=e[++o]);const i=Math.abs(n-r.left),s=Math.abs(n-r.right),l=Math.min(i,s);this.image.data[a+n]=Math.max(0,Math.min(255,(r.isDash?l:-l)+t+128))}}addDash(e,t){const n=this.getKey(e,t);if(this.positions[n])return this.positions[n];const i="round"===t,a=i?7:0,o=2*a+1;if(this.nextRow+o>this.height)return V("LineAtlas out of space"),null;0===e.length&&e.push(1);let r=0;for(let t=0;t<e.length;t++)e[t]<0&&(V("Negative value is found in line dasharray, replacing values with 0"),e[t]=0),r+=e[t];if(0!==r){const n=this.width/r,o=this.getDashRanges(e,this.width,n);i?this.addRoundDash(o,n,a):this.addRegularDash(o,"square"===t?.5*n:0)}const s=this.nextRow+a;this.nextRow+=o;const l={tl:[s,a],br:[r,0]};return this.positions[n]=l,l}}Ba(kh,"LineAtlas");class Oh{constructor(e){const t={},n=[];for(const i in e){const a=e[i],o=t[i]={};for(const e in a.glyphs){const t=a.glyphs[+e];if(!t||0===t.bitmap.width||0===t.bitmap.height)continue;const i=t.metrics.localGlyph?2:1,r={x:0,y:0,w:t.bitmap.width+2*i,h:t.bitmap.height+2*i};n.push(r),o[e]=r}}const{w:i,h:a}=Xp(n),o=new mu({width:i||1,height:a||1});for(const n in e){const i=e[n];for(const e in i.glyphs){const a=i.glyphs[+e];if(!a||0===a.bitmap.width||0===a.bitmap.height)continue;const r=t[n][e],s=a.metrics.localGlyph?2:1;mu.copy(a.bitmap,o,{x:0,y:0},{x:r.x+s,y:r.y+s},a.bitmap)}}this.image=o,this.positions=t}}Ba(Oh,"GlyphAtlas");class Th{constructor(e){this.tileID=new Wd(e.tileID.overscaledZ,e.tileID.wrap,e.tileID.canonical.z,e.tileID.canonical.x,e.tileID.canonical.y),this.tileZoom=e.tileZoom,this.uid=e.uid,this.zoom=e.zoom,this.canonical=e.tileID.canonical,this.pixelRatio=e.pixelRatio,this.tileSize=e.tileSize,this.source=e.source,this.overscaling=this.tileID.overscaleFactor(),this.showCollisionBoxes=e.showCollisionBoxes,this.collectResourceTiming=!!e.collectResourceTiming,this.returnDependencies=!!e.returnDependencies,this.promoteId=e.promoteId,this.enableTerrain=!!e.enableTerrain,this.isSymbolTile=e.isSymbolTile,this.tileTransform=Jf(e.tileID.canonical,e.projection),this.projection=e.projection}parse(e,t,n,i,a){this.status="parsing",this.data=e,this.collisionBoxArray=new Zr;const o=new Fm(Object.keys(e.layers).sort()),r=new _h(this.tileID,this.promoteId);r.bucketLayerIDs=[];const s={},l=new kh(256,256),c={featureIndex:r,iconDependencies:{},patternDependencies:{},glyphDependencies:{},lineAtlas:l,availableImages:n},u=t.familiesBySource[this.source];for(const t in u){const i=e.layers[t];if(!i)continue;let a=!1,l=!1;for(const e of u[t])"symbol"===e[0].type?a=!0:l=!0;if(!0===this.isSymbolTile&&!a)continue;if(!1===this.isSymbolTile&&!l)continue;1===i.version&&V(`Vector tile source "${this.source}" layer "${t}" does not use vector tile spec v2 and therefore may have some rendering errors.`);const d=o.encode(t),p=[];for(let e=0;e<i.length;e++){const n=i.feature(e),a=r.getId(n,t);p.push({feature:n,id:a,index:e,sourceLayerIndex:d})}for(const e of u[t]){const t=e[0];void 0!==this.isSymbolTile&&"symbol"===t.type!==this.isSymbolTile||t.minzoom&&this.zoom<Math.floor(t.minzoom)||t.maxzoom&&this.zoom>=t.maxzoom||"none"!==t.visibility&&(Ch(e,this.zoom,n),(s[t.id]=t.createBucket({index:r.bucketLayerIDs.length,layers:e,zoom:this.zoom,canonical:this.canonical,pixelRatio:this.pixelRatio,overscaling:this.overscaling,collisionBoxArray:this.collisionBoxArray,sourceLayerIndex:d,sourceID:this.source,enableTerrain:this.enableTerrain,projection:this.projection.spec,availableImages:n})).populate(p,c,this.tileID.canonical,this.tileTransform),r.bucketLayerIDs.push(e.map(e=>e.id)))}}let d,p,f,m;l.trim();const h={type:"maybePrepare",isSymbolTile:this.isSymbolTile,zoom:this.zoom},g=()=>{if(d)return a(d);if(p&&f&&m){const e=new Oh(p),t=new Jp(f,m);for(const i in s){const a=s[i];a instanceof Cm?(Ch(a.layers,this.zoom,n),zf(a,p,e.positions,f,t.iconPositions,this.showCollisionBoxes,n,this.tileID.canonical,this.tileZoom,this.projection)):a.hasPattern&&(a instanceof tp||a instanceof nd||a instanceof Pd)&&(Ch(a.layers,this.zoom,n),a.addFeatures(c,this.tileID.canonical,t.patternPositions,n,this.tileTransform))}this.status="done",a(null,{buckets:A(s).filter(e=>!e.isEmpty()),featureIndex:r,collisionBoxArray:this.collisionBoxArray,glyphAtlasImage:e.image,lineAtlas:l,imageAtlas:t,glyphMap:this.returnDependencies?p:null,iconMap:this.returnDependencies?f:null,glyphPositions:this.returnDependencies?e.positions:null})}},y=U(c.glyphDependencies,e=>Object.keys(e).map(Number));Object.keys(y).length?i.send("getGlyphs",{uid:this.uid,stacks:y},(e,t)=>{d||(d=e,p=t,g())},void 0,!1,h):p={};const v=Object.keys(c.iconDependencies);v.length?i.send("getImages",{icons:v,source:this.source,tileID:this.tileID,type:"icons"},(e,t)=>{d||(d=e,f=t,g())},void 0,!1,h):f={};const b=Object.keys(c.patternDependencies);b.length?i.send("getImages",{icons:b,source:this.source,tileID:this.tileID,type:"patterns"},(e,t)=>{d||(d=e,m=t,g())},void 0,!1,h):m={},g()}}function Ch(e,t,n){const i=new ar(t);for(const t of e)t.recalculate(i,n)}class Eh{constructor(e){this.entries={},this.scheduler=e}request(e,t,n,i){const a=this.entries[e]=this.entries[e]||{callbacks:[]};if(a.result){const[e,n]=a.result;return this.scheduler?this.scheduler.add(()=>{i(e,n)},t):i(e,n),()=>{}}return a.callbacks.push(i),a.cancel||(a.cancel=n((n,i)=>{a.result=[n,i];for(const e of a.callbacks)this.scheduler?this.scheduler.add(()=>{e(n,i)},t):e(n,i);setTimeout(()=>delete this.entries[e],3e3)})),()=>{a.result||(a.callbacks=a.callbacks.filter(e=>e!==i),a.callbacks.length||(a.cancel(),delete this.entries[e]))}}}function Sh(e,t,n){const i=JSON.stringify(e.request);return e.data&&(this.deduped.entries[i]={result:[null,e.data]}),this.deduped.request(i,{type:"parseTile",isSymbolTile:e.isSymbolTile,zoom:e.tileZoom},t=>{const i=fe(e.request,(e,i,a,o)=>{e?t(e):i&&t(null,{vectorTile:n?void 0:new wd(new qp(i)),rawData:i,cacheControl:a,expires:o})});return()=>{i.cancel(),t()}},t)}const Ph=[Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array];class Ih{static from(e){if(!(e instanceof ArrayBuffer))throw new Error("Data must be an instance of ArrayBuffer.");const[t,n]=new Uint8Array(e,0,2);if(219!==t)throw new Error("Data does not appear to be in a KDBush format.");const i=n>>4;if(1!==i)throw new Error(`Got v${i} data when expected v1.`);const a=Ph[15&n];if(!a)throw new Error("Unrecognized array type.");const[o]=new Uint16Array(e,2,1),[r]=new Uint32Array(e,4,1);return new Ih(r,o,a,e)}constructor(e,t=64,n=Float64Array,i){if(isNaN(e)||e<0)throw new Error(`Unpexpected numItems value: ${e}.`);this.numItems=+e,this.nodeSize=Math.min(Math.max(+t,2),65535),this.ArrayType=n,this.IndexArrayType=e<65536?Uint16Array:Uint32Array;const a=Ph.indexOf(this.ArrayType),o=2*e*this.ArrayType.BYTES_PER_ELEMENT,r=e*this.IndexArrayType.BYTES_PER_ELEMENT,s=(8-r%8)%8;if(a<0)throw new Error(`Unexpected typed array class: ${n}.`);i&&i instanceof ArrayBuffer?(this.data=i,this.ids=new this.IndexArrayType(this.data,8,e),this.coords=new this.ArrayType(this.data,8+r+s,2*e),this._pos=2*e,this._finished=!0):(this.data=new ArrayBuffer(8+o+r+s),this.ids=new this.IndexArrayType(this.data,8,e),this.coords=new this.ArrayType(this.data,8+r+s,2*e),this._pos=0,this._finished=!1,new Uint8Array(this.data,0,2).set([219,16+a]),new Uint16Array(this.data,2,1)[0]=t,new Uint32Array(this.data,4,1)[0]=e)}add(e,t){const n=this._pos>>1;return this.ids[n]=n,this.coords[this._pos++]=e,this.coords[this._pos++]=t,n}finish(){const e=this._pos>>1;if(e!==this.numItems)throw new Error(`Added ${e} items when expected ${this.numItems}.`);return function e(t,n,i,a,o,r){if(o-a<=i)return;const s=a+o>>1;(function e(t,n,i,a,o,r){for(;o>a;){if(o-a>600){const s=o-a+1,l=i-a+1,c=Math.log(s),u=.5*Math.exp(2*c/3),d=.5*Math.sqrt(c*u*(s-u)/s)*(l-s/2<0?-1:1);e(t,n,i,Math.max(a,Math.floor(i-l*u/s+d)),Math.min(o,Math.floor(i+(s-l)*u/s+d)),r)}const s=n[2*i+r];let l=a,c=o;for(Mh(t,n,a,i),n[2*o+r]>s&&Mh(t,n,a,o);l<c;){for(Mh(t,n,l,c),l++,c--;n[2*l+r]<s;)l++;for(;n[2*c+r]>s;)c--}n[2*a+r]===s?Mh(t,n,a,c):(c++,Mh(t,n,c,o)),c<=i&&(a=c+1),i<=c&&(o=c-1)}})(t,n,s,a,o,r),e(t,n,i,a,s-1,1-r),e(t,n,i,s+1,o,1-r)}(this.ids,this.coords,this.nodeSize,0,this.numItems-1,0),this._finished=!0,this}range(e,t,n,i){if(!this._finished)throw new Error("Data not yet indexed - call index.finish().");const{ids:a,coords:o,nodeSize:r}=this,s=[0,a.length-1,0],l=[];for(;s.length;){const c=s.pop()||0,u=s.pop()||0,d=s.pop()||0;if(u-d<=r){for(let r=d;r<=u;r++){const s=o[2*r],c=o[2*r+1];s>=e&&s<=n&&c>=t&&c<=i&&l.push(a[r])}continue}const p=d+u>>1,f=o[2*p],m=o[2*p+1];f>=e&&f<=n&&m>=t&&m<=i&&l.push(a[p]),(0===c?e<=f:t<=m)&&(s.push(d),s.push(p-1),s.push(1-c)),(0===c?n>=f:i>=m)&&(s.push(p+1),s.push(u),s.push(1-c))}return l}within(e,t,n){if(!this._finished)throw new Error("Data not yet indexed - call index.finish().");const{ids:i,coords:a,nodeSize:o}=this,r=[0,i.length-1,0],s=[],l=n*n;for(;r.length;){const c=r.pop()||0,u=r.pop()||0,d=r.pop()||0;if(u-d<=o){for(let n=d;n<=u;n++)jh(a[2*n],a[2*n+1],e,t)<=l&&s.push(i[n]);continue}const p=d+u>>1,f=a[2*p],m=a[2*p+1];jh(f,m,e,t)<=l&&s.push(i[p]),(0===c?e-n<=f:t-n<=m)&&(r.push(d),r.push(p-1),r.push(1-c)),(0===c?e+n>=f:t+n>=m)&&(r.push(p+1),r.push(u),r.push(1-c))}return s}}function Mh(e,t,n,i){Ah(e,n,i),Ah(t,2*n,2*i),Ah(t,2*n+1,2*i+1)}function Ah(e,t,n){const i=e[t];e[t]=e[n],e[n]=i}function jh(e,t,n,i){const a=e-n,o=t-i;return a*a+o*o}e.ARRAY_TYPE=Vs,e.AUTH_ERR_MSG=be,e.Aabb=zl,e.Actor=class{constructor(e,t,i){this.target=e,this.parent=t,this.mapId=i,this.callbacks={},this.cancelCallbacks={},z(["receive"],this),this.target.addEventListener("message",this.receive,!1),this.globalScope=X()?e:n,this.scheduler=new zm}send(e,t,n,i,a=!1,o){const r=Math.round(1e18*Math.random()).toString(36).substring(0,10);n&&(n.metadata=o,this.callbacks[r]=n);const s=K(this.globalScope)?void 0:[];return this.target.postMessage({id:r,type:e,hasCallback:!!n,targetMapId:i,mustQueue:a,sourceMapId:this.mapId,data:Ua(t,s)},s),{cancel:()=>{n&&delete this.callbacks[r],this.target.postMessage({id:r,type:"<cancel>",targetMapId:i,sourceMapId:this.mapId})}}}receive(e){const t=e.data,n=t.id;if(n&&(!t.targetMapId||this.mapId===t.targetMapId))if("<cancel>"===t.type){const e=this.cancelCallbacks[n];delete this.cancelCallbacks[n],e&&e.cancel()}else if(t.mustQueue||X()){const e=this.callbacks[n];this.cancelCallbacks[n]=this.scheduler.add(()=>this.processTask(n,t),e&&e.metadata||{type:"message"})}else this.processTask(n,t)}processTask(e,t){if("<response>"===t.type){const n=this.callbacks[e];delete this.callbacks[e],n&&(t.error?n(Ha(t.error)):n(null,Ha(t.data)))}else{const n=K(this.globalScope)?void 0:[],i=t.hasCallback?(t,i)=>{delete this.cancelCallbacks[e],this.target.postMessage({id:e,type:"<response>",sourceMapId:this.mapId,error:t?Ua(t):null,data:Ua(i,n)},n)}:e=>{},a=Ha(t.data);if(this.parent[t.type])this.parent[t.type](t.sourceMapId,a,i);else if(this.parent.getWorkerSource){const e=t.type.split(".");this.parent.getWorkerSource(t.sourceMapId,e[0],a.source)[e[1]](a,i)}else i(new Error("Could not find function "+t.type))}}remove(){this.scheduler.remove(),this.target.removeEventListener("message",this.receive,!1)}},e.CanonicalTileID=Ud,e.Color=At,e.ColorMode=fh,e.CullFaceMode=mh,e.DEMData=ch,e.DataConstantProperty=fr,e.DedupedRequest=Eh,e.DepthMode=dh,e.EXTENT=Hs,e.Elevation=class{isDataAvailableAtPoint(e){const t=this._source();if(this.isUsingMockSource()||!t||e.y<0||e.y>1)return!1;const n=t.getSource().maxzoom,i=1<<n,a=Math.floor(e.x),o=Math.floor((e.x-a)*i),r=Math.floor(e.y*i),s=this.findDEMTileFor(new Wd(n,a,n,o,r));return!(!s||!s.dem)}getAtPointOrZero(e,t=0){return this.getAtPoint(e,t)||0}getAtPoint(e,t,n=!0){if(this.isUsingMockSource())return null;null==t&&(t=null);const i=this._source();if(!i)return t;if(e.y<0||e.y>1)return t;const a=i.getSource().maxzoom,o=1<<a,r=Math.floor(e.x),s=e.x-r,l=new Wd(a,r,a,Math.floor(s*o),Math.floor(e.y*o)),c=this.findDEMTileFor(l);if(!c||!c.dem)return t;const u=c.dem,d=1<<c.tileID.canonical.z,p=(s*d-c.tileID.canonical.x)*u.dim,f=(e.y*d-c.tileID.canonical.y)*u.dim,m=Math.floor(p),h=Math.floor(f);return(n?this.exaggeration():1)*An(An(u.get(m,h),u.get(m,h+1),f-h),An(u.get(m+1,h),u.get(m+1,h+1),f-h),p-m)}getAtTileOffset(e,t,n){const i=1<<e.canonical.z;return this.getAtPointOrZero(new Sc(e.wrap+(e.canonical.x+t/Hs)/i,(e.canonical.y+n/Hs)/i))}getAtTileOffsetFunc(e,t,n,i){return a=>{const o=this.getAtTileOffset(e,a.x,a.y),r=i.upVector(e.canonical,a.x,a.y);return fl(r,r,o*i.upVectorScale(e.canonical,t,n).metersToTile),r}}getForTilePoints(e,t,n,i){if(this.isUsingMockSource())return!1;const a=bh.create(this,e,i);return!!a&&(t.forEach(e=>{e[2]=this.exaggeration()*a.getElevationAt(e[0],e[1],n)}),!0)}getMinMaxForTile(e){if(this.isUsingMockSource())return null;const t=this.findDEMTileFor(e);if(!t||!t.dem)return null;const n=t.dem.tree,i=t.tileID,a=1<<e.canonical.z-i.canonical.z;let o=e.canonical.x/a-i.canonical.x,r=e.canonical.y/a-i.canonical.y,s=0;for(let t=0;t<e.canonical.z-i.canonical.z&&!n.leaves[s];t++){o*=2,r*=2;const e=2*Math.floor(r)+Math.floor(o);s=n.childOffsets[s]+e,o%=1,r%=1}return{min:this.exaggeration()*n.minimums[s],max:this.exaggeration()*n.maximums[s]}}getMinElevationBelowMSL(){throw new Error("Pure virtual method called.")}raycast(e,t,n){throw new Error("Pure virtual method called.")}pointCoordinate(e){throw new Error("Pure virtual method called.")}_source(){throw new Error("Pure virtual method called.")}isUsingMockSource(){throw new Error("Pure virtual method called.")}exaggeration(){throw new Error("Pure virtual method called.")}findDEMTileFor(e){throw new Error("Pure virtual method called.")}get visibleDemTiles(){throw new Error("Getter must be implemented in subclass.")}},e.ErrorEvent=Qe,e.EvaluationParameters=ar,e.Event=$e,e.Evented=et,e.FillExtrusionBucket=Pd,e.Frustum=Bl,e.FrustumCorners=Rl,e.GLOBE_RADIUS=Fl,e.GLOBE_SCALE_MATCH_LATITUDE=45,e.GLOBE_ZOOM_THRESHOLD_MAX=6,e.GLOBE_ZOOM_THRESHOLD_MIN=5,e.GlobeSharedBuffers=class{constructor(e){this._createGrid(e),this._createPoles(e)}destroy(){this._poleIndexBuffer.destroy(),this._gridBuffer.destroy(),this._gridIndexBuffer.destroy(),this._poleNorthVertexBuffer.destroy(),this._poleSouthVertexBuffer.destroy();for(const e of this._poleSegments)e.destroy();for(const e of this._gridSegments)e.withSkirts.destroy(),e.withoutSkirts.destroy();if(this._wireframeIndexBuffer){this._wireframeIndexBuffer.destroy();for(const e of this._wireframeSegments)e.destroy()}}_fillGridMeshWithLods(e,t){const n=new kr,i=new zr,a=[],o=e+1+2,r=t[0]+1,s=t[0]+1+(1+t.length),l=(e,t,n)=>{let i=e===o-1?e-2:0===e?e:e-1;return i+=n?24575:0,[i,t]};for(let e=0;e<o;++e)n.emplaceBack(...l(e,0,!0));for(let e=0;e<r;++e)for(let t=0;t<o;++t)n.emplaceBack(...l(t,e,(0===t||t===o-1)&&!0));for(let e=0;e<t.length;++e){const i=t[e];for(let e=0;e<o;++e)n.emplaceBack(...l(e,i,!0))}for(let e=0;e<t.length;++e){const r=i.length,l=t[e]+1+2,c=new zr;for(let n=0;n<l-1;n++){const a=n===l-2,r=a?o*(s-t.length+e-n):o;for(let e=0;e<o-1;e++){const t=n*o+e;0===n||a||0===e||e===o-2?(c.emplaceBack(t+1,t,t+r),c.emplaceBack(t+r,t+r+1,t+1)):(i.emplaceBack(t+1,t,t+r),i.emplaceBack(t+r,t+r+1,t+1))}}const u=Us.simpleSegment(0,r,n.length,i.length-r);for(let e=0;e<c.uint16.length;e+=3)i.emplaceBack(c.uint16[e],c.uint16[e+1],c.uint16[e+2]);const d=Us.simpleSegment(0,r,n.length,i.length-r);a.push({withoutSkirts:u,withSkirts:d})}return{vertices:n,indices:i,segments:a}}_createGrid(e){const t=this._fillGridMeshWithLods(64,Ul);this._gridSegments=t.segments,this._gridBuffer=e.createVertexBuffer(t.vertices,Ll.members),this._gridIndexBuffer=e.createIndexBuffer(t.indices,!0)}_createPoles(e){const t=new zr;for(let e=0;e<=64;e++)t.emplaceBack(0,e+1,e+2);this._poleIndexBuffer=e.createIndexBuffer(t,!0);const n=new Wr,i=new Wr;this._poleSegments=[];for(let e=0,t=0;e<5;e++){const a=360/(1<<e);n.emplaceBack(0,-Fl,0,.5,0),i.emplaceBack(0,-Fl,0,.5,1);for(let e=0;e<=64;e++){const t=e/64,o=An(0,a,t),[r,s,l]=tc(fc,mc,o,Fl);n.emplaceBack(r,s,l,t,0),i.emplaceBack(r,s,l,t,1)}this._poleSegments.push(Us.simpleSegment(t,0,66,64)),t+=66}this._poleNorthVertexBuffer=e.createVertexBuffer(n,jl,!1),this._poleSouthVertexBuffer=e.createVertexBuffer(i,jl,!1)}getGridBuffers(e,t){return[this._gridBuffer,this._gridIndexBuffer,t?this._gridSegments[e].withSkirts:this._gridSegments[e].withoutSkirts]}getPoleBuffers(e){return[this._poleNorthVertexBuffer,this._poleSouthVertexBuffer,this._poleIndexBuffer,this._poleSegments[e]]}getWirefameBuffers(e,t){if(!this._wireframeSegments){const t=new Vr,n=64,i=n+1+2,a=1;this._wireframeSegments=[];for(let e=0,o=0;e<Ul.length;e++){const r=Ul[e];for(let e=a;e<r+a;e++)for(let o=a;o<n+a;o++){const n=e*i+o;t.emplaceBack(n,n+1),t.emplaceBack(n,n+i),t.emplaceBack(n,n+i+1)}const s=r*n*3;this._wireframeSegments.push(Us.simpleSegment(0,o,(r+1)*i,s)),o+=s}this._wireframeIndexBuffer=e.createIndexBuffer(t)}return[this._gridBuffer,this._wireframeIndexBuffer,this._wireframeSegments[t]]}},e.GlyphManager=Of,e.ImagePosition=Zp,e.KDBush=Ih,e.LivePerformanceUtils=Ue,e.LngLat=vc,e.LngLatBounds=Ws,e.LocalGlyphMode=kf,e.MAX_MERCATOR_LATITUDE=Cc,e.MercatorCoordinate=Sc,e.ONE_EM=24,e.OverscaledTileID=Wd,e.PerformanceMarkers=Fe,e.Point=b,e.Properties=gr,e.RGBAImage=hu,e.Ray=Dl,e.RequestManager=class{constructor(e,t,n){this._transformRequestFn=e,this._customAccessToken=t,this._silenceAuthErrors=!!n,this._createSkuToken()}_createSkuToken(){const e=function(){let e="";for(let t=0;t<10;t++)e+="0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ"[Math.floor(62*Math.random())];return{token:["1",p,e].join(""),tokenExpiresAt:Date.now()+432e5}}();this._skuToken=e.token,this._skuTokenExpiresAt=e.tokenExpiresAt}_isSkuTokenExpired(){return Date.now()>this._skuTokenExpiresAt}transformRequest(e,t){return this._transformRequestFn&&this._transformRequestFn(e,t)||{url:e}}normalizeStyleURL(e,t){if(!_e(e))return e;const n=Ce(e);return n.path="/styles/v1"+n.path,this._makeAPIURL(n,this._customAccessToken||t)}normalizeGlyphsURL(e,t){if(!_e(e))return e;const n=Ce(e);return n.path="/fonts/v1"+n.path,this._makeAPIURL(n,this._customAccessToken||t)}normalizeSourceURL(e,t,n,i){if(!_e(e))return e;const a=Ce(e);return a.path=`/v4/${a.authority}.json`,a.params.push("secure"),n&&a.params.push("language="+n),i&&a.params.push("worldview="+i),this._makeAPIURL(a,this._customAccessToken||t)}normalizeSpriteURL(e,t,n,i){const a=Ce(e);return _e(e)?(a.path=`/styles/v1${a.path}/sprite${t}${n}`,this._makeAPIURL(a,this._customAccessToken||i)):(a.path+=`${t}${n}`,Ee(a))}normalizeTileURL(e,t,n){if(this._isSkuTokenExpired()&&this._createSkuToken(),e&&!_e(e))return e;const i=Ce(e);i.path=i.path.replace(/(\.(png|jpg)\d*)(?=$)/,`${t||n&&"raster"!==i.authority&&512===n?"@2x":""}${r.supported?".webp":"$1"}`),"raster"===i.authority?i.path=`/${o.RASTER_URL_PREFIX}${i.path}`:(i.path=i.path.replace(/^.+\/v4\//,"/"),i.path=`/${o.TILE_URL_VERSION}${i.path}`);const a=this._customAccessToken||function(e){for(const t of e){const e=t.match(/^access_token=(.*)$/);if(e)return e[1]}return null}(i.params)||o.ACCESS_TOKEN;return o.REQUIRE_ACCESS_TOKEN&&a&&this._skuToken&&i.params.push("sku="+this._skuToken),this._makeAPIURL(i,a)}canonicalizeTileURL(e,t){const n=Ce(e);if(!n.path.match(/^(\/v4\/|\/raster\/v1\/)/)||!n.path.match(/\.[\w]+$/))return e;let i="mapbox://";n.path.match(/^\/raster\/v1\//)?i+="raster/"+n.path.replace(`/${o.RASTER_URL_PREFIX}/`,""):i+="tiles/"+n.path.replace(`/${o.TILE_URL_VERSION}/`,"");let a=n.params;return t&&(a=a.filter(e=>!e.match(/^access_token=/))),a.length&&(i+="?"+a.join("&")),i}canonicalizeTileset(e,t){const n=!!t&&_e(t),i=[];for(const t of e.tiles||[])we(t)?i.push(this.canonicalizeTileURL(t,n)):i.push(t);return i}_makeAPIURL(e,t){const n="See https://docs.mapbox.com/api/overview/#access-tokens-and-token-scopes",i=Ce(o.API_URL);if(e.protocol=i.protocol,e.authority=i.authority,"http"===e.protocol){const t=e.params.indexOf("secure");t>=0&&e.params.splice(t,1)}if("/"!==i.path&&(e.path=`${i.path}${e.path}`),!o.REQUIRE_ACCESS_TOKEN)return Ee(e);if(t=t||o.ACCESS_TOKEN,!this._silenceAuthErrors){if(!t)throw new Error("An API access token is required to use Mapbox GL. "+n);if("s"===t[0])throw new Error("Use a public access token (pk.*) with Mapbox GL, not a secret access token (sk.*). "+n)}return e.params=e.params.filter(e=>-1===e.indexOf("access_token")),e.params.push("access_token="+(t||"")),Ee(e)}},e.ResourceType=ce,e.SegmentVector=Us,e.SourceCache=hh,e.StencilMode=ph,e.StructArrayLayout1ui2=Gr,e.StructArrayLayout2f1f2i16=Dr,e.StructArrayLayout2i4=kr,e.StructArrayLayout2ui4=Vr,e.StructArrayLayout3f12=Br,e.StructArrayLayout3ui6=zr,e.StructArrayLayout4i8=Tr,e.StructArrayLayout5f20=Wr,e.Texture=Rm,e.Tile=Jm,e.Transitionable=sr,e.Uniform1f=vs,e.Uniform1i=class extends ys{constructor(e){super(e),this.current=0}set(e,t,n){this.fetchUniformLocation(e,t)&&this.current!==n&&(this.current=n,this.gl.uniform1i(this.location,n))}},e.Uniform2f=class extends ys{constructor(e){super(e),this.current=[0,0]}set(e,t,n){this.fetchUniformLocation(e,t)&&(n[0]===this.current[0]&&n[1]===this.current[1]||(this.current=n,this.gl.uniform2f(this.location,n[0],n[1])))}},e.Uniform3f=class extends ys{constructor(e){super(e),this.current=[0,0,0]}set(e,t,n){this.fetchUniformLocation(e,t)&&(n[0]===this.current[0]&&n[1]===this.current[1]&&n[2]===this.current[2]||(this.current=n,this.gl.uniform3f(this.location,n[0],n[1],n[2])))}},e.Uniform4f=bs,e.UniformColor=_s,e.UniformMatrix2f=class extends ys{constructor(e){super(e),this.current=ks}set(e,t,n){if(this.fetchUniformLocation(e,t))for(let e=0;e<4;e++)if(n[e]!==this.current[e]){this.current=n,this.gl.uniformMatrix2fv(this.location,!1,n);break}}},e.UniformMatrix3f=class extends ys{constructor(e){super(e),this.current=xs}set(e,t,n){if(this.fetchUniformLocation(e,t))for(let e=0;e<9;e++)if(n[e]!==this.current[e]){this.current=n,this.gl.uniformMatrix3fv(this.location,!1,n);break}}},e.UniformMatrix4f=class extends ys{constructor(e){super(e),this.current=ws}set(e,t,n){if(this.fetchUniformLocation(e,t)){if(n[12]!==this.current[12]||n[0]!==this.current[0])return this.current=n,void this.gl.uniformMatrix4fv(this.location,!1,n);for(let e=1;e<16;e++)if(n[e]!==this.current[e]){this.current=n,this.gl.uniformMatrix4fv(this.location,!1,n);break}}}},e.UnwrappedTileID=Hd,e.ValidationError=Ji,e.VectorTileFeature=xd,e.VectorTileWorkerSource=class extends et{constructor(e,t,n,i,a){super(),this.actor=e,this.layerIndex=t,this.availableImages=n,this.loadVectorData=a||Sh,this.loading={},this.loaded={},this.deduped=new Eh(e.scheduler),this.isSpriteLoaded=i,this.scheduler=e.scheduler}loadTile(e,t){const n=e.uid,i=e&&e.request,a=i&&i.collectResourceTiming,o=this.loading[n]=new Th(e);o.abort=this.loadVectorData(e,(r,s)=>{const l=!this.loading[n];if(delete this.loading[n],l||r||!s)return o.status="done",l||(this.loaded[n]=o),t(r);const c=s.rawData,u={};s.expires&&(u.expires=s.expires),s.cacheControl&&(u.cacheControl=s.cacheControl),o.vectorTile=s.vectorTile||new wd(new qp(c));const d=()=>{o.parse(o.vectorTile,this.layerIndex,this.availableImages,this.actor,(e,n)=>{if(e||!n)return t(e);const o={};if(a){const e=qe(i);e.length>0&&(o.resourceTiming=JSON.parse(JSON.stringify(e)))}t(null,j({rawTileData:c.slice(0)},n,u,o))})};this.isSpriteLoaded?d():this.once("isSpriteLoaded",()=>{this.scheduler?this.scheduler.add(d,{type:"parseTile",isSymbolTile:e.isSymbolTile,zoom:e.tileZoom}):d()}),this.loaded=this.loaded||{},this.loaded[n]=o})}reloadTile(e,t){const n=this.loaded,i=e.uid,a=this;if(n&&n[i]){const o=n[i];o.showCollisionBoxes=e.showCollisionBoxes,o.enableTerrain=!!e.enableTerrain,o.projection=e.projection,o.tileTransform=Jf(e.tileID.canonical,e.projection);const r=(e,n)=>{const i=o.reloadCallback;i&&(delete o.reloadCallback,o.parse(o.vectorTile,a.layerIndex,this.availableImages,a.actor,i)),t(e,n)};"parsing"===o.status?o.reloadCallback=r:"done"===o.status&&(o.vectorTile?o.parse(o.vectorTile,this.layerIndex,this.availableImages,this.actor,r):r())}}abortTile(e,t){const n=e.uid,i=this.loading[n];i&&(i.abort&&i.abort(),delete this.loading[n]),t()}removeTile(e,t){const n=this.loaded,i=e.uid;n&&n[i]&&delete n[i],t()}},e.WritingMode=Kp,e.ZoomDependentExpression=Yi,e.add=ll,e.addDynamicAttributes=xm,e.adjoint=function(e,t){var n=t[0],i=t[1],a=t[2],o=t[3],r=t[4],s=t[5],l=t[6],c=t[7],u=t[8];return e[0]=r*u-s*c,e[1]=a*c-i*u,e[2]=i*s-a*r,e[3]=s*l-o*u,e[4]=n*u-a*l,e[5]=a*o-n*s,e[6]=o*c-r*l,e[7]=i*l-n*c,e[8]=n*r-i*o,e},e.asyncAll=M,e.bezier=C,e.bindAll=z,e.boundsAttributes=Xm,e.bufferConvexPolygon=function(e,t){const n=[];for(let i=0;i<e.length;i++){const a=I(i-1,-1,e.length-1),o=I(i+1,-1,e.length-1),r=e[i],s=e[o],l=e[a].sub(r).unit(),c=s.sub(r).unit(),u=c.angleWithSep(l.x,l.y),d=l.add(c).unit().mult(-1*t/Math.sin(u/2));n.push(r.add(d))}return n},e.cacheEntryPossiblyAdded=function(e){le++,le>ae&&(e.getActor().send("enforceCacheSizeLimit",ie),le=0)},e.calculateGlobeLabelMatrix=function(e,t){const{x:n,y:i}=e.point,a=lc(n,i,e.worldSize/e._pixelsPerMercatorPixel,0,0);return Js(a,a,sc(Zl(t)))},e.calculateGlobeMatrix=function(e){const{x:t,y:n}=e.point,{lng:i,lat:a}=e._center;return lc(t,n,e.worldSize,i,a)},e.calculateGlobeMercatorMatrix=function(e){const t=e.pixelsPerMeter,n=t/xc(1,e.center.lat),i=Xs(new Float64Array(16));return Ks(i,i,[e.point.x,e.point.y,0]),$s(i,i,[n,n,t]),Float32Array.from(i)},e.circumferenceAtLatitude=bc,e.clamp=S,e.clearTileCache=function(e){if(!oe())return;const t=n.caches.delete(ee);e&&t.catch(e).then(()=>e())},e.clipLine=bf,e.clone=function(e){var t=new Vs(16);return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t},e.clone$1=W,e.collisionCircleLayout=pp,e.config=o,e.conjugate=function(e,t){return e[0]=-t[0],e[1]=-t[1],e[2]=-t[2],e[3]=t[3],e},e.create=function(){var e=new Vs(16);return Vs!=Float32Array&&(e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[11]=0,e[12]=0,e[13]=0,e[14]=0),e[0]=1,e[5]=1,e[10]=1,e[15]=1,e},e.create$1=Gs,e.createExpression=Vi,e.createLayout=wr,e.createStyleLayer=function(e){return"custom"===e.type?new jm(e):new Dm[e.type](e)},e.cross=yl,e.degToRad=x,e.distance=function(e,t){return Math.hypot(t[0]-e[0],t[1]-e[1],t[2]-e[2])},e.div=function(e,t,n){return e[0]=t[0]/n[0],e[1]=t[1]/n[1],e[2]=t[2]/n[2],e},e.dot=gl,e.earthRadius=hc,e.ease=E,e.easeCubicInOut=T,e.ecefToLatLng=function([e,t,n]){const i=Math.hypot(e,t,n),a=Math.atan2(e,n),o=.5*Math.PI-Math.acos(-t/i);return new vc(k(a),k(o))},e.emitValidationErrors=ja,e.endsWith=F,e.enforceCacheSizeLimit=function(e){re(),te&&te.then(t=>{t.keys().then(n=>{for(let i=0;i<n.length-e;i++)t.delete(n[i])})})},e.evaluateSizeForFeature=hp,e.evaluateSizeForZoom=gp,e.evaluateVariableOffset=Bf,e.evented=er,e.exactEquals=function(e,t){return e[0]===t[0]&&e[1]===t[1]&&e[2]===t[2]&&e[3]===t[3]},e.exactEquals$1=function(e,t){return e[0]===t[0]&&e[1]===t[1]&&e[2]===t[2]},e.exported=Ze,e.exported$1=r,e.extend=j,e.extend$1=nt,e.fillExtrusionHeightLift=Dd,e.filterObject=H,e.fromMat4=function(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[4],e[4]=t[5],e[5]=t[6],e[6]=t[8],e[7]=t[9],e[8]=t[10],e},e.fromQuat=function(e,t){var n=t[0],i=t[1],a=t[2],o=t[3],r=n+n,s=i+i,l=a+a,c=n*r,u=i*r,d=i*s,p=a*r,f=a*s,m=a*l,h=o*r,g=o*s,y=o*l;return e[0]=1-d-m,e[1]=u+y,e[2]=p-g,e[3]=0,e[4]=u-y,e[5]=1-c-m,e[6]=f+h,e[7]=0,e[8]=p+g,e[9]=f-h,e[10]=1-c-d,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e},e.fromRotation=function(e,t){var n=Math.sin(t),i=Math.cos(t);return e[0]=i,e[1]=n,e[2]=0,e[3]=-n,e[4]=i,e[5]=0,e[6]=0,e[7]=0,e[8]=1,e},e.fromScaling=tl,e.furthestTileCorner=function(e){const t=Math.round((e+45+360)%360/90)%4;return O[t]},e.getAABBPointSquareDist=function(e,t,n){let i=0;for(let a=0;a<2;++a){const o=n?n[a]:0;e[a]>o&&(i+=(e[a]-o)*(e[a]-o)),t[a]<o&&(i+=(o-t[a])*(o-t[a]))}return i},e.getAnchorAlignment=lf,e.getAnchorJustification=Ff,e.getBounds=function(e){let t=1/0,n=1/0,i=-1/0,a=-1/0;for(const o of e)t=Math.min(t,o.x),n=Math.min(n,o.y),i=Math.max(i,o.x),a=Math.max(a,o.y);return{min:new b(t,n),max:new b(i,a)}},e.getColumn=Q,e.getDefaultExportFromCjs=f,e.getGridMatrix=function(e,t,n,i){const a=t.getNorth(),o=t.getSouth(),r=t.getWest(),s=t.getEast(),l=1<<e.z,c=s-r,u=a-o,d=c/64,p=-u/Ul[n],f=[0,d,0,p,0,0,a,r,0];if(e.z>0){const e=180/i;Ys(f,f,[e/c+1,0,0,0,e/u+1,0,-.5*e/d,.5*e/p,1])}return f[2]=l,f[5]=e.x,f[8]=e.y,f},e.getImage=ve,e.getJSON=function(e,t){return pe(j(e,{type:"json"}),t)},e.getLatitudinalLod=function(e){const t=Cc-5;e=S(e,-t,t)/t*90;const n=Math.pow(Math.abs(Math.sin(x(e))),3);return Math.round(n*(Ul.length-1))},e.getMapSessionAPI=Be,e.getPerformanceMeasurement=qe,e.getProjection=ym,e.getRTLTextPluginStatus=tr,e.getReferrer=de,e.getTilePoint=function(e,{x:t,y:n},i=0){return new b(((t-i)*e.scale-e.x)*Hs,(n*e.scale-e.y)*Hs)},e.getTileVec3=function(e,t,n=0){return sl(((t.x-n)*e.scale-e.x)*Hs,(t.y*e.scale-e.y)*Hs,Tc(t.z,t.y))},e.getVideo=function(e,t){const i=n.document.createElement("video");i.muted=!0,i.onloadstart=function(){t(null,i)};for(let t=0;t<e.length;t++){const a=n.document.createElement("source");me(e[t])||(i.crossOrigin="Anonymous"),a.src=e[t],i.appendChild(a)}return{cancel:()=>{}}},e.globeCenterToScreenPoint=function(e){const t=[0,0,0],n=Xs(new Float64Array(16));return Js(n,e.pixelMatrix,e.globeMatrix),vl(t,t,n),new b(t[0],t[1])},e.globeDenormalizeECEF=sc,e.globeECEFOrigin=function(e,t){const n=[0,0,0];return vl(n,n,rc(Zl(t.canonical))),vl(n,n,e),n},e.globeMetersToEcef=Vl,e.globeNormalizeECEF=rc,e.globePixelsToTileUnits=function(e,t){return Hs/(512*Math.pow(2,e))*ac(Zl(t))},e.globePoleMatrixForTile=function(e,t,n){const i=Xs(new Float64Array(16)),a=(t/(1<<e)-.5)*Math.PI*2;return el(i,n.globeMatrix,a),Float32Array.from(i)},e.globeTileBounds=Zl,e.globeTiltAtLngLat=uc,e.globeToMercatorTransition=cc,e.globeUseCustomAntiAliasing=function(e,t,n){const i=cc(n.zoom),a=e.style.map._antialias,o=!!t.extStandardDerivatives,r=t.extStandardDerivativesForceOff||e.terrain&&e.terrain.exaggeration()>0;return 0===i&&!a&&!r&&o},e.identity=Xs,e.identity$1=Sl,e.invert=Zs,e.isFullscreen=function(){return!!n.document.fullscreenElement||!!n.document.webkitFullscreenElement},e.isLngLatBehindGlobe=dc,e.isMapAuthenticated=function(e){return ze.has(e)},e.isMapboxURL=_e,e.isSafariWithAntialiasingBug=function(e){const t=e.navigator?e.navigator.userAgent:null;return!!K(e)&&t&&(t.match("Version/15.4")||t.match("Version/15.5")||t.match(/CPU (OS|iPhone OS) (15_4|15_5) like Mac OS X/))},e.latFromMercatorY=Oc,e.latLngToECEF=nc,e.len=kl,e.length=rl,e.length$1=function(e){return Math.hypot(e[0],e[1],e[2],e[3])},e.lngFromMercatorX=kc,e.loadVectorTile=Sh,e.makeRequest=pe,e.mapValue=function(e,t,n,i,a){return S((e-t)/(n-t)*(a-i)+i,i,a)},e.mercatorScale=Ec,e.mercatorXfromLng=_c,e.mercatorYfromLat=wc,e.mercatorZfromAltitude=xc,e.mul=il,e.mul$1=xl,e.multiply=Js,e.multiply$1=Ys,e.multiply$2=ul,e.nextPowerOfTwo=R,e.normalize=hl,e.normalize$1=Ml,e.normalize$2=Tl,e.number=An,e.ortho=function(e,t,n,i,a,o,r){var s=1/(t-n),l=1/(i-a),c=1/(o-r);return e[0]=-2*s,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=-2*l,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=2*c,e[11]=0,e[12]=(t+n)*s,e[13]=(a+i)*l,e[14]=(r+o)*c,e[15]=1,e},e.pbf=xp,e.perspective=function(e,t,n,i,a){var o,r=1/Math.tan(t/2);return e[0]=r/n,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=r,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[11]=-1,e[12]=0,e[13]=0,e[15]=0,null!=a&&a!==1/0?(e[10]=(a+i)*(o=1/(i-a)),e[14]=2*a*i*o):(e[10]=-1,e[14]=-2*i),e},e.pick=function(e,t){const n={};for(let i=0;i<t.length;i++){const a=t[i];a in e&&(n[a]=e[a])}return n},e.plugin=ir,e.pointGeometry=y,e.polesInViewport=function(e){const t=Xs(new Float64Array(16));Js(t,e.pixelMatrix,e.globeMatrix);const n=[0,Hl,0],i=[0,Wl,0];return vl(n,n,t),vl(i,i,t),[n[0]>0&&n[0]<=e.width&&n[1]>0&&n[1]<=e.height&&!dc(e,new vc(e.center.lat,90)),i[0]>0&&i[0]<=e.width&&i[1]>0&&i[1]<=e.height&&!dc(e,new vc(e.center.lat,-90))]},e.polygonContainsPoint=Jc,e.polygonIntersectsBox=Kc,e.polygonIntersectsPolygon=Uc,e.polygonizeBounds=function(e,t,n=0,i=!0){const a=new b(n,n),o=e.sub(a),r=t.add(a),s=[o,new b(r.x,o.y),r,new b(o.x,r.y)];return i&&s.push(o.clone()),s},e.posAttributes=Ll,e.postMapLoadEvent=Ne,e.postPerformanceEvent=De,e.postTurnstileEvent=Ae,e.potpack=Xp,e.prevPowerOfTwo=function(e){return e<=1?1:Math.pow(2,Math.floor(Math.log(e)/Math.LN2))},e.radToDeg=k,e.refProperties=["type","source","source-layer","minzoom","maxzoom","filter","layout"],e.registerForPluginStateChange=function(e){return e({pluginStatus:Jo,pluginURL:Ko}),er.on("pluginStateChange",e),e},e.removeAuthState=function(e){ze.delete(e)},e.renderColorRamp=yu,e.resample=Ic,e.rotateX=Qs,e.rotateX$1=Pl,e.rotateY=el,e.rotateY$1=Il,e.rotateZ=function(e,t,n){var i=Math.sin(n),a=Math.cos(n),o=t[0],r=t[1],s=t[2],l=t[3],c=t[4],u=t[5],d=t[6],p=t[7];return t!==e&&(e[8]=t[8],e[9]=t[9],e[10]=t[10],e[11]=t[11],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e[0]=o*a+c*i,e[1]=r*a+u*i,e[2]=s*a+d*i,e[3]=l*a+p*i,e[4]=c*a-o*i,e[5]=u*a-r*i,e[6]=d*a-s*i,e[7]=p*a-l*i,e},e.rotateZ$1=function(e,t,n){n*=.5;var i=t[0],a=t[1],o=t[2],r=t[3],s=Math.sin(n),l=Math.cos(n);return e[0]=i*l+a*s,e[1]=a*l-i*s,e[2]=o*l+r*s,e[3]=r*l-o*s,e},e.scale=$s,e.scale$1=Ol,e.scale$2=fl,e.scaleAndAdd=ml,e.set=function(e,t,n,i){return e[0]=t,e[1]=n,e[2]=i,e},e.setCacheLimits=function(e,t){ie=e,ae=t},e.setColumn=function(e,t,n){e[4*t+0]=n[0],e[4*t+1]=n[1],e[4*t+2]=n[2],e[4*t+3]=n[3]},e.setRTLTextPlugin=function(e,t,n=!1){if(Jo===Go||Jo===Yo||Jo===Xo)throw new Error("setRTLTextPlugin cannot be called multiple times.");Ko=Ze.resolveURL(e),Jo=Go,Zo=t,Qo(),n||nr()},e.smoothstep=P,e.spec=tt,e.squaredLength=function(e){var t=e[0],n=e[1],i=e[2];return t*t+n*n+i*i},e.storeAuthState=function(e,t){t?ze.add(e):ze.delete(e)},e.sub=wl,e.subtract=cl,e.symbolSize=yp,e.tileAABB=function(e,t,n,i,a,o,r,s,l){if("globe"===l.name)return function(e,t,n){const i=t/e.worldSize,a=e.globeMatrix;if(n.z<=1){const e=Zl(n).getCorners();return $l(e,a,i),zl.fromPoints(e)}const o=Ql(n),r=ec(o);$l(r,a,i);const s=Number.MAX_VALUE,l=[-s,-s,-s],c=[s,s,s];if(o.contains(e.center)){for(const e of r)dl(c,c,e),pl(l,l,e);l[2]=0;const t=e.point,n=[t.x*i,t.y*i,0];return dl(c,c,n),pl(l,l,n),new zl(c,l)}const u=[a[12]*i,a[13]*i,a[14]*i],d=o.getCenter(),p=S(e.center.lat,-Cc,Cc),f=S(d.lat,-Cc,Cc),m=_c(e.center.lng),h=wc(p);let g=m-_c(d.lng);const y=h-wc(f);g>.5?g-=1:g<-.5&&(g+=1);let v=0;Math.abs(g)>Math.abs(y)?v=g>=0?1:3:(v=y>=0?0:2,ml(u,u,[a[4]*i,a[5]*i,a[6]*i],-Math.sin(x(y>=0?o.getSouth():o.getNorth()))*Fl));const b=r[v],_=r[(v+1)%4],w=new Yl(b,_,u),k=[Xl(w,0)||b[0],Xl(w,1)||b[1],Xl(w,2)||b[2]],O=cc(e.zoom);if(O>0){const i=function({x:e,y:t,z:n},i,a,o,r){const s=1/(1<<n);let l=e*s,c=l+s,u=t*s,d=u+s,p=0;const f=(l+c)/2-o;return f>.5?p=-1:f<-.5&&(p=1),l=((l+p)*i-(o*=i))*a+o,c=((c+p)*i-o)*a+o,u=(u*i-(r*=i))*a+r,d=(d*i-r)*a+r,[[l,d,0],[c,d,0],[c,u,0],[l,u,0]]}(n,t,e._pixelsPerMercatorPixel,m,h);for(let e=0;e<r.length;e++)Jl(r[e],i[e],O);const a=ll([],i[v],i[(v+1)%4]);fl(a,a,.5),Jl(k,a,O)}for(const e of r)dl(c,c,e),pl(l,l,e);return c[2]=Math.min(b[2],_[2]),dl(c,c,k),pl(l,l,k),new zl(c,l)}(e,t,new Ud(n,i,a));const c=Jf({z:n,x:i,y:a},l);return new zl([(o+c.x/c.scale)*t,t*(c.y/c.scale),r],[(o+c.x2/c.scale)*t,t*(c.y2/c.scale),s])},e.tileCornersToBounds=Ql,e.tileTransform=Jf,e.transformMat3=function(e,t,n){var i=t[0],a=t[1],o=t[2];return e[0]=i*n[0]+a*n[3]+o*n[6],e[1]=i*n[1]+a*n[4]+o*n[7],e[2]=i*n[2]+a*n[5]+o*n[8],e},e.transformMat4=vl,e.transformMat4$1=Cl,e.transformQuat=bl,e.transitionTileAABBinECEF=Kl,e.translate=Ks,e.transpose=function(e,t){if(e===t){var n=t[1],i=t[2],a=t[5];e[1]=t[3],e[2]=t[6],e[3]=n,e[5]=t[7],e[6]=i,e[7]=a}else e[0]=t[0],e[1]=t[3],e[2]=t[6],e[3]=t[1],e[4]=t[4],e[5]=t[7],e[6]=t[2],e[7]=t[5],e[8]=t[8];return e},e.triggerPluginCompletionEvent=$o,e.uniqueId=L,e.updateGlobeVertexNormal=function(e,t,n,i,a){const o=5*t+2;e.float32[o+0]=n,e.float32[o+1]=i,e.float32[o+2]=a},e.validateCustomStyleLayer=function(e){const t=[],n=e.id;return void 0===n&&t.push({message:`layers.${n}: missing required property "id"`}),void 0===e.render&&t.push({message:`layers.${n}: missing required method "render"`}),e.renderingMode&&"2d"!==e.renderingMode&&"3d"!==e.renderingMode&&t.push({message:`layers.${n}: property "renderingMode" must be either "2d" or "3d"`}),t},e.validateFilter=e=>Aa(ma(e)),e.validateFog=e=>Aa(Ta(e)),e.validateLayer=e=>Aa(va(e)),e.validateLight=e=>Aa(ka(e)),e.validateSource=e=>Aa(wa(e)),e.validateStyle=Pa,e.validateTerrain=e=>Aa(Oa(e)),e.values=A,e.vectorTile=cd,e.version=i,e.warnOnce=V,e.window=n,e.wrap=I})),a(0,(function(e){function t(e){if("number"==typeof e||"boolean"==typeof e||"string"==typeof e||null==e)return JSON.stringify(e);if(Array.isArray(e)){let n="[";for(const i of e)n+=t(i)+",";return n+"]"}let n="{";for(const i of Object.keys(e).sort())n+=`${i}:${t(e[i])},`;return n+"}"}function n(n){let i="";for(const a of e.refProperties)i+="/"+t(n[a]);return i}class i{constructor(e){this.keyCache={},e&&this.replace(e)}replace(e){this._layerConfigs={},this._layers={},this.update(e,[])}update(t,i){for(const n of t)this._layerConfigs[n.id]=n,(this._layers[n.id]=e.createStyleLayer(n)).compileFilter(),this.keyCache[n.id]&&delete this.keyCache[n.id];for(const e of i)delete this.keyCache[e],delete this._layerConfigs[e],delete this._layers[e];this.familiesBySource={};const a=function(e,t){const i={};for(let a=0;a<e.length;a++){const o=t&&t[e[a].id]||n(e[a]);t&&(t[e[a].id]=o);let r=i[o];r||(r=i[o]=[]),r.push(e[a])}const a=[];for(const e in i)a.push(i[e]);return a}(e.values(this._layerConfigs),this.keyCache);for(const e of a){const t=e.map(e=>this._layers[e.id]),n=t[0];if("none"===n.visibility)continue;const i=n.source||"";let a=this.familiesBySource[i];a||(a=this.familiesBySource[i]={});const o=n.sourceLayer||"_geojsonTileLayer";let r=a[o];r||(r=a[o]=[]),r.push(t)}}}class a{loadTile(t,n){const{uid:i,encoding:a,rawImageData:o,padding:r,buildQuadTree:s}=t,l=e.window.ImageBitmap&&o instanceof e.window.ImageBitmap?this.getImageData(o,r):o;n(null,new e.DEMData(i,l,a,r<1,s))}getImageData(e,t){this.offscreenCanvas&&this.offscreenCanvasContext||(this.offscreenCanvas=new OffscreenCanvas(e.width,e.height),this.offscreenCanvasContext=this.offscreenCanvas.getContext("2d",{willReadFrequently:!0})),this.offscreenCanvas.width=e.width,this.offscreenCanvas.height=e.height,this.offscreenCanvasContext.drawImage(e,0,0,e.width,e.height);const n=this.offscreenCanvasContext.getImageData(-t,-t,e.width+2*t,e.height+2*t);return this.offscreenCanvasContext.clearRect(0,0,this.offscreenCanvas.width,this.offscreenCanvas.height),n}}function o(e,t){if(0!==e.length){r(e[0],t);for(var n=1;n<e.length;n++)r(e[n],!t)}}function r(e,t){for(var n=0,i=0,a=0,o=e.length,r=o-1;a<o;r=a++){var s=(e[a][0]-e[r][0])*(e[r][1]+e[a][1]),l=n+s;i+=Math.abs(n)>=Math.abs(s)?n-l+s:s-l+n,n=l}n+i>=0!=!!t&&e.reverse()}var s=e.getDefaultExportFromCjs((function e(t,n){var i,a=t&&t.type;if("FeatureCollection"===a)for(i=0;i<t.features.length;i++)e(t.features[i],n);else if("GeometryCollection"===a)for(i=0;i<t.geometries.length;i++)e(t.geometries[i],n);else if("Feature"===a)e(t.geometry,n);else if("Polygon"===a)o(t.coordinates,n);else if("MultiPolygon"===a)for(i=0;i<t.coordinates.length;i++)o(t.coordinates[i],n);return t}));const l=e.VectorTileFeature.prototype.toGeoJSON;var c={exports:{}},u=e.pointGeometry,d=e.vectorTile.VectorTileFeature,p=f;function f(e,t){this.options=t||{},this.features=e,this.length=e.length}function m(e,t){this.id="number"==typeof e.id?e.id:void 0,this.type=e.type,this.rawGeometry=1===e.type?[e.geometry]:e.geometry,this.properties=e.tags,this.extent=t||4096}f.prototype.feature=function(e){return new m(this.features[e],this.options.extent)},m.prototype.loadGeometry=function(){var e=this.rawGeometry;this.geometry=[];for(var t=0;t<e.length;t++){for(var n=e[t],i=[],a=0;a<n.length;a++)i.push(new u(n[a][0],n[a][1]));this.geometry.push(i)}return this.geometry},m.prototype.bbox=function(){this.geometry||this.loadGeometry();for(var e=this.geometry,t=1/0,n=-1/0,i=1/0,a=-1/0,o=0;o<e.length;o++)for(var r=e[o],s=0;s<r.length;s++){var l=r[s];t=Math.min(t,l.x),n=Math.max(n,l.x),i=Math.min(i,l.y),a=Math.max(a,l.y)}return[t,i,n,a]},m.prototype.toGeoJSON=d.prototype.toGeoJSON;var h=e.pbf,g=p;function y(e){var t=new h;return function(e,t){for(var n in e.layers)t.writeMessage(3,v,e.layers[n])}(e,t),t.finish()}function v(e,t){var n;t.writeVarintField(15,e.version||1),t.writeStringField(1,e.name||""),t.writeVarintField(5,e.extent||4096);var i={keys:[],values:[],keycache:{},valuecache:{}};for(n=0;n<e.length;n++)i.feature=e.feature(n),t.writeMessage(2,b,i);var a=i.keys;for(n=0;n<a.length;n++)t.writeStringField(3,a[n]);var o=i.values;for(n=0;n<o.length;n++)t.writeMessage(4,O,o[n])}function b(e,t){var n=e.feature;void 0!==n.id&&t.writeVarintField(1,n.id),t.writeMessage(2,_,e),t.writeVarintField(3,n.type),t.writeMessage(4,k,n)}function _(e,t){var n=e.feature,i=e.keys,a=e.values,o=e.keycache,r=e.valuecache;for(var s in n.properties){var l=n.properties[s],c=o[s];if(null!==l){void 0===c&&(i.push(s),o[s]=c=i.length-1),t.writeVarint(c);var u=typeof l;"string"!==u&&"boolean"!==u&&"number"!==u&&(l=JSON.stringify(l));var d=u+":"+l,p=r[d];void 0===p&&(a.push(l),r[d]=p=a.length-1),t.writeVarint(p)}}}function w(e,t){return(t<<3)+(7&e)}function x(e){return e<<1^e>>31}function k(e,t){for(var n=e.loadGeometry(),i=e.type,a=0,o=0,r=n.length,s=0;s<r;s++){var l=n[s],c=1;1===i&&(c=l.length),t.writeVarint(w(1,c));for(var u=3===i?l.length-1:l.length,d=0;d<u;d++){1===d&&1!==i&&t.writeVarint(w(2,u-1));var p=l[d].x-a,f=l[d].y-o;t.writeVarint(x(p)),t.writeVarint(x(f)),a+=p,o+=f}3===i&&t.writeVarint(w(7,1))}}function O(e,t){var n=typeof e;"string"===n?t.writeStringField(1,e):"boolean"===n?t.writeBooleanField(7,e):"number"===n&&(e%1!=0?t.writeDoubleField(3,e):e<0?t.writeSVarintField(6,e):t.writeVarintField(5,e))}c.exports=y,c.exports.fromVectorTileJs=y,c.exports.fromGeojsonVt=function(e,t){t=t||{};var n={};for(var i in e)n[i]=new g(e[i].features,t),n[i].name=i,n[i].version=t.version,n[i].extent=t.extent;return y({layers:n})},c.exports.GeoJSONWrapper=g;var T=e.getDefaultExportFromCjs(c.exports);const C={minZoom:0,maxZoom:16,minPoints:2,radius:40,extent:512,nodeSize:64,log:!1,generateId:!1,reduce:null,map:e=>e},E=Math.fround||(S=new Float32Array(1),e=>(S[0]=+e,S[0]));var S;class P{constructor(e){this.options=Object.assign(Object.create(C),e),this.trees=new Array(this.options.maxZoom+1),this.stride=this.options.reduce?7:6,this.clusterProps=[]}load(e){const{log:t,minZoom:n,maxZoom:i}=this.options;t&&console.time("total time");const a=`prepare ${e.length} points`;t&&console.time(a),this.points=e;const o=[];for(let t=0;t<e.length;t++){const n=e[t];if(!n.geometry)continue;const[i,a]=n.geometry.coordinates,r=E(A(i)),s=E(j(a));o.push(r,s,1/0,t,-1,1),this.options.reduce&&o.push(0)}let r=this.trees[i+1]=this._createTree(o);t&&console.timeEnd(a);for(let e=i;e>=n;e--){const n=+Date.now();r=this.trees[e]=this._createTree(this._cluster(r,e)),t&&console.log("z%d: %d clusters in %dms",e,r.numItems,+Date.now()-n)}return t&&console.timeEnd("total time"),this}getClusters(e,t){let n=((e[0]+180)%360+360)%360-180;const i=Math.max(-90,Math.min(90,e[1]));let a=180===e[2]?180:((e[2]+180)%360+360)%360-180;const o=Math.max(-90,Math.min(90,e[3]));if(e[2]-e[0]>=360)n=-180,a=180;else if(n>a){const e=this.getClusters([n,i,180,o],t),r=this.getClusters([-180,i,a,o],t);return e.concat(r)}const r=this.trees[this._limitZoom(t)],s=r.range(A(n),j(o),A(a),j(i)),l=r.data,c=[];for(const e of s){const t=this.stride*e;c.push(l[t+5]>1?I(l,t,this.clusterProps):this.points[l[t+3]])}return c}getChildren(e){const t=this._getOriginId(e),n=this._getOriginZoom(e),i="No cluster with the specified id.",a=this.trees[n];if(!a)throw new Error(i);const o=a.data;if(t*this.stride>=o.length)throw new Error(i);const r=this.options.radius/(this.options.extent*Math.pow(2,n-1)),s=a.within(o[t*this.stride],o[t*this.stride+1],r),l=[];for(const t of s){const n=t*this.stride;o[n+4]===e&&l.push(o[n+5]>1?I(o,n,this.clusterProps):this.points[o[n+3]])}if(0===l.length)throw new Error(i);return l}getLeaves(e,t,n){const i=[];return this._appendLeaves(i,e,t=t||10,n=n||0,0),i}getTile(e,t,n){const i=this.trees[this._limitZoom(e)],a=Math.pow(2,e),{extent:o,radius:r}=this.options,s=r/o,l=(n-s)/a,c=(n+1+s)/a,u={features:[]};return this._addTileFeatures(i.range((t-s)/a,l,(t+1+s)/a,c),i.data,t,n,a,u),0===t&&this._addTileFeatures(i.range(1-s/a,l,1,c),i.data,a,n,a,u),t===a-1&&this._addTileFeatures(i.range(0,l,s/a,c),i.data,-1,n,a,u),u.features.length?u:null}getClusterExpansionZoom(e){let t=this._getOriginZoom(e)-1;for(;t<=this.options.maxZoom;){const n=this.getChildren(e);if(t++,1!==n.length)break;e=n[0].properties.cluster_id}return t}_appendLeaves(e,t,n,i,a){const o=this.getChildren(t);for(const t of o){const o=t.properties;if(o&&o.cluster?a+o.point_count<=i?a+=o.point_count:a=this._appendLeaves(e,o.cluster_id,n,i,a):a<i?a++:e.push(t),e.length===n)break}return a}_createTree(t){const n=new e.KDBush(t.length/this.stride|0,this.options.nodeSize,Float32Array);for(let e=0;e<t.length;e+=this.stride)n.add(t[e],t[e+1]);return n.finish(),n.data=t,n}_addTileFeatures(e,t,n,i,a,o){for(const r of e){const e=r*this.stride,s=t[e+5]>1;let l,c,u;if(s)l=M(t,e,this.clusterProps),c=t[e],u=t[e+1];else{const n=this.points[t[e+3]];l=n.properties;const[i,a]=n.geometry.coordinates;c=A(i),u=j(a)}const d={type:1,geometry:[[Math.round(this.options.extent*(c*a-n)),Math.round(this.options.extent*(u*a-i))]],tags:l};let p;p=s||this.options.generateId?t[e+3]:this.points[t[e+3]].id,void 0!==p&&(d.id=p),o.features.push(d)}}_limitZoom(e){return Math.max(this.options.minZoom,Math.min(Math.floor(+e),this.options.maxZoom+1))}_cluster(e,t){const{radius:n,extent:i,reduce:a,minPoints:o}=this.options,r=n/(i*Math.pow(2,t)),s=e.data,l=[],c=this.stride;for(let n=0;n<s.length;n+=c){if(s[n+2]<=t)continue;s[n+2]=t;const i=s[n],u=s[n+1],d=e.within(s[n],s[n+1],r),p=s[n+5];let f=p;for(const e of d){const n=e*c;s[n+2]>t&&(f+=s[n+5])}if(f>p&&f>=o){let e,o=i*p,r=u*p,m=-1;const h=((n/c|0)<<5)+(t+1)+this.points.length;for(const i of d){const l=i*c;if(s[l+2]<=t)continue;s[l+2]=t;const u=s[l+5];o+=s[l]*u,r+=s[l+1]*u,s[l+4]=h,a&&(e||(e=this._map(s,n,!0),m=this.clusterProps.length,this.clusterProps.push(e)),a(e,this._map(s,l)))}s[n+4]=h,l.push(o/f,r/f,1/0,h,-1,f),a&&l.push(m)}else{for(let e=0;e<c;e++)l.push(s[n+e]);if(f>1)for(const e of d){const n=e*c;if(!(s[n+2]<=t)){s[n+2]=t;for(let e=0;e<c;e++)l.push(s[n+e])}}}}return l}_getOriginId(e){return e-this.points.length>>5}_getOriginZoom(e){return(e-this.points.length)%32}_map(e,t,n){if(e[t+5]>1){const i=this.clusterProps[e[t+6]];return n?Object.assign({},i):i}const i=this.points[e[t+3]].properties,a=this.options.map(i);return n&&a===i?Object.assign({},a):a}}function I(e,t,n){return{type:"Feature",id:e[t+3],properties:M(e,t,n),geometry:{type:"Point",coordinates:[(i=e[t],360*(i-.5)),N(e[t+1])]}};var i}function M(e,t,n){const i=e[t+5],a=i>=1e4?Math.round(i/1e3)+"k":i>=1e3?Math.round(i/100)/10+"k":i,o=e[t+6],r=-1===o?{}:Object.assign({},n[o]);return Object.assign(r,{cluster:!0,cluster_id:e[t+3],point_count:i,point_count_abbreviated:a})}function A(e){return e/360+.5}function j(e){const t=Math.sin(e*Math.PI/180),n=.5-.25*Math.log((1+t)/(1-t))/Math.PI;return n<0?0:n>1?1:n}function N(e){const t=(180-360*e)*Math.PI/180;return 360*Math.atan(Math.exp(t))/Math.PI-90}function L(e,t,n,i,a,o){var r=a-n,s=o-i;if(0!==r||0!==s){var l=((e-n)*r+(t-i)*s)/(r*r+s*s);l>1?(n=a,i=o):l>0&&(n+=r*l,i+=s*l)}return(r=e-n)*r+(s=t-i)*s}function D(e,t,n,i){var a={id:void 0===e?null:e,type:t,geometry:n,tags:i,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0};return function(e){var t=e.geometry,n=e.type;if("Point"===n||"MultiPoint"===n||"LineString"===n)R(e,t);else if("Polygon"===n||"MultiLineString"===n)for(var i=0;i<t.length;i++)R(e,t[i]);else if("MultiPolygon"===n)for(i=0;i<t.length;i++)for(var a=0;a<t[i].length;a++)R(e,t[i][a])}(a),a}function R(e,t){for(var n=0;n<t.length;n+=3)e.minX=Math.min(e.minX,t[n]),e.minY=Math.min(e.minY,t[n+1]),e.maxX=Math.max(e.maxX,t[n]),e.maxY=Math.max(e.maxY,t[n+1])}function B(e,t,n,i){if(t.geometry){var a=t.geometry.coordinates,o=t.geometry.type,r=Math.pow(n.tolerance/((1<<n.maxZoom)*n.extent),2),s=[],l=t.id;if(n.promoteId?l=t.properties[n.promoteId]:n.generateId&&(l=i||0),"Point"===o)z(a,s);else if("MultiPoint"===o)for(var c=0;c<a.length;c++)z(a[c],s);else if("LineString"===o)F(a,s,r,!1);else if("MultiLineString"===o){if(n.lineMetrics){for(c=0;c<a.length;c++)F(a[c],s=[],r,!1),e.push(D(l,"LineString",s,t.properties));return}U(a,s,r,!1)}else if("Polygon"===o)U(a,s,r,!0);else{if("MultiPolygon"!==o){if("GeometryCollection"===o){for(c=0;c<t.geometry.geometries.length;c++)B(e,{id:l,geometry:t.geometry.geometries[c],properties:t.properties},n,i);return}throw new Error("Input data is not a valid GeoJSON object.")}for(c=0;c<a.length;c++){var u=[];U(a[c],u,r,!0),s.push(u)}}e.push(D(l,o,s,t.properties))}}function z(e,t){t.push(H(e[0])),t.push(W(e[1])),t.push(0)}function F(e,t,n,i){for(var a,o,r=0,s=0;s<e.length;s++){var l=H(e[s][0]),c=W(e[s][1]);t.push(l),t.push(c),t.push(0),s>0&&(r+=i?(a*c-l*o)/2:Math.sqrt(Math.pow(l-a,2)+Math.pow(c-o,2))),a=l,o=c}var u=t.length-3;t[2]=1,function e(t,n,i,a){for(var o,r=a,s=i-n>>1,l=i-n,c=t[n],u=t[n+1],d=t[i],p=t[i+1],f=n+3;f<i;f+=3){var m=L(t[f],t[f+1],c,u,d,p);if(m>r)o=f,r=m;else if(m===r){var h=Math.abs(f-s);h<l&&(o=f,l=h)}}r>a&&(o-n>3&&e(t,n,o,a),t[o+2]=r,i-o>3&&e(t,o,i,a))}(t,0,u,n),t[u+2]=1,t.size=Math.abs(r),t.start=0,t.end=t.size}function U(e,t,n,i){for(var a=0;a<e.length;a++){var o=[];F(e[a],o,n,i),t.push(o)}}function H(e){return e/360+.5}function W(e){var t=Math.sin(e*Math.PI/180),n=.5-.25*Math.log((1+t)/(1-t))/Math.PI;return n<0?0:n>1?1:n}function q(e,t,n,i,a,o,r,s){if(i/=t,o>=(n/=t)&&r<i)return e;if(r<n||o>=i)return null;for(var l=[],c=0;c<e.length;c++){var u=e[c],d=u.geometry,p=u.type,f=0===a?u.minX:u.minY,m=0===a?u.maxX:u.maxY;if(f>=n&&m<i)l.push(u);else if(!(m<n||f>=i)){var h=[];if("Point"===p||"MultiPoint"===p)V(d,h,n,i,a);else if("LineString"===p)G(d,h,n,i,a,!1,s.lineMetrics);else if("MultiLineString"===p)X(d,h,n,i,a,!1);else if("Polygon"===p)X(d,h,n,i,a,!0);else if("MultiPolygon"===p)for(var g=0;g<d.length;g++){var y=[];X(d[g],y,n,i,a,!0),y.length&&h.push(y)}if(h.length){if(s.lineMetrics&&"LineString"===p){for(g=0;g<h.length;g++)l.push(D(u.id,p,h[g],u.tags));continue}"LineString"!==p&&"MultiLineString"!==p||(1===h.length?(p="LineString",h=h[0]):p="MultiLineString"),"Point"!==p&&"MultiPoint"!==p||(p=3===h.length?"Point":"MultiPoint"),l.push(D(u.id,p,h,u.tags))}}}return l.length?l:null}function V(e,t,n,i,a){for(var o=0;o<e.length;o+=3){var r=e[o+a];r>=n&&r<=i&&(t.push(e[o]),t.push(e[o+1]),t.push(e[o+2]))}}function G(e,t,n,i,a,o,r){for(var s,l,c=Y(e),u=0===a?J:K,d=e.start,p=0;p<e.length-3;p+=3){var f=e[p],m=e[p+1],h=e[p+2],g=e[p+3],y=e[p+4],v=0===a?f:m,b=0===a?g:y,_=!1;r&&(s=Math.sqrt(Math.pow(f-g,2)+Math.pow(m-y,2))),v<n?b>n&&(l=u(c,f,m,g,y,n),r&&(c.start=d+s*l)):v>i?b<i&&(l=u(c,f,m,g,y,i),r&&(c.start=d+s*l)):Z(c,f,m,h),b<n&&v>=n&&(l=u(c,f,m,g,y,n),_=!0),b>i&&v<=i&&(l=u(c,f,m,g,y,i),_=!0),!o&&_&&(r&&(c.end=d+s*l),t.push(c),c=Y(e)),r&&(d+=s)}var w=e.length-3;f=e[w],m=e[w+1],h=e[w+2],(v=0===a?f:m)>=n&&v<=i&&Z(c,f,m,h),w=c.length-3,o&&w>=3&&(c[w]!==c[0]||c[w+1]!==c[1])&&Z(c,c[0],c[1],c[2]),c.length&&t.push(c)}function Y(e){var t=[];return t.size=e.size,t.start=e.start,t.end=e.end,t}function X(e,t,n,i,a,o){for(var r=0;r<e.length;r++)G(e[r],t,n,i,a,o,!1)}function Z(e,t,n,i){e.push(t),e.push(n),e.push(i)}function J(e,t,n,i,a,o){var r=(o-t)/(i-t);return e.push(o),e.push(n+(a-n)*r),e.push(1),r}function K(e,t,n,i,a,o){var r=(o-n)/(a-n);return e.push(t+(i-t)*r),e.push(o),e.push(1),r}function $(e,t){for(var n=[],i=0;i<e.length;i++){var a,o=e[i],r=o.type;if("Point"===r||"MultiPoint"===r||"LineString"===r)a=Q(o.geometry,t);else if("MultiLineString"===r||"Polygon"===r){a=[];for(var s=0;s<o.geometry.length;s++)a.push(Q(o.geometry[s],t))}else if("MultiPolygon"===r)for(a=[],s=0;s<o.geometry.length;s++){for(var l=[],c=0;c<o.geometry[s].length;c++)l.push(Q(o.geometry[s][c],t));a.push(l)}n.push(D(o.id,r,a,o.tags))}return n}function Q(e,t){var n=[];n.size=e.size,void 0!==e.start&&(n.start=e.start,n.end=e.end);for(var i=0;i<e.length;i+=3)n.push(e[i]+t,e[i+1],e[i+2]);return n}function ee(e,t){if(e.transformed)return e;var n,i,a,o=1<<e.z,r=e.x,s=e.y;for(n=0;n<e.features.length;n++){var l=e.features[n],c=l.geometry,u=l.type;if(l.geometry=[],1===u)for(i=0;i<c.length;i+=2)l.geometry.push(te(c[i],c[i+1],t,o,r,s));else for(i=0;i<c.length;i++){var d=[];for(a=0;a<c[i].length;a+=2)d.push(te(c[i][a],c[i][a+1],t,o,r,s));l.geometry.push(d)}}return e.transformed=!0,e}function te(e,t,n,i,a,o){return[Math.round(n*(e*i-a)),Math.round(n*(t*i-o))]}function ne(e,t,n,i,a){for(var o=t===a.maxZoom?0:a.tolerance/((1<<t)*a.extent),r={features:[],numPoints:0,numSimplified:0,numFeatures:0,source:null,x:n,y:i,z:t,transformed:!1,minX:2,minY:1,maxX:-1,maxY:0},s=0;s<e.length;s++){r.numFeatures++,ie(r,e[s],o,a);var l=e[s].minX,c=e[s].minY,u=e[s].maxX,d=e[s].maxY;l<r.minX&&(r.minX=l),c<r.minY&&(r.minY=c),u>r.maxX&&(r.maxX=u),d>r.maxY&&(r.maxY=d)}return r}function ie(e,t,n,i){var a=t.geometry,o=t.type,r=[];if("Point"===o||"MultiPoint"===o)for(var s=0;s<a.length;s+=3)r.push(a[s]),r.push(a[s+1]),e.numPoints++,e.numSimplified++;else if("LineString"===o)ae(r,a,e,n,!1,!1);else if("MultiLineString"===o||"Polygon"===o)for(s=0;s<a.length;s++)ae(r,a[s],e,n,"Polygon"===o,0===s);else if("MultiPolygon"===o)for(var l=0;l<a.length;l++){var c=a[l];for(s=0;s<c.length;s++)ae(r,c[s],e,n,!0,0===s)}if(r.length){var u=t.tags||null;if("LineString"===o&&i.lineMetrics){for(var d in u={},t.tags)u[d]=t.tags[d];u.mapbox_clip_start=a.start/a.size,u.mapbox_clip_end=a.end/a.size}var p={geometry:r,type:"Polygon"===o||"MultiPolygon"===o?3:"LineString"===o||"MultiLineString"===o?2:1,tags:u};null!==t.id&&(p.id=t.id),e.features.push(p)}}function ae(e,t,n,i,a,o){var r=i*i;if(i>0&&t.size<(a?r:i))n.numPoints+=t.length/3;else{for(var s=[],l=0;l<t.length;l+=3)(0===i||t[l+2]>r)&&(n.numSimplified++,s.push(t[l]),s.push(t[l+1])),n.numPoints++;a&&function(e,t){for(var n=0,i=0,a=e.length,o=a-2;i<a;o=i,i+=2)n+=(e[i]-e[o])*(e[i+1]+e[o+1]);if(n>0===t)for(i=0,a=e.length;i<a/2;i+=2){var r=e[i],s=e[i+1];e[i]=e[a-2-i],e[i+1]=e[a-1-i],e[a-2-i]=r,e[a-1-i]=s}}(s,o),e.push(s)}}function oe(e,t){var n=(t=this.options=function(e,t){for(var n in t)e[n]=t[n];return e}(Object.create(this.options),t)).debug;if(n&&console.time("preprocess data"),t.maxZoom<0||t.maxZoom>24)throw new Error("maxZoom should be in the 0-24 range");if(t.promoteId&&t.generateId)throw new Error("promoteId and generateId cannot be used together.");var i=function(e,t){var n=[];if("FeatureCollection"===e.type)for(var i=0;i<e.features.length;i++)B(n,e.features[i],t,i);else B(n,"Feature"===e.type?e:{geometry:e},t);return n}(e,t);this.tiles={},this.tileCoords=[],n&&(console.timeEnd("preprocess data"),console.log("index: maxZoom: %d, maxPoints: %d",t.indexMaxZoom,t.indexMaxPoints),console.time("generate tiles"),this.stats={},this.total=0),(i=function(e,t){var n=t.buffer/t.extent,i=e,a=q(e,1,-1-n,n,0,-1,2,t),o=q(e,1,1-n,2+n,0,-1,2,t);return(a||o)&&(i=q(e,1,-n,1+n,0,-1,2,t)||[],a&&(i=$(a,1).concat(i)),o&&(i=i.concat($(o,-1)))),i}(i,t)).length&&this.splitTile(i,0,0,0),n&&(i.length&&console.log("features: %d, points: %d",this.tiles[0].numFeatures,this.tiles[0].numPoints),console.timeEnd("generate tiles"),console.log("tiles generated:",this.total,JSON.stringify(this.stats)))}function re(e,t,n){return 32*((1<<e)*n+t)+e}function se(t,n){const i=t.tileID.canonical;if(!this._geoJSONIndex)return n(null,null);const a=this._geoJSONIndex.getTile(i.z,i.x,i.y);if(!a)return n(null,null);const o=new class{constructor(t){this.layers={_geojsonTileLayer:this},this.name="_geojsonTileLayer",this.extent=e.EXTENT,this.length=t.length,this._features=t}feature(t){return new class{constructor(t){this._feature=t,this.extent=e.EXTENT,this.type=t.type,this.properties=t.tags,"id"in t&&!isNaN(t.id)&&(this.id=parseInt(t.id,10))}loadGeometry(){if(1===this._feature.type){const t=[];for(const n of this._feature.geometry)t.push([new e.Point(n[0],n[1])]);return t}{const t=[];for(const n of this._feature.geometry){const i=[];for(const t of n)i.push(new e.Point(t[0],t[1]));t.push(i)}return t}}toGeoJSON(e,t,n){return l.call(this,e,t,n)}}(this._features[t])}}(a.features);let r=T(o);0===r.byteOffset&&r.byteLength===r.buffer.byteLength||(r=new Uint8Array(r)),n(null,{vectorTile:o,rawData:r.buffer})}oe.prototype.options={maxZoom:14,indexMaxZoom:5,indexMaxPoints:1e5,tolerance:3,extent:4096,buffer:64,lineMetrics:!1,promoteId:null,generateId:!1,debug:0},oe.prototype.splitTile=function(e,t,n,i,a,o,r){for(var s=[e,t,n,i],l=this.options,c=l.debug;s.length;){i=s.pop(),n=s.pop(),t=s.pop(),e=s.pop();var u=1<<t,d=re(t,n,i),p=this.tiles[d];if(!p&&(c>1&&console.time("creation"),p=this.tiles[d]=ne(e,t,n,i,l),this.tileCoords.push({z:t,x:n,y:i}),c)){c>1&&(console.log("tile z%d-%d-%d (features: %d, points: %d, simplified: %d)",t,n,i,p.numFeatures,p.numPoints,p.numSimplified),console.timeEnd("creation"));var f="z"+t;this.stats[f]=(this.stats[f]||0)+1,this.total++}if(p.source=e,a){if(t===l.maxZoom||t===a)continue;var m=1<<a-t;if(n!==Math.floor(o/m)||i!==Math.floor(r/m))continue}else if(t===l.indexMaxZoom||p.numPoints<=l.indexMaxPoints)continue;if(p.source=null,0!==e.length){c>1&&console.time("clipping");var h,g,y,v,b,_,w=.5*l.buffer/l.extent,x=.5-w,k=.5+w,O=1+w;h=g=y=v=null,b=q(e,u,n-w,n+k,0,p.minX,p.maxX,l),_=q(e,u,n+x,n+O,0,p.minX,p.maxX,l),e=null,b&&(h=q(b,u,i-w,i+k,1,p.minY,p.maxY,l),g=q(b,u,i+x,i+O,1,p.minY,p.maxY,l),b=null),_&&(y=q(_,u,i-w,i+k,1,p.minY,p.maxY,l),v=q(_,u,i+x,i+O,1,p.minY,p.maxY,l),_=null),c>1&&console.timeEnd("clipping"),s.push(h||[],t+1,2*n,2*i),s.push(g||[],t+1,2*n,2*i+1),s.push(y||[],t+1,2*n+1,2*i),s.push(v||[],t+1,2*n+1,2*i+1)}}},oe.prototype.getTile=function(e,t,n){var i=this.options,a=i.extent,o=i.debug;if(e<0||e>24)return null;var r=1<<e,s=re(e,t=(t%r+r)%r,n);if(this.tiles[s])return ee(this.tiles[s],a);o>1&&console.log("drilling down to z%d-%d-%d",e,t,n);for(var l,c=e,u=t,d=n;!l&&c>0;)c--,u=Math.floor(u/2),d=Math.floor(d/2),l=this.tiles[re(c,u,d)];return l&&l.source?(o>1&&console.log("found parent tile z%d-%d-%d",c,u,d),o>1&&console.time("drilling down"),this.splitTile(l.source,c,u,d,e,t,n),o>1&&console.timeEnd("drilling down"),this.tiles[s]?ee(this.tiles[s],a):null):null};class le extends e.VectorTileWorkerSource{constructor(e,t,n,i,a){super(e,t,n,i,se),a&&(this.loadGeoJSON=a)}loadData(t,n){const i=t&&t.request,a=i&&i.collectResourceTiming;this.loadGeoJSON(t,(o,r)=>{if(o||!r)return n(o);if("object"!=typeof r)return n(new Error(`Input data given to '${t.source}' is not a valid GeoJSON object.`));{s(r,!0);try{if(t.filter){const n=e.createExpression(t.filter,{type:"boolean","property-type":"data-driven",overridable:!1,transition:!1});if("error"===n.result)throw new Error(n.value.map(e=>`${e.key}: ${e.message}`).join(", "));const i=r.features.filter(e=>n.value.evaluate({zoom:0},e));r={type:"FeatureCollection",features:i}}this._geoJSONIndex=t.cluster?new P(function({superclusterOptions:t,clusterProperties:n}){if(!n||!t)return t;const i={},a={},o={accumulated:null,zoom:0},r={properties:null},s=Object.keys(n);for(const t of s){const[o,r]=n[t],s=e.createExpression(r),l=e.createExpression("string"==typeof o?[o,["accumulated"],["get",t]]:o);i[t]=s.value,a[t]=l.value}return t.map=e=>{r.properties=e;const t={};for(const e of s)t[e]=i[e].evaluate(o,r);return t},t.reduce=(e,t)=>{r.properties=t;for(const t of s)o.accumulated=e[t],e[t]=a[t].evaluate(o,r)},t}(t)).load(r.features):function(e,t){return new oe(e,t)}(r,t.geojsonVtOptions)}catch(o){return n(o)}this.loaded={};const l={};if(a){const n=e.getPerformanceMeasurement(i);n&&(l.resourceTiming={},l.resourceTiming[t.source]=JSON.parse(JSON.stringify(n)))}n(null,l)}})}reloadTile(e,t){const n=this.loaded;return n&&n[e.uid]?super.reloadTile(e,t):this.loadTile(e,t)}loadGeoJSON(t,n){if(t.request)e.getJSON(t.request,n);else{if("string"!=typeof t.data)return n(new Error(`Input data given to '${t.source}' is not a valid GeoJSON object.`));try{return n(null,JSON.parse(t.data))}catch(e){return n(new Error(`Input data given to '${t.source}' is not a valid GeoJSON object.`))}}}getClusterExpansionZoom(e,t){try{t(null,this._geoJSONIndex.getClusterExpansionZoom(e.clusterId))}catch(e){t(e)}}getClusterChildren(e,t){try{t(null,this._geoJSONIndex.getChildren(e.clusterId))}catch(e){t(e)}}getClusterLeaves(e,t){try{t(null,this._geoJSONIndex.getLeaves(e.clusterId,e.limit,e.offset))}catch(e){t(e)}}}class ce{constructor(t){this.self=t,this.actor=new e.Actor(t,this),this.layerIndexes={},this.availableImages={},this.isSpriteLoaded={},this.projections={},this.defaultProjection=e.getProjection({name:"mercator"}),this.workerSourceTypes={vector:e.VectorTileWorkerSource,geojson:le},this.workerSources={},this.demWorkerSources={},this.self.registerWorkerSource=(e,t)=>{if(this.workerSourceTypes[e])throw new Error(`Worker source with name "${e}" already registered.`);this.workerSourceTypes[e]=t},this.self.registerRTLTextPlugin=t=>{if(e.plugin.isParsed())throw new Error("RTL text plugin already registered.");e.plugin.applyArabicShaping=t.applyArabicShaping,e.plugin.processBidirectionalText=t.processBidirectionalText,e.plugin.processStyledBidirectionalText=t.processStyledBidirectionalText}}clearCaches(e,t,n){delete this.layerIndexes[e],delete this.availableImages[e],delete this.workerSources[e],delete this.demWorkerSources[e],n()}checkIfReady(e,t,n){n()}setReferrer(e,t){this.referrer=t}spriteLoaded(t,n){this.isSpriteLoaded[t]=n;for(const i in this.workerSources[t]){const a=this.workerSources[t][i];for(const t in a)a[t]instanceof e.VectorTileWorkerSource&&(a[t].isSpriteLoaded=n,a[t].fire(new e.Event("isSpriteLoaded")))}}setImages(e,t,n){this.availableImages[e]=t;for(const n in this.workerSources[e]){const i=this.workerSources[e][n];for(const e in i)i[e].availableImages=t}n()}enableTerrain(e,t,n){this.terrain=t,n()}setProjection(t,n){this.projections[t]=e.getProjection(n)}setLayers(e,t,n){this.getLayerIndex(e).replace(t),n()}updateLayers(e,t,n){this.getLayerIndex(e).update(t.layers,t.removedIds),n()}loadTile(t,n,i){const a=this.enableTerrain?e.extend({enableTerrain:this.terrain},n):n;a.projection=this.projections[t]||this.defaultProjection,this.getWorkerSource(t,n.type,n.source).loadTile(a,i)}loadDEMTile(t,n,i){const a=this.enableTerrain?e.extend({buildQuadTree:this.terrain},n):n;this.getDEMWorkerSource(t,n.source).loadTile(a,i)}reloadTile(t,n,i){const a=this.enableTerrain?e.extend({enableTerrain:this.terrain},n):n;a.projection=this.projections[t]||this.defaultProjection,this.getWorkerSource(t,n.type,n.source).reloadTile(a,i)}abortTile(e,t,n){this.getWorkerSource(e,t.type,t.source).abortTile(t,n)}removeTile(e,t,n){this.getWorkerSource(e,t.type,t.source).removeTile(t,n)}removeSource(e,t,n){if(!this.workerSources[e]||!this.workerSources[e][t.type]||!this.workerSources[e][t.type][t.source])return;const i=this.workerSources[e][t.type][t.source];delete this.workerSources[e][t.type][t.source],void 0!==i.removeSource?i.removeSource(t,n):n()}loadWorkerSource(e,t,n){try{this.self.importScripts(t.url),n()}catch(e){n(e.toString())}}syncRTLPluginState(t,n,i){try{e.plugin.setState(n);const t=e.plugin.getPluginURL();if(e.plugin.isLoaded()&&!e.plugin.isParsed()&&null!=t){this.self.importScripts(t);const n=e.plugin.isParsed();i(n?void 0:new Error("RTL Text Plugin failed to import scripts from "+t),n)}}catch(e){i(e.toString())}}getAvailableImages(e){let t=this.availableImages[e];return t||(t=[]),t}getLayerIndex(e){let t=this.layerIndexes[e];return t||(t=this.layerIndexes[e]=new i),t}getWorkerSource(e,t,n){if(this.workerSources[e]||(this.workerSources[e]={}),this.workerSources[e][t]||(this.workerSources[e][t]={}),!this.workerSources[e][t][n]){const i={send:(t,n,i,a,o,r)=>{this.actor.send(t,n,i,e,o,r)},scheduler:this.actor.scheduler};this.workerSources[e][t][n]=new this.workerSourceTypes[t](i,this.getLayerIndex(e),this.getAvailableImages(e),this.isSpriteLoaded[e])}return this.workerSources[e][t][n]}getDEMWorkerSource(e,t){return this.demWorkerSources[e]||(this.demWorkerSources[e]={}),this.demWorkerSources[e][t]||(this.demWorkerSources[e][t]=new a),this.demWorkerSources[e][t]}enforceCacheSizeLimit(t,n){e.enforceCacheSizeLimit(n)}getWorkerPerformanceMetrics(e,t,n){n(void 0,void 0)}}return"undefined"!=typeof WorkerGlobalScope&&"undefined"!=typeof self&&self instanceof WorkerGlobalScope&&(self.worker=new ce(self)),ce})),a(0,(function(e){function t(e,n){if(Array.isArray(e)){if(!Array.isArray(n)||e.length!==n.length)return!1;for(let i=0;i<e.length;i++)if(!t(e[i],n[i]))return!1;return!0}if("object"==typeof e&&null!==e&&null!==n){if("object"!=typeof n)return!1;if(Object.keys(e).length!==Object.keys(n).length)return!1;for(const i in e)if(!t(e[i],n[i]))return!1;return!0}return e===n}var n=i;function i(e){return!function(e){return"undefined"==typeof window||"undefined"==typeof document?"not a browser":Array.prototype&&Array.prototype.every&&Array.prototype.filter&&Array.prototype.forEach&&Array.prototype.indexOf&&Array.prototype.lastIndexOf&&Array.prototype.map&&Array.prototype.some&&Array.prototype.reduce&&Array.prototype.reduceRight&&Array.isArray?Function.prototype&&Function.prototype.bind?Object.keys&&Object.create&&Object.getPrototypeOf&&Object.getOwnPropertyNames&&Object.isSealed&&Object.isFrozen&&Object.isExtensible&&Object.getOwnPropertyDescriptor&&Object.defineProperty&&Object.defineProperties&&Object.seal&&Object.freeze&&Object.preventExtensions?"JSON"in window&&"parse"in JSON&&"stringify"in JSON?function(){if(!("Worker"in window&&"Blob"in window&&"URL"in window))return!1;var e,t,n=new Blob([""],{type:"text/javascript"}),i=URL.createObjectURL(n);try{t=new Worker(i),e=!0}catch(t){e=!1}return t&&t.terminate(),URL.revokeObjectURL(i),e}()?"Uint8ClampedArray"in window?ArrayBuffer.isView?function(){var e=document.createElement("canvas");e.width=e.height=1;var t=e.getContext("2d");if(!t)return!1;var n=t.getImageData(0,0,1,1);return n&&n.width===e.width}()?(void 0===a[t=e&&e.failIfMajorPerformanceCaveat]&&(a[t]=function(e){var t,n=function(e){var t=document.createElement("canvas"),n=Object.create(i.webGLContextAttributes);return n.failIfMajorPerformanceCaveat=e,t.getContext("webgl",n)||t.getContext("experimental-webgl",n)}(e);if(!n)return!1;try{t=n.createShader(n.VERTEX_SHADER)}catch(e){return!1}return!(!t||n.isContextLost())&&(n.shaderSource(t,"void main() {}"),n.compileShader(t),!0===n.getShaderParameter(t,n.COMPILE_STATUS))}(t)),a[t]?document.documentMode?"insufficient ECMAScript 6 support":void 0:"insufficient WebGL support"):"insufficient Canvas/getImageData support":"insufficient ArrayBuffer support":"insufficient Uint8ClampedArray support":"insufficient worker support":"insufficient JSON support":"insufficient Object support":"insufficient Function support":"insufficent Array support";var t}(e)}var a={};function o(t,n,i){const a=e.window.document.createElement(t);return void 0!==n&&(a.className=n),i&&i.appendChild(a),a}function r(t,n,i){const a=e.window.document.createElementNS("http://www.w3.org/2000/svg",t);for(const e of Object.keys(n))a.setAttributeNS(null,e,n[e]);return i&&i.appendChild(a),a}i.webGLContextAttributes={antialias:!1,alpha:!0,stencil:!0,depth:!0};const s=e.window.document&&e.window.document.documentElement.style,l=s&&void 0!==s.userSelect?"userSelect":"WebkitUserSelect";let c;function u(){s&&l&&(c=s[l],s[l]="none")}function d(){s&&l&&(s[l]=c)}function p(t){t.preventDefault(),t.stopPropagation(),e.window.removeEventListener("click",p,!0)}function f(){e.window.addEventListener("click",p,!0),e.window.setTimeout(()=>{e.window.removeEventListener("click",p,!0)},0)}function m(e,t){const n=e.getBoundingClientRect();return y(e,n,t)}function h(e,t){const n=e.getBoundingClientRect(),i=[];for(let a=0;a<t.length;a++)i.push(y(e,n,t[a]));return i}function g(t){return void 0!==e.window.InstallTrigger&&2===t.button&&t.ctrlKey&&e.window.navigator.platform.toUpperCase().indexOf("MAC")>=0?0:t.button}function y(t,n,i){const a=t.offsetWidth===n.width?1:t.offsetWidth/n.width;return new e.Point((i.clientX-n.left)*a,(i.clientY-n.top)*a)}function v(e,t){var n=t[0],i=t[1],a=t[2],o=t[3],r=n*o-a*i;return r?(e[0]=o*(r=1/r),e[1]=-i*r,e[2]=-a*r,e[3]=n*r,e):null}function b(e){const{userImage:t}=e;return!!(t&&t.render&&t.render())&&(e.data.replace(new Uint8Array(t.data.buffer)),!0)}class _ extends e.Evented{constructor(){super(),this.images={},this.updatedImages={},this.callbackDispatchedThisFrame={},this.loaded=!1,this.requestors=[],this.patterns={},this.atlasImage=new e.RGBAImage({width:1,height:1}),this.dirty=!0}isLoaded(){return this.loaded}setLoaded(e){if(this.loaded!==e&&(this.loaded=e,e)){for(const{ids:e,callback:t}of this.requestors)this._notify(e,t);this.requestors=[]}}hasImage(e){return!!this.getImage(e)}getImage(e){return this.images[e]}addImage(e,t){this._validate(e,t)&&(this.images[e]=t)}_validate(t,n){let i=!0;return this._validateStretch(n.stretchX,n.data&&n.data.width)||(this.fire(new e.ErrorEvent(new Error(`Image "${t}" has invalid "stretchX" value`))),i=!1),this._validateStretch(n.stretchY,n.data&&n.data.height)||(this.fire(new e.ErrorEvent(new Error(`Image "${t}" has invalid "stretchY" value`))),i=!1),this._validateContent(n.content,n)||(this.fire(new e.ErrorEvent(new Error(`Image "${t}" has invalid "content" value`))),i=!1),i}_validateStretch(e,t){if(!e)return!0;let n=0;for(const i of e){if(i[0]<n||i[1]<i[0]||t<i[1])return!1;n=i[1]}return!0}_validateContent(e,t){return!(e&&(4!==e.length||e[0]<0||t.data.width<e[0]||e[1]<0||t.data.height<e[1]||e[2]<0||t.data.width<e[2]||e[3]<0||t.data.height<e[3]||e[2]<e[0]||e[3]<e[1]))}updateImage(e,t){t.version=this.images[e].version+1,this.images[e]=t,this.updatedImages[e]=!0}removeImage(e){const t=this.images[e];delete this.images[e],delete this.patterns[e],t.userImage&&t.userImage.onRemove&&t.userImage.onRemove()}listImages(){return Object.keys(this.images)}getImages(e,t){let n=!0;if(!this.isLoaded())for(const t of e)this.images[t]||(n=!1);this.isLoaded()||n?this._notify(e,t):this.requestors.push({ids:e,callback:t})}_notify(t,n){const i={};for(const n of t){this.images[n]||this.fire(new e.Event("styleimagemissing",{id:n}));const t=this.images[n];t?i[n]={data:t.data.clone(),pixelRatio:t.pixelRatio,sdf:t.sdf,version:t.version,stretchX:t.stretchX,stretchY:t.stretchY,content:t.content,hasRenderCallback:Boolean(t.userImage&&t.userImage.render)}:e.warnOnce(`Image "${n}" could not be loaded. Please make sure you have added the image with map.addImage() or a "sprite" property in your style. You can provide missing images by listening for the "styleimagemissing" map event.`)}n(null,i)}getPixelSize(){const{width:e,height:t}=this.atlasImage;return{width:e,height:t}}getPattern(t){const n=this.patterns[t],i=this.getImage(t);if(!i)return null;if(n&&n.position.version===i.version)return n.position;if(n)n.position.version=i.version;else{const n={w:i.data.width+2,h:i.data.height+2,x:0,y:0},a=new e.ImagePosition(n,i);this.patterns[t]={bin:n,position:a}}return this._updatePatternAtlas(),this.patterns[t].position}bind(t){const n=t.gl;this.atlasTexture?this.dirty&&(this.atlasTexture.update(this.atlasImage),this.dirty=!1):this.atlasTexture=new e.Texture(t,this.atlasImage,n.RGBA),this.atlasTexture&&this.atlasTexture.bind(n.LINEAR,n.CLAMP_TO_EDGE)}_updatePatternAtlas(){const t=[];for(const e in this.patterns)t.push(this.patterns[e].bin);const{w:n,h:i}=e.potpack(t),a=this.atlasImage;a.resize({width:n||1,height:i||1});for(const t in this.patterns){const{bin:n}=this.patterns[t],i=n.x+1,o=n.y+1,r=this.images[t].data,s=r.width,l=r.height;e.RGBAImage.copy(r,a,{x:0,y:0},{x:i,y:o},{width:s,height:l}),e.RGBAImage.copy(r,a,{x:0,y:l-1},{x:i,y:o-1},{width:s,height:1}),e.RGBAImage.copy(r,a,{x:0,y:0},{x:i,y:o+l},{width:s,height:1}),e.RGBAImage.copy(r,a,{x:s-1,y:0},{x:i-1,y:o},{width:1,height:l}),e.RGBAImage.copy(r,a,{x:0,y:0},{x:i+s,y:o},{width:1,height:l})}this.dirty=!0}beginFrame(){this.callbackDispatchedThisFrame={}}dispatchRenderCallbacks(e){for(const t of e){if(this.callbackDispatchedThisFrame[t])continue;this.callbackDispatchedThisFrame[t]=!0;const e=this.images[t];b(e)&&this.updateImage(t,e)}}}const w=new e.Properties({anchor:new e.DataConstantProperty(e.spec.light.anchor),position:new class{constructor(){this.specification=e.spec.light.position}possiblyEvaluate(t,n){return function([t,n,i]){const a=e.degToRad(n+90),o=e.degToRad(i);return{x:t*Math.cos(a)*Math.sin(o),y:t*Math.sin(a)*Math.sin(o),z:t*Math.cos(o),azimuthal:n,polar:i}}(t.expression.evaluate(n))}interpolate(t,n,i){return{x:e.number(t.x,n.x,i),y:e.number(t.y,n.y,i),z:e.number(t.z,n.z,i),azimuthal:e.number(t.azimuthal,n.azimuthal,i),polar:e.number(t.polar,n.polar,i)}}},color:new e.DataConstantProperty(e.spec.light.color),intensity:new e.DataConstantProperty(e.spec.light.intensity)});class x extends e.Evented{constructor(t){super(),this._transitionable=new e.Transitionable(w),this.setLight(t),this._transitioning=this._transitionable.untransitioned()}getLight(){return this._transitionable.serialize()}setLight(t,n={}){if(!this._validate(e.validateLight,t,n))for(const n in t){const i=t[n];e.endsWith(n,"-transition")?this._transitionable.setTransition(n.slice(0,-11),i):this._transitionable.setValue(n,i)}}updateTransitions(e){this._transitioning=this._transitionable.transitioned(e,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()}recalculate(e){this.properties=this._transitioning.possiblyEvaluate(e)}_validate(t,n,i){return(!i||!1!==i.validate)&&e.emitValidationErrors(this,t.call(e.validateStyle,e.extend({value:n,style:{glyphs:!0,sprite:!0},styleSpec:e.spec})))}}const k=new e.Properties({source:new e.DataConstantProperty(e.spec.terrain.source),exaggeration:new e.DataConstantProperty(e.spec.terrain.exaggeration)});let O=class extends e.Evented{constructor(t,n){super(),this._transitionable=new e.Transitionable(k),this.set(t),this._transitioning=this._transitionable.untransitioned(),this.drapeRenderMode=n}get(){return this._transitionable.serialize()}set(t){for(const n in t){const i=t[n];e.endsWith(n,"-transition")?this._transitionable.setTransition(n.slice(0,-11),i):this._transitionable.setValue(n,i)}}updateTransitions(e){this._transitioning=this._transitionable.transitioned(e,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()}recalculate(e){this.properties=this._transitioning.possiblyEvaluate(e)}};function T(t,n,i,a){const o=e.smoothstep(45,65,i),[r,s]=C(t,a),l=e.length(n);let c=1-Math.min(1,Math.exp((l-r)/(s-r)*-6));return c*=c*c,c=Math.min(1,1.00747*c),c*o*t.alpha}function C(e,t){const n=.5/Math.tan(.5*t);return[e.range[0]+n,e.range[1]+n]}const E=new e.Properties({range:new e.DataConstantProperty(e.spec.fog.range),color:new e.DataConstantProperty(e.spec.fog.color),"high-color":new e.DataConstantProperty(e.spec.fog["high-color"]),"space-color":new e.DataConstantProperty(e.spec.fog["space-color"]),"horizon-blend":new e.DataConstantProperty(e.spec.fog["horizon-blend"]),"star-intensity":new e.DataConstantProperty(e.spec.fog["star-intensity"])});class S extends e.Evented{constructor(t,n){super(),this._transitionable=new e.Transitionable(E),this.set(t),this._transitioning=this._transitionable.untransitioned(),this._transform=n}get state(){const t=this._transform,n="globe"===t.projection.name,i=e.globeToMercatorTransition(t.zoom),a=this.properties.get("range"),o=[.5,3];return{range:n?[e.number(o[0],a[0],i),e.number(o[1],a[1],i)]:a,horizonBlend:this.properties.get("horizon-blend"),alpha:this.properties.get("color").a}}get(){return this._transitionable.serialize()}set(t,n={}){if(!this._validate(e.validateFog,t,n)){for(const n of Object.keys(e.spec.fog))t&&void 0===t[n]&&(t[n]=e.spec.fog[n].default);for(const n in t){const i=t[n];e.endsWith(n,"-transition")?this._transitionable.setTransition(n.slice(0,-11),i):this._transitionable.setValue(n,i)}}}getOpacity(t){if(!this._transform.projection.supportsFog)return 0;const n=this.properties&&this.properties.get("color")||1;return("globe"===this._transform.projection.name?1:e.smoothstep(45,65,t))*n.a}getOpacityAtLatLng(t,n){return this._transform.projection.supportsFog?function(t,n,i){const a=e.MercatorCoordinate.fromLngLat(n),o=i.elevation?i.elevation.getAtPointOrZero(a):0,r=[a.x,a.y,o];return e.transformMat4(r,r,i.mercatorFogMatrix),T(t,r,i.pitch,i._fov)}(this.state,t,n):0}getFovAdjustedRange(e){return this._transform.projection.supportsFog?C(this.state,e):[0,1]}updateTransitions(e){this._transitioning=this._transitionable.transitioned(e,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()}recalculate(e){this.properties=this._transitioning.possiblyEvaluate(e)}_validate(t,n,i){return(!i||!1!==i.validate)&&e.emitValidationErrors(this,t.call(e.validateStyle,e.extend({value:n,style:{glyphs:!0,sprite:!0},styleSpec:e.spec})))}}class P{constructor(t,n){this.workerPool=t,this.actors=[],this.currentActor=0,this.id=e.uniqueId();const i=this.workerPool.acquire(this.id);for(let e=0;e<i.length;e++){const t=new P.Actor(i[e],n,this.id);t.name="Worker "+e,this.actors.push(t)}this.ready=!1,this.broadcast("checkIfReady",null,()=>{this.ready=!0})}broadcast(t,n,i){e.asyncAll(this.actors,(e,i)=>{e.send(t,n,i)},i=i||function(){})}getActor(){return this.currentActor=(this.currentActor+1)%this.actors.length,this.actors[this.currentActor]}remove(){this.actors.forEach(e=>{e.remove()}),this.actors=[],this.workerPool.release(this.id)}}function I(t,n,i){return n*(e.EXTENT/(t.tileSize*Math.pow(2,i-t.tileID.overscaledZ)))}P.Actor=e.Actor;class M{constructor(e,t,n,i){this.screenBounds=e,this.cameraPoint=t,this._screenRaycastCache={},this._cameraRaycastCache={},this.isAboveHorizon=n,this.screenGeometry=this.bufferedScreenGeometry(0),this.screenGeometryMercator=this._bufferedScreenMercator(0,i)}static createFromScreenPoints(t,n){let i,a;if(t instanceof e.Point||"number"==typeof t[0]){const o=e.Point.convert(t);i=[o],a=n.isPointAboveHorizon(o)}else{const o=e.Point.convert(t[0]),r=e.Point.convert(t[1]);i=[o,r],a=e.polygonizeBounds(o,r).every(e=>n.isPointAboveHorizon(e))}return new M(i,n.getCameraPoint(),a,n)}isPointQuery(){return 1===this.screenBounds.length}bufferedScreenGeometry(t){return e.polygonizeBounds(this.screenBounds[0],1===this.screenBounds.length?this.screenBounds[0]:this.screenBounds[1],t)}bufferedCameraGeometry(t){const n=this.screenBounds[0],i=1===this.screenBounds.length?this.screenBounds[0].add(new e.Point(1,1)):this.screenBounds[1],a=e.polygonizeBounds(n,i,0,!1);return this.cameraPoint.y>i.y&&(this.cameraPoint.x>n.x&&this.cameraPoint.x<i.x?a.splice(3,0,this.cameraPoint):this.cameraPoint.x>=i.x?a[2]=this.cameraPoint:this.cameraPoint.x<=n.x&&(a[3]=this.cameraPoint)),e.bufferConvexPolygon(a,t)}bufferedCameraGeometryGlobe(t){const n=this.screenBounds[0],i=1===this.screenBounds.length?this.screenBounds[0].add(new e.Point(1,1)):this.screenBounds[1],a=e.polygonizeBounds(n,i,t),o=this.cameraPoint.clone();switch(3*((o.y>n.y)+(o.y>i.y))+((o.x>n.x)+(o.x>i.x))){case 0:a[0]=o,a[4]=o.clone();break;case 1:a.splice(1,0,o);break;case 2:a[1]=o;break;case 3:a.splice(4,0,o);break;case 5:a.splice(2,0,o);break;case 6:a[3]=o;break;case 7:a.splice(3,0,o);break;case 8:a[2]=o}return a}containsTile(t,n,i,a=0){const o=t.queryPadding/n._pixelsPerMercatorPixel+1,r=i?this._bufferedCameraMercator(o,n):this._bufferedScreenMercator(o,n);let s=t.tileID.wrap+(r.unwrapped?a:0);const l=r.polygon.map(n=>e.getTilePoint(t.tileTransform,n,s));if(!e.polygonIntersectsBox(l,0,0,e.EXTENT,e.EXTENT))return;s=t.tileID.wrap+(this.screenGeometryMercator.unwrapped?a:0);const c=this.screenGeometryMercator.polygon.map(n=>e.getTileVec3(t.tileTransform,n,s)),u=c.map(t=>new e.Point(t[0],t[1])),d=n.getFreeCameraOptions().position||new e.MercatorCoordinate(0,0,0),p=e.getTileVec3(t.tileTransform,d,s),f=c.map(t=>{const n=e.sub(t,t,p);return e.normalize(n,n),new e.Ray(p,n)}),m=I(t,1,n.zoom)*n._pixelsPerMercatorPixel;return{queryGeometry:this,tilespaceGeometry:u,tilespaceRays:f,bufferedTilespaceGeometry:l,bufferedTilespaceBounds:(h=e.getBounds(l),h.min.x=e.clamp(h.min.x,0,e.EXTENT),h.min.y=e.clamp(h.min.y,0,e.EXTENT),h.max.x=e.clamp(h.max.x,0,e.EXTENT),h.max.y=e.clamp(h.max.y,0,e.EXTENT),h),tile:t,tileID:t.tileID,pixelToTileUnitsFactor:m};var h}_bufferedScreenMercator(e,t){const n=N(e);if(this._screenRaycastCache[n])return this._screenRaycastCache[n];{let i;return i="globe"===t.projection.name?this._projectAndResample(this.bufferedScreenGeometry(e),t):{polygon:this.bufferedScreenGeometry(e).map(e=>t.pointCoordinate3D(e)),unwrapped:!0},this._screenRaycastCache[n]=i,i}}_bufferedCameraMercator(e,t){const n=N(e);if(this._cameraRaycastCache[n])return this._cameraRaycastCache[n];{let i;return i="globe"===t.projection.name?this._projectAndResample(this.bufferedCameraGeometryGlobe(e),t):{polygon:this.bufferedCameraGeometry(e).map(e=>t.pointCoordinate3D(e)),unwrapped:!0},this._cameraRaycastCache[n]=i,i}}_projectAndResample(t,n){const i=function(t,n){const i=e.multiply([],n.pixelMatrix,n.globeMatrix),a=[0,-e.GLOBE_RADIUS,0,1],o=[0,e.GLOBE_RADIUS,0,1],r=[0,0,0,1];e.transformMat4$1(a,a,i),e.transformMat4$1(o,o,i),e.transformMat4$1(r,r,i);const s=new e.Point(a[0]/a[3],a[1]/a[3]),l=new e.Point(o[0]/o[3],o[1]/o[3]),c=e.polygonContainsPoint(t,s)&&a[3]<r[3],u=e.polygonContainsPoint(t,l)&&o[3]<r[3];if(!c&&!u)return null;const d=function(e,t,n){for(let i=1;i<e.length;i++){const a=j(t.pointCoordinate3D(e[i-1]).x),o=j(t.pointCoordinate3D(e[i]).x);if(n<0){if(a<o)return{idx:i,t:-a/(o-1-a)}}else if(o<a)return{idx:i,t:(1-a)/(o+1-a)}}return null}(t,n,c?-1:1);if(!d)return null;const{idx:p,t:f}=d;let m=p>1?A(t.slice(0,p),n):[],h=p<t.length?A(t.slice(p),n):[];m=m.map(t=>new e.Point(j(t.x),t.y)),h=h.map(t=>new e.Point(j(t.x),t.y));const g=[...m];0===g.length&&g.push(h[h.length-1]);const y=e.number(g[g.length-1].y,(0===h.length?m[0]:h[0]).y,f);let v;return v=c?[new e.Point(0,y),new e.Point(0,0),new e.Point(1,0),new e.Point(1,y)]:[new e.Point(1,y),new e.Point(1,1),new e.Point(0,1),new e.Point(0,y)],g.push(...v),0===h.length?g.push(m[0]):g.push(...h),{polygon:g.map(t=>new e.MercatorCoordinate(t.x,t.y)),unwrapped:!1}}(t,n);if(i)return i;const a=function(t,n){let i=!1,a=-1/0,o=0;for(let e=0;e<t.length-1;e++)t[e].x>a&&(a=t[e].x,o=e);for(let e=0;e<t.length-1;e++){const n=(o+e)%(t.length-1),a=t[n],r=t[n+1];Math.abs(a.x-r.x)>.5&&(a.x<r.x?(a.x+=1,0===n&&(t[t.length-1].x+=1)):(r.x+=1,n+1===t.length-1&&(t[0].x+=1)),i=!0)}const r=e.mercatorXfromLng(n.center.lng);return i&&r<Math.abs(r-1)&&t.forEach(e=>{e.x-=1}),{polygon:t,unwrapped:i}}(A(t,n).map(t=>new e.Point(j(t.x),t.y)),n);return{polygon:a.polygon.map(t=>new e.MercatorCoordinate(t.x,t.y)),unwrapped:a.unwrapped}}}function A(t,n){return e.resample(t,e=>{const t=n.pointCoordinate3D(e);e.x=t.x,e.y=t.y},1/256)}function j(e){return e<0?1+e%1:e%1}function N(e){return 100*e|0}function L(t,n,i,a,o){const r=function(i,a){if(i)return o(i);if(a){t.url&&a.tiles&&t.tiles&&delete t.tiles;const i=e.pick(e.extend(a,t),["tiles","minzoom","maxzoom","attribution","mapbox_logo","bounds","scheme","tileSize","encoding"]);a.vector_layers&&(i.vectorLayers=a.vector_layers,i.vectorLayerIds=i.vectorLayers.map(e=>e.id)),i.tiles=n.canonicalizeTileset(i,t.url),o(null,i)}};return t.url?e.getJSON(n.transformRequest(n.normalizeSourceURL(t.url,null,i,a),e.ResourceType.Source),r):e.exported.frame(()=>r(null,t))}class D{constructor(t,n,i){this.bounds=e.LngLatBounds.convert(this.validateBounds(t)),this.minzoom=n||0,this.maxzoom=i||24}validateBounds(e){return Array.isArray(e)&&4===e.length?[Math.max(-180,e[0]),Math.max(-90,e[1]),Math.min(180,e[2]),Math.min(90,e[3])]:[-180,-90,180,90]}contains(t){const n=Math.pow(2,t.z),i=Math.floor(e.mercatorXfromLng(this.bounds.getWest())*n),a=Math.floor(e.mercatorYfromLat(this.bounds.getNorth())*n),o=Math.ceil(e.mercatorXfromLng(this.bounds.getEast())*n),r=Math.ceil(e.mercatorYfromLat(this.bounds.getSouth())*n);return t.x>=i&&t.x<o&&t.y>=a&&t.y<r}}class R{constructor(e,t,n){this.context=e;const i=e.gl;this.buffer=i.createBuffer(),this.dynamicDraw=Boolean(n),this.context.unbindVAO(),e.bindElementBuffer.set(this.buffer),i.bufferData(i.ELEMENT_ARRAY_BUFFER,t.arrayBuffer,this.dynamicDraw?i.DYNAMIC_DRAW:i.STATIC_DRAW),this.dynamicDraw||t.destroy()}bind(){this.context.bindElementBuffer.set(this.buffer)}updateData(e){const t=this.context.gl;this.context.unbindVAO(),this.bind(),t.bufferSubData(t.ELEMENT_ARRAY_BUFFER,0,e.arrayBuffer)}destroy(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)}}const B={Int8:"BYTE",Uint8:"UNSIGNED_BYTE",Int16:"SHORT",Uint16:"UNSIGNED_SHORT",Int32:"INT",Uint32:"UNSIGNED_INT",Float32:"FLOAT"};class z{constructor(e,t,n,i){this.length=t.length,this.attributes=n,this.itemSize=t.bytesPerElement,this.dynamicDraw=i,this.context=e;const a=e.gl;this.buffer=a.createBuffer(),e.bindVertexBuffer.set(this.buffer),a.bufferData(a.ARRAY_BUFFER,t.arrayBuffer,this.dynamicDraw?a.DYNAMIC_DRAW:a.STATIC_DRAW),this.dynamicDraw||t.destroy()}bind(){this.context.bindVertexBuffer.set(this.buffer)}updateData(e){const t=this.context.gl;this.bind(),t.bufferSubData(t.ARRAY_BUFFER,0,e.arrayBuffer)}enableAttributes(e,t){for(let n=0;n<this.attributes.length;n++){const i=t.attributes[this.attributes[n].name];void 0!==i&&e.enableVertexAttribArray(i)}}setVertexAttribPointers(e,t,n){for(let i=0;i<this.attributes.length;i++){const a=this.attributes[i],o=t.attributes[a.name];void 0!==o&&e.vertexAttribPointer(o,a.components,e[B[a.type]],!1,this.itemSize,a.offset+this.itemSize*(n||0))}}destroy(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)}}class F{constructor(e){this.gl=e.gl,this.default=this.getDefault(),this.current=this.default,this.dirty=!1}get(){return this.current}set(e){}getDefault(){return this.default}setDefault(){this.set(this.default)}}class U extends F{getDefault(){return e.Color.transparent}set(e){const t=this.current;(e.r!==t.r||e.g!==t.g||e.b!==t.b||e.a!==t.a||this.dirty)&&(this.gl.clearColor(e.r,e.g,e.b,e.a),this.current=e,this.dirty=!1)}}class H extends F{getDefault(){return 1}set(e){(e!==this.current||this.dirty)&&(this.gl.clearDepth(e),this.current=e,this.dirty=!1)}}class W extends F{getDefault(){return 0}set(e){(e!==this.current||this.dirty)&&(this.gl.clearStencil(e),this.current=e,this.dirty=!1)}}class q extends F{getDefault(){return[!0,!0,!0,!0]}set(e){const t=this.current;(e[0]!==t[0]||e[1]!==t[1]||e[2]!==t[2]||e[3]!==t[3]||this.dirty)&&(this.gl.colorMask(e[0],e[1],e[2],e[3]),this.current=e,this.dirty=!1)}}class V extends F{getDefault(){return!0}set(e){(e!==this.current||this.dirty)&&(this.gl.depthMask(e),this.current=e,this.dirty=!1)}}class G extends F{getDefault(){return 255}set(e){(e!==this.current||this.dirty)&&(this.gl.stencilMask(e),this.current=e,this.dirty=!1)}}class Y extends F{getDefault(){return{func:this.gl.ALWAYS,ref:0,mask:255}}set(e){const t=this.current;(e.func!==t.func||e.ref!==t.ref||e.mask!==t.mask||this.dirty)&&(this.gl.stencilFunc(e.func,e.ref,e.mask),this.current=e,this.dirty=!1)}}class X extends F{getDefault(){const e=this.gl;return[e.KEEP,e.KEEP,e.KEEP]}set(e){const t=this.current;(e[0]!==t[0]||e[1]!==t[1]||e[2]!==t[2]||this.dirty)&&(this.gl.stencilOp(e[0],e[1],e[2]),this.current=e,this.dirty=!1)}}class Z extends F{getDefault(){return!1}set(e){if(e===this.current&&!this.dirty)return;const t=this.gl;e?t.enable(t.STENCIL_TEST):t.disable(t.STENCIL_TEST),this.current=e,this.dirty=!1}}class J extends F{getDefault(){return[0,1]}set(e){const t=this.current;(e[0]!==t[0]||e[1]!==t[1]||this.dirty)&&(this.gl.depthRange(e[0],e[1]),this.current=e,this.dirty=!1)}}class K extends F{getDefault(){return!1}set(e){if(e===this.current&&!this.dirty)return;const t=this.gl;e?t.enable(t.DEPTH_TEST):t.disable(t.DEPTH_TEST),this.current=e,this.dirty=!1}}class $ extends F{getDefault(){return this.gl.LESS}set(e){(e!==this.current||this.dirty)&&(this.gl.depthFunc(e),this.current=e,this.dirty=!1)}}class Q extends F{getDefault(){return!1}set(e){if(e===this.current&&!this.dirty)return;const t=this.gl;e?t.enable(t.BLEND):t.disable(t.BLEND),this.current=e,this.dirty=!1}}class ee extends F{getDefault(){const e=this.gl;return[e.ONE,e.ZERO]}set(e){const t=this.current;(e[0]!==t[0]||e[1]!==t[1]||this.dirty)&&(this.gl.blendFunc(e[0],e[1]),this.current=e,this.dirty=!1)}}class te extends F{getDefault(){return e.Color.transparent}set(e){const t=this.current;(e.r!==t.r||e.g!==t.g||e.b!==t.b||e.a!==t.a||this.dirty)&&(this.gl.blendColor(e.r,e.g,e.b,e.a),this.current=e,this.dirty=!1)}}class ne extends F{getDefault(){return this.gl.FUNC_ADD}set(e){(e!==this.current||this.dirty)&&(this.gl.blendEquation(e),this.current=e,this.dirty=!1)}}class ie extends F{getDefault(){return!1}set(e){if(e===this.current&&!this.dirty)return;const t=this.gl;e?t.enable(t.CULL_FACE):t.disable(t.CULL_FACE),this.current=e,this.dirty=!1}}class ae extends F{getDefault(){return this.gl.BACK}set(e){(e!==this.current||this.dirty)&&(this.gl.cullFace(e),this.current=e,this.dirty=!1)}}class oe extends F{getDefault(){return this.gl.CCW}set(e){(e!==this.current||this.dirty)&&(this.gl.frontFace(e),this.current=e,this.dirty=!1)}}let re,se=class extends F{getDefault(){return null}set(e){(e!==this.current||this.dirty)&&(this.gl.useProgram(e),this.current=e,this.dirty=!1)}};class le extends F{getDefault(){return this.gl.TEXTURE0}set(e){(e!==this.current||this.dirty)&&(this.gl.activeTexture(e),this.current=e,this.dirty=!1)}}class ce extends F{getDefault(){const e=this.gl;return[0,0,e.drawingBufferWidth,e.drawingBufferHeight]}set(e){const t=this.current;(e[0]!==t[0]||e[1]!==t[1]||e[2]!==t[2]||e[3]!==t[3]||this.dirty)&&(this.gl.viewport(e[0],e[1],e[2],e[3]),this.current=e,this.dirty=!1)}}class ue extends F{getDefault(){return null}set(e){if(e===this.current&&!this.dirty)return;const t=this.gl;t.bindFramebuffer(t.FRAMEBUFFER,e),this.current=e,this.dirty=!1}}class de extends F{getDefault(){return null}set(e){if(e===this.current&&!this.dirty)return;const t=this.gl;t.bindRenderbuffer(t.RENDERBUFFER,e),this.current=e,this.dirty=!1}}class pe extends F{getDefault(){return null}set(e){if(e===this.current&&!this.dirty)return;const t=this.gl;t.bindTexture(t.TEXTURE_2D,e),this.current=e,this.dirty=!1}}class fe extends F{getDefault(){return null}set(e){if(e===this.current&&!this.dirty)return;const t=this.gl;t.bindBuffer(t.ARRAY_BUFFER,e),this.current=e,this.dirty=!1}}class me extends F{getDefault(){return null}set(e){const t=this.gl;t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,e),this.current=e,this.dirty=!1}}class he extends F{constructor(e){super(e),this.vao=e.extVertexArrayObject}getDefault(){return null}set(e){this.vao&&(e!==this.current||this.dirty)&&(this.vao.bindVertexArrayOES(e),this.current=e,this.dirty=!1)}}class ge extends F{getDefault(){return 4}set(e){if(e===this.current&&!this.dirty)return;const t=this.gl;t.pixelStorei(t.UNPACK_ALIGNMENT,e),this.current=e,this.dirty=!1}}class ye extends F{getDefault(){return!1}set(e){if(e===this.current&&!this.dirty)return;const t=this.gl;t.pixelStorei(t.UNPACK_PREMULTIPLY_ALPHA_WEBGL,e),this.current=e,this.dirty=!1}}class ve extends F{getDefault(){return!1}set(e){if(e===this.current&&!this.dirty)return;const t=this.gl;t.pixelStorei(t.UNPACK_FLIP_Y_WEBGL,e),this.current=e,this.dirty=!1}}class be extends F{constructor(e,t){super(e),this.context=e,this.parent=t}getDefault(){return null}}class _e extends be{setDirty(){this.dirty=!0}set(e){if(e===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const t=this.gl;t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,e,0),this.current=e,this.dirty=!1}}class we extends be{attachment(){return this.gl.DEPTH_ATTACHMENT}set(e){if(e===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const t=this.gl;t.framebufferRenderbuffer(t.FRAMEBUFFER,this.attachment(),t.RENDERBUFFER,e),this.current=e,this.dirty=!1}}class xe extends we{attachment(){return this.gl.DEPTH_STENCIL_ATTACHMENT}}class ke{constructor(e,t,n,i){this.context=e,this.width=t,this.height=n;const a=this.framebuffer=e.gl.createFramebuffer();this.colorAttachment=new _e(e,a),i&&(this.depthAttachment=new we(e,a))}destroy(){const e=this.context.gl,t=this.colorAttachment.get();if(t&&e.deleteTexture(t),this.depthAttachment){const t=this.depthAttachment.get();t&&e.deleteRenderbuffer(t)}e.deleteFramebuffer(this.framebuffer)}}class Oe{constructor(e,t=!1){if(this.gl=e,this.isWebGL2=t,this.extVertexArrayObject=this.gl.getExtension("OES_vertex_array_object"),t){const t=e;this.extVertexArrayObject={createVertexArrayOES:t.createVertexArray.bind(e),deleteVertexArrayOES:t.deleteVertexArray.bind(e),bindVertexArrayOES:t.bindVertexArray.bind(e)}}this.clearColor=new U(this),this.clearDepth=new H(this),this.clearStencil=new W(this),this.colorMask=new q(this),this.depthMask=new V(this),this.stencilMask=new G(this),this.stencilFunc=new Y(this),this.stencilOp=new X(this),this.stencilTest=new Z(this),this.depthRange=new J(this),this.depthTest=new K(this),this.depthFunc=new $(this),this.blend=new Q(this),this.blendFunc=new ee(this),this.blendColor=new te(this),this.blendEquation=new ne(this),this.cullFace=new ie(this),this.cullFaceSide=new ae(this),this.frontFace=new oe(this),this.program=new se(this),this.activeTexture=new le(this),this.viewport=new ce(this),this.bindFramebuffer=new ue(this),this.bindRenderbuffer=new de(this),this.bindTexture=new pe(this),this.bindVertexBuffer=new fe(this),this.bindElementBuffer=new me(this),this.bindVertexArrayOES=this.extVertexArrayObject&&new he(this),this.pixelStoreUnpack=new ge(this),this.pixelStoreUnpackPremultiplyAlpha=new ye(this),this.pixelStoreUnpackFlipY=new ve(this),this.extTextureFilterAnisotropic=e.getExtension("EXT_texture_filter_anisotropic")||e.getExtension("MOZ_EXT_texture_filter_anisotropic")||e.getExtension("WEBKIT_EXT_texture_filter_anisotropic"),this.extTextureFilterAnisotropic&&(this.extTextureFilterAnisotropicMax=e.getParameter(this.extTextureFilterAnisotropic.MAX_TEXTURE_MAX_ANISOTROPY_EXT)),this.extTextureFilterAnisotropicForceOff=!1,this.extStandardDerivativesForceOff=!1,this.extDebugRendererInfo=e.getExtension("WEBGL_debug_renderer_info"),this.extDebugRendererInfo&&(this.renderer=e.getParameter(this.extDebugRendererInfo.UNMASKED_RENDERER_WEBGL),this.vendor=e.getParameter(this.extDebugRendererInfo.UNMASKED_VENDOR_WEBGL)),t||(this.extTextureHalfFloat=e.getExtension("OES_texture_half_float")),(t||this.extTextureHalfFloat&&e.getExtension("OES_texture_half_float_linear"))&&(this.extRenderToTextureHalfFloat=e.getExtension("EXT_color_buffer_half_float")),this.extStandardDerivatives=t||e.getExtension("OES_standard_derivatives"),this.extTimerQuery=e.getExtension("EXT_disjoint_timer_query"),this.maxTextureSize=e.getParameter(e.MAX_TEXTURE_SIZE)}setDefault(){this.unbindVAO(),this.clearColor.setDefault(),this.clearDepth.setDefault(),this.clearStencil.setDefault(),this.colorMask.setDefault(),this.depthMask.setDefault(),this.stencilMask.setDefault(),this.stencilFunc.setDefault(),this.stencilOp.setDefault(),this.stencilTest.setDefault(),this.depthRange.setDefault(),this.depthTest.setDefault(),this.depthFunc.setDefault(),this.blend.setDefault(),this.blendFunc.setDefault(),this.blendColor.setDefault(),this.blendEquation.setDefault(),this.cullFace.setDefault(),this.cullFaceSide.setDefault(),this.frontFace.setDefault(),this.program.setDefault(),this.activeTexture.setDefault(),this.bindFramebuffer.setDefault(),this.pixelStoreUnpack.setDefault(),this.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.pixelStoreUnpackFlipY.setDefault()}setDirty(){this.clearColor.dirty=!0,this.clearDepth.dirty=!0,this.clearStencil.dirty=!0,this.colorMask.dirty=!0,this.depthMask.dirty=!0,this.stencilMask.dirty=!0,this.stencilFunc.dirty=!0,this.stencilOp.dirty=!0,this.stencilTest.dirty=!0,this.depthRange.dirty=!0,this.depthTest.dirty=!0,this.depthFunc.dirty=!0,this.blend.dirty=!0,this.blendFunc.dirty=!0,this.blendColor.dirty=!0,this.blendEquation.dirty=!0,this.cullFace.dirty=!0,this.cullFaceSide.dirty=!0,this.frontFace.dirty=!0,this.program.dirty=!0,this.activeTexture.dirty=!0,this.viewport.dirty=!0,this.bindFramebuffer.dirty=!0,this.bindRenderbuffer.dirty=!0,this.bindTexture.dirty=!0,this.bindVertexBuffer.dirty=!0,this.bindElementBuffer.dirty=!0,this.extVertexArrayObject&&(this.bindVertexArrayOES.dirty=!0),this.pixelStoreUnpack.dirty=!0,this.pixelStoreUnpackPremultiplyAlpha.dirty=!0,this.pixelStoreUnpackFlipY.dirty=!0}createIndexBuffer(e,t){return new R(this,e,t)}createVertexBuffer(e,t,n){return new z(this,e,t,n)}createRenderbuffer(e,t,n){const i=this.gl,a=i.createRenderbuffer();return this.bindRenderbuffer.set(a),i.renderbufferStorage(i.RENDERBUFFER,e,t,n),this.bindRenderbuffer.set(null),a}createFramebuffer(e,t,n){return new ke(this,e,t,n)}clear({color:e,depth:t,stencil:n}){const i=this.gl;let a=0;e&&(a|=i.COLOR_BUFFER_BIT,this.clearColor.set(e),this.colorMask.set([!0,!0,!0,!0])),void 0!==t&&(a|=i.DEPTH_BUFFER_BIT,this.depthRange.set([0,1]),this.clearDepth.set(t),this.depthMask.set(!0)),void 0!==n&&(a|=i.STENCIL_BUFFER_BIT,this.clearStencil.set(n),this.stencilMask.set(255)),i.clear(a)}setCullFace(e){!1===e.enable?this.cullFace.set(!1):(this.cullFace.set(!0),this.cullFaceSide.set(e.mode),this.frontFace.set(e.frontFace))}setDepthMode(e){e.func!==this.gl.ALWAYS||e.mask?(this.depthTest.set(!0),this.depthFunc.set(e.func),this.depthMask.set(e.mask),this.depthRange.set(e.range)):this.depthTest.set(!1)}setStencilMode(e){e.test.func!==this.gl.ALWAYS||e.mask?(this.stencilTest.set(!0),this.stencilMask.set(e.mask),this.stencilOp.set([e.fail,e.depthFail,e.pass]),this.stencilFunc.set({func:e.test.func,ref:e.ref,mask:e.test.mask})):this.stencilTest.set(!1)}setColorMode(n){t(n.blendFunction,e.ColorMode.Replace)?this.blend.set(!1):(this.blend.set(!0),this.blendFunc.set(n.blendFunction),this.blendColor.set(n.blendColor)),this.colorMask.set(n.mask)}unbindVAO(){this.extVertexArrayObject&&this.bindVertexArrayOES.set(null)}}class Te extends e.Evented{constructor(t,n,i,a){if(super(),this.id=t,this.dispatcher=i,this.type="vector",this.minzoom=0,this.maxzoom=22,this.scheme="xyz",this.tileSize=512,this.reparseOverscaled=!0,this.isTileClipped=!0,this._loaded=!1,e.extend(this,e.pick(n,["url","scheme","tileSize","promoteId"])),this._options=e.extend({type:"vector"},n),this._collectResourceTiming=n.collectResourceTiming,512!==this.tileSize)throw new Error("vector tile sources must have a tileSize of 512");this.setEventedParent(a),this._tileWorkers={},this._deduped=new e.DedupedRequest}load(t){this._loaded=!1,this.fire(new e.Event("dataloading",{dataType:"source"}));const n=Array.isArray(this.map._language)?this.map._language.join():this.map._language,i=this.map._worldview;this._tileJSONRequest=L(this._options,this.map._requestManager,n,i,(a,o)=>{this._tileJSONRequest=null,this._loaded=!0,a?(n&&console.warn("Ensure that your requested language string is a valid BCP-47 code or list of codes. Found: "+n),i&&2!==i.length&&console.warn("Requested worldview strings must be a valid ISO alpha-2 code. Found: "+i),this.fire(new e.ErrorEvent(a))):o&&(e.extend(this,o),o.bounds&&(this.tileBounds=new D(o.bounds,this.minzoom,this.maxzoom)),e.postTurnstileEvent(o.tiles,this.map._requestManager._customAccessToken),this.fire(new e.Event("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new e.Event("data",{dataType:"source",sourceDataType:"content"}))),t&&t(a)})}loaded(){return this._loaded}hasTile(e){return!this.tileBounds||this.tileBounds.contains(e.canonical)}onAdd(e){this.map=e,this.load()}reload(){this.cancelTileJSONRequest(),this.load(()=>this.map.style._clearSource(this.id))}setTiles(e){return this._options.tiles=e,this.reload(),this}setUrl(e){return this.url=e,this._options.url=e,this.reload(),this}onRemove(){this.cancelTileJSONRequest()}serialize(){return e.extend({},this._options)}loadTile(t,n){const i=this.map._requestManager.normalizeTileURL(t.tileID.canonical.url(this.tiles,this.scheme)),a={request:this.map._requestManager.transformRequest(i,e.ResourceType.Tile),data:void 0,uid:t.uid,tileID:t.tileID,tileZoom:t.tileZoom,zoom:t.tileID.overscaledZ,tileSize:this.tileSize*t.tileID.overscaleFactor(),type:this.type,source:this.id,pixelRatio:e.exported.devicePixelRatio,showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId,isSymbolTile:t.isSymbolTile};if(a.request.collectResourceTiming=this._collectResourceTiming,t.actor&&"expired"!==t.state)"loading"===t.state?t.reloadCallback=n:t.request=t.actor.send("reloadTile",a,o.bind(this));else if(t.actor=this._tileWorkers[i]=this._tileWorkers[i]||this.dispatcher.getActor(),this.dispatcher.ready)t.request=t.actor.send("loadTile",a,o.bind(this),void 0,!0);else{const n=e.loadVectorTile.call({deduped:this._deduped},a,(e,n)=>{e||!n?o.call(this,e):(a.data={cacheControl:n.cacheControl,expires:n.expires,rawData:n.rawData.slice(0)},t.actor&&t.actor.send("loadTile",a,o.bind(this),void 0,!0))},!0);t.request={cancel:n}}function o(i,a){return delete t.request,t.aborted?n(null):i&&404!==i.status?n(i):(a&&a.resourceTiming&&(t.resourceTiming=a.resourceTiming),this.map._refreshExpiredTiles&&a&&t.setExpiryData(a),t.loadVectorData(a,this.map.painter),e.cacheEntryPossiblyAdded(this.dispatcher),n(null),void(t.reloadCallback&&(this.loadTile(t,t.reloadCallback),t.reloadCallback=null)))}}abortTile(e){e.request&&(e.request.cancel(),delete e.request),e.actor&&e.actor.send("abortTile",{uid:e.uid,type:this.type,source:this.id})}unloadTile(e){e.unloadVectorData(),e.actor&&e.actor.send("removeTile",{uid:e.uid,type:this.type,source:this.id})}hasTransition(){return!1}afterUpdate(){this._tileWorkers={}}cancelTileJSONRequest(){this._tileJSONRequest&&(this._tileJSONRequest.cancel(),this._tileJSONRequest=null)}}class Ce extends e.Evented{constructor(t,n,i,a){super(),this.id=t,this.dispatcher=i,this.setEventedParent(a),this.type="raster",this.minzoom=0,this.maxzoom=22,this.roundZoom=!0,this.scheme="xyz",this.tileSize=512,this._loaded=!1,this._options=e.extend({type:"raster"},n),e.extend(this,e.pick(n,["url","scheme","tileSize"]))}load(t){this._loaded=!1,this.fire(new e.Event("dataloading",{dataType:"source"})),this._tileJSONRequest=L(this._options,this.map._requestManager,null,null,(n,i)=>{this._tileJSONRequest=null,this._loaded=!0,n?this.fire(new e.ErrorEvent(n)):i&&(e.extend(this,i),i.bounds&&(this.tileBounds=new D(i.bounds,this.minzoom,this.maxzoom)),e.postTurnstileEvent(i.tiles),this.fire(new e.Event("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new e.Event("data",{dataType:"source",sourceDataType:"content"}))),t&&t(n)})}loaded(){return this._loaded}onAdd(e){this.map=e,this.load()}reload(){this.cancelTileJSONRequest(),this.load(()=>this.map.style._clearSource(this.id))}setTiles(e){return this._options.tiles=e,this.reload(),this}setUrl(e){return this.url=e,this._options.url=e,this.reload(),this}onRemove(){this.cancelTileJSONRequest()}serialize(){return e.extend({},this._options)}hasTile(e){return!this.tileBounds||this.tileBounds.contains(e.canonical)}loadTile(t,n){const i=e.exported.devicePixelRatio>=2,a=this.map._requestManager.normalizeTileURL(t.tileID.canonical.url(this.tiles,this.scheme),i,this.tileSize);t.request=e.getImage(this.map._requestManager.transformRequest(a,e.ResourceType.Tile),(i,a,o,r)=>(delete t.request,t.aborted?(t.state="unloaded",n(null)):i?(t.state="errored",n(i)):a?(this.map._refreshExpiredTiles&&t.setExpiryData({cacheControl:o,expires:r}),t.setTexture(a,this.map.painter),t.state="loaded",e.cacheEntryPossiblyAdded(this.dispatcher),void n(null)):n(null)))}static loadTileData(e,t,n){e.setTexture(t,n)}static unloadTileData(e,t){e.texture&&t.saveTileTexture(e.texture)}abortTile(e,t){e.request&&(e.request.cancel(),delete e.request),t()}unloadTile(e,t){e.texture&&this.map.painter.saveTileTexture(e.texture),t()}hasTransition(){return!1}cancelTileJSONRequest(){this._tileJSONRequest&&(this._tileJSONRequest.cancel(),this._tileJSONRequest=null)}}function Ee(t,n,i,a,o,r,s,l){const c=[t,i,o,n,a,r,1,1,1],u=[s,l,1],d=e.adjoint([],c),[p,f,m]=e.transformMat3(u,u,e.transpose(d,d));return e.multiply$1(c,[p,0,0,0,f,0,0,0,m],c)}class Se extends e.Evented{constructor(e,t,n,i){super(),this.id=e,this.dispatcher=n,this.coordinates=t.coordinates,this.type="image",this.minzoom=0,this.maxzoom=22,this.tileSize=512,this.tiles={},this._loaded=!1,this.setEventedParent(i),this.options=t,this._dirty=!1}load(t,n){this._loaded=n||!1,this.fire(new e.Event("dataloading",{dataType:"source"})),this.url=this.options.url,this._imageRequest=e.getImage(this.map._requestManager.transformRequest(this.url,e.ResourceType.Image),(n,i)=>{if(this._imageRequest=null,this._loaded=!0,n)this.fire(new e.ErrorEvent(n));else if(i){const{HTMLImageElement:n}=e.window;this.image=i instanceof n?e.exported.getImageData(i):i,this._dirty=!0,this.width=this.image.width,this.height=this.image.height,t&&(this.coordinates=t),this._finishLoading()}})}loaded(){return this._loaded}updateImage(e){return this.image&&e.url?(this._imageRequest&&e.url!==this.options.url&&(this._imageRequest.cancel(),this._imageRequest=null),this.options.url=e.url,this.load(e.coordinates,this._loaded),this):this}_finishLoading(){this.map&&(this.setCoordinates(this.coordinates),this.fire(new e.Event("data",{dataType:"source",sourceDataType:"metadata"})))}onAdd(e){this.map=e,this.load()}onRemove(){this._imageRequest&&(this._imageRequest.cancel(),this._imageRequest=null),this.texture&&this.texture.destroy()}setCoordinates(t){this.coordinates=t,this._boundsArray=void 0;const n=t.map(e.MercatorCoordinate.fromLngLat);return this.tileID=function(t){let n=1/0,i=1/0,a=-1/0,o=-1/0;for(const e of t)n=Math.min(n,e.x),i=Math.min(i,e.y),a=Math.max(a,e.x),o=Math.max(o,e.y);const r=Math.max(a-n,o-i),s=Math.max(0,Math.floor(-Math.log(r)/Math.LN2)),l=Math.pow(2,s);return new e.CanonicalTileID(s,Math.floor((n+a)/2*l),Math.floor((i+o)/2*l))}(n),this.minzoom=this.maxzoom=this.tileID.z,this.fire(new e.Event("data",{dataType:"source",sourceDataType:"content"})),this}_clear(){this._boundsArray=void 0}_prepareData(t){for(const e in this.tiles){const t=this.tiles[e];"loaded"!==t.state&&(t.state="loaded",t.texture=this.texture)}if(this._boundsArray)return;const n=e.tileTransform(this.tileID,this.map.transform.projection),[i,a,o,r]=this.coordinates.map(t=>{const i=n.projection.project(t[0],t[1]);return e.getTilePoint(n,i)._round()});this.perspectiveTransform=function(t,n,i,a,o,r,s,l,c,u){const d=Ee(0,0,t,0,0,n,t,n),p=Ee(i,a,o,r,s,l,c,u);return e.multiply$1(p,e.adjoint(d,d),p),[p[6]/p[8]*t/e.EXTENT,p[7]/p[8]*n/e.EXTENT]}(this.width,this.height,i.x,i.y,a.x,a.y,r.x,r.y,o.x,o.y);const s=this._boundsArray=new e.StructArrayLayout4i8;s.emplaceBack(i.x,i.y,0,0),s.emplaceBack(a.x,a.y,e.EXTENT,0),s.emplaceBack(r.x,r.y,0,e.EXTENT),s.emplaceBack(o.x,o.y,e.EXTENT,e.EXTENT),this.boundsBuffer&&this.boundsBuffer.destroy(),this.boundsBuffer=t.createVertexBuffer(s,e.boundsAttributes.members),this.boundsSegments=e.SegmentVector.simpleSegment(0,0,4,2)}prepare(){if(0===Object.keys(this.tiles).length||!this.image)return;const t=this.map.painter.context,n=t.gl;this._dirty&&(this.texture?this.texture.update(this.image):(this.texture=new e.Texture(t,this.image,n.RGBA),this.texture.bind(n.LINEAR,n.CLAMP_TO_EDGE)),this._dirty=!1),this._prepareData(t)}loadTile(e,t){this.tileID&&this.tileID.equals(e.tileID.canonical)?(this.tiles[String(e.tileID.wrap)]=e,e.buckets={},t(null)):(e.state="errored",t(null))}serialize(){return{type:"image",url:this.options.url,coordinates:this.coordinates}}hasTransition(){return!1}}const Pe={vector:Te,raster:Ce,"raster-dem":class extends Ce{constructor(t,n,i,a){super(t,n,i,a),this.type="raster-dem",this.maxzoom=22,this._options=e.extend({type:"raster-dem"},n),this.encoding=n.encoding||"mapbox"}loadTile(t,n){const i=this.map._requestManager.normalizeTileURL(t.tileID.canonical.url(this.tiles,this.scheme),!1,this.tileSize);function a(e,i){e&&(t.state="errored",n(e)),i&&(t.dem=i,t.dem.onDeserialize(),t.needsHillshadePrepare=!0,t.needsDEMTextureUpload=!0,t.state="loaded",n(null))}t.request=e.getImage(this.map._requestManager.transformRequest(i,e.ResourceType.Tile),function(i,o,r,s){if(delete t.request,t.aborted)t.state="unloaded",n(null);else if(i)t.state="errored",n(i);else if(o){this.map._refreshExpiredTiles&&t.setExpiryData({cacheControl:r,expires:s});const n=e.window.ImageBitmap&&o instanceof e.window.ImageBitmap&&(null==re&&(re=e.window.OffscreenCanvas&&new e.window.OffscreenCanvas(1,1).getContext("2d")&&"function"==typeof e.window.createImageBitmap),re),i=1-(o.width-e.prevPowerOfTwo(o.width))/2;i<1||t.neighboringTiles||(t.neighboringTiles=this._getNeighboringTiles(t.tileID));const l=n?o:e.exported.getImageData(o,i),c={uid:t.uid,coord:t.tileID,source:this.id,rawImageData:l,encoding:this.encoding,padding:i};t.actor&&"expired"!==t.state||(t.actor=this.dispatcher.getActor(),t.actor.send("loadDEMTile",c,a.bind(this),void 0,!0))}}.bind(this))}_getNeighboringTiles(t){const n=t.canonical,i=Math.pow(2,n.z),a=(n.x-1+i)%i,o=0===n.x?t.wrap-1:t.wrap,r=(n.x+1+i)%i,s=n.x+1===i?t.wrap+1:t.wrap,l={};return l[new e.OverscaledTileID(t.overscaledZ,o,n.z,a,n.y).key]={backfilled:!1},l[new e.OverscaledTileID(t.overscaledZ,s,n.z,r,n.y).key]={backfilled:!1},n.y>0&&(l[new e.OverscaledTileID(t.overscaledZ,o,n.z,a,n.y-1).key]={backfilled:!1},l[new e.OverscaledTileID(t.overscaledZ,t.wrap,n.z,n.x,n.y-1).key]={backfilled:!1},l[new e.OverscaledTileID(t.overscaledZ,s,n.z,r,n.y-1).key]={backfilled:!1}),n.y+1<i&&(l[new e.OverscaledTileID(t.overscaledZ,o,n.z,a,n.y+1).key]={backfilled:!1},l[new e.OverscaledTileID(t.overscaledZ,t.wrap,n.z,n.x,n.y+1).key]={backfilled:!1},l[new e.OverscaledTileID(t.overscaledZ,s,n.z,r,n.y+1).key]={backfilled:!1}),l}unloadTile(e){e.demTexture&&this.map.painter.saveTileTexture(e.demTexture),e.fbo&&(e.fbo.destroy(),delete e.fbo),e.dem&&delete e.dem,delete e.neighboringTiles,e.state="unloaded"}},geojson:class extends e.Evented{constructor(t,n,i,a){super(),this.id=t,this.type="geojson",this.minzoom=0,this.maxzoom=18,this.tileSize=512,this.isTileClipped=!0,this.reparseOverscaled=!0,this._loaded=!1,this.actor=i.getActor(),this.setEventedParent(a),this._data=n.data,this._options=e.extend({},n),this._collectResourceTiming=n.collectResourceTiming,void 0!==n.maxzoom&&(this.maxzoom=n.maxzoom),n.type&&(this.type=n.type),n.attribution&&(this.attribution=n.attribution),this.promoteId=n.promoteId;const o=e.EXTENT/this.tileSize;this.workerOptions=e.extend({source:this.id,cluster:n.cluster||!1,geojsonVtOptions:{buffer:(void 0!==n.buffer?n.buffer:128)*o,tolerance:(void 0!==n.tolerance?n.tolerance:.375)*o,extent:e.EXTENT,maxZoom:this.maxzoom,lineMetrics:n.lineMetrics||!1,generateId:n.generateId||!1},superclusterOptions:{maxZoom:void 0!==n.clusterMaxZoom?n.clusterMaxZoom:this.maxzoom-1,minPoints:Math.max(2,n.clusterMinPoints||2),extent:e.EXTENT,radius:(void 0!==n.clusterRadius?n.clusterRadius:50)*o,log:!1,generateId:n.generateId||!1},clusterProperties:n.clusterProperties,filter:n.filter},n.workerOptions)}onAdd(e){this.map=e,this.setData(this._data)}setData(e){return this._data=e,this._updateWorkerData(),this}getClusterExpansionZoom(e,t){return this.actor.send("geojson.getClusterExpansionZoom",{clusterId:e,source:this.id},t),this}getClusterChildren(e,t){return this.actor.send("geojson.getClusterChildren",{clusterId:e,source:this.id},t),this}getClusterLeaves(e,t,n,i){return this.actor.send("geojson.getClusterLeaves",{source:this.id,clusterId:e,limit:t,offset:n},i),this}_updateWorkerData(){if(this._pendingLoad)return void(this._coalesce=!0);this.fire(new e.Event("dataloading",{dataType:"source"})),this._loaded=!1;const t=e.extend({},this.workerOptions),n=this._data;"string"==typeof n?(t.request=this.map._requestManager.transformRequest(e.exported.resolveURL(n),e.ResourceType.Source),t.request.collectResourceTiming=this._collectResourceTiming):t.data=JSON.stringify(n),this._pendingLoad=this.actor.send(this.type+".loadData",t,(t,n)=>{if(this._loaded=!0,this._pendingLoad=null,t)this.fire(new e.ErrorEvent(t));else{const t={dataType:"source",sourceDataType:this._metadataFired?"content":"metadata"};this._collectResourceTiming&&n&&n.resourceTiming&&n.resourceTiming[this.id]&&(t.resourceTiming=n.resourceTiming[this.id]),this.fire(new e.Event("data",t)),this._metadataFired=!0}this._coalesce&&(this._updateWorkerData(),this._coalesce=!1)})}loaded(){return this._loaded}loadTile(t,n){const i=t.actor?"reloadTile":"loadTile";t.actor=this.actor,t.request=this.actor.send(i,{type:this.type,uid:t.uid,tileID:t.tileID,tileZoom:t.tileZoom,zoom:t.tileID.overscaledZ,maxZoom:this.maxzoom,tileSize:this.tileSize,source:this.id,pixelRatio:e.exported.devicePixelRatio,showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId},(e,a)=>(delete t.request,t.unloadVectorData(),t.aborted?n(null):e?n(e):(t.loadVectorData(a,this.map.painter,"reloadTile"===i),n(null))),void 0,"loadTile"===i)}abortTile(e){e.request&&(e.request.cancel(),delete e.request),e.aborted=!0}unloadTile(e){e.unloadVectorData(),this.actor.send("removeTile",{uid:e.uid,type:this.type,source:this.id})}onRemove(){this._pendingLoad&&this._pendingLoad.cancel()}serialize(){return e.extend({},this._options,{type:this.type,data:this._data})}hasTransition(){return!1}},video:class extends Se{constructor(e,t,n,i){super(e,t,n,i),this.roundZoom=!0,this.type="video",this.options=t}load(){this._loaded=!1;const t=this.options;this.urls=[];for(const n of t.urls)this.urls.push(this.map._requestManager.transformRequest(n,e.ResourceType.Source).url);e.getVideo(this.urls,(t,n)=>{this._loaded=!0,t?this.fire(new e.ErrorEvent(t)):n&&(this.video=n,this.video.loop=!0,this.video.setAttribute("playsinline",""),this.video.addEventListener("playing",()=>{this.map.triggerRepaint()}),this.map&&this.video.play(),this._finishLoading())})}pause(){this.video&&this.video.pause()}play(){this.video&&this.video.play()}seek(t){if(this.video){const n=this.video.seekable;t<n.start(0)||t>n.end(0)?this.fire(new e.ErrorEvent(new e.ValidationError("sources."+this.id,null,`Playback for this video can be set only between the ${n.start(0)} and ${n.end(0)}-second mark.`))):this.video.currentTime=t}}getVideo(){return this.video}onAdd(e){this.map||(this.map=e,this.load(),this.video&&(this.video.play(),this.setCoordinates(this.coordinates)))}prepare(){if(0===Object.keys(this.tiles).length||this.video.readyState<2)return;const t=this.map.painter.context,n=t.gl;this.texture?this.video.paused||(this.texture.bind(n.LINEAR,n.CLAMP_TO_EDGE),n.texSubImage2D(n.TEXTURE_2D,0,0,0,n.RGBA,n.UNSIGNED_BYTE,this.video)):(this.texture=new e.Texture(t,this.video,n.RGBA),this.texture.bind(n.LINEAR,n.CLAMP_TO_EDGE),this.width=this.video.videoWidth,this.height=this.video.videoHeight),this._prepareData(t)}serialize(){return{type:"video",urls:this.urls,coordinates:this.coordinates}}hasTransition(){return this.video&&!this.video.paused}},image:Se,canvas:class extends Se{constructor(t,n,i,a){super(t,n,i,a),n.coordinates?Array.isArray(n.coordinates)&&4===n.coordinates.length&&!n.coordinates.some(e=>!Array.isArray(e)||2!==e.length||e.some(e=>"number"!=typeof e))||this.fire(new e.ErrorEvent(new e.ValidationError("sources."+t,null,'"coordinates" property must be an array of 4 longitude/latitude array pairs'))):this.fire(new e.ErrorEvent(new e.ValidationError("sources."+t,null,'missing required property "coordinates"'))),n.animate&&"boolean"!=typeof n.animate&&this.fire(new e.ErrorEvent(new e.ValidationError("sources."+t,null,'optional "animate" property must be a boolean value'))),n.canvas?"string"==typeof n.canvas||n.canvas instanceof e.window.HTMLCanvasElement||this.fire(new e.ErrorEvent(new e.ValidationError("sources."+t,null,'"canvas" must be either a string representing the ID of the canvas element from which to read, or an HTMLCanvasElement instance'))):this.fire(new e.ErrorEvent(new e.ValidationError("sources."+t,null,'missing required property "canvas"'))),this.options=n,this.animate=void 0===n.animate||n.animate}load(){this._loaded=!0,this.canvas||(this.canvas=this.options.canvas instanceof e.window.HTMLCanvasElement?this.options.canvas:e.window.document.getElementById(this.options.canvas)),this.width=this.canvas.width,this.height=this.canvas.height,this._hasInvalidDimensions()?this.fire(new e.ErrorEvent(new Error("Canvas dimensions cannot be less than or equal to zero."))):(this.play=function(){this._playing=!0,this.map.triggerRepaint()},this.pause=function(){this._playing&&(this.prepare(),this._playing=!1)},this._finishLoading())}getCanvas(){return this.canvas}onAdd(e){this.map=e,this.load(),this.canvas&&this.animate&&this.play()}onRemove(){this.pause()}prepare(){let t=!1;if(this.canvas.width!==this.width&&(this.width=this.canvas.width,t=!0),this.canvas.height!==this.height&&(this.height=this.canvas.height,t=!0),this._hasInvalidDimensions())return;if(0===Object.keys(this.tiles).length)return;const n=this.map.painter.context;this.texture?(t||this._playing)&&this.texture.update(this.canvas,{premultiply:!0}):this.texture=new e.Texture(n,this.canvas,n.gl.RGBA,{premultiply:!0}),this._prepareData(n)}serialize(){return{type:"canvas",coordinates:this.coordinates}}hasTransition(){return this._playing}_hasInvalidDimensions(){for(const e of[this.canvas.width,this.canvas.height])if(isNaN(e)||e<=0)return!0;return!1}},custom:class extends e.Evented{constructor(t,n,i,a){super(),this.id=t,this.type="custom",this._dataType="raster",this._dispatcher=i,this._implementation=n,this.setEventedParent(a),this.scheme="xyz",this.minzoom=0,this.maxzoom=22,this.tileSize=512,this._loaded=!1,this.roundZoom=!0,this._implementation||this.fire(new e.ErrorEvent(new Error(`Missing implementation for ${this.id} custom source`))),this._implementation.loadTile||this.fire(new e.ErrorEvent(new Error(`Missing loadTile implementation for ${this.id} custom source`))),this._implementation.bounds&&(this.tileBounds=new D(this._implementation.bounds,this.minzoom,this.maxzoom)),n.update=this._update.bind(this),n.clearTiles=this._clearTiles.bind(this),n.coveringTiles=this._coveringTiles.bind(this),e.extend(this,e.pick(n,["dataType","scheme","minzoom","maxzoom","tileSize","attribution","minTileCacheSize","maxTileCacheSize"]))}serialize(){return e.pick(this,["type","scheme","minzoom","maxzoom","tileSize","attribution"])}load(){this._loaded=!0,this.fire(new e.Event("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new e.Event("data",{dataType:"source",sourceDataType:"content"}))}loaded(){return this._loaded}onAdd(t){this._map=t,this._loaded=!1,this.fire(new e.Event("dataloading",{dataType:"source"})),this._implementation.onAdd&&this._implementation.onAdd(t),this.load()}onRemove(e){this._implementation.onRemove&&this._implementation.onRemove(e)}hasTile(e){if(this._implementation.hasTile){const{x:t,y:n,z:i}=e.canonical;return this._implementation.hasTile({x:t,y:n,z:i})}return!this.tileBounds||this.tileBounds.contains(e.canonical)}loadTile(t,n){const{x:i,y:a,z:o}=t.tileID.canonical,r=new e.window.AbortController;t.request=Promise.resolve(this._implementation.loadTile({x:i,y:a,z:o},{signal:r.signal})).then(function(i){return delete t.request,t.aborted?(t.state="unloaded",n(null)):void 0===i?(t.state="errored",n(null)):null===i?(this.loadTileData(t,{width:this.tileSize,height:this.tileSize,data:null}),t.state="loaded",n(null)):function(t){return t instanceof e.window.ImageData||t instanceof e.window.HTMLCanvasElement||t instanceof e.window.ImageBitmap||t instanceof e.window.HTMLImageElement}(i)?(this.loadTileData(t,i),t.state="loaded",void n(null)):(t.state="errored",n(new Error(`Can't infer data type for ${this.id}, only raster data supported at the moment`)))}.bind(this)).catch(e=>{20!==e.code&&(t.state="errored",n(e))}),t.request.cancel=()=>r.abort()}loadTileData(e,t){Ce.loadTileData(e,t,this._map.painter)}unloadTileData(e){Ce.unloadTileData(e,this._map.painter)}unloadTile(e,t){if(this.unloadTileData(e),this._implementation.unloadTile){const{x:t,y:n,z:i}=e.tileID.canonical;this._implementation.unloadTile({x:t,y:n,z:i})}t()}abortTile(e,t){e.request&&e.request.cancel&&(e.request.cancel(),delete e.request),t()}hasTransition(){return!1}_coveringTiles(){return this._map.transform.coveringTiles({tileSize:this.tileSize,minzoom:this.minzoom,maxzoom:this.maxzoom,roundZoom:this.roundZoom}).map(e=>({x:e.canonical.x,y:e.canonical.y,z:e.canonical.z}))}_clearTiles(){this._map.style._clearSource(this.id)}_update(){this.fire(new e.Event("data",{dataType:"source",sourceDataType:"content"}))}}},Ie=function(t,n,i,a){const o=new Pe[n.type](t,n,i,a);if(o.id!==t)throw new Error(`Expected Source id to be ${t} instead of ${o.id}`);return e.bindAll(["load","abort","unload","serialize","prepare"],o),o};function Me(t,n){const i=e.identity([]);return e.scale(i,i,[.5*t.width,.5*-t.height,1]),e.translate(i,i,[1,-1,0]),e.multiply(i,i,t.calculateProjMatrix(n.toUnwrapped())),Float32Array.from(i)}function Ae(e,t,n,i,a,o,r,s=!1){const l=e.tilesIn(i,r,s);l.sort(Ne);const c=[];for(const i of l)c.push({wrappedTileID:i.tile.tileID.wrapped().key,queryResults:i.tile.queryRenderedFeatures(t,n,e._state,i,a,o,Me(e.transform,i.tile.tileID),s)});const u=function(e){const t={},n={};for(const i of e){const e=i.queryResults,a=i.wrappedTileID,o=n[a]=n[a]||{};for(const n in e){const i=e[n],a=o[n]=o[n]||{},r=t[n]=t[n]||[];for(const e of i)a[e.featureIndex]||(a[e.featureIndex]=!0,r.push(e))}}return t}(c);for(const t in u)u[t].forEach(t=>{const n=t.feature,i=n.layer;i&&"background"!==i.type&&"sky"!==i.type&&(n.source=i.source,i["source-layer"]&&(n.sourceLayer=i["source-layer"]),n.state=void 0!==n.id?e.getFeatureState(i["source-layer"],n.id):{})});return u}function je(e,t){const n=e.getRenderableIds().map(t=>e.getTileByID(t)),i=[],a={};for(let e=0;e<n.length;e++){const o=n[e],r=o.tileID.canonical.key;a[r]||(a[r]=!0,o.querySourceFeatures(i,t))}return i}function Ne(e,t){const n=e.tileID,i=t.tileID;return n.overscaledZ-i.overscaledZ||n.canonical.y-i.canonical.y||n.wrap-i.wrap||n.canonical.x-i.canonical.x}function Le(){return null!=ho.workerClass?new ho.workerClass:new e.window.Worker(ho.workerUrl)}const De="mapboxgl_preloaded_worker_pool";class Re{constructor(){this.active={}}acquire(e){if(!this.workers)for(this.workers=[];this.workers.length<Re.workerCount;)this.workers.push(new Le);return this.active[e]=!0,this.workers.slice()}release(e){delete this.active[e],0===this.numActive()&&(this.workers.forEach(e=>{e.terminate()}),this.workers=null)}isPreloaded(){return!!this.active[De]}numActive(){return Object.keys(this.active).length}}let Be;function ze(){return Be||(Be=new Re),Be}function Fe(t,n){const i={};for(const e in t)"ref"!==e&&(i[e]=t[e]);return e.refProperties.forEach(e=>{e in n&&(i[e]=n[e])}),i}function Ue(e){e=e.slice();const t=Object.create(null);for(let n=0;n<e.length;n++)t[e[n].id]=e[n];for(let n=0;n<e.length;n++)"ref"in e[n]&&(e[n]=Fe(e[n],t[e[n].ref]));return e}Re.workerCount=2;const He={setStyle:"setStyle",addLayer:"addLayer",removeLayer:"removeLayer",setPaintProperty:"setPaintProperty",setLayoutProperty:"setLayoutProperty",setFilter:"setFilter",addSource:"addSource",removeSource:"removeSource",setGeoJSONSourceData:"setGeoJSONSourceData",setLayerZoomRange:"setLayerZoomRange",setLayerProperty:"setLayerProperty",setCenter:"setCenter",setZoom:"setZoom",setBearing:"setBearing",setPitch:"setPitch",setSprite:"setSprite",setGlyphs:"setGlyphs",setTransition:"setTransition",setLight:"setLight",setTerrain:"setTerrain",setFog:"setFog",setProjection:"setProjection"};function We(e,t,n){n.push({command:He.addSource,args:[e,t[e]]})}function qe(e,t,n){t.push({command:He.removeSource,args:[e]}),n[e]=!0}function Ve(e,t,n,i){qe(e,n,i),We(e,t,n)}function Ge(e,n,i){let a;for(a in e[i])if(e[i].hasOwnProperty(a)&&"data"!==a&&!t(e[i][a],n[i][a]))return!1;for(a in n[i])if(n[i].hasOwnProperty(a)&&"data"!==a&&!t(e[i][a],n[i][a]))return!1;return!0}function Ye(e,n,i,a,o,r){let s;for(s in n=n||{},e=e||{})e.hasOwnProperty(s)&&(t(e[s],n[s])||i.push({command:r,args:[a,s,n[s],o]}));for(s in n)n.hasOwnProperty(s)&&!e.hasOwnProperty(s)&&(t(e[s],n[s])||i.push({command:r,args:[a,s,n[s],o]}))}function Xe(e){return e.id}function Ze(e,t){return e[t.id]=t,e}class Je{constructor(e,t){this.reset(e,t)}reset(e,t){this.points=e||[],this._distances=[0];for(let e=1;e<this.points.length;e++)this._distances[e]=this._distances[e-1]+this.points[e].dist(this.points[e-1]);this.length=this._distances[this._distances.length-1],this.padding=Math.min(t||0,.5*this.length),this.paddedLength=this.length-2*this.padding}lerp(t){if(1===this.points.length)return this.points[0];t=e.clamp(t,0,1);let n=1,i=this._distances[n];const a=t*this.paddedLength+this.padding;for(;i<a&&n<this._distances.length;)i=this._distances[++n];const o=n-1,r=this._distances[o],s=i-r,l=s>0?(a-r)/s:0;return this.points[o].mult(1-l).add(this.points[n].mult(l))}}class Ke{constructor(e,t,n){const i=this.boxCells=[],a=this.circleCells=[];this.xCellCount=Math.ceil(e/n),this.yCellCount=Math.ceil(t/n);for(let e=0;e<this.xCellCount*this.yCellCount;e++)i.push([]),a.push([]);this.circleKeys=[],this.boxKeys=[],this.bboxes=[],this.circles=[],this.width=e,this.height=t,this.xScale=this.xCellCount/e,this.yScale=this.yCellCount/t,this.boxUid=0,this.circleUid=0}keysLength(){return this.boxKeys.length+this.circleKeys.length}insert(e,t,n,i,a){this._forEachCell(t,n,i,a,this._insertBoxCell,this.boxUid++),this.boxKeys.push(e),this.bboxes.push(t),this.bboxes.push(n),this.bboxes.push(i),this.bboxes.push(a)}insertCircle(e,t,n,i){this._forEachCell(t-i,n-i,t+i,n+i,this._insertCircleCell,this.circleUid++),this.circleKeys.push(e),this.circles.push(t),this.circles.push(n),this.circles.push(i)}_insertBoxCell(e,t,n,i,a,o){this.boxCells[a].push(o)}_insertCircleCell(e,t,n,i,a,o){this.circleCells[a].push(o)}_query(e,t,n,i,a,o){if(n<0||e>this.width||i<0||t>this.height)return!a&&[];const r=[];if(e<=0&&t<=0&&this.width<=n&&this.height<=i){if(a)return!0;for(let e=0;e<this.boxKeys.length;e++)r.push({key:this.boxKeys[e],x1:this.bboxes[4*e],y1:this.bboxes[4*e+1],x2:this.bboxes[4*e+2],y2:this.bboxes[4*e+3]});for(let e=0;e<this.circleKeys.length;e++){const t=this.circles[3*e],n=this.circles[3*e+1],i=this.circles[3*e+2];r.push({key:this.circleKeys[e],x1:t-i,y1:n-i,x2:t+i,y2:n+i})}return o?r.filter(o):r}return this._forEachCell(e,t,n,i,this._queryCell,r,{hitTest:a,seenUids:{box:{},circle:{}}},o),a?r.length>0:r}_queryCircle(e,t,n,i,a){const o=e-n,r=e+n,s=t-n,l=t+n;if(r<0||o>this.width||l<0||s>this.height)return!i&&[];const c=[];return this._forEachCell(o,s,r,l,this._queryCellCircle,c,{hitTest:i,circle:{x:e,y:t,radius:n},seenUids:{box:{},circle:{}}},a),i?c.length>0:c}query(e,t,n,i,a){return this._query(e,t,n,i,!1,a)}hitTest(e,t,n,i,a){return this._query(e,t,n,i,!0,a)}hitTestCircle(e,t,n,i){return this._queryCircle(e,t,n,!0,i)}_queryCell(e,t,n,i,a,o,r,s){const l=r.seenUids,c=this.boxCells[a];if(null!==c){const a=this.bboxes;for(const u of c)if(!l.box[u]){l.box[u]=!0;const c=4*u;if(e<=a[c+2]&&t<=a[c+3]&&n>=a[c+0]&&i>=a[c+1]&&(!s||s(this.boxKeys[u]))){if(r.hitTest)return o.push(!0),!0;o.push({key:this.boxKeys[u],x1:a[c],y1:a[c+1],x2:a[c+2],y2:a[c+3]})}}}const u=this.circleCells[a];if(null!==u){const a=this.circles;for(const c of u)if(!l.circle[c]){l.circle[c]=!0;const u=3*c;if(this._circleAndRectCollide(a[u],a[u+1],a[u+2],e,t,n,i)&&(!s||s(this.circleKeys[c]))){if(r.hitTest)return o.push(!0),!0;{const e=a[u],t=a[u+1],n=a[u+2];o.push({key:this.circleKeys[c],x1:e-n,y1:t-n,x2:e+n,y2:t+n})}}}}}_queryCellCircle(e,t,n,i,a,o,r,s){const l=r.circle,c=r.seenUids,u=this.boxCells[a];if(null!==u){const e=this.bboxes;for(const t of u)if(!c.box[t]){c.box[t]=!0;const n=4*t;if(this._circleAndRectCollide(l.x,l.y,l.radius,e[n+0],e[n+1],e[n+2],e[n+3])&&(!s||s(this.boxKeys[t])))return o.push(!0),!0}}const d=this.circleCells[a];if(null!==d){const e=this.circles;for(const t of d)if(!c.circle[t]){c.circle[t]=!0;const n=3*t;if(this._circlesCollide(e[n],e[n+1],e[n+2],l.x,l.y,l.radius)&&(!s||s(this.circleKeys[t])))return o.push(!0),!0}}}_forEachCell(e,t,n,i,a,o,r,s){const l=this._convertToXCellCoord(e),c=this._convertToYCellCoord(t),u=this._convertToXCellCoord(n),d=this._convertToYCellCoord(i);for(let p=l;p<=u;p++)for(let l=c;l<=d;l++)if(a.call(this,e,t,n,i,this.xCellCount*l+p,o,r,s))return}_convertToXCellCoord(e){return Math.max(0,Math.min(this.xCellCount-1,Math.floor(e*this.xScale)))}_convertToYCellCoord(e){return Math.max(0,Math.min(this.yCellCount-1,Math.floor(e*this.yScale)))}_circlesCollide(e,t,n,i,a,o){const r=i-e,s=a-t,l=n+o;return l*l>r*r+s*s}_circleAndRectCollide(e,t,n,i,a,o,r){const s=(o-i)/2,l=Math.abs(e-(i+s));if(l>s+n)return!1;const c=(r-a)/2,u=Math.abs(t-(a+c));if(u>c+n)return!1;if(l<=s||u<=c)return!0;const d=l-s,p=u-c;return d*d+p*p<=n*n}}const $e=0,Qe=1,et=2,tt=Math.tan(85*Math.PI/180);function nt(t,n,i,a,o,r,s){const l=e.create();if(i)if("globe"===r.name){const t=e.calculateGlobeLabelMatrix(o,n);e.multiply(l,l,t)}else{const t=v([],s);l[0]=t[0],l[1]=t[1],l[4]=t[2],l[5]=t[3],a||e.rotateZ(l,l,o.angle)}else e.multiply(l,o.labelPlaneMatrix,t);return l}function it(e,t,n,i,a,o,r){const s=nt(e,t,n,i,a,o,r);return"globe"===o.name&&n||(s[2]=s[6]=s[10]=s[14]=0),s}function at(t,n,i,a,o,r,s){if(i){if("globe"===r.name){const l=nt(t,n,i,a,o,r,s);return e.invert(l,l),e.multiply(l,t,l),l}{const n=e.clone(t),i=e.identity([]);return i[0]=s[0],i[1]=s[1],i[4]=s[2],i[5]=s[3],e.multiply(n,n,i),a||e.rotateZ(n,n,-o.angle),n}}return o.glCoordMatrix}function ot(t,n,i,a){const o=[t,n,i,1];i?e.transformMat4$1(o,o,a):gt(o,o,a);const r=o[3];return o[0]/=r,o[1]/=r,o[2]/=r,o}function rt(e,t){return Math.min(.5+e/t*.5,1.5)}function st(e,t){const n=e[0]/e[3],i=e[1]/e[3];return n>=-t[0]&&n<=t[0]&&i>=-t[1]&&i<=t[1]}function lt(t,n,i,a,o,r,s,l,c,u){const d=i.transform,p=a?t.textSizeData:t.iconSizeData,f=e.evaluateSizeForZoom(p,i.transform.zoom),m="globe"===d.projection.name,h=[256/i.width*2+1,256/i.height*2+1],g=a?t.text.dynamicLayoutVertexArray:t.icon.dynamicLayoutVertexArray;g.clear();let y=null;m&&(y=a?t.text.globeExtVertexArray:t.icon.globeExtVertexArray);const v=t.lineVertexArray,b=a?t.text.placedSymbolArray:t.icon.placedSymbolArray,_=i.transform.width/i.transform.height;let w,x=!1;for(let a=0;a<b.length;a++){const m=b.get(a),{numGlyphs:k,writingMode:O}=m;if(O!==e.WritingMode.vertical||x||w===e.WritingMode.horizontal||(x=!0),w=O,(m.hidden||O===e.WritingMode.vertical)&&!x){ht(k,g);continue}x=!1;const T=new e.Point(m.tileAnchorX,m.tileAnchorY);let{x:C,y:E,z:S}=d.projection.projectTilePoint(T.x,T.y,u.canonical);if(c){const[e,t,n]=c(T);C+=e,E+=t,S+=n}const P=[C,E,S,1];if(e.transformMat4$1(P,P,n),!st(P,h)){ht(k,g);continue}const I=rt(i.transform.cameraToCenterDistance,P[3]),M=e.evaluateSizeForFeature(p,f,m),A=s?M/I:M*I,j=ot(C,E,S,o);if(j[3]<=0){ht(k,g);continue}let N={};const L=s?null:c,D=dt(m,A,!1,l,n,o,r,t.glyphOffsetArray,v,g,y,j,T,N,_,L,d.projection,u,s);x=D.useVertical,L&&D.needsFlipping&&(N={}),(D.notEnoughRoom||x||D.needsFlipping&&dt(m,A,!0,l,n,o,r,t.glyphOffsetArray,v,g,y,j,T,N,_,L,d.projection,u,s).notEnoughRoom)&&ht(k,g)}a?(t.text.dynamicLayoutVertexBuffer.updateData(g),y&&t.text.globeExtVertexBuffer.updateData(y)):(t.icon.dynamicLayoutVertexBuffer.updateData(g),y&&t.icon.globeExtVertexBuffer.updateData(y))}function ct(e,t,n,i,a,o,r,s,l,c,u,d,p,f,m,h){const{lineStartIndex:g,glyphStartIndex:y,segment:v}=s,b=y+s.numGlyphs,_=g+s.lineLength,w=t.getoffsetX(y),x=t.getoffsetX(b-1),k=mt(e*w,n,i,a,o,r,v,g,_,l,c,u,d,p,!0,f,m,h);if(!k)return null;const O=mt(e*x,n,i,a,o,r,v,g,_,l,c,u,d,p,!0,f,m,h);return O?{first:k,last:O}:null}function ut(t,n,i,a){return t===e.WritingMode.horizontal&&Math.abs(a)>Math.abs(i)?{useVertical:!0}:t===e.WritingMode.vertical?a>0?{needsFlipping:!0}:null:n!==$e&&function(e,t){return 0===e||Math.abs(t/e)>tt}(i,a)?n===Qe?{needsFlipping:!0}:null:i<0?{needsFlipping:!0}:null}function dt(t,n,i,a,o,r,s,l,c,u,d,p,f,m,h,g,y,v,b){const _=n/24,w=t.lineOffsetX*_,x=t.lineOffsetY*_,{lineStartIndex:k,glyphStartIndex:O,numGlyphs:T,segment:C,writingMode:E,flipState:S}=t,P=k+t.lineLength,I=t=>{if(d){const[n,i,a]=t.up,o=u.length;e.updateGlobeVertexNormal(d,o+0,n,i,a),e.updateGlobeVertexNormal(d,o+1,n,i,a),e.updateGlobeVertexNormal(d,o+2,n,i,a),e.updateGlobeVertexNormal(d,o+3,n,i,a)}const[n,i,a]=t.point;e.addDynamicAttributes(u,n,i,a,t.angle)};if(T>1){const e=ct(_,l,w,x,i,p,f,t,c,r,m,g,!1,y,v,b);if(!e)return{notEnoughRoom:!0};if(a&&!i){let[n,i,a]=e.first.point,[o,r,l]=e.last.point;[n,i]=ot(n,i,a,s),[o,r]=ot(o,r,l,s);const c=ut(E,S,(o-n)*h,r-i);if(t.flipState=c&&c.needsFlipping?Qe:et,c)return c}I(e.first);for(let e=O+1;e<O+T-1;e++){const t=mt(_*l.getoffsetX(e),w,x,i,p,f,C,k,P,c,r,m,g,!1,!1,y,v,b);if(!t)return u.length-=4*(e-O),{notEnoughRoom:!0};I(t)}I(e.last)}else{if(a&&!i){const n=ot(f.x,f.y,0,o),i=k+C+1,a=new e.Point(c.getx(i),c.gety(i)),r=ot(a.x,a.y,0,o),s=r[3]>0?r:ft(f,a,n,1,o,void 0,y,v.canonical),l=ut(E,S,(s[0]-n[0])*h,s[1]-n[1]);if(t.flipState=l&&l.needsFlipping?Qe:et,l)return l}const n=mt(_*l.getoffsetX(O),w,x,i,p,f,C,k,P,c,r,m,g,!1,!1,y,v,b);if(!n)return{notEnoughRoom:!0};I(n)}return{}}function pt(e,t,n,i,a){const{x:o,y:r,z:s}=i.projectTilePoint(e.x,e.y,t);if(!a)return ot(o,r,s,n);const[l,c,u]=a(e);return ot(o+l,r+c,s+u,n)}function ft(t,n,i,a,o,r,s,l){const c=pt(t.sub(n)._unit()._add(t),l,o,s,r);return e.sub(c,i,c),e.normalize(c,c),e.scaleAndAdd(c,i,c,a)}function mt(t,n,i,a,o,r,s,l,c,u,d,p,f,m,h,g,y,v){const b=a?t-n:t+n;let _=b>0?1:-1,w=0;a&&(_*=-1,w=Math.PI),_<0&&(w+=Math.PI);let x=l+s+(_>0?0:1)|0,k=o,O=o,T=0,C=0;const E=Math.abs(b),S=[],P=[];let I=r,M=I;const A=()=>ft(M,I,O,E-T+1,d,f,g,y.canonical);for(;T+C<=E;){if(x+=_,x<l||x>=c)return null;if(O=k,M=I,S.push(O),m&&P.push(M),I=new e.Point(u.getx(x),u.gety(x)),k=p[x],!k){const e=pt(I,y.canonical,d,g,f);k=e[3]>0?p[x]=e:A()}T+=C,C=e.distance(O,k)}h&&f&&(p[x]&&(k=A(),C=e.distance(O,k)),p[x]=k);const j=(E-T)/C,N=I.sub(M)._mult(j)._add(M),L=e.sub([],k,O),D=e.scaleAndAdd([],O,L,j);let R=[0,0,1],B=L[0],z=L[1];if(v&&(R=g.upVector(y.canonical,N.x,N.y),0!==R[0]||0!==R[1]||1!==R[2])){const t=[R[2],0,-R[0]],n=e.cross([],R,t);e.normalize(t,t),e.normalize(n,n),B=e.dot(L,t),z=e.dot(L,n)}if(i){const t=e.cross([],R,L);e.normalize(t,t),e.scaleAndAdd(D,D,t,i*_)}const F=w+Math.atan2(z,B);return S.push(D),m&&P.push(N),{point:D,angle:F,path:S,tilePath:P,up:R}}function ht(e,t){const n=t.length,i=n+4*e;t.resize(i),t.float32.fill(-1/0,4*n,4*i)}function gt(e,t,n){const i=t[0],a=t[1];return e[0]=n[0]*i+n[4]*a+n[12],e[1]=n[1]*i+n[5]*a+n[13],e[3]=n[3]*i+n[7]*a+n[15],e}const yt=100;class vt{constructor(e,t,n=new Ke(e.width+200,e.height+200,25),i=new Ke(e.width+200,e.height+200,25)){this.transform=e,this.grid=n,this.ignoredGrid=i,this.pitchfactor=Math.cos(e._pitch)*e.cameraToCenterDistance,this.screenRightBoundary=e.width+yt,this.screenBottomBoundary=e.height+yt,this.gridRightBoundary=e.width+200,this.gridBottomBoundary=e.height+200,this.fogState=t}placeCollisionBox(e,t,n,i,a,o,r,s){let l=n.projectedAnchorX,c=n.projectedAnchorY,u=n.projectedAnchorZ;const d=n.elevation,p=n.tileID,f=e.getProjection();if(d&&p){const[e,t,i]=f.upVector(p.canonical,n.tileAnchorX,n.tileAnchorY),a=f.upVectorScale(p.canonical,this.transform.center.lat,this.transform.worldSize).metersToTile;l+=e*d*a,c+=t*d*a,u+=i*d*a}const m=this.projectAndGetPerspectiveRatio(r,l,c,u,n.tileID,"globe"===f.name||!!d||this.transform.pitch>0,f),h=o*m.perspectiveRatio,g=(n.x1*t+i.x-n.padding)*h+m.point.x,y=(n.y1*t+i.y-n.padding)*h+m.point.y,v=(n.x2*t+i.x+n.padding)*h+m.point.x,b=(n.y2*t+i.y+n.padding)*h+m.point.y,_=m.perspectiveRatio<=.55||m.occluded;return!this.isInsideGrid(g,y,v,b)||!a&&this.grid.hitTest(g,y,v,b,s)||_?{box:[],offscreen:!1,occluded:m.occluded}:{box:[g,y,v,b],offscreen:this.isOffscreen(g,y,v,b),occluded:!1}}placeCollisionCircles(t,n,i,a,o,r,s,l,c,u,d,p,f,m,h){const g=[],y=this.transform.elevation,v=t.getProjection(),b=y?y.getAtTileOffsetFunc(h,this.transform.center.lat,this.transform.worldSize,v):null,_=new e.Point(i.tileAnchorX,i.tileAnchorY);let{x:w,y:x,z:k}=v.projectTilePoint(_.x,_.y,h.canonical);if(b){const[e,t,n]=b(_);w+=e,x+=t,k+=n}const O="globe"===v.name,T=this.projectAndGetPerspectiveRatio(s,w,x,k,h,O||!!y||this.transform.pitch>0,v),{perspectiveRatio:C}=T,E=(d?r/C:r*C)/e.ONE_EM,S=ot(w,x,k,l),P=T.signedDistanceFromCamera>0?ct(E,o,i.lineOffsetX*E,i.lineOffsetY*E,!1,S,_,i,a,l,{},y&&!d?b:null,d&&!!y,v,h,d):null;let I=!1,M=!1,A=!0;if(P&&!T.occluded){const t=.5*f*C+m,i=new e.Point(-100,-100),a=new e.Point(this.screenRightBoundary,this.screenBottomBoundary),o=new Je,{first:r,last:s}=P,l=r.path.length;let d=[];for(let e=l-1;e>=1;e--)d.push(r.path[e]);for(let e=1;e<s.path.length;e++)d.push(s.path[e]);const h=2.5*t;c&&(d=d.map(([e,t,n],i)=>(b&&!O&&(n=b(i<l-1?r.tilePath[l-1-i]:s.tilePath[i-l+2])[2]),ot(e,t,n,c))),d.some(e=>e[3]<=0)&&(d=[]));let y=[];if(d.length>0){let t=1/0,n=-1/0,o=1/0,r=-1/0;for(const e of d)t=Math.min(t,e[0]),o=Math.min(o,e[1]),n=Math.max(n,e[0]),r=Math.max(r,e[1]);n>=i.x&&t<=a.x&&r>=i.y&&o<=a.y&&(y=[d.map(t=>new e.Point(t[0],t[1]))],(t<i.x||n>a.x||o<i.y||r>a.y)&&(y=e.clipLine(y,i.x,i.y,a.x,a.y)))}for(const e of y){o.reset(e,.25*t);let i=0;i=o.length<=.5*t?1:Math.ceil(o.paddedLength/h)+1;for(let e=0;e<i;e++){const a=e/Math.max(i-1,1),r=o.lerp(a),s=r.x+yt,l=r.y+yt;g.push(s,l,t,0);const c=s-t,d=l-t,f=s+t,m=l+t;if(A=A&&this.isOffscreen(c,d,f,m),M=M||this.isInsideGrid(c,d,f,m),!n&&this.grid.hitTestCircle(s,l,t,p)&&(I=!0,!u))return{circles:[],offscreen:!1,collisionDetected:I,occluded:!1}}}}return{circles:!u&&I||!M?[]:g,offscreen:A,collisionDetected:I,occluded:T.occluded}}queryRenderedSymbols(t){if(0===t.length||0===this.grid.keysLength()&&0===this.ignoredGrid.keysLength())return{};const n=[];let i=1/0,a=1/0,o=-1/0,r=-1/0;for(const s of t){const t=new e.Point(s.x+yt,s.y+yt);i=Math.min(i,t.x),a=Math.min(a,t.y),o=Math.max(o,t.x),r=Math.max(r,t.y),n.push(t)}const s=this.grid.query(i,a,o,r).concat(this.ignoredGrid.query(i,a,o,r)),l={},c={};for(const t of s){const i=t.key;if(void 0===l[i.bucketInstanceId]&&(l[i.bucketInstanceId]={}),l[i.bucketInstanceId][i.featureIndex])continue;const a=[new e.Point(t.x1,t.y1),new e.Point(t.x2,t.y1),new e.Point(t.x2,t.y2),new e.Point(t.x1,t.y2)];e.polygonIntersectsPolygon(n,a)&&(l[i.bucketInstanceId][i.featureIndex]=!0,void 0===c[i.bucketInstanceId]&&(c[i.bucketInstanceId]=[]),c[i.bucketInstanceId].push(i.featureIndex))}return c}insertCollisionBox(e,t,n,i,a){(t?this.ignoredGrid:this.grid).insert({bucketInstanceId:n,featureIndex:i,collisionGroupID:a},e[0],e[1],e[2],e[3])}insertCollisionCircles(e,t,n,i,a){const o=t?this.ignoredGrid:this.grid,r={bucketInstanceId:n,featureIndex:i,collisionGroupID:a};for(let t=0;t<e.length;t+=4)o.insertCircle(r,e[t],e[t+1],e[t+2])}projectAndGetPerspectiveRatio(t,n,i,a,o,r,s){const l=[n,i,a,1];let c=!1;a||this.transform.pitch>0?(e.transformMat4$1(l,l,t),this.fogState&&o&&"globe"!==s.name&&(c=function(t,n,i,a,o,r){const s=r.calculateFogTileMatrix(o),l=[n,i,a];return e.transformMat4(l,l,s),T(t,l,r.pitch,r._fov)}(this.fogState,n,i,a,o.toUnwrapped(),this.transform)>.9)):gt(l,l,t);const u=l[3];return{point:new e.Point((l[0]/u+1)/2*this.transform.width+yt,(-l[1]/u+1)/2*this.transform.height+yt),perspectiveRatio:Math.min(.5+this.transform.getCameraToCenterDistance(s)/u*.5,1.5),signedDistanceFromCamera:u,occluded:r&&l[2]>u||c}}isOffscreen(e,t,n,i){return n<yt||e>=this.screenRightBoundary||i<yt||t>this.screenBottomBoundary}isInsideGrid(e,t,n,i){return n>=0&&e<this.gridRightBoundary&&i>=0&&t<this.gridBottomBoundary}getViewportMatrix(){const t=e.identity([]);return e.translate(t,t,[-100,-100,0]),t}}function bt(t,n,i){const a=n.createTileMatrix(t,t.worldSize,i.toUnwrapped());return e.multiply(new Float32Array(16),t.projMatrix,a)}function _t(e,t,n){if(t.projection.name===n.projection.name)return e.projMatrix;const i=n.clone();return i.setProjection(t.projection),bt(i,t.getProjection(),e)}function wt(e,t,n){return t.name===n.projection.name?e.projMatrix:bt(n,t,e)}class xt{constructor(e,t,n,i){this.opacity=e?Math.max(0,Math.min(1,e.opacity+(e.placed?t:-t))):i&&n?1:0,this.placed=n}isHidden(){return 0===this.opacity&&!this.placed}}class kt{constructor(e,t,n,i,a,o=!1){this.text=new xt(e?e.text:null,t,n,a),this.icon=new xt(e?e.icon:null,t,i,a),this.clipped=o}isHidden(){return this.text.isHidden()&&this.icon.isHidden()}}class Ot{constructor(e,t,n,i=!1){this.text=e,this.icon=t,this.skipFade=n,this.clipped=i}}class Tt{constructor(){this.invProjMatrix=e.create(),this.viewportMatrix=e.create(),this.circles=[]}}class Ct{constructor(e,t,n,i,a){this.bucketInstanceId=e,this.featureIndex=t,this.sourceLayerIndex=n,this.bucketIndex=i,this.tileID=a}}class Et{constructor(e){this.crossSourceCollisions=e,this.maxGroupID=0,this.collisionGroups={}}get(e){if(this.crossSourceCollisions)return{ID:0,predicate:null};if(!this.collisionGroups[e]){const t=++this.maxGroupID;this.collisionGroups[e]={ID:t,predicate:e=>e.collisionGroupID===t}}return this.collisionGroups[e]}}function St(t,n,i,a,o){const{horizontalAlign:r,verticalAlign:s}=e.getAnchorAlignment(t),l=-(r-.5)*n,c=-(s-.5)*i,u=e.evaluateVariableOffset(t,a);return new e.Point(l+u[0]*o,c+u[1]*o)}function Pt(t,n,i,a,o){const r=new e.Point(t,n);return i&&r._rotate(a?o:-o),r}class It{constructor(e,t,n,i,a){this.transform=e.clone(),this.projection=e.projection.name,this.collisionIndex=new vt(this.transform,a),this.placements={},this.opacities={},this.variableOffsets={},this.stale=!1,this.commitTime=0,this.fadeDuration=t,this.retainedQueryData={},this.collisionGroups=new Et(n),this.collisionCircleArrays={},this.prevPlacement=i,i&&(i.prevPlacement=void 0),this.placedOrientations={}}getBucketParts(t,n,i,a){const o=i.getBucket(n),r=i.latestFeatureIndex;if(!o||!r||n.id!==o.layerIds[0])return;const s=o.layers[0].layout,l=i.collisionBoxArray,c=Math.pow(2,this.transform.zoom-i.tileID.overscaledZ),u=i.tileSize/e.EXTENT,d=i.tileID.toUnwrapped();this.transform.setProjection(o.projection);const p=(f=i.tileID,m=o.getProjection(),h=this.transform,m.name===this.projection?h.calculateProjMatrix(f.toUnwrapped()):bt(h,m,f));var f,m,h;const g="map"===s.get("text-pitch-alignment"),y="map"===s.get("text-rotation-alignment");n.compileFilter();const v=n.dynamicFilter(),b=n.dynamicFilterNeedsFeature(),_=this.transform.calculatePixelsToTileUnitsMatrix(i),w=it(p,i.tileID.canonical,g,y,this.transform,o.getProjection(),_);let x=null;if(g){const t=at(p,i.tileID.canonical,g,y,this.transform,o.getProjection(),_);x=e.multiply([],this.transform.labelPlaneMatrix,t)}let k=null;v&&i.latestFeatureIndex&&(k={unwrappedTileID:d,dynamicFilter:v,dynamicFilterNeedsFeature:b,featureIndex:i.latestFeatureIndex}),this.retainedQueryData[o.bucketInstanceId]=new Ct(o.bucketInstanceId,r,o.sourceLayerIndex,o.index,i.tileID);const O={bucket:o,layout:s,posMatrix:p,textLabelPlaneMatrix:w,labelToScreenMatrix:x,clippingData:k,scale:c,textPixelRatio:u,holdingForFade:i.holdingForFade(),collisionBoxArray:l,partiallyEvaluatedTextSize:e.evaluateSizeForZoom(o.textSizeData,this.transform.zoom),partiallyEvaluatedIconSize:e.evaluateSizeForZoom(o.iconSizeData,this.transform.zoom),collisionGroup:this.collisionGroups.get(o.sourceID)};if(a)for(const e of o.sortKeyRanges){const{sortKey:n,symbolInstanceStart:i,symbolInstanceEnd:a}=e;t.push({sortKey:n,symbolInstanceStart:i,symbolInstanceEnd:a,parameters:O})}else t.push({symbolInstanceStart:0,symbolInstanceEnd:o.symbolInstances.length,parameters:O})}attemptAnchorPlacement(e,t,n,i,a,o,r,s,l,c,u,d,p,f,m,h,g,y){const{textOffset0:v,textOffset1:b,crossTileID:_}=d,w=[v,b],x=St(e,n,i,w,a),k=this.collisionIndex.placeCollisionBox(f,a,t,Pt(x.x,x.y,o,r,this.transform.angle),u,s,l,c.predicate);if(h){const e=f.getSymbolInstanceIconSize(y,this.transform.zoom,d.placedIconSymbolIndex);if(0===this.collisionIndex.placeCollisionBox(f,e,h,Pt(x.x,x.y,o,r,this.transform.angle),u,s,l,c.predicate).box.length)return}if(k.box.length>0){let t;return this.prevPlacement&&this.prevPlacement.variableOffsets[_]&&this.prevPlacement.placements[_]&&this.prevPlacement.placements[_].text&&(t=this.prevPlacement.variableOffsets[_].anchor),this.variableOffsets[_]={textOffset:w,width:n,height:i,anchor:e,textScale:a,prevAnchor:t},this.markUsedJustification(f,e,d,m),f.allowVerticalPlacement&&(this.markUsedOrientation(f,m,d),this.placedOrientations[_]=m),{shift:x,placedGlyphBoxes:k}}}placeLayerBucketPart(t,n,i,a){const{bucket:o,layout:r,posMatrix:s,textLabelPlaneMatrix:l,labelToScreenMatrix:c,clippingData:u,textPixelRatio:d,holdingForFade:p,collisionBoxArray:f,partiallyEvaluatedTextSize:m,partiallyEvaluatedIconSize:h,collisionGroup:g}=t.parameters,y=r.get("text-optional"),v=r.get("icon-optional"),b=r.get("text-allow-overlap"),_=r.get("icon-allow-overlap"),w="map"===r.get("text-rotation-alignment"),x="map"===r.get("text-pitch-alignment"),k="none"!==r.get("icon-text-fit"),O="viewport-y"===r.get("symbol-z-order");this.transform.setProjection(o.projection);let T=b&&(_||!o.hasIconData()||v),C=_&&(b||!o.hasTextData()||y);!o.collisionArrays&&f&&o.deserializeCollisionBoxes(f),i&&a&&o.updateCollisionDebugBuffers(this.transform.zoom,f);const E=(t,a,f)=>{const{crossTileID:O,numVerticalGlyphVertices:E}=t;if(u){const i={zoom:this.transform.zoom,pitch:this.transform.pitch};let a=null;if(u.dynamicFilterNeedsFeature){const e=this.retainedQueryData[o.bucketInstanceId];a=u.featureIndex.loadFeature({featureIndex:t.featureIndex,bucketIndex:e.bucketIndex,sourceLayerIndex:e.sourceLayerIndex,layoutVertexArrayOffset:0})}if(!(0,u.dynamicFilter)(i,a,this.retainedQueryData[o.bucketInstanceId].tileID.canonical,new e.Point(t.tileAnchorX,t.tileAnchorY),this.transform.calculateDistanceTileData(u.unwrappedTileID)))return this.placements[O]=new Ot(!1,!1,!1,!0),void n.add(O)}if(n.has(O))return;if(p)return void(this.placements[O]=new Ot(!1,!1,!1));let S=!1,P=!1,I=!0,M=!1,A=!1,j=null,N={box:null,offscreen:null,occluded:null},L={box:null,offscreen:null,occluded:null},D=null,R=null,B=null,z=0,F=0,U=0;f.textFeatureIndex?z=f.textFeatureIndex:t.useRuntimeCollisionCircles&&(z=t.featureIndex),f.verticalTextFeatureIndex&&(F=f.verticalTextFeatureIndex);const H=e=>{e.tileID=this.retainedQueryData[o.bucketInstanceId].tileID;const t=this.transform.elevation;(t||e.elevation)&&(e.elevation=t?t.getAtTileOffset(e.tileID,e.tileAnchorX,e.tileAnchorY):0)},W=f.textBox;if(W){H(W);const n=n=>{let i=e.WritingMode.horizontal;if(o.allowVerticalPlacement&&!n&&this.prevPlacement){const e=this.prevPlacement.placedOrientations[O];e&&(this.placedOrientations[O]=e,i=e,this.markUsedOrientation(o,i,t))}return i},i=(t,n)=>{if(o.allowVerticalPlacement&&E>0&&f.verticalTextBox){for(const i of o.writingModes)if(i===e.WritingMode.vertical?(N=n(),L=N):N=t(),N&&N.box&&N.box.length)break}else N=t()};if(r.get("text-variable-anchor")){let l=r.get("text-variable-anchor");if(this.prevPlacement&&this.prevPlacement.variableOffsets[O]){const e=this.prevPlacement.variableOffsets[O];l.indexOf(e.anchor)>0&&(l=l.filter(t=>t!==e.anchor),l.unshift(e.anchor))}const c=(e,n,i)=>{const r=o.getSymbolInstanceTextSize(m,t,this.transform.zoom,a),c=(e.x2-e.x1)*r+2*e.padding,u=(e.y2-e.y1)*r+2*e.padding,p=k&&!_?n:null;p&&H(p);let f={box:[],offscreen:!1,occluded:!1};const y=b?2*l.length:l.length;for(let n=0;n<y;++n){const y=this.attemptAnchorPlacement(l[n%l.length],e,c,u,r,w,x,d,s,g,n>=l.length,t,a,o,i,p,m,h);if(y&&(f=y.placedGlyphBoxes,f&&f.box&&f.box.length)){S=!0,j=y.shift;break}}return f};i(()=>c(W,f.iconBox,e.WritingMode.horizontal),()=>{const t=f.verticalTextBox;return t&&H(t),o.allowVerticalPlacement&&!(N&&N.box&&N.box.length)&&E>0&&t?c(t,f.verticalIconBox,e.WritingMode.vertical):{box:null,offscreen:null,occluded:null}}),N&&(S=N.box,I=N.offscreen,M=N.occluded);const u=n(!(!N||!N.box));if(!S&&this.prevPlacement){const e=this.prevPlacement.variableOffsets[O];e&&(this.variableOffsets[O]=e,this.markUsedJustification(o,e.anchor,t,u))}}else{const r=(n,i)=>{const r=o.getSymbolInstanceTextSize(m,t,this.transform.zoom,a),l=this.collisionIndex.placeCollisionBox(o,r,n,new e.Point(0,0),b,d,s,g.predicate);return l&&l.box&&l.box.length&&(this.markUsedOrientation(o,i,t),this.placedOrientations[O]=i),l};i(()=>r(W,e.WritingMode.horizontal),()=>{const t=f.verticalTextBox;return o.allowVerticalPlacement&&E>0&&t?(H(t),r(t,e.WritingMode.vertical)):{box:null,offscreen:null,occluded:null}}),n(!!(N&&N.box&&N.box.length))}}if(D=N,S=D&&D.box&&D.box.length>0,I=D&&D.offscreen,M=D&&D.occluded,t.useRuntimeCollisionCircles){const n=o.text.placedSymbolArray.get(t.centerJustifiedTextSymbolIndex>=0?t.centerJustifiedTextSymbolIndex:t.verticalPlacedTextSymbolIndex),a=e.evaluateSizeForFeature(o.textSizeData,m,n),u=r.get("text-padding");R=this.collisionIndex.placeCollisionCircles(o,b,n,o.lineVertexArray,o.glyphOffsetArray,a,s,l,c,i,x,g.predicate,t.collisionCircleDiameter*a/e.ONE_EM,u,this.retainedQueryData[o.bucketInstanceId].tileID),S=b||R.circles.length>0&&!R.collisionDetected,I=I&&R.offscreen,M=R.occluded}if(f.iconFeatureIndex&&(U=f.iconFeatureIndex),f.iconBox){const n=n=>{H(n);const i=k&&j?Pt(j.x,j.y,w,x,this.transform.angle):new e.Point(0,0),a=o.getSymbolInstanceIconSize(h,this.transform.zoom,t.placedIconSymbolIndex);return this.collisionIndex.placeCollisionBox(o,a,n,i,_,d,s,g.predicate)};L&&L.box&&L.box.length&&f.verticalIconBox?(B=n(f.verticalIconBox),P=B.box.length>0):(B=n(f.iconBox),P=B.box.length>0),I=I&&B.offscreen,A=B.occluded}const q=y||0===t.numHorizontalGlyphVertices&&0===E,V=v||0===t.numIconVertices;if(q||V?V?q||(P=P&&S):S=P&&S:P=S=P&&S,S&&D&&D.box&&this.collisionIndex.insertCollisionBox(D.box,r.get("text-ignore-placement"),o.bucketInstanceId,L&&L.box&&F?F:z,g.ID),P&&B&&this.collisionIndex.insertCollisionBox(B.box,r.get("icon-ignore-placement"),o.bucketInstanceId,U,g.ID),R&&(S&&this.collisionIndex.insertCollisionCircles(R.circles,r.get("text-ignore-placement"),o.bucketInstanceId,z,g.ID),i)){const e=o.bucketInstanceId;let t=this.collisionCircleArrays[e];void 0===t&&(t=this.collisionCircleArrays[e]=new Tt);for(let e=0;e<R.circles.length;e+=4)t.circles.push(R.circles[e+0]),t.circles.push(R.circles[e+1]),t.circles.push(R.circles[e+2]),t.circles.push(R.collisionDetected?1:0)}const G="globe"!==o.projection.name;T=T&&(G||!M),C=C&&(G||!A),this.placements[O]=new Ot(S||T,P||C,I||o.justReloaded),n.add(O)};if(O){const e=o.getSortedSymbolIndexes(this.transform.angle);for(let t=e.length-1;t>=0;--t){const n=e[t];E(o.symbolInstances.get(n),n,o.collisionArrays[n])}}else for(let e=t.symbolInstanceStart;e<t.symbolInstanceEnd;e++)E(o.symbolInstances.get(e),e,o.collisionArrays[e]);if(i&&o.bucketInstanceId in this.collisionCircleArrays){const t=this.collisionCircleArrays[o.bucketInstanceId];e.invert(t.invProjMatrix,s),t.viewportMatrix=this.collisionIndex.getViewportMatrix()}o.justReloaded=!1}markUsedJustification(t,n,i,a){const{leftJustifiedTextSymbolIndex:o,centerJustifiedTextSymbolIndex:r,rightJustifiedTextSymbolIndex:s,verticalPlacedTextSymbolIndex:l,crossTileID:c}=i,u=e.getAnchorJustification(n),d=a===e.WritingMode.vertical?l:"left"===u?o:"center"===u?r:"right"===u?s:-1;o>=0&&(t.text.placedSymbolArray.get(o).crossTileID=d>=0&&o!==d?0:c),r>=0&&(t.text.placedSymbolArray.get(r).crossTileID=d>=0&&r!==d?0:c),s>=0&&(t.text.placedSymbolArray.get(s).crossTileID=d>=0&&s!==d?0:c),l>=0&&(t.text.placedSymbolArray.get(l).crossTileID=d>=0&&l!==d?0:c)}markUsedOrientation(t,n,i){const a=n===e.WritingMode.horizontal||n===e.WritingMode.horizontalOnly?n:0,o=n===e.WritingMode.vertical?n:0,{leftJustifiedTextSymbolIndex:r,centerJustifiedTextSymbolIndex:s,rightJustifiedTextSymbolIndex:l,verticalPlacedTextSymbolIndex:c}=i,u=t.text.placedSymbolArray;r>=0&&(u.get(r).placedOrientation=a),s>=0&&(u.get(s).placedOrientation=a),l>=0&&(u.get(l).placedOrientation=a),c>=0&&(u.get(c).placedOrientation=o)}commit(e){this.commitTime=e,this.zoomAtLastRecencyCheck=this.transform.zoom;const t=this.prevPlacement;let n=!1;this.prevZoomAdjustment=t?t.zoomAdjustment(this.transform.zoom):0;const i=t?t.symbolFadeChange(e):1,a=t?t.opacities:{},o=t?t.variableOffsets:{},r=t?t.placedOrientations:{};for(const e in this.placements){const t=this.placements[e],o=a[e];o?(this.opacities[e]=new kt(o,i,t.text,t.icon,null,t.clipped),n=n||t.text!==o.text.placed||t.icon!==o.icon.placed):(this.opacities[e]=new kt(null,i,t.text,t.icon,t.skipFade,t.clipped),n=n||t.text||t.icon)}for(const e in a){const t=a[e];if(!this.opacities[e]){const a=new kt(t,i,!1,!1);a.isHidden()||(this.opacities[e]=a,n=n||t.text.placed||t.icon.placed)}}for(const e in o)this.variableOffsets[e]||!this.opacities[e]||this.opacities[e].isHidden()||(this.variableOffsets[e]=o[e]);for(const e in r)this.placedOrientations[e]||!this.opacities[e]||this.opacities[e].isHidden()||(this.placedOrientations[e]=r[e]);n?this.lastPlacementChangeTime=e:"number"!=typeof this.lastPlacementChangeTime&&(this.lastPlacementChangeTime=t?t.lastPlacementChangeTime:e)}updateLayerOpacities(e,t){const n=new Set;for(const i of t){const t=i.getBucket(e);t&&i.latestFeatureIndex&&e.id===t.layerIds[0]&&this.updateBucketOpacities(t,n,i.collisionBoxArray)}}updateBucketOpacities(t,n,i){t.hasTextData()&&t.text.opacityVertexArray.clear(),t.hasIconData()&&t.icon.opacityVertexArray.clear(),t.hasIconCollisionBoxData()&&t.iconCollisionBox.collisionVertexArray.clear(),t.hasTextCollisionBoxData()&&t.textCollisionBox.collisionVertexArray.clear();const a=t.layers[0].layout,o=!!t.layers[0].dynamicFilter(),r=new kt(null,0,!1,!1,!0),s=a.get("text-allow-overlap"),l=a.get("icon-allow-overlap"),c=a.get("text-variable-anchor"),u="map"===a.get("text-rotation-alignment"),d="map"===a.get("text-pitch-alignment"),p="none"!==a.get("icon-text-fit"),f=new kt(null,0,s&&(l||!t.hasIconData()||a.get("icon-optional")),l&&(s||!t.hasTextData()||a.get("text-optional")),!0);!t.collisionArrays&&i&&(t.hasIconCollisionBoxData()||t.hasTextCollisionBoxData())&&t.deserializeCollisionBoxes(i);const m=(e,t,n)=>{for(let i=0;i<t/4;i++)e.opacityVertexArray.emplaceBack(n)};let h=0;for(let i=0;i<t.symbolInstances.length;i++){const a=t.symbolInstances.get(i),{numHorizontalGlyphVertices:s,numVerticalGlyphVertices:l,crossTileID:g,numIconVertices:y}=a,v=n.has(g);let b=this.opacities[g];v?b=r:b||(b=f,this.opacities[g]=b),n.add(g);const _=s>0||l>0,w=y>0,x=this.placedOrientations[g],k=x===e.WritingMode.vertical,O=x===e.WritingMode.horizontal||x===e.WritingMode.horizontalOnly;if(!_&&!w||b.isHidden()||h++,_){const e=zt(b.text);m(t.text,s,k?Ft:e),m(t.text,l,O?Ft:e);const n=b.text.isHidden(),{leftJustifiedTextSymbolIndex:i,centerJustifiedTextSymbolIndex:o,rightJustifiedTextSymbolIndex:r,verticalPlacedTextSymbolIndex:c}=a,u=t.text.placedSymbolArray,d=n||k?1:0;i>=0&&(u.get(i).hidden=d),o>=0&&(u.get(o).hidden=d),r>=0&&(u.get(r).hidden=d),c>=0&&(u.get(c).hidden=n||O?1:0);const p=this.variableOffsets[g];p&&this.markUsedJustification(t,p.anchor,a,x);const f=this.placedOrientations[g];f&&(this.markUsedJustification(t,"left",a,f),this.markUsedOrientation(t,f,a))}if(w){const e=zt(b.icon),{placedIconSymbolIndex:n,verticalPlacedIconSymbolIndex:i}=a,o=t.icon.placedSymbolArray,r=b.icon.isHidden()?1:0;n>=0&&(m(t.icon,y,k?Ft:e),o.get(n).hidden=r),i>=0&&(m(t.icon,a.numVerticalIconVertices,O?Ft:e),o.get(i).hidden=r)}if(t.hasIconCollisionBoxData()||t.hasTextCollisionBoxData()){const n=t.collisionArrays[i];if(n){let i=new e.Point(0,0),a=!0;if(n.textBox||n.verticalTextBox){if(c){const e=this.variableOffsets[g];e?(i=St(e.anchor,e.width,e.height,e.textOffset,e.textScale),u&&i._rotate(d?this.transform.angle:-this.transform.angle)):a=!1}o&&(a=!b.clipped),n.textBox&&Mt(t.textCollisionBox.collisionVertexArray,b.text.placed,!a||k,i.x,i.y),n.verticalTextBox&&Mt(t.textCollisionBox.collisionVertexArray,b.text.placed,!a||O,i.x,i.y)}const r=a&&Boolean(!O&&n.verticalIconBox);n.iconBox&&Mt(t.iconCollisionBox.collisionVertexArray,b.icon.placed,r,p?i.x:0,p?i.y:0),n.verticalIconBox&&Mt(t.iconCollisionBox.collisionVertexArray,b.icon.placed,!r,p?i.x:0,p?i.y:0)}}}if(t.fullyClipped=0===h,t.sortFeatures(this.transform.angle),this.retainedQueryData[t.bucketInstanceId]&&(this.retainedQueryData[t.bucketInstanceId].featureSortOrder=t.featureSortOrder),t.hasTextData()&&t.text.opacityVertexBuffer&&t.text.opacityVertexBuffer.updateData(t.text.opacityVertexArray),t.hasIconData()&&t.icon.opacityVertexBuffer&&t.icon.opacityVertexBuffer.updateData(t.icon.opacityVertexArray),t.hasIconCollisionBoxData()&&t.iconCollisionBox.collisionVertexBuffer&&t.iconCollisionBox.collisionVertexBuffer.updateData(t.iconCollisionBox.collisionVertexArray),t.hasTextCollisionBoxData()&&t.textCollisionBox.collisionVertexBuffer&&t.textCollisionBox.collisionVertexBuffer.updateData(t.textCollisionBox.collisionVertexArray),t.bucketInstanceId in this.collisionCircleArrays){const e=this.collisionCircleArrays[t.bucketInstanceId];t.placementInvProjMatrix=e.invProjMatrix,t.placementViewportMatrix=e.viewportMatrix,t.collisionCircleArray=e.circles,delete this.collisionCircleArrays[t.bucketInstanceId]}}symbolFadeChange(e){return 0===this.fadeDuration?1:(e-this.commitTime)/this.fadeDuration+this.prevZoomAdjustment}zoomAdjustment(e){return Math.max(0,(this.transform.zoom-e)/1.5)}hasTransitions(e){return this.stale||e-this.lastPlacementChangeTime<this.fadeDuration}stillRecent(e,t){const n=this.zoomAtLastRecencyCheck===t?1-this.zoomAdjustment(t):1;return this.zoomAtLastRecencyCheck=t,this.commitTime+this.fadeDuration*n>e}setStale(){this.stale=!0}}function Mt(e,t,n,i,a){e.emplaceBack(t?1:0,n?1:0,i||0,a||0),e.emplaceBack(t?1:0,n?1:0,i||0,a||0),e.emplaceBack(t?1:0,n?1:0,i||0,a||0),e.emplaceBack(t?1:0,n?1:0,i||0,a||0)}const At=Math.pow(2,25),jt=Math.pow(2,24),Nt=Math.pow(2,17),Lt=Math.pow(2,16),Dt=Math.pow(2,9),Rt=Math.pow(2,8),Bt=Math.pow(2,1);function zt(e){if(0===e.opacity&&!e.placed)return 0;if(1===e.opacity&&e.placed)return 4294967295;const t=e.placed?1:0,n=Math.floor(127*e.opacity);return n*At+t*jt+n*Nt+t*Lt+n*Dt+t*Rt+n*Bt+t}const Ft=0;class Ut{constructor(e){this._sortAcrossTiles="viewport-y"!==e.layout.get("symbol-z-order")&&void 0!==e.layout.get("symbol-sort-key").constantOr(1),this._currentTileIndex=0,this._currentPartIndex=0,this._seenCrossTileIDs=new Set,this._bucketParts=[]}continuePlacement(e,t,n,i,a){const o=this._bucketParts;for(;this._currentTileIndex<e.length;)if(t.getBucketParts(o,i,e[this._currentTileIndex],this._sortAcrossTiles),this._currentTileIndex++,a())return!0;for(this._sortAcrossTiles&&(this._sortAcrossTiles=!1,o.sort((e,t)=>e.sortKey-t.sortKey));this._currentPartIndex<o.length;){const e=o[this._currentPartIndex];if(t.placeLayerBucketPart(e,this._seenCrossTileIDs,n,0===e.symbolInstanceStart),this._currentPartIndex++,a())return!0}return!1}}class Ht{constructor(e,t,n,i,a,o,r,s){this.placement=new It(e,a,o,r,s),this._currentPlacementIndex=t.length-1,this._forceFullPlacement=n,this._showCollisionBoxes=i,this._done=!1}isDone(){return this._done}continuePlacement(t,n,i){const a=e.exported.now(),o=()=>{const t=e.exported.now()-a;return!this._forceFullPlacement&&t>2};for(;this._currentPlacementIndex>=0;){const e=n[t[this._currentPlacementIndex]],a=this.placement.collisionIndex.transform.zoom;if("symbol"===e.type&&(!e.minzoom||e.minzoom<=a)&&(!e.maxzoom||e.maxzoom>a)){if(this._inProgressLayer||(this._inProgressLayer=new Ut(e)),this._inProgressLayer.continuePlacement(i[e.source],this.placement,this._showCollisionBoxes,e,o))return;delete this._inProgressLayer}this._currentPlacementIndex--}this._done=!0}commit(e){return this.placement.commit(e),this.placement}}const Wt=512/e.EXTENT/2;class qt{constructor(t,n,i){this.tileID=t,this.bucketInstanceId=i,this.index=new e.KDBush(n.length,16,Int32Array),this.keys=[],this.crossTileIDs=[];const a=t.canonical.x*e.EXTENT,o=t.canonical.y*e.EXTENT;for(let e=0;e<n.length;e++){const{key:t,crossTileID:i,tileAnchorX:r,tileAnchorY:s}=n.get(e),l=Math.floor((a+r)*Wt),c=Math.floor((o+s)*Wt);this.index.add(l,c),this.keys.push(t),this.crossTileIDs.push(i)}this.index.finish()}findMatches(t,n,i){const a=this.tileID.canonical.z<n.canonical.z?1:Math.pow(2,this.tileID.canonical.z-n.canonical.z),o=Wt/Math.pow(2,n.canonical.z-this.tileID.canonical.z),r=n.canonical.x*e.EXTENT,s=n.canonical.y*e.EXTENT;for(let e=0;e<t.length;e++){const n=t.get(e);if(n.crossTileID)continue;const{key:l,tileAnchorX:c,tileAnchorY:u}=n,d=Math.floor((r+c)*o),p=Math.floor((s+u)*o),f=this.index.range(d-a,p-a,d+a,p+a);for(const e of f){const t=this.crossTileIDs[e];if(this.keys[e]===l&&!i.has(t)){i.add(t),n.crossTileID=t;break}}}}}class Vt{constructor(){this.maxCrossTileID=0}generate(){return++this.maxCrossTileID}}class Gt{constructor(){this.indexes={},this.usedCrossTileIDs={},this.lng=0}handleWrapJump(e){const t=Math.round((e-this.lng)/360);if(0!==t)for(const e in this.indexes){const n=this.indexes[e],i={};for(const e in n){const a=n[e];a.tileID=a.tileID.unwrapTo(a.tileID.wrap+t),i[a.tileID.key]=a}this.indexes[e]=i}this.lng=e}addBucket(e,t,n){if(this.indexes[e.overscaledZ]&&this.indexes[e.overscaledZ][e.key]){if(this.indexes[e.overscaledZ][e.key].bucketInstanceId===t.bucketInstanceId)return!1;this.removeBucketCrossTileIDs(e.overscaledZ,this.indexes[e.overscaledZ][e.key])}for(let e=0;e<t.symbolInstances.length;e++)t.symbolInstances.get(e).crossTileID=0;this.usedCrossTileIDs[e.overscaledZ]||(this.usedCrossTileIDs[e.overscaledZ]=new Set);const i=this.usedCrossTileIDs[e.overscaledZ];for(const n in this.indexes){const a=this.indexes[n];if(Number(n)>e.overscaledZ)for(const n in a){const o=a[n];o.tileID.isChildOf(e)&&o.findMatches(t.symbolInstances,e,i)}else{const o=a[e.scaledTo(Number(n)).key];o&&o.findMatches(t.symbolInstances,e,i)}}for(let e=0;e<t.symbolInstances.length;e++){const a=t.symbolInstances.get(e);a.crossTileID||(a.crossTileID=n.generate(),i.add(a.crossTileID))}return void 0===this.indexes[e.overscaledZ]&&(this.indexes[e.overscaledZ]={}),this.indexes[e.overscaledZ][e.key]=new qt(e,t.symbolInstances,t.bucketInstanceId),!0}removeBucketCrossTileIDs(e,t){for(const n of t.crossTileIDs)this.usedCrossTileIDs[e].delete(n)}removeStaleBuckets(e){let t=!1;for(const n in this.indexes){const i=this.indexes[n];for(const a in i)e[i[a].bucketInstanceId]||(this.removeBucketCrossTileIDs(n,i[a]),delete i[a],t=!0)}return t}}class Yt{constructor(){this.layerIndexes={},this.crossTileIDs=new Vt,this.maxBucketInstanceId=0,this.bucketsInCurrentPlacement={}}addLayer(e,t,n,i){let a=this.layerIndexes[e.id];void 0===a&&(a=this.layerIndexes[e.id]=new Gt);let o=!1;const r={};"globe"!==i.name&&a.handleWrapJump(n);for(const n of t){const t=n.getBucket(e);t&&e.id===t.layerIds[0]&&(t.bucketInstanceId||(t.bucketInstanceId=++this.maxBucketInstanceId),a.addBucket(n.tileID,t,this.crossTileIDs)&&(o=!0),r[t.bucketInstanceId]=!0)}return a.removeStaleBuckets(r)&&(o=!0),o}pruneUnusedLayers(e){const t={};e.forEach(e=>{t[e]=!0});for(const e in this.layerIndexes)t[e]||delete this.layerIndexes[e]}}const Xt=(t,n)=>e.emitValidationErrors(t,n&&n.filter(e=>"source.canvas"!==e.identifier)),Zt=e.pick(He,["addLayer","removeLayer","setPaintProperty","setLayoutProperty","setFilter","addSource","removeSource","setLayerZoomRange","setLight","setTransition","setGeoJSONSourceData","setTerrain","setFog","setProjection"]),Jt=e.pick(He,["setCenter","setZoom","setBearing","setPitch"]),Kt={version:8,layers:[],sources:{}},$t={fill:!0,line:!0,background:!0,hillshade:!0,raster:!0};class Qt extends e.Evented{constructor(t,n={}){super(),this.map=t,this.dispatcher=new P(ze(),this),this.imageManager=new _,this.imageManager.setEventedParent(this),this.glyphManager=new e.GlyphManager(t._requestManager,n.localFontFamily?e.LocalGlyphMode.all:n.localIdeographFontFamily?e.LocalGlyphMode.ideographs:e.LocalGlyphMode.none,n.localFontFamily||n.localIdeographFontFamily),this.crossTileSymbolIndex=new Yt,this._layers={},this._num3DLayers=0,this._numSymbolLayers=0,this._numCircleLayers=0,this._serializedLayers={},this._sourceCaches={},this._otherSourceCaches={},this._symbolSourceCaches={},this._loaded=!1,this._availableImages=[],this._order=[],this._drapedFirstOrder=[],this._markersNeedUpdate=!1,this._resetUpdates(),this.dispatcher.broadcast("setReferrer",e.getReferrer());const i=this;this._rtlTextPluginCallback=Qt.registerForPluginStateChange(t=>{i.dispatcher.broadcast("syncRTLPluginState",{pluginStatus:t.pluginStatus,pluginURL:t.pluginURL},(t,n)=>{if(e.triggerPluginCompletionEvent(t),n&&n.every(e=>e))for(const e in i._sourceCaches){const t=i._sourceCaches[e],n=t.getSource().type;"vector"!==n&&"geojson"!==n||t.reload()}})}),this.on("data",e=>{if("source"!==e.dataType||"metadata"!==e.sourceDataType)return;const t=this.getSource(e.sourceId);if(t&&t.vectorLayerIds)for(const e in this._layers){const n=this._layers[e];n.source===t.id&&this._validateLayer(n)}})}loadURL(t,n={}){this.fire(new e.Event("dataloading",{dataType:"style"}));const i="boolean"==typeof n.validate?n.validate:!e.isMapboxURL(t);t=this.map._requestManager.normalizeStyleURL(t,n.accessToken);const a=this.map._requestManager.transformRequest(t,e.ResourceType.Style);this._request=e.getJSON(a,(t,n)=>{this._request=null,t?this.fire(new e.ErrorEvent(t)):n&&this._load(n,i)})}loadJSON(t,n={}){this.fire(new e.Event("dataloading",{dataType:"style"})),this._request=e.exported.frame(()=>{this._request=null,this._load(t,!1!==n.validate)})}loadEmpty(){this.fire(new e.Event("dataloading",{dataType:"style"})),this._load(Kt,!1)}_updateLayerCount(e,t){const n=t?1:-1;e.is3D()&&(this._num3DLayers+=n),"circle"===e.type&&(this._numCircleLayers+=n),"symbol"===e.type&&(this._numSymbolLayers+=n)}_load(t,n){if(n&&Xt(this,e.validateStyle(t)))return;this._loaded=!0,this.stylesheet=e.clone$1(t),this._updateMapProjection();for(const e in t.sources)this.addSource(e,t.sources[e],{validate:!1});this._changed=!1,t.sprite?this._loadSprite(t.sprite):(this.imageManager.setLoaded(!0),this.dispatcher.broadcast("spriteLoaded",!0)),this.glyphManager.setURL(t.glyphs);const i=Ue(this.stylesheet.layers);this._order=i.map(e=>e.id),this._layers={},this._serializedLayers={};for(const t of i){const n=e.createStyleLayer(t);n.setEventedParent(this,{layer:{id:n.id}}),this._layers[n.id]=n,this._serializedLayers[n.id]=n.serialize(),this._updateLayerCount(n,!0)}this.dispatcher.broadcast("setLayers",this._serializeLayers(this._order)),this.light=new x(this.stylesheet.light),this.stylesheet.terrain&&!this.terrainSetForDrapingOnly()&&this._createTerrain(this.stylesheet.terrain,1),this.stylesheet.fog&&this._createFog(this.stylesheet.fog),this._updateDrapeFirstLayers(),this.fire(new e.Event("data",{dataType:"style"})),this.fire(new e.Event("style.load"))}terrainSetForDrapingOnly(){return!!this.terrain&&0===this.terrain.drapeRenderMode}setProjection(e){e?this.stylesheet.projection=e:delete this.stylesheet.projection,this._updateMapProjection()}applyProjectionUpdate(){this._loaded&&(this.dispatcher.broadcast("setProjection",this.map.transform.projectionOptions),this.map.transform.projection.requiresDraping?this.getTerrain()||this.stylesheet.terrain||this.setTerrainForDraping():this.terrainSetForDrapingOnly()&&this.setTerrain(null))}_updateMapProjection(){this.map._useExplicitProjection?this.applyProjectionUpdate():this.map._prioritizeAndUpdateProjection(null,this.stylesheet.projection)}_loadSprite(t){this._spriteRequest=function(t,n,i){let a,o,r;const s=e.exported.devicePixelRatio>1?"@2x":"";let l=e.getJSON(n.transformRequest(n.normalizeSpriteURL(t,s,".json"),e.ResourceType.SpriteJSON),(e,t)=>{l=null,r||(r=e,a=t,u())}),c=e.getImage(n.transformRequest(n.normalizeSpriteURL(t,s,".png"),e.ResourceType.SpriteImage),(e,t)=>{c=null,r||(r=e,o=t,u())});function u(){if(r)i(r);else if(a&&o){const t=e.exported.getImageData(o),n={};for(const i in a){const{width:o,height:r,x:s,y:l,sdf:c,pixelRatio:u,stretchX:d,stretchY:p,content:f}=a[i],m=new e.RGBAImage({width:o,height:r});e.RGBAImage.copy(t,m,{x:s,y:l},{x:0,y:0},{width:o,height:r}),n[i]={data:m,pixelRatio:u,sdf:c,stretchX:d,stretchY:p,content:f}}i(null,n)}}return{cancel(){l&&(l.cancel(),l=null),c&&(c.cancel(),c=null)}}}(t,this.map._requestManager,(t,n)=>{if(this._spriteRequest=null,t)this.fire(new e.ErrorEvent(t));else if(n)for(const e in n)this.imageManager.addImage(e,n[e]);this.imageManager.setLoaded(!0),this._availableImages=this.imageManager.listImages(),this.dispatcher.broadcast("setImages",this._availableImages),this.dispatcher.broadcast("spriteLoaded",!0),this.fire(new e.Event("data",{dataType:"style"}))})}_validateLayer(t){const n=this.getSource(t.source);if(!n)return;const i=t.sourceLayer;i&&("geojson"===n.type||n.vectorLayerIds&&-1===n.vectorLayerIds.indexOf(i))&&this.fire(new e.ErrorEvent(new Error(`Source layer "${i}" does not exist on source "${n.id}" as specified by style layer "${t.id}"`)))}loaded(){if(!this._loaded)return!1;if(Object.keys(this._updatedSources).length)return!1;for(const e in this._sourceCaches)if(!this._sourceCaches[e].loaded())return!1;return!!this.imageManager.isLoaded()}_serializeLayers(e){const t=[];for(const n of e){const e=this._layers[n];"custom"!==e.type&&t.push(e.serialize())}return t}hasTransitions(){if(this.light&&this.light.hasTransition())return!0;if(this.fog&&this.fog.hasTransition())return!0;for(const e in this._sourceCaches)if(this._sourceCaches[e].hasTransition())return!0;for(const e in this._layers)if(this._layers[e].hasTransition())return!0;return!1}get order(){return this.map._optimizeForTerrain&&this.terrain?this._drapedFirstOrder:this._order}isLayerDraped(e){return!!this.terrain&&("function"==typeof e.isLayerDraped?e.isLayerDraped():$t[e.type])}_checkLoaded(){if(!this._loaded)throw new Error("Style is not done loading")}update(t){if(!this._loaded)return;const n=this._changed;if(this._changed){const e=Object.keys(this._updatedLayers),n=Object.keys(this._removedLayers);(e.length||n.length)&&this._updateWorkerLayers(e,n);for(const e in this._updatedSources){const t=this._updatedSources[e];"reload"===t?this._reloadSource(e):"clear"===t&&this._clearSource(e)}this._updateTilesForChangedImages();for(const e in this._updatedPaintProps)this._layers[e].updateTransitions(t);this.light.updateTransitions(t),this.fog&&this.fog.updateTransitions(t),this._resetUpdates()}const i={};for(const e in this._sourceCaches){const t=this._sourceCaches[e];i[e]=t.used,t.used=!1}for(const e of this._order){const n=this._layers[e];if(n.recalculate(t,this._availableImages),!n.isHidden(t.zoom)){const e=this._getLayerSourceCache(n);e&&(e.used=!0)}const i=this.map.painter;if(i){const e=n.getProgramIds();if(!e)continue;const a=n.getProgramConfiguration(t.zoom);for(const t of e)i.useProgram(t,a)}}for(const t in i){const n=this._sourceCaches[t];i[t]!==n.used&&n.getSource().fire(new e.Event("data",{sourceDataType:"visibility",dataType:"source",sourceId:n.getSource().id}))}this.light.recalculate(t),this.terrain&&this.terrain.recalculate(t),this.fog&&this.fog.recalculate(t),this.z=t.zoom,this._markersNeedUpdate&&(this._updateMarkersOpacity(),this._markersNeedUpdate=!1),n&&this.fire(new e.Event("data",{dataType:"style"}))}_updateTilesForChangedImages(){const e=Object.keys(this._changedImages);if(e.length){for(const t in this._sourceCaches)this._sourceCaches[t].reloadTilesForDependencies(["icons","patterns"],e);this._changedImages={}}}_updateWorkerLayers(e,t){this.dispatcher.broadcast("updateLayers",{layers:this._serializeLayers(e),removedIds:t})}_resetUpdates(){this._changed=!1,this._updatedLayers={},this._removedLayers={},this._updatedSources={},this._updatedPaintProps={},this._changedImages={}}setState(n){if(this._checkLoaded(),Xt(this,e.validateStyle(n)))return!1;(n=e.clone$1(n)).layers=Ue(n.layers);const i=function(e,n){if(!e)return[{command:He.setStyle,args:[n]}];let i=[];try{if(!t(e.version,n.version))return[{command:He.setStyle,args:[n]}];t(e.center,n.center)||i.push({command:He.setCenter,args:[n.center]}),t(e.zoom,n.zoom)||i.push({command:He.setZoom,args:[n.zoom]}),t(e.bearing,n.bearing)||i.push({command:He.setBearing,args:[n.bearing]}),t(e.pitch,n.pitch)||i.push({command:He.setPitch,args:[n.pitch]}),t(e.sprite,n.sprite)||i.push({command:He.setSprite,args:[n.sprite]}),t(e.glyphs,n.glyphs)||i.push({command:He.setGlyphs,args:[n.glyphs]}),t(e.transition,n.transition)||i.push({command:He.setTransition,args:[n.transition]}),t(e.light,n.light)||i.push({command:He.setLight,args:[n.light]}),t(e.fog,n.fog)||i.push({command:He.setFog,args:[n.fog]}),t(e.projection,n.projection)||i.push({command:He.setProjection,args:[n.projection]});const a={},o=[];!function(e,n,i,a){let o;for(o in n=n||{},e=e||{})e.hasOwnProperty(o)&&(n.hasOwnProperty(o)||qe(o,i,a));for(o in n){if(!n.hasOwnProperty(o))continue;const r=n[o];e.hasOwnProperty(o)?t(e[o],r)||("geojson"===e[o].type&&"geojson"===r.type&&Ge(e,n,o)?i.push({command:He.setGeoJSONSourceData,args:[o,r.data]}):Ve(o,n,i,a)):We(o,n,i)}}(e.sources,n.sources,o,a);const r=[];e.layers&&e.layers.forEach(e=>{e.source&&a[e.source]?i.push({command:He.removeLayer,args:[e.id]}):r.push(e)});let s=e.terrain;s&&a[s.source]&&(i.push({command:He.setTerrain,args:[void 0]}),s=void 0),i=i.concat(o),t(s,n.terrain)||i.push({command:He.setTerrain,args:[n.terrain]}),function(e,n,i){n=n||[];const a=(e=e||[]).map(Xe),o=n.map(Xe),r=e.reduce(Ze,{}),s=n.reduce(Ze,{}),l=a.slice(),c=Object.create(null);let u,d,p,f,m,h,g;for(u=0,d=0;u<a.length;u++)p=a[u],s.hasOwnProperty(p)?d++:(i.push({command:He.removeLayer,args:[p]}),l.splice(l.indexOf(p,d),1));for(u=0,d=0;u<o.length;u++)p=o[o.length-1-u],l[l.length-1-u]!==p&&(r.hasOwnProperty(p)?(i.push({command:He.removeLayer,args:[p]}),l.splice(l.lastIndexOf(p,l.length-d),1)):d++,h=l[l.length-u],i.push({command:He.addLayer,args:[s[p],h]}),l.splice(l.length-u,0,p),c[p]=!0);for(u=0;u<o.length;u++)if(p=o[u],f=r[p],m=s[p],!c[p]&&!t(f,m))if(t(f.source,m.source)&&t(f["source-layer"],m["source-layer"])&&t(f.type,m.type)){for(g in Ye(f.layout,m.layout,i,p,null,He.setLayoutProperty),Ye(f.paint,m.paint,i,p,null,He.setPaintProperty),t(f.filter,m.filter)||i.push({command:He.setFilter,args:[p,m.filter]}),t(f.minzoom,m.minzoom)&&t(f.maxzoom,m.maxzoom)||i.push({command:He.setLayerZoomRange,args:[p,m.minzoom,m.maxzoom]}),f)f.hasOwnProperty(g)&&"layout"!==g&&"paint"!==g&&"filter"!==g&&"metadata"!==g&&"minzoom"!==g&&"maxzoom"!==g&&(0===g.indexOf("paint.")?Ye(f[g],m[g],i,p,g.slice(6),He.setPaintProperty):t(f[g],m[g])||i.push({command:He.setLayerProperty,args:[p,g,m[g]]}));for(g in m)m.hasOwnProperty(g)&&!f.hasOwnProperty(g)&&"layout"!==g&&"paint"!==g&&"filter"!==g&&"metadata"!==g&&"minzoom"!==g&&"maxzoom"!==g&&(0===g.indexOf("paint.")?Ye(f[g],m[g],i,p,g.slice(6),He.setPaintProperty):t(f[g],m[g])||i.push({command:He.setLayerProperty,args:[p,g,m[g]]}))}else i.push({command:He.removeLayer,args:[p]}),h=l[l.lastIndexOf(p)+1],i.push({command:He.addLayer,args:[m,h]})}(r,n.layers,i)}catch(e){console.warn("Unable to compute style diff:",e),i=[{command:He.setStyle,args:[n]}]}return i}(this.serialize(),n).filter(e=>!(e.command in Jt));if(0===i.length)return!1;const a=i.filter(e=>!(e.command in Zt));if(a.length>0)throw new Error(`Unimplemented: ${a.map(e=>e.command).join(", ")}.`);return i.forEach(e=>{"setTransition"!==e.command&&"setProjection"!==e.command&&this[e.command].apply(this,e.args)}),this.stylesheet=n,this._updateMapProjection(),!0}addImage(t,n){return this.getImage(t)?this.fire(new e.ErrorEvent(new Error("An image with this name already exists."))):(this.imageManager.addImage(t,n),this._afterImageUpdated(t),this)}updateImage(e,t){this.imageManager.updateImage(e,t)}getImage(e){return this.imageManager.getImage(e)}removeImage(t){return this.getImage(t)?(this.imageManager.removeImage(t),this._afterImageUpdated(t),this):this.fire(new e.ErrorEvent(new Error("No image with this name exists.")))}_afterImageUpdated(t){this._availableImages=this.imageManager.listImages(),this._changedImages[t]=!0,this._changed=!0,this.dispatcher.broadcast("setImages",this._availableImages),this.fire(new e.Event("data",{dataType:"style"}))}listImages(){return this._checkLoaded(),this._availableImages.slice()}addSource(t,n,i={}){if(this._checkLoaded(),void 0!==this.getSource(t))throw new Error("There is already a source with this ID");if(!n.type)throw new Error(`The type property must be defined, but only the following properties were given: ${Object.keys(n).join(", ")}.`);if(["vector","raster","geojson","video","image"].indexOf(n.type)>=0&&this._validate(e.validateSource,"sources."+t,n,null,i))return;this.map&&this.map._collectResourceTiming&&(n.collectResourceTiming=!0);const a=Ie(t,n,this.dispatcher,this);a.setEventedParent(this,()=>({isSourceLoaded:this._isSourceCacheLoaded(t),source:a.serialize(),sourceId:t}));const o=n=>{const i=(n?"symbol:":"other:")+t,o=this._sourceCaches[i]=new e.SourceCache(i,a,n);(n?this._symbolSourceCaches:this._otherSourceCaches)[t]=o,o.style=this,o.onAdd(this.map)};o(!1),"vector"!==n.type&&"geojson"!==n.type||o(!0),a.onAdd&&a.onAdd(this.map),this._changed=!0}removeSource(t){this._checkLoaded();const n=this.getSource(t);if(!n)throw new Error("There is no source with this ID");for(const n in this._layers)if(this._layers[n].source===t)return this.fire(new e.ErrorEvent(new Error(`Source "${t}" cannot be removed while layer "${n}" is using it.`)));if(this.terrain&&this.terrain.get().source===t)return this.fire(new e.ErrorEvent(new Error(`Source "${t}" cannot be removed while terrain is using it.`)));const i=this._getSourceCaches(t);for(const t of i)delete this._sourceCaches[t.id],delete this._updatedSources[t.id],t.fire(new e.Event("data",{sourceDataType:"metadata",dataType:"source",sourceId:t.getSource().id})),t.setEventedParent(null),t.clearTiles();return delete this._otherSourceCaches[t],delete this._symbolSourceCaches[t],n.setEventedParent(null),n.onRemove&&n.onRemove(this.map),this._changed=!0,this}setGeoJSONSourceData(e,t){this._checkLoaded(),this.getSource(e).setData(t),this._changed=!0}getSource(e){const t=this._getSourceCache(e);return t&&t.getSource()}_getSources(){const e=[];for(const t in this._otherSourceCaches){const n=this._getSourceCache(t);n&&e.push(n.getSource())}return e}addLayer(t,n,i={}){this._checkLoaded();const a=t.id;if(this.getLayer(a))return void this.fire(new e.ErrorEvent(new Error(`Layer with id "${a}" already exists on this map`)));let o;if("custom"===t.type){if(Xt(this,e.validateCustomStyleLayer(t)))return;o=e.createStyleLayer(t)}else{if("object"==typeof t.source&&(this.addSource(a,t.source),t=e.clone$1(t),t=e.extend(t,{source:a})),this._validate(e.validateLayer,"layers."+a,t,{arrayIndex:-1},i))return;o=e.createStyleLayer(t),this._validateLayer(o),o.setEventedParent(this,{layer:{id:a}}),this._serializedLayers[o.id]=o.serialize(),this._updateLayerCount(o,!0)}const r=n?this._order.indexOf(n):this._order.length;if(n&&-1===r)return void this.fire(new e.ErrorEvent(new Error(`Layer with id "${n}" does not exist on this map.`)));this._order.splice(r,0,a),this._layerOrderChanged=!0,this._layers[a]=o;const s=this._getLayerSourceCache(o);if(this._removedLayers[a]&&o.source&&s&&"custom"!==o.type){const e=this._removedLayers[a];delete this._removedLayers[a],e.type!==o.type?this._updatedSources[o.source]="clear":(this._updatedSources[o.source]="reload",s.pause())}this._updateLayer(o),o.onAdd&&o.onAdd(this.map),this._updateDrapeFirstLayers()}moveLayer(t,n){if(this._checkLoaded(),this._changed=!0,!this._layers[t])return void this.fire(new e.ErrorEvent(new Error(`The layer '${t}' does not exist in the map's style and cannot be moved.`)));if(t===n)return;const i=this._order.indexOf(t);this._order.splice(i,1);const a=n?this._order.indexOf(n):this._order.length;n&&-1===a?this.fire(new e.ErrorEvent(new Error(`Layer with id "${n}" does not exist on this map.`))):(this._order.splice(a,0,t),this._layerOrderChanged=!0,this._updateDrapeFirstLayers())}removeLayer(t){this._checkLoaded();const n=this._layers[t];if(!n)return void this.fire(new e.ErrorEvent(new Error(`The layer '${t}' does not exist in the map's style and cannot be removed.`)));n.setEventedParent(null),this._updateLayerCount(n,!1);const i=this._order.indexOf(t);this._order.splice(i,1),this._layerOrderChanged=!0,this._changed=!0,this._removedLayers[t]=n,delete this._layers[t],delete this._serializedLayers[t],delete this._updatedLayers[t],delete this._updatedPaintProps[t],n.onRemove&&n.onRemove(this.map),this._updateDrapeFirstLayers()}getLayer(e){return this._layers[e]}hasLayer(e){return e in this._layers}hasLayerType(e){for(const t in this._layers)if(this._layers[t].type===e)return!0;return!1}setLayerZoomRange(t,n,i){this._checkLoaded();const a=this.getLayer(t);a?a.minzoom===n&&a.maxzoom===i||(null!=n&&(a.minzoom=n),null!=i&&(a.maxzoom=i),this._updateLayer(a)):this.fire(new e.ErrorEvent(new Error(`The layer '${t}' does not exist in the map's style and cannot have zoom extent.`)))}setFilter(n,i,a={}){this._checkLoaded();const o=this.getLayer(n);if(o){if(!t(o.filter,i))return null==i?(o.filter=void 0,void this._updateLayer(o)):void(this._validate(e.validateFilter,`layers.${o.id}.filter`,i,{layerType:o.type},a)||(o.filter=e.clone$1(i),this._updateLayer(o)))}else this.fire(new e.ErrorEvent(new Error(`The layer '${n}' does not exist in the map's style and cannot be filtered.`)))}getFilter(t){const n=this.getLayer(t);return n&&e.clone$1(n.filter)}setLayoutProperty(n,i,a,o={}){this._checkLoaded();const r=this.getLayer(n);r?t(r.getLayoutProperty(i),a)||(r.setLayoutProperty(i,a,o),this._updateLayer(r)):this.fire(new e.ErrorEvent(new Error(`The layer '${n}' does not exist in the map's style and cannot be styled.`)))}getLayoutProperty(t,n){const i=this.getLayer(t);if(i)return i.getLayoutProperty(n);this.fire(new e.ErrorEvent(new Error(`The layer '${t}' does not exist in the map's style.`)))}setPaintProperty(n,i,a,o={}){this._checkLoaded();const r=this.getLayer(n);r?t(r.getPaintProperty(i),a)||(r.setPaintProperty(i,a,o)&&this._updateLayer(r),this._changed=!0,this._updatedPaintProps[n]=!0):this.fire(new e.ErrorEvent(new Error(`The layer '${n}' does not exist in the map's style and cannot be styled.`)))}getPaintProperty(e,t){const n=this.getLayer(e);return n&&n.getPaintProperty(t)}setFeatureState(t,n){this._checkLoaded();const i=t.source,a=t.sourceLayer,o=this.getSource(i);if(!o)return void this.fire(new e.ErrorEvent(new Error(`The source '${i}' does not exist in the map's style.`)));const r=o.type;if("geojson"===r&&a)return void this.fire(new e.ErrorEvent(new Error("GeoJSON sources cannot have a sourceLayer parameter.")));if("vector"===r&&!a)return void this.fire(new e.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")));void 0===t.id&&this.fire(new e.ErrorEvent(new Error("The feature id parameter must be provided.")));const s=this._getSourceCaches(i);for(const e of s)e.setFeatureState(a,t.id,n)}removeFeatureState(t,n){this._checkLoaded();const i=t.source,a=this.getSource(i);if(!a)return void this.fire(new e.ErrorEvent(new Error(`The source '${i}' does not exist in the map's style.`)));const o=a.type,r="vector"===o?t.sourceLayer:void 0;if("vector"===o&&!r)return void this.fire(new e.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")));if(n&&"string"!=typeof t.id&&"number"!=typeof t.id)return void this.fire(new e.ErrorEvent(new Error("A feature id is required to remove its specific state property.")));const s=this._getSourceCaches(i);for(const e of s)e.removeFeatureState(r,t.id,n)}getFeatureState(t){this._checkLoaded();const n=t.source,i=t.sourceLayer,a=this.getSource(n);if(a){if("vector"!==a.type||i)return void 0===t.id&&this.fire(new e.ErrorEvent(new Error("The feature id parameter must be provided."))),this._getSourceCaches(n)[0].getFeatureState(i,t.id);this.fire(new e.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")))}else this.fire(new e.ErrorEvent(new Error(`The source '${n}' does not exist in the map's style.`)))}getTransition(){return e.extend({duration:300,delay:0},this.stylesheet&&this.stylesheet.transition)}serialize(){const t={};for(const e in this._sourceCaches){const n=this._sourceCaches[e].getSource();t[n.id]||(t[n.id]=n.serialize())}return e.filterObject({version:this.stylesheet.version,name:this.stylesheet.name,metadata:this.stylesheet.metadata,light:this.stylesheet.light,terrain:this.getTerrain()||void 0,fog:this.stylesheet.fog,center:this.stylesheet.center,zoom:this.stylesheet.zoom,bearing:this.stylesheet.bearing,pitch:this.stylesheet.pitch,sprite:this.stylesheet.sprite,glyphs:this.stylesheet.glyphs,transition:this.stylesheet.transition,projection:this.stylesheet.projection,sources:t,layers:this._serializeLayers(this._order)},e=>void 0!==e)}_updateLayer(e){this._updatedLayers[e.id]=!0;const t=this._getLayerSourceCache(e);e.source&&!this._updatedSources[e.source]&&t&&"raster"!==t.getSource().type&&(this._updatedSources[e.source]="reload",t.pause()),this._changed=!0,e.invalidateCompiledFilter()}_flattenAndSortRenderedFeatures(e){const t=e=>"fill-extrusion"===this._layers[e].type,n={},i=[];for(let a=this._order.length-1;a>=0;a--){const o=this._order[a];if(t(o)){n[o]=a;for(const t of e){const e=t[o];if(e)for(const t of e)i.push(t)}}}i.sort((e,t)=>t.intersectionZ-e.intersectionZ);const a=[];for(let o=this._order.length-1;o>=0;o--){const r=this._order[o];if(t(r))for(let e=i.length-1;e>=0;e--){const t=i[e].feature;if(n[t.layer.id]<o)break;a.push(t),i.pop()}else for(const t of e){const e=t[r];if(e)for(const t of e)a.push(t.feature)}}return a}queryRenderedFeatures(t,n,i){n&&n.filter&&this._validate(e.validateFilter,"queryRenderedFeatures.filter",n.filter,null,n);const a={};if(n&&n.layers){if(!Array.isArray(n.layers))return this.fire(new e.ErrorEvent(new Error("parameters.layers must be an Array."))),[];for(const t of n.layers){const n=this._layers[t];if(!n)return this.fire(new e.ErrorEvent(new Error(`The layer '${t}' does not exist in the map's style and cannot be queried for features.`))),[];a[n.source]=!0}}const o=[];n.availableImages=this._availableImages;const r=n&&n.layers?n.layers.some(e=>{const t=this.getLayer(e);return t&&t.is3D()}):this.has3DLayers(),s=M.createFromScreenPoints(t,i);for(const e in this._sourceCaches){const t=this._sourceCaches[e].getSource().id;n.layers&&!a[t]||o.push(Ae(this._sourceCaches[e],this._layers,this._serializedLayers,s,n,i,r,!!this.map._showQueryGeometry))}return this.placement&&o.push(function(e,t,n,i,a,o,r){const s={},l=o.queryRenderedSymbols(i),c=[];for(const e of Object.keys(l).map(Number))c.push(r[e]);c.sort(Ne);for(const n of c){const i=n.featureIndex.lookupSymbolFeatures(l[n.bucketInstanceId],t,n.bucketIndex,n.sourceLayerIndex,a.filter,a.layers,a.availableImages,e);for(const e in i){const t=s[e]=s[e]||[],a=i[e];a.sort((e,t)=>{const i=n.featureSortOrder;if(i){const n=i.indexOf(e.featureIndex);return i.indexOf(t.featureIndex)-n}return t.featureIndex-e.featureIndex});for(const e of a)t.push(e)}}for(const t in s)s[t].forEach(i=>{const a=i.feature,o=n(e[t]);if(!o)return;const r=o.getFeatureState(a.layer["source-layer"],a.id);a.source=a.layer.source,a.layer["source-layer"]&&(a.sourceLayer=a.layer["source-layer"]),a.state=r});return s}(this._layers,this._serializedLayers,this._getLayerSourceCache.bind(this),s.screenGeometry,n,this.placement.collisionIndex,this.placement.retainedQueryData)),this._flattenAndSortRenderedFeatures(o)}querySourceFeatures(t,n){n&&n.filter&&this._validate(e.validateFilter,"querySourceFeatures.filter",n.filter,null,n);const i=this._getSourceCaches(t);let a=[];for(const e of i)a=a.concat(je(e,n));return a}addSourceType(e,t,n){return Qt.getSourceType(e)?n(new Error(`A source type called "${e}" already exists.`)):(Qt.setSourceType(e,t),t.workerSourceURL?void this.dispatcher.broadcast("loadWorkerSource",{name:e,url:t.workerSourceURL},n):n(null,null))}getLight(){return this.light.getLight()}setLight(e,n={}){this._checkLoaded();const i=this.light.getLight();let a=!1;for(const n in e)if(!t(e[n],i[n])){a=!0;break}if(!a)return;const o=this._setTransitionParameters({duration:300,delay:0});this.light.setLight(e,n),this.light.updateTransitions(o)}getTerrain(){return this.terrain&&1===this.terrain.drapeRenderMode?this.terrain.get():null}setTerrainForDraping(){this.setTerrain({source:"",exaggeration:0},0)}setTerrain(n,i=1){if(this._checkLoaded(),!n)return delete this.terrain,delete this.stylesheet.terrain,this.dispatcher.broadcast("enableTerrain",!1),this._force3DLayerUpdate(),void(this._markersNeedUpdate=!0);let a=n;if(1===i){if("object"==typeof a.source){const t="terrain-dem-src";this.addSource(t,a.source),a=e.clone$1(a),a=e.extend(a,{source:t})}if(this._validate(e.validateTerrain,"terrain",a))return}if(!this.terrain||this.terrain&&i!==this.terrain.drapeRenderMode){if(!a)return;this._createTerrain(a,i)}else{const n=this.terrain,i=n.get();for(const t of Object.keys(e.spec.terrain))!a.hasOwnProperty(t)&&e.spec.terrain[t].default&&(a[t]=e.spec.terrain[t].default);for(const e in a)if(!t(a[e],i[e])){n.set(a),this.stylesheet.terrain=a;const e=this._setTransitionParameters({duration:0});n.updateTransitions(e);break}}this._updateDrapeFirstLayers(),this._markersNeedUpdate=!0}_createFog(e){const t=this.fog=new S(e,this.map.transform);this.stylesheet.fog=e;const n=this._setTransitionParameters({duration:0});t.updateTransitions(n)}_updateMarkersOpacity(){0!==this.map._markers.length&&this.map._requestDomTask(()=>{for(const e of this.map._markers)e._evaluateOpacity()})}getFog(){return this.fog?this.fog.get():null}setFog(e){if(this._checkLoaded(),!e)return delete this.fog,delete this.stylesheet.fog,void(this._markersNeedUpdate=!0);if(this.fog){const n=this.fog,i=n.get();0===Object.keys(e).length&&n.set(e);for(const a in e)if(!t(e[a],i[a])){n.set(e),this.stylesheet.fog=e;const t=this._setTransitionParameters({duration:0});n.updateTransitions(t);break}}else this._createFog(e);this._markersNeedUpdate=!0}_setTransitionParameters(t){return{now:e.exported.now(),transition:e.extend(t,this.stylesheet.transition)}}_updateDrapeFirstLayers(){if(!this.map._optimizeForTerrain||!this.terrain)return;const e=this._order.filter(e=>this.isLayerDraped(this._layers[e])),t=this._order.filter(e=>!this.isLayerDraped(this._layers[e]));this._drapedFirstOrder=[],this._drapedFirstOrder.push(...e),this._drapedFirstOrder.push(...t)}_createTerrain(e,t){const n=this.terrain=new O(e,t);this.stylesheet.terrain=e,this.dispatcher.broadcast("enableTerrain",!this.terrainSetForDrapingOnly()),this._force3DLayerUpdate();const i=this._setTransitionParameters({duration:0});n.updateTransitions(i)}_force3DLayerUpdate(){for(const e in this._layers){const t=this._layers[e];"fill-extrusion"===t.type&&this._updateLayer(t)}}_forceSymbolLayerUpdate(){for(const e in this._layers){const t=this._layers[e];"symbol"===t.type&&this._updateLayer(t)}}_validate(t,n,i,a,o={}){return(!o||!1!==o.validate)&&Xt(this,t.call(e.validateStyle,e.extend({key:n,style:this.serialize(),value:i,styleSpec:e.spec},a)))}_remove(){this._request&&(this._request.cancel(),this._request=null),this._spriteRequest&&(this._spriteRequest.cancel(),this._spriteRequest=null),e.evented.off("pluginStateChange",this._rtlTextPluginCallback);for(const e in this._layers)this._layers[e].setEventedParent(null);for(const e in this._sourceCaches)this._sourceCaches[e].clearTiles(),this._sourceCaches[e].setEventedParent(null);this.imageManager.setEventedParent(null),this.setEventedParent(null),this.dispatcher.remove()}_clearSource(e){const t=this._getSourceCaches(e);for(const e of t)e.clearTiles()}_reloadSource(e){const t=this._getSourceCaches(e);for(const e of t)e.resume(),e.reload()}_reloadSources(){for(const e of this._getSources())e.reload&&e.reload()}_updateSources(e){for(const t in this._sourceCaches)this._sourceCaches[t].update(e)}_generateCollisionBoxes(){for(const e in this._sourceCaches){const t=this._sourceCaches[e];t.resume(),t.reload()}}_updatePlacement(t,n,i,a,o=!1){let r=!1,s=!1;const l={};for(const e of this._order){const n=this._layers[e];if("symbol"!==n.type)continue;if(!l[n.source]){const e=this._getLayerSourceCache(n);if(!e)continue;l[n.source]=e.getRenderableIds(!0).map(t=>e.getTileByID(t)).sort((e,t)=>t.tileID.overscaledZ-e.tileID.overscaledZ||(e.tileID.isLessThan(t.tileID)?-1:1))}const i=this.crossTileSymbolIndex.addLayer(n,l[n.source],t.center.lng,t.projection);r=r||i}if(this.crossTileSymbolIndex.pruneUnusedLayers(this._order),o=o||this._layerOrderChanged||0===i,this._layerOrderChanged&&this.fire(new e.Event("neworder")),(o||!this.pauseablePlacement||this.pauseablePlacement.isDone()&&!this.placement.stillRecent(e.exported.now(),t.zoom))&&(this.pauseablePlacement=new Ht(t,this._order,o,n,i,a,this.placement,this.fog&&t.projection.supportsFog?this.fog.state:null),this._layerOrderChanged=!1),this.pauseablePlacement.isDone()?this.placement.setStale():(this.pauseablePlacement.continuePlacement(this._order,this._layers,l),this.pauseablePlacement.isDone()&&(this.placement=this.pauseablePlacement.commit(e.exported.now()),s=!0),r&&this.pauseablePlacement.placement.setStale()),s||r)for(const e of this._order){const t=this._layers[e];"symbol"===t.type&&this.placement.updateLayerOpacities(t,l[t.source])}return!this.pauseablePlacement.isDone()||this.placement.hasTransitions(e.exported.now())}_releaseSymbolFadeTiles(){for(const e in this._sourceCaches)this._sourceCaches[e].releaseSymbolFadeTiles()}getImages(e,t,n){this.imageManager.getImages(t.icons,n),this._updateTilesForChangedImages();const i=e=>{e&&e.setDependencies(t.tileID.key,t.type,t.icons)};i(this._otherSourceCaches[t.source]),i(this._symbolSourceCaches[t.source])}getGlyphs(e,t,n){this.glyphManager.getGlyphs(t.stacks,n)}getResource(t,n,i){return e.makeRequest(n,i)}_getSourceCache(e){return this._otherSourceCaches[e]}_getLayerSourceCache(e){return"symbol"===e.type?this._symbolSourceCaches[e.source]:this._otherSourceCaches[e.source]}_getSourceCaches(e){const t=[];return this._otherSourceCaches[e]&&t.push(this._otherSourceCaches[e]),this._symbolSourceCaches[e]&&t.push(this._symbolSourceCaches[e]),t}_isSourceCacheLoaded(t){const n=this._getSourceCaches(t);return 0===n.length?(this.fire(new e.ErrorEvent(new Error(`There is no source with ID '${t}'`))),!1):n.every(e=>e.loaded())}has3DLayers(){return this._num3DLayers>0}hasSymbolLayers(){return this._numSymbolLayers>0}hasCircleLayers(){return this._numCircleLayers>0}_clearWorkerCaches(){this.dispatcher.broadcast("clearCaches")}destroy(){this._clearWorkerCaches(),this.terrainSetForDrapingOnly()&&(delete this.terrain,delete this.stylesheet.terrain)}}Qt.getSourceType=function(e){return Pe[e]},Qt.setSourceType=function(e,t){Pe[e]=t},Qt.registerForPluginStateChange=e.registerForPluginStateChange;var en="\n#define EPSILON 0.0000001\n#define PI 3.141592653589793\n#define EXTENT 8192.0\n#define HALF_PI PI/2.0\n#define QUARTER_PI PI/4.0\n#define RAD_TO_DEG 180.0/PI\n#define DEG_TO_RAD PI/180.0\n#define GLOBE_RADIUS EXTENT/PI/2.0",tn="attribute highp vec3 a_pos_3f;uniform lowp mat4 u_matrix;varying highp vec3 v_uv;void main() {const mat3 half_neg_pi_around_x=mat3(1.0,0.0, 0.0,0.0,0.0,-1.0,0.0,1.0, 0.0);v_uv=half_neg_pi_around_x*a_pos_3f;vec4 pos=u_matrix*vec4(a_pos_3f,1.0);gl_Position=pos.xyww;}",nn="\n#define ELEVATION_SCALE 7.0\n#define ELEVATION_OFFSET 450.0\n#ifdef PROJECTION_GLOBE_VIEW\nuniform vec3 u_tile_tl_up;uniform vec3 u_tile_tr_up;uniform vec3 u_tile_br_up;uniform vec3 u_tile_bl_up;uniform float u_tile_up_scale;vec3 elevationVector(vec2 pos) {vec2 uv=pos/EXTENT;vec3 up=normalize(mix(\nmix(u_tile_tl_up,u_tile_tr_up,uv.xxx),mix(u_tile_bl_up,u_tile_br_up,uv.xxx),uv.yyy));return up*u_tile_up_scale;}\n#else\nvec3 elevationVector(vec2 pos) { return vec3(0,0,1); }\n#endif\nconst float skirtOffset=24575.0;vec3 decomposeToPosAndSkirt(vec2 posWithComposedSkirt)\n{float skirt=float(posWithComposedSkirt.x >=skirtOffset);vec2 pos=posWithComposedSkirt-vec2(skirt*skirtOffset,0.0);return vec3(pos,skirt);}\n#ifdef TERRAIN\n#ifdef TERRAIN_DEM_FLOAT_FORMAT\nuniform highp sampler2D u_dem;uniform highp sampler2D u_dem_prev;\n#else\nuniform sampler2D u_dem;uniform sampler2D u_dem_prev;\n#endif\nuniform vec4 u_dem_unpack;uniform vec2 u_dem_tl;uniform vec2 u_dem_tl_prev;uniform float u_dem_scale;uniform float u_dem_scale_prev;uniform float u_dem_size;uniform float u_dem_lerp;uniform float u_exaggeration;uniform float u_meter_to_dem;uniform mat4 u_label_plane_matrix_inv;uniform sampler2D u_depth;uniform vec2 u_depth_size_inv;vec4 tileUvToDemSample(vec2 uv,float dem_size,float dem_scale,vec2 dem_tl) {vec2 pos=dem_size*(uv*dem_scale+dem_tl)+1.0;vec2 f=fract(pos);return vec4((pos-f+0.5)/(dem_size+2.0),f);}float decodeElevation(vec4 v) {return dot(vec4(v.xyz*255.0,-1.0),u_dem_unpack);}float currentElevation(vec2 apos) {\n#ifdef TERRAIN_DEM_FLOAT_FORMAT\nvec2 pos=(u_dem_size*(apos/8192.0*u_dem_scale+u_dem_tl)+1.5)/(u_dem_size+2.0);return u_exaggeration*texture2D(u_dem,pos).a;\n#else\nfloat dd=1.0/(u_dem_size+2.0);vec4 r=tileUvToDemSample(apos/8192.0,u_dem_size,u_dem_scale,u_dem_tl);vec2 pos=r.xy;vec2 f=r.zw;float tl=decodeElevation(texture2D(u_dem,pos));\n#ifdef TERRAIN_DEM_NEAREST_FILTER\nreturn u_exaggeration*tl;\n#endif\nfloat tr=decodeElevation(texture2D(u_dem,pos+vec2(dd,0.0)));float bl=decodeElevation(texture2D(u_dem,pos+vec2(0.0,dd)));float br=decodeElevation(texture2D(u_dem,pos+vec2(dd,dd)));return u_exaggeration*mix(mix(tl,tr,f.x),mix(bl,br,f.x),f.y);\n#endif\n}float prevElevation(vec2 apos) {\n#ifdef TERRAIN_DEM_FLOAT_FORMAT\nvec2 pos=(u_dem_size*(apos/8192.0*u_dem_scale_prev+u_dem_tl_prev)+1.5)/(u_dem_size+2.0);return u_exaggeration*texture2D(u_dem_prev,pos).a;\n#else\nfloat dd=1.0/(u_dem_size+2.0);vec4 r=tileUvToDemSample(apos/8192.0,u_dem_size,u_dem_scale_prev,u_dem_tl_prev);vec2 pos=r.xy;vec2 f=r.zw;float tl=decodeElevation(texture2D(u_dem_prev,pos));float tr=decodeElevation(texture2D(u_dem_prev,pos+vec2(dd,0.0)));float bl=decodeElevation(texture2D(u_dem_prev,pos+vec2(0.0,dd)));float br=decodeElevation(texture2D(u_dem_prev,pos+vec2(dd,dd)));return u_exaggeration*mix(mix(tl,tr,f.x),mix(bl,br,f.x),f.y);\n#endif\n}\n#ifdef TERRAIN_VERTEX_MORPHING\nfloat elevation(vec2 apos) {\n#ifdef ZERO_EXAGGERATION\nreturn 0.0;\n#endif\nfloat nextElevation=currentElevation(apos);float prevElevation=prevElevation(apos);return mix(prevElevation,nextElevation,u_dem_lerp);}\n#else\nfloat elevation(vec2 apos) {\n#ifdef ZERO_EXAGGERATION\nreturn 0.0;\n#endif\nreturn currentElevation(apos);}\n#endif\nhighp float unpack_depth(highp vec4 rgba_depth)\n{const highp vec4 bit_shift=vec4(1.0/(255.0*255.0*255.0),1.0/(255.0*255.0),1.0/255.0,1.0);return dot(rgba_depth,bit_shift)*2.0-1.0;}bool isOccluded(vec4 frag) {vec3 coord=frag.xyz/frag.w;float depth=unpack_depth(texture2D(u_depth,(coord.xy+1.0)*0.5));return coord.z > depth+0.0005;}float occlusionFade(vec4 frag) {vec3 coord=frag.xyz/frag.w;vec3 df=vec3(5.0*u_depth_size_inv,0.0);vec2 uv=0.5*coord.xy+0.5;vec4 depth=vec4(\nunpack_depth(texture2D(u_depth,uv-df.xz)),unpack_depth(texture2D(u_depth,uv+df.xz)),unpack_depth(texture2D(u_depth,uv-df.zy)),unpack_depth(texture2D(u_depth,uv+df.zy))\n);return dot(vec4(0.25),vec4(1.0)-clamp(300.0*(vec4(coord.z-0.001)-depth),0.0,1.0));}vec4 fourSample(vec2 pos,vec2 off) {\n#ifdef TERRAIN_DEM_FLOAT_FORMAT\nfloat tl=texture2D(u_dem,pos).a;float tr=texture2D(u_dem,pos+vec2(off.x,0.0)).a;float bl=texture2D(u_dem,pos+vec2(0.0,off.y)).a;float br=texture2D(u_dem,pos+off).a;\n#else\nvec4 demtl=vec4(texture2D(u_dem,pos).xyz*255.0,-1.0);float tl=dot(demtl,u_dem_unpack);vec4 demtr=vec4(texture2D(u_dem,pos+vec2(off.x,0.0)).xyz*255.0,-1.0);float tr=dot(demtr,u_dem_unpack);vec4 dembl=vec4(texture2D(u_dem,pos+vec2(0.0,off.y)).xyz*255.0,-1.0);float bl=dot(dembl,u_dem_unpack);vec4 dembr=vec4(texture2D(u_dem,pos+off).xyz*255.0,-1.0);float br=dot(dembr,u_dem_unpack);\n#endif\nreturn vec4(tl,tr,bl,br);}float flatElevation(vec2 pack) {vec2 apos=floor(pack/8.0);vec2 span=10.0*(pack-apos*8.0);vec2 uvTex=(apos-vec2(1.0,1.0))/8190.0;float size=u_dem_size+2.0;float dd=1.0/size;vec2 pos=u_dem_size*(uvTex*u_dem_scale+u_dem_tl)+1.0;vec2 f=fract(pos);pos=(pos-f+0.5)*dd;vec4 h=fourSample(pos,vec2(dd));float z=mix(mix(h.x,h.y,f.x),mix(h.z,h.w,f.x),f.y);vec2 w=floor(0.5*(span*u_meter_to_dem-1.0));vec2 d=dd*w;h=fourSample(pos-d,2.0*d+vec2(dd));vec4 diff=abs(h.xzxy-h.ywzw);vec2 slope=min(vec2(0.25),u_meter_to_dem*0.5*(diff.xz+diff.yw)/(2.0*w+vec2(1.0)));vec2 fix=slope*span;float base=z+max(fix.x,fix.y);return u_exaggeration*base;}float elevationFromUint16(float word) {return u_exaggeration*(word/ELEVATION_SCALE-ELEVATION_OFFSET);}\n#else\nfloat elevation(vec2 pos) { return 0.0; }bool isOccluded(vec4 frag) { return false; }float occlusionFade(vec4 frag) { return 1.0; }\n#endif",an="#ifdef FOG\nuniform mediump vec4 u_fog_color;uniform mediump vec2 u_fog_range;uniform mediump float u_fog_horizon_blend;uniform mediump mat4 u_fog_matrix;varying vec3 v_fog_pos;float fog_range(float depth) {return (depth-u_fog_range[0])/(u_fog_range[1]-u_fog_range[0]);}float fog_horizon_blending(vec3 camera_dir) {float t=max(0.0,camera_dir.z/u_fog_horizon_blend);return u_fog_color.a*exp(-3.0*t*t);}float fog_opacity(float t) {const float decay=6.0;float falloff=1.0-min(1.0,exp(-decay*t));falloff*=falloff*falloff;return u_fog_color.a*min(1.0,1.00747*falloff);}vec3 fog_position(vec3 pos) {return (u_fog_matrix*vec4(pos,1.0)).xyz;}vec3 fog_position(vec2 pos) {return fog_position(vec3(pos,0.0));}float fog(vec3 pos) {float depth=length(pos);float opacity=fog_opacity(fog_range(depth));return opacity*fog_horizon_blending(pos/depth);}\n#endif",on="#ifdef FOG\nuniform mediump vec4 u_fog_color;uniform mediump vec2 u_fog_range;uniform mediump float u_fog_horizon_blend;uniform mediump float u_fog_temporal_offset;varying vec3 v_fog_pos;uniform highp vec3 u_frustum_tl;uniform highp vec3 u_frustum_tr;uniform highp vec3 u_frustum_br;uniform highp vec3 u_frustum_bl;uniform highp vec3 u_globe_pos;uniform highp float u_globe_radius;uniform highp vec2 u_viewport;uniform float u_globe_transition;uniform int u_is_globe;float fog_range(float depth) {return (depth-u_fog_range[0])/(u_fog_range[1]-u_fog_range[0]);}float fog_horizon_blending(vec3 camera_dir) {float t=max(0.0,camera_dir.z/u_fog_horizon_blend);return u_fog_color.a*exp(-3.0*t*t);}float fog_opacity(float t) {const float decay=6.0;float falloff=1.0-min(1.0,exp(-decay*t));falloff*=falloff*falloff;return u_fog_color.a*min(1.0,1.00747*falloff);}float globe_glow_progress() {highp vec2 uv=gl_FragCoord.xy/u_viewport;highp vec3 ray_dir=mix(\nmix(u_frustum_tl,u_frustum_tr,uv.x),mix(u_frustum_bl,u_frustum_br,uv.x),1.0-uv.y);highp vec3 dir=normalize(ray_dir);highp vec3 closest_point=dot(u_globe_pos,dir)*dir;highp float sdf=length(closest_point-u_globe_pos)/u_globe_radius;return sdf+PI*0.5;}float fog_opacity(vec3 pos) {float depth=length(pos);return fog_opacity(fog_range(depth));}vec3 fog_apply(vec3 color,vec3 pos) {float depth=length(pos);float opacity;if (u_is_globe==1) {float glow_progress=globe_glow_progress();float t=mix(glow_progress,depth,u_globe_transition);opacity=fog_opacity(fog_range(t));} else {opacity=fog_opacity(fog_range(depth));opacity*=fog_horizon_blending(pos/depth);}return mix(color,u_fog_color.rgb,opacity);}vec4 fog_apply_from_vert(vec4 color,float fog_opac) {float alpha=EPSILON+color.a;color.rgb=mix(color.rgb/alpha,u_fog_color.rgb,fog_opac)*alpha;return color;}vec3 fog_apply_sky_gradient(vec3 camera_ray,vec3 sky_color) {float horizon_blend=fog_horizon_blending(normalize(camera_ray));return mix(sky_color,u_fog_color.rgb,horizon_blend);}vec4 fog_apply_premultiplied(vec4 color,vec3 pos) {float alpha=EPSILON+color.a;color.rgb=fog_apply(color.rgb/alpha,pos)*alpha;return color;}vec3 fog_dither(vec3 color) {vec2 dither_seed=gl_FragCoord.xy+u_fog_temporal_offset;return dither(color,dither_seed);}vec4 fog_dither(vec4 color) {return vec4(fog_dither(color.rgb),color.a);}\n#endif";let rn={},sn={};const ln=[];fn(en,ln),fn(nn,ln),fn(an,ln),fn(on,ln),rn=mn("",nn),sn=mn(on,an);const cn=mn("\n#if __VERSION__ >=300\n#define varying in\n#define gl_FragColor glFragColor\n#define texture2D texture\n#define textureCube texture\nout vec4 glFragColor;\n#endif\nhighp vec3 hash(highp vec2 p) {highp vec3 p3=fract(p.xyx*vec3(443.8975,397.2973,491.1871));p3+=dot(p3,p3.yxz+19.19);return fract((p3.xxy+p3.yzz)*p3.zyx);}vec3 dither(vec3 color,highp vec2 seed) {vec3 rnd=hash(seed)+hash(seed+0.59374)-0.5;return color+rnd/255.0;}highp float unpack_depth(highp vec4 rgba_depth)\n{const highp vec4 bit_shift=vec4(1.0/(255.0*255.0*255.0),1.0/(255.0*255.0),1.0/255.0,1.0);return dot(rgba_depth,bit_shift)*2.0-1.0;}highp vec4 pack_depth(highp float ndc_z) {highp float depth=ndc_z*0.5+0.5;const highp vec4 bit_shift=vec4(255.0*255.0*255.0,255.0*255.0,255.0,1.0);const highp vec4 bit_mask =vec4(0.0,1.0/255.0,1.0/255.0,1.0/255.0);highp vec4 res=fract(depth*bit_shift);res-=res.xxyz*bit_mask;return res;}","\n#if __VERSION__ >=300\n#define attribute in\n#define varying out\n#define texture2D texture\n#endif\nfloat wrap(float n,float min,float max) {float d=max-min;float w=mod(mod(n-min,d)+d,d)+min;return (w==min) ? max : w;}\n#ifdef PROJECTION_GLOBE_VIEW\nvec3 mercator_tile_position(mat4 matrix,vec2 tile_anchor,vec3 tile_id,vec2 mercator_center) {\n#ifndef PROJECTED_POS_ON_VIEWPORT\nfloat tiles=tile_id.z;vec2 mercator=(tile_anchor/EXTENT+tile_id.xy)/tiles;mercator-=mercator_center;mercator.x=wrap(mercator.x,-0.5,0.5);vec4 mercator_tile=vec4(mercator.xy*EXTENT,EXTENT/(2.0*PI),1.0);mercator_tile=matrix*mercator_tile;return mercator_tile.xyz;\n#else\nreturn vec3(0.0);\n#endif\n}vec3 mix_globe_mercator(vec3 globe,vec3 mercator,float t) {return mix(globe,mercator,t);}mat3 globe_mercator_surface_vectors(vec3 pos_normal,vec3 up_dir,float zoom_transition) {vec3 normal=zoom_transition==0.0 ? pos_normal : normalize(mix(pos_normal,up_dir,zoom_transition));vec3 xAxis=normalize(vec3(normal.z,0.0,-normal.x));vec3 yAxis=normalize(cross(normal,xAxis));return mat3(xAxis,yAxis,normal);}\n#endif\nvec2 unpack_float(const float packedValue) {int packedIntValue=int(packedValue);int v0=packedIntValue/256;return vec2(v0,packedIntValue-v0*256);}vec2 unpack_opacity(const float packedOpacity) {int intOpacity=int(packedOpacity)/2;return vec2(float(intOpacity)/127.0,mod(packedOpacity,2.0));}vec4 decode_color(const vec2 encodedColor) {return vec4(\nunpack_float(encodedColor[0])/255.0,unpack_float(encodedColor[1])/255.0\n);}float unpack_mix_vec2(const vec2 packedValue,const float t) {return mix(packedValue[0],packedValue[1],t);}vec4 unpack_mix_color(const vec4 packedColors,const float t) {vec4 minColor=decode_color(vec2(packedColors[0],packedColors[1]));vec4 maxColor=decode_color(vec2(packedColors[2],packedColors[3]));return mix(minColor,maxColor,t);}vec2 get_pattern_pos(const vec2 pixel_coord_upper,const vec2 pixel_coord_lower,const vec2 pattern_size,const float tile_units_to_pixels,const vec2 pos) {vec2 offset=mod(mod(mod(pixel_coord_upper,pattern_size)*256.0,pattern_size)*256.0+pixel_coord_lower,pattern_size);return (tile_units_to_pixels*pos+offset)/pattern_size;}const vec4 AWAY=vec4(-1000.0,-1000.0,-1000.0,1);//Normalized device coordinate that is not rendered."),un=en,dn="\n#ifdef GL_ES\nprecision mediump float;\n#else\n\n#if !defined(lowp)\n#define lowp\n#endif\n\n#if !defined(mediump)\n#define mediump\n#endif\n\n#if !defined(highp)\n#define highp\n#endif\n\n#endif";var pn={background:mn("uniform vec4 u_color;uniform float u_opacity;\n#ifdef LIGHTING_3D_MODE\nvarying vec4 v_color;\n#endif\nvoid main() {vec4 out_color;\n#ifdef LIGHTING_3D_MODE\nout_color=v_color;\n#else\nout_color=u_color;\n#endif\n#ifdef FOG\nout_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));\n#endif\ngl_FragColor=out_color*u_opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","attribute vec2 a_pos;uniform mat4 u_matrix;\n#ifdef LIGHTING_3D_MODE\nuniform vec4 u_color;varying vec4 v_color;\n#endif\nvoid main() {gl_Position=u_matrix*vec4(a_pos,0,1);\n#ifdef LIGHTING_3D_MODE\nv_color=apply_lighting(u_color);\n#endif\n#ifdef FOG\nv_fog_pos=fog_position(a_pos);\n#endif\n}"),backgroundPattern:mn("uniform vec2 u_pattern_tl;uniform vec2 u_pattern_br;uniform vec2 u_texsize;uniform float u_opacity;uniform sampler2D u_image;varying vec2 v_pos;void main() {vec2 imagecoord=mod(v_pos,1.0);vec2 pos=mix(u_pattern_tl/u_texsize,u_pattern_br/u_texsize,imagecoord);vec4 out_color=texture2D(u_image,pos);\n#ifdef LIGHTING_3D_MODE\nout_color=apply_lighting(out_color);\n#endif\n#ifdef FOG\nout_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));\n#endif\ngl_FragColor=out_color*u_opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_pattern_size;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_tile_units_to_pixels;attribute vec2 a_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_pattern_size,u_tile_units_to_pixels,a_pos);\n#ifdef FOG\nv_fog_pos=fog_position(a_pos);\n#endif\n}"),circle:mn("varying vec3 v_data;varying float v_visibility;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define mediump float radius\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define highp vec4 stroke_color\n#pragma mapbox: define mediump float stroke_width\n#pragma mapbox: define lowp float stroke_opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize mediump float radius\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize highp vec4 stroke_color\n#pragma mapbox: initialize mediump float stroke_width\n#pragma mapbox: initialize lowp float stroke_opacity\nvec2 extrude=v_data.xy;float extrude_length=length(extrude);lowp float antialiasblur=v_data.z;float antialiased_blur=-max(blur,antialiasblur);float opacity_t=smoothstep(0.0,antialiased_blur,extrude_length-1.0);float color_t=stroke_width < 0.01 ? 0.0 : smoothstep(\nantialiased_blur,0.0,extrude_length-radius/(radius+stroke_width)\n);vec4 out_color=mix(color*opacity,stroke_color*stroke_opacity,color_t);\n#ifdef LIGHTING_3D_MODE\nout_color=apply_lighting(out_color);\n#endif\n#ifdef FOG\nout_color=fog_apply_premultiplied(out_color,v_fog_pos);\n#endif\ngl_FragColor=out_color*(v_visibility*opacity_t);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","#define NUM_VISIBILITY_RINGS 2\n#define INV_SQRT2 0.70710678\n#define ELEVATION_BIAS 0.0001\n#define NUM_SAMPLES_PER_RING 16\nuniform mat4 u_matrix;uniform mat2 u_extrude_scale;uniform lowp float u_device_pixel_ratio;uniform highp float u_camera_to_center_distance;attribute vec2 a_pos;\n#ifdef PROJECTION_GLOBE_VIEW\nattribute vec3 a_pos_3;attribute vec3 a_pos_normal_3;uniform mat4 u_inv_rot_matrix;uniform vec2 u_merc_center;uniform vec3 u_tile_id;uniform float u_zoom_transition;uniform vec3 u_up_dir;\n#endif\nvarying vec3 v_data;varying float v_visibility;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define mediump float radius\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define highp vec4 stroke_color\n#pragma mapbox: define mediump float stroke_width\n#pragma mapbox: define lowp float stroke_opacity\nvec2 calc_offset(vec2 extrusion,float radius,float stroke_width, float view_scale) {return extrusion*(radius+stroke_width)*u_extrude_scale*view_scale;}float cantilevered_elevation(vec2 pos,float radius,float stroke_width,float view_scale) {vec2 c1=pos+calc_offset(vec2(-1,-1),radius,stroke_width,view_scale);vec2 c2=pos+calc_offset(vec2(1,-1),radius,stroke_width,view_scale);vec2 c3=pos+calc_offset(vec2(1,1),radius,stroke_width,view_scale);vec2 c4=pos+calc_offset(vec2(-1,1),radius,stroke_width,view_scale);float h1=elevation(c1)+ELEVATION_BIAS;float h2=elevation(c2)+ELEVATION_BIAS;float h3=elevation(c3)+ELEVATION_BIAS;float h4=elevation(c4)+ELEVATION_BIAS;return max(h4,max(h3,max(h1,h2)));}float circle_elevation(vec2 pos) {\n#if defined(TERRAIN)\nreturn elevation(pos)+ELEVATION_BIAS;\n#else\nreturn 0.0;\n#endif\n}vec4 project_vertex(vec2 extrusion,vec4 world_center,vec4 projected_center,float radius,float stroke_width, float view_scale,mat3 surface_vectors) {vec2 sample_offset=calc_offset(extrusion,radius,stroke_width,view_scale);\n#ifdef PITCH_WITH_MAP\n#ifdef PROJECTION_GLOBE_VIEW\nreturn u_matrix*( world_center+vec4(sample_offset.x*surface_vectors[0]+sample_offset.y*surface_vectors[1],0) );\n#else\nreturn u_matrix*( world_center+vec4(sample_offset,0,0) );\n#endif\n#else\nreturn projected_center+vec4(sample_offset,0,0);\n#endif\n}float get_sample_step() {\n#ifdef PITCH_WITH_MAP\nreturn 2.0*PI/float(NUM_SAMPLES_PER_RING);\n#else\nreturn PI/float(NUM_SAMPLES_PER_RING);\n#endif\n}void main(void) {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize mediump float radius\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize highp vec4 stroke_color\n#pragma mapbox: initialize mediump float stroke_width\n#pragma mapbox: initialize lowp float stroke_opacity\nvec2 extrude=vec2(mod(a_pos,2.0)*2.0-1.0);vec2 circle_center=floor(a_pos*0.5);vec4 world_center;mat3 surface_vectors;\n#ifdef PROJECTION_GLOBE_VIEW\nvec3 pos_normal_3=a_pos_normal_3/16384.0;surface_vectors=globe_mercator_surface_vectors(pos_normal_3,u_up_dir,u_zoom_transition);vec3 surface_extrusion=extrude.x*surface_vectors[0]+extrude.y*surface_vectors[1];vec3 globe_elevation=elevationVector(circle_center)*circle_elevation(circle_center);vec3 globe_pos=a_pos_3+surface_extrusion+globe_elevation;vec3 mercator_elevation=u_up_dir*u_tile_up_scale*circle_elevation(circle_center);vec3 merc_pos=mercator_tile_position(u_inv_rot_matrix,circle_center,u_tile_id,u_merc_center)+surface_extrusion+mercator_elevation;vec3 pos=mix_globe_mercator(globe_pos,merc_pos,u_zoom_transition);world_center=vec4(pos,1);\n#else \nsurface_vectors=mat3(1.0);float height=circle_elevation(circle_center);world_center=vec4(circle_center,height,1);\n#endif\nvec4 projected_center=u_matrix*world_center;float view_scale=0.0;\n#ifdef PITCH_WITH_MAP\n#ifdef SCALE_WITH_MAP\nview_scale=1.0;\n#else\nview_scale=projected_center.w/u_camera_to_center_distance;\n#endif\n#else\n#ifdef SCALE_WITH_MAP\nview_scale=u_camera_to_center_distance;\n#else\nview_scale=projected_center.w;\n#endif\n#endif\ngl_Position=project_vertex(extrude,world_center,projected_center,radius,stroke_width,view_scale,surface_vectors);float visibility=0.0;\n#ifdef TERRAIN\nfloat step=get_sample_step();vec4 occlusion_world_center;vec4 occlusion_projected_center;\n#ifdef PITCH_WITH_MAP\nfloat cantilevered_height=cantilevered_elevation(circle_center,radius,stroke_width,view_scale);occlusion_world_center=vec4(circle_center,cantilevered_height,1);occlusion_projected_center=u_matrix*occlusion_world_center;\n#else\nocclusion_world_center=world_center;occlusion_projected_center=projected_center;\n#endif\nfor(int ring=0; ring < NUM_VISIBILITY_RINGS; ring++) {float scale=(float(ring)+1.0)/float(NUM_VISIBILITY_RINGS);for(int i=0; i < NUM_SAMPLES_PER_RING; i++) {vec2 extrusion=vec2(cos(step*float(i)),-sin(step*float(i)))*scale;vec4 frag_pos=project_vertex(extrusion,occlusion_world_center,occlusion_projected_center,radius,stroke_width,view_scale,surface_vectors);visibility+=float(!isOccluded(frag_pos));}}visibility/=float(NUM_VISIBILITY_RINGS)*float(NUM_SAMPLES_PER_RING);\n#else\nvisibility=1.0;\n#endif\n#ifdef PROJECTION_GLOBE_VIEW\nvisibility=1.0;\n#endif\nv_visibility=visibility;lowp float antialiasblur=1.0/u_device_pixel_ratio/(radius+stroke_width);v_data=vec3(extrude.x,extrude.y,antialiasblur);\n#ifdef FOG\nv_fog_pos=fog_position(world_center.xyz);\n#endif\n}"),clippingMask:mn("void main() {gl_FragColor=vec4(1.0);}","attribute vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);}"),heatmap:mn("uniform highp float u_intensity;varying vec2 v_extrude;\n#pragma mapbox: define highp float weight\n#define GAUSS_COEF 0.3989422804014327\nvoid main() {\n#pragma mapbox: initialize highp float weight\nfloat d=-0.5*3.0*3.0*dot(v_extrude,v_extrude);float val=weight*u_intensity*GAUSS_COEF*exp(d);gl_FragColor=vec4(val,1.0,1.0,1.0);\n#ifdef FOG\nif (u_is_globe==0) {gl_FragColor.r*=pow(1.0-fog_opacity(v_fog_pos),2.0);}\n#endif\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform float u_extrude_scale;uniform float u_opacity;uniform float u_intensity;attribute vec2 a_pos;\n#ifdef PROJECTION_GLOBE_VIEW\nattribute vec3 a_pos_3;attribute vec3 a_pos_normal_3;uniform mat4 u_inv_rot_matrix;uniform vec2 u_merc_center;uniform vec3 u_tile_id;uniform float u_zoom_transition;uniform vec3 u_up_dir;\n#endif\nvarying vec2 v_extrude;\n#pragma mapbox: define highp float weight\n#pragma mapbox: define mediump float radius\nconst highp float ZERO=1.0/255.0/16.0;\n#define GAUSS_COEF 0.3989422804014327\nvoid main(void) {\n#pragma mapbox: initialize highp float weight\n#pragma mapbox: initialize mediump float radius\nvec2 unscaled_extrude=vec2(mod(a_pos,2.0)*2.0-1.0);float S=sqrt(-2.0*log(ZERO/weight/u_intensity/GAUSS_COEF))/3.0;v_extrude=S*unscaled_extrude;vec2 extrude=v_extrude*radius*u_extrude_scale;vec2 tilePos=floor(a_pos*0.5);vec3 pos;\n#ifdef PROJECTION_GLOBE_VIEW\nvec3 pos_normal_3=a_pos_normal_3/16384.0;mat3 surface_vectors=globe_mercator_surface_vectors(pos_normal_3,u_up_dir,u_zoom_transition);vec3 surface_extrusion=extrude.x*surface_vectors[0]+extrude.y*surface_vectors[1];vec3 globe_elevation=elevationVector(tilePos)*elevation(tilePos);vec3 globe_pos=a_pos_3+surface_extrusion+globe_elevation;vec3 mercator_elevation=u_up_dir*u_tile_up_scale*elevation(tilePos);vec3 merc_pos=mercator_tile_position(u_inv_rot_matrix,tilePos,u_tile_id,u_merc_center)+surface_extrusion+mercator_elevation;pos=mix_globe_mercator(globe_pos,merc_pos,u_zoom_transition);\n#else\npos=vec3(tilePos+extrude,elevation(tilePos));\n#endif\ngl_Position=u_matrix*vec4(pos,1);\n#ifdef FOG\nv_fog_pos=fog_position(pos);\n#endif\n}"),heatmapTexture:mn("uniform sampler2D u_image;uniform sampler2D u_color_ramp;uniform float u_opacity;varying vec2 v_pos;void main() {float t=texture2D(u_image,v_pos).r;vec4 color=texture2D(u_color_ramp,vec2(t,0.5));gl_FragColor=color*u_opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(0.0);\n#endif\n}","attribute vec2 a_pos;varying vec2 v_pos;void main() {gl_Position=vec4(a_pos,0,1);v_pos=a_pos*0.5+0.5;}"),collisionBox:mn("varying float v_placed;varying float v_notUsed;void main() {vec4 red =vec4(1.0,0.0,0.0,1.0);vec4 blue=vec4(0.0,0.0,1.0,0.5);gl_FragColor =mix(red,blue,step(0.5,v_placed))*0.5;gl_FragColor*=mix(1.0,0.1,step(0.5,v_notUsed));}","attribute vec3 a_pos;attribute vec2 a_anchor_pos;attribute vec2 a_extrude;attribute vec2 a_placed;attribute vec2 a_shift;attribute float a_size_scale;attribute vec2 a_padding;uniform mat4 u_matrix;uniform vec2 u_extrude_scale;uniform float u_camera_to_center_distance;varying float v_placed;varying float v_notUsed;void main() {vec4 projectedPoint=u_matrix*vec4(a_pos+elevationVector(a_anchor_pos)*elevation(a_anchor_pos),1);highp float camera_to_anchor_distance=projectedPoint.w;highp float collision_perspective_ratio=clamp(\n0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,1.5);gl_Position=projectedPoint;gl_Position.xy+=(a_extrude*a_size_scale+a_shift+a_padding)*u_extrude_scale*gl_Position.w*collision_perspective_ratio;v_placed=a_placed.x;v_notUsed=a_placed.y;}"),collisionCircle:mn("varying float v_radius;varying vec2 v_extrude;varying float v_perspective_ratio;varying float v_collision;void main() {float alpha=0.5*min(v_perspective_ratio,1.0);float stroke_radius=0.9*max(v_perspective_ratio,1.0);float distance_to_center=length(v_extrude);float distance_to_edge=abs(distance_to_center-v_radius);float opacity_t=smoothstep(-stroke_radius,0.0,-distance_to_edge);vec4 color=mix(vec4(0.0,0.0,1.0,0.5),vec4(1.0,0.0,0.0,1.0),v_collision);gl_FragColor=color*alpha*opacity_t;}","attribute vec2 a_pos_2f;attribute float a_radius;attribute vec2 a_flags;uniform mat4 u_matrix;uniform mat4 u_inv_matrix;uniform vec2 u_viewport_size;uniform float u_camera_to_center_distance;varying float v_radius;varying vec2 v_extrude;varying float v_perspective_ratio;varying float v_collision;vec3 toTilePosition(vec2 screenPos) {vec4 rayStart=u_inv_matrix*vec4(screenPos,-1.0,1.0);vec4 rayEnd  =u_inv_matrix*vec4(screenPos, 1.0,1.0);rayStart.xyz/=rayStart.w;rayEnd.xyz  /=rayEnd.w;highp float t=(0.0-rayStart.z)/(rayEnd.z-rayStart.z);return mix(rayStart.xyz,rayEnd.xyz,t);}void main() {vec2 quadCenterPos=a_pos_2f;float radius=a_radius;float collision=a_flags.x;float vertexIdx=a_flags.y;vec2 quadVertexOffset=vec2(\nmix(-1.0,1.0,float(vertexIdx >=2.0)),mix(-1.0,1.0,float(vertexIdx >=1.0 && vertexIdx <=2.0)));vec2 quadVertexExtent=quadVertexOffset*radius;vec3 tilePos=toTilePosition(quadCenterPos);vec4 clipPos=u_matrix*vec4(tilePos,1.0);highp float camera_to_anchor_distance=clipPos.w;highp float collision_perspective_ratio=clamp(\n0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,4.0);float padding_factor=1.2;v_radius=radius;v_extrude=quadVertexExtent*padding_factor;v_perspective_ratio=collision_perspective_ratio;v_collision=collision;gl_Position=vec4(clipPos.xyz/clipPos.w,1.0)+vec4(quadVertexExtent*padding_factor/u_viewport_size*2.0,0.0,0.0);}"),debug:mn("uniform highp vec4 u_color;uniform sampler2D u_overlay;varying vec2 v_uv;void main() {vec4 overlay_color=texture2D(u_overlay,v_uv);gl_FragColor=mix(u_color,overlay_color,overlay_color.a);}","attribute vec2 a_pos;\n#ifdef PROJECTION_GLOBE_VIEW\nattribute vec3 a_pos_3;\n#endif\nvarying vec2 v_uv;uniform mat4 u_matrix;uniform float u_overlay_scale;void main() {float h=elevation(a_pos);v_uv=a_pos/8192.0;\n#ifdef PROJECTION_GLOBE_VIEW\ngl_Position=u_matrix*vec4(a_pos_3+elevationVector(a_pos)*h,1);\n#else\ngl_Position=u_matrix*vec4(a_pos*u_overlay_scale,h,1);\n#endif\n}"),fill:mn("#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float opacity\nvec4 out_color=color;\n#ifdef LIGHTING_3D_MODE\nout_color=apply_lighting(out_color);\n#endif\n#ifdef FOG\nout_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));\n#endif\ngl_FragColor=out_color*opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","attribute vec2 a_pos;uniform mat4 u_matrix;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float opacity\ngl_Position=u_matrix*vec4(a_pos,0,1);\n#ifdef FOG\nv_fog_pos=fog_position(a_pos);\n#endif\n}"),fillOutline:mn("varying vec2 v_pos;\n#pragma mapbox: define highp vec4 outline_color\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 outline_color\n#pragma mapbox: initialize lowp float opacity\nfloat dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);vec4 out_color=outline_color;\n#ifdef LIGHTING_3D_MODE\nout_color=apply_lighting(out_color);\n#endif\n#ifdef FOG\nout_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));\n#endif\ngl_FragColor=out_color*(alpha*opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","attribute vec2 a_pos;uniform mat4 u_matrix;uniform vec2 u_world;varying vec2 v_pos;\n#pragma mapbox: define highp vec4 outline_color\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 outline_color\n#pragma mapbox: initialize lowp float opacity\ngl_Position=u_matrix*vec4(a_pos,0,1);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;\n#ifdef FOG\nv_fog_pos=fog_position(a_pos);\n#endif\n}"),fillOutlinePattern:mn("uniform vec2 u_texsize;uniform sampler2D u_image;varying vec2 v_pos;varying vec2 v_pos_world;\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp vec4 pattern\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump vec4 pattern\nvec2 pattern_tl=pattern.xy;vec2 pattern_br=pattern.zw;vec2 imagecoord=mod(v_pos,1.0);vec2 pos=mix(pattern_tl/u_texsize,pattern_br/u_texsize,imagecoord);float dist=length(v_pos_world-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);vec4 out_color=texture2D(u_image,pos);\n#ifdef LIGHTING_3D_MODE\nout_color=apply_lighting(out_color);\n#endif\n#ifdef FOG\nout_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));\n#endif\ngl_FragColor=out_color*(alpha*opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_world;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_tile_units_to_pixels;attribute vec2 a_pos;varying vec2 v_pos;varying vec2 v_pos_world;\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp vec4 pattern\n#pragma mapbox: define lowp float pixel_ratio\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump vec4 pattern\n#pragma mapbox: initialize lowp float pixel_ratio\nvec2 pattern_tl=pattern.xy;vec2 pattern_br=pattern.zw;gl_Position=u_matrix*vec4(a_pos,0,1);vec2 display_size=(pattern_br-pattern_tl)/pixel_ratio;v_pos=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,display_size,u_tile_units_to_pixels,a_pos);v_pos_world=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;\n#ifdef FOG\nv_fog_pos=fog_position(a_pos);\n#endif\n}"),fillPattern:mn("uniform vec2 u_texsize;uniform sampler2D u_image;varying vec2 v_pos;\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp vec4 pattern\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump vec4 pattern\nvec2 pattern_tl=pattern.xy;vec2 pattern_br=pattern.zw;vec2 imagecoord=mod(v_pos,1.0);vec2 pos=mix(pattern_tl/u_texsize,pattern_br/u_texsize,imagecoord);vec4 out_color=texture2D(u_image,pos);\n#ifdef LIGHTING_3D_MODE\nout_color=apply_lighting(out_color);\n#endif\n#ifdef FOG\nout_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));\n#endif\ngl_FragColor=out_color*opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_tile_units_to_pixels;attribute vec2 a_pos;varying vec2 v_pos;\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp vec4 pattern\n#pragma mapbox: define lowp float pixel_ratio\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump vec4 pattern\n#pragma mapbox: initialize lowp float pixel_ratio\nvec2 pattern_tl=pattern.xy;vec2 pattern_br=pattern.zw;vec2 display_size=(pattern_br-pattern_tl)/pixel_ratio;gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,display_size,u_tile_units_to_pixels,a_pos);\n#ifdef FOG\nv_fog_pos=fog_position(a_pos);\n#endif\n}"),fillExtrusion:mn("varying vec4 v_color;\n#ifdef RENDER_SHADOWS\nvarying highp vec4 v_pos_light_view_0;varying highp vec4 v_pos_light_view_1;varying float v_depth;\n#endif\n#ifdef FAUX_AO\nuniform lowp vec2 u_ao;varying vec3 v_ao;\n#endif\n#ifdef ZERO_ROOF_RADIUS\nvarying vec4 v_roof_color;\n#endif\n#if defined(ZERO_ROOF_RADIUS) || defined(RENDER_SHADOWS)\nvarying highp vec3 v_normal;\n#endif\nvoid main() {\n#if defined(ZERO_ROOF_RADIUS) || defined(RENDER_SHADOWS)\nvec3 normal=v_normal;\n#endif\nfloat z;vec4 color;\n#ifdef ZERO_ROOF_RADIUS\nz=float(normal.z > 0.00001);color=mix(v_color,v_roof_color,z);\n#else\ncolor=v_color;\n#endif\n#ifdef FAUX_AO\nfloat intensity=u_ao[0];float h=max(0.0,v_ao.z);float h_floors=h/u_ao[1];float y_shade=1.0-0.9*intensity*min(v_ao.y,1.0);float shade=(1.0-0.08*intensity)*(y_shade+(1.0-y_shade)*(1.0-pow(1.0-min(h_floors/16.0,1.0),16.0)))+0.08*intensity*min(h_floors/160.0,1.0);float concave=v_ao.x*v_ao.x;\n#ifdef ZERO_ROOF_RADIUS\nconcave*=(1.0-z);\n#endif\nfloat x_shade=mix(1.0,mix(0.6,0.75,min(h_floors/30.0,1.0)),intensity)+0.1*intensity*min(h,1.0);shade*=mix(1.0,x_shade*x_shade*x_shade,concave);color.rgb=color.rgb*shade;\n#endif\n#ifdef RENDER_SHADOWS\n#ifdef ZERO_ROOF_RADIUS\nnormal=mix(normal,vec3(0.0,0.0,1.0),z);\n#endif\ncolor.xyz=shadowed_color_normal(color.xyz,normalize(normal),v_pos_light_view_0,v_pos_light_view_1,v_depth);\n#endif\n#ifdef FOG\ncolor=fog_dither(fog_apply_premultiplied(color,v_fog_pos));\n#endif\ngl_FragColor=color;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;uniform float u_vertical_gradient;uniform lowp float u_opacity;uniform float u_edge_radius;attribute vec4 a_pos_normal_ed;attribute vec2 a_centroid_pos;\n#ifdef PROJECTION_GLOBE_VIEW\nattribute vec3 a_pos_3;attribute vec3 a_pos_normal_3;uniform mat4 u_inv_rot_matrix;uniform vec2 u_merc_center;uniform vec3 u_tile_id;uniform float u_zoom_transition;uniform vec3 u_up_dir;uniform float u_height_lift;\n#endif\nvarying vec4 v_color;\n#ifdef RENDER_SHADOWS\nuniform mat4 u_light_matrix_0;uniform mat4 u_light_matrix_1;varying highp vec4 v_pos_light_view_0;varying highp vec4 v_pos_light_view_1;varying float v_depth;\n#endif\n#ifdef ZERO_ROOF_RADIUS\nvarying vec4 v_roof_color;\n#endif\n#if defined(ZERO_ROOF_RADIUS) || defined(RENDER_SHADOWS)\nvarying highp vec3 v_normal;\n#endif\n#ifdef FAUX_AO\nuniform lowp vec2 u_ao;varying vec3 v_ao;\n#endif\n#pragma mapbox: define highp float base\n#pragma mapbox: define highp float height\n#pragma mapbox: define highp vec4 color\nvoid main() {\n#pragma mapbox: initialize highp float base\n#pragma mapbox: initialize highp float height\n#pragma mapbox: initialize highp vec4 color\nvec4 pos_nx=floor(a_pos_normal_ed*0.5);vec4 top_up_ny_start=a_pos_normal_ed-2.0*pos_nx;vec3 top_up_ny=top_up_ny_start.xyz;float x_normal=pos_nx.z/8192.0;vec3 normal=top_up_ny.y==1.0 ? vec3(0.0,0.0,1.0) : normalize(vec3(x_normal,(2.0*top_up_ny.z-1.0)*(1.0-abs(x_normal)),0.0));\n#if defined(ZERO_ROOF_RADIUS) || defined(RENDER_SHADOWS)\nv_normal=normal;\n#endif\nbase=max(0.0,base);height=max(0.0,top_up_ny.y==0.0 && top_up_ny.x==1.0 ? height-u_edge_radius : height);float t=top_up_ny.x;vec2 centroid_pos=vec2(0.0);\n#if defined(HAS_CENTROID) || defined(TERRAIN)\ncentroid_pos=a_centroid_pos;\n#endif\nfloat ele=0.0;float h=0.0;float c_ele;vec3 pos;\n#ifdef TERRAIN\nbool flat_roof=centroid_pos.x !=0.0 && t > 0.0;ele=elevation(pos_nx.xy);c_ele=flat_roof ? centroid_pos.y==0.0 ? elevationFromUint16(centroid_pos.x) : flatElevation(centroid_pos) : ele;h=flat_roof ? max(c_ele+height,ele+base+2.0) : ele+(t > 0.0 ? height : base==0.0 ?-5.0 : base);pos=vec3(pos_nx.xy,h);\n#else\nh=t > 0.0 ? height : base;pos=vec3(pos_nx.xy,h);\n#endif\n#ifdef PROJECTION_GLOBE_VIEW\nfloat lift=float((t+base) > 0.0)*u_height_lift;h+=lift;vec3 globe_normal=normalize(mix(a_pos_normal_3/16384.0,u_up_dir,u_zoom_transition));vec3 globe_pos=a_pos_3+globe_normal*(u_tile_up_scale*h);vec3 merc_pos=mercator_tile_position(u_inv_rot_matrix,pos.xy,u_tile_id,u_merc_center)+u_up_dir*u_tile_up_scale*pos.z;pos=mix_globe_mercator(globe_pos,merc_pos,u_zoom_transition);\n#endif\nfloat hidden=float(centroid_pos.x==0.0 && centroid_pos.y==1.0);gl_Position=mix(u_matrix*vec4(pos,1),AWAY,hidden);\n#ifdef RENDER_SHADOWS\nv_pos_light_view_0=u_light_matrix_0*vec4(pos,1);v_pos_light_view_1=u_light_matrix_1*vec4(pos,1);v_depth=gl_Position.w;\n#endif\nfloat NdotL=0.0;float colorvalue=0.0;\n#ifdef LIGHTING_3D_MODE\nNdotL=calculate_NdotL(normal);\n#else\ncolorvalue=color.r*0.2126+color.g*0.7152+color.b*0.0722;vec4 ambientlight=vec4(0.03,0.03,0.03,1.0);color+=ambientlight;NdotL=clamp(dot(normal,u_lightpos),0.0,1.0);NdotL=mix((1.0-u_lightintensity),max((1.0-colorvalue+u_lightintensity),1.0),NdotL);\n#endif\nif (normal.y !=0.0) {float r=0.84;\n#ifndef LIGHTING_3D_MODE\nr=mix(0.7,0.98,1.0-u_lightintensity);\n#endif\nNdotL*=(\n(1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),r,1.0)));}v_color=vec4(0.0,0.0,0.0,1.0);\n#ifdef FAUX_AO\nfloat concave=pos_nx.w-floor(pos_nx.w*0.5)*2.0;float start=top_up_ny_start.w;float y_ground=1.0-clamp(t+base,0.0,1.0);float top_height=height;\n#ifdef TERRAIN\ntop_height=mix(max(c_ele+height,ele+base+2.0),ele+height,float(centroid_pos.x==0.0))-ele;y_ground+=y_ground*5.0/max(3.0,top_height);\n#endif\nv_ao=vec3(mix(concave,-concave,start),y_ground,h-ele);NdotL*=(1.0+0.05*(1.0-top_up_ny.y)*u_ao[0]);\n#ifdef PROJECTION_GLOBE_VIEW\ntop_height+=u_height_lift;\n#endif\ngl_Position.z-=(0.0000006*(min(top_height,500.)+2.0*min(base,500.0)+60.0*concave+3.0*start))*gl_Position.w;\n#endif\n#ifdef LIGHTING_3D_MODE\nv_color=apply_lighting(color,NdotL);\n#else\nv_color.rgb+=clamp(color.rgb*NdotL*u_lightcolor,mix(vec3(0.0),vec3(0.3),1.0-u_lightcolor),vec3(1.0));\n#endif\nv_color*=u_opacity;\n#ifdef ZERO_ROOF_RADIUS\nv_roof_color=vec4(0.0,0.0,0.0,1.0);\n#ifdef LIGHTING_3D_MODE\nv_roof_color=apply_lighting(color,calculate_NdotL(vec3(0.0,0.0,1.0)));\n#else\nfloat roofNdotL=clamp(u_lightpos.z,0.0,1.0);roofNdotL=mix((1.0-u_lightintensity),max((1.0-colorvalue+u_lightintensity),1.0),roofNdotL);v_roof_color.rgb+=clamp(color.rgb*roofNdotL*u_lightcolor,mix(vec3(0.0),vec3(0.3),1.0-u_lightcolor),vec3(1.0));\n#endif\nv_roof_color*=u_opacity;\n#endif\n#ifdef FOG\nv_fog_pos=fog_position(pos);\n#endif\n}"),fillExtrusionPattern:mn("uniform vec2 u_texsize;uniform sampler2D u_image;\n#ifdef FAUX_AO\nuniform lowp vec2 u_ao;varying vec3 v_ao;\n#endif\n#ifdef LIGHTING_3D_MODE\nvarying float v_NdotL;\n#endif\nvarying vec2 v_pos;varying vec4 v_lighting;uniform lowp float u_opacity;\n#pragma mapbox: define lowp float base\n#pragma mapbox: define lowp float height\n#pragma mapbox: define lowp vec4 pattern\n#pragma mapbox: define lowp float pixel_ratio\nvoid main() {\n#pragma mapbox: initialize lowp float base\n#pragma mapbox: initialize lowp float height\n#pragma mapbox: initialize mediump vec4 pattern\n#pragma mapbox: initialize lowp float pixel_ratio\nvec2 pattern_tl=pattern.xy;vec2 pattern_br=pattern.zw;vec2 imagecoord=mod(v_pos,1.0);vec2 pos=mix(pattern_tl/u_texsize,pattern_br/u_texsize,imagecoord);vec4 out_color=texture2D(u_image,pos);\n#ifdef LIGHTING_3D_MODE\nout_color=apply_lighting(out_color,v_NdotL)*u_opacity;\n#else\nout_color=out_color*v_lighting;\n#endif\n#ifdef FAUX_AO\nfloat intensity=u_ao[0];float h=max(0.0,v_ao.z);float h_floors=h/u_ao[1];float y_shade=1.0-0.9*intensity*min(v_ao.y,1.0);float shade=(1.0-0.08*intensity)*(y_shade+(1.0-y_shade)*(1.0-pow(1.0-min(h_floors/16.0,1.0),16.0)))+0.08*intensity*min(h_floors/160.0,1.0);float concave=v_ao.x*v_ao.x;float x_shade=mix(1.0,mix(0.6,0.75,min(h_floors/30.0,1.0)),intensity)+0.1*intensity*min(h,1.0);shade*=mix(1.0,x_shade*x_shade*x_shade,concave);out_color.rgb=out_color.rgb*shade;\n#endif\n#ifdef FOG\nout_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));\n#endif\ngl_FragColor=out_color;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_height_factor;uniform float u_tile_units_to_pixels;uniform float u_vertical_gradient;uniform lowp float u_opacity;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;attribute vec4 a_pos_normal_ed;attribute vec2 a_centroid_pos;\n#ifdef PROJECTION_GLOBE_VIEW\nattribute vec3 a_pos_3;attribute vec3 a_pos_normal_3;uniform mat4 u_inv_rot_matrix;uniform vec2 u_merc_center;uniform vec3 u_tile_id;uniform float u_zoom_transition;uniform vec3 u_up_dir;uniform float u_height_lift;\n#endif\nvarying vec2 v_pos;varying vec4 v_lighting;\n#ifdef FAUX_AO\nuniform lowp vec2 u_ao;varying vec3 v_ao;\n#endif\n#ifdef LIGHTING_3D_MODE\nvarying float v_NdotL;\n#endif\n#pragma mapbox: define lowp float base\n#pragma mapbox: define lowp float height\n#pragma mapbox: define lowp vec4 pattern\n#pragma mapbox: define lowp float pixel_ratio\nvoid main() {\n#pragma mapbox: initialize lowp float base\n#pragma mapbox: initialize lowp float height\n#pragma mapbox: initialize mediump vec4 pattern\n#pragma mapbox: initialize lowp float pixel_ratio\nvec2 pattern_tl=pattern.xy;vec2 pattern_br=pattern.zw;vec4 pos_nx=floor(a_pos_normal_ed*0.5);mediump vec4 top_up_ny_start=a_pos_normal_ed-2.0*pos_nx;mediump vec3 top_up_ny=top_up_ny_start.xyz;float x_normal=pos_nx.z/8192.0;vec3 normal=top_up_ny.y==1.0 ? vec3(0.0,0.0,1.0) : normalize(vec3(x_normal,(2.0*top_up_ny.z-1.0)*(1.0-abs(x_normal)),0.0));float edgedistance=a_pos_normal_ed.w;vec2 display_size=(pattern_br-pattern_tl)/pixel_ratio;base=max(0.0,base);height=max(0.0,height);float t=top_up_ny.x;float z=t > 0.0 ? height : base;vec2 centroid_pos=vec2(0.0);\n#if defined(HAS_CENTROID) || defined(TERRAIN)\ncentroid_pos=a_centroid_pos;\n#endif\nfloat ele=0.0;float h=z;vec3 p;float c_ele;\n#ifdef TERRAIN\nbool flat_roof=centroid_pos.x !=0.0 && t > 0.0;ele=elevation(pos_nx.xy);c_ele=flat_roof ? centroid_pos.y==0.0 ? elevationFromUint16(centroid_pos.x) : flatElevation(centroid_pos) : ele;h=flat_roof ? max(c_ele+height,ele+base+2.0) : ele+(t > 0.0 ? height : base==0.0 ?-5.0 : base);p=vec3(pos_nx.xy,h);\n#else\np=vec3(pos_nx.xy,z);\n#endif\n#ifdef PROJECTION_GLOBE_VIEW\nfloat lift=float((t+base) > 0.0)*u_height_lift;h+=lift;vec3 globe_normal=normalize(mix(a_pos_normal_3/16384.0,u_up_dir,u_zoom_transition));vec3 globe_pos=a_pos_3+globe_normal*(u_tile_up_scale*(p.z+lift));vec3 merc_pos=mercator_tile_position(u_inv_rot_matrix,p.xy,u_tile_id,u_merc_center)+u_up_dir*u_tile_up_scale*p.z;p=mix_globe_mercator(globe_pos,merc_pos,u_zoom_transition);\n#endif\nfloat hidden=float(centroid_pos.x==0.0 && centroid_pos.y==1.0);gl_Position=mix(u_matrix*vec4(p,1),AWAY,hidden);vec2 pos=normal.z==1.0\n? pos_nx.xy\n: vec2(edgedistance,z*u_height_factor);v_pos=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,display_size,u_tile_units_to_pixels,pos);v_lighting=vec4(0.0,0.0,0.0,1.0);float NdotL=0.0;\n#ifdef LIGHTING_3D_MODE\nNdotL=calculate_NdotL(normal);\n#else\nNdotL=clamp(dot(normal,u_lightpos),0.0,1.0);NdotL=mix((1.0-u_lightintensity),max((0.5+u_lightintensity),1.0),NdotL);\n#endif\nif (normal.y !=0.0) {float r=0.84;\n#ifndef LIGHTING_3D_MODE\nr=mix(0.7,0.98,1.0-u_lightintensity);\n#endif\nNdotL*=(\n(1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),r,1.0)));}\n#ifdef FAUX_AO\nfloat concave=pos_nx.w-floor(pos_nx.w*0.5)*2.0;float start=top_up_ny_start.w;float y_ground=1.0-clamp(t+base,0.0,1.0);float top_height=height;\n#ifdef TERRAIN\ntop_height=mix(max(c_ele+height,ele+base+2.0),ele+height,float(centroid_pos.x==0.0))-ele;y_ground+=y_ground*5.0/max(3.0,top_height);\n#endif\nv_ao=vec3(mix(concave,-concave,start),y_ground,h-ele);NdotL*=(1.0+0.05*(1.0-top_up_ny.y)*u_ao[0]);\n#ifdef PROJECTION_GLOBE_VIEW\ntop_height+=u_height_lift;\n#endif\ngl_Position.z-=(0.0000006*(min(top_height,500.)+2.0*min(base,500.0)+60.0*concave+3.0*start))*gl_Position.w;\n#endif\n#ifdef LIGHTING_3D_MODE\nv_NdotL=NdotL;\n#else\nv_lighting.rgb+=clamp(NdotL*u_lightcolor,mix(vec3(0.0),vec3(0.3),1.0-u_lightcolor),vec3(1.0));v_lighting*=u_opacity;\n#endif \n#ifdef FOG\nv_fog_pos=fog_position(p);\n#endif\n}"),hillshadePrepare:mn("#ifdef GL_ES\nprecision highp float;\n#endif\nuniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_dimension;uniform float u_zoom;uniform vec4 u_unpack;float getElevation(vec2 coord) {\n#ifdef TERRAIN_DEM_FLOAT_FORMAT\nreturn texture2D(u_image,coord).a/4.0;\n#else\nvec4 data=texture2D(u_image,coord)*255.0;data.a=-1.0;return dot(data,u_unpack)/4.0;\n#endif\n}void main() {vec2 epsilon=1.0/u_dimension;float a=getElevation(v_pos+vec2(-epsilon.x,-epsilon.y));float b=getElevation(v_pos+vec2(0,-epsilon.y));float c=getElevation(v_pos+vec2(epsilon.x,-epsilon.y));float d=getElevation(v_pos+vec2(-epsilon.x,0));float e=getElevation(v_pos+vec2(epsilon.x,0));float f=getElevation(v_pos+vec2(-epsilon.x,epsilon.y));float g=getElevation(v_pos+vec2(0,epsilon.y));float h=getElevation(v_pos+vec2(epsilon.x,epsilon.y));float exaggerationFactor=u_zoom < 2.0 ? 0.4 : u_zoom < 4.5 ? 0.35 : 0.3;float exaggeration=u_zoom < 15.0 ? (u_zoom-15.0)*exaggerationFactor : 0.0;vec2 deriv=vec2(\n(c+e+e+h)-(a+d+d+f),(f+g+g+h)-(a+b+b+c)\n)/pow(2.0,exaggeration+(19.2562-u_zoom));gl_FragColor=clamp(vec4(\nderiv.x/2.0+0.5,deriv.y/2.0+0.5,1.0,1.0),0.0,1.0);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_dimension;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);highp vec2 epsilon=1.0/u_dimension;float scale=(u_dimension.x-2.0)/u_dimension.x;v_pos=(a_texture_pos/8192.0)*scale+epsilon;}"),hillshade:mn("uniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_latrange;uniform vec2 u_light;uniform vec4 u_shadow;uniform vec4 u_highlight;uniform vec4 u_accent;void main() {vec4 pixel=texture2D(u_image,v_pos);vec2 deriv=((pixel.rg*2.0)-1.0);float scaleFactor=cos(radians((u_latrange[0]-u_latrange[1])*(1.0-v_pos.y)+u_latrange[1]));float slope=atan(1.25*length(deriv)/scaleFactor);float aspect=deriv.x !=0.0 ? atan(deriv.y,-deriv.x) : PI/2.0*(deriv.y > 0.0 ? 1.0 :-1.0);float intensity=u_light.x;float azimuth=u_light.y+PI;float base=1.875-intensity*1.75;float maxValue=0.5*PI;float scaledSlope=intensity !=0.5 ? ((pow(base,slope)-1.0)/(pow(base,maxValue)-1.0))*maxValue : slope;float accent=cos(scaledSlope);vec4 accent_color=(1.0-accent)*u_accent*clamp(intensity*2.0,0.0,1.0);float shade=abs(mod((aspect+azimuth)/PI+0.5,2.0)-1.0);vec4 shade_color=mix(u_shadow,u_highlight,shade)*sin(scaledSlope)*clamp(intensity*2.0,0.0,1.0);gl_FragColor=accent_color*(1.0-shade_color.a)+shade_color;\n#ifdef LIGHTING_3D_MODE\ngl_FragColor=apply_lighting(gl_FragColor);\n#endif\n#ifdef FOG\ngl_FragColor=fog_dither(fog_apply_premultiplied(gl_FragColor,v_fog_pos));\n#endif\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=a_texture_pos/8192.0;\n#ifdef FOG\nv_fog_pos=fog_position(a_pos);\n#endif\n}"),line:mn("uniform lowp float u_device_pixel_ratio;uniform float u_alpha_discard_threshold;uniform highp vec2 u_trim_offset;varying vec2 v_width2;varying vec2 v_normal;varying float v_gamma_scale;varying highp vec4 v_uv;\n#ifdef RENDER_LINE_DASH\nuniform sampler2D u_dash_image;varying vec2 v_tex;\n#endif\n#ifdef RENDER_LINE_GRADIENT\nuniform sampler2D u_gradient_image;\n#endif\nuniform float u_border_width;uniform vec4 u_border_color;float luminance(vec3 c) {return (c.r+c.r+c.b+c.g+c.g+c.g)*0.1667;}\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float floorwidth\n#pragma mapbox: define lowp vec4 dash\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\nfloat linearstep(float edge0,float edge1,float x) {return  clamp((x-edge0)/(edge1-edge0),0.0,1.0);}void main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float floorwidth\n#pragma mapbox: initialize lowp vec4 dash\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\nfloat dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);\n#ifdef RENDER_LINE_DASH\nfloat sdfdist=texture2D(u_dash_image,v_tex).a;float sdfgamma=1.0/(2.0*u_device_pixel_ratio)/dash.z;alpha*=linearstep(0.5-sdfgamma/floorwidth,0.5+sdfgamma/floorwidth,sdfdist);\n#endif\nhighp vec4 out_color;\n#ifdef RENDER_LINE_GRADIENT\nout_color=texture2D(u_gradient_image,v_uv.xy);\n#else\nout_color=color;\n#endif\nfloat trimmed=1.0;\n#ifdef RENDER_LINE_TRIM_OFFSET\nhighp float start=v_uv[2];highp float end=v_uv[3];highp float trim_start=u_trim_offset[0];highp float trim_end=u_trim_offset[1];highp float line_progress=(start+(v_uv.x)*(end-start));if (trim_end > trim_start) {if (line_progress <=trim_end && line_progress >=trim_start) {out_color=vec4(0,0,0,0);trimmed=0.0;}}\n#endif\n#ifdef LIGHTING_3D_MODE\nout_color=apply_lighting(out_color);\n#endif\n#ifdef FOG\nout_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));\n#endif\n#ifdef RENDER_LINE_ALPHA_DISCARD\nif (alpha < u_alpha_discard_threshold) {discard;}\n#endif\n#ifdef RENDER_LINE_BORDER\nfloat edgeBlur=(u_border_width+1.0/u_device_pixel_ratio);float alpha2=clamp(min(dist-(v_width2.t-edgeBlur),v_width2.s-dist)/edgeBlur,0.0,1.0);if (alpha2 < 1.) {float smoothAlpha=smoothstep(0.6,1.0,alpha2);\n#ifdef RENDER_LINE_BORDER_AUTO\nfloat Y=(out_color.a > 0.01) ? luminance(out_color.rgb/out_color.a) : 1.;float adjustment=(Y > 0.) ? 0.5/Y : 0.45;if (out_color.a > 0.25 && Y < 0.25) {vec3 borderColor=(Y > 0.) ? out_color.rgb : vec3(1,1,1)*out_color.a;out_color.rgb=out_color.rgb+borderColor*(adjustment*(1.0-smoothAlpha));} else {out_color.rgb*=(0.6 +0.4*smoothAlpha);}\n#else\nout_color.rgb=mix(u_border_color.rgb*u_border_color.a*trimmed,out_color.rgb,smoothAlpha);\n#endif\n}\n#endif\ngl_FragColor=out_color*(alpha*opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","\n#define EXTRUDE_SCALE 0.015873016\nattribute vec2 a_pos_normal;attribute vec4 a_data;\n#if defined(RENDER_LINE_GRADIENT) || defined(RENDER_LINE_TRIM_OFFSET)\nattribute highp vec4 a_packed;\n#endif\n#ifdef RENDER_LINE_DASH\nattribute float a_linesofar;\n#endif\nuniform mat4 u_matrix;uniform mat2 u_pixels_to_tile_units;uniform vec2 u_units_to_pixels;uniform lowp float u_device_pixel_ratio;varying vec2 v_normal;varying vec2 v_width2;varying float v_gamma_scale;varying highp vec4 v_uv;\n#ifdef RENDER_LINE_DASH\nuniform vec2 u_texsize;uniform float u_tile_units_to_pixels;varying vec2 v_tex;\n#endif\n#ifdef RENDER_LINE_GRADIENT\nuniform float u_image_height;\n#endif\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float floorwidth\n#pragma mapbox: define lowp vec4 dash\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define mediump float gapwidth\n#pragma mapbox: define lowp float offset\n#pragma mapbox: define mediump float width\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float floorwidth\n#pragma mapbox: initialize lowp vec4 dash\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump float gapwidth\n#pragma mapbox: initialize lowp float offset\n#pragma mapbox: initialize mediump float width\nfloat ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*EXTRUDE_SCALE;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*EXTRUDE_SCALE*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist*u_pixels_to_tile_units,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2*u_pixels_to_tile_units,0.0,1.0)+projected_extrude;\n#ifndef RENDER_TO_TEXTURE\nfloat extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;\n#else\nv_gamma_scale=1.0;\n#endif\n#if defined(RENDER_LINE_GRADIENT) || defined(RENDER_LINE_TRIM_OFFSET)\nfloat a_uv_x=a_packed[0];float a_split_index=a_packed[1];highp float a_clip_start=a_packed[2];highp float a_clip_end=a_packed[3];\n#ifdef RENDER_LINE_GRADIENT\nhighp float texel_height=1.0/u_image_height;highp float half_texel_height=0.5*texel_height;v_uv=vec4(a_uv_x,a_split_index*texel_height-half_texel_height,a_clip_start,a_clip_end);\n#else\nv_uv=vec4(a_uv_x,0.0,a_clip_start,a_clip_end);\n#endif\n#endif\n#ifdef RENDER_LINE_DASH\nfloat scale=dash.z==0.0 ? 0.0 : u_tile_units_to_pixels/dash.z;float height=dash.y;v_tex=vec2(a_linesofar*scale/floorwidth,(-normal.y*height+dash.x+0.5)/u_texsize.y);\n#endif\nv_width2=vec2(outset,inset);\n#ifdef FOG\nv_fog_pos=fog_position(pos);\n#endif\n}"),linePattern:mn("uniform lowp float u_device_pixel_ratio;uniform vec2 u_texsize;uniform float u_tile_units_to_pixels;uniform sampler2D u_image;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;varying float v_width;\n#pragma mapbox: define lowp vec4 pattern\n#pragma mapbox: define lowp float pixel_ratio\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize mediump vec4 pattern\n#pragma mapbox: initialize lowp float pixel_ratio\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\nvec2 pattern_tl=pattern.xy;vec2 pattern_br=pattern.zw;vec2 display_size=(pattern_br-pattern_tl)/pixel_ratio;vec2 pattern_size=vec2(display_size.x/u_tile_units_to_pixels,display_size.y);float aspect=display_size.y/v_width;float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float x=mod(v_linesofar/pattern_size.x*aspect,1.0);float y=0.5*v_normal.y+0.5;vec2 texel_size=1.0/u_texsize;vec2 pos=mix(pattern_tl*texel_size-texel_size,pattern_br*texel_size+texel_size,vec2(x,y));vec4 color=texture2D(u_image,pos);\n#ifdef LIGHTING_3D_MODE\ncolor=apply_lighting(color);\n#endif\n#ifdef FOG\ncolor=fog_dither(fog_apply_premultiplied(color,v_fog_pos));\n#endif\ngl_FragColor=color*(alpha*opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","\n#define scale 0.015873016\nattribute vec2 a_pos_normal;attribute vec4 a_data;attribute float a_linesofar;uniform mat4 u_matrix;uniform vec2 u_units_to_pixels;uniform mat2 u_pixels_to_tile_units;uniform lowp float u_device_pixel_ratio;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;varying float v_width;\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp float offset\n#pragma mapbox: define mediump float gapwidth\n#pragma mapbox: define mediump float width\n#pragma mapbox: define lowp float floorwidth\n#pragma mapbox: define lowp vec4 pattern\n#pragma mapbox: define lowp float pixel_ratio\nvoid main() {\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize lowp float offset\n#pragma mapbox: initialize mediump float gapwidth\n#pragma mapbox: initialize mediump float width\n#pragma mapbox: initialize lowp float floorwidth\n#pragma mapbox: initialize mediump vec4 pattern\n#pragma mapbox: initialize lowp float pixel_ratio\nfloat ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist*u_pixels_to_tile_units,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2*u_pixels_to_tile_units,0.0,1.0)+projected_extrude;\n#ifndef RENDER_TO_TEXTURE\nfloat extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;\n#else\nv_gamma_scale=1.0;\n#endif\nv_linesofar=a_linesofar;v_width2=vec2(outset,inset);v_width=floorwidth;\n#ifdef FOG\nv_fog_pos=fog_position(pos);\n#endif\n}"),raster:mn("uniform float u_fade_t;uniform float u_opacity;uniform sampler2D u_image0;uniform sampler2D u_image1;varying vec2 v_pos0;varying vec2 v_pos1;uniform float u_brightness_low;uniform float u_brightness_high;uniform float u_saturation_factor;uniform float u_contrast_factor;uniform vec3 u_spin_weights;void main() {vec4 color0=texture2D(u_image0,v_pos0);vec4 color1=texture2D(u_image1,v_pos1);if (color0.a > 0.0) {color0.rgb=color0.rgb/color0.a;}if (color1.a > 0.0) {color1.rgb=color1.rgb/color1.a;}vec4 color=mix(color0,color1,u_fade_t);color.a*=u_opacity;vec3 rgb=color.rgb;rgb=vec3(\ndot(rgb,u_spin_weights.xyz),dot(rgb,u_spin_weights.zxy),dot(rgb,u_spin_weights.yzx));float average=(color.r+color.g+color.b)/3.0;rgb+=(average-rgb)*u_saturation_factor;rgb=(rgb-0.5)*u_contrast_factor+0.5;vec3 u_high_vec=vec3(u_brightness_low,u_brightness_low,u_brightness_low);vec3 u_low_vec=vec3(u_brightness_high,u_brightness_high,u_brightness_high);vec3 out_color=mix(u_high_vec,u_low_vec,rgb);\n#ifdef LIGHTING_3D_MODE\nout_color=apply_lighting(out_color);\n#endif\n#ifdef FOG\nout_color=fog_dither(fog_apply(out_color,v_fog_pos));\n#endif\ngl_FragColor=vec4(out_color*color.a,color.a);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_tl_parent;uniform float u_scale_parent;uniform vec2 u_perspective_transform;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos0;varying vec2 v_pos1;void main() {float w=1.0+dot(a_texture_pos,u_perspective_transform);gl_Position=u_matrix*vec4(a_pos*w,0,w);v_pos0=a_texture_pos/8192.0;v_pos1=(v_pos0*u_scale_parent)+u_tl_parent;\n#ifdef FOG\nv_fog_pos=fog_position(a_pos);\n#endif\n}"),symbolIcon:mn("uniform sampler2D u_texture;varying vec2 v_tex;varying float v_fade_opacity;\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\nlowp float alpha=opacity*v_fade_opacity;gl_FragColor=texture2D(u_texture,v_tex)*alpha;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","attribute vec4 a_pos_offset;attribute vec4 a_tex_size;attribute vec4 a_pixeloffset;attribute vec4 a_projected_pos;attribute float a_fade_opacity;\n#ifdef PROJECTION_GLOBE_VIEW\nattribute vec3 a_globe_anchor;attribute vec3 a_globe_normal;\n#endif\nuniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform highp float u_camera_to_center_distance;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform float u_fade_change;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform vec2 u_texsize;uniform vec3 u_up_vector;\n#ifdef PROJECTION_GLOBE_VIEW\nuniform vec3 u_tile_id;uniform mat4 u_inv_rot_matrix;uniform vec2 u_merc_center;uniform vec3 u_camera_forward;uniform float u_zoom_transition;uniform vec3 u_ecef_origin;uniform mat4 u_tile_matrix;\n#endif\nvarying vec2 v_tex;varying float v_fade_opacity;\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\nvec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_tex_size.xy;vec2 a_size=a_tex_size.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;vec2 a_min_font_scale=a_pixeloffset.zw/256.0;highp float segment_angle=-a_projected_pos[3];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec2 tile_anchor=a_pos;vec3 h=elevationVector(tile_anchor)*elevation(tile_anchor);float globe_occlusion_fade;vec3 world_pos;vec3 mercator_pos;\n#ifdef PROJECTION_GLOBE_VIEW\nmercator_pos=mercator_tile_position(u_inv_rot_matrix,tile_anchor,u_tile_id,u_merc_center);world_pos=mix_globe_mercator(a_globe_anchor+h,mercator_pos,u_zoom_transition);vec4 ecef_point=u_tile_matrix*vec4(world_pos,1.0);vec3 origin_to_point=ecef_point.xyz-u_ecef_origin;globe_occlusion_fade=dot(origin_to_point,u_camera_forward) >=0.0 ? 0.0 : 1.0;\n#else\nworld_pos=vec3(tile_anchor,0)+h;globe_occlusion_fade=1.0;\n#endif\nvec4 projected_point=u_matrix*vec4(world_pos,1);highp float camera_to_anchor_distance=projected_point.w;highp float distance_ratio=u_pitch_with_map ?\ncamera_to_anchor_distance/u_camera_to_center_distance :\nu_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(\n0.5+0.5*distance_ratio,0.0,1.5);size*=perspective_ratio;float font_scale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjected_point;\n#ifdef PROJECTION_GLOBE_VIEW\nvec3 displacement=vec3(a_globe_normal.z,0,-a_globe_normal.x);offsetProjected_point=u_matrix*vec4(a_globe_anchor+displacement,1);\n#else\noffsetProjected_point=u_matrix*vec4(tile_anchor+vec2(1,0),0,1);\n#endif\nvec2 a=projected_point.xy/projected_point.w;vec2 b=offsetProjected_point.xy/offsetProjected_point.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}vec4 projected_pos;\n#ifdef PROJECTION_GLOBE_VIEW\nvec3 proj_pos=mix_globe_mercator(a_projected_pos.xyz+h,mercator_pos,u_zoom_transition);projected_pos=u_label_plane_matrix*vec4(proj_pos,1.0);\n#else\nprojected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,h.z,1.0);\n#endif\nhighp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);float z=0.0;vec2 offset=rotation_matrix*(a_offset/32.0*max(a_min_font_scale,font_scale)+a_pxoffset/16.0);\n#ifdef TERRAIN\n#ifdef PITCH_WITH_MAP_TERRAIN\nvec4 tile_pos=u_label_plane_matrix_inv*vec4(a_projected_pos.xy+offset,0.0,1.0);z=elevation(tile_pos.xy);\n#endif\n#endif\nfloat occlusion_fade=occlusionFade(projected_point)*globe_occlusion_fade;\n#ifdef PROJECTION_GLOBE_VIEW\nvec3 xAxis=u_pitch_with_map ? normalize(cross(a_globe_normal,u_up_vector)) : vec3(1,0,0);vec3 yAxis=u_pitch_with_map ? normalize(cross(a_globe_normal,xAxis)) : vec3(0,1,0);gl_Position=mix(u_coord_matrix*vec4(projected_pos.xyz/projected_pos.w+xAxis*offset.x+yAxis*offset.y,1.0),AWAY,float(projected_point.w <=0.0 || occlusion_fade==0.0));\n#else\ngl_Position=mix(u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+offset,z,1.0),AWAY,float(projected_point.w <=0.0 || occlusion_fade==0.0));\n#endif\nfloat projection_transition_fade=1.0;\n#if defined(PROJECTED_POS_ON_VIEWPORT) && defined(PROJECTION_GLOBE_VIEW)\nprojection_transition_fade=1.0-step(EPSILON,u_zoom_transition);\n#endif\nv_tex=a_tex/u_texsize;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;v_fade_opacity=max(0.0,min(occlusion_fade,fade_opacity[0]+fade_change))*projection_transition_fade;}"),symbolSDF:mn("#define SDF_PX 8.0\nuniform bool u_is_halo;uniform sampler2D u_texture;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;uniform bool u_is_text;varying vec2 v_data0;varying vec3 v_data1;\n#pragma mapbox: define highp vec4 fill_color\n#pragma mapbox: define highp vec4 halo_color\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp float halo_width\n#pragma mapbox: define lowp float halo_blur\nvoid main() {\n#pragma mapbox: initialize highp vec4 fill_color\n#pragma mapbox: initialize highp vec4 halo_color\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize lowp float halo_width\n#pragma mapbox: initialize lowp float halo_blur\nfloat EDGE_GAMMA=0.105/u_device_pixel_ratio;vec2 tex=v_data0.xy;float gamma_scale=v_data1.x;float size=v_data1.y;float fade_opacity=v_data1[2];float fontScale=u_is_text ? size/24.0 : size;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff=(6.0-halo_width/fontScale)/SDF_PX;}lowp float dist=texture2D(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);gl_FragColor=color*(alpha*opacity*fade_opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","attribute vec4 a_pos_offset;attribute vec4 a_tex_size;attribute vec4 a_pixeloffset;attribute vec4 a_projected_pos;attribute float a_fade_opacity;\n#ifdef PROJECTION_GLOBE_VIEW\nattribute vec3 a_globe_anchor;attribute vec3 a_globe_normal;\n#endif\nuniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;uniform vec3 u_up_vector;\n#ifdef PROJECTION_GLOBE_VIEW\nuniform vec3 u_tile_id;uniform mat4 u_inv_rot_matrix;uniform vec2 u_merc_center;uniform vec3 u_camera_forward;uniform float u_zoom_transition;uniform vec3 u_ecef_origin;uniform mat4 u_tile_matrix;\n#endif\nvarying vec2 v_data0;varying vec3 v_data1;\n#pragma mapbox: define highp vec4 fill_color\n#pragma mapbox: define highp vec4 halo_color\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp float halo_width\n#pragma mapbox: define lowp float halo_blur\nvoid main() {\n#pragma mapbox: initialize highp vec4 fill_color\n#pragma mapbox: initialize highp vec4 halo_color\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize lowp float halo_width\n#pragma mapbox: initialize lowp float halo_blur\nvec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_tex_size.xy;vec2 a_size=a_tex_size.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;highp float segment_angle=-a_projected_pos[3];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec2 tile_anchor=a_pos;vec3 h=elevationVector(tile_anchor)*elevation(tile_anchor);float globe_occlusion_fade;vec3 world_pos;vec3 mercator_pos;\n#ifdef PROJECTION_GLOBE_VIEW\nmercator_pos=mercator_tile_position(u_inv_rot_matrix,tile_anchor,u_tile_id,u_merc_center);world_pos=mix_globe_mercator(a_globe_anchor+h,mercator_pos,u_zoom_transition);vec4 ecef_point=u_tile_matrix*vec4(world_pos,1.0);vec3 origin_to_point=ecef_point.xyz-u_ecef_origin;globe_occlusion_fade=dot(origin_to_point,u_camera_forward) >=0.0 ? 0.0 : 1.0;\n#else\nworld_pos=vec3(tile_anchor,0)+h;globe_occlusion_fade=1.0;\n#endif\nvec4 projected_point=u_matrix*vec4(world_pos,1);highp float camera_to_anchor_distance=projected_point.w;highp float distance_ratio=u_pitch_with_map ?\ncamera_to_anchor_distance/u_camera_to_center_distance :\nu_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(\n0.5+0.5*distance_ratio,0.0,1.5);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetprojected_point;\n#ifdef PROJECTION_GLOBE_VIEW\nvec3 displacement=vec3(a_globe_normal.z,0,-a_globe_normal.x);offsetprojected_point=u_matrix*vec4(a_globe_anchor+displacement,1);\n#else\noffsetprojected_point=u_matrix*vec4(tile_anchor+vec2(1,0),0,1);\n#endif\nvec2 a=projected_point.xy/projected_point.w;vec2 b=offsetprojected_point.xy/offsetprojected_point.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}vec4 projected_pos;\n#ifdef PROJECTION_GLOBE_VIEW\nvec3 proj_pos=mix_globe_mercator(a_projected_pos.xyz+h,mercator_pos,u_zoom_transition);projected_pos=u_label_plane_matrix*vec4(proj_pos,1.0);\n#else\nprojected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,h.z,1.0);\n#endif\nhighp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);float z=0.0;vec2 offset=rotation_matrix*(a_offset/32.0*fontScale+a_pxoffset);\n#ifdef TERRAIN\n#ifdef PITCH_WITH_MAP_TERRAIN\nvec4 tile_pos=u_label_plane_matrix_inv*vec4(a_projected_pos.xy+offset,0.0,1.0);z=elevation(tile_pos.xy);\n#endif\n#endif\nfloat occlusion_fade=occlusionFade(projected_point)*globe_occlusion_fade;\n#ifdef PROJECTION_GLOBE_VIEW\nvec3 xAxis=u_pitch_with_map ? normalize(cross(a_globe_normal,u_up_vector)) : vec3(1,0,0);vec3 yAxis=u_pitch_with_map ? normalize(cross(a_globe_normal,xAxis)) : vec3(0,1,0);gl_Position=mix(u_coord_matrix*vec4(projected_pos.xyz/projected_pos.w+xAxis*offset.x+yAxis*offset.y,1.0),AWAY,float(projected_point.w <=0.0 || occlusion_fade==0.0));\n#else\ngl_Position=mix(u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+offset,z,1.0),AWAY,float(projected_point.w <=0.0 || occlusion_fade==0.0));\n#endif\nfloat gamma_scale=gl_Position.w;float projection_transition_fade=1.0;\n#if defined(PROJECTED_POS_ON_VIEWPORT) && defined(PROJECTION_GLOBE_VIEW)\nprojection_transition_fade=1.0-step(EPSILON,u_zoom_transition);\n#endif\nvec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(occlusion_fade,fade_opacity[0]+fade_change));v_data0=a_tex/u_texsize;v_data1=vec3(gamma_scale,size,interpolated_fade_opacity*projection_transition_fade);}"),symbolTextAndIcon:mn("#define SDF_PX 8.0\n#define SDF 1.0\n#define ICON 0.0\nuniform bool u_is_halo;uniform sampler2D u_texture;uniform sampler2D u_texture_icon;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;varying vec4 v_data0;varying vec4 v_data1;\n#pragma mapbox: define highp vec4 fill_color\n#pragma mapbox: define highp vec4 halo_color\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp float halo_width\n#pragma mapbox: define lowp float halo_blur\nvoid main() {\n#pragma mapbox: initialize highp vec4 fill_color\n#pragma mapbox: initialize highp vec4 halo_color\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize lowp float halo_width\n#pragma mapbox: initialize lowp float halo_blur\nfloat fade_opacity=v_data1[2];if (v_data1.w==ICON) {vec2 tex_icon=v_data0.zw;lowp float alpha=opacity*fade_opacity;gl_FragColor=texture2D(u_texture_icon,tex_icon)*alpha;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\nreturn;}vec2 tex=v_data0.xy;float EDGE_GAMMA=0.105/u_device_pixel_ratio;float gamma_scale=v_data1.x;float size=v_data1.y;float fontScale=size/24.0;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff=(6.0-halo_width/fontScale)/SDF_PX;}lowp float dist=texture2D(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);gl_FragColor=color*(alpha*opacity*fade_opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","attribute vec4 a_pos_offset;attribute vec4 a_tex_size;attribute vec4 a_projected_pos;attribute float a_fade_opacity;\n#ifdef PROJECTION_GLOBE_VIEW\nattribute vec3 a_globe_anchor;attribute vec3 a_globe_normal;\n#endif\nuniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;uniform vec3 u_up_vector;uniform vec2 u_texsize_icon;\n#ifdef PROJECTION_GLOBE_VIEW\nuniform vec3 u_tile_id;uniform mat4 u_inv_rot_matrix;uniform vec2 u_merc_center;uniform vec3 u_camera_forward;uniform float u_zoom_transition;uniform vec3 u_ecef_origin;uniform mat4 u_tile_matrix;\n#endif\nvarying vec4 v_data0;varying vec4 v_data1;\n#pragma mapbox: define highp vec4 fill_color\n#pragma mapbox: define highp vec4 halo_color\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp float halo_width\n#pragma mapbox: define lowp float halo_blur\nvoid main() {\n#pragma mapbox: initialize highp vec4 fill_color\n#pragma mapbox: initialize highp vec4 halo_color\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize lowp float halo_width\n#pragma mapbox: initialize lowp float halo_blur\nvec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_tex_size.xy;vec2 a_size=a_tex_size.zw;float a_size_min=floor(a_size[0]*0.5);float is_sdf=a_size[0]-2.0*a_size_min;highp float segment_angle=-a_projected_pos[3];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec2 tile_anchor=a_pos;vec3 h=elevationVector(tile_anchor)*elevation(tile_anchor);float globe_occlusion_fade;vec3 world_pos;vec3 mercator_pos;\n#ifdef PROJECTION_GLOBE_VIEW\nmercator_pos=mercator_tile_position(u_inv_rot_matrix,tile_anchor,u_tile_id,u_merc_center);world_pos=mix_globe_mercator(a_globe_anchor+h,mercator_pos,u_zoom_transition);vec4 ecef_point=u_tile_matrix*vec4(world_pos,1.0);vec3 origin_to_point=ecef_point.xyz-u_ecef_origin;globe_occlusion_fade=dot(origin_to_point,u_camera_forward) >=0.0 ? 0.0 : 1.0;\n#else\nworld_pos=vec3(tile_anchor,0)+h;globe_occlusion_fade=1.0;\n#endif\nvec4 projected_point=u_matrix*vec4(world_pos,1);highp float camera_to_anchor_distance=projected_point.w;highp float distance_ratio=u_pitch_with_map ?\ncamera_to_anchor_distance/u_camera_to_center_distance :\nu_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(\n0.5+0.5*distance_ratio,0.0,1.5);size*=perspective_ratio;float font_scale=size/24.0;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offset_projected_point=u_matrix*vec4(a_pos+vec2(1,0),0,1);vec2 a=projected_point.xy/projected_point.w;vec2 b=offset_projected_point.xy/offset_projected_point.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}vec4 projected_pos;\n#ifdef PROJECTION_GLOBE_VIEW\nvec3 proj_pos=mix_globe_mercator(a_projected_pos.xyz+h,mercator_pos,u_zoom_transition);projected_pos=u_label_plane_matrix*vec4(proj_pos,1.0);\n#else\nprojected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,h.z,1.0);\n#endif\nhighp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);float z=0.0;vec2 offset=rotation_matrix*(a_offset/32.0*font_scale);\n#ifdef TERRAIN\n#ifdef PITCH_WITH_MAP_TERRAIN\nvec4 tile_pos=u_label_plane_matrix_inv*vec4(a_projected_pos.xy+offset,0.0,1.0);z=elevation(tile_pos.xy);\n#endif\n#endif\nfloat occlusion_fade=occlusionFade(projected_point)*globe_occlusion_fade;\n#ifdef PROJECTION_GLOBE_VIEW\nvec3 xAxis=u_pitch_with_map ? normalize(cross(a_globe_normal,u_up_vector)) : vec3(1,0,0);vec3 yAxis=u_pitch_with_map ? normalize(cross(a_globe_normal,xAxis)) : vec3(0,1,0);gl_Position=mix(u_coord_matrix*vec4(projected_pos.xyz/projected_pos.w+xAxis*offset.x+yAxis*offset.y,1.0),AWAY,float(projected_point.w <=0.0 || occlusion_fade==0.0));\n#else\ngl_Position=mix(u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+offset,z,1.0),AWAY,float(projected_point.w <=0.0 || occlusion_fade==0.0));\n#endif\nfloat gamma_scale=gl_Position.w;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(occlusion_fade,fade_opacity[0]+fade_change));float projection_transition_fade=1.0;\n#if defined(PROJECTED_POS_ON_VIEWPORT) && defined(PROJECTION_GLOBE_VIEW)\nprojection_transition_fade=1.0-step(EPSILON,u_zoom_transition);\n#endif\nv_data0.xy=a_tex/u_texsize;v_data0.zw=a_tex/u_texsize_icon;v_data1=vec4(gamma_scale,size,interpolated_fade_opacity*projection_transition_fade,is_sdf);}"),terrainRaster:mn("uniform sampler2D u_image0;varying vec2 v_pos0;\n#ifdef FOG\nvarying float v_fog_opacity;\n#endif\n#ifdef RENDER_SHADOWS\nvarying vec4 v_pos_light_view_0;varying vec4 v_pos_light_view_1;varying float v_depth;\n#endif\nvoid main() {vec4 color=texture2D(u_image0,v_pos0);\n#ifdef RENDER_SHADOWS\ncolor.xyz=shadowed_color(color.xyz,v_pos_light_view_0,v_pos_light_view_1,v_depth);\n#endif\n#ifdef FOG\n#ifdef ZERO_EXAGGERATION\ncolor=fog_dither(fog_apply_premultiplied(color,v_fog_pos));\n#else\ncolor=fog_dither(fog_apply_from_vert(color,v_fog_opacity));\n#endif\n#endif\ngl_FragColor=color;\n#ifdef TERRAIN_WIREFRAME\ngl_FragColor=vec4(1.0,0.0,0.0,0.8);\n#endif\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform float u_skirt_height;attribute vec2 a_pos;varying vec2 v_pos0;\n#ifdef FOG\nvarying float v_fog_opacity;\n#endif\n#ifdef RENDER_SHADOWS\nuniform mat4 u_light_matrix_0;uniform mat4 u_light_matrix_1;varying vec4 v_pos_light_view_0;varying vec4 v_pos_light_view_1;varying float v_depth;\n#endif\nconst float wireframeOffset=0.00015;void main() {vec3 decomposedPosAndSkirt=decomposeToPosAndSkirt(a_pos);float skirt=decomposedPosAndSkirt.z;vec2 decodedPos=decomposedPosAndSkirt.xy;float elevation=elevation(decodedPos)-skirt*u_skirt_height;\n#ifdef TERRAIN_WIREFRAME\nelevation+=wireframeOffset;\n#endif\nv_pos0=decodedPos/8192.0;gl_Position=u_matrix*vec4(decodedPos,elevation,1.0);\n#ifdef FOG\n#ifdef ZERO_EXAGGERATION\nv_fog_pos=fog_position(decodedPos);\n#else\nv_fog_opacity=fog(fog_position(vec3(decodedPos,elevation)));\n#endif\n#endif\n#ifdef RENDER_SHADOWS\nvec3 pos=vec3(decodedPos,elevation);v_pos_light_view_0=u_light_matrix_0*vec4(pos,1.);v_pos_light_view_1=u_light_matrix_1*vec4(pos,1.);v_depth=gl_Position.w;\n#endif\n}"),terrainDepth:mn("#ifdef GL_ES\nprecision highp float;\n#endif\nvarying float v_depth;void main() {gl_FragColor=pack_depth(v_depth);}","uniform mat4 u_matrix;attribute vec2 a_pos;varying float v_depth;void main() {float elevation=elevation(a_pos);gl_Position=u_matrix*vec4(a_pos,elevation,1.0);v_depth=gl_Position.z/gl_Position.w;}"),skybox:mn("\nvarying lowp vec3 v_uv;uniform lowp samplerCube u_cubemap;uniform lowp float u_opacity;uniform highp float u_temporal_offset;uniform highp vec3 u_sun_direction;float sun_disk(highp vec3 ray_direction,highp vec3 sun_direction) {highp float cos_angle=dot(normalize(ray_direction),sun_direction);const highp float cos_sun_angular_diameter=0.99996192306;const highp float smoothstep_delta=1e-5;return smoothstep(\ncos_sun_angular_diameter-smoothstep_delta,cos_sun_angular_diameter+smoothstep_delta,cos_angle);}float map(float value,float start,float end,float new_start,float new_end) {return ((value-start)*(new_end-new_start))/(end-start)+new_start;}void main() {vec3 uv=v_uv;const float y_bias=0.015;uv.y+=y_bias;uv.y=pow(abs(uv.y),1.0/5.0);uv.y=map(uv.y,0.0,1.0,-1.0,1.0);vec3 sky_color=textureCube(u_cubemap,uv).rgb;\n#ifdef FOG\nsky_color=fog_apply_sky_gradient(v_uv.xzy,sky_color);\n#endif\nsky_color.rgb=dither(sky_color.rgb,gl_FragCoord.xy+u_temporal_offset);sky_color+=0.1*sun_disk(v_uv,u_sun_direction);gl_FragColor=vec4(sky_color*u_opacity,u_opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}",tn),skyboxGradient:mn("varying highp vec3 v_uv;uniform lowp sampler2D u_color_ramp;uniform highp vec3 u_center_direction;uniform lowp float u_radius;uniform lowp float u_opacity;uniform highp float u_temporal_offset;void main() {float progress=acos(dot(normalize(v_uv),u_center_direction))/u_radius;vec4 color=texture2D(u_color_ramp,vec2(progress,0.5));\n#ifdef FOG\ncolor.rgb=fog_apply_sky_gradient(v_uv.xzy,color.rgb/color.a)*color.a;\n#endif\ncolor*=u_opacity;color.rgb=dither(color.rgb,gl_FragCoord.xy+u_temporal_offset);gl_FragColor=color;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}",tn),skyboxCapture:mn("\nvarying highp vec3 v_position;uniform highp float u_sun_intensity;uniform highp float u_luminance;uniform lowp vec3 u_sun_direction;uniform highp vec4 u_color_tint_r;uniform highp vec4 u_color_tint_m;\n#ifdef GL_ES\nprecision highp float;\n#endif\n#define BETA_R                  vec3(5.5e-6,13.0e-6,22.4e-6)\n#define BETA_M                  vec3(21e-6,21e-6,21e-6)\n#define MIE_G                   0.76\n#define DENSITY_HEIGHT_SCALE_R  8000.0\n#define DENSITY_HEIGHT_SCALE_M  1200.0\n#define PLANET_RADIUS           6360e3\n#define ATMOSPHERE_RADIUS       6420e3\n#define SAMPLE_STEPS            10\n#define DENSITY_STEPS           4\nfloat ray_sphere_exit(vec3 orig,vec3 dir,float radius) {float a=dot(dir,dir);float b=2.0*dot(dir,orig);float c=dot(orig,orig)-radius*radius;float d=sqrt(b*b-4.0*a*c);return (-b+d)/(2.0*a);}vec3 extinction(vec2 density) {return exp(-vec3(BETA_R*u_color_tint_r.a*density.x+BETA_M*u_color_tint_m.a*density.y));}vec2 local_density(vec3 point) {float height=max(length(point)-PLANET_RADIUS,0.0);float exp_r=exp(-height/DENSITY_HEIGHT_SCALE_R);float exp_m=exp(-height/DENSITY_HEIGHT_SCALE_M);return vec2(exp_r,exp_m);}float phase_ray(float cos_angle) {return (3.0/(16.0*PI))*(1.0+cos_angle*cos_angle);}float phase_mie(float cos_angle) {return (3.0/(8.0*PI))*((1.0-MIE_G*MIE_G)*(1.0+cos_angle*cos_angle))/((2.0+MIE_G*MIE_G)*pow(1.0+MIE_G*MIE_G-2.0*MIE_G*cos_angle,1.5));}vec2 density_to_atmosphere(vec3 point,vec3 light_dir) {float ray_len=ray_sphere_exit(point,light_dir,ATMOSPHERE_RADIUS);float step_len=ray_len/float(DENSITY_STEPS);vec2 density_point_to_atmosphere=vec2(0.0);for (int i=0; i < DENSITY_STEPS;++i) {vec3 point_on_ray=point+light_dir*((float(i)+0.5)*step_len);density_point_to_atmosphere+=local_density(point_on_ray)*step_len;;}return density_point_to_atmosphere;}vec3 atmosphere(vec3 ray_dir,vec3 sun_direction,float sun_intensity) {vec2 density_orig_to_point=vec2(0.0);vec3 scatter_r=vec3(0.0);vec3 scatter_m=vec3(0.0);vec3 origin=vec3(0.0,PLANET_RADIUS,0.0);float ray_len=ray_sphere_exit(origin,ray_dir,ATMOSPHERE_RADIUS);float step_len=ray_len/float(SAMPLE_STEPS);for (int i=0; i < SAMPLE_STEPS;++i) {vec3 point_on_ray=origin+ray_dir*((float(i)+0.5)*step_len);vec2 density=local_density(point_on_ray)*step_len;density_orig_to_point+=density;vec2 density_point_to_atmosphere=density_to_atmosphere(point_on_ray,sun_direction);vec2 density_orig_to_atmosphere=density_orig_to_point+density_point_to_atmosphere;vec3 extinction=extinction(density_orig_to_atmosphere);scatter_r+=density.x*extinction;scatter_m+=density.y*extinction;}float cos_angle=dot(ray_dir,sun_direction);float phase_r=phase_ray(cos_angle);float phase_m=phase_mie(cos_angle);vec3 beta_r=BETA_R*u_color_tint_r.rgb*u_color_tint_r.a;vec3 beta_m=BETA_M*u_color_tint_m.rgb*u_color_tint_m.a;return (scatter_r*phase_r*beta_r+scatter_m*phase_m*beta_m)*sun_intensity;}const float A=0.15;const float B=0.50;const float C=0.10;const float D=0.20;const float E=0.02;const float F=0.30;vec3 uncharted2_tonemap(vec3 x) {return ((x*(A*x+C*B)+D*E)/(x*(A*x+B)+D*F))-E/F;}void main() {vec3 ray_direction=v_position;ray_direction.y=pow(ray_direction.y,5.0);const float y_bias=0.015;ray_direction.y+=y_bias;vec3 color=atmosphere(normalize(ray_direction),u_sun_direction,u_sun_intensity);float white_scale=1.0748724675633854;color=uncharted2_tonemap((log2(2.0/pow(u_luminance,4.0)))*color)*white_scale;gl_FragColor=vec4(color,1.0);}","attribute highp vec3 a_pos_3f;uniform mat3 u_matrix_3f;varying highp vec3 v_position;float map(float value,float start,float end,float new_start,float new_end) {return ((value-start)*(new_end-new_start))/(end-start)+new_start;}void main() {vec4 pos=vec4(u_matrix_3f*a_pos_3f,1.0);v_position=pos.xyz;v_position.y*=-1.0;v_position.y=map(v_position.y,-1.0,1.0,0.0,1.0);gl_Position=vec4(a_pos_3f.xy,0.0,1.0);}"),globeRaster:mn("uniform sampler2D u_image0;varying vec2 v_pos0;\n#ifndef FOG\nuniform highp vec3 u_frustum_tl;uniform highp vec3 u_frustum_tr;uniform highp vec3 u_frustum_br;uniform highp vec3 u_frustum_bl;uniform highp vec3 u_globe_pos;uniform highp float u_globe_radius;uniform vec2 u_viewport;\n#endif\nvoid main() {vec4 color;\n#ifdef CUSTOM_ANTIALIASING\nvec2 uv=gl_FragCoord.xy/u_viewport;highp vec3 ray_dir=mix(\nmix(u_frustum_tl,u_frustum_tr,uv.x),mix(u_frustum_bl,u_frustum_br,uv.x),1.0-uv.y);vec3 dir=normalize(ray_dir);vec3 closest_point=dot(u_globe_pos,dir)*dir;float norm_dist_from_center=1.0-length(closest_point-u_globe_pos)/u_globe_radius;const float antialias_pixel=2.0;float antialias_factor=antialias_pixel*fwidth(norm_dist_from_center);float antialias=smoothstep(0.0,antialias_factor,norm_dist_from_center);vec4 raster=texture2D(u_image0,v_pos0);color=vec4(raster.rgb*antialias,raster.a*antialias);\n#else\ncolor=texture2D(u_image0,v_pos0);\n#endif\n#ifdef FOG\ncolor=fog_dither(fog_apply_premultiplied(color,v_fog_pos));\n#endif\ngl_FragColor=color;\n#ifdef TERRAIN_WIREFRAME\ngl_FragColor=vec4(1.0,0.0,0.0,0.8);\n#endif\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_proj_matrix;uniform mat4 u_normalize_matrix;uniform mat4 u_globe_matrix;uniform mat4 u_merc_matrix;uniform float u_zoom_transition;uniform vec2 u_merc_center;uniform mat3 u_grid_matrix;uniform float u_skirt_height;\n#ifdef GLOBE_POLES\nattribute vec3 a_globe_pos;attribute vec2 a_uv;\n#else\nattribute vec2 a_pos;\n#endif\nvarying vec2 v_pos0;const float wireframeOffset=1e3;float mercatorXfromLng(float lng) {return (180.0+lng)/360.0;}float mercatorYfromLat(float lat) {return (180.0-(RAD_TO_DEG*log(tan(QUARTER_PI+lat/2.0*DEG_TO_RAD))))/360.0;}vec3 latLngToECEF(vec2 latLng) {latLng=DEG_TO_RAD*latLng;float cosLat=cos(latLng[0]);float sinLat=sin(latLng[0]);float cosLng=cos(latLng[1]);float sinLng=sin(latLng[1]);float sx=cosLat*sinLng*GLOBE_RADIUS;float sy=-sinLat*GLOBE_RADIUS;float sz=cosLat*cosLng*GLOBE_RADIUS;return vec3(sx,sy,sz);}void main() {\n#ifdef GLOBE_POLES\nvec3 globe_pos=a_globe_pos;vec2 uv=a_uv;\n#else\nfloat tiles=u_grid_matrix[0][2];float idx=u_grid_matrix[1][2];float idy=u_grid_matrix[2][2];vec3 decomposed_pos_and_skirt=decomposeToPosAndSkirt(a_pos);vec3 latLng=u_grid_matrix*vec3(decomposed_pos_and_skirt.xy,1.0);float mercatorY=mercatorYfromLat(latLng[0]);float uvY=mercatorY*tiles-idy;float mercatorX=mercatorXfromLng(latLng[1]);float uvX=mercatorX*tiles-idx;vec3 globe_pos=latLngToECEF(latLng.xy);vec2 merc_pos=vec2(mercatorX,mercatorY);vec2 uv=vec2(uvX,uvY);\n#endif\nv_pos0=uv;vec2 tile_pos=uv*EXTENT;vec3 globe_derived_up_vector=normalize(globe_pos)*u_tile_up_scale;\n#ifdef GLOBE_POLES\nvec3 up_vector=globe_derived_up_vector;\n#else\nvec3 up_vector=elevationVector(tile_pos);\n#endif\nfloat height=elevation(tile_pos);\n#ifdef TERRAIN_WIREFRAME\nheight+=wireframeOffset;\n#endif\nglobe_pos+=up_vector*height;\n#ifndef GLOBE_POLES\nglobe_pos-=globe_derived_up_vector*u_skirt_height*decomposed_pos_and_skirt.z;\n#endif\n#ifdef GLOBE_POLES\nvec4 interpolated_pos=u_globe_matrix*vec4(globe_pos,1.0);\n#else\nvec4 globe_world_pos=u_globe_matrix*vec4(globe_pos,1.0);vec4 merc_world_pos=vec4(0.0);if (u_zoom_transition > 0.0) {merc_world_pos=vec4(merc_pos,height-u_skirt_height*decomposed_pos_and_skirt.z,1.0);merc_world_pos.xy-=u_merc_center;merc_world_pos.x=wrap(merc_world_pos.x,-0.5,0.5);merc_world_pos=u_merc_matrix*merc_world_pos;}vec4 interpolated_pos=vec4(mix(globe_world_pos.xyz,merc_world_pos.xyz,u_zoom_transition),1.0);\n#endif\ngl_Position=u_proj_matrix*interpolated_pos;\n#ifdef FOG\nv_fog_pos=fog_position((u_normalize_matrix*vec4(globe_pos,1.0)).xyz);\n#endif\n}"),globeAtmosphere:mn("uniform float u_transition;uniform highp float u_fadeout_range;uniform highp float u_temporal_offset;uniform vec3 u_start_color;uniform vec4 u_color;uniform vec4 u_space_color;uniform vec4 u_high_color;uniform float u_star_intensity;uniform float u_star_size;uniform float u_star_density;uniform float u_horizon_angle;uniform mat4 u_rotation_matrix;varying highp vec3 v_ray_dir;varying highp vec3 v_horizon_dir;highp float random(highp vec3 p) {p=fract(p*vec3(23.2342,97.1231,91.2342));p+=dot(p.zxy,p.yxz+123.1234);return fract(p.x*p.y);}float stars(vec3 p,float scale,vec2 offset) {vec2 uv_scale=(u_viewport/u_star_size)*scale;vec3 position=vec3(p.xy*uv_scale+offset*u_viewport,p.z);vec3 q=fract(position)-0.5;vec3 id=floor(position);float random_visibility=step(random(id),u_star_density);float circle=smoothstep(0.5+u_star_intensity,0.5,length(q));return circle*random_visibility;}void main() {highp vec3 dir=normalize(v_ray_dir);float globe_pos_dot_dir;\n#ifdef PROJECTION_GLOBE_VIEW\nglobe_pos_dot_dir=dot(u_globe_pos,dir);highp vec3 closest_point_forward=abs(globe_pos_dot_dir)*dir;float norm_dist_from_center=length(closest_point_forward-u_globe_pos)/u_globe_radius;if (norm_dist_from_center < 0.98) {discard;return;}\n#endif\nhighp vec3 horizon_dir=normalize(v_horizon_dir);float horizon_angle_mercator=dir.y < horizon_dir.y ?\n0.0 : max(acos(dot(dir,horizon_dir)),0.0);float horizon_angle;\n#ifdef PROJECTION_GLOBE_VIEW\nhighp vec3 closest_point=globe_pos_dot_dir*dir;float closest_point_to_center=length(closest_point-u_globe_pos);float theta=asin(clamp(closest_point_to_center/length(u_globe_pos),-1.0,1.0));horizon_angle=globe_pos_dot_dir < 0.0 ?\nPI-theta-u_horizon_angle : theta-u_horizon_angle;float angle_t=pow(u_transition,10.0);horizon_angle=mix(horizon_angle,horizon_angle_mercator,angle_t);\n#else\nhorizon_angle=horizon_angle_mercator;\n#endif\nhorizon_angle/=PI;float t=exp(-horizon_angle/u_fadeout_range);float alpha_0=u_color.a;float alpha_1=u_high_color.a;float alpha_2=u_space_color.a;vec3 color_stop_0=u_color.rgb;vec3 color_stop_1=u_high_color.rgb;vec3 color_stop_2=u_space_color.rgb;vec3 c0=mix(color_stop_2,color_stop_1,alpha_1);vec3 c1=mix(c0,color_stop_0,alpha_0);vec3 c2=mix(c0,c1,t);vec3 c =mix(color_stop_2,c2,t);float a0=mix(alpha_2,1.0,alpha_1);float a1=mix(a0,1.0,alpha_0);float a2=mix(a0,a1,t);float a =mix(alpha_2,a2,t);vec2 uv=gl_FragCoord.xy/u_viewport-0.5;float aspect_ratio=u_viewport.x/u_viewport.y;vec4 uv_dir=vec4(normalize(vec3(uv.x*aspect_ratio,uv.y,1.0)),1.0);uv_dir=u_rotation_matrix*uv_dir;vec3 n=abs(uv_dir.xyz);vec2 uv_remap=(n.x > n.y && n.x > n.z) ? uv_dir.yz/uv_dir.x:\n(n.y > n.x && n.y > n.z) ? uv_dir.zx/uv_dir.y:\nuv_dir.xy/uv_dir.z;uv_remap.x/=aspect_ratio;vec3 D=vec3(uv_remap,1.0);highp float star_field=0.0;if (u_star_intensity > 0.0) {star_field+=stars(D,1.2,vec2(0.0,0.0));star_field+=stars(D,1.0,vec2(1.0,0.0));star_field+=stars(D,0.8,vec2(0.0,1.0));star_field+=stars(D,0.6,vec2(1.0,1.0));star_field*=(1.0-pow(t,0.25+(1.0-u_high_color.a)*0.75));c+=star_field*alpha_2;}c=dither(c,gl_FragCoord.xy+u_temporal_offset);gl_FragColor=vec4(c,a);}","attribute vec3 a_pos;attribute vec2 a_uv;uniform vec3 u_frustum_tl;uniform vec3 u_frustum_tr;uniform vec3 u_frustum_br;uniform vec3 u_frustum_bl;uniform float u_horizon;varying highp vec3 v_ray_dir;varying highp vec3 v_horizon_dir;void main() {v_ray_dir=mix(\nmix(u_frustum_tl,u_frustum_tr,a_uv.x),mix(u_frustum_bl,u_frustum_br,a_uv.x),a_uv.y);v_horizon_dir=mix(\nmix(u_frustum_tl,u_frustum_bl,u_horizon),mix(u_frustum_tr,u_frustum_br,u_horizon),a_uv.x);gl_Position=vec4(a_pos,1.0);}")};function fn(e,t){const n=e.replace(/\s*\/\/[^\n]*\n/g,"\n").split("\n");for(let e of n)if(e=e.trim(),"#"===e[0]&&e.includes("if")&&!e.includes("endif")){e=e.replace("#","").replace(/ifdef|ifndef|elif|if/g,"").replace(/!|defined|\(|\)|\|\||&&/g,"").replace(/\s+/g," ").trim();const n=e.split(" ");for(const e of n)t.includes(e)||t.push(e)}}function mn(e,t){const n=/#pragma mapbox: ([\w]+) ([\w]+) ([\w]+) ([\w]+)/g,i=t.match(/attribute (highp |mediump |lowp )?([\w]+) ([\w]+)/g),a={},o=[...ln];return fn(e,o),fn(t,o),{fragmentSource:e=e.replace(n,(e,t,n,i,o)=>(a[o]=!0,"define"===t?`\n#ifndef HAS_UNIFORM_u_${o}\nvarying ${n} ${i} ${o};\n#else\nuniform ${n} ${i} u_${o};\n#endif\n`:`\n#ifdef HAS_UNIFORM_u_${o}\n    ${n} ${i} ${o} = u_${o};\n#endif\n`)),vertexSource:t=t.replace(n,(e,t,n,i,o)=>{const r="float"===i?"vec2":"vec4",s=o.match(/color/)?"color":r;return a[o]?"define"===t?`\n#ifndef HAS_UNIFORM_u_${o}\nuniform lowp float u_${o}_t;\nattribute ${n} ${r} a_${o};\nvarying ${n} ${i} ${o};\n#else\nuniform ${n} ${i} u_${o};\n#endif\n`:"vec4"===s?`\n#ifndef HAS_UNIFORM_u_${o}\n    ${o} = a_${o};\n#else\n    ${n} ${i} ${o} = u_${o};\n#endif\n`:`\n#ifndef HAS_UNIFORM_u_${o}\n    ${o} = unpack_mix_${s}(a_${o}, u_${o}_t);\n#else\n    ${n} ${i} ${o} = u_${o};\n#endif\n`:"define"===t?`\n#ifndef HAS_UNIFORM_u_${o}\nuniform lowp float u_${o}_t;\nattribute ${n} ${r} a_${o};\n#else\nuniform ${n} ${i} u_${o};\n#endif\n`:"vec4"===s?`\n#ifndef HAS_UNIFORM_u_${o}\n    ${n} ${i} ${o} = a_${o};\n#else\n    ${n} ${i} ${o} = u_${o};\n#endif\n`:`\n#ifndef HAS_UNIFORM_u_${o}\n    ${n} ${i} ${o} = unpack_mix_${s}(a_${o}, u_${o}_t);\n#else\n    ${n} ${i} ${o} = u_${o};\n#endif\n`}),staticAttributes:i,usedDefines:o}}class hn{constructor(){this.boundProgram=null,this.boundLayoutVertexBuffer=null,this.boundPaintVertexBuffers=[],this.boundIndexBuffer=null,this.boundVertexOffset=null,this.boundDynamicVertexBuffers=[],this.vao=null}bind(e,t,n,i,a,o,r){this.context=e;let s=this.boundPaintVertexBuffers.length!==i.length;for(let e=0;!s&&e<i.length;e++)this.boundPaintVertexBuffers[e]!==i[e]&&(s=!0);let l=this.boundDynamicVertexBuffers.length!==r.length;for(let e=0;!l&&e<r.length;e++)this.boundDynamicVertexBuffers[e]!==r[e]&&(l=!0);if(!e.extVertexArrayObject||!this.vao||this.boundProgram!==t||this.boundLayoutVertexBuffer!==n||s||l||this.boundIndexBuffer!==a||this.boundVertexOffset!==o)this.freshBind(t,n,i,a,o,r);else{e.bindVertexArrayOES.set(this.vao);for(const e of r)e&&e.bind();a&&a.dynamicDraw&&a.bind()}}freshBind(e,t,n,i,a,o){let r;const s=e.numAttributes,l=this.context,c=l.gl;if(l.extVertexArrayObject)this.vao&&this.destroy(),this.vao=l.extVertexArrayObject.createVertexArrayOES(),l.bindVertexArrayOES.set(this.vao),r=0,this.boundProgram=e,this.boundLayoutVertexBuffer=t,this.boundPaintVertexBuffers=n,this.boundIndexBuffer=i,this.boundVertexOffset=a,this.boundDynamicVertexBuffers=o;else{r=l.currentNumAttributes||0;for(let e=s;e<r;e++)c.disableVertexAttribArray(e)}t.enableAttributes(c,e),t.bind(),t.setVertexAttribPointers(c,e,a);for(const t of n)t.enableAttributes(c,e),t.bind(),t.setVertexAttribPointers(c,e,a);for(const t of o)t&&(t.enableAttributes(c,e),t.bind(),t.setVertexAttribPointers(c,e,a));i&&i.bind(),l.currentNumAttributes=s}destroy(){this.vao&&(this.context.extVertexArrayObject.deleteVertexArrayOES(this.vao),this.vao=null)}}function gn(t,n){const i=Math.pow(2,n.canonical.z),a=n.canonical.y;return[new e.MercatorCoordinate(0,a/i).toLngLat().lat,new e.MercatorCoordinate(0,(a+1)/i).toLngLat().lat]}function yn(t,n,i,a,o,r,s){const l=t.context,c=l.gl,u=i.fbo;if(!u)return;t.prepareDrawTile();const d=t.useProgram("hillshade");l.activeTexture.set(c.TEXTURE0),c.bindTexture(c.TEXTURE_2D,u.colorAttachment.get());const p=((e,t,n,i)=>{const a=n.paint.get("hillshade-shadow-color"),o=n.paint.get("hillshade-highlight-color"),r=n.paint.get("hillshade-accent-color");let s=n.paint.get("hillshade-illumination-direction")*(Math.PI/180);"viewport"===n.paint.get("hillshade-illumination-anchor")&&(s-=e.transform.angle);const l=!e.options.moving;return{u_matrix:i||e.transform.calculateProjMatrix(t.tileID.toUnwrapped(),l),u_image:0,u_latrange:gn(0,t.tileID),u_light:[n.paint.get("hillshade-exaggeration"),s],u_shadow:a,u_highlight:o,u_accent:r}})(t,i,a,t.terrain?n.projMatrix:null);t.prepareDrawProgram(l,d,n.toUnwrapped());const{tileBoundsBuffer:f,tileBoundsIndexBuffer:m,tileBoundsSegments:h}=t.getTileBoundsBuffers(i);d.draw(l,c.TRIANGLES,o,r,s,e.CullFaceMode.disabled,p,a.id,f,m,h)}function vn(t,n,i){if(!n.needsDEMTextureUpload)return;const a=t.context,o=a.gl;a.pixelStoreUnpackPremultiplyAlpha.set(!1),n.demTexture=n.demTexture||t.getTileTexture(i.stride);const r=i.getPixels();n.demTexture?n.demTexture.update(r,{premultiply:!1}):n.demTexture=new e.Texture(a,r,o.RGBA,{premultiply:!1}),n.needsDEMTextureUpload=!1}function bn(t,n,i,a,o,r){const s=t.context,l=s.gl;if(!n.dem)return;const c=n.dem;if(s.activeTexture.set(l.TEXTURE1),vn(t,n,c),!n.demTexture)return;n.demTexture.bind(l.NEAREST,l.CLAMP_TO_EDGE);const u=c.dim;s.activeTexture.set(l.TEXTURE0);let d=n.fbo;if(!d){const t=new e.Texture(s,{width:u,height:u,data:null},l.RGBA);t.bind(l.LINEAR,l.CLAMP_TO_EDGE),d=n.fbo=s.createFramebuffer(u,u,!0),d.colorAttachment.set(t.texture)}s.bindFramebuffer.set(d.framebuffer),s.viewport.set([0,0,u,u]);const{tileBoundsBuffer:p,tileBoundsIndexBuffer:f,tileBoundsSegments:m}=t.getMercatorTileBoundsBuffers();t.useProgram("hillshadePrepare").draw(s,l.TRIANGLES,a,o,r,e.CullFaceMode.disabled,((t,n)=>{const i=n.stride,a=e.create();return e.ortho(a,0,e.EXTENT,-e.EXTENT,0,0,1),e.translate(a,a,[0,-e.EXTENT,0]),{u_matrix:a,u_image:1,u_dimension:[i,i],u_zoom:t.overscaledZ,u_unpack:n.unpackVector}})(n.tileID,c),i.id,p,f,m),n.needsHillshadePrepare=!1}const _n=t=>({u_matrix:new e.UniformMatrix4f(t),u_image0:new e.Uniform1i(t),u_skirt_height:new e.Uniform1f(t)}),wn=(e,t)=>({u_matrix:e,u_image0:0,u_skirt_height:t}),xn=(e,t,n,i,a,o,r,s,l,c,u,d,p,f,m)=>({u_proj_matrix:Float32Array.from(e),u_globe_matrix:t,u_normalize_matrix:Float32Array.from(i),u_merc_matrix:n,u_zoom_transition:a,u_merc_center:o,u_image0:0,u_frustum_tl:r,u_frustum_tr:s,u_frustum_br:l,u_frustum_bl:c,u_globe_pos:u,u_globe_radius:d,u_viewport:p,u_grid_matrix:m?Float32Array.from(m):new Float32Array(9),u_skirt_height:f});function kn(e,t){return null!=e&&null!=t&&!(!e.hasData()||!t.hasData())&&null!=e.demTexture&&null!=t.demTexture&&e.tileID.key!==t.tileID.key}const On=new class{constructor(){this.operations={}}newMorphing(e,t,n,i,a){if(e in this.operations){const t=this.operations[e];t.to.tileID.key!==n.tileID.key&&(t.queued=n)}else this.operations[e]={startTime:i,phase:0,duration:a,from:t,to:n,queued:null}}getMorphValuesForProxy(e){if(!(e in this.operations))return null;const t=this.operations[e];return{from:t.from,to:t.to,phase:t.phase}}update(e){for(const t in this.operations){const n=this.operations[t];for(n.phase=(e-n.startTime)/n.duration;n.phase>=1||!this._validOp(n);)if(!this._nextOp(n,e)){delete this.operations[t];break}}}_nextOp(e,t){return!!e.queued&&(e.from=e.to,e.to=e.queued,e.queued=null,e.phase=0,e.startTime=t,!0)}_validOp(e){return e.from.hasData()&&e.to.hasData()}},Tn={0:null,1:"TERRAIN_VERTEX_MORPHING",2:"TERRAIN_WIREFRAME"};function Cn(e){return 6*Math.pow(1.5,22-e)}function En(e,t){const n=1<<e.z;return!t&&(0===e.x||e.x===n-1)||0===e.y||e.y===n-1}const Sn=e=>({u_matrix:e});function Pn(t,n,i,a,o){if(o>0){const r=e.exported.now(),s=(r-t.timeAdded)/o,l=n?(r-n.timeAdded)/o:-1,c=i.getSource(),u=a.coveringZoomLevel({tileSize:c.tileSize,roundZoom:c.roundZoom}),d=!n||Math.abs(n.tileID.overscaledZ-u)>Math.abs(t.tileID.overscaledZ-u),p=d&&t.refreshedUponExpiration?1:e.clamp(d?s:1-l,0,1);return t.refreshedUponExpiration&&s>=1&&(t.refreshedUponExpiration=!1),n?{opacity:1,mix:1-p}:{opacity:p,mix:0}}return{opacity:1,mix:0}}class In extends e.SourceCache{constructor(e){const t={type:"raster-dem",maxzoom:e.transform.maxZoom},n=new P(ze(),null),i=Ie("mock-dem",t,n,e.style);super("mock-dem",i,!1),i.setEventedParent(this),this._sourceLoaded=!0}_loadTile(e,t){e.state="loaded",t(null)}}class Mn extends e.SourceCache{constructor(e){const t=Ie("proxy",{type:"geojson",maxzoom:e.transform.maxZoom},new P(ze(),null),e.style);super("proxy",t,!1),t.setEventedParent(this),this.map=this.getSource().map=e,this.used=this._sourceLoaded=!0,this.renderCache=[],this.renderCachePool=[],this.proxyCachedFBO={}}update(t,n,i){if(t.freezeTileCoverage)return;this.transform=t;const a=t.coveringTiles({tileSize:this._source.tileSize,minzoom:this._source.minzoom,maxzoom:this._source.maxzoom,roundZoom:this._source.roundZoom,reparseOverscaled:this._source.reparseOverscaled}).reduce((n,i)=>{if(n[i.key]="",!this._tiles[i.key]){const n=new e.Tile(i,this._source.tileSize*i.overscaleFactor(),t.tileZoom);n.state="loaded",this._tiles[i.key]=n}return n},{});for(const e in this._tiles)e in a||(this.freeFBO(e),this._tiles[e].unloadVectorData(),delete this._tiles[e])}freeFBO(e){const t=this.proxyCachedFBO[e];if(void 0!==t){const n=Object.values(t);this.renderCachePool.push(...n),delete this.proxyCachedFBO[e]}}deallocRenderCache(){this.renderCache.forEach(e=>e.fb.destroy()),this.renderCache=[],this.renderCachePool=[],this.proxyCachedFBO={}}}class An extends e.OverscaledTileID{constructor(e,t,n){super(e.overscaledZ,e.wrap,e.canonical.z,e.canonical.x,e.canonical.y),this.proxyTileKey=t,this.projMatrix=n}}class jn extends e.Elevation{constructor(t,n){super(),this.painter=t,this.terrainTileForTile={},this.prevTerrainTileForTile={};const[i,a,o]=function(t){const n=new e.StructArrayLayout2i4,i=new e.StructArrayLayout3ui6,a=131;n.reserve(17161),i.reserve(33800);const o=e.EXTENT/128,r=e.EXTENT+o/2,s=r+o;for(let t=-o;t<s;t+=o)for(let i=-o;i<s;i+=o){const a=i<0||i>r||t<0||t>r?24575:0,o=e.clamp(Math.round(i),0,e.EXTENT),s=e.clamp(Math.round(t),0,e.EXTENT);n.emplaceBack(o+a,s)}const l=(e,t)=>{const n=t*a+e;i.emplaceBack(n+1,n,n+a),i.emplaceBack(n+a,n+a+1,n+1)};for(let e=1;e<129;e++)for(let t=1;t<129;t++)l(t,e);return[0,129].forEach(e=>{for(let t=0;t<130;t++)l(t,e),l(e,t)}),[n,i,32768]}(),r=t.context;this.gridBuffer=r.createVertexBuffer(i,e.posAttributes.members),this.gridIndexBuffer=r.createIndexBuffer(a),this.gridSegments=e.SegmentVector.simpleSegment(0,0,i.length,a.length),this.gridNoSkirtSegments=e.SegmentVector.simpleSegment(0,0,i.length,o),this.proxyCoords=[],this.proxiedCoords={},this._visibleDemTiles=[],this._drapedRenderBatches=[],this._sourceTilesOverlap={},this.proxySourceCache=new Mn(n.map),this.orthoMatrix=e.create(),e.ortho(this.orthoMatrix,"globe"===this.painter.transform.projection.name?.015:0,e.EXTENT,0,e.EXTENT,0,1);const s=r.gl;this._overlapStencilMode=new e.StencilMode({func:s.GEQUAL,mask:255},0,255,s.KEEP,s.KEEP,s.REPLACE),this._previousZoom=t.transform.zoom,this.pool=[],this._findCoveringTileCache={},this._tilesDirty={},this.style=n,this._useVertexMorphing=!0,this._exaggeration=1,this._mockSourceCache=new In(n.map)}set style(e){e.on("data",this._onStyleDataEvent.bind(this)),e.on("neworder",this._checkRenderCacheEfficiency.bind(this)),this._style=e,this._checkRenderCacheEfficiency(),this._style.map.on("moveend",()=>{this._clearLineLayersFromRenderCache()})}update(t,n,i){if(t&&t.terrain){this._style!==t&&(this.style=t),this.enabled=!0;const a=t.terrain.properties;this.sourceCache=0===t.terrain.drapeRenderMode?this._mockSourceCache:t._getSourceCache(a.get("source")),this._exaggeration=a.get("exaggeration");const o=()=>{this.sourceCache.used&&e.warnOnce(`Raster DEM source '${this.sourceCache.id}' is used both for terrain and as layer source.\nThis leads to lower resolution of hillshade. For full hillshade resolution but higher memory consumption, define another raster DEM source.`);const t=this.getScaledDemTileSize();this.sourceCache.update(n,t,!0),this.resetTileLookupCache(this.sourceCache.id)};this.sourceCache.usedForTerrain||(this.resetTileLookupCache(this.sourceCache.id),this.sourceCache.usedForTerrain=!0,o(),this._initializing=!0),o(),n.updateElevation(!0,i),this.resetTileLookupCache(this.proxySourceCache.id),this.proxySourceCache.update(n),this._emptyDEMTextureDirty=!0}else this._disable()}resetTileLookupCache(e){this._findCoveringTileCache[e]={}}getScaledDemTileSize(){return this.sourceCache.getSource().tileSize/128*this.proxySourceCache.getSource().tileSize}_checkRenderCacheEfficiency(){const t=this.renderCacheEfficiency(this._style);this._style.map._optimizeForTerrain||100!==t.efficiency&&e.warnOnce(`Terrain render cache efficiency is not optimal (${t.efficiency}%) and performance\n                may be affected negatively, consider placing all background, fill and line layers before layer\n                with id '${t.firstUndrapedLayer}' or create a map using optimizeForTerrain: true option.`)}_onStyleDataEvent(e){e.coord&&"source"===e.dataType?this._clearRenderCacheForTile(e.sourceCacheId,e.coord):"style"===e.dataType&&(this._invalidateRenderCache=!0)}_disable(){if(this.enabled&&(this.enabled=!1,this._sharedDepthStencil=void 0,this.proxySourceCache.deallocRenderCache(),this._style))for(const e in this._style._sourceCaches)this._style._sourceCaches[e].usedForTerrain=!1}destroy(){this._disable(),this._emptyDEMTexture&&this._emptyDEMTexture.destroy(),this._emptyDepthBufferTexture&&this._emptyDepthBufferTexture.destroy(),this.pool.forEach(e=>e.fb.destroy()),this.pool=[],this._depthFBO&&(this._depthFBO.destroy(),this._depthFBO=void 0,this._depthTexture=void 0)}_source(){return this.enabled?this.sourceCache:null}isUsingMockSource(){return this.sourceCache===this._mockSourceCache}exaggeration(){return this._exaggeration}get visibleDemTiles(){return this._visibleDemTiles}get drapeBufferSize(){const e=2*this.proxySourceCache.getSource().tileSize;return[e,e]}set useVertexMorphing(e){this._useVertexMorphing=e}updateTileBinding(t){if(!this.enabled)return;this.prevTerrainTileForTile=this.terrainTileForTile;const n=this.proxySourceCache,i=this.painter.transform;this._initializing&&(this._initializing=0===i._centerAltitude&&-1===this.getAtPointOrZero(e.MercatorCoordinate.fromLngLat(i.center),-1),this._emptyDEMTextureDirty=!this._initializing);const a=this.proxyCoords=n.getIds().map(e=>{const t=n.getTileByID(e).tileID;return t.projMatrix=i.calculateProjMatrix(t.toUnwrapped()),t});!function(t,n){const i=n.transform.pointCoordinate(n.transform.getCameraPoint()),a=new e.Point(i.x,i.y);t.sort((t,n)=>{if(n.overscaledZ-t.overscaledZ)return n.overscaledZ-t.overscaledZ;const i=new e.Point(t.canonical.x+(1<<t.canonical.z)*t.wrap,t.canonical.y),o=new e.Point(n.canonical.x+(1<<n.canonical.z)*n.wrap,n.canonical.y),r=a.mult(1<<t.canonical.z);return r.x-=.5,r.y-=.5,r.distSqr(i)-r.distSqr(o)})}(a,this.painter),this._previousZoom=i.zoom;const o=this.proxyToSource||{};this.proxyToSource={},a.forEach(e=>{this.proxyToSource[e.key]={}}),this.terrainTileForTile={};const r=this._style._sourceCaches;for(const e in r){const n=r[e];if(!n.used)continue;if(n!==this.sourceCache&&this.resetTileLookupCache(n.id),this._setupProxiedCoordsForOrtho(n,t[e],o),n.usedForTerrain)continue;const i=t[e];n.getSource().reparseOverscaled&&this._assignTerrainTiles(i)}this.proxiedCoords[n.id]=a.map(e=>new An(e,e.key,this.orthoMatrix)),this._assignTerrainTiles(a),this._prepareDEMTextures(),this._setupDrapedRenderBatches(),this._initFBOPool(),this._setupRenderCache(o),this.renderingToTexture=!1,this._updateTimestamp=e.exported.now();const s={};this._visibleDemTiles=[];for(const e of this.proxyCoords){const t=this.terrainTileForTile[e.key];if(!t)continue;const n=t.tileID.key;n in s||(this._visibleDemTiles.push(t),s[n]=n)}}_assignTerrainTiles(e){this._initializing||e.forEach(e=>{if(this.terrainTileForTile[e.key])return;const t=this._findTileCoveringTileID(e,this.sourceCache);t&&(this.terrainTileForTile[e.key]=t)})}_prepareDEMTextures(){const e=this.painter.context,t=e.gl;for(const n in this.terrainTileForTile){const i=this.terrainTileForTile[n],a=i.dem;!a||i.demTexture&&!i.needsDEMTextureUpload||(e.activeTexture.set(t.TEXTURE1),vn(this.painter,i,a))}}_prepareDemTileUniforms(e,t,n,i){if(!t||null==t.demTexture)return!1;const a=e.tileID.canonical,o=Math.pow(2,t.tileID.canonical.z-a.z),r=i||"";return n["u_dem_tl"+r]=[a.x*o%1,a.y*o%1],n["u_dem_scale"+r]=o,!0}get emptyDEMTexture(){return!this._emptyDEMTextureDirty&&this._emptyDEMTexture?this._emptyDEMTexture:this._updateEmptyDEMTexture()}get emptyDepthBufferTexture(){const t=this.painter.context,n=t.gl;if(!this._emptyDepthBufferTexture){const i=new e.RGBAImage({width:1,height:1},Uint8Array.of(255,255,255,255));this._emptyDepthBufferTexture=new e.Texture(t,i,n.RGBA,{premultiply:!1})}return this._emptyDepthBufferTexture}_getLoadedAreaMinimum(){let e=0;const t=this._visibleDemTiles.reduce((t,n)=>{if(!n.dem)return t;const i=n.dem.tree.minimums[0];return i>0&&e++,t+i},0);return e?t/e:0}_updateEmptyDEMTexture(){const t=this.painter.context,n=t.gl;t.activeTexture.set(n.TEXTURE2);const i=this._getLoadedAreaMinimum(),a=new e.RGBAImage({width:1,height:1},new Uint8Array(e.DEMData.pack(i,this.sourceCache.getSource().encoding)));this._emptyDEMTextureDirty=!1;let o=this._emptyDEMTexture;return o?o.update(a,{premultiply:!1}):o=this._emptyDEMTexture=new e.Texture(t,a,n.RGBA,{premultiply:!1}),o}setupElevationDraw(t,n,i){const a=this.painter.context,o=a.gl,r=(s=this.sourceCache.getSource().encoding,{u_dem:2,u_dem_prev:4,u_dem_unpack:e.DEMData.getUnpackVector(s),u_dem_tl:[0,0],u_dem_tl_prev:[0,0],u_dem_scale:0,u_dem_scale_prev:0,u_dem_size:0,u_dem_lerp:1,u_depth:3,u_depth_size_inv:[0,0],u_exaggeration:0});var s;r.u_dem_size=this.sourceCache.getSource().tileSize,r.u_exaggeration=this.exaggeration();let l=null,c=null,u=1;if(i&&i.morphing&&this._useVertexMorphing){const e=i.morphing.srcDemTile,n=i.morphing.dstDemTile;u=i.morphing.phase,e&&n&&(this._prepareDemTileUniforms(t,e,r,"_prev")&&(c=e),this._prepareDemTileUniforms(t,n,r)&&(l=n))}if(c&&l?(a.activeTexture.set(o.TEXTURE2),l.demTexture.bind(o.NEAREST,o.CLAMP_TO_EDGE,o.NEAREST),a.activeTexture.set(o.TEXTURE4),c.demTexture.bind(o.NEAREST,o.CLAMP_TO_EDGE,o.NEAREST),r.u_dem_lerp=u):(l=this.terrainTileForTile[t.tileID.key],a.activeTexture.set(o.TEXTURE2),(this._prepareDemTileUniforms(t,l,r)?l.demTexture:this.emptyDEMTexture).bind(o.NEAREST,o.CLAMP_TO_EDGE)),a.activeTexture.set(o.TEXTURE3),i&&i.useDepthForOcclusion?(this._depthTexture&&this._depthTexture.bind(o.NEAREST,o.CLAMP_TO_EDGE),this._depthFBO&&(r.u_depth_size_inv=[1/this._depthFBO.width,1/this._depthFBO.height])):(this.emptyDepthBufferTexture.bind(o.NEAREST,o.CLAMP_TO_EDGE),r.u_depth_size_inv=[1,1]),i&&i.useMeterToDem&&l){const t=(1<<l.tileID.canonical.z)*e.mercatorZfromAltitude(1,this.painter.transform.center.lat)*this.sourceCache.getSource().tileSize;r.u_meter_to_dem=t}if(i&&i.labelPlaneMatrixInv&&(r.u_label_plane_matrix_inv=i.labelPlaneMatrixInv),n.setTerrainUniformValues(a,r),"globe"===this.painter.transform.projection.name){const e=this.globeUniformValues(this.painter.transform,t.tileID.canonical,i&&i.useDenormalizedUpVectorScale);n.setGlobeUniformValues(a,e)}}globeUniformValues(t,n,i){const a=t.projection;return{u_tile_tl_up:a.upVector(n,0,0),u_tile_tr_up:a.upVector(n,e.EXTENT,0),u_tile_br_up:a.upVector(n,e.EXTENT,e.EXTENT),u_tile_bl_up:a.upVector(n,0,e.EXTENT),u_tile_up_scale:i?e.globeMetersToEcef(1):a.upVectorScale(n,t.center.lat,t.worldSize).metersToTile}}renderToBackBuffer(t){const n=this.painter,i=this.painter.context;0!==t.length&&(i.bindFramebuffer.set(null),i.viewport.set([0,0,n.width,n.height]),n.gpuTimingDeferredRenderStart(),this.renderingToTexture=!1,function(t,n,i,a,o){if("globe"===t.transform.projection.name)!function(t,n,i,a,o){const r=t.context,s=r.gl;let l,c;const u=t.options.showTerrainWireframe?2:0,d=t.transform,p=e.globeUseCustomAntiAliasing(t,r,d),f=(e,n)=>{if(c===e)return;const i=[Tn[e],"PROJECTION_GLOBE_VIEW"];p&&i.push("CUSTOM_ANTIALIASING"),n&&i.push(Tn[u]),l=t.useProgram("globeRaster",null,i),c=e},m=t.colorModeForRenderPass(),h=new e.DepthMode(s.LEQUAL,e.DepthMode.ReadWrite,t.depthRangeFor3D);On.update(o);const g=e.calculateGlobeMercatorMatrix(d),y=[e.mercatorXfromLng(d.center.lng),e.mercatorYfromLat(d.center.lat)],v=u?[!1,!0]:[!1],b=t.globeSharedBuffers,_=[d.width*e.exported.devicePixelRatio,d.height*e.exported.devicePixelRatio],w=Float32Array.from(d.globeMatrix),x={useDenormalizedUpVectorScale:!0};if(v.forEach(u=>{const d=t.transform,p=Cn(d.zoom)*n.exaggeration();c=-1;const v=u?s.LINES:s.TRIANGLES;for(const c of a){const a=i.getTile(c),k=e.StencilMode.disabled,O=n.prevTerrainTileForTile[c.key],T=n.terrainTileForTile[c.key];kn(O,T)&&On.newMorphing(c.key,O,T,o,250),r.activeTexture.set(s.TEXTURE0),a.texture.bind(s.LINEAR,s.CLAMP_TO_EDGE);const C=On.getMorphValuesForProxy(c.key),E=C?1:0;C&&e.extend$1(x,{morphing:{srcDemTile:C.from,dstDemTile:C.to,phase:e.easeCubicInOut(C.phase)}});const S=e.tileCornersToBounds(c.canonical),P=e.getLatitudinalLod(S.getCenter().lat),I=e.getGridMatrix(c.canonical,S,P,d.worldSize/d._pixelsPerMercatorPixel),M=e.globeNormalizeECEF(e.globeTileBounds(c.canonical)),A=xn(d.projMatrix,w,g,M,e.globeToMercatorTransition(d.zoom),y,d.frustumCorners.TL,d.frustumCorners.TR,d.frustumCorners.BR,d.frustumCorners.BL,d.globeCenterInViewSpace,d.globeRadius,_,p,I);if(f(E,u),n.setupElevationDraw(a,l,x),t.prepareDrawProgram(r,l,c.toUnwrapped()),b){const[n,i,a]=u?b.getWirefameBuffers(t.context,P):b.getGridBuffers(P,0!==p);l.draw(r,v,h,k,m,e.CullFaceMode.backCCW,A,"globe_raster",n,i,a)}}}),b){const o=["GLOBE_POLES","PROJECTION_GLOBE_VIEW"];p&&o.push("CUSTOM_ANTIALIASING"),l=t.useProgram("globeRaster",null,o);for(const o of a){const{x:a,y:c,z:u}=o.canonical,p=0===c,f=c===(1<<u)-1,[g,v,w,k]=b.getPoleBuffers(u);if(k&&(p||f)){const c=i.getTile(o);r.activeTexture.set(s.TEXTURE0),c.texture.bind(s.LINEAR,s.CLAMP_TO_EDGE);let b=e.globePoleMatrixForTile(u,a,d);const O=e.globeNormalizeECEF(e.globeTileBounds(o.canonical)),T=(t,n)=>t.draw(r,s.TRIANGLES,h,e.StencilMode.disabled,m,e.CullFaceMode.disabled,xn(d.projMatrix,b,b,O,0,y,d.frustumCorners.TL,d.frustumCorners.TR,d.frustumCorners.BR,d.frustumCorners.BL,d.globeCenterInViewSpace,d.globeRadius,_,0),"globe_pole_raster",n,w,k);n.setupElevationDraw(c,l,x),t.prepareDrawProgram(r,l,o.toUnwrapped()),p&&T(l,g),f&&(b=e.scale(e.create(),b,[1,-1,1]),T(l,v))}}}}(t,n,i,a,o);else{const r=t.context,s=r.gl;let l,c;const u=t.options.showTerrainWireframe?2:0,d=(e,n)=>{if(c===e)return;const i=[Tn[e]];n&&i.push(Tn[u]),l=t.useProgram("terrainRaster",null,i),c=e},p=t.colorModeForRenderPass(),f=new e.DepthMode(s.LEQUAL,e.DepthMode.ReadWrite,t.depthRangeFor3D);On.update(o);const m=t.transform,h=Cn(m.zoom)*n.exaggeration();(u?[!1,!0]:[!1]).forEach(u=>{c=-1;const g=u?s.LINES:s.TRIANGLES,[y,v]=u?n.getWirefameBuffer():[n.gridIndexBuffer,n.gridSegments];for(const c of a){const a=i.getTile(c),b=e.StencilMode.disabled,_=n.prevTerrainTileForTile[c.key],w=n.terrainTileForTile[c.key];kn(_,w)&&On.newMorphing(c.key,_,w,o,250),r.activeTexture.set(s.TEXTURE0),a.texture.bind(s.LINEAR,s.CLAMP_TO_EDGE,s.LINEAR_MIPMAP_NEAREST);const x=On.getMorphValuesForProxy(c.key),k=x?1:0;let O;x&&(O={morphing:{srcDemTile:x.from,dstDemTile:x.to,phase:e.easeCubicInOut(x.phase)}});const T=wn(c.projMatrix,En(c.canonical,m.renderWorldCopies)?h/10:h);d(k,u),n.setupElevationDraw(a,l,O),t.prepareDrawProgram(r,l,c.toUnwrapped()),l.draw(r,g,f,b,p,e.CullFaceMode.backCCW,T,"terrain_raster",n.gridBuffer,y,v)}})}}(n,this,this.proxySourceCache,t,this._updateTimestamp),this.renderingToTexture=!0,n.gpuTimingDeferredRenderEnd(),t.splice(0,t.length))}renderBatch(t){if(0===this._drapedRenderBatches.length)return t+1;this.renderingToTexture=!0;const n=this.painter,i=this.painter.context,a=this.proxySourceCache,o=this.proxiedCoords[a.id],r=this._drapedRenderBatches.shift(),s=[],l=n.style.order;let c=0;for(const u of o){const o=a.getTileByID(u.proxyTileKey),d=a.proxyCachedFBO[u.key]?a.proxyCachedFBO[u.key][t]:void 0,p=void 0!==d?a.renderCache[d]:this.pool[c++],f=void 0!==d;if(o.texture=p.tex,f&&!p.dirty){s.push(o.tileID);continue}let m;i.bindFramebuffer.set(p.fb.framebuffer),this.renderedToTile=!1,p.dirty&&(i.clear({color:e.Color.transparent,stencil:0}),p.dirty=!1);for(let e=r.start;e<=r.end;++e){const t=n.style._layers[l[e]];if(t.isHidden(n.transform.zoom))continue;const a=n.style._getLayerSourceCache(t),o=a?this.proxyToSource[u.key][a.id]:[u];if(!o)continue;const r=o;i.viewport.set([0,0,p.fb.width,p.fb.height]),m!==(a?a.id:null)&&(this._setupStencil(p,o,t,a),m=a?a.id:null),n.renderLayer(n,a,t,r)}this.renderedToTile?(p.dirty=!0,s.push(o.tileID)):f||--c,5===c&&(c=0,this.renderToBackBuffer(s))}return this.renderToBackBuffer(s),this.renderingToTexture=!1,i.bindFramebuffer.set(null),i.viewport.set([0,0,n.width,n.height]),r.end+1}postRender(){}renderCacheEfficiency(e){const t=e.order.length;if(0===t)return{efficiency:100};let n,i=0,a=0,o=!1;for(let r=0;r<t;++r){const t=e._layers[e.order[r]];this._style.isLayerDraped(t)?(o&&++i,++a):o||(o=!0,n=t.id)}return 0===a?{efficiency:100}:{efficiency:100*(1-i/a),firstUndrapedLayer:n}}getMinElevationBelowMSL(){let e=0;return this._visibleDemTiles.filter(e=>e.dem).forEach(t=>{e=Math.min(e,t.dem.tree.minimums[0])}),0===e?e:(e-30)*this._exaggeration}raycast(e,t,n){if(!this._visibleDemTiles)return null;const i=this._visibleDemTiles.filter(e=>e.dem).map(i=>{const a=i.tileID,o=1<<a.overscaledZ,{x:r,y:s}=a.canonical,l=r/o,c=(r+1)/o,u=s/o,d=(s+1)/o;return{minx:l,miny:u,maxx:c,maxy:d,t:i.dem.tree.raycastRoot(l,u,c,d,e,t,n),tile:i}});i.sort((e,t)=>(null!==e.t?e.t:Number.MAX_VALUE)-(null!==t.t?t.t:Number.MAX_VALUE));for(const a of i){if(null==a.t)return null;const i=a.tile.dem.tree.raycast(a.minx,a.miny,a.maxx,a.maxy,e,t,n);if(null!=i)return i}return null}_createFBO(){const t=this.painter.context,n=t.gl,i=this.drapeBufferSize;t.activeTexture.set(n.TEXTURE0);const a=new e.Texture(t,{width:i[0],height:i[1],data:null},n.RGBA);a.bind(n.LINEAR,n.CLAMP_TO_EDGE);const o=t.createFramebuffer(i[0],i[1],!1);return o.colorAttachment.set(a.texture),o.depthAttachment=new xe(t,o.framebuffer),void 0===this._sharedDepthStencil?(this._sharedDepthStencil=t.createRenderbuffer(t.gl.DEPTH_STENCIL,i[0],i[1]),this._stencilRef=0,o.depthAttachment.set(this._sharedDepthStencil),t.clear({stencil:0})):o.depthAttachment.set(this._sharedDepthStencil),t.extTextureFilterAnisotropic&&!t.extTextureFilterAnisotropicForceOff&&n.texParameterf(n.TEXTURE_2D,t.extTextureFilterAnisotropic.TEXTURE_MAX_ANISOTROPY_EXT,t.extTextureFilterAnisotropicMax),{fb:o,tex:a,dirty:!1}}_initFBOPool(){for(;this.pool.length<Math.min(5,this.proxyCoords.length);)this.pool.push(this._createFBO())}_shouldDisableRenderCache(){if(this._style.light&&this._style.light.hasTransition())return!0;for(const e in this._style._sourceCaches)if(this._style._sourceCaches[e].hasTransition())return!0;return this._style.order.some(e=>{const t=this._style._layers[e],n=t.isHidden(this.painter.transform.zoom);return"custom"===t.type?!n&&t.shouldRedrape():!n&&t.hasTransition()})}_clearLineLayersFromRenderCache(){let t=!1;for(const e of this._style._getSources())if(e instanceof Te){t=!0;break}if(!t)return;const n={};for(let t=0;t<this._style.order.length;++t){const i=this._style._layers[this._style.order[t]],a=this._style._getLayerSourceCache(i);if(a&&!n[a.id]&&!i.isHidden(this.painter.transform.zoom)&&"line"===i.type&&i.widthExpression()instanceof e.ZoomDependentExpression){n[a.id]=!0;for(const e of this.proxyCoords){const t=this.proxyToSource[e.key][a.id];if(t)for(const e of t)this._clearRenderCacheForTile(a.id,e)}}}}_clearRasterLayersFromRenderCache(){let e=!1;for(const t in this._style._sourceCaches)if(this._style._sourceCaches[t]._source instanceof Ce){e=!0;break}if(!e)return;const t={};for(let e=0;e<this._style.order.length;++e){const n=this._style._layers[this._style.order[e]],i=this._style._getLayerSourceCache(n);if(!i||t[i.id])continue;if(n.isHidden(this.painter.transform.zoom)||"raster"!==n.type)continue;const a=n.paint.get("raster-fade-duration");for(const e of this.proxyCoords){const t=this.proxyToSource[e.key][i.id];if(t)for(const e of t){const t=Pn(i.getTile(e),i.findLoadedParent(e,0),i,this.painter.transform,a);(1!==t.opacity||0!==t.mix)&&this._clearRenderCacheForTile(i.id,e)}}}}_setupDrapedRenderBatches(){const e=this._style.order,t=e.length;if(0===t)return;const n=[];let i,a=0,o=this._style._layers[e[a]];for(;!this._style.isLayerDraped(o)&&o.isHidden(this.painter.transform.zoom)&&++a<t;)o=this._style._layers[e[a]];for(;a<t;++a){const t=this._style._layers[e[a]];t.isHidden(this.painter.transform.zoom)||(this._style.isLayerDraped(t)?void 0===i&&(i=a):void 0!==i&&(n.push({start:i,end:a-1}),i=void 0))}void 0!==i&&n.push({start:i,end:a-1}),this._drapedRenderBatches=n}_setupRenderCache(e){const t=this.proxySourceCache;if(this._shouldDisableRenderCache()||this._invalidateRenderCache){if(this._invalidateRenderCache=!1,t.renderCache.length>t.renderCachePool.length){const e=Object.values(t.proxyCachedFBO);t.proxyCachedFBO={};for(let n=0;n<e.length;++n){const i=Object.values(e[n]);t.renderCachePool.push(...i)}}return}this._clearRasterLayersFromRenderCache();const n=this.proxyCoords,i=this._tilesDirty;for(let a=n.length-1;a>=0;a--){const o=n[a];if(t.getTileByID(o.key),void 0!==t.proxyCachedFBO[o.key]){const n=e[o.key],a=this.proxyToSource[o.key];let r=0;for(const e in a){const t=a[e],o=n[e];if(!o||o.length!==t.length||t.some((t,n)=>t!==o[n]||i[e]&&i[e].hasOwnProperty(t.key))){r=-1;break}++r}for(const e in t.proxyCachedFBO[o.key])t.renderCache[t.proxyCachedFBO[o.key][e]].dirty=r<0||r!==Object.values(n).length}}const a=[...this._drapedRenderBatches];a.sort((e,t)=>t.end-t.start-(e.end-e.start));for(const e of a)for(const i of n){if(t.proxyCachedFBO[i.key])continue;let n=t.renderCachePool.pop();void 0===n&&t.renderCache.length<50&&(n=t.renderCache.length,t.renderCache.push(this._createFBO())),void 0!==n&&(t.proxyCachedFBO[i.key]={},t.proxyCachedFBO[i.key][e.start]=n,t.renderCache[n].dirty=!0)}this._tilesDirty={}}_setupStencil(e,t,n,i){if(!i||!this._sourceTilesOverlap[i.id])return void(this._overlapStencilType&&(this._overlapStencilType=!1));const a=this.painter.context,o=a.gl;if(t.length<=1)return void(this._overlapStencilType=!1);let r;if(n.isTileClipped())r=t.length,this._overlapStencilMode.test={func:o.EQUAL,mask:255},this._overlapStencilType="Clip";else{if(!(t[0].overscaledZ>t[t.length-1].overscaledZ))return void(this._overlapStencilType=!1);r=1,this._overlapStencilMode.test={func:o.GREATER,mask:255},this._overlapStencilType="Mask"}this._stencilRef+r>255&&(a.clear({stencil:0}),this._stencilRef=0),this._stencilRef+=r,this._overlapStencilMode.ref=this._stencilRef,n.isTileClipped()&&this._renderTileClippingMasks(t,this._overlapStencilMode.ref)}clipOrMaskOverlapStencilType(){return"Clip"===this._overlapStencilType||"Mask"===this._overlapStencilType}stencilModeForRTTOverlap(t){return this.renderingToTexture&&this._overlapStencilType?("Clip"===this._overlapStencilType&&(this._overlapStencilMode.ref=this.painter._tileClippingMaskIDs[t.key]),this._overlapStencilMode):e.StencilMode.disabled}_renderTileClippingMasks(t,n){const i=this.painter,a=this.painter.context,o=a.gl;i._tileClippingMaskIDs={},a.setColorMode(e.ColorMode.disabled),a.setDepthMode(e.DepthMode.disabled);const r=i.useProgram("clippingMask");for(const s of t){const t=i._tileClippingMaskIDs[s.key]=--n;r.draw(a,o.TRIANGLES,e.DepthMode.disabled,new e.StencilMode({func:o.ALWAYS,mask:0},t,255,o.KEEP,o.KEEP,o.REPLACE),e.ColorMode.disabled,e.CullFaceMode.disabled,Sn(s.projMatrix),"$clipping",i.tileExtentBuffer,i.quadTriangleIndexBuffer,i.tileExtentSegments)}}pointCoordinate(t){const n=this.painter.transform;if(t.x<0||t.x>n.width||t.y<0||t.y>n.height)return null;const i=[t.x,t.y,1,1];e.transformMat4$1(i,i,n.pixelMatrixInverse),e.scale$1(i,i,1/i[3]),i[0]/=n.worldSize,i[1]/=n.worldSize;const a=n._camera.position,o=e.mercatorZfromAltitude(1,n.center.lat),r=[a[0],a[1],a[2]/o,0],s=e.subtract([],i.slice(0,3),r);e.normalize(s,s);const l=this.raycast(r,s,this._exaggeration);return null!==l&&l?(e.scaleAndAdd(r,r,s,l),r[3]=r[2],r[2]*=o,r):null}drawDepth(){const t=this.painter,n=t.context,i=this.proxySourceCache,a=Math.ceil(t.width),o=Math.ceil(t.height);if(!this._depthFBO||this._depthFBO.width===a&&this._depthFBO.height===o||(this._depthFBO.destroy(),this._depthFBO=void 0,this._depthTexture=void 0),!this._depthFBO){const t=n.gl,i=n.createFramebuffer(a,o,!0);n.activeTexture.set(t.TEXTURE0);const r=new e.Texture(n,{width:a,height:o,data:null},t.RGBA);r.bind(t.NEAREST,t.CLAMP_TO_EDGE),i.colorAttachment.set(r.texture);const s=n.createRenderbuffer(n.gl.DEPTH_COMPONENT16,a,o);i.depthAttachment.set(s),this._depthFBO=i,this._depthTexture=r}n.bindFramebuffer.set(this._depthFBO.framebuffer),n.viewport.set([0,0,a,o]),function(t,n,i,a){if("globe"===t.transform.projection.name)return;const o=t.context,r=o.gl;o.clear({depth:1});const s=t.useProgram("terrainDepth"),l=new e.DepthMode(r.LESS,e.DepthMode.ReadWrite,t.depthRangeFor3D);for(const t of a){const a=i.getTile(t),c=wn(t.projMatrix,0);n.setupElevationDraw(a,s),s.draw(o,r.TRIANGLES,l,e.StencilMode.disabled,e.ColorMode.unblended,e.CullFaceMode.backCCW,c,"terrain_depth",n.gridBuffer,n.gridIndexBuffer,n.gridNoSkirtSegments)}}(t,this,i,this.proxyCoords)}_setupProxiedCoordsForOrtho(e,t,n){if(e.getSource()instanceof Se)return this._setupProxiedCoordsForImageSource(e,t,n);this._findCoveringTileCache[e.id]=this._findCoveringTileCache[e.id]||{};const i=this.proxiedCoords[e.id]=[],a=this.proxyCoords;for(let t=0;t<a.length;t++){const o=a[t],r=this._findTileCoveringTileID(o,e);if(r){const t=this._createProxiedId(o,r,n[o.key]&&n[o.key][e.id]);i.push(t),this.proxyToSource[o.key][e.id]=[t]}}let o=!1;for(let a=0;a<t.length;a++){const r=e.getTile(t[a]);if(!r||!r.hasData())continue;const s=this._findTileCoveringTileID(r.tileID,this.proxySourceCache);if(s&&s.tileID.canonical.z!==r.tileID.canonical.z){const t=this.proxyToSource[s.tileID.key][e.id],a=this._createProxiedId(s.tileID,r,n[s.tileID.key]&&n[s.tileID.key][e.id]);t?t.splice(t.length-1,0,a):this.proxyToSource[s.tileID.key][e.id]=[a],i.push(a),o=!0}}this._sourceTilesOverlap[e.id]=o}_setupProxiedCoordsForImageSource(t,n,i){if(!t.getSource().loaded())return;const a=this.proxiedCoords[t.id]=[],o=this.proxyCoords,r=t.getSource(),s=new e.Point(r.tileID.x,r.tileID.y)._div(1<<r.tileID.z),l=r.coordinates.map(e.MercatorCoordinate.fromLngLat).reduce((e,t)=>(e.min.x=Math.min(e.min.x,t.x-s.x),e.min.y=Math.min(e.min.y,t.y-s.y),e.max.x=Math.max(e.max.x,t.x-s.x),e.max.y=Math.max(e.max.y,t.y-s.y),e),{min:new e.Point(Number.MAX_VALUE,Number.MAX_VALUE),max:new e.Point(-Number.MAX_VALUE,-Number.MAX_VALUE)}),c=(t,n)=>{const i=t.wrap+t.canonical.x/(1<<t.canonical.z),a=t.canonical.y/(1<<t.canonical.z),o=e.EXTENT/(1<<t.canonical.z),r=n.wrap+n.canonical.x/(1<<n.canonical.z),s=n.canonical.y/(1<<n.canonical.z);return i+o<r+l.min.x||i>r+l.max.x||a+o<s+l.min.y||a>s+l.max.y};for(let e=0;e<o.length;e++){const r=o[e];for(let e=0;e<n.length;e++){const o=t.getTile(n[e]);if(!o||!o.hasData())continue;if(c(r,o.tileID))continue;const s=this._createProxiedId(r,o,i[r.key]&&i[r.key][t.id]),l=this.proxyToSource[r.key][t.id];l?l.push(s):this.proxyToSource[r.key][t.id]=[s],a.push(s)}}}_createProxiedId(t,n,i){let a=this.orthoMatrix;if(i){const e=i.find(e=>e.key===n.tileID.key);if(e)return e}if(n.tileID.key!==t.key){const i=t.canonical.z-n.tileID.canonical.z;let o,r,s;a=e.create();const l=n.tileID.wrap-t.wrap<<t.overscaledZ;i>0?(o=e.EXTENT>>i,r=o*((n.tileID.canonical.x<<i)-t.canonical.x+l),s=o*((n.tileID.canonical.y<<i)-t.canonical.y)):(o=e.EXTENT<<-i,r=e.EXTENT*(n.tileID.canonical.x-(t.canonical.x+l<<-i)),s=e.EXTENT*(n.tileID.canonical.y-(t.canonical.y<<-i))),e.ortho(a,0,o,0,o,0,1),e.translate(a,a,[r,s,0])}return new An(n.tileID,t.key,a)}_findTileCoveringTileID(t,n){let i=n.getTile(t);if(i&&i.hasData())return i;const a=this._findCoveringTileCache[n.id],o=a[t.key];if(i=o?n.getTileByID(o):null,i&&i.hasData()||null===o)return i;let r=i?i.tileID:t,s=r.overscaledZ;const l=n.getSource().minzoom,c=[];if(!o){const a=n.getSource().maxzoom;if(t.canonical.z>=a){const i=t.canonical.z-a;n.getSource().reparseOverscaled?(s=Math.max(t.canonical.z+2,n.transform.tileZoom),r=new e.OverscaledTileID(s,t.wrap,a,t.canonical.x>>i,t.canonical.y>>i)):0!==i&&(s=a,r=new e.OverscaledTileID(s,t.wrap,a,t.canonical.x>>i,t.canonical.y>>i))}r.key!==t.key&&(c.push(r.key),i=n.getTile(r))}const u=e=>{c.forEach(t=>{a[t]=e}),c.length=0};for(s-=1;s>=l&&(!i||!i.hasData());s--){i&&u(i.tileID.key);const e=r.calculateScaledKey(s);if(i=n.getTileByID(e),i&&i.hasData())break;const t=a[e];if(null===t)break;void 0===t?c.push(e):i=n.getTileByID(t)}return u(i?i.tileID.key:null),i&&i.hasData()?i:null}findDEMTileFor(e){return this.enabled?this._findTileCoveringTileID(e,this.sourceCache):null}prepareDrawTile(){this.renderedToTile=!0}_clearRenderCacheForTile(e,t){let n=this._tilesDirty[e];n||(n=this._tilesDirty[e]={}),n[t.key]=!0}getWirefameBuffer(){if(!this.wireframeSegments){const t=function(t){let n=0;const i=new e.StructArrayLayout2ui4,a=131;for(let e=1;e<129;e++){for(let t=1;t<129;t++)n=e*a+t,i.emplaceBack(n,n+1),i.emplaceBack(n,n+a),i.emplaceBack(n+1,n+a),128===e&&i.emplaceBack(n+a,n+a+1);i.emplaceBack(n+1,n+1+a)}return i}();this.wireframeIndexBuffer=this.painter.context.createIndexBuffer(t),this.wireframeSegments=e.SegmentVector.simpleSegment(0,0,this.gridBuffer.length,t.length)}return[this.wireframeIndexBuffer,this.wireframeSegments]}}class Nn{static cacheKey(e,t,n,i){let a=`${t}${i?i.cacheKey:""}`;for(const t of n)e.usedDefines.includes(t)&&(a+="/"+t);return a}constructor(t,n,i,a,o,r){const s=t.gl;this.program=s.createProgram();const l=function(e){const t=[];for(let n=0;n<e.length;n++){if(null===e[n])continue;const i=e[n].split(" ");t.push(i.pop())}return t}(i.staticAttributes),c=a?a.getBinderAttributes():[],u=l.concat(c);let d=a?a.defines():[];d=d.concat(r.map(e=>"#define "+e));const p=t.isWebGL2?"#version 300 es\n":"",f=p+d.concat(t.extStandardDerivatives&&0===p.length?"#extension GL_OES_standard_derivatives : enable\n".concat(dn):dn,dn,un,cn.fragmentSource,sn.fragmentSource,i.fragmentSource).join("\n"),m=p+d.concat("\n#ifdef GL_ES\nprecision highp float;\n#else\n\n#if !defined(lowp)\n#define lowp\n#endif\n\n#if !defined(mediump)\n#define mediump\n#endif\n\n#if !defined(highp)\n#define highp\n#endif\n\n#endif",un,cn.vertexSource,sn.vertexSource,rn.vertexSource,i.vertexSource).join("\n"),h=s.createShader(s.FRAGMENT_SHADER);if(s.isContextLost())return void(this.failedToCreate=!0);s.shaderSource(h,f),s.compileShader(h),s.attachShader(this.program,h);const g=s.createShader(s.VERTEX_SHADER);if(s.isContextLost())this.failedToCreate=!0;else{s.shaderSource(g,m),s.compileShader(g),s.attachShader(this.program,g),this.attributes={},this.numAttributes=u.length;for(let e=0;e<this.numAttributes;e++)u[e]&&(s.bindAttribLocation(this.program,e,u[e]),this.attributes[u[e]]=e);s.linkProgram(this.program),s.deleteShader(g),s.deleteShader(h),this.fixedUniforms=o(t),this.binderUniforms=a?a.getUniforms(t):[],r.includes("TERRAIN")&&(this.terrainUniforms=(t=>({u_dem:new e.Uniform1i(t),u_dem_prev:new e.Uniform1i(t),u_dem_unpack:new e.Uniform4f(t),u_dem_tl:new e.Uniform2f(t),u_dem_scale:new e.Uniform1f(t),u_dem_tl_prev:new e.Uniform2f(t),u_dem_scale_prev:new e.Uniform1f(t),u_dem_size:new e.Uniform1f(t),u_dem_lerp:new e.Uniform1f(t),u_exaggeration:new e.Uniform1f(t),u_depth:new e.Uniform1i(t),u_depth_size_inv:new e.Uniform2f(t),u_meter_to_dem:new e.Uniform1f(t),u_label_plane_matrix_inv:new e.UniformMatrix4f(t)}))(t)),r.includes("GLOBE")&&(this.globeUniforms=(t=>({u_tile_tl_up:new e.Uniform3f(t),u_tile_tr_up:new e.Uniform3f(t),u_tile_br_up:new e.Uniform3f(t),u_tile_bl_up:new e.Uniform3f(t),u_tile_up_scale:new e.Uniform1f(t)}))(t)),r.includes("FOG")&&(this.fogUniforms=(t=>({u_fog_matrix:new e.UniformMatrix4f(t),u_fog_range:new e.Uniform2f(t),u_fog_color:new e.Uniform4f(t),u_fog_horizon_blend:new e.Uniform1f(t),u_fog_temporal_offset:new e.Uniform1f(t),u_frustum_tl:new e.Uniform3f(t),u_frustum_tr:new e.Uniform3f(t),u_frustum_br:new e.Uniform3f(t),u_frustum_bl:new e.Uniform3f(t),u_globe_pos:new e.Uniform3f(t),u_globe_radius:new e.Uniform1f(t),u_globe_transition:new e.Uniform1f(t),u_is_globe:new e.Uniform1i(t),u_viewport:new e.Uniform2f(t)}))(t))}}setTerrainUniformValues(e,t){if(!this.terrainUniforms)return;const n=this.terrainUniforms;if(!this.failedToCreate){e.program.set(this.program);for(const e in t)n[e]&&n[e].set(this.program,e,t[e])}}setGlobeUniformValues(e,t){if(!this.globeUniforms)return;const n=this.globeUniforms;if(!this.failedToCreate){e.program.set(this.program);for(const e in t)n[e]&&n[e].set(this.program,e,t[e])}}setFogUniformValues(e,t){if(!this.fogUniforms)return;const n=this.fogUniforms;if(!this.failedToCreate){e.program.set(this.program);for(const e in t)n[e].set(this.program,e,t[e])}}draw(e,t,n,i,a,o,r,s,l,c,u,d,p,f,m){const h=e.gl;if(this.failedToCreate)return;e.program.set(this.program),e.setDepthMode(n),e.setStencilMode(i),e.setColorMode(a),e.setCullFace(o);for(const e of Object.keys(this.fixedUniforms))this.fixedUniforms[e].set(this.program,e,r[e]);f&&f.setUniforms(this.program,e,this.binderUniforms,d,{zoom:p});const g={[h.LINES]:2,[h.TRIANGLES]:3,[h.LINE_STRIP]:1}[t];for(const n of u.get()){const i=n.vaos||(n.vaos={});(i[s]||(i[s]=new hn)).bind(e,this,l,f?f.getPaintVertexBuffers():[],c,n.vertexOffset,m||[]),h.drawElements(t,n.primitiveLength*g,h.UNSIGNED_SHORT,n.primitiveOffset*g*2)}}}function Ln(e,t){const n=Math.pow(2,t.tileID.overscaledZ),i=t.tileSize*Math.pow(2,e.transform.tileZoom)/n,a=i*(t.tileID.canonical.x+t.tileID.wrap*n),o=i*t.tileID.canonical.y;return{u_image:0,u_texsize:t.imageAtlasTexture.size,u_tile_units_to_pixels:1/I(t,1,e.transform.tileZoom),u_pixel_coord_upper:[a>>16,o>>16],u_pixel_coord_lower:[65535&a,65535&o]}}const Dn=e.create(),Rn=(t,n,i,a,o,r,s,l,c,u,d)=>{const p=n.style.light,f=p.properties.get("position"),m=[f.x,f.y,f.z],h=e.create$1();"viewport"===p.properties.get("anchor")&&(e.fromRotation(h,-n.transform.angle),e.transformMat3(m,m,h));const g=p.properties.get("color"),y=n.transform,v={u_matrix:t,u_lightpos:m,u_lightintensity:p.properties.get("intensity"),u_lightcolor:[g.r,g.g,g.b],u_vertical_gradient:+i,u_opacity:a,u_tile_id:[0,0,0],u_zoom_transition:0,u_inv_rot_matrix:Dn,u_merc_center:[0,0],u_up_dir:[0,0,0],u_height_lift:0,u_ao:o,u_edge_radius:r};return"globe"===y.projection.name&&(v.u_tile_id=[s.canonical.x,s.canonical.y,1<<s.canonical.z],v.u_zoom_transition=c,v.u_inv_rot_matrix=d,v.u_merc_center=u,v.u_up_dir=y.projection.upVector(new e.CanonicalTileID(0,0,0),u[0]*e.EXTENT,u[1]*e.EXTENT),v.u_height_lift=l),v},Bn=(t,n,i,a,o,r,s,l,c,u,d,p)=>{const f=Rn(t,n,i,a,o,r,s,c,u,d,p),m={u_height_factor:-Math.pow(2,s.overscaledZ)/l.tileSize/8};return e.extend(f,Ln(n,l),m)},zn=e=>({u_matrix:e}),Fn=(t,n,i)=>e.extend(zn(t),Ln(n,i)),Un=(e,t)=>({u_matrix:e,u_world:t}),Hn=(t,n,i,a)=>e.extend(Fn(t,n,i),{u_world:a}),Wn=e.create(),qn=(t,n,i,a,o,r)=>{const s=t.transform,l="globe"===s.projection.name;let c;if("map"===r.paint.get("circle-pitch-alignment"))if(l){const t=e.globePixelsToTileUnits(s.zoom,n.canonical)*s._pixelsPerMercatorPixel;c=Float32Array.from([t,0,0,t])}else c=s.calculatePixelsToTileUnitsMatrix(i);else c=new Float32Array([s.pixelsToGLUnits[0],0,0,s.pixelsToGLUnits[1]]);const u={u_camera_to_center_distance:s.cameraToCenterDistance,u_matrix:t.translatePosMatrix(n.projMatrix,i,r.paint.get("circle-translate"),r.paint.get("circle-translate-anchor")),u_device_pixel_ratio:e.exported.devicePixelRatio,u_extrude_scale:c,u_inv_rot_matrix:Wn,u_merc_center:[0,0],u_tile_id:[0,0,0],u_zoom_transition:0,u_up_dir:[0,0,0]};if(l){u.u_inv_rot_matrix=a,u.u_merc_center=o,u.u_tile_id=[n.canonical.x,n.canonical.y,1<<n.canonical.z],u.u_zoom_transition=e.globeToMercatorTransition(s.zoom);const t=o[0]*e.EXTENT,i=o[1]*e.EXTENT;u.u_up_dir=s.projection.upVector(new e.CanonicalTileID(0,0,0),t,i)}return u},Vn=e=>{const t=[];return"map"===e.paint.get("circle-pitch-alignment")&&t.push("PITCH_WITH_MAP"),"map"===e.paint.get("circle-pitch-scale")&&t.push("SCALE_WITH_MAP"),t},Gn=(t,n,i,a)=>{const o=e.EXTENT/i.tileSize;return{u_matrix:t,u_camera_to_center_distance:n.getCameraToCenterDistance(a),u_extrude_scale:[n.pixelsToGLUnits[0]/o,n.pixelsToGLUnits[1]/o]}},Yn=(e,t,n=1)=>({u_matrix:e,u_color:t,u_overlay:0,u_overlay_scale:n}),Xn=e.create(),Zn=(t,n,i,a,o,r,s)=>{const l=t.transform,c="globe"===l.projection.name,u=c?e.globePixelsToTileUnits(l.zoom,n.canonical)*l._pixelsPerMercatorPixel:I(i,1,r),d={u_matrix:n.projMatrix,u_extrude_scale:u,u_intensity:s,u_inv_rot_matrix:Xn,u_merc_center:[0,0],u_tile_id:[0,0,0],u_zoom_transition:0,u_up_dir:[0,0,0]};if(c){d.u_inv_rot_matrix=a,d.u_merc_center=o,d.u_tile_id=[n.canonical.x,n.canonical.y,1<<n.canonical.z],d.u_zoom_transition=e.globeToMercatorTransition(l.zoom);const t=o[0]*e.EXTENT,i=o[1]*e.EXTENT;d.u_up_dir=l.projection.upVector(new e.CanonicalTileID(0,0,0),t,i)}return d},Jn=(e,t,n,i,a,o,r)=>{const s=e.transform,l=s.calculatePixelsToTileUnitsMatrix(t);return{u_matrix:Qn(e,t,n,i),u_pixels_to_tile_units:l,u_device_pixel_ratio:o,u_units_to_pixels:[1/s.pixelsToGLUnits[0],1/s.pixelsToGLUnits[1]],u_dash_image:0,u_gradient_image:1,u_image_height:a,u_texsize:ei(n)?t.lineAtlasTexture.size:[0,0],u_tile_units_to_pixels:$n(t,e.transform),u_alpha_discard_threshold:0,u_trim_offset:r}},Kn=(e,t,n,i,a)=>{const o=e.transform;return{u_matrix:Qn(e,t,n,i),u_texsize:t.imageAtlasTexture.size,u_pixels_to_tile_units:o.calculatePixelsToTileUnitsMatrix(t),u_device_pixel_ratio:a,u_image:0,u_tile_units_to_pixels:$n(t,o),u_units_to_pixels:[1/o.pixelsToGLUnits[0],1/o.pixelsToGLUnits[1]],u_alpha_discard_threshold:0}};function $n(e,t){return 1/I(e,1,t.tileZoom)}function Qn(e,t,n,i){return e.translatePosMatrix(i||t.tileID.projMatrix,t,n.paint.get("line-translate"),n.paint.get("line-translate-anchor"))}function ei(e){const t=e.paint.get("line-dasharray").value;return t.value||"constant"!==t.kind}const ti=(e,t,n,i,a,o)=>{return{u_matrix:e,u_tl_parent:t,u_scale_parent:n,u_fade_t:i.mix,u_opacity:i.opacity*a.paint.get("raster-opacity"),u_image0:0,u_image1:1,u_brightness_low:a.paint.get("raster-brightness-min"),u_brightness_high:a.paint.get("raster-brightness-max"),u_saturation_factor:(s=a.paint.get("raster-saturation"),s>0?1-1/(1.001-s):-s),u_contrast_factor:(r=a.paint.get("raster-contrast"),r>0?1/(1-r):1+r),u_spin_weights:ni(a.paint.get("raster-hue-rotate")),u_perspective_transform:o};var r,s};function ni(e){e*=Math.PI/180;const t=Math.sin(e),n=Math.cos(e);return[(2*n+1)/3,(-Math.sqrt(3)*t-n+1)/3,(Math.sqrt(3)*t-n+1)/3]}const ii=e.create(),ai=(t,n,i,a,o,r,s,l,c,u,d,p,f,m,h,g)=>{const y=o.transform,v={u_is_size_zoom_constant:+("constant"===t||"source"===t),u_is_size_feature_constant:+("constant"===t||"camera"===t),u_size_t:n?n.uSizeT:0,u_size:n?n.uSize:0,u_camera_to_center_distance:y.cameraToCenterDistance,u_rotate_symbol:+i,u_aspect_ratio:y.width/y.height,u_fade_change:o.options.fadeDuration?o.symbolFadeChange:1,u_matrix:r,u_label_plane_matrix:s,u_coord_matrix:l,u_is_text:+c,u_pitch_with_map:+a,u_texsize:u,u_texture:0,u_tile_id:[0,0,0],u_zoom_transition:0,u_inv_rot_matrix:ii,u_merc_center:[0,0],u_camera_forward:[0,0,0],u_ecef_origin:[0,0,0],u_tile_matrix:ii,u_up_vector:[0,-1,0]};return"globe"===g.name&&(v.u_tile_id=[d.canonical.x,d.canonical.y,1<<d.canonical.z],v.u_zoom_transition=p,v.u_inv_rot_matrix=m,v.u_merc_center=f,v.u_camera_forward=y._camera.forward(),v.u_ecef_origin=e.globeECEFOrigin(y.globeMatrix,d.toUnwrapped()),v.u_tile_matrix=Float32Array.from(y.globeMatrix),v.u_up_vector=h),v},oi=(t,n,i,a,o,r,s,l,c,u,d,p,f,m,h,g,y)=>e.extend(ai(t,n,i,a,o,r,s,l,c,u,p,f,m,h,g,y),{u_gamma_scale:a?o.transform.cameraToCenterDistance*Math.cos(o.terrain?0:o.transform._pitch):1,u_device_pixel_ratio:e.exported.devicePixelRatio,u_is_halo:+d}),ri=(t,n,i,a,o,r,s,l,c,u,d,p,f,m,h,g)=>e.extend(oi(t,n,i,a,o,r,s,l,!0,c,!0,d,p,f,m,h,g),{u_texsize_icon:u,u_texture_icon:1}),si=(e,t,n)=>({u_matrix:e,u_opacity:t,u_color:n}),li=(t,n,i,a,o)=>e.extend(function(e,t,n){const i=t.imageManager.getPattern(e.toString()),{width:a,height:o}=t.imageManager.getPixelSize(),r=Math.pow(2,n.tileID.overscaledZ),s=n.tileSize*Math.pow(2,t.transform.tileZoom)/r,l=s*(n.tileID.canonical.x+n.tileID.wrap*r),c=s*n.tileID.canonical.y;return{u_image:0,u_pattern_tl:i.tl,u_pattern_br:i.br,u_texsize:[a,o],u_pattern_size:i.displaySize,u_tile_units_to_pixels:1/I(n,1,t.transform.tileZoom),u_pixel_coord_upper:[l>>16,c>>16],u_pixel_coord_lower:[65535&l,65535&c]}}(a,i,o),{u_matrix:t,u_opacity:n}),ci={fillExtrusion:t=>({u_matrix:new e.UniformMatrix4f(t),u_lightpos:new e.Uniform3f(t),u_lightintensity:new e.Uniform1f(t),u_lightcolor:new e.Uniform3f(t),u_vertical_gradient:new e.Uniform1f(t),u_opacity:new e.Uniform1f(t),u_edge_radius:new e.Uniform1f(t),u_ao:new e.Uniform2f(t),u_tile_id:new e.Uniform3f(t),u_zoom_transition:new e.Uniform1f(t),u_inv_rot_matrix:new e.UniformMatrix4f(t),u_merc_center:new e.Uniform2f(t),u_up_dir:new e.Uniform3f(t),u_height_lift:new e.Uniform1f(t)}),fillExtrusionPattern:t=>({u_matrix:new e.UniformMatrix4f(t),u_lightpos:new e.Uniform3f(t),u_lightintensity:new e.Uniform1f(t),u_lightcolor:new e.Uniform3f(t),u_vertical_gradient:new e.Uniform1f(t),u_height_factor:new e.Uniform1f(t),u_edge_radius:new e.Uniform1f(t),u_ao:new e.Uniform2f(t),u_tile_id:new e.Uniform3f(t),u_zoom_transition:new e.Uniform1f(t),u_inv_rot_matrix:new e.UniformMatrix4f(t),u_merc_center:new e.Uniform2f(t),u_up_dir:new e.Uniform3f(t),u_height_lift:new e.Uniform1f(t),u_image:new e.Uniform1i(t),u_texsize:new e.Uniform2f(t),u_pixel_coord_upper:new e.Uniform2f(t),u_pixel_coord_lower:new e.Uniform2f(t),u_tile_units_to_pixels:new e.Uniform1f(t),u_opacity:new e.Uniform1f(t)}),fill:t=>({u_matrix:new e.UniformMatrix4f(t)}),fillPattern:t=>({u_matrix:new e.UniformMatrix4f(t),u_image:new e.Uniform1i(t),u_texsize:new e.Uniform2f(t),u_pixel_coord_upper:new e.Uniform2f(t),u_pixel_coord_lower:new e.Uniform2f(t),u_tile_units_to_pixels:new e.Uniform1f(t)}),fillOutline:t=>({u_matrix:new e.UniformMatrix4f(t),u_world:new e.Uniform2f(t)}),fillOutlinePattern:t=>({u_matrix:new e.UniformMatrix4f(t),u_world:new e.Uniform2f(t),u_image:new e.Uniform1i(t),u_texsize:new e.Uniform2f(t),u_pixel_coord_upper:new e.Uniform2f(t),u_pixel_coord_lower:new e.Uniform2f(t),u_tile_units_to_pixels:new e.Uniform1f(t)}),circle:t=>({u_camera_to_center_distance:new e.Uniform1f(t),u_extrude_scale:new e.UniformMatrix2f(t),u_device_pixel_ratio:new e.Uniform1f(t),u_matrix:new e.UniformMatrix4f(t),u_inv_rot_matrix:new e.UniformMatrix4f(t),u_merc_center:new e.Uniform2f(t),u_tile_id:new e.Uniform3f(t),u_zoom_transition:new e.Uniform1f(t),u_up_dir:new e.Uniform3f(t)}),collisionBox:t=>({u_matrix:new e.UniformMatrix4f(t),u_camera_to_center_distance:new e.Uniform1f(t),u_extrude_scale:new e.Uniform2f(t)}),collisionCircle:t=>({u_matrix:new e.UniformMatrix4f(t),u_inv_matrix:new e.UniformMatrix4f(t),u_camera_to_center_distance:new e.Uniform1f(t),u_viewport_size:new e.Uniform2f(t)}),debug:t=>({u_color:new e.UniformColor(t),u_matrix:new e.UniformMatrix4f(t),u_overlay:new e.Uniform1i(t),u_overlay_scale:new e.Uniform1f(t)}),clippingMask:t=>({u_matrix:new e.UniformMatrix4f(t)}),heatmap:t=>({u_extrude_scale:new e.Uniform1f(t),u_intensity:new e.Uniform1f(t),u_matrix:new e.UniformMatrix4f(t),u_inv_rot_matrix:new e.UniformMatrix4f(t),u_merc_center:new e.Uniform2f(t),u_tile_id:new e.Uniform3f(t),u_zoom_transition:new e.Uniform1f(t),u_up_dir:new e.Uniform3f(t)}),heatmapTexture:t=>({u_image:new e.Uniform1i(t),u_color_ramp:new e.Uniform1i(t),u_opacity:new e.Uniform1f(t)}),hillshade:t=>({u_matrix:new e.UniformMatrix4f(t),u_image:new e.Uniform1i(t),u_latrange:new e.Uniform2f(t),u_light:new e.Uniform2f(t),u_shadow:new e.UniformColor(t),u_highlight:new e.UniformColor(t),u_accent:new e.UniformColor(t)}),hillshadePrepare:t=>({u_matrix:new e.UniformMatrix4f(t),u_image:new e.Uniform1i(t),u_dimension:new e.Uniform2f(t),u_zoom:new e.Uniform1f(t),u_unpack:new e.Uniform4f(t)}),line:t=>({u_matrix:new e.UniformMatrix4f(t),u_pixels_to_tile_units:new e.UniformMatrix2f(t),u_device_pixel_ratio:new e.Uniform1f(t),u_units_to_pixels:new e.Uniform2f(t),u_dash_image:new e.Uniform1i(t),u_gradient_image:new e.Uniform1i(t),u_image_height:new e.Uniform1f(t),u_texsize:new e.Uniform2f(t),u_tile_units_to_pixels:new e.Uniform1f(t),u_alpha_discard_threshold:new e.Uniform1f(t),u_trim_offset:new e.Uniform2f(t)}),linePattern:t=>({u_matrix:new e.UniformMatrix4f(t),u_texsize:new e.Uniform2f(t),u_pixels_to_tile_units:new e.UniformMatrix2f(t),u_device_pixel_ratio:new e.Uniform1f(t),u_image:new e.Uniform1i(t),u_units_to_pixels:new e.Uniform2f(t),u_tile_units_to_pixels:new e.Uniform1f(t),u_alpha_discard_threshold:new e.Uniform1f(t)}),raster:t=>({u_matrix:new e.UniformMatrix4f(t),u_tl_parent:new e.Uniform2f(t),u_scale_parent:new e.Uniform1f(t),u_fade_t:new e.Uniform1f(t),u_opacity:new e.Uniform1f(t),u_image0:new e.Uniform1i(t),u_image1:new e.Uniform1i(t),u_brightness_low:new e.Uniform1f(t),u_brightness_high:new e.Uniform1f(t),u_saturation_factor:new e.Uniform1f(t),u_contrast_factor:new e.Uniform1f(t),u_spin_weights:new e.Uniform3f(t),u_perspective_transform:new e.Uniform2f(t)}),symbolIcon:t=>({u_is_size_zoom_constant:new e.Uniform1i(t),u_is_size_feature_constant:new e.Uniform1i(t),u_size_t:new e.Uniform1f(t),u_size:new e.Uniform1f(t),u_camera_to_center_distance:new e.Uniform1f(t),u_rotate_symbol:new e.Uniform1i(t),u_aspect_ratio:new e.Uniform1f(t),u_fade_change:new e.Uniform1f(t),u_matrix:new e.UniformMatrix4f(t),u_label_plane_matrix:new e.UniformMatrix4f(t),u_coord_matrix:new e.UniformMatrix4f(t),u_is_text:new e.Uniform1i(t),u_pitch_with_map:new e.Uniform1i(t),u_texsize:new e.Uniform2f(t),u_tile_id:new e.Uniform3f(t),u_zoom_transition:new e.Uniform1f(t),u_inv_rot_matrix:new e.UniformMatrix4f(t),u_merc_center:new e.Uniform2f(t),u_camera_forward:new e.Uniform3f(t),u_tile_matrix:new e.UniformMatrix4f(t),u_up_vector:new e.Uniform3f(t),u_ecef_origin:new e.Uniform3f(t),u_texture:new e.Uniform1i(t)}),symbolSDF:t=>({u_is_size_zoom_constant:new e.Uniform1i(t),u_is_size_feature_constant:new e.Uniform1i(t),u_size_t:new e.Uniform1f(t),u_size:new e.Uniform1f(t),u_camera_to_center_distance:new e.Uniform1f(t),u_rotate_symbol:new e.Uniform1i(t),u_aspect_ratio:new e.Uniform1f(t),u_fade_change:new e.Uniform1f(t),u_matrix:new e.UniformMatrix4f(t),u_label_plane_matrix:new e.UniformMatrix4f(t),u_coord_matrix:new e.UniformMatrix4f(t),u_is_text:new e.Uniform1i(t),u_pitch_with_map:new e.Uniform1i(t),u_texsize:new e.Uniform2f(t),u_texture:new e.Uniform1i(t),u_gamma_scale:new e.Uniform1f(t),u_device_pixel_ratio:new e.Uniform1f(t),u_tile_id:new e.Uniform3f(t),u_zoom_transition:new e.Uniform1f(t),u_inv_rot_matrix:new e.UniformMatrix4f(t),u_merc_center:new e.Uniform2f(t),u_camera_forward:new e.Uniform3f(t),u_tile_matrix:new e.UniformMatrix4f(t),u_up_vector:new e.Uniform3f(t),u_ecef_origin:new e.Uniform3f(t),u_is_halo:new e.Uniform1i(t)}),symbolTextAndIcon:t=>({u_is_size_zoom_constant:new e.Uniform1i(t),u_is_size_feature_constant:new e.Uniform1i(t),u_size_t:new e.Uniform1f(t),u_size:new e.Uniform1f(t),u_camera_to_center_distance:new e.Uniform1f(t),u_rotate_symbol:new e.Uniform1i(t),u_aspect_ratio:new e.Uniform1f(t),u_fade_change:new e.Uniform1f(t),u_matrix:new e.UniformMatrix4f(t),u_label_plane_matrix:new e.UniformMatrix4f(t),u_coord_matrix:new e.UniformMatrix4f(t),u_is_text:new e.Uniform1i(t),u_pitch_with_map:new e.Uniform1i(t),u_texsize:new e.Uniform2f(t),u_texsize_icon:new e.Uniform2f(t),u_texture:new e.Uniform1i(t),u_texture_icon:new e.Uniform1i(t),u_gamma_scale:new e.Uniform1f(t),u_device_pixel_ratio:new e.Uniform1f(t),u_is_halo:new e.Uniform1i(t)}),background:t=>({u_matrix:new e.UniformMatrix4f(t),u_opacity:new e.Uniform1f(t),u_color:new e.UniformColor(t)}),backgroundPattern:t=>({u_matrix:new e.UniformMatrix4f(t),u_opacity:new e.Uniform1f(t),u_image:new e.Uniform1i(t),u_pattern_tl:new e.Uniform2f(t),u_pattern_br:new e.Uniform2f(t),u_texsize:new e.Uniform2f(t),u_pattern_size:new e.Uniform2f(t),u_pixel_coord_upper:new e.Uniform2f(t),u_pixel_coord_lower:new e.Uniform2f(t),u_tile_units_to_pixels:new e.Uniform1f(t)}),terrainRaster:_n,terrainDepth:_n,skybox:t=>({u_matrix:new e.UniformMatrix4f(t),u_sun_direction:new e.Uniform3f(t),u_cubemap:new e.Uniform1i(t),u_opacity:new e.Uniform1f(t),u_temporal_offset:new e.Uniform1f(t)}),skyboxGradient:t=>({u_matrix:new e.UniformMatrix4f(t),u_color_ramp:new e.Uniform1i(t),u_center_direction:new e.Uniform3f(t),u_radius:new e.Uniform1f(t),u_opacity:new e.Uniform1f(t),u_temporal_offset:new e.Uniform1f(t)}),skyboxCapture:t=>({u_matrix_3f:new e.UniformMatrix3f(t),u_sun_direction:new e.Uniform3f(t),u_sun_intensity:new e.Uniform1f(t),u_color_tint_r:new e.Uniform4f(t),u_color_tint_m:new e.Uniform4f(t),u_luminance:new e.Uniform1f(t)}),globeRaster:t=>({u_proj_matrix:new e.UniformMatrix4f(t),u_globe_matrix:new e.UniformMatrix4f(t),u_normalize_matrix:new e.UniformMatrix4f(t),u_merc_matrix:new e.UniformMatrix4f(t),u_zoom_transition:new e.Uniform1f(t),u_merc_center:new e.Uniform2f(t),u_image0:new e.Uniform1i(t),u_grid_matrix:new e.UniformMatrix3f(t),u_skirt_height:new e.Uniform1f(t),u_frustum_tl:new e.Uniform3f(t),u_frustum_tr:new e.Uniform3f(t),u_frustum_br:new e.Uniform3f(t),u_frustum_bl:new e.Uniform3f(t),u_globe_pos:new e.Uniform3f(t),u_globe_radius:new e.Uniform1f(t),u_viewport:new e.Uniform2f(t)}),globeAtmosphere:t=>({u_frustum_tl:new e.Uniform3f(t),u_frustum_tr:new e.Uniform3f(t),u_frustum_br:new e.Uniform3f(t),u_frustum_bl:new e.Uniform3f(t),u_horizon:new e.Uniform1f(t),u_transition:new e.Uniform1f(t),u_fadeout_range:new e.Uniform1f(t),u_color:new e.Uniform4f(t),u_high_color:new e.Uniform4f(t),u_space_color:new e.Uniform4f(t),u_star_intensity:new e.Uniform1f(t),u_star_density:new e.Uniform1f(t),u_star_size:new e.Uniform1f(t),u_temporal_offset:new e.Uniform1f(t),u_horizon_angle:new e.Uniform1f(t),u_rotation_matrix:new e.UniformMatrix4f(t)})};let ui;function di(t,n,i,a,o,r,s){const l=t.context,c=l.gl,u=t.transform,d=t.useProgram("collisionBox"),p=[];let f=0,m=0;for(let h=0;h<a.length;h++){const g=a[h],y=n.getTile(g),v=y.getBucket(i);if(!v)continue;const b=_t(g,v,u);let _=b;0===o[0]&&0===o[1]||(_=t.translatePosMatrix(b,y,o,r));const w=s?v.textCollisionBox:v.iconCollisionBox,x=v.collisionCircleArray;if(x.length>0){const t=e.create(),n=_;e.mul(t,v.placementInvProjMatrix,u.glCoordMatrix),e.mul(t,t,v.placementViewportMatrix),p.push({circleArray:x,circleOffset:m,transform:n,invTransform:t,projection:v.getProjection()}),f+=x.length/4,m=f}w&&(t.terrain&&t.terrain.setupElevationDraw(y,d),d.draw(l,c.LINES,e.DepthMode.disabled,e.StencilMode.disabled,t.colorModeForRenderPass(),e.CullFaceMode.disabled,Gn(_,u,y,v.getProjection()),i.id,w.layoutVertexBuffer,w.indexBuffer,w.segments,null,u.zoom,null,[w.collisionVertexBuffer,w.collisionVertexBufferExt]))}if(!s||!p.length)return;const h=t.useProgram("collisionCircle"),g=new e.StructArrayLayout2f1f2i16;g.resize(4*f),g._trim();let y=0;for(const e of p)for(let t=0;t<e.circleArray.length/4;t++){const n=4*t,i=e.circleArray[n+0],a=e.circleArray[n+1],o=e.circleArray[n+2],r=e.circleArray[n+3];g.emplace(y++,i,a,o,r,0),g.emplace(y++,i,a,o,r,1),g.emplace(y++,i,a,o,r,2),g.emplace(y++,i,a,o,r,3)}(!ui||ui.length<2*f)&&(ui=function(t){const n=2*t,i=new e.StructArrayLayout3ui6;i.resize(n),i._trim();for(let e=0;e<n;e++){const t=6*e;i.uint16[t+0]=4*e+0,i.uint16[t+1]=4*e+1,i.uint16[t+2]=4*e+2,i.uint16[t+3]=4*e+2,i.uint16[t+4]=4*e+3,i.uint16[t+5]=4*e+0}return i}(f));const v=l.createIndexBuffer(ui,!0),b=l.createVertexBuffer(g,e.collisionCircleLayout.members,!0);for(const n of p){const a={u_matrix:n.transform,u_inv_matrix:n.invTransform,u_camera_to_center_distance:(_=u).getCameraToCenterDistance(n.projection),u_viewport_size:[_.width,_.height]};h.draw(l,c.TRIANGLES,e.DepthMode.disabled,e.StencilMode.disabled,t.colorModeForRenderPass(),e.CullFaceMode.disabled,a,i.id,b,v,e.SegmentVector.simpleSegment(0,2*n.circleOffset,n.circleArray.length,n.circleArray.length/2),null,u.zoom)}var _;b.destroy(),v.destroy()}const pi=e.create();function fi({width:t,height:n,anchor:i,textOffset:a,textScale:o},r){const{horizontalAlign:s,verticalAlign:l}=e.getAnchorAlignment(i),c=-(s-.5)*t,u=-(l-.5)*n,d=e.evaluateVariableOffset(i,a);return new e.Point((c/o+d[0])*r,(u/o+d[1])*r)}function mi(t,n,i,a,o,r,s,l,c,u,d){const p=t.text.placedSymbolArray,f=t.text.dynamicLayoutVertexArray,m=t.icon.dynamicLayoutVertexArray,h={},g=t.getProjection(),y=wt(l,g,r),v=r.elevation,b=g.upVectorScale(l.canonical,r.center.lat,r.worldSize).metersToTile;f.clear();for(let m=0;m<p.length;m++){const _=p.get(m),{tileAnchorX:w,tileAnchorY:x,numGlyphs:k}=_,O=_.hidden||!_.crossTileID||t.allowVerticalPlacement&&!_.placedOrientation?null:a[_.crossTileID];if(O){let a=0,p=0,m=0;if(v){const e=v?v.getAtTileOffset(l,w,x):0,[t,n,i]=g.upVector(l.canonical,w,x);a=e*t*b,p=e*n*b,m=e*i*b}let[T,C,E,S]=ot(_.projectedAnchorX+a,_.projectedAnchorY+p,_.projectedAnchorZ+m,i?y:s);const P=rt(r.getCameraToCenterDistance(g),S);let I=o.evaluateSizeForFeature(t.textSizeData,u,_)*P/e.ONE_EM;i&&(I*=t.tilePixelRatio/c);const M=fi(O,I);i?(({x:T,y:C,z:E}=g.projectTilePoint(w+M.x,x+M.y,l.canonical)),[T,C,E]=ot(T+a,C+p,E+m,s)):(n&&M._rotate(-r.angle),T+=M.x,C+=M.y,E=0);const A=t.allowVerticalPlacement&&_.placedOrientation===e.WritingMode.vertical?Math.PI/2:0;for(let t=0;t<k;t++)e.addDynamicAttributes(f,T,C,E,A);d&&_.associatedIconIndex>=0&&(h[_.associatedIconIndex]={x:T,y:C,z:E,angle:A})}else ht(k,f)}if(d){m.clear();const n=t.icon.placedSymbolArray;for(let t=0;t<n.length;t++){const i=n.get(t),{numGlyphs:a}=i,o=h[t];if(i.hidden||!o)ht(a,m);else{const{x:t,y:n,z:i,angle:r}=o;for(let o=0;o<a;o++)e.addDynamicAttributes(m,t,n,i,r)}}t.icon.dynamicLayoutVertexBuffer.updateData(m)}t.text.dynamicLayoutVertexBuffer.updateData(f)}function hi(e,t,n){return n.iconsInText&&t?"symbolTextAndIcon":e?"symbolSDF":"symbolIcon"}function gi(t,n,i,a,o,r,s,l,c,u,d,p){const f=t.context,m=f.gl,h=t.transform,g="map"===l,y="map"===c,v=g&&"point"!==i.layout.get("symbol-placement"),b=g&&!y&&!v,_=void 0!==i.layout.get("symbol-sort-key").constantOr(1);let w=!1;const x=t.depthModeForSublayer(0,e.DepthMode.ReadOnly),k=[e.mercatorXfromLng(h.center.lng),e.mercatorYfromLat(h.center.lat)],O=i.layout.get("text-variable-anchor"),T="globe"===h.projection.name,C=[],E=[0,-1,0];let S=E;!T&&!h.mercatorFromTransition||g||(S=function(t){const n=t._camera.getWorldToCamera(t.worldSize,1),i=e.multiply([],n,t.globeMatrix);e.invert(i,i);const a=[0,0,0],o=[0,1,0,0];return e.transformMat4$1(o,o,i),a[0]=o[0],a[1]=o[1],a[2]=o[2],e.normalize(a,a),a}(h));for(const l of a){const a=n.getTile(l),c=a.getBucket(i);if(!c)continue;if("mercator"===c.projection.name&&T)continue;const d=o?c.text:c.icon;if(!d||c.fullyClipped||!d.segments.get().length)continue;const p=d.programConfigurations.get(i.id),f=o||c.sdfIcons,x=o?c.textSizeData:c.iconSizeData,P=y||0!==h.pitch,I=e.evaluateSizeForZoom(x,h.zoom);let M,A,j,N,L=[0,0],D=null;if(o)A=a.glyphAtlasTexture,j=m.LINEAR,M=a.glyphAtlasTexture.size,c.iconsInText&&(L=a.imageAtlasTexture.size,D=a.imageAtlasTexture,N=P||t.options.rotating||t.options.zooming||"composite"===x.kind||"camera"===x.kind?m.LINEAR:m.NEAREST);else{const e=1!==i.layout.get("icon-size").constantOr(0)||c.iconsNeedLinear;A=a.imageAtlasTexture,j=f||t.options.rotating||t.options.zooming||e||P?m.LINEAR:m.NEAREST,M=a.imageAtlasTexture.size}const R="globe"===c.projection.name,B=R?S:E,z=R?e.globeToMercatorTransition(h.zoom):0,F=wt(l,c.getProjection(),h),U=h.calculatePixelsToTileUnitsMatrix(a),H=nt(F,a.tileID.canonical,y,g,h,c.getProjection(),U),W=t.terrain&&y&&v?e.invert(e.create(),H):pi,q=at(F,a.tileID.canonical,y,g,h,c.getProjection(),U),V=O&&c.hasTextData(),G="none"!==i.layout.get("icon-text-fit")&&V&&c.hasIconData();if(v){const e=h.elevation,n=e?e.getAtTileOffsetFunc(l,h.center.lat,h.worldSize,c.getProjection()):null,i=it(F,a.tileID.canonical,y,g,h,c.getProjection(),U);lt(c,F,t,o,i,q,y,u,n,l)}const Y=v||o&&O||G,X=t.translatePosMatrix(F,a,r,s),Z=Y?pi:H,J=t.translatePosMatrix(q,a,r,s,!0),K=c.getProjection().createInversionMatrix(h,l.canonical),$=[];t.terrainRenderModeElevated()&&y&&$.push("PITCH_WITH_MAP_TERRAIN"),R&&$.push("PROJECTION_GLOBE_VIEW"),Y&&$.push("PROJECTED_POS_ON_VIEWPORT");const Q=f&&0!==i.paint.get(o?"text-halo-width":"icon-halo-width").constantOr(1);let ee;ee=f?c.iconsInText?ri(x.kind,I,b,y,t,X,Z,J,M,L,l,z,k,K,B,c.getProjection()):oi(x.kind,I,b,y,t,X,Z,J,o,M,!0,l,z,k,K,B,c.getProjection()):ai(x.kind,I,b,y,t,X,Z,J,o,M,l,z,k,K,B,c.getProjection());const te={program:t.useProgram(hi(f,o,c),p,$),buffers:d,uniformValues:ee,atlasTexture:A,atlasTextureIcon:D,atlasInterpolation:j,atlasInterpolationIcon:N,isSDF:f,hasHalo:Q,tile:a,labelPlaneMatrixInv:W};if(_&&c.canOverlap){w=!0;const t=d.segments.get();for(const n of t)C.push({segments:new e.SegmentVector([n]),sortKey:n.sortKey,state:te})}else C.push({segments:d.segments,sortKey:0,state:te})}w&&C.sort((e,t)=>e.sortKey-t.sortKey);for(const e of C){const n=e.state;if(t.terrain&&t.terrain.setupElevationDraw(n.tile,n.program,{useDepthForOcclusion:!T,labelPlaneMatrixInv:n.labelPlaneMatrixInv}),f.activeTexture.set(m.TEXTURE0),n.atlasTexture.bind(n.atlasInterpolation,m.CLAMP_TO_EDGE),n.atlasTextureIcon&&(f.activeTexture.set(m.TEXTURE1),n.atlasTextureIcon&&n.atlasTextureIcon.bind(n.atlasInterpolationIcon,m.CLAMP_TO_EDGE)),n.isSDF){const a=n.uniformValues;n.hasHalo&&(a.u_is_halo=1,yi(n.buffers,e.segments,i,t,n.program,x,d,p,a)),a.u_is_halo=0}yi(n.buffers,e.segments,i,t,n.program,x,d,p,n.uniformValues)}}function yi(t,n,i,a,o,r,s,l,c){const u=a.context,d=[t.dynamicLayoutVertexBuffer,t.opacityVertexBuffer,t.globeExtVertexBuffer];o.draw(u,u.gl.TRIANGLES,r,s,l,e.CullFaceMode.disabled,c,i.id,t.layoutVertexBuffer,t.indexBuffer,n,i.paint,a.transform.zoom,t.programConfigurations.get(i.id),d)}function vi(t,n,i,a,o,r,s){const l=t.context.gl,c=i.paint.get("fill-pattern"),u=c&&c.constantOr(1);let d,p,f,m,h;s?(p=u&&!i.getPaintProperty("fill-outline-color")?"fillOutlinePattern":"fillOutline",d=l.LINES):(p=u?"fillPattern":"fill",d=l.TRIANGLES);for(const g of a){const a=n.getTile(g);if(u&&!a.patternsLoaded())continue;const y=a.getBucket(i);if(!y)continue;t.prepareDrawTile();const v=y.programConfigurations.get(i.id),b=t.useProgram(p,v);u&&(t.context.activeTexture.set(l.TEXTURE0),a.imageAtlasTexture.bind(l.LINEAR,l.CLAMP_TO_EDGE),v.updatePaintBuffers());const _=c.constantOr(null);if(_&&a.imageAtlas){const e=a.imageAtlas.patternPositions[_.toString()];e&&v.setConstantPatternPositions(e)}const w=t.translatePosMatrix(g.projMatrix,a,i.paint.get("fill-translate"),i.paint.get("fill-translate-anchor"));if(s){m=y.indexBuffer2,h=y.segments2;const e=t.terrain&&t.terrain.renderingToTexture?t.terrain.drapeBufferSize:[l.drawingBufferWidth,l.drawingBufferHeight];f="fillOutlinePattern"===p&&u?Hn(w,t,a,e):Un(w,e)}else m=y.indexBuffer,h=y.segments,f=u?Fn(w,t,a):zn(w);t.prepareDrawProgram(t.context,b,g.toUnwrapped()),b.draw(t.context,d,o,t.stencilModeForClipping(g),r,e.CullFaceMode.disabled,f,i.id,y.layoutVertexBuffer,m,h,i.paint,t.transform.zoom,v)}}function bi(t,n,i,a,o,r,s){const l=t.context,c=l.gl,u=t.transform,d=i.paint.get("fill-extrusion-pattern"),p=d.constantOr(1),f=i.paint.get("fill-extrusion-opacity"),m=[i.paint.get("fill-extrusion-ambient-occlusion-intensity"),i.paint.get("fill-extrusion-ambient-occlusion-radius")],h=i.layout.get("fill-extrusion-edge-radius"),g=h>0&&!i.paint.get("fill-extrusion-rounded-roof"),y=g?0:h,v="globe"===u.projection.name?e.fillExtrusionHeightLift():0,b="globe"===u.projection.name,_=b?e.globeToMercatorTransition(u.zoom):0,w=[e.mercatorXfromLng(u.center.lng),e.mercatorYfromLat(u.center.lat)],x=[];b&&x.push("PROJECTION_GLOBE_VIEW"),m[0]>0&&x.push("FAUX_AO"),g&&x.push("ZERO_ROOF_RADIUS");for(const h of a){const a=n.getTile(h),g=a.getBucket(i);if(!g||g.projection.name!==u.projection.name)continue;const k=g.programConfigurations.get(i.id),O=t.useProgram(p?"fillExtrusionPattern":"fillExtrusion",k,x);if(t.terrain){const e=t.terrain;if(t.style.terrainSetForDrapingOnly())e.setupElevationDraw(a,O,{useMeterToDem:!0});else{if(!g.enableTerrain)continue;if(e.setupElevationDraw(a,O,{useMeterToDem:!0}),_i(l,n,h,g,i,e),!g.centroidVertexBuffer){const e=O.attributes.a_centroid_pos;void 0!==e&&c.vertexAttrib2f(e,0,0)}}}p&&(t.context.activeTexture.set(c.TEXTURE0),a.imageAtlasTexture.bind(c.LINEAR,c.CLAMP_TO_EDGE),k.updatePaintBuffers());const T=d.constantOr(null);if(T&&a.imageAtlas){const e=a.imageAtlas.patternPositions[T.toString()];e&&k.setConstantPatternPositions(e)}const C=t.translatePosMatrix(h.projMatrix,a,i.paint.get("fill-extrusion-translate"),i.paint.get("fill-extrusion-translate-anchor")),E=u.projection.createInversionMatrix(u,h.canonical),S=i.paint.get("fill-extrusion-vertical-gradient"),P=p?Bn(C,t,S,f,m,y,h,a,v,_,w,E):Rn(C,t,S,f,m,y,h,v,_,w,E);t.prepareDrawProgram(l,O,h.toUnwrapped());const I=[];t.terrain&&I.push(g.centroidVertexBuffer),b&&I.push(g.layoutVertexExtBuffer),O.draw(l,l.gl.TRIANGLES,o,r,s,e.CullFaceMode.backCCW,P,i.id,g.layoutVertexBuffer,g.indexBuffer,g.segments,i.paint,t.transform.zoom,k,I)}}function _i(t,n,i,a,o,r){const s=[t=>{let n=t.canonical.x-1,i=t.wrap;return n<0&&(n=(1<<t.canonical.z)-1,i--),new e.OverscaledTileID(t.overscaledZ,i,t.canonical.z,n,t.canonical.y)},t=>{let n=t.canonical.x+1,i=t.wrap;return n===1<<t.canonical.z&&(n=0,i++),new e.OverscaledTileID(t.overscaledZ,i,t.canonical.z,n,t.canonical.y)},t=>new e.OverscaledTileID(t.overscaledZ,t.wrap,t.canonical.z,t.canonical.x,(0===t.canonical.y?1<<t.canonical.z:t.canonical.y)-1),t=>new e.OverscaledTileID(t.overscaledZ,t.wrap,t.canonical.z,t.canonical.x,t.canonical.y===(1<<t.canonical.z)-1?0:t.canonical.y+1)],l=e=>{const t=n.getSource().minzoom,i=e=>{const t=n.getTileByID(e);if(t&&t.hasData())return t.getBucket(o)},a=[0,-1,1];for(const n of a){if(e.overscaledZ+n<t)continue;const a=i(e.calculateScaledKey(e.overscaledZ+n));if(a)return a}},c=[0,0,0],u=(t,n)=>(c[0]=Math.min(t.min.y,n.min.y),c[1]=Math.max(t.max.y,n.max.y),c[2]=e.EXTENT-n.min.x>t.max.x?n.min.x-e.EXTENT:t.max.x,c),d=(t,n)=>(c[0]=Math.min(t.min.x,n.min.x),c[1]=Math.max(t.max.x,n.max.x),c[2]=e.EXTENT-n.min.y>t.max.y?n.min.y-e.EXTENT:t.max.y,c),p=[(e,t)=>u(e,t),(e,t)=>u(t,e),(e,t)=>d(e,t),(e,t)=>d(t,e)],f=new e.Point(0,0);let m,h,g;const y=(t,n,a,o,s)=>{const l=[[o?a:t,o?t:a,0],[o?a:n,o?n:a,0]],c=s<0?e.EXTENT+s:s,u=[o?c:(t+n)/2,o?(t+n)/2:c,0];return 0===a&&s<0||0!==a&&s>0?r.getForTilePoints(g,[u],!0,h):l.push(u),r.getForTilePoints(i,l,!0,m),Math.max(l[0][2],l[1][2],u[2])/r.exaggeration()};for(let t=0;t<4;t++){const n=(t<2?1:5)-t,o=a.borders[t];if(0===o.length)continue;const c=g=s[t](i),u=l(c);if(!(u&&u instanceof e.FillExtrusionBucket&&u.enableTerrain))continue;if(a.borderDoneWithNeighborZ[t]===u.canonical.z&&u.borderDoneWithNeighborZ[n]===a.canonical.z)continue;if(h=r.findDEMTileFor(c),!h||!h.dem)continue;if(!m){const e=r.findDEMTileFor(i);if(!e||!e.dem)return;m=e}const d=u.borders[n];let v=0;const b=u.borderDoneWithNeighborZ[n]!==a.canonical.z;if(a.canonical.z===u.canonical.z){for(let i=0;i<o.length;i++){const r=a.featuresOnBorder[o[i]],s=r.borders[t];let l;for(;v<d.length&&(l=u.featuresOnBorder[d[v]],!(l.borders[n][1]>s[0]+3));)b&&u.encodeCentroid(void 0,l,!1),v++;if(l&&v<d.length){const i=v;let o=0;for(;!(l.borders[n][0]>s[1]-3)&&(o++,++v!==d.length);)l=u.featuresOnBorder[d[v]];if(l=u.featuresOnBorder[d[i]],r.intersectsCount()>1||l.intersectsCount()>1||1!==o){1!==o&&(v=i),a.encodeCentroid(void 0,r,!1),b&&u.encodeCentroid(void 0,l,!1);continue}const c=p[t](r,l),m=t%2?e.EXTENT-1:0;f.x=y(c[0],Math.min(e.EXTENT-1,c[1]),m,t<2,c[2]),f.y=0,a.encodeCentroid(f,r,!1),b&&u.encodeCentroid(f,l,!1)}else a.encodeCentroid(void 0,r,!1)}a.borderDoneWithNeighborZ[t]=u.canonical.z,a.needsCentroidUpdate=!0,b&&(u.borderDoneWithNeighborZ[n]=a.canonical.z,u.needsCentroidUpdate=!0)}else{for(const e of o)a.encodeCentroid(void 0,a.featuresOnBorder[e],!1);if(b){for(const e of d)u.encodeCentroid(void 0,u.featuresOnBorder[e],!1);u.borderDoneWithNeighborZ[n]=a.canonical.z,u.needsCentroidUpdate=!0}a.borderDoneWithNeighborZ[t]=u.canonical.z,a.needsCentroidUpdate=!0}}(a.needsCentroidUpdate||!a.centroidVertexBuffer&&0!==a.centroidVertexArray.length)&&a.uploadCentroid(t)}const wi=new e.Color(1,0,0,1),xi=new e.Color(0,1,0,1),ki=new e.Color(0,0,1,1),Oi=new e.Color(1,0,1,1),Ti=new e.Color(0,1,1,1);function Ci(t,n,i){const a=t.context,o=t.transform,r=a.gl,s="globe"===o.projection.name,l=s?["PROJECTION_GLOBE_VIEW"]:null;let c=i.projMatrix;if(s&&e.globeToMercatorTransition(o.zoom)>0){const t=e.transitionTileAABBinECEF(i.canonical,o),n=e.globeDenormalizeECEF(t);c=e.multiply(new Float32Array(16),o.globeMatrix,n),e.multiply(c,o.projMatrix,c)}const u=t.useProgram("debug",null,l),d=n.getTileByID(i.key);t.terrain&&t.terrain.setupElevationDraw(d,u);const p=e.DepthMode.disabled,f=e.StencilMode.disabled,m=t.colorModeForRenderPass(),h="$debug";a.activeTexture.set(r.TEXTURE0),t.emptyTexture.bind(r.LINEAR,r.CLAMP_TO_EDGE),s?d._makeGlobeTileDebugBuffers(t.context,o):d._makeDebugTileBoundsBuffers(t.context,o.projection);const g=d._tileDebugBuffer||t.debugBuffer,y=d._tileDebugIndexBuffer||t.debugIndexBuffer,v=d._tileDebugSegments||t.debugSegments;u.draw(a,r.LINE_STRIP,p,f,m,e.CullFaceMode.disabled,Yn(c,e.Color.red),h,g,y,v,null,null,null,[d._globeTileDebugBorderBuffer]);const b=d.latestRawTileData,_=Math.floor((b&&b.byteLength||0)/1024),w=n.getTile(i).tileSize,x=512/Math.min(w,512)*(i.overscaledZ/o.zoom)*.5;let k=i.canonical.toString();i.overscaledZ!==i.canonical.z&&(k+=" => "+i.overscaledZ),k+=` ${_}kb`,function(e,t){e.initDebugOverlayCanvas();const n=e.debugOverlayCanvas,i=e.context.gl,a=e.debugOverlayCanvas.getContext("2d");a.clearRect(0,0,n.width,n.height),a.shadowColor="white",a.shadowBlur=2,a.lineWidth=1.5,a.strokeStyle="white",a.textBaseline="top",a.font="bold 36px Open Sans, sans-serif",a.fillText(t,5,5),a.strokeText(t,5,5),e.debugOverlayTexture.update(n),e.debugOverlayTexture.bind(i.LINEAR,i.CLAMP_TO_EDGE)}(t,k);const O=d._tileDebugTextBuffer||t.debugBuffer,T=d._tileDebugTextIndexBuffer||t.quadTriangleIndexBuffer,C=d._tileDebugTextSegments||t.debugSegments;u.draw(a,r.TRIANGLES,p,f,e.ColorMode.alphaBlended,e.CullFaceMode.disabled,Yn(c,e.Color.transparent,x),h,O,T,C,null,null,null,[d._globeTileDebugTextBuffer])}function Ei(e,t,n,i){Pi(e,0,t+n/2,e.transform.width,n,i)}function Si(e,t,n,i){Pi(e,t-n/2,0,n,e.transform.height,i)}function Pi(t,n,i,a,o,r){const s=t.context,l=s.gl;l.enable(l.SCISSOR_TEST),l.scissor(n*e.exported.devicePixelRatio,i*e.exported.devicePixelRatio,a*e.exported.devicePixelRatio,o*e.exported.devicePixelRatio),s.clear({color:r}),l.disable(l.SCISSOR_TEST)}const Ii=e.createLayout([{name:"a_pos_3f",components:3,type:"Float32"}]),{members:Mi}=Ii;function Ai(e,t,n,i){e.emplaceBack(t,n,i)}class ji{constructor(t){this.vertexArray=new e.StructArrayLayout3f12,this.indices=new e.StructArrayLayout3ui6,Ai(this.vertexArray,-1,-1,1),Ai(this.vertexArray,1,-1,1),Ai(this.vertexArray,-1,1,1),Ai(this.vertexArray,1,1,1),Ai(this.vertexArray,-1,-1,-1),Ai(this.vertexArray,1,-1,-1),Ai(this.vertexArray,-1,1,-1),Ai(this.vertexArray,1,1,-1),this.indices.emplaceBack(5,1,3),this.indices.emplaceBack(3,7,5),this.indices.emplaceBack(6,2,0),this.indices.emplaceBack(0,4,6),this.indices.emplaceBack(2,6,7),this.indices.emplaceBack(7,3,2),this.indices.emplaceBack(5,4,0),this.indices.emplaceBack(0,1,5),this.indices.emplaceBack(0,2,3),this.indices.emplaceBack(3,1,0),this.indices.emplaceBack(7,6,4),this.indices.emplaceBack(4,5,7),this.vertexBuffer=t.createVertexBuffer(this.vertexArray,Mi),this.indexBuffer=t.createIndexBuffer(this.indices),this.segment=e.SegmentVector.simpleSegment(0,0,36,12)}}function Ni(t,n,i,a,o,r){const s=t.gl,l=n.paint.get("sky-atmosphere-color"),c=n.paint.get("sky-atmosphere-halo-color"),u=n.paint.get("sky-atmosphere-sun-intensity"),d=((e,t,n,i,a)=>({u_matrix_3f:e,u_sun_direction:t,u_sun_intensity:n,u_color_tint_r:[i.r,i.g,i.b,i.a],u_color_tint_m:[a.r,a.g,a.b,a.a],u_luminance:5e-5}))(e.fromMat4(e.create$1(),a),o,u,l,c);s.framebufferTexture2D(s.FRAMEBUFFER,s.COLOR_ATTACHMENT0,s.TEXTURE_CUBE_MAP_POSITIVE_X+r,n.skyboxTexture,0),i.draw(t,s.TRIANGLES,e.DepthMode.disabled,e.StencilMode.disabled,e.ColorMode.unblended,e.CullFaceMode.frontCW,d,"skyboxCapture",n.skyboxGeometry.vertexBuffer,n.skyboxGeometry.indexBuffer,n.skyboxGeometry.segment)}const Li=e.createLayout([{type:"Float32",name:"a_pos",components:3},{type:"Float32",name:"a_uv",components:2}]);class Di{constructor(t){const n=new e.StructArrayLayout5f20;n.emplaceBack(-1,1,1,0,0),n.emplaceBack(1,1,1,1,0),n.emplaceBack(1,-1,1,1,1),n.emplaceBack(-1,-1,1,0,1);const i=new e.StructArrayLayout3ui6;i.emplaceBack(0,1,2),i.emplaceBack(2,3,0),this.vertexBuffer=t.createVertexBuffer(n,Li.members),this.indexBuffer=t.createIndexBuffer(i),this.segments=e.SegmentVector.simpleSegment(0,0,4,2)}destroy(){this.vertexBuffer.destroy(),this.indexBuffer.destroy(),this.segments.destroy()}}const Ri={symbol:function(t,n,i,a,o){if("translucent"!==t.renderPass)return;const r=e.StencilMode.disabled,s=t.colorModeForRenderPass();i.layout.get("text-variable-anchor")&&function(t,n,i,a,o,r,s){const l=n.transform,c="map"===o,u="map"===r;for(const n of t){const t=a.getTile(n),o=t.getBucket(i);if(!o||!o.text||!o.text.segments.get().length)continue;const r=e.evaluateSizeForZoom(o.textSizeData,l.zoom),d=wt(n,o.getProjection(),l),p=l.calculatePixelsToTileUnitsMatrix(t),f=nt(d,t.tileID.canonical,u,c,l,o.getProjection(),p),m="none"!==i.layout.get("icon-text-fit")&&o.hasIconData();if(r){const i=Math.pow(2,l.zoom-t.tileID.overscaledZ);mi(o,c,u,s,e.symbolSize,l,f,n,i,r,m)}}}(a,t,i,n,i.layout.get("text-rotation-alignment"),i.layout.get("text-pitch-alignment"),o),0!==i.paint.get("icon-opacity").constantOr(1)&&gi(t,n,i,a,!1,i.paint.get("icon-translate"),i.paint.get("icon-translate-anchor"),i.layout.get("icon-rotation-alignment"),i.layout.get("icon-pitch-alignment"),i.layout.get("icon-keep-upright"),r,s),0!==i.paint.get("text-opacity").constantOr(1)&&gi(t,n,i,a,!0,i.paint.get("text-translate"),i.paint.get("text-translate-anchor"),i.layout.get("text-rotation-alignment"),i.layout.get("text-pitch-alignment"),i.layout.get("text-keep-upright"),r,s),n.map.showCollisionBoxes&&(di(t,n,i,a,i.paint.get("text-translate"),i.paint.get("text-translate-anchor"),!0),di(t,n,i,a,i.paint.get("icon-translate"),i.paint.get("icon-translate-anchor"),!1))},circle:function(t,n,i,a){if("translucent"!==t.renderPass)return;const o=i.paint.get("circle-opacity"),r=i.paint.get("circle-stroke-width"),s=i.paint.get("circle-stroke-opacity"),l=void 0!==i.layout.get("circle-sort-key").constantOr(1);if(0===o.constantOr(1)&&(0===r.constantOr(1)||0===s.constantOr(1)))return;const c=t.context,u=c.gl,d=t.transform,p=t.depthModeForSublayer(0,e.DepthMode.ReadOnly),f=e.StencilMode.disabled,m=t.colorModeForRenderPass(),h="globe"===d.projection.name,g=[e.mercatorXfromLng(d.center.lng),e.mercatorYfromLat(d.center.lat)],y=[];for(let o=0;o<a.length;o++){const r=a[o],s=n.getTile(r),c=s.getBucket(i);if(!c||c.projection.name!==d.projection.name)continue;const u=c.programConfigurations.get(i.id),p=Vn(i);h&&p.push("PROJECTION_GLOBE_VIEW");const f=t.useProgram("circle",u,p),m=c.layoutVertexBuffer,v=c.globeExtVertexBuffer,b=c.indexBuffer,_=d.projection.createInversionMatrix(d,r.canonical),w={programConfiguration:u,program:f,layoutVertexBuffer:m,globeExtVertexBuffer:v,indexBuffer:b,uniformValues:qn(t,r,s,_,g,i),tile:s};if(l){const t=c.segments.get();for(const n of t)y.push({segments:new e.SegmentVector([n]),sortKey:n.sortKey,state:w})}else y.push({segments:c.segments,sortKey:0,state:w})}l&&y.sort((e,t)=>e.sortKey-t.sortKey);const v={useDepthForOcclusion:!h};for(const n of y){const{programConfiguration:a,program:o,layoutVertexBuffer:r,globeExtVertexBuffer:s,indexBuffer:l,uniformValues:h,tile:g}=n.state,y=n.segments;t.terrain&&t.terrain.setupElevationDraw(g,o,v),t.prepareDrawProgram(c,o,g.tileID.toUnwrapped()),o.draw(c,u.TRIANGLES,p,f,m,e.CullFaceMode.disabled,h,i.id,r,l,y,i.paint,d.zoom,a,[s])}},heatmap:function(t,n,i,a){if(0!==i.paint.get("heatmap-opacity"))if("offscreen"===t.renderPass){const o=t.context,r=o.gl,s=e.StencilMode.disabled,l=new e.ColorMode([r.ONE,r.ONE],e.Color.transparent,[!0,!0,!0,!0]);!function(e,t,n,i){const a=e.gl,o=t.width*i,r=t.height*i;e.activeTexture.set(a.TEXTURE1),e.viewport.set([0,0,o,r]);let s=n.heatmapFbo;if(!s||s&&(s.width!==o||s.height!==r)){s&&s.destroy();const t=a.createTexture();a.bindTexture(a.TEXTURE_2D,t),a.texParameteri(a.TEXTURE_2D,a.TEXTURE_WRAP_S,a.CLAMP_TO_EDGE),a.texParameteri(a.TEXTURE_2D,a.TEXTURE_WRAP_T,a.CLAMP_TO_EDGE),a.texParameteri(a.TEXTURE_2D,a.TEXTURE_MIN_FILTER,a.LINEAR),a.texParameteri(a.TEXTURE_2D,a.TEXTURE_MAG_FILTER,a.LINEAR),s=n.heatmapFbo=e.createFramebuffer(o,r,!1),function(e,t,n,i,a,o){const r=e.gl;r.texImage2D(r.TEXTURE_2D,0,e.isWebGL2&&e.extRenderToTextureHalfFloat?r.RGBA16F:r.RGBA,a,o,0,r.RGBA,e.extRenderToTextureHalfFloat?e.isWebGL2?r.HALF_FLOAT:e.extTextureHalfFloat.HALF_FLOAT_OES:r.UNSIGNED_BYTE,null),i.colorAttachment.set(n)}(e,0,t,s,o,r)}else a.bindTexture(a.TEXTURE_2D,s.colorAttachment.get()),e.bindFramebuffer.set(s.framebuffer)}(o,t,i,"globe"===t.transform.projection.name?.5:.25),o.clear({color:e.Color.transparent});const c=t.transform,u="globe"===c.projection.name,d=u?["PROJECTION_GLOBE_VIEW"]:null,p=u?e.CullFaceMode.frontCCW:e.CullFaceMode.disabled,f=[e.mercatorXfromLng(c.center.lng),e.mercatorYfromLat(c.center.lat)];for(let m=0;m<a.length;m++){const h=a[m];if(n.hasRenderableParent(h))continue;const g=n.getTile(h),y=g.getBucket(i);if(!y||y.projection.name!==c.projection.name)continue;const v=y.programConfigurations.get(i.id),b=t.useProgram("heatmap",v,d),{zoom:_}=t.transform;t.terrain&&t.terrain.setupElevationDraw(g,b),t.prepareDrawProgram(o,b,h.toUnwrapped());const w=c.projection.createInversionMatrix(c,h.canonical);b.draw(o,r.TRIANGLES,e.DepthMode.disabled,s,l,p,Zn(t,h,g,w,f,_,i.paint.get("heatmap-intensity")),i.id,y.layoutVertexBuffer,y.indexBuffer,y.segments,i.paint,t.transform.zoom,v,u?[y.globeExtVertexBuffer]:null)}o.viewport.set([0,0,t.width,t.height])}else"translucent"===t.renderPass&&(t.context.setColorMode(t.colorModeForRenderPass()),function(t,n){const i=t.context,a=i.gl,o=n.heatmapFbo;if(!o)return;i.activeTexture.set(a.TEXTURE0),a.bindTexture(a.TEXTURE_2D,o.colorAttachment.get()),i.activeTexture.set(a.TEXTURE1);let r=n.colorRampTexture;r||(r=n.colorRampTexture=new e.Texture(i,n.colorRamp,a.RGBA)),r.bind(a.LINEAR,a.CLAMP_TO_EDGE),t.useProgram("heatmapTexture").draw(i,a.TRIANGLES,e.DepthMode.disabled,e.StencilMode.disabled,t.colorModeForRenderPass(),e.CullFaceMode.disabled,((e,t,n,i)=>({u_image:0,u_color_ramp:1,u_opacity:t.paint.get("heatmap-opacity")}))(0,n),n.id,t.viewportBuffer,t.quadTriangleIndexBuffer,t.viewportSegments,n.paint,t.transform.zoom)}(t,i))},line:function(t,n,i,a){if("translucent"!==t.renderPass)return;const o=i.paint.get("line-opacity"),r=i.paint.get("line-width");if(0===o.constantOr(1)||0===r.constantOr(1))return;const s=t.depthModeForSublayer(0,e.DepthMode.ReadOnly),l=t.colorModeForRenderPass(),c=t.terrain&&t.terrain.renderingToTexture?1:e.exported.devicePixelRatio,u=i.paint.get("line-dasharray"),d=u.constantOr(1),p=i.layout.get("line-cap"),f=i.paint.get("line-pattern"),m=f.constantOr(1),h=i.paint.get("line-gradient"),g=m?"linePattern":"line",y=t.context,v=y.gl,b=(e=>{const t=[];ei(e)&&t.push("RENDER_LINE_DASH"),e.paint.get("line-gradient")&&t.push("RENDER_LINE_GRADIENT");const n=e.paint.get("line-trim-offset");0===n[0]&&0===n[1]||t.push("RENDER_LINE_TRIM_OFFSET");const i=e.paint.get("line-pattern").constantOr(1),a=1!==e.paint.get("line-opacity").constantOr(1);return!i&&a&&t.push("RENDER_LINE_ALPHA_DISCARD"),t})(i);let _=b.includes("RENDER_LINE_ALPHA_DISCARD");t.terrain&&t.terrain.clipOrMaskOverlapStencilType()&&(_=!1);for(const o of a){const a=n.getTile(o);if(m&&!a.patternsLoaded())continue;const r=a.getBucket(i);if(!r)continue;t.prepareDrawTile();const w=r.programConfigurations.get(i.id),x=t.useProgram(g,w,b),k=f.constantOr(null);if(k&&a.imageAtlas){const e=a.imageAtlas.patternPositions[k.toString()];e&&w.setConstantPatternPositions(e)}const O=u.constantOr(null),T=p.constantOr(null);if(!m&&O&&T&&a.lineAtlas){const e=a.lineAtlas.getDash(O,T);e&&w.setConstantPatternPositions(e)}let[C,E]=i.paint.get("line-trim-offset");if("round"===T||"square"===T){const e=1;C!==E&&(0===C&&(C-=e),1===E&&(E+=e))}const S=t.terrain?o.projMatrix:null,P=m?Kn(t,a,i,S,c):Jn(t,a,i,S,r.lineClipsArray.length,c,[C,E]);if(h){const a=r.gradients[i.id];let s=a.texture;if(i.gradientVersion!==a.version){let l=256;if(i.stepInterpolant){const i=n.getSource().maxzoom,a=o.canonical.z===i?Math.ceil(1<<t.transform.maxZoom-o.canonical.z):1;l=e.clamp(e.nextPowerOfTwo(r.maxLineLength/e.EXTENT*1024*a),256,y.maxTextureSize)}a.gradient=e.renderColorRamp({expression:i.gradientExpression(),evaluationKey:"lineProgress",resolution:l,image:a.gradient||void 0,clips:r.lineClipsArray}),a.texture?a.texture.update(a.gradient):a.texture=new e.Texture(y,a.gradient,v.RGBA),a.version=i.gradientVersion,s=a.texture}y.activeTexture.set(v.TEXTURE1),s.bind(i.stepInterpolant?v.NEAREST:v.LINEAR,v.CLAMP_TO_EDGE)}d&&(y.activeTexture.set(v.TEXTURE0),a.lineAtlasTexture.bind(v.LINEAR,v.REPEAT),w.updatePaintBuffers()),m&&(y.activeTexture.set(v.TEXTURE0),a.imageAtlasTexture.bind(v.LINEAR,v.CLAMP_TO_EDGE),w.updatePaintBuffers()),t.prepareDrawProgram(y,x,o.toUnwrapped());const I=n=>{x.draw(y,v.TRIANGLES,s,n,l,e.CullFaceMode.disabled,P,i.id,r.layoutVertexBuffer,r.indexBuffer,r.segments,i.paint,t.transform.zoom,w,[r.layoutVertexBuffer2])};if(_){const n=t.stencilModeForClipping(o).ref;0===n&&t.terrain&&y.clear({stencil:0});const i={func:v.EQUAL,mask:255};P.u_alpha_discard_threshold=.8,I(new e.StencilMode(i,n,255,v.KEEP,v.KEEP,v.INVERT)),P.u_alpha_discard_threshold=0,I(new e.StencilMode(i,n,255,v.KEEP,v.KEEP,v.KEEP))}else I(t.stencilModeForClipping(o))}_&&(t.resetStencilClippingMasks(),t.terrain&&y.clear({stencil:0}))},fill:function(t,n,i,a){const o=i.paint.get("fill-color"),r=i.paint.get("fill-opacity");if(0===r.constantOr(1))return;const s=t.colorModeForRenderPass(),l=i.paint.get("fill-pattern"),c=t.opaquePassEnabledForLayer()&&!l.constantOr(1)&&1===o.constantOr(e.Color.transparent).a&&1===r.constantOr(0)?"opaque":"translucent";if(t.renderPass===c){const o=t.depthModeForSublayer(1,"opaque"===t.renderPass?e.DepthMode.ReadWrite:e.DepthMode.ReadOnly);vi(t,n,i,a,o,s,!1)}if("translucent"===t.renderPass&&i.paint.get("fill-antialias")){const o=t.depthModeForSublayer(i.getPaintProperty("fill-outline-color")?2:0,e.DepthMode.ReadOnly);vi(t,n,i,a,o,s,!0)}},"fill-extrusion":function(t,n,i,a){const o=i.paint.get("fill-extrusion-opacity");if(0!==o&&"translucent"===t.renderPass){const r=new e.DepthMode(t.context.gl.LEQUAL,e.DepthMode.ReadWrite,t.depthRangeFor3D);if(1!==o||i.paint.get("fill-extrusion-pattern").constantOr(1))bi(t,n,i,a,r,e.StencilMode.disabled,e.ColorMode.disabled),bi(t,n,i,a,r,t.stencilModeFor3D(),t.colorModeForRenderPass()),t.resetStencilClippingMasks();else{const o=t.colorModeForRenderPass();bi(t,n,i,a,r,e.StencilMode.disabled,o)}}},hillshade:function(t,n,i,a){if("offscreen"!==t.renderPass&&"translucent"!==t.renderPass)return;const o=t.context,r=t.depthModeForSublayer(0,e.DepthMode.ReadOnly),s=t.colorModeForRenderPass(),l=t.terrain&&t.terrain.renderingToTexture,[c,u]="translucent"!==t.renderPass||l?[{},a]:t.stencilConfigForOverlap(a);for(const a of u){const o=n.getTile(a);if(o.needsHillshadePrepare&&"offscreen"===t.renderPass)bn(t,o,i,r,e.StencilMode.disabled,s);else if("translucent"===t.renderPass){const e=l&&t.terrain?t.terrain.stencilModeForRTTOverlap(a):c[a.overscaledZ];yn(t,a,o,i,r,e,s)}}o.viewport.set([0,0,t.width,t.height]),t.resetStencilClippingMasks()},raster:function(t,n,i,a,o,r){if("translucent"!==t.renderPass)return;if(0===i.paint.get("raster-opacity"))return;if(!a.length)return;const s=t.context,l=s.gl,c=n.getSource(),u=t.useProgram("raster"),d=t.colorModeForRenderPass(),p=t.terrain&&t.terrain.renderingToTexture,[f,m]=c instanceof Se||p?[{},a]:t.stencilConfigForOverlap(a),h=m[m.length-1].overscaledZ,g=!t.options.moving;for(const a of m){const o=p?e.DepthMode.disabled:t.depthModeForSublayer(a.overscaledZ-h,1===i.paint.get("raster-opacity")?e.DepthMode.ReadWrite:e.DepthMode.ReadOnly,l.LESS),m=a.toUnwrapped(),y=n.getTile(a);if(p&&(!y||!y.hasData()))continue;const v=p?a.projMatrix:t.transform.calculateProjMatrix(m,g),b=t.terrain&&p?t.terrain.stencilModeForRTTOverlap(a):f[a.overscaledZ],_=r?0:i.paint.get("raster-fade-duration");y.registerFadeDuration(_);const w=n.findLoadedParent(a,0),x=Pn(y,w,n,t.transform,_);let k,O;t.terrain&&t.terrain.prepareDrawTile();const T="nearest"===i.paint.get("raster-resampling")?l.NEAREST:l.LINEAR;s.activeTexture.set(l.TEXTURE0),y.texture.bind(T,l.CLAMP_TO_EDGE),s.activeTexture.set(l.TEXTURE1),w?(w.texture.bind(T,l.CLAMP_TO_EDGE),k=Math.pow(2,w.tileID.overscaledZ-y.tileID.overscaledZ),O=[y.tileID.canonical.x*k%1,y.tileID.canonical.y*k%1]):y.texture.bind(T,l.CLAMP_TO_EDGE),y.texture.useMipmap&&s.extTextureFilterAnisotropic&&t.transform.pitch>20&&l.texParameterf(l.TEXTURE_2D,s.extTextureFilterAnisotropic.TEXTURE_MAX_ANISOTROPY_EXT,s.extTextureFilterAnisotropicMax);const C=ti(v,O||[0,0],k||1,x,i,c instanceof Se?c.perspectiveTransform:[0,0]);if(t.prepareDrawProgram(s,u,m),c instanceof Se)c.boundsBuffer&&c.boundsSegments&&u.draw(s,l.TRIANGLES,o,e.StencilMode.disabled,d,e.CullFaceMode.disabled,C,i.id,c.boundsBuffer,t.quadTriangleIndexBuffer,c.boundsSegments);else{const{tileBoundsBuffer:n,tileBoundsIndexBuffer:a,tileBoundsSegments:r}=t.getTileBoundsBuffers(y);u.draw(s,l.TRIANGLES,o,b,d,e.CullFaceMode.disabled,C,i.id,n,a,r)}}t.resetStencilClippingMasks()},background:function(t,n,i,a){const o=i.paint.get("background-color"),r=i.paint.get("background-opacity");if(0===r)return;const s=t.context,l=s.gl,c=t.transform,u=c.tileSize,d=i.paint.get("background-pattern");if(t.isPatternMissing(d))return;const p=!d&&1===o.a&&1===r&&t.opaquePassEnabledForLayer()?"opaque":"translucent";if(t.renderPass!==p)return;const f=e.StencilMode.disabled,m=t.depthModeForSublayer(0,"opaque"===p?e.DepthMode.ReadWrite:e.DepthMode.ReadOnly),h=t.colorModeForRenderPass(),g=t.useProgram(d?"backgroundPattern":"background");let y,v=a;v||(y=t.getBackgroundTiles(),v=Object.values(y).map(e=>e.tileID)),d&&(s.activeTexture.set(l.TEXTURE0),t.imageManager.bind(t.context));for(const p of v){const v=p.toUnwrapped(),b=a?p.projMatrix:t.transform.calculateProjMatrix(v);t.prepareDrawTile();const _=n?n.getTile(p):y?y[p.key]:new e.Tile(p,u,c.zoom,t),w=d?li(b,r,t,d,{tileID:p,tileSize:u}):si(b,r,o);t.prepareDrawProgram(s,g,v);const{tileBoundsBuffer:x,tileBoundsIndexBuffer:k,tileBoundsSegments:O}=t.getTileBoundsBuffers(_);g.draw(s,l.TRIANGLES,m,f,h,e.CullFaceMode.disabled,w,i.id,x,k,O)}},sky:function(t,n,i){const a=t.transform,o="mercator"===a.projection.name||"globe"===a.projection.name?1:e.smoothstep(7,8,a.zoom),r=i.paint.get("sky-opacity")*o;if(0===r)return;const s=t.context,l=i.paint.get("sky-type"),c=new e.DepthMode(s.gl.LEQUAL,e.DepthMode.ReadOnly,[0,1]),u=t.frameCounter/1e3%1;"atmosphere"===l?"offscreen"===t.renderPass?i.needsSkyboxCapture(t)&&(function(t,n,i,a){const o=t.context,r=o.gl;let s=n.skyboxFbo;if(!s){s=n.skyboxFbo=o.createFramebuffer(32,32,!1),n.skyboxGeometry=new ji(o),n.skyboxTexture=o.gl.createTexture(),r.bindTexture(r.TEXTURE_CUBE_MAP,n.skyboxTexture),r.texParameteri(r.TEXTURE_CUBE_MAP,r.TEXTURE_WRAP_S,r.CLAMP_TO_EDGE),r.texParameteri(r.TEXTURE_CUBE_MAP,r.TEXTURE_WRAP_T,r.CLAMP_TO_EDGE),r.texParameteri(r.TEXTURE_CUBE_MAP,r.TEXTURE_MIN_FILTER,r.LINEAR),r.texParameteri(r.TEXTURE_CUBE_MAP,r.TEXTURE_MAG_FILTER,r.LINEAR);for(let e=0;e<6;++e)r.texImage2D(r.TEXTURE_CUBE_MAP_POSITIVE_X+e,0,r.RGBA,32,32,0,r.RGBA,r.UNSIGNED_BYTE,null)}o.bindFramebuffer.set(s.framebuffer),o.viewport.set([0,0,32,32]);const l=n.getCenter(t,!0),c=t.useProgram("skyboxCapture"),u=new Float64Array(16);e.identity(u),e.rotateY(u,u,.5*-Math.PI),Ni(o,n,c,u,l,0),e.identity(u),e.rotateY(u,u,.5*Math.PI),Ni(o,n,c,u,l,1),e.identity(u),e.rotateX(u,u,.5*-Math.PI),Ni(o,n,c,u,l,2),e.identity(u),e.rotateX(u,u,.5*Math.PI),Ni(o,n,c,u,l,3),e.identity(u),Ni(o,n,c,u,l,4),e.identity(u),e.rotateY(u,u,Math.PI),Ni(o,n,c,u,l,5),o.viewport.set([0,0,t.width,t.height])}(t,i),i.markSkyboxValid(t)):"sky"===t.renderPass&&function(t,n,i,a,o){const r=t.context,s=r.gl,l=t.transform,c=t.useProgram("skybox");r.activeTexture.set(s.TEXTURE0),s.bindTexture(s.TEXTURE_CUBE_MAP,n.skyboxTexture);const u=((e,t,n,i,a)=>({u_matrix:e,u_sun_direction:t,u_cubemap:0,u_opacity:i,u_temporal_offset:a}))(l.skyboxMatrix,n.getCenter(t,!1),0,a,o);t.prepareDrawProgram(r,c),c.draw(r,s.TRIANGLES,i,e.StencilMode.disabled,t.colorModeForRenderPass(),e.CullFaceMode.backCW,u,"skybox",n.skyboxGeometry.vertexBuffer,n.skyboxGeometry.indexBuffer,n.skyboxGeometry.segment)}(t,i,c,r,u):"gradient"===l&&"sky"===t.renderPass&&function(t,n,i,a,o){const r=t.context,s=r.gl,l=t.transform,c=t.useProgram("skyboxGradient");n.skyboxGeometry||(n.skyboxGeometry=new ji(r)),r.activeTexture.set(s.TEXTURE0);let u=n.colorRampTexture;u||(u=n.colorRampTexture=new e.Texture(r,n.colorRamp,s.RGBA)),u.bind(s.LINEAR,s.CLAMP_TO_EDGE);const d=((t,n,i,a,o)=>({u_matrix:t,u_color_ramp:0,u_center_direction:n,u_radius:e.degToRad(i),u_opacity:a,u_temporal_offset:o}))(l.skyboxMatrix,n.getCenter(t,!1),n.paint.get("sky-gradient-radius"),a,o);t.prepareDrawProgram(r,c),c.draw(r,s.TRIANGLES,i,e.StencilMode.disabled,t.colorModeForRenderPass(),e.CullFaceMode.backCW,d,"skyboxGradient",n.skyboxGeometry.vertexBuffer,n.skyboxGeometry.indexBuffer,n.skyboxGeometry.segment)}(t,i,c,r,u)},debug:function(e,t,n){for(let i=0;i<n.length;i++)Ci(e,t,n[i])},custom:function(t,n,i,a){const o=t.context,r=i.implementation;if(!t.transform.projection.unsupportedLayers||!t.transform.projection.unsupportedLayers.includes("custom")||t.terrain&&(t.terrain.renderingToTexture||"offscreen"===t.renderPass)&&i.isLayerDraped()){if("offscreen"===t.renderPass){const n=r.prerender;if(n){if(t.setCustomLayerDefaults(),o.setColorMode(t.colorModeForRenderPass()),"globe"===t.transform.projection.name){const i=t.transform.pointMerc;n.call(r,o.gl,t.transform.customLayerMatrix(),t.transform.getProjection(),t.transform.globeToMercatorMatrix(),e.globeToMercatorTransition(t.transform.zoom),[i.x,i.y],t.transform.pixelsPerMeterRatio)}else n.call(r,o.gl,t.transform.customLayerMatrix());o.setDirty(),t.setBaseState()}}else if("translucent"===t.renderPass){if(t.terrain&&t.terrain.renderingToTexture){const n=r.renderToTile;if(n){const i=a[0].canonical,s=new e.MercatorCoordinate(i.x+a[0].wrap*(1<<i.z),i.y,i.z);o.setDepthMode(e.DepthMode.disabled),o.setStencilMode(e.StencilMode.disabled),o.setColorMode(t.colorModeForRenderPass()),t.setCustomLayerDefaults(),n.call(r,o.gl,s),o.setDirty(),t.setBaseState()}return}t.setCustomLayerDefaults(),o.setColorMode(t.colorModeForRenderPass()),o.setStencilMode(e.StencilMode.disabled);const n="3d"===r.renderingMode?new e.DepthMode(t.context.gl.LEQUAL,e.DepthMode.ReadWrite,t.depthRangeFor3D):t.depthModeForSublayer(0,e.DepthMode.ReadOnly);if(o.setDepthMode(n),"globe"===t.transform.projection.name){const n=t.transform.pointMerc;r.render(o.gl,t.transform.customLayerMatrix(),t.transform.getProjection(),t.transform.globeToMercatorMatrix(),e.globeToMercatorTransition(t.transform.zoom),[n.x,n.y],t.transform.pixelsPerMeterRatio)}else r.render(o.gl,t.transform.customLayerMatrix());o.setDirty(),t.setBaseState(),o.bindFramebuffer.set(null)}}else e.warnOnce("Custom layers are not yet supported with this projection. Use mercator or globe to enable usage of custom layers.")}};class Bi{constructor(t,n,i=!1){this.context=new Oe(t,i),this.transform=n,this._tileTextures={},this.frameCopies=[],this.loadTimeStamps=[],this.setup(),this.numSublayers=e.SourceCache.maxUnderzooming+e.SourceCache.maxOverzooming+1,this.depthEpsilon=1/Math.pow(2,16),this.deferredRenderGpuTimeQueries=[],this.gpuTimers={},this.frameCounter=0,this._backgroundTiles={}}updateTerrain(e,t){const n=!!e&&!!e.terrain&&this.transform.projection.supportsTerrain;if(!(n||this._terrain&&this._terrain.enabled))return;this._terrain||(this._terrain=new jn(this,e));const i=this._terrain;this.transform.elevation=n?i:null,i.update(e,this.transform,t)}_updateFog(e){const t=e.fog;if(!t||"globe"===this.transform.projection.name||t.getOpacity(this.transform.pitch)<1||t.properties.get("horizon-blend")<.03)return void(this.transform.fogCullDistSq=null);const[n,i]=t.getFovAdjustedRange(this.transform._fov);if(n>i)return void(this.transform.fogCullDistSq=null);const a=n+.78*(i-n);this.transform.fogCullDistSq=a*a}get terrain(){return this.transform._terrainEnabled()&&this._terrain&&this._terrain.enabled?this._terrain:null}resize(t,n){if(this.width=t*e.exported.devicePixelRatio,this.height=n*e.exported.devicePixelRatio,this.context.viewport.set([0,0,this.width,this.height]),this.style)for(const e of this.style.order)this.style._layers[e].resize()}setup(){const t=this.context,n=new e.StructArrayLayout2i4;n.emplaceBack(0,0),n.emplaceBack(e.EXTENT,0),n.emplaceBack(0,e.EXTENT),n.emplaceBack(e.EXTENT,e.EXTENT),this.tileExtentBuffer=t.createVertexBuffer(n,e.posAttributes.members),this.tileExtentSegments=e.SegmentVector.simpleSegment(0,0,4,2);const i=new e.StructArrayLayout2i4;i.emplaceBack(0,0),i.emplaceBack(e.EXTENT,0),i.emplaceBack(0,e.EXTENT),i.emplaceBack(e.EXTENT,e.EXTENT),this.debugBuffer=t.createVertexBuffer(i,e.posAttributes.members),this.debugSegments=e.SegmentVector.simpleSegment(0,0,4,5);const a=new e.StructArrayLayout2i4;a.emplaceBack(-1,-1),a.emplaceBack(1,-1),a.emplaceBack(-1,1),a.emplaceBack(1,1),this.viewportBuffer=t.createVertexBuffer(a,e.posAttributes.members),this.viewportSegments=e.SegmentVector.simpleSegment(0,0,4,2);const o=new e.StructArrayLayout4i8;o.emplaceBack(0,0,0,0),o.emplaceBack(e.EXTENT,0,e.EXTENT,0),o.emplaceBack(0,e.EXTENT,0,e.EXTENT),o.emplaceBack(e.EXTENT,e.EXTENT,e.EXTENT,e.EXTENT),this.mercatorBoundsBuffer=t.createVertexBuffer(o,e.boundsAttributes.members),this.mercatorBoundsSegments=e.SegmentVector.simpleSegment(0,0,4,2);const r=new e.StructArrayLayout3ui6;r.emplaceBack(0,1,2),r.emplaceBack(2,1,3),this.quadTriangleIndexBuffer=t.createIndexBuffer(r);const s=new e.StructArrayLayout1ui2;for(const e of[0,1,3,2,0])s.emplaceBack(e);this.debugIndexBuffer=t.createIndexBuffer(s),this.emptyTexture=new e.Texture(t,new e.RGBAImage({width:1,height:1},Uint8Array.of(0,0,0,0)),t.gl.RGBA),this.identityMat=e.create();const l=this.context.gl;this.stencilClearMode=new e.StencilMode({func:l.ALWAYS,mask:0},0,255,l.ZERO,l.ZERO,l.ZERO),this.loadTimeStamps.push(e.window.performance.now()),this.atmosphereBuffer=new Di(this.context)}getMercatorTileBoundsBuffers(){return{tileBoundsBuffer:this.mercatorBoundsBuffer,tileBoundsIndexBuffer:this.quadTriangleIndexBuffer,tileBoundsSegments:this.mercatorBoundsSegments}}getTileBoundsBuffers(e){return e._makeTileBoundsBuffers(this.context,this.transform.projection),e._tileBoundsBuffer?{tileBoundsBuffer:e._tileBoundsBuffer,tileBoundsIndexBuffer:e._tileBoundsIndexBuffer,tileBoundsSegments:e._tileBoundsSegments}:this.getMercatorTileBoundsBuffers()}clearStencil(){const t=this.context,n=t.gl;this.nextStencilID=1,this.currentStencilSource=void 0,this._tileClippingMaskIDs={},this.useProgram("clippingMask").draw(t,n.TRIANGLES,e.DepthMode.disabled,this.stencilClearMode,e.ColorMode.disabled,e.CullFaceMode.disabled,Sn(this.identityMat),"$clipping",this.viewportBuffer,this.quadTriangleIndexBuffer,this.viewportSegments)}resetStencilClippingMasks(){this.terrain||(this.currentStencilSource=void 0,this._tileClippingMaskIDs={})}_renderTileClippingMasks(t,n,i){if(!n||this.currentStencilSource===n.id||!t.isTileClipped()||!i||0===i.length)return;if(this._tileClippingMaskIDs&&!this.terrain){let e=!1;for(const t of i)if(void 0===this._tileClippingMaskIDs[t.key]){e=!0;break}if(!e)return}this.currentStencilSource=n.id;const a=this.context,o=a.gl;this.nextStencilID+i.length>256&&this.clearStencil(),a.setColorMode(e.ColorMode.disabled),a.setDepthMode(e.DepthMode.disabled);const r=this.useProgram("clippingMask");this._tileClippingMaskIDs={};for(const t of i){const i=n.getTile(t),s=this._tileClippingMaskIDs[t.key]=this.nextStencilID++,{tileBoundsBuffer:l,tileBoundsIndexBuffer:c,tileBoundsSegments:u}=this.getTileBoundsBuffers(i);r.draw(a,o.TRIANGLES,e.DepthMode.disabled,new e.StencilMode({func:o.ALWAYS,mask:0},s,255,o.KEEP,o.KEEP,o.REPLACE),e.ColorMode.disabled,e.CullFaceMode.disabled,Sn(t.projMatrix),"$clipping",l,c,u)}}stencilModeFor3D(){this.currentStencilSource=void 0,this.nextStencilID+1>256&&this.clearStencil();const t=this.nextStencilID++,n=this.context.gl;return new e.StencilMode({func:n.NOTEQUAL,mask:255},t,255,n.KEEP,n.KEEP,n.REPLACE)}stencilModeForClipping(t){if(this.terrain)return this.terrain.stencilModeForRTTOverlap(t);const n=this.context.gl;return new e.StencilMode({func:n.EQUAL,mask:255},this._tileClippingMaskIDs[t.key],0,n.KEEP,n.KEEP,n.REPLACE)}stencilConfigForOverlap(t){const n=this.context.gl,i=t.sort((e,t)=>t.overscaledZ-e.overscaledZ),a=i[i.length-1].overscaledZ,o=i[0].overscaledZ-a+1;if(o>1){this.currentStencilSource=void 0,this.nextStencilID+o>256&&this.clearStencil();const t={};for(let i=0;i<o;i++)t[i+a]=new e.StencilMode({func:n.GEQUAL,mask:255},i+this.nextStencilID,255,n.KEEP,n.KEEP,n.REPLACE);return this.nextStencilID+=o,[t,i]}return[{[a]:e.StencilMode.disabled},i]}colorModeForRenderPass(){const t=this.context.gl;if(this._showOverdrawInspector){const n=1/8;return new e.ColorMode([t.CONSTANT_COLOR,t.ONE],new e.Color(n,n,n,0),[!0,!0,!0,!0])}return"opaque"===this.renderPass?e.ColorMode.unblended:e.ColorMode.alphaBlended}depthModeForSublayer(t,n,i){if(!this.opaquePassEnabledForLayer())return e.DepthMode.disabled;const a=1-((1+this.currentLayer)*this.numSublayers+t)*this.depthEpsilon;return new e.DepthMode(i||this.context.gl.LEQUAL,n,[a,a])}opaquePassEnabledForLayer(){return this.currentLayer<this.opaquePassCutoff}render(t,n){this.style=t,this.options=n,this.imageManager=t.imageManager,this.glyphManager=t.glyphManager,this.symbolFadeChange=t.placement.symbolFadeChange(e.exported.now()),this.imageManager.beginFrame();const i=this.style.order,a=this.style._sourceCaches;for(const e in a){const t=a[e];t.used&&t.prepare(this.context)}const o={},r={},s={};for(const e in a){const t=a[e];o[e]=t.getVisibleCoordinates(),r[e]=o[e].slice().reverse(),s[e]=t.getVisibleCoordinates(!0).reverse()}this.opaquePassCutoff=1/0;for(let e=0;e<i.length;e++)if(this.style._layers[i[e]].is3D()){this.opaquePassCutoff=e;break}if(this.terrain&&(this.terrain.updateTileBinding(s),this.opaquePassCutoff=0),"globe"!==this.transform.projection.name||this.globeSharedBuffers||(this.globeSharedBuffers=new e.GlobeSharedBuffers(this.context)),!e.isMapAuthenticated(this.context.gl))return;this.renderPass="offscreen";for(const e of i){const n=this.style._layers[e],i=t._getLayerSourceCache(n);if(!n.hasOffscreenPass()||n.isHidden(this.transform.zoom))continue;const a=i?r[i.id]:void 0;("custom"===n.type||n.isSky()||a&&a.length)&&this.renderLayer(this,i,n,a)}this.depthRangeFor3D=[0,1-(t.order.length+2)*this.numSublayers*this.depthEpsilon];const l=this.terrain;if(l&&(this.style.hasSymbolLayers()||this.style.hasCircleLayers())&&l.drawDepth(),this.context.bindFramebuffer.set(null),this.context.viewport.set([0,0,this.width,this.height]),this.context.clear({color:n.showOverdrawInspector?e.Color.black:e.Color.transparent,depth:1}),this.clearStencil(),this._showOverdrawInspector=n.showOverdrawInspector,this.renderPass="opaque",!this.terrain)for(this.currentLayer=i.length-1;this.currentLayer>=0;this.currentLayer--){const e=this.style._layers[i[this.currentLayer]],n=t._getLayerSourceCache(e);if(e.isSky())continue;const a=n?r[n.id]:void 0;this._renderTileClippingMasks(e,n,a),this.renderLayer(this,n,e,a)}if(this.style.fog&&this.transform.projection.supportsFog&&function(t,n){const i=t.context,a=i.gl,o=t.transform,r=new e.DepthMode(a.LEQUAL,e.DepthMode.ReadOnly,[0,1]),s=t.useProgram("globeAtmosphere",null,"globe"===o.projection.name?["PROJECTION_GLOBE_VIEW","FOG"]:["FOG"]),l=e.globeToMercatorTransition(o.zoom),c=n.properties.get("color").toArray01(),u=n.properties.get("high-color").toArray01(),d=n.properties.get("space-color").toArray01PremultipliedAlpha(),p=e.identity$1([]);e.rotateY$1(p,p,-e.degToRad(o._center.lng)),e.rotateX$1(p,p,e.degToRad(o._center.lat)),e.rotateZ$1(p,p,o.angle),e.rotateX$1(p,p,-o._pitch);const f=e.fromQuat(new Float32Array(16),p),m=e.mapValue(n.properties.get("star-intensity"),0,1,0,.25),h=5e-4,g=e.mapValue(n.properties.get("horizon-blend"),0,1,h,.25),y=e.globeUseCustomAntiAliasing(t,i,o)&&g===h?o.worldSize/(2*Math.PI*1.025)-1:o.globeRadius,v=t.frameCounter/1e3%1,b=e.length(o.globeCenterInViewSpace),_=Math.sqrt(Math.pow(b,2)-Math.pow(y,2)),w=Math.acos(_/b),x=((t,n,i,a,o,r,s,l,c,u,d,p,f,m)=>({u_frustum_tl:t,u_frustum_tr:n,u_frustum_br:i,u_frustum_bl:a,u_horizon:o,u_transition:r,u_fadeout_range:s,u_color:l,u_high_color:c,u_space_color:u,u_star_intensity:d,u_star_size:5*e.exported.devicePixelRatio,u_star_density:0,u_temporal_offset:p,u_horizon_angle:f,u_rotation_matrix:m}))(o.frustumCorners.TL,o.frustumCorners.TR,o.frustumCorners.BR,o.frustumCorners.BL,o.frustumCorners.horizon,l,g,c,u,d,m,v,w,f);t.prepareDrawProgram(i,s);const k=t.atmosphereBuffer;k&&s.draw(i,a.TRIANGLES,r,e.StencilMode.disabled,e.ColorMode.alphaBlended,e.CullFaceMode.backCW,x,"skybox",k.vertexBuffer,k.indexBuffer,k.segments)}(this,this.style.fog),this.renderPass="sky",(e.globeToMercatorTransition(this.transform.zoom)>0||"globe"!==this.transform.projection.name)&&this.transform.isHorizonVisible())for(this.currentLayer=0;this.currentLayer<i.length;this.currentLayer++){const e=this.style._layers[i[this.currentLayer]],n=t._getLayerSourceCache(e);e.isSky()&&this.renderLayer(this,n,e,n?r[n.id]:void 0)}for(this.renderPass="translucent",this.currentLayer=0;this.currentLayer<i.length;){const e=this.style._layers[i[this.currentLayer]],n=t._getLayerSourceCache(e);if(e.isSky()){++this.currentLayer;continue}if(this.terrain&&this.style.isLayerDraped(e)){if(e.isHidden(this.transform.zoom)){++this.currentLayer;continue}this.currentLayer=this.terrain.renderBatch(this.currentLayer);continue}const a=n?("symbol"===e.type?s:r)[n.id]:void 0;this._renderTileClippingMasks(e,n,n?o[n.id]:void 0),this.renderLayer(this,n,e,a),++this.currentLayer}if(this.terrain&&this.terrain.postRender(),this.options.showTileBoundaries||this.options.showQueryGeometry||this.options.showTileAABBs){let n=null;e.values(this.style._layers).forEach(e=>{const i=t._getLayerSourceCache(e);i&&!e.isHidden(this.transform.zoom)&&(!n||n.getSource().maxzoom<i.getSource().maxzoom)&&(n=i)}),n&&this.options.showTileBoundaries&&Ri.debug(this,n,n.getVisibleCoordinates())}this.options.showPadding&&function(e){const t=e.transform.padding;Ei(e,e.transform.height-(t.top||0),3,wi),Ei(e,t.bottom||0,3,xi),Si(e,t.left||0,3,ki),Si(e,e.transform.width-(t.right||0),3,Oi);const n=e.transform.centerPoint;!function(e,t,n,i){Pi(e,t-1,n-10,2,20,i),Pi(e,t-10,n-1,20,2,i)}(e,n.x,e.transform.height-n.y,Ti)}(this),this.context.setDefault(),this.frameCounter=(this.frameCounter+1)%Number.MAX_SAFE_INTEGER,this.tileLoaded&&this.options.speedIndexTiming&&(this.loadTimeStamps.push(e.window.performance.now()),this.saveCanvasCopy())}renderLayer(e,t,n,i){n.isHidden(this.transform.zoom)||("background"===n.type||"sky"===n.type||"custom"===n.type||i&&i.length)&&(this.id=n.id,this.gpuTimingStart(n),(!e.transform.projection.unsupportedLayers||!e.transform.projection.unsupportedLayers.includes(n.type)||e.terrain&&"custom"===n.type)&&Ri[n.type](e,t,n,i,this.style.placement.variableOffsets,this.options.isInitialLoad),this.gpuTimingEnd())}gpuTimingStart(e){if(!this.options.gpuTiming)return;const t=this.context.extTimerQuery;let n=this.gpuTimers[e.id];n||(n=this.gpuTimers[e.id]={calls:0,cpuTime:0,query:t.createQueryEXT()}),n.calls++,t.beginQueryEXT(t.TIME_ELAPSED_EXT,n.query)}gpuTimingDeferredRenderStart(){if(this.options.gpuTimingDeferredRender){const e=this.context.extTimerQuery,t=e.createQueryEXT();this.deferredRenderGpuTimeQueries.push(t),e.beginQueryEXT(e.TIME_ELAPSED_EXT,t)}}gpuTimingDeferredRenderEnd(){if(!this.options.gpuTimingDeferredRender)return;const e=this.context.extTimerQuery;e.endQueryEXT(e.TIME_ELAPSED_EXT)}gpuTimingEnd(){if(!this.options.gpuTiming)return;const e=this.context.extTimerQuery;e.endQueryEXT(e.TIME_ELAPSED_EXT)}collectGpuTimers(){const e=this.gpuTimers;return this.gpuTimers={},e}collectDeferredRenderGpuQueries(){const e=this.deferredRenderGpuTimeQueries;return this.deferredRenderGpuTimeQueries=[],e}queryGpuTimers(e){const t={};for(const n in e){const i=e[n],a=this.context.extTimerQuery,o=a.getQueryObjectEXT(i.query,a.QUERY_RESULT_EXT)/1e6;a.deleteQueryEXT(i.query),t[n]=o}return t}queryGpuTimeDeferredRender(e){if(!this.options.gpuTimingDeferredRender)return 0;const t=this.context.extTimerQuery;let n=0;for(const i of e)n+=t.getQueryObjectEXT(i,t.QUERY_RESULT_EXT)/1e6,t.deleteQueryEXT(i);return n}translatePosMatrix(t,n,i,a,o){if(!i[0]&&!i[1])return t;const r=o?"map"===a?this.transform.angle:0:"viewport"===a?-this.transform.angle:0;if(r){const e=Math.sin(r),t=Math.cos(r);i=[i[0]*t-i[1]*e,i[0]*e+i[1]*t]}const s=[o?i[0]:I(n,i[0],this.transform.zoom),o?i[1]:I(n,i[1],this.transform.zoom),0],l=new Float32Array(16);return e.translate(l,t,s),l}saveTileTexture(e){const t=this._tileTextures[e.size[0]];t?t.push(e):this._tileTextures[e.size[0]]=[e]}getTileTexture(e){const t=this._tileTextures[e];return t&&t.length>0?t.pop():null}isPatternMissing(e){return null===e||void 0!==e&&!this.imageManager.getPattern(e.toString())}terrainRenderModeElevated(){return this.style&&!!this.style.getTerrain()&&!!this.terrain&&!this.terrain.renderingToTexture}currentGlobalDefines(){const e=this.terrain&&this.terrain.renderingToTexture,t=this.terrain&&0===this.terrain.exaggeration(),n=this.style&&this.style.fog,i=[];return this.terrainRenderModeElevated()&&i.push("TERRAIN"),"globe"===this.transform.projection.name&&i.push("GLOBE"),t&&i.push("ZERO_EXAGGERATION"),n&&!e&&0!==n.getOpacity(this.transform.pitch)&&i.push("FOG"),e&&i.push("RENDER_TO_TEXTURE"),this._showOverdrawInspector&&i.push("OVERDRAW_INSPECTOR"),i}useProgram(e,t,n){this.cache=this.cache||{};const i=n||[],a=this.currentGlobalDefines().concat(i),o=Nn.cacheKey(pn[e],e,a,t);return this.cache[o]||(this.cache[o]=new Nn(this.context,e,pn[e],t,ci[e],a)),this.cache[o]}setCustomLayerDefaults(){this.context.unbindVAO(),this.context.cullFace.setDefault(),this.context.frontFace.setDefault(),this.context.cullFaceSide.setDefault(),this.context.activeTexture.setDefault(),this.context.pixelStoreUnpack.setDefault(),this.context.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.context.pixelStoreUnpackFlipY.setDefault()}setBaseState(){const e=this.context.gl;this.context.cullFace.set(!1),this.context.viewport.set([0,0,this.width,this.height]),this.context.blendEquation.set(e.FUNC_ADD)}initDebugOverlayCanvas(){null==this.debugOverlayCanvas&&(this.debugOverlayCanvas=e.window.document.createElement("canvas"),this.debugOverlayCanvas.width=512,this.debugOverlayCanvas.height=512,this.debugOverlayTexture=new e.Texture(this.context,this.debugOverlayCanvas,this.context.gl.RGBA))}destroy(){this._terrain&&this._terrain.destroy(),this.globeSharedBuffers&&this.globeSharedBuffers.destroy(),this.emptyTexture.destroy(),this.debugOverlayTexture&&this.debugOverlayTexture.destroy(),this.atmosphereBuffer&&this.atmosphereBuffer.destroy()}prepareDrawTile(){this.terrain&&this.terrain.prepareDrawTile()}prepareDrawProgram(t,n,i){if(this.terrain&&this.terrain.renderingToTexture)return;const a=this.style.fog;if(a){const o=a.getOpacity(this.transform.pitch),r=((t,n,i,a,o,r,s,l,c,u,d)=>{const p=t.transform,f=n.properties.get("color").toArray01();f[3]=a;const m=t.frameCounter/1e3%1;return{u_fog_matrix:i?p.calculateFogTileMatrix(i):t.identityMat,u_fog_range:n.getFovAdjustedRange(p._fov),u_fog_color:f,u_fog_horizon_blend:n.properties.get("horizon-blend"),u_fog_temporal_offset:m,u_frustum_tl:o,u_frustum_tr:r,u_frustum_br:s,u_frustum_bl:l,u_globe_pos:c,u_globe_radius:u,u_viewport:d,u_globe_transition:e.globeToMercatorTransition(p.zoom),u_is_globe:+("globe"===p.projection.name)}})(this,a,i,o,this.transform.frustumCorners.TL,this.transform.frustumCorners.TR,this.transform.frustumCorners.BR,this.transform.frustumCorners.BL,this.transform.globeCenterInViewSpace,this.transform.globeRadius,[this.transform.width*e.exported.devicePixelRatio,this.transform.height*e.exported.devicePixelRatio]);n.setFogUniformValues(t,r)}}setTileLoadedFlag(e){this.tileLoaded=e}saveCanvasCopy(){const e=this.canvasCopy();e&&(this.frameCopies.push(e),this.tileLoaded=!1)}canvasCopy(){const e=this.context.gl,t=e.createTexture();return e.bindTexture(e.TEXTURE_2D,t),e.copyTexImage2D(e.TEXTURE_2D,0,e.RGBA,0,0,e.drawingBufferWidth,e.drawingBufferHeight,0),t}getCanvasCopiesAndTimestamps(){return{canvasCopies:this.frameCopies,timeStamps:this.loadTimeStamps}}averageElevationNeedsEasing(){if(!this.transform._elevation)return!1;const e=this.style&&this.style.fog;return!!e&&0!==e.getOpacity(this.transform.pitch)}getBackgroundTiles(){const t=this._backgroundTiles,n=this._backgroundTiles={},i=this.transform.coveringTiles({tileSize:512});for(const a of i)n[a.key]=t[a.key]||new e.Tile(a,512,this.transform.tileZoom,this);return n}clearBackgroundTiles(){this._backgroundTiles={}}}class zi{constructor(e=0,t=0,n=0,i=0){if(isNaN(e)||e<0||isNaN(t)||t<0||isNaN(n)||n<0||isNaN(i)||i<0)throw new Error("Invalid value for edge-insets, top, bottom, left and right must all be numbers");this.top=e,this.bottom=t,this.left=n,this.right=i}interpolate(t,n,i){return null!=n.top&&null!=t.top&&(this.top=e.number(t.top,n.top,i)),null!=n.bottom&&null!=t.bottom&&(this.bottom=e.number(t.bottom,n.bottom,i)),null!=n.left&&null!=t.left&&(this.left=e.number(t.left,n.left,i)),null!=n.right&&null!=t.right&&(this.right=e.number(t.right,n.right,i)),this}getCenter(t,n){const i=e.clamp((this.left+t-this.right)/2,0,t),a=e.clamp((this.top+n-this.bottom)/2,0,n);return new e.Point(i,a)}equals(e){return this.top===e.top&&this.bottom===e.bottom&&this.left===e.left&&this.right===e.right}clone(){return new zi(this.top,this.bottom,this.left,this.right)}toJSON(){return{top:this.top,bottom:this.bottom,left:this.left,right:this.right}}}function Fi(t,n){const i=e.getColumn(t,3);e.fromQuat(t,n),e.setColumn(t,3,i)}function Ui(t,n){const i=e.identity$1([]);return e.rotateZ$1(i,i,-n),e.rotateX$1(i,i,-t),i}function Hi(t,n){const i=[t[0],t[1],0],a=[n[0],n[1],0];if(e.length(i)>=1e-15){const t=e.normalize([],i);e.scale$2(a,t,e.dot(a,t)),n[0]=a[0],n[1]=a[1]}const o=e.cross([],n,t);if(e.len(o)<1e-15)return null;const r=Math.atan2(-o[1],o[0]);return Ui(Math.atan2(Math.sqrt(t[0]*t[0]+t[1]*t[1]),-t[2]),r)}class Wi{constructor(e,t){this.position=e,this.orientation=t}get position(){return this._position}set position(t){if(t){const n=t instanceof e.MercatorCoordinate?t:new e.MercatorCoordinate(t[0],t[1],t[2]);this._renderWorldCopies&&(n.x=e.wrap(n.x,0,1)),this._position=n}else this._position=null}lookAtPoint(t,n){if(this.orientation=null,!this.position)return;const i=this.position,a=this._elevation?this._elevation.getAtPointOrZero(e.MercatorCoordinate.fromLngLat(t)):0,o=e.MercatorCoordinate.fromLngLat(t,a),r=[o.x-i.x,o.y-i.y,o.z-i.z];n||(n=[0,0,1]),n[2]=Math.abs(n[2]),this.orientation=Hi(r,n)}setPitchBearing(t,n){this.orientation=Ui(e.degToRad(t),e.degToRad(-n))}}class qi{constructor(t,n){this._transform=e.identity([]),this.orientation=n,this.position=t}get mercatorPosition(){const t=this.position;return new e.MercatorCoordinate(t[0],t[1],t[2])}get position(){const t=e.getColumn(this._transform,3);return[t[0],t[1],t[2]]}set position(t){var n;t&&e.setColumn(this._transform,3,[(n=t)[0],n[1],n[2],1])}get orientation(){return this._orientation}set orientation(t){this._orientation=t||e.identity$1([]),t&&Fi(this._transform,this._orientation)}getPitchBearing(){const e=this.forward(),t=this.right();return{bearing:Math.atan2(-t[1],t[0]),pitch:Math.atan2(Math.sqrt(e[0]*e[0]+e[1]*e[1]),-e[2])}}setPitchBearing(e,t){this._orientation=Ui(e,t),Fi(this._transform,this._orientation)}forward(){const t=e.getColumn(this._transform,2);return[-t[0],-t[1],-t[2]]}up(){const t=e.getColumn(this._transform,1);return[-t[0],-t[1],-t[2]]}right(){const t=e.getColumn(this._transform,0);return[t[0],t[1],t[2]]}getCameraToWorld(t,n){const i=new Float64Array(16);return e.invert(i,this.getWorldToCamera(t,n)),i}getWorldToCameraPosition(t,n,i){const a=this.position;e.scale$2(a,a,-t);const o=new Float64Array(16);return e.fromScaling(o,[i,i,i]),e.translate(o,o,a),o[10]*=n,o}getWorldToCamera(t,n){const i=new Float64Array(16),a=new Float64Array(4),o=this.position;return e.conjugate(a,this._orientation),e.scale$2(o,o,-t),e.fromQuat(i,a),e.translate(i,i,o),i[1]*=-1,i[5]*=-1,i[9]*=-1,i[13]*=-1,i[8]*=n,i[9]*=n,i[10]*=n,i[11]*=n,i}getCameraToClipPerspective(t,n,i,a){const o=new Float64Array(16);return e.perspective(o,t,n,i,a),o}getDistanceToElevation(t,n=!1){const i=0===t?0:e.mercatorZfromAltitude(t,n?e.latFromMercatorY(this.position[1]):this.position[1]),a=this.forward();return(i-this.position[2])/a[2]}clone(){return new qi([...this.position],[...this.orientation])}}function Vi(t,n){const i=Yi(t.projection,t.zoom,t.width,t.height),a=function(t,n,i,a,o){const r=new e.LngLat(i.lng-180*Xi,i.lat),s=new e.LngLat(i.lng+180*Xi,i.lat),l=t.project(r.lng,r.lat),c=t.project(s.lng,s.lat),u=-Math.atan2(c.y-l.y,c.x-l.x),d=e.MercatorCoordinate.fromLngLat(i);d.y=e.clamp(d.y,-1+Xi,1-Xi);const p=d.toLngLat(),f=t.project(p.lng,p.lat),m=e.MercatorCoordinate.fromLngLat(p);m.x+=Xi;const h=m.toLngLat(),g=t.project(h.lng,h.lat),y=Ji(g.x-f.x,g.y-f.y,u),v=e.MercatorCoordinate.fromLngLat(p);v.y+=Xi;const b=v.toLngLat(),_=t.project(b.lng,b.lat),w=Ji(_.x-f.x,_.y-f.y,u),x=Math.abs(y.x)/Math.abs(w.y),k=e.identity([]);e.rotateZ(k,k,-u*(1-(o?0:a)));const O=e.identity([]);return e.scale(O,O,[1,1-(1-x)*a,1]),O[4]=-w.x/w.y*a,e.rotateZ(O,O,u),e.multiply(O,k,O),O}(t.projection,0,t.center,i,n),o=Gi(t);return e.scale(a,a,[o,o,1]),a}function Gi(t){const n=t.projection,i=Yi(t.projection,t.zoom,t.width,t.height),a=Zi(n,t.center),o=Zi(n,e.LngLat.convert(n.center));return Math.pow(2,a*i+(1-i)*o)}function Yi(t,n,i,a,o=1/0){const r=t.range;if(!r)return 0;const s=Math.min(o,Math.max(i,a)),l=Math.log(s/1024)/Math.LN2;return e.smoothstep(r[0]+l,r[1]+l,n)}const Xi=1/4e4;function Zi(t,n){const i=e.clamp(n.lat,-e.MAX_MERCATOR_LATITUDE,e.MAX_MERCATOR_LATITUDE),a=new e.LngLat(n.lng-180*Xi,i),o=new e.LngLat(n.lng+180*Xi,i),r=t.project(a.lng,i),s=t.project(o.lng,i),l=e.MercatorCoordinate.fromLngLat(a),c=e.MercatorCoordinate.fromLngLat(o),u=s.x-r.x,d=s.y-r.y,p=c.x-l.x,f=c.y-l.y,m=Math.sqrt((p*p+f*f)/(u*u+d*d));return Math.log(m)/Math.LN2}function Ji(e,t,n){const i=Math.cos(n),a=Math.sin(n);return{x:e*i-t*a,y:e*a+t*i}}class Ki{constructor(t,n,i,a,o,r,s){this.tileSize=512,this._renderWorldCopies=void 0===o||o,this._minZoom=t||0,this._maxZoom=n||22,this._minPitch=null==i?0:i,this._maxPitch=null==a?60:a,this.setProjection(r),this.setMaxBounds(s),this.width=0,this.height=0,this._center=new e.LngLat(0,0),this.zoom=0,this.angle=0,this._fov=.6435011087932844,this._pitch=0,this._nearZ=0,this._farZ=0,this._unmodified=!0,this._edgeInsets=new zi,this._projMatrixCache={},this._alignedProjMatrixCache={},this._fogTileMatrixCache={},this._distanceTileDataCache={},this._camera=new qi,this._centerAltitude=0,this._averageElevation=0,this.cameraElevationReference="ground",this._pixelsPerMercatorPixel=1,this.globeRadius=0,this.globeCenterInViewSpace=[0,0,0],this._horizonShift=.1}clone(){const e=new Ki(this._minZoom,this._maxZoom,this._minPitch,this.maxPitch,this._renderWorldCopies,this.getProjection());return e._elevation=this._elevation,e._centerAltitude=this._centerAltitude,e._centerAltitudeValidForExaggeration=this._centerAltitudeValidForExaggeration,e.tileSize=this.tileSize,e.mercatorFromTransition=this.mercatorFromTransition,e.width=this.width,e.height=this.height,e.cameraElevationReference=this.cameraElevationReference,e._center=this._center,e._setZoom(this.zoom),e._seaLevelZoom=this._seaLevelZoom,e.angle=this.angle,e._fov=this._fov,e._pitch=this._pitch,e._nearZ=this._nearZ,e._farZ=this._farZ,e._averageElevation=this._averageElevation,e._unmodified=this._unmodified,e._edgeInsets=this._edgeInsets.clone(),e._camera=this._camera.clone(),e._calcMatrices(),e.freezeTileCoverage=this.freezeTileCoverage,e.frustumCorners=this.frustumCorners,e}get elevation(){return this._elevation}set elevation(e){this._elevation!==e&&(this._elevation=e,this._updateCameraOnTerrain(),this._calcMatrices())}updateElevation(e,t=!1){const n=this._elevation&&this._elevation.exaggeration()!==this._centerAltitudeValidForExaggeration;(null==this._seaLevelZoom||n)&&this._updateCameraOnTerrain(),(e||n)&&this._constrainCamera(t),this._calcMatrices()}getProjection(){return e.pick(this.projection,["name","center","parallels"])}setProjection(n){this.projectionOptions=n||{name:"mercator"};const i=this.projection?this.getProjection():void 0;this.projection=e.getProjection(this.projectionOptions);const a=!t(i,this.getProjection());return a&&this._calcMatrices(),this.mercatorFromTransition=!1,a}setMercatorFromTransition(){const t=this.projection.name;this.mercatorFromTransition=!0,this.projectionOptions={name:"mercator"},this.projection=e.getProjection({name:"mercator"});const n=t!==this.projection.name;return n&&this._calcMatrices(),n}get minZoom(){return this._minZoom}set minZoom(e){this._minZoom!==e&&(this._minZoom=e,this.zoom=Math.max(this.zoom,e))}get maxZoom(){return this._maxZoom}set maxZoom(e){this._maxZoom!==e&&(this._maxZoom=e,this.zoom=Math.min(this.zoom,e))}get minPitch(){return this._minPitch}set minPitch(e){this._minPitch!==e&&(this._minPitch=e,this.pitch=Math.max(this.pitch,e))}get maxPitch(){return this._maxPitch}set maxPitch(e){this._maxPitch!==e&&(this._maxPitch=e,this.pitch=Math.min(this.pitch,e))}get renderWorldCopies(){return this._renderWorldCopies&&!0===this.projection.supportsWorldCopies}set renderWorldCopies(e){void 0===e?e=!0:null===e&&(e=!1),this._renderWorldCopies=e}get worldSize(){return this.tileSize*this.scale}get cameraWorldSizeForFog(){const e=Math.max(this._camera.getDistanceToElevation(this._averageElevation),Number.EPSILON);return this._worldSizeFromZoom(this._zoomFromMercatorZ(e))}get cameraWorldSize(){const e=Math.max(this._camera.getDistanceToElevation(this._averageElevation,!0),Number.EPSILON);return this._worldSizeFromZoom(this._zoomFromMercatorZ(e))}get pixelsPerMeter(){return this.projection.pixelsPerMeter(this.center.lat,this.worldSize)}get cameraPixelsPerMeter(){return e.mercatorZfromAltitude(this.center.lat,this.cameraWorldSizeForFog)}get centerOffset(){return this.centerPoint._sub(this.size._div(2))}get size(){return new e.Point(this.width,this.height)}get bearing(){return e.wrap(this.rotation,-180,180)}set bearing(e){this.rotation=e}get rotation(){return-this.angle/Math.PI*180}set rotation(t){const n=-t*Math.PI/180;var i;this.angle!==n&&(this._unmodified=!1,this.angle=n,this._calcMatrices(),this.rotationMatrix=(i=new e.ARRAY_TYPE(4),e.ARRAY_TYPE!=Float32Array&&(i[1]=0,i[2]=0),i[0]=1,i[3]=1,i),function(e,t,n){var i=t[0],a=t[1],o=t[2],r=t[3],s=Math.sin(n),l=Math.cos(n);e[0]=i*l+o*s,e[1]=a*l+r*s,e[2]=i*-s+o*l,e[3]=a*-s+r*l}(this.rotationMatrix,this.rotationMatrix,this.angle))}get pitch(){return this._pitch/Math.PI*180}set pitch(t){const n=e.clamp(t,this.minPitch,this.maxPitch)/180*Math.PI;this._pitch!==n&&(this._unmodified=!1,this._pitch=n,this._calcMatrices())}get aspect(){return this.width/this.height}get fov(){return this._fov/Math.PI*180}get fovX(){return this._fov}get fovY(){const e=1/Math.tan(.5*this.fovX);return 2*Math.atan(1/this.aspect/e)}set fov(t){t=Math.max(.01,Math.min(60,t)),this._fov!==t&&(this._unmodified=!1,this._fov=e.degToRad(t),this._calcMatrices())}get averageElevation(){return this._averageElevation}set averageElevation(e){this._averageElevation=e,this._calcFogMatrices(),this._distanceTileDataCache={}}get zoom(){return this._zoom}set zoom(e){const t=Math.min(Math.max(e,this.minZoom),this.maxZoom);this._zoom!==t&&(this._unmodified=!1,this._setZoom(t),this._updateSeaLevelZoom(),this._constrain(),this._calcMatrices())}_setZoom(e){this._zoom=e,this.scale=this.zoomScale(e),this.tileZoom=Math.floor(e),this.zoomFraction=e-this.tileZoom}_updateCameraOnTerrain(){if(!this._elevation||!this._elevation.isDataAvailableAtPoint(this.locationCoordinate(this.center)))return this._centerAltitude=0,this._seaLevelZoom=null,void(this._centerAltitudeValidForExaggeration=void 0);const e=this._elevation;this._centerAltitude=e.getAtPointOrZero(this.locationCoordinate(this.center)),this._centerAltitudeValidForExaggeration=e.exaggeration(),this._updateSeaLevelZoom()}_updateSeaLevelZoom(){void 0!==this._centerAltitudeValidForExaggeration&&(this._seaLevelZoom=this._zoomFromMercatorZ((this.pixelsPerMeter*this._centerAltitude+this.cameraToCenterDistance)/this.worldSize))}sampleAverageElevation(){if(!this._elevation)return 0;const t=this._elevation,n=[[.5,.2],[.3,.5],[.5,.5],[.7,.5],[.5,.8]],i=this.horizonLineFromTop();let a=0,o=0;for(let r=0;r<n.length;r++){const s=new e.Point(n[r][0]*this.width,i+n[r][1]*(this.height-i)),l=t.pointCoordinate(s);if(!l)continue;const c=1/Math.hypot(l[0]-this._camera.position[0],l[1]-this._camera.position[1]);a+=l[3]*c,o+=c}return 0===o?NaN:a/o}get center(){return this._center}set center(e){e.lat===this._center.lat&&e.lng===this._center.lng||(this._unmodified=!1,this._center=e,this._terrainEnabled()&&("ground"===this.cameraElevationReference?this._updateCameraOnTerrain():this._updateZoomFromElevation()),this._constrain(),this._calcMatrices())}_updateZoomFromElevation(){if(null==this._seaLevelZoom||!this._elevation)return;const e=this._seaLevelZoom,t=this._elevation.getAtPointOrZero(this.locationCoordinate(this.center)),n=this.pixelsPerMeter/this.worldSize*t,i=this._mercatorZfromZoom(e),a=this._mercatorZfromZoom(this._maxZoom),o=Math.max(i-n,a);this._setZoom(this._zoomFromMercatorZ(o))}get padding(){return this._edgeInsets.toJSON()}set padding(e){this._edgeInsets.equals(e)||(this._unmodified=!1,this._edgeInsets.interpolate(this._edgeInsets,e,1),this._calcMatrices())}computeZoomRelativeTo(t){const n=this.rayIntersectionCoordinate(this.pointRayIntersection(this.centerPoint,t.toAltitude()));let i;i=t.z<this._camera.position[2]?[n.x,n.y,n.z]:[t.x,t.y,t.z];const a=e.length(e.sub([],this._camera.position,i));return e.clamp(this._zoomFromMercatorZ(a),this._minZoom,this._maxZoom)}setFreeCameraOptions(t){if(!this.height)return;if(!t.position&&!t.orientation)return;this._updateCameraState();let n=!1;if(t.orientation&&!e.exactEquals(t.orientation,this._camera.orientation)&&(n=this._setCameraOrientation(t.orientation)),t.position){const i=[t.position.x,t.position.y,t.position.z];e.exactEquals$1(i,this._camera.position)||(this._setCameraPosition(i),n=!0)}n&&(this._updateStateFromCamera(),this.recenterOnTerrain())}getFreeCameraOptions(){this._updateCameraState();const t=this._camera.position,n=new Wi;return n.position=new e.MercatorCoordinate(t[0],t[1],t[2]),n.orientation=this._camera.orientation,n._elevation=this.elevation,n._renderWorldCopies=this.renderWorldCopies,n}_setCameraOrientation(t){if(!e.length$1(t))return!1;e.normalize$1(t,t);const n=e.transformQuat([],[0,0,-1],t),i=e.transformQuat([],[0,-1,0],t);if(i[2]<0)return!1;const a=Hi(n,i);return!!a&&(this._camera.orientation=a,!0)}_setCameraPosition(t){const n=this.zoomScale(this.minZoom)*this.tileSize,i=this.zoomScale(this.maxZoom)*this.tileSize,a=this.cameraToCenterDistance;t[2]=e.clamp(t[2],a/i,a/n),this._camera.position=t}get centerPoint(){return this._edgeInsets.getCenter(this.width,this.height)}get fovAboveCenter(){return this._fov*(.5+this.centerOffset.y/this.height)}isPaddingEqual(e){return this._edgeInsets.equals(e)}interpolatePadding(e,t,n){this._unmodified=!1,this._edgeInsets.interpolate(e,t,n),this._constrain(),this._calcMatrices()}coveringZoomLevel(e){const t=(e.roundZoom?Math.round:Math.floor)(this.zoom+this.scaleZoom(this.tileSize/e.tileSize));return Math.max(0,t)}getVisibleUnwrappedCoordinates(t){const n=[new e.UnwrappedTileID(0,t)];if(this.renderWorldCopies){const i=this.pointCoordinate(new e.Point(0,0)),a=this.pointCoordinate(new e.Point(this.width,0)),o=this.pointCoordinate(new e.Point(this.width,this.height)),r=this.pointCoordinate(new e.Point(0,this.height)),s=Math.floor(Math.min(i.x,a.x,o.x,r.x)),l=Math.floor(Math.max(i.x,a.x,o.x,r.x)),c=1;for(let i=s-c;i<=l+c;i++)0!==i&&n.push(new e.UnwrappedTileID(i,t))}return n}coveringTiles(t){let n=this.coveringZoomLevel(t);const i=n,a=this.elevation&&!t.isTerrainDEM,o="mercator"===this.projection.name;if(void 0!==t.minzoom&&n<t.minzoom)return[];void 0!==t.maxzoom&&n>t.maxzoom&&(n=t.maxzoom);const r=this.locationCoordinate(this.center),s=this.center.lat,l=1<<n,c=[l*r.x,l*r.y,0],u="globe"===this.projection.name,d=!u,p=e.Frustum.fromInvProjectionMatrix(this.invProjMatrix,this.worldSize,n,d),f=u?this._camera.mercatorPosition:this.pointCoordinate(this.getCameraPoint()),m=l*e.mercatorZfromAltitude(1,this.center.lat),h=this._camera.position[2]/e.mercatorZfromAltitude(1,this.center.lat),g=[l*f.x,l*f.y,h*(d?1:m)],y=this.cameraToCenterDistance/t.tileSize*(t.roundZoom?1:.502),v=this.pitch<=60&&this._edgeInsets.top<=this._edgeInsets.bottom&&!this._elevation&&!this.projection.isReprojectedInTileSpace?n:0,b=t.isTerrainDEM&&this._elevation?1e4*this._elevation.exaggeration():this._centerAltitude,_=t.isTerrainDEM?-b:this._elevation?this._elevation.getMinElevationBelowMSL():0,w=this.projection.isReprojectedInTileSpace?Gi(this):1,x=t=>{const n=1/4e4,i=new e.MercatorCoordinate(t.x+n,t.y,t.z),a=new e.MercatorCoordinate(t.x,t.y+n,t.z),o=t.toLngLat(),r=i.toLngLat(),s=a.toLngLat(),l=this.locationCoordinate(o),c=this.locationCoordinate(r),u=this.locationCoordinate(s),d=Math.hypot(c.x-l.x,c.y-l.y),p=Math.hypot(u.x-l.x,u.y-l.y);return Math.sqrt(d*p)*w/n},k=t=>{const n=b,i=_;return{aabb:e.tileAABB(this,l,0,0,0,t,i,n,this.projection),zoom:0,x:0,y:0,minZ:i,maxZ:n,wrap:t,fullyVisible:!1}},O=[];let T=[];const C=n,E=t.reparseOverscaled?i:n,S=e=>e*e,P=S((h-this._centerAltitude)*m),I=e=>{if(!this._elevation||!e.tileID||!o)return;const t=this._elevation.getMinMaxForTile(e.tileID),n=e.aabb;t?(n.min[2]=t.min,n.max[2]=t.max,n.center[2]=(n.min[2]+n.max[2])/2):(e.shouldSplit=M(e),e.shouldSplit||(n.min[2]=n.max[2]=n.center[2]=this._centerAltitude))},M=t=>{if(t.zoom<v)return!0;if(t.zoom===C)return!1;if(null!=t.shouldSplit)return t.shouldSplit;const n=t.aabb.distanceX(g),o=t.aabb.distanceY(g);let r=P,l=1;if(u){r=S(t.aabb.distanceZ(g));const n=Math.pow(2,t.zoom),i=e.latFromMercatorY((t.y+1)/n),a=e.latFromMercatorY(t.y/n),o=Math.min(Math.max(s,i),a),c=e.circumferenceAtLatitude(o)/e.circumferenceAtLatitude(s);if(l=o===s?1/Math.max(1,this._mercatorScaleRatio-.3):Math.min(1,c/this._mercatorScaleRatio),this.zoom<=e.GLOBE_ZOOM_THRESHOLD_MIN&&t.zoom===C-1&&c>=.9)return!0}else if(a&&(r=S(t.aabb.distanceZ(g)*m)),this.projection.isReprojectedInTileSpace&&i<=5){const n=Math.pow(2,t.zoom),i=x(new e.MercatorCoordinate((t.x+.5)/n,(t.y+.5)/n));l=i>.85?1:i}const c=n*n+o*o+r;return c<S((1<<C-t.zoom)*y*l*((e,t)=>{if(t*S(.707)<e)return 1;const n=Math.sqrt(t/e);return n/(1.4144271570014144+(Math.pow(1.1,n-1.4144271570014144+1)-1)/(1.1-1)-1)})(Math.max(r,P),c))};if(this.renderWorldCopies)for(let e=1;e<=3;e++)O.push(k(-e)),O.push(k(e));for(O.push(k(0));O.length>0;){const i=O.pop(),r=i.x,s=i.y;let d=i.fullyVisible;if(!d){const e=i.aabb.intersects(p);if(0===e)continue;d=2===e}if(i.zoom!==C&&M(i))for(let t=0;t<4;t++){const n=(r<<1)+t%2,c=(s<<1)+(t>>1),p={aabb:o?i.aabb.quadrant(t):e.tileAABB(this,l,i.zoom+1,n,c,i.wrap,i.minZ,i.maxZ,this.projection),zoom:i.zoom+1,x:n,y:c,wrap:i.wrap,fullyVisible:d,tileID:void 0,shouldSplit:void 0,minZ:i.minZ,maxZ:i.maxZ};a&&!u&&(p.tileID=new e.OverscaledTileID(i.zoom+1===C?E:i.zoom+1,i.wrap,i.zoom+1,n,c),I(p)),O.push(p)}else{const a=i.zoom===C?E:i.zoom;if(t.minzoom&&t.minzoom>a)continue;const o=c[0]-(.5+r+(i.wrap<<i.zoom))*(1<<n-i.zoom),l=c[1]-.5-s,u=i.tileID?i.tileID:new e.OverscaledTileID(a,i.wrap,i.zoom,r,s);T.push({tileID:u,distanceSq:o*o+l*l})}}if(this.fogCullDistSq){const n=this.fogCullDistSq,i=this.horizonLineFromTop();T=T.filter(a=>{const o=[0,0,0,1],r=[e.EXTENT,e.EXTENT,0,1],s=this.calculateFogTileMatrix(a.tileID.toUnwrapped());e.transformMat4$1(o,o,s),e.transformMat4$1(r,r,s);const l=e.getAABBPointSquareDist(o,r);if(0===l)return!0;let c=!1;const u=this._elevation;if(u&&l>n&&0!==i){const n=this.calculateProjMatrix(a.tileID.toUnwrapped());let o;t.isTerrainDEM||(o=u.getMinMaxForTile(a.tileID)),o||(o={min:_,max:b});const r=e.furthestTileCorner(this.rotation),s=[r[0]*e.EXTENT,r[1]*e.EXTENT,o.max];e.transformMat4(s,s,n),c=(1-s[1])*this.height*.5<i}return l<n||c})}return T.sort((e,t)=>e.distanceSq-t.distanceSq).map(e=>e.tileID)}resize(e,t){this.width=e,this.height=t,this.pixelsToGLUnits=[2/e,-2/t],this._constrain(),this._calcMatrices()}get unmodified(){return this._unmodified}zoomScale(e){return Math.pow(2,e)}scaleZoom(e){return Math.log(e)/Math.LN2}project(t){const n=e.clamp(t.lat,-e.MAX_MERCATOR_LATITUDE,e.MAX_MERCATOR_LATITUDE),i=this.projection.project(t.lng,n);return new e.Point(i.x*this.worldSize,i.y*this.worldSize)}unproject(e){return this.projection.unproject(e.x/this.worldSize,e.y/this.worldSize)}get point(){return this.project(this.center)}get pointMerc(){return this.point._div(this.worldSize)}get pixelsPerMeterRatio(){return this.pixelsPerMeter/e.mercatorZfromAltitude(1,this.center.lat)/this.worldSize}setLocationAtPoint(t,n){let i,a;const o=this.centerPoint;if("globe"===this.projection.name){const e=this.worldSize;i=(n.x-o.x)/e,a=(n.y-o.y)/e}else{const e=this.pointCoordinate(n),t=this.pointCoordinate(o);i=e.x-t.x,a=e.y-t.y}const r=this.locationCoordinate(t);this.setLocation(new e.MercatorCoordinate(r.x-i,r.y-a))}setLocation(e){this.center=this.coordinateLocation(e),this.projection.wrap&&(this.center=this.center.wrap())}locationPoint(e){return this.projection.locationPoint(this,e)}locationPoint3D(e){return this.projection.locationPoint(this,e,!0)}pointLocation(e){return this.coordinateLocation(this.pointCoordinate(e))}pointLocation3D(e){return this.coordinateLocation(this.pointCoordinate3D(e))}locationCoordinate(t,n){const i=n?e.mercatorZfromAltitude(n,t.lat):void 0,a=this.projection.project(t.lng,t.lat);return new e.MercatorCoordinate(a.x,a.y,i)}coordinateLocation(e){return this.projection.unproject(e.x,e.y)}pointRayIntersection(t,n){const i=null!=n?n:this._centerAltitude,a=[t.x,t.y,0,1],o=[t.x,t.y,1,1];e.transformMat4$1(a,a,this.pixelMatrixInverse),e.transformMat4$1(o,o,this.pixelMatrixInverse);const r=o[3];e.scale$1(a,a,1/a[3]),e.scale$1(o,o,1/r);const s=a[2],l=o[2];return{p0:a,p1:o,t:s===l?0:(i-s)/(l-s)}}screenPointToMercatorRay(t){const n=[t.x,t.y,0,1],i=[t.x,t.y,1,1];return e.transformMat4$1(n,n,this.pixelMatrixInverse),e.transformMat4$1(i,i,this.pixelMatrixInverse),e.scale$1(n,n,1/n[3]),e.scale$1(i,i,1/i[3]),n[2]=e.mercatorZfromAltitude(n[2],this._center.lat)*this.worldSize,i[2]=e.mercatorZfromAltitude(i[2],this._center.lat)*this.worldSize,e.scale$1(n,n,1/this.worldSize),e.scale$1(i,i,1/this.worldSize),new e.Ray([n[0],n[1],n[2]],e.normalize([],e.sub([],i,n)))}rayIntersectionCoordinate(t){const{p0:n,p1:i,t:a}=t,o=e.mercatorZfromAltitude(n[2],this._center.lat),r=e.mercatorZfromAltitude(i[2],this._center.lat);return new e.MercatorCoordinate(e.number(n[0],i[0],a)/this.worldSize,e.number(n[1],i[1],a)/this.worldSize,e.number(o,r,a))}pointCoordinate(e,t=this._centerAltitude){return this.projection.pointCoordinate(this,e.x,e.y,t)}pointCoordinate3D(t){if(!this.elevation)return this.pointCoordinate(t);let n=this.projection.pointCoordinate3D(this,t.x,t.y);if(n)return new e.MercatorCoordinate(n[0],n[1],n[2]);let i=0,a=this.horizonLineFromTop();if(t.y>a)return this.pointCoordinate(t);const o=.02*a,r=t.clone();for(let t=0;t<10&&a-i>o;t++){r.y=e.number(i,a,.66);const t=this.projection.pointCoordinate3D(this,r.x,r.y);t?(a=r.y,n=t):i=r.y}return n?new e.MercatorCoordinate(n[0],n[1],n[2]):this.pointCoordinate(t)}isPointAboveHorizon(e){return this.projection.isPointAboveHorizon(this,e)}isPointOnSurface(t){if(t.y<0||t.y>this.height||t.x<0||t.x>this.width)return!1;if(this.elevation||this.zoom>=e.GLOBE_ZOOM_THRESHOLD_MAX)return!this.isPointAboveHorizon(t);const n=this.pointCoordinate(t);return n.y>=0&&n.y<=1}_coordinatePoint(t,n){const i=n&&this.elevation?this.elevation.getAtPointOrZero(t,this._centerAltitude):this._centerAltitude,a=[t.x*this.worldSize,t.y*this.worldSize,i+t.toAltitude(),1];return e.transformMat4$1(a,a,this.pixelMatrix),a[3]>0?new e.Point(a[0]/a[3],a[1]/a[3]):new e.Point(Number.MAX_VALUE,Number.MAX_VALUE)}_getBoundsNonRectangular(){const{top:t,left:n}=this._edgeInsets,i=this.height-this._edgeInsets.bottom,a=this.width-this._edgeInsets.right,o=this.pointLocation3D(new e.Point(n,t)),r=this.pointLocation3D(new e.Point(a,t)),s=this.pointLocation3D(new e.Point(a,i)),l=this.pointLocation3D(new e.Point(n,i));let c=Math.min(o.lng,r.lng,s.lng,l.lng),u=Math.max(o.lng,r.lng,s.lng,l.lng),d=Math.min(o.lat,r.lat,s.lat,l.lat),p=Math.max(o.lat,r.lat,s.lat,l.lat);const f=Math.pow(2,-this.zoom)/16*270,m="globe"===this.projection.name?1:4,h=(t,n,i,a,o)=>{const r=(t+i)/2,s=(n+a)/2,l=new e.Point(r,s),{lng:g,lat:y}=this.pointLocation3D(l),v=Math.max(0,c-g,d-y,g-u,y-p);c=Math.min(c,g),u=Math.max(u,g),d=Math.min(d,y),p=Math.max(p,y),(o<m||v>f)&&(h(t,n,r,s,o+1),h(r,s,i,a,o+1))};if(h(n,t,a,t,1),h(a,t,a,i,1),h(a,i,n,i,1),h(n,i,n,t,1),"globe"===this.projection.name){const[t,n]=e.polesInViewport(this);t?(p=90,u=180,c=-180):n&&(d=-90,u=180,c=-180)}return new e.LngLatBounds(new e.LngLat(c,d),new e.LngLat(u,p))}_getBoundsRectangular(t,n){const{top:i,left:a}=this._edgeInsets,o=this.height-this._edgeInsets.bottom,r=this.width-this._edgeInsets.right,s=new e.Point(a,i),l=new e.Point(r,i),c=new e.Point(r,o),u=new e.Point(a,o);let d=this.pointCoordinate(s,t),p=this.pointCoordinate(l,t);const f=this.pointCoordinate(c,n),m=this.pointCoordinate(u,n),h=(e,t)=>(t.y-e.y)/(t.x-e.x);return d.y>1&&p.y>=0?d=new e.MercatorCoordinate((1-m.y)/h(m,d)+m.x,1):d.y<0&&p.y<=1&&(d=new e.MercatorCoordinate(-m.y/h(m,d)+m.x,0)),p.y>1&&d.y>=0?p=new e.MercatorCoordinate((1-f.y)/h(f,p)+f.x,1):p.y<0&&d.y<=1&&(p=new e.MercatorCoordinate(-f.y/h(f,p)+f.x,0)),(new e.LngLatBounds).extend(this.coordinateLocation(d)).extend(this.coordinateLocation(p)).extend(this.coordinateLocation(m)).extend(this.coordinateLocation(f))}_getBoundsRectangularTerrain(){const e=this.elevation;if(!e.visibleDemTiles.length||e.isUsingMockSource())return this._getBoundsRectangular(0,0);const t=e.visibleDemTiles.reduce((e,t)=>{if(t.dem){const n=t.dem.tree;e.min=Math.min(e.min,n.minimums[0]),e.max=Math.max(e.max,n.maximums[0])}return e},{min:Number.MAX_VALUE,max:0});return this._getBoundsRectangular(t.min*e.exaggeration(),t.max*e.exaggeration())}getBounds(){return"mercator"===this.projection.name||"equirectangular"===this.projection.name?this._terrainEnabled()?this._getBoundsRectangularTerrain():this._getBoundsRectangular(0,0):this._getBoundsNonRectangular()}horizonLineFromTop(e=!0){const t=this.height/2/Math.tan(this._fov/2)/Math.tan(Math.max(this._pitch,.1))+this.centerOffset.y,n=this.height/2-t*(1-this._horizonShift);return e?Math.max(0,n):n}getMaxBounds(){return this.maxBounds}setMaxBounds(t){this.maxBounds=t,this.minLat=-e.MAX_MERCATOR_LATITUDE,this.maxLat=e.MAX_MERCATOR_LATITUDE,this.minLng=-180,this.maxLng=180,t&&(this.minLat=t.getSouth(),this.maxLat=t.getNorth(),this.minLng=t.getWest(),this.maxLng=t.getEast(),this.maxLng<this.minLng&&(this.maxLng+=360)),this.worldMinX=e.mercatorXfromLng(this.minLng)*this.tileSize,this.worldMaxX=e.mercatorXfromLng(this.maxLng)*this.tileSize,this.worldMinY=e.mercatorYfromLat(this.maxLat)*this.tileSize,this.worldMaxY=e.mercatorYfromLat(this.minLat)*this.tileSize,this._constrain()}calculatePosMatrix(e,t){return this.projection.createTileMatrix(this,t,e)}calculateDistanceTileData(t){const n=t.key,i=this._distanceTileDataCache;if(i[n])return i[n];const a=t.canonical,o=1/this.height,r=this.cameraWorldSize,s=r/this.zoomScale(a.z),l=(a.x+Math.pow(2,a.z)*t.wrap)*s,c=a.y*s,u=this.point;u.x*=r/this.worldSize,u.y*=r/this.worldSize;const d=this.angle,p=Math.sin(-d),f=-Math.cos(-d);return i[n]={bearing:[p,f],center:[(u.x-l)*o,(u.y-c)*o],scale:s/e.EXTENT*o},i[n]}calculateFogTileMatrix(t){const n=t.key,i=this._fogTileMatrixCache;if(i[n])return i[n];const a=this.projection.createTileMatrix(this,this.cameraWorldSizeForFog,t);return e.multiply(a,this.worldToFogMatrix,a),i[n]=new Float32Array(a),i[n]}calculateProjMatrix(t,n=!1){const i=t.key,a=n?this._alignedProjMatrixCache:this._projMatrixCache;if(a[i])return a[i];const o=this.calculatePosMatrix(t,this.worldSize);return e.multiply(o,this.projection.isReprojectedInTileSpace?this.mercatorMatrix:n?this.alignedProjMatrix:this.projMatrix,o),a[i]=new Float32Array(o),a[i]}calculatePixelsToTileUnitsMatrix(t){const n=t.tileID.key,i=this._pixelsToTileUnitsCache;if(i[n])return i[n];const a=function(t,n){const{scale:i}=t.tileTransform,a=i*e.EXTENT/(t.tileSize*Math.pow(2,n.zoom-t.tileID.overscaledZ+t.tileID.canonical.z));return o=new Float32Array(4),l=(r=n.inverseAdjustmentMatrix)[1],c=r[2],u=r[3],p=(s=[a,a])[1],o[0]=r[0]*(d=s[0]),o[1]=l*d,o[2]=c*p,o[3]=u*p,o;var o,r,s,l,c,u,d,p}(t,this);return i[n]=a,i[n]}customLayerMatrix(){return this.mercatorMatrix.slice()}globeToMercatorMatrix(){if("globe"===this.projection.name){const t=1/this.worldSize,n=e.fromScaling([],[t,t,t]);return e.multiply(n,n,this.globeMatrix),n}}recenterOnTerrain(){if(!this._elevation||"globe"===this.projection.name)return;const t=this._elevation;this._updateCameraState();const n=e.mercatorZfromAltitude(1,this._center.lat)*this.worldSize,i=this._computeCameraPosition(n),a=this._camera.forward(),o=e.mercatorZfromAltitude(1,this._center.lat);i[2]/=o,a[2]/=o,e.normalize(a,a);const r=t.raycast(i,a,t.exaggeration());if(r){const t=e.scaleAndAdd([],i,a,r),n=new e.MercatorCoordinate(t[0],t[1],e.mercatorZfromAltitude(t[2],e.latFromMercatorY(t[1]))),s=(n.z+e.length([n.x-i[0],n.y-i[1],n.z-i[2]*o]))*this._pixelsPerMercatorPixel;this._seaLevelZoom=this._zoomFromMercatorZ(s),this._centerAltitude=n.toAltitude(),this._center=this.coordinateLocation(n),this._updateZoomFromElevation(),this._constrain(),this._calcMatrices()}}_constrainCamera(t=!1){if(!this._elevation)return;const n=this._elevation,i=e.mercatorZfromAltitude(1,this._center.lat)*this.worldSize,a=this._computeCameraPosition(i),o=n.getAtPointOrZero(new e.MercatorCoordinate(...a)),r=this.pixelsPerMeter/this.worldSize*o,s=this._minimumHeightOverTerrain(),l=a[2]-r;if(l<=s)if(l<0||t){const t=this.locationCoordinate(this._center,this._centerAltitude),n=[a[0],a[1],t.z-a[2]],i=e.length(n);n[2]-=(s-l)/this._pixelsPerMercatorPixel;const o=e.length(n);if(0===o)return;e.scale$2(n,n,i/o*this._pixelsPerMercatorPixel),this._camera.position=[a[0],a[1],t.z*this._pixelsPerMercatorPixel-n[2]],this._updateStateFromCamera()}else this._isCameraConstrained=!0}_constrain(){if(!this.center||!this.width||!this.height||this._constraining)return;this._constraining=!0;const t="globe"===this.projection.name||this.mercatorFromTransition;if(this.projection.isReprojectedInTileSpace||t){const n=this.center;return n.lat=e.clamp(n.lat,this.minLat,this.maxLat),(this.maxBounds||!this.renderWorldCopies&&!t)&&(n.lng=e.clamp(n.lng,this.minLng,this.maxLng)),this.center=n,void(this._constraining=!1)}const n=this._unmodified,{x:i,y:a}=this.point;let o=0,r=i,s=a;const l=this.width/2,c=this.height/2,u=this.worldMinY*this.scale,d=this.worldMaxY*this.scale;if(a-c<u&&(s=u+c),a+c>d&&(s=d-c),d-u<this.height&&(o=Math.max(o,this.height/(d-u)),s=(d+u)/2),this.maxBounds||!this._renderWorldCopies||!this.projection.wrap){const e=this.worldMinX*this.scale,t=this.worldMaxX*this.scale,n=this.worldSize/2-(e+t)/2;r=(i+n+this.worldSize)%this.worldSize-n,r-l<e&&(r=e+l),r+l>t&&(r=t-l),t-e<this.width&&(o=Math.max(o,this.width/(t-e)),r=(t+e)/2)}r===i&&s===a||(this.center=this.unproject(new e.Point(r,s))),o&&(this.zoom+=this.scaleZoom(o)),this._constrainCamera(),this._unmodified=n,this._constraining=!1}_minZoomForBounds(){let e=Math.max(0,this.scaleZoom(this.height/(this.worldMaxY-this.worldMinY)));return this.maxBounds&&(e=Math.max(e,this.scaleZoom(this.width/(this.worldMaxX-this.worldMinX)))),e}_maxCameraBoundsDistance(){return this._mercatorZfromZoom(this._minZoomForBounds())}_calcMatrices(){if(!this.height)return;const t=this.centerOffset,n=this.pixelsPerMeter;"globe"===this.projection.name&&(this._mercatorScaleRatio=e.mercatorZfromAltitude(1,this.center.lat)/e.mercatorZfromAltitude(1,e.GLOBE_SCALE_MATCH_LATITUDE));const i=Yi(this.projection,this.zoom,this.width,this.height,1024);this._pixelsPerMercatorPixel=this.projection.pixelSpaceConversion(this.center.lat,this.worldSize,i),this.cameraToCenterDistance=.5/Math.tan(.5*this._fov)*this.height*this._pixelsPerMercatorPixel,this._updateCameraState(),this._farZ=this.projection.farthestPixelDistance(this),this._nearZ=this.height/50;const a="meters"===this.projection.zAxisUnit?n:1,o=this._camera.getWorldToCamera(this.worldSize,a),r=this._camera.getCameraToClipPerspective(this._fov,this.width/this.height,this._nearZ,this._farZ);r[8]=2*-t.x/this.width,r[9]=2*t.y/this.height;let s=e.mul([],r,o);if(this.projection.isReprojectedInTileSpace){const t=this.locationCoordinate(this.center),n=e.identity([]);e.translate(n,n,[t.x*this.worldSize,t.y*this.worldSize,0]),e.multiply(n,n,Vi(this)),e.translate(n,n,[-t.x*this.worldSize,-t.y*this.worldSize,0]),e.multiply(s,s,n),this.inverseAdjustmentMatrix=function(e){const t=Vi(e,!0);return v([],[t[0],t[1],t[4],t[5]])}(this)}else this.inverseAdjustmentMatrix=[1,0,0,1];this.mercatorMatrix=e.scale([],s,[this.worldSize,this.worldSize,this.worldSize/a,1]),this.projMatrix=s,this.invProjMatrix=e.invert(new Float64Array(16),this.projMatrix);const l=e.invert([],r);this.frustumCorners=e.FrustumCorners.fromInvProjectionMatrix(l,this.horizonLineFromTop(),this.height);const c=new Float32Array(16);e.identity(c),e.scale(c,c,[1,-1,1]),e.rotateX(c,c,this._pitch),e.rotateZ(c,c,this.angle);const u=e.perspective(new Float32Array(16),this._fov,this.width/this.height,this._nearZ,this._farZ),d=(Math.PI/2-this._pitch)*(this.height/this._fov)*this._horizonShift;u[8]=2*-t.x/this.width,u[9]=2*(t.y+d)/this.height,this.skyboxMatrix=e.multiply(c,u,c);const p=this.point,f=p.x,m=p.y,h=this.width%2/2,g=this.height%2/2,y=Math.cos(this.angle),b=Math.sin(this.angle),_=f-Math.round(f)+y*h+b*g,w=m-Math.round(m)+y*g+b*h,x=new Float64Array(s);if(e.translate(x,x,[_>.5?_-1:_,w>.5?w-1:w,0]),this.alignedProjMatrix=x,s=e.create(),e.scale(s,s,[this.width/2,-this.height/2,1]),e.translate(s,s,[1,-1,0]),this.labelPlaneMatrix=s,s=e.create(),e.scale(s,s,[1,-1,1]),e.translate(s,s,[-1,-1,0]),e.scale(s,s,[2/this.width,2/this.height,1]),this.glCoordMatrix=s,this.pixelMatrix=e.multiply(new Float64Array(16),this.labelPlaneMatrix,this.projMatrix),this._calcFogMatrices(),this._distanceTileDataCache={},s=e.invert(new Float64Array(16),this.pixelMatrix),!s)throw new Error("failed to invert matrix");if(this.pixelMatrixInverse=s,"globe"===this.projection.name||this.mercatorFromTransition){this.globeMatrix=e.calculateGlobeMatrix(this);const t=[this.globeMatrix[12],this.globeMatrix[13],this.globeMatrix[14]];this.globeCenterInViewSpace=e.transformMat4(t,t,o),this.globeRadius=this.worldSize/2/Math.PI-1}else this.globeMatrix=s;this._projMatrixCache={},this._alignedProjMatrixCache={},this._pixelsToTileUnitsCache={}}_calcFogMatrices(){this._fogTileMatrixCache={};const t=this.cameraWorldSizeForFog,n=this.cameraPixelsPerMeter,i=this._camera.position,a=1/this.height/this._pixelsPerMercatorPixel,o=[t,t,n];e.scale$2(o,o,a),e.scale$2(i,i,-1),e.multiply$2(i,i,o);const r=e.create();e.translate(r,r,i),e.scale(r,r,o),this.mercatorFogMatrix=r,this.worldToFogMatrix=this._camera.getWorldToCameraPosition(t,n,a)}_computeCameraPosition(e){const t=(e=e||this.pixelsPerMeter)/this.pixelsPerMeter,n=this._camera.forward(),i=this.point,a=this._mercatorZfromZoom(this._seaLevelZoom?this._seaLevelZoom:this._zoom)*t-e/this.worldSize*this._centerAltitude;return[i.x/this.worldSize-n[0]*a,i.y/this.worldSize-n[1]*a,e/this.worldSize*this._centerAltitude-n[2]*a]}_updateCameraState(){this.height&&(this._camera.setPitchBearing(this._pitch,this.angle),this._camera.position=this._computeCameraPosition())}_translateCameraConstrained(t){const n=this._maxCameraBoundsDistance()*Math.cos(this._pitch),i=this._camera.position[2],a=t[2];let o=1;this.projection.wrap&&(this.center=this.center.wrap()),a>0&&(o=Math.min((n-i)/a,1)),this._camera.position=e.scaleAndAdd([],this._camera.position,t,o),this._updateStateFromCamera()}_updateStateFromCamera(){const t=this._camera.position,n=this._camera.forward(),{pitch:i,bearing:a}=this._camera.getPitchBearing(),o=e.mercatorZfromAltitude(this._centerAltitude,this.center.lat)*this._pixelsPerMercatorPixel,r=this._mercatorZfromZoom(this._maxZoom)*Math.cos(e.degToRad(this._maxPitch)),s=Math.max((t[2]-o)/Math.cos(i),r),l=this._zoomFromMercatorZ(s);e.scaleAndAdd(t,t,n,s),this._pitch=e.clamp(i,e.degToRad(this.minPitch),e.degToRad(this.maxPitch)),this.angle=e.wrap(a,-Math.PI,Math.PI),this._setZoom(e.clamp(l,this._minZoom,this._maxZoom)),this._updateSeaLevelZoom(),this._center=this.coordinateLocation(new e.MercatorCoordinate(t[0],t[1],t[2])),this._unmodified=!1,this._constrain(),this._calcMatrices()}_worldSizeFromZoom(e){return Math.pow(2,e)*this.tileSize}_mercatorZfromZoom(e){return this.cameraToCenterDistance/this._worldSizeFromZoom(e)}_minimumHeightOverTerrain(){const e=Math.min((null!=this._seaLevelZoom?this._seaLevelZoom:this._zoom)+4,this._maxZoom);return this._mercatorZfromZoom(e)}_zoomFromMercatorZ(e){return this.scaleZoom(this.cameraToCenterDistance/(e*this.tileSize))}zoomFromMercatorZAdjusted(t){let n=0,i=e.GLOBE_ZOOM_THRESHOLD_MAX,a=0,o=1/0;for(;i-n>1e-6&&i>n;){const e=n+.5*(i-n),r=this.tileSize*Math.pow(2,e),s=this.getCameraToCenterDistance(this.projection,e,r),l=this.scaleZoom(s/(t*this.tileSize)),c=Math.abs(e-l);c<o&&(o=c,a=e),e<l?n=e:i=e}return a}_terrainEnabled(){return!(!this._elevation||!this.projection.supportsTerrain&&(e.warnOnce("Terrain is not yet supported with alternate projections. Use mercator or globe to enable terrain."),1))}anyCornerOffEdge(t,n){const i=Math.min(t.x,n.x),a=Math.max(t.x,n.x),o=Math.min(t.y,n.y),r=Math.max(t.y,n.y);if(o<this.horizonLineFromTop(!1))return!0;if("mercator"!==this.projection.name)return!1;const s=[new e.Point(i,o),new e.Point(a,r),new e.Point(i,r),new e.Point(a,o)],l=this.renderWorldCopies?-3:0,c=this.renderWorldCopies?4:1;for(const e of s){const t=this.pointRayIntersection(e);if(t.t<0)return!0;const n=this.rayIntersectionCoordinate(t);if(n.x<l||n.y<0||n.x>c||n.y>1)return!0}return!1}isHorizonVisible(){return this.pitch+e.radToDeg(this.fovAboveCenter)>88||this.anyCornerOffEdge(new e.Point(0,0),new e.Point(this.width,this.height))}zoomDeltaToMovement(t,n){const i=e.length(e.sub([],this._camera.position,t)),a=this._zoomFromMercatorZ(i)+n;return i-this._mercatorZfromZoom(a)}getCameraPoint(){if("globe"===this.projection.name){const t=function([t,n,i],a){const o=[t,n,i,1];e.transformMat4$1(o,o,a);const r=o[3]=Math.max(o[3],1e-6);return o[0]/=r,o[1]/=r,o[2]/=r,o}([this.globeMatrix[12],this.globeMatrix[13],this.globeMatrix[14]],this.pixelMatrix);return new e.Point(t[0],t[1])}{const t=Math.tan(this._pitch)*(this.cameraToCenterDistance||1);return this.centerPoint.add(new e.Point(0,t))}}getCameraToCenterDistance(e,t=this.zoom,n=this.worldSize){const i=Yi(e,t,this.width,this.height,1024),a=e.pixelSpaceConversion(this.center.lat,n,i);return.5/Math.tan(.5*this._fov)*this.height*a}getWorldToCameraMatrix(){const t=this._camera.getWorldToCamera(this.worldSize,"meters"===this.projection.zAxisUnit?this.pixelsPerMeter:1);return"globe"===this.projection.name&&e.multiply(t,t,this.globeMatrix),t}}function $i(e,t){let n=!1,i=null;const a=()=>{i=null,n&&(e(),i=setTimeout(a,t),n=!1)};return()=>(n=!0,i||a(),i)}class Qi{constructor(t){this._hashName=t&&encodeURIComponent(t),e.bindAll(["_getCurrentHash","_onHashChange","_updateHash"],this),this._updateHash=$i(this._updateHashUnthrottled.bind(this),300)}addTo(t){return this._map=t,e.window.addEventListener("hashchange",this._onHashChange,!1),t.on("moveend",this._updateHash),this}remove(){return this._map?(this._map.off("moveend",this._updateHash),e.window.removeEventListener("hashchange",this._onHashChange,!1),clearTimeout(this._updateHash()),this._map=void 0,this):this}getHashString(){const t=this._map;if(!t)return"";const n=ea(t);if(this._hashName){const t=this._hashName;let i=!1;const a=e.window.location.hash.slice(1).split("&").map(e=>{const a=e.split("=")[0];return a===t?(i=!0,`${a}=${n}`):e}).filter(e=>e);return i||a.push(`${t}=${n}`),"#"+a.join("&")}return"#"+n}_getCurrentHash(){const t=e.window.location.hash.replace("#","");if(this._hashName){let e;return t.split("&").map(e=>e.split("=")).forEach(t=>{t[0]===this._hashName&&(e=t)}),(e&&e[1]||"").split("/")}return t.split("/")}_onHashChange(){const e=this._map;if(!e)return!1;const t=this._getCurrentHash();if(t.length>=3&&!t.some(e=>isNaN(e))){const n=e.dragRotate.isEnabled()&&e.touchZoomRotate.isEnabled()?+(t[3]||0):e.getBearing();return e.jumpTo({center:[+t[2],+t[1]],zoom:+t[0],bearing:n,pitch:+(t[4]||0)}),!0}return!1}_updateHashUnthrottled(){const t=e.window.location.href.replace(/(#.+)?$/,this.getHashString());e.window.history.replaceState(e.window.history.state,null,t)}}function ea(e,t){const n=e.getCenter(),i=Math.round(100*e.getZoom())/100,a=Math.ceil((i*Math.LN2+Math.log(512/360/.5))/Math.LN10),o=Math.pow(10,a),r=Math.round(n.lng*o)/o,s=Math.round(n.lat*o)/o,l=e.getBearing(),c=e.getPitch();let u=t?`/${r}/${s}/${i}`:`${i}/${s}/${r}`;return(l||c)&&(u+="/"+Math.round(10*l)/10),c&&(u+="/"+Math.round(c)),u}const ta={linearity:.3,easing:e.bezier(0,0,.3,1)},na=e.extend({deceleration:2500,maxSpeed:1400},ta),ia=e.extend({deceleration:20,maxSpeed:1400},ta),aa=e.extend({deceleration:1e3,maxSpeed:360},ta),oa=e.extend({deceleration:1e3,maxSpeed:90},ta);class ra{constructor(e){this._map=e,this.clear()}clear(){this._inertiaBuffer=[]}record(t){this._drainInertiaBuffer(),this._inertiaBuffer.push({time:e.exported.now(),settings:t})}_drainInertiaBuffer(){const t=this._inertiaBuffer,n=e.exported.now();for(;t.length>0&&n-t[0].time>160;)t.shift()}_onMoveEnd(t){if(this._map._prefersReducedMotion())return;if(this._drainInertiaBuffer(),this._inertiaBuffer.length<2)return;const n={zoom:0,bearing:0,pitch:0,pan:new e.Point(0,0),pinchAround:void 0,around:void 0};for(const{settings:e}of this._inertiaBuffer)n.zoom+=e.zoomDelta||0,n.bearing+=e.bearingDelta||0,n.pitch+=e.pitchDelta||0,e.panDelta&&n.pan._add(e.panDelta),e.around&&(n.around=e.around),e.pinchAround&&(n.pinchAround=e.pinchAround);const i=this._inertiaBuffer[this._inertiaBuffer.length-1].time-this._inertiaBuffer[0].time,a={};if(n.pan.mag()){const o=la(n.pan.mag(),i,e.extend({},na,t||{}));a.offset=n.pan.mult(o.amount/n.pan.mag()),a.center=this._map.transform.center,sa(a,o)}if(n.zoom){const e=la(n.zoom,i,ia);a.zoom=this._map.transform.zoom+e.amount,sa(a,e)}if(n.bearing){const t=la(n.bearing,i,aa);a.bearing=this._map.transform.bearing+e.clamp(t.amount,-179,179),sa(a,t)}if(n.pitch){const e=la(n.pitch,i,oa);a.pitch=this._map.transform.pitch+e.amount,sa(a,e)}if(a.zoom||a.bearing){const e=void 0===n.pinchAround?n.around:n.pinchAround;a.around=e?this._map.unproject(e):this._map.getCenter()}return this.clear(),a.noMoveStart=!0,a}}function sa(e,t){(!e.duration||e.duration<t.duration)&&(e.duration=t.duration,e.easing=t.easing)}function la(t,n,i){const{maxSpeed:a,linearity:o,deceleration:r}=i,s=e.clamp(t*o/(n/1e3),-a,a),l=Math.abs(s)/(r*o);return{easing:i.easing,duration:1e3*l,amount:s*(l/2)}}class ca extends e.Event{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(t,n,i,a={}){const o=m(n.getCanvasContainer(),i),r=n.unproject(o);super(t,e.extend({point:o,lngLat:r,originalEvent:i},a)),this._defaultPrevented=!1,this.target=n}}class ua extends e.Event{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(t,n,i){const a="touchend"===t?i.changedTouches:i.touches,o=h(n.getCanvasContainer(),a),r=o.map(e=>n.unproject(e)),s=o.reduce((e,t,n,i)=>e.add(t.div(i.length)),new e.Point(0,0));super(t,{points:o,point:s,lngLats:r,lngLat:n.unproject(s),originalEvent:i}),this._defaultPrevented=!1}}class da extends e.Event{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(e,t,n){super(e,{originalEvent:n}),this._defaultPrevented=!1}}class pa{constructor(e,t){this._map=e,this._clickTolerance=t.clickTolerance}reset(){this._mousedownPos=void 0}wheel(e){return this._firePreventable(new da(e.type,this._map,e))}mousedown(e,t){return this._mousedownPos=t,this._firePreventable(new ca(e.type,this._map,e))}mouseup(e){this._map.fire(new ca(e.type,this._map,e))}preclick(t){const n=e.extend({},t);n.type="preclick",this._map.fire(new ca(n.type,this._map,n))}click(e,t){this._mousedownPos&&this._mousedownPos.dist(t)>=this._clickTolerance||(this.preclick(e),this._map.fire(new ca(e.type,this._map,e)))}dblclick(e){return this._firePreventable(new ca(e.type,this._map,e))}mouseover(e){this._map.fire(new ca(e.type,this._map,e))}mouseout(e){this._map.fire(new ca(e.type,this._map,e))}touchstart(e){return this._firePreventable(new ua(e.type,this._map,e))}touchmove(e){this._map.fire(new ua(e.type,this._map,e))}touchend(e){this._map.fire(new ua(e.type,this._map,e))}touchcancel(e){this._map.fire(new ua(e.type,this._map,e))}_firePreventable(e){if(this._map.fire(e),e.defaultPrevented)return{}}isEnabled(){return!0}isActive(){return!1}enable(){}disable(){}}class fa{constructor(e){this._map=e}reset(){this._delayContextMenu=!1,this._contextMenuEvent=void 0}mousemove(e){this._map.fire(new ca(e.type,this._map,e))}mousedown(){this._delayContextMenu=!0}mouseup(){this._delayContextMenu=!1,this._contextMenuEvent&&(this._map.fire(new ca("contextmenu",this._map,this._contextMenuEvent)),delete this._contextMenuEvent)}contextmenu(e){this._delayContextMenu?this._contextMenuEvent=e:this._map.fire(new ca(e.type,this._map,e)),this._map.listens("contextmenu")&&e.preventDefault()}isEnabled(){return!0}isActive(){return!1}enable(){}disable(){}}class ma{constructor(e,t){this._map=e,this._el=e.getCanvasContainer(),this._container=e.getContainer(),this._clickTolerance=t.clickTolerance||1}isEnabled(){return!!this._enabled}isActive(){return!!this._active}enable(){this.isEnabled()||(this._enabled=!0)}disable(){this.isEnabled()&&(this._enabled=!1)}mousedown(e,t){this.isEnabled()&&e.shiftKey&&0===e.button&&(u(),this._startPos=this._lastPos=t,this._active=!0)}mousemoveWindow(e,t){if(!this._active)return;const n=t,i=this._startPos,a=this._lastPos;if(!i||!a||a.equals(n)||!this._box&&n.dist(i)<this._clickTolerance)return;this._lastPos=n,this._box||(this._box=o("div","mapboxgl-boxzoom",this._container),this._container.classList.add("mapboxgl-crosshair"),this._fireEvent("boxzoomstart",e));const r=Math.min(i.x,n.x),s=Math.max(i.x,n.x),l=Math.min(i.y,n.y),c=Math.max(i.y,n.y);this._map._requestDomTask(()=>{this._box&&(this._box.style.transform=`translate(${r}px,${l}px)`,this._box.style.width=s-r+"px",this._box.style.height=c-l+"px")})}mouseupWindow(t,n){if(!this._active)return;const i=this._startPos,a=n;if(i&&0===t.button){if(this.reset(),f(),i.x!==a.x||i.y!==a.y)return this._map.fire(new e.Event("boxzoomend",{originalEvent:t})),{cameraAnimation:e=>e.fitScreenCoordinates(i,a,this._map.getBearing(),{linear:!1})};this._fireEvent("boxzoomcancel",t)}}keydown(e){this._active&&27===e.keyCode&&(this.reset(),this._fireEvent("boxzoomcancel",e))}blur(){this.reset()}reset(){this._active=!1,this._container.classList.remove("mapboxgl-crosshair"),this._box&&(this._box.remove(),this._box=null),d(),delete this._startPos,delete this._lastPos}_fireEvent(t,n){return this._map.fire(new e.Event(t,{originalEvent:n}))}}function ha(e,t){const n={};for(let i=0;i<e.length;i++)n[e[i].identifier]=t[i];return n}class ga{constructor(e){this.reset(),this.numTouches=e.numTouches}reset(){this.centroid=void 0,this.startTime=0,this.touches={},this.aborted=!1}touchstart(t,n,i){(this.centroid||i.length>this.numTouches)&&(this.aborted=!0),this.aborted||(0===this.startTime&&(this.startTime=t.timeStamp),i.length===this.numTouches&&(this.centroid=function(t){const n=new e.Point(0,0);for(const e of t)n._add(e);return n.div(t.length)}(n),this.touches=ha(i,n)))}touchmove(e,t,n){if(this.aborted||!this.centroid)return;const i=ha(n,t);for(const e in this.touches){const t=i[e];(!t||t.dist(this.touches[e])>30)&&(this.aborted=!0)}}touchend(e,t,n){if((!this.centroid||e.timeStamp-this.startTime>500)&&(this.aborted=!0),0===n.length){const e=!this.aborted&&this.centroid;if(this.reset(),e)return e}}}class ya{constructor(e){this.singleTap=new ga(e),this.numTaps=e.numTaps,this.reset()}reset(){this.lastTime=1/0,this.lastTap=void 0,this.count=0,this.singleTap.reset()}touchstart(e,t,n){this.singleTap.touchstart(e,t,n)}touchmove(e,t,n){this.singleTap.touchmove(e,t,n)}touchend(e,t,n){const i=this.singleTap.touchend(e,t,n);if(i){const t=e.timeStamp-this.lastTime<500,n=!this.lastTap||this.lastTap.dist(i)<30;if(t&&n||this.reset(),this.count++,this.lastTime=e.timeStamp,this.lastTap=i,this.count===this.numTaps)return this.reset(),i}}}class va{constructor(){this._zoomIn=new ya({numTouches:1,numTaps:2}),this._zoomOut=new ya({numTouches:2,numTaps:1}),this.reset()}reset(){this._active=!1,this._zoomIn.reset(),this._zoomOut.reset()}touchstart(e,t,n){this._zoomIn.touchstart(e,t,n),this._zoomOut.touchstart(e,t,n)}touchmove(e,t,n){this._zoomIn.touchmove(e,t,n),this._zoomOut.touchmove(e,t,n)}touchend(e,t,n){const i=this._zoomIn.touchend(e,t,n),a=this._zoomOut.touchend(e,t,n);return i?(this._active=!0,e.preventDefault(),setTimeout(()=>this.reset(),0),{cameraAnimation:t=>t.easeTo({duration:300,zoom:t.getZoom()+1,around:t.unproject(i)},{originalEvent:e})}):a?(this._active=!0,e.preventDefault(),setTimeout(()=>this.reset(),0),{cameraAnimation:t=>t.easeTo({duration:300,zoom:t.getZoom()-1,around:t.unproject(a)},{originalEvent:e})}):void 0}touchcancel(){this.reset()}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}const ba={0:1,2:2};class _a{constructor(e){this.reset(),this._clickTolerance=e.clickTolerance||1}blur(){this.reset()}reset(){this._active=!1,this._moved=!1,this._lastPoint=void 0,this._eventButton=void 0}_correctButton(e,t){return!1}_move(e,t){return{}}mousedown(e,t){if(this._lastPoint)return;const n=g(e);this._correctButton(e,n)&&(this._lastPoint=t,this._eventButton=n)}mousemoveWindow(e,t){const n=this._lastPoint;if(n)if(e.preventDefault(),null!=this._eventButton&&function(e,t){const n=ba[t];return void 0===e.buttons||(e.buttons&n)!==n}(e,this._eventButton))this.reset();else if(this._moved||!(t.dist(n)<this._clickTolerance))return this._moved=!0,this._lastPoint=t,this._move(n,t)}mouseupWindow(e){this._lastPoint&&g(e)===this._eventButton&&(this._moved&&f(),this.reset())}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class wa extends _a{mousedown(e,t){super.mousedown(e,t),this._lastPoint&&(this._active=!0)}_correctButton(e,t){return 0===t&&!e.ctrlKey}_move(e,t){return{around:t,panDelta:t.sub(e)}}}class xa extends _a{_correctButton(e,t){return 0===t&&e.ctrlKey||2===t}_move(e,t){const n=.8*(t.x-e.x);if(n)return this._active=!0,{bearingDelta:n}}contextmenu(e){e.preventDefault()}}class ka extends _a{_correctButton(e,t){return 0===t&&e.ctrlKey||2===t}_move(e,t){const n=-.5*(t.y-e.y);if(n)return this._active=!0,{pitchDelta:n}}contextmenu(e){e.preventDefault()}}class Oa{constructor(t,n){this._map=t,this._el=t.getCanvasContainer(),this._minTouches=1,this._clickTolerance=n.clickTolerance||1,this.reset(),e.bindAll(["_addTouchPanBlocker","_showTouchPanBlockerAlert"],this)}reset(){this._active=!1,this._touches={},this._sum=new e.Point(0,0)}touchstart(e,t,n){return this._calculateTransform(e,t,n)}touchmove(t,n,i){if(this._active&&!(i.length<this._minTouches)){if(this._map._cooperativeGestures&&!this._map.isMoving()){if(1===i.length&&!e.isFullscreen())return void this._showTouchPanBlockerAlert();"hidden"!==this._alertContainer.style.visibility&&(this._alertContainer.style.visibility="hidden",clearTimeout(this._alertTimer))}return t.cancelable&&t.preventDefault(),this._calculateTransform(t,n,i)}}touchend(e,t,n){this._calculateTransform(e,t,n),this._active&&n.length<this._minTouches&&this.reset()}touchcancel(){this.reset()}_calculateTransform(t,n,i){i.length>0&&(this._active=!0);const a=ha(i,n),o=new e.Point(0,0),r=new e.Point(0,0);let s=0;for(const e in a){const t=a[e],n=this._touches[e];n&&(o._add(t),r._add(t.sub(n)),s++,a[e]=t)}if(this._touches=a,s<this._minTouches||!r.mag())return;const l=r.div(s);return this._sum._add(l),this._sum.mag()<this._clickTolerance?void 0:{around:o.div(s),panDelta:l}}enable(){this._enabled=!0,this._map._cooperativeGestures&&(this._addTouchPanBlocker(),this._el.classList.add("mapboxgl-touch-pan-blocker-override","mapboxgl-scrollable-page"))}disable(){this._enabled=!1,this._map._cooperativeGestures&&(clearTimeout(this._alertTimer),this._alertContainer.remove(),this._el.classList.remove("mapboxgl-touch-pan-blocker-override","mapboxgl-scrollable-page")),this.reset()}isEnabled(){return!!this._enabled}isActive(){return!!this._active}_addTouchPanBlocker(){this._map&&!this._alertContainer&&(this._alertContainer=o("div","mapboxgl-touch-pan-blocker",this._map._container),this._alertContainer.textContent=this._map._getUIString("TouchPanBlocker.Message"),this._alertContainer.style.fontSize=Math.max(10,Math.min(24,Math.floor(.05*this._el.clientWidth)))+"px")}_showTouchPanBlockerAlert(){this._alertContainer.style.visibility="visible",this._alertContainer.classList.add("mapboxgl-touch-pan-blocker-show"),this._alertContainer.setAttribute("role","alert"),clearTimeout(this._alertTimer),this._alertTimer=setTimeout(()=>{this._alertContainer.classList.remove("mapboxgl-touch-pan-blocker-show"),this._alertContainer.setAttribute("role","null")},500)}}class Ta{constructor(){this.reset()}reset(){this._active=!1,this._firstTwoTouches=void 0}_start(e){}_move(e,t,n){return{}}touchstart(e,t,n){this._firstTwoTouches||n.length<2||(this._firstTwoTouches=[n[0].identifier,n[1].identifier],this._start([t[0],t[1]]))}touchmove(e,t,n){const i=this._firstTwoTouches;if(!i)return;e.preventDefault();const[a,o]=i,r=Ca(n,t,a),s=Ca(n,t,o);if(!r||!s)return;const l=this._aroundCenter?null:r.add(s).div(2);return this._move([r,s],l,e)}touchend(e,t,n){if(!this._firstTwoTouches)return;const[i,a]=this._firstTwoTouches,o=Ca(n,t,i),r=Ca(n,t,a);o&&r||(this._active&&f(),this.reset())}touchcancel(){this.reset()}enable(e){this._enabled=!0,this._aroundCenter=!!e&&"center"===e.around}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}function Ca(e,t,n){for(let i=0;i<e.length;i++)if(e[i].identifier===n)return t[i]}function Ea(e,t){return Math.log(e/t)/Math.LN2}class Sa extends Ta{reset(){super.reset(),this._distance=0,this._startDistance=0}_start(e){this._startDistance=this._distance=e[0].dist(e[1])}_move(e,t){const n=this._distance;if(this._distance=e[0].dist(e[1]),this._active||!(Math.abs(Ea(this._distance,this._startDistance))<.1))return this._active=!0,{zoomDelta:Ea(this._distance,n),pinchAround:t}}}function Pa(e,t){return 180*e.angleWith(t)/Math.PI}class Ia extends Ta{reset(){super.reset(),this._minDiameter=0,this._startVector=void 0,this._vector=void 0}_start(e){this._startVector=this._vector=e[0].sub(e[1]),this._minDiameter=e[0].dist(e[1])}_move(e,t){const n=this._vector;if(this._vector=e[0].sub(e[1]),n&&(this._active||!this._isBelowThreshold(this._vector)))return this._active=!0,{bearingDelta:Pa(this._vector,n),pinchAround:t}}_isBelowThreshold(e){this._minDiameter=Math.min(this._minDiameter,e.mag());const t=25/(Math.PI*this._minDiameter)*360,n=this._startVector;if(!n)return!1;const i=Pa(e,n);return Math.abs(i)<t}}function Ma(e){return Math.abs(e.y)>Math.abs(e.x)}class Aa extends Ta{constructor(e){super(),this._map=e}reset(){super.reset(),this._valid=void 0,this._firstMove=void 0,this._lastPoints=void 0}_start(e){this._lastPoints=e,Ma(e[0].sub(e[1]))&&(this._valid=!1)}_move(t,n,i){const a=this._lastPoints;if(!a)return;const o=t[0].sub(a[0]),r=t[1].sub(a[1]);return this._map._cooperativeGestures&&!e.isFullscreen()&&i.touches.length<3||(this._valid=this.gestureBeginsVertically(o,r,i.timeStamp),!this._valid)?void 0:(this._lastPoints=t,this._active=!0,{pitchDelta:(o.y+r.y)/2*-.5})}gestureBeginsVertically(e,t,n){if(void 0!==this._valid)return this._valid;const i=e.mag()>=2,a=t.mag()>=2;if(!i&&!a)return;if(!i||!a)return null==this._firstMove&&(this._firstMove=n),n-this._firstMove<100&&void 0;const o=e.y>0==t.y>0;return Ma(e)&&Ma(t)&&o}}const ja={panStep:100,bearingStep:15,pitchStep:10};class Na{constructor(){const e=ja;this._panStep=e.panStep,this._bearingStep=e.bearingStep,this._pitchStep=e.pitchStep,this._rotationDisabled=!1}blur(){this.reset()}reset(){this._active=!1}keydown(e){if(e.altKey||e.ctrlKey||e.metaKey)return;let t=0,n=0,i=0,a=0,o=0;switch(e.keyCode){case 61:case 107:case 171:case 187:t=1;break;case 189:case 109:case 173:t=-1;break;case 37:e.shiftKey?n=-1:(e.preventDefault(),a=-1);break;case 39:e.shiftKey?n=1:(e.preventDefault(),a=1);break;case 38:e.shiftKey?i=1:(e.preventDefault(),o=-1);break;case 40:e.shiftKey?i=-1:(e.preventDefault(),o=1);break;default:return}return this._rotationDisabled&&(n=0,i=0),{cameraAnimation:r=>{const s=r.getZoom();r.easeTo({duration:300,easeId:"keyboardHandler",easing:La,zoom:t?Math.round(s)+t*(e.shiftKey?2:1):s,bearing:r.getBearing()+n*this._bearingStep,pitch:r.getPitch()+i*this._pitchStep,offset:[-a*this._panStep,-o*this._panStep],center:r.getCenter()},{originalEvent:e})}}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}disableRotation(){this._rotationDisabled=!0}enableRotation(){this._rotationDisabled=!1}}function La(e){return e*(2-e)}const Da=4.000244140625;class Ra{constructor(t,n){this._map=t,this._el=t.getCanvasContainer(),this._handler=n,this._delta=0,this._defaultZoomRate=.01,this._wheelZoomRate=.0022222222222222222,e.bindAll(["_onTimeout","_addScrollZoomBlocker","_showBlockerAlert"],this)}setZoomRate(e){this._defaultZoomRate=e}setWheelZoomRate(e){this._wheelZoomRate=e}isEnabled(){return!!this._enabled}isActive(){return this._active||void 0!==this._finishTimeout}isZooming(){return!!this._zooming}enable(e){this.isEnabled()||(this._enabled=!0,this._aroundCenter=!!e&&"center"===e.around,this._map._cooperativeGestures&&this._addScrollZoomBlocker())}disable(){this.isEnabled()&&(this._enabled=!1,this._map._cooperativeGestures&&(clearTimeout(this._alertTimer),this._alertContainer.remove()))}wheel(t){if(!this.isEnabled())return;if(this._map._cooperativeGestures){if(!(t.ctrlKey||t.metaKey||this.isZooming()||e.isFullscreen()))return void this._showBlockerAlert();"hidden"!==this._alertContainer.style.visibility&&(this._alertContainer.style.visibility="hidden",clearTimeout(this._alertTimer))}let n=t.deltaMode===e.window.WheelEvent.DOM_DELTA_LINE?40*t.deltaY:t.deltaY;const i=e.exported.now(),a=i-(this._lastWheelEventTime||0);this._lastWheelEventTime=i,0!==n&&n%Da==0?this._type="wheel":0!==n&&Math.abs(n)<4?this._type="trackpad":a>400?(this._type=null,this._lastValue=n,this._timeout=setTimeout(this._onTimeout,40,t)):this._type||(this._type=Math.abs(a*n)<200?"trackpad":"wheel",this._timeout&&(clearTimeout(this._timeout),this._timeout=null,n+=this._lastValue)),t.shiftKey&&n&&(n/=4),this._type&&(this._lastWheelEvent=t,this._delta-=n,this._active||this._start(t)),t.preventDefault()}_onTimeout(e){this._type="wheel",this._delta-=this._lastValue,this._active||this._start(e)}_start(e){if(!this._delta)return;this._frameId&&(this._frameId=null),this._active=!0,this.isZooming()||(this._zooming=!0),this._finishTimeout&&(clearTimeout(this._finishTimeout),delete this._finishTimeout);const t=m(this._el,e);this._aroundPoint=this._aroundCenter?this._map.transform.centerPoint:t,this._aroundCoord=this._map.transform.pointCoordinate3D(this._aroundPoint),this._targetZoom=void 0,this._frameId||(this._frameId=!0,this._handler._triggerRenderFrame())}renderFrame(){if(!this._frameId)return;if(this._frameId=null,!this.isActive())return;const t=this._map.transform;"wheel"===this._type&&t.projection.wrap&&(t._center.lng>=180||t._center.lng<=-180)&&(this._prevEase=null,this._easing=null,this._lastWheelEvent=null,this._lastWheelEventTime=0);const n=()=>t._terrainEnabled()&&this._aroundCoord?t.computeZoomRelativeTo(this._aroundCoord):t.zoom;if(0!==this._delta){const e="wheel"===this._type&&Math.abs(this._delta)>Da?this._wheelZoomRate:this._defaultZoomRate;let i=2/(1+Math.exp(-Math.abs(this._delta*e)));this._delta<0&&0!==i&&(i=1/i);const a=n(),o=Math.pow(2,a),r="number"==typeof this._targetZoom?t.zoomScale(this._targetZoom):o;this._targetZoom=Math.min(t.maxZoom,Math.max(t.minZoom,t.scaleZoom(r*i))),"wheel"===this._type&&(this._startZoom=a,this._easing=this._smoothOutEasing(200)),this._delta=0}const i="number"==typeof this._targetZoom?this._targetZoom:n(),a=this._startZoom,o=this._easing;let r,s=!1;if("wheel"===this._type&&a&&o){const t=Math.min((e.exported.now()-this._lastWheelEventTime)/200,1),n=o(t);r=e.number(a,i,n),t<1?this._frameId||(this._frameId=!0):s=!0}else r=i,s=!0;return this._active=!0,s&&(this._active=!1,this._finishTimeout=setTimeout(()=>{this._zooming=!1,this._handler._triggerRenderFrame(),delete this._targetZoom,delete this._finishTimeout},200)),{noInertia:!0,needsRenderFrame:!s,zoomDelta:r-n(),around:this._aroundPoint,aroundCoord:this._aroundCoord,originalEvent:this._lastWheelEvent}}_smoothOutEasing(t){let n=e.ease;if(this._prevEase){const t=this._prevEase,i=(e.exported.now()-t.start)/t.duration,a=t.easing(i+.01)-t.easing(i),o=.27/Math.sqrt(a*a+1e-4)*.01,r=Math.sqrt(.0729-o*o);n=e.bezier(o,r,.25,1)}return this._prevEase={start:e.exported.now(),duration:t,easing:n},n}blur(){this.reset()}reset(){this._active=!1}_addScrollZoomBlocker(){this._map&&!this._alertContainer&&(this._alertContainer=o("div","mapboxgl-scroll-zoom-blocker",this._map._container),this._alertContainer.textContent=/(Mac|iPad)/i.test(e.window.navigator.userAgent)?this._map._getUIString("ScrollZoomBlocker.CmdMessage"):this._map._getUIString("ScrollZoomBlocker.CtrlMessage"),this._alertContainer.style.fontSize=Math.max(10,Math.min(24,Math.floor(.05*this._el.clientWidth)))+"px")}_showBlockerAlert(){this._alertContainer.style.visibility="visible",this._alertContainer.classList.add("mapboxgl-scroll-zoom-blocker-show"),this._alertContainer.setAttribute("role","alert"),clearTimeout(this._alertTimer),this._alertTimer=setTimeout(()=>{this._alertContainer.classList.remove("mapboxgl-scroll-zoom-blocker-show"),this._alertContainer.setAttribute("role","null")},200)}}class Ba{constructor(e,t){this._clickZoom=e,this._tapZoom=t}enable(){this._clickZoom.enable(),this._tapZoom.enable()}disable(){this._clickZoom.disable(),this._tapZoom.disable()}isEnabled(){return this._clickZoom.isEnabled()&&this._tapZoom.isEnabled()}isActive(){return this._clickZoom.isActive()||this._tapZoom.isActive()}}class za{constructor(){this.reset()}reset(){this._active=!1}blur(){this.reset()}dblclick(e,t){return e.preventDefault(),{cameraAnimation:n=>{n.easeTo({duration:300,zoom:n.getZoom()+(e.shiftKey?-1:1),around:n.unproject(t)},{originalEvent:e})}}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class Fa{constructor(){this._tap=new ya({numTouches:1,numTaps:1}),this.reset()}reset(){this._active=!1,this._swipePoint=void 0,this._swipeTouch=0,this._tapTime=0,this._tap.reset()}touchstart(e,t,n){this._swipePoint||(this._tapTime&&e.timeStamp-this._tapTime>500&&this.reset(),this._tapTime?n.length>0&&(this._swipePoint=t[0],this._swipeTouch=n[0].identifier):this._tap.touchstart(e,t,n))}touchmove(e,t,n){if(this._tapTime){if(this._swipePoint){if(n[0].identifier!==this._swipeTouch)return;const i=t[0],a=i.y-this._swipePoint.y;return this._swipePoint=i,e.preventDefault(),this._active=!0,{zoomDelta:a/128}}}else this._tap.touchmove(e,t,n)}touchend(e,t,n){this._tapTime?this._swipePoint&&0===n.length&&this.reset():this._tap.touchend(e,t,n)&&(this._tapTime=e.timeStamp)}touchcancel(){this.reset()}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class Ua{constructor(e,t,n){this._el=e,this._mousePan=t,this._touchPan=n}enable(e){this._inertiaOptions=e||{},this._mousePan.enable(),this._touchPan.enable(),this._el.classList.add("mapboxgl-touch-drag-pan")}disable(){this._mousePan.disable(),this._touchPan.disable(),this._el.classList.remove("mapboxgl-touch-drag-pan")}isEnabled(){return this._mousePan.isEnabled()&&this._touchPan.isEnabled()}isActive(){return this._mousePan.isActive()||this._touchPan.isActive()}}class Ha{constructor(e,t,n){this._pitchWithRotate=e.pitchWithRotate,this._mouseRotate=t,this._mousePitch=n}enable(){this._mouseRotate.enable(),this._pitchWithRotate&&this._mousePitch.enable()}disable(){this._mouseRotate.disable(),this._mousePitch.disable()}isEnabled(){return this._mouseRotate.isEnabled()&&(!this._pitchWithRotate||this._mousePitch.isEnabled())}isActive(){return this._mouseRotate.isActive()||this._mousePitch.isActive()}}class Wa{constructor(e,t,n,i){this._el=e,this._touchZoom=t,this._touchRotate=n,this._tapDragZoom=i,this._rotationDisabled=!1,this._enabled=!0}enable(e){this._touchZoom.enable(e),this._rotationDisabled||this._touchRotate.enable(e),this._tapDragZoom.enable(),this._el.classList.add("mapboxgl-touch-zoom-rotate")}disable(){this._touchZoom.disable(),this._touchRotate.disable(),this._tapDragZoom.disable(),this._el.classList.remove("mapboxgl-touch-zoom-rotate")}isEnabled(){return this._touchZoom.isEnabled()&&(this._rotationDisabled||this._touchRotate.isEnabled())&&this._tapDragZoom.isEnabled()}isActive(){return this._touchZoom.isActive()||this._touchRotate.isActive()||this._tapDragZoom.isActive()}disableRotation(){this._rotationDisabled=!0,this._touchRotate.disable()}enableRotation(){this._rotationDisabled=!1,this._touchZoom.isEnabled()&&this._touchRotate.enable()}}const qa=e=>e.zoom||e.drag||e.pitch||e.rotate;class Va extends e.Event{}class Ga{constructor(){this.constants=[1,1,.01],this.radius=0}setup(t,n){const i=e.sub([],n,t);this.radius=e.length(i[2]<0?e.div([],i,this.constants):[i[0],i[1],0])}projectRay(t){e.div(t,t,this.constants),e.normalize(t,t),e.mul$1(t,t,this.constants);const n=e.scale$2([],t,this.radius);if(n[2]>0){const t=e.scale$2([],[0,0,1],e.dot(n,[0,0,1])),i=e.scale$2([],e.normalize([],[n[0],n[1],0]),this.radius),a=e.add([],n,e.scale$2([],e.sub([],e.add([],i,t),n),2));n[0]=a[0],n[1]=a[1]}return n}}function Ya(e){return e.panDelta&&e.panDelta.mag()||e.zoomDelta||e.bearingDelta||e.pitchDelta}class Xa{constructor(t,n){this._map=t,this._el=this._map.getCanvasContainer(),this._handlers=[],this._handlersById={},this._changes=[],this._inertia=new ra(t),this._bearingSnap=n.bearingSnap,this._previousActiveHandlers={},this._trackingEllipsoid=new Ga,this._dragOrigin=null,this._eventsInProgress={},this._addDefaultHandlers(n),e.bindAll(["handleEvent","handleWindowEvent"],this);const i=this._el;this._listeners=[[i,"touchstart",{passive:!0}],[i,"touchmove",{passive:!1}],[i,"touchend",void 0],[i,"touchcancel",void 0],[i,"mousedown",void 0],[i,"mousemove",void 0],[i,"mouseup",void 0],[e.window.document,"mousemove",{capture:!0}],[e.window.document,"mouseup",void 0],[i,"mouseover",void 0],[i,"mouseout",void 0],[i,"dblclick",void 0],[i,"click",void 0],[i,"keydown",{capture:!1}],[i,"keyup",void 0],[i,"wheel",{passive:!1}],[i,"contextmenu",void 0],[e.window,"blur",void 0]];for(const[t,n,i]of this._listeners)t.addEventListener(n,t===e.window.document?this.handleWindowEvent:this.handleEvent,i)}destroy(){for(const[t,n,i]of this._listeners)t.removeEventListener(n,t===e.window.document?this.handleWindowEvent:this.handleEvent,i)}_addDefaultHandlers(e){const t=this._map,n=t.getCanvasContainer();this._add("mapEvent",new pa(t,e));const i=t.boxZoom=new ma(t,e);this._add("boxZoom",i);const a=new va,o=new za;t.doubleClickZoom=new Ba(o,a),this._add("tapZoom",a),this._add("clickZoom",o);const r=new Fa;this._add("tapDragZoom",r);const s=t.touchPitch=new Aa(t);this._add("touchPitch",s);const l=new xa(e),c=new ka(e);t.dragRotate=new Ha(e,l,c),this._add("mouseRotate",l,["mousePitch"]),this._add("mousePitch",c,["mouseRotate"]);const u=new wa(e),d=new Oa(t,e);t.dragPan=new Ua(n,u,d),this._add("mousePan",u),this._add("touchPan",d,["touchZoom","touchRotate"]);const p=new Ia,f=new Sa;t.touchZoomRotate=new Wa(n,f,p,r),this._add("touchRotate",p,["touchPan","touchZoom"]),this._add("touchZoom",f,["touchPan","touchRotate"]),this._add("blockableMapEvent",new fa(t));const m=t.scrollZoom=new Ra(t,this);this._add("scrollZoom",m,["mousePan"]);const h=t.keyboard=new Na;this._add("keyboard",h);for(const n of["boxZoom","doubleClickZoom","tapDragZoom","touchPitch","dragRotate","dragPan","touchZoomRotate","scrollZoom","keyboard"])e.interactive&&e[n]&&t[n].enable(e[n])}_add(e,t,n){this._handlers.push({handlerName:e,handler:t,allowed:n}),this._handlersById[e]=t}stop(e){if(!this._updatingCamera){for(const{handler:e}of this._handlers)e.reset();this._inertia.clear(),this._fireEvents({},{},e),this._changes=[]}}isActive(){for(const{handler:e}of this._handlers)if(e.isActive())return!0;return!1}isZooming(){return!!this._eventsInProgress.zoom||this._map.scrollZoom.isZooming()}isRotating(){return!!this._eventsInProgress.rotate}isMoving(){return!!qa(this._eventsInProgress)||this.isZooming()}_isDragging(){return!!this._eventsInProgress.drag}_blockedByActive(e,t,n){for(const i in e)if(i!==n&&(!t||t.indexOf(i)<0))return!0;return!1}handleWindowEvent(e){this.handleEvent(e,e.type+"Window")}_getMapTouches(e){const t=[];for(const n of e)this._el.contains(n.target)&&t.push(n);return t}handleEvent(e,t){this._updatingCamera=!0;const n="renderFrame"===e.type,i=n?void 0:e,a={needsRenderFrame:!1},o={},r={},s=e.touches?this._getMapTouches(e.touches):void 0,l=s?h(this._el,s):n?void 0:m(this._el,e);for(const{handlerName:n,handler:c,allowed:u}of this._handlers){if(!c.isEnabled())continue;let d;this._blockedByActive(r,u,n)?c.reset():c[t||e.type]&&(d=c[t||e.type](e,l,s),this.mergeHandlerResult(a,o,d,n,i),d&&d.needsRenderFrame&&this._triggerRenderFrame()),(d||c.isActive())&&(r[n]=c)}const c={};for(const e in this._previousActiveHandlers)r[e]||(c[e]=i);this._previousActiveHandlers=r,(Object.keys(c).length||Ya(a))&&(this._changes.push([a,o,c]),this._triggerRenderFrame()),(Object.keys(r).length||Ya(a))&&this._map._stop(!0),this._updatingCamera=!1;const{cameraAnimation:u}=a;u&&(this._inertia.clear(),this._fireEvents({},{},!0),this._changes=[],u(this._map))}mergeHandlerResult(t,n,i,a,o){if(!i)return;e.extend(t,i);const r={handlerName:a,originalEvent:i.originalEvent||o};void 0!==i.zoomDelta&&(n.zoom=r),void 0!==i.panDelta&&(n.drag=r),void 0!==i.pitchDelta&&(n.pitch=r),void 0!==i.bearingDelta&&(n.rotate=r)}_applyChanges(){const t={},n={},i={};for(const[a,o,r]of this._changes)a.panDelta&&(t.panDelta=(t.panDelta||new e.Point(0,0))._add(a.panDelta)),a.zoomDelta&&(t.zoomDelta=(t.zoomDelta||0)+a.zoomDelta),a.bearingDelta&&(t.bearingDelta=(t.bearingDelta||0)+a.bearingDelta),a.pitchDelta&&(t.pitchDelta=(t.pitchDelta||0)+a.pitchDelta),void 0!==a.around&&(t.around=a.around),void 0!==a.aroundCoord&&(t.aroundCoord=a.aroundCoord),void 0!==a.pinchAround&&(t.pinchAround=a.pinchAround),a.noInertia&&(t.noInertia=a.noInertia),e.extend(n,o),e.extend(i,r);this._updateMapTransform(t,n,i),this._changes=[]}_updateMapTransform(t,n,i){const a=this._map,o=a.transform,r=e=>[e.x,e.y,e.z];if((e=>{const t=this._eventsInProgress.drag;return t&&!this._handlersById[t.handlerName].isActive()})()&&!Ya(t)){const e=o.zoom;o.cameraElevationReference="sea",o.recenterOnTerrain(),o.cameraElevationReference="ground",e!==o.zoom&&this._map._update(!0)}if(o._isCameraConstrained&&a._stop(!0),!Ya(t))return void this._fireEvents(n,i,!0);let{panDelta:s,zoomDelta:l,bearingDelta:c,pitchDelta:u,around:d,aroundCoord:p,pinchAround:f}=t;o._isCameraConstrained&&(l>0&&(l=0),o._isCameraConstrained=!1),void 0!==f&&(d=f),(l||(e=>n[e]&&!this._eventsInProgress[e])("drag"))&&d&&(this._dragOrigin=r(o.pointCoordinate3D(d)),this._trackingEllipsoid.setup(o._camera.position,this._dragOrigin)),o.cameraElevationReference="sea",a._stop(!0),d=d||a.transform.centerPoint,c&&(o.bearing+=c),u&&(o.pitch+=u),o._updateCameraState();const m=[0,0,0];if(s)if("mercator"===o.projection.name){const e=this._trackingEllipsoid.projectRay(o.screenPointToMercatorRay(d).dir),t=this._trackingEllipsoid.projectRay(o.screenPointToMercatorRay(d.sub(s)).dir);m[0]=t[0]-e[0],m[1]=t[1]-e[1]}else{const t=o.pointCoordinate(d);if("globe"===o.projection.name){s=s.rotate(-o.angle);const n=o._pixelsPerMercatorPixel/o.worldSize;m[0]=-s.x*e.mercatorScale(e.latFromMercatorY(t.y))*n,m[1]=-s.y*e.mercatorScale(o.center.lat)*n}else{const e=o.pointCoordinate(d.sub(s));t&&e&&(m[0]=e.x-t.x,m[1]=e.y-t.y)}}const h=o.zoom,g=[0,0,0];if(l){const t=r(p||o.pointCoordinate3D(d)),n={dir:e.normalize([],e.sub([],t,o._camera.position))};if(n.dir[2]<0){const i=o.zoomDeltaToMovement(t,l);e.scale$2(g,n.dir,i)}}const y=e.add(m,m,g);o._translateCameraConstrained(y),l&&Math.abs(o.zoom-h)>1e-4&&o.recenterOnTerrain(),o.cameraElevationReference="ground",this._map._update(),t.noInertia||this._inertia.record(t),this._fireEvents(n,i,!0)}_fireEvents(t,n,i){const a=qa(this._eventsInProgress),o=qa(t),r={};for(const e in t){const{originalEvent:n}=t[e];this._eventsInProgress[e]||(r[e+"start"]=n),this._eventsInProgress[e]=t[e]}!a&&o&&this._fireEvent("movestart",o.originalEvent);for(const e in r)this._fireEvent(e,r[e]);o&&this._fireEvent("move",o.originalEvent);for(const e in t){const{originalEvent:n}=t[e];this._fireEvent(e,n)}const s={};let l;for(const e in this._eventsInProgress){const{handlerName:t,originalEvent:i}=this._eventsInProgress[e];this._handlersById[t].isActive()||(delete this._eventsInProgress[e],l=n[t]||i,s[e+"end"]=l)}for(const e in s)this._fireEvent(e,s[e]);const c=qa(this._eventsInProgress);if(i&&(a||o)&&!c){this._updatingCamera=!0;const t=this._inertia._onMoveEnd(this._map.dragPan._inertiaOptions),n=e=>0!==e&&-this._bearingSnap<e&&e<this._bearingSnap;t?(n(t.bearing||this._map.getBearing())&&(t.bearing=0),this._map.easeTo(t,{originalEvent:l})):(this._map.fire(new e.Event("moveend",{originalEvent:l})),n(this._map.getBearing())&&this._map.resetNorth()),this._updatingCamera=!1}}_fireEvent(t,n){this._map.fire(new e.Event(t,n?{originalEvent:n}:{}))}_requestFrame(){return this._map.triggerRepaint(),this._map._renderTaskQueue.add(e=>{this._frameId=void 0,this.handleEvent(new Va("renderFrame",{timeStamp:e})),this._applyChanges()})}_triggerRenderFrame(){void 0===this._frameId&&(this._frameId=this._requestFrame())}}const Za="map.setFreeCameraOptions(...) and map.getFreeCameraOptions() are not yet supported for non-mercator projections.";class Ja extends e.Evented{constructor(t,n){super(),this._moving=!1,this._zooming=!1,this.transform=t,this._bearingSnap=n.bearingSnap,this._respectPrefersReducedMotion=!1!==n.respectPrefersReducedMotion,e.bindAll(["_renderFrameCallback"],this)}getCenter(){return new e.LngLat(this.transform.center.lng,this.transform.center.lat)}setCenter(e,t){return this.jumpTo({center:e},t)}panBy(t,n,i){return t=e.Point.convert(t).mult(-1),this.panTo(this.transform.center,e.extend({offset:t},n),i)}panTo(t,n,i){return this.easeTo(e.extend({center:t},n),i)}getZoom(){return this.transform.zoom}setZoom(e,t){return this.jumpTo({zoom:e},t),this}zoomTo(t,n,i){return this.easeTo(e.extend({zoom:t},n),i)}zoomIn(e,t){return this.zoomTo(this.getZoom()+1,e,t),this}zoomOut(e,t){return this.zoomTo(this.getZoom()-1,e,t),this}getBearing(){return this.transform.bearing}setBearing(e,t){return this.jumpTo({bearing:e},t),this}getPadding(){return this.transform.padding}setPadding(e,t){return this.jumpTo({padding:e},t),this}rotateTo(t,n,i){return this.easeTo(e.extend({bearing:t},n),i)}resetNorth(t,n){return this.rotateTo(0,e.extend({duration:1e3},t),n),this}resetNorthPitch(t,n){return this.easeTo(e.extend({bearing:0,pitch:0,duration:1e3},t),n),this}snapToNorth(e,t){return Math.abs(this.getBearing())<this._bearingSnap?this.resetNorth(e,t):this}getPitch(){return this.transform.pitch}setPitch(e,t){return this.jumpTo({pitch:e},t),this}cameraForBounds(t,n){t=e.LngLatBounds.convert(t);const i=n&&n.bearing||0,a=n&&n.pitch||0,o=t.getNorthWest(),r=t.getSouthEast();return this._cameraForBounds(this.transform,o,r,i,a,n)}_extendCameraOptions(t){const n={top:0,bottom:0,right:0,left:0};if("number"==typeof(t=e.extend({padding:n,offset:[0,0],maxZoom:this.transform.maxZoom},t)).padding){const e=t.padding;t.padding={top:e,bottom:e,right:e,left:e}}return t.padding=e.extend(n,t.padding),t}_minimumAABBFrustumDistance(e,t){const n=t.max[0]-t.min[0],i=t.max[1]-t.min[1];return n/i>e.aspect?n/(2*Math.tan(.5*e.fovX)*e.aspect):i/(2*Math.tan(.5*e.fovY)*e.aspect)}_cameraForBoundsOnGlobe(t,n,i,a,o,r){const s=t.clone(),l=this._extendCameraOptions(r);s.bearing=a,s.pitch=o;const c=e.LngLat.convert(n),u=e.LngLat.convert(i),d=.5*(c.lat+u.lat),p=.5*(c.lng+u.lng),f=e.latLngToECEF(d,p),m=e.normalize([],f),h=e.normalize([],e.cross([],m,[0,1,0])),g=e.cross([],h,m),y=[h[0],h[1],h[2],0,g[0],g[1],g[2],0,m[0],m[1],m[2],0,0,0,0,1],v=[f,e.latLngToECEF(c.lat,c.lng),e.latLngToECEF(u.lat,c.lng),e.latLngToECEF(u.lat,u.lng),e.latLngToECEF(c.lat,u.lng),e.latLngToECEF(d,c.lng),e.latLngToECEF(d,u.lng),e.latLngToECEF(c.lat,p),e.latLngToECEF(u.lat,p)];let b=e.Aabb.fromPoints(v.map(t=>[e.dot(h,t),e.dot(g,t),e.dot(m,t)]));const _=e.transformMat4([],b.center,y);0===e.squaredLength(_)&&e.set(_,0,0,1),e.normalize(_,_),e.scale$2(_,_,e.GLOBE_RADIUS),s.center=e.ecefToLatLng(_);const w=s.getWorldToCameraMatrix(),x=e.invert(new Float64Array(16),w);b=e.Aabb.applyTransform(b,e.multiply([],w,y)),e.transformMat4(_,_,w);const k=.5*(b.max[2]-b.min[2]),O=this._minimumAABBFrustumDistance(s,b),T=e.scale$2([],[0,0,1],k),C=e.add(T,_,T),E=O+(0===s.pitch?0:e.distance(_,C)),S=s.globeCenterInViewSpace,P=e.sub([],_,[S[0],S[1],S[2]]);e.normalize(P,P),e.scale$2(P,P,E);const I=e.add([],_,P);e.transformMat4(I,I,x);const M=e.earthRadius/e.GLOBE_RADIUS,A=e.length(I),j=e.mercatorZfromAltitude(Math.max(A*M-e.earthRadius,Number.EPSILON),0),N=Math.min(s.zoomFromMercatorZAdjusted(j),l.maxZoom);return N>.5*(e.GLOBE_ZOOM_THRESHOLD_MIN+e.GLOBE_ZOOM_THRESHOLD_MAX)?(s.setProjection({name:"mercator"}),s.zoom=N,this._cameraForBounds(s,n,i,a,o,r)):{center:s.center,zoom:N,bearing:a,pitch:o}}queryTerrainElevation(t,n){const i=this.transform.elevation;return i?(n=e.extend({},{exaggerated:!0},n),i.getAtPoint(e.MercatorCoordinate.fromLngLat(t),null,n.exaggerated)):null}_cameraForBounds(t,n,i,a,o,r){if("globe"===t.projection.name)return this._cameraForBoundsOnGlobe(t,n,i,a,o,r);const s=t.clone(),l=this._extendCameraOptions(r),c=s.padding;s.bearing=a,s.pitch=o;const u=e.LngLat.convert(n),d=e.LngLat.convert(i),p=new e.LngLat(u.lng,d.lat),f=new e.LngLat(d.lng,u.lat),m=s.project(u),h=s.project(d),g=this.queryTerrainElevation(u),y=this.queryTerrainElevation(d),v=this.queryTerrainElevation(p),b=this.queryTerrainElevation(f),_=[[m.x,m.y,Math.min(g||0,y||0,v||0,b||0)],[h.x,h.y,Math.max(g||0,y||0,v||0,b||0)]];let w=e.Aabb.fromPoints(_);const x=s.getWorldToCameraMatrix(),k=e.invert(new Float64Array(16),x);w=e.Aabb.applyTransform(w,x);const O=e.sub([],w.max,w.min),T=c.left||0,C=c.right||0,E=c.bottom||0,S=c.top||0,{left:P,right:I,top:M,bottom:A}=l.padding,j=.5*(T+C),N=.5*(S+E),L=Math.min(s.scaleZoom(s.scale*Math.min((s.width-(T+C+P+I))/O[0],(s.height-(E+S+A+M))/O[1])),l.maxZoom),D=s.scale/s.zoomScale(L);w=new e.Aabb([w.min[0]-(P+j)*D,w.min[1]-(A+N)*D,w.min[2]],[w.max[0]+(I+j)*D,w.max[1]+(M+N)*D,w.max[2]]);const R=.5*O[2],B=this._minimumAABBFrustumDistance(s,w),z=[0,0,1,0];e.transformMat4$1(z,z,x),e.normalize$2(z,z);const F=e.scale$2([],z,B+R),U=e.add([],w.center,F),H=("number"==typeof l.offset.x&&"number"==typeof l.offset.y?new e.Point(l.offset.x,l.offset.y):e.Point.convert(l.offset)).rotate(-e.degToRad(a));w.center[0]-=H.x*D,w.center[1]+=H.y*D,e.transformMat4(w.center,w.center,k),e.transformMat4(U,U,k);const W=[w.center[0],w.center[1],U[2]*s.pixelsPerMeter];e.scale$2(W,W,1/s.worldSize);const q=e.lngFromMercatorX(W[0]),V=e.latFromMercatorY(W[1]),G=Math.min(s._zoomFromMercatorZ(W[2]),l.maxZoom),Y=new e.LngLat(q,V);return s.mercatorFromTransition&&G<.5*(e.GLOBE_ZOOM_THRESHOLD_MIN+e.GLOBE_ZOOM_THRESHOLD_MAX)?(s.setProjection({name:"globe"}),s.zoom=G,this._cameraForBounds(s,n,i,a,o,r)):{center:Y,zoom:G,bearing:a,pitch:o}}fitBounds(e,t,n){const i=this.cameraForBounds(e,t);return this._fitInternal(i,t,n)}fitScreenCoordinates(t,n,i,a,o){const r=e.Point.convert(t),s=e.Point.convert(n),l=new e.Point(Math.min(r.x,s.x),Math.min(r.y,s.y)),c=new e.Point(Math.max(r.x,s.x),Math.max(r.y,s.y));if("mercator"===this.transform.projection.name&&this.transform.anyCornerOffEdge(r,s))return this;const u=this.transform.pointLocation3D(l),d=this.transform.pointLocation3D(c),p=this.transform.pointLocation3D(new e.Point(l.x,c.y)),f=this.transform.pointLocation3D(new e.Point(c.x,l.y)),m=[Math.min(u.lng,d.lng,p.lng,f.lng),Math.min(u.lat,d.lat,p.lat,f.lat)],h=[Math.max(u.lng,d.lng,p.lng,f.lng),Math.max(u.lat,d.lat,p.lat,f.lat)],g=a&&a.pitch?a.pitch:this.getPitch(),y=this._cameraForBounds(this.transform,m,h,i,g,a);return this._fitInternal(y,a,o)}_fitInternal(t,n,i){return t?(delete(n=e.extend(t,n)).padding,n.linear?this.easeTo(n,i):this.flyTo(n,i)):this}jumpTo(t,n){this.stop();const i=t.preloadOnly?this.transform.clone():this.transform;let a=!1,o=!1,r=!1;return"zoom"in t&&i.zoom!==+t.zoom&&(a=!0,i.zoom=+t.zoom),void 0!==t.center&&(i.center=e.LngLat.convert(t.center)),"bearing"in t&&i.bearing!==+t.bearing&&(o=!0,i.bearing=+t.bearing),"pitch"in t&&i.pitch!==+t.pitch&&(r=!0,i.pitch=+t.pitch),null==t.padding||i.isPaddingEqual(t.padding)||(i.padding=t.padding),t.preloadOnly?(this._preloadTiles(i),this):(this.fire(new e.Event("movestart",n)).fire(new e.Event("move",n)),a&&this.fire(new e.Event("zoomstart",n)).fire(new e.Event("zoom",n)).fire(new e.Event("zoomend",n)),o&&this.fire(new e.Event("rotatestart",n)).fire(new e.Event("rotate",n)).fire(new e.Event("rotateend",n)),r&&this.fire(new e.Event("pitchstart",n)).fire(new e.Event("pitch",n)).fire(new e.Event("pitchend",n)),this.fire(new e.Event("moveend",n)))}getFreeCameraOptions(){return this.transform.projection.supportsFreeCamera||e.warnOnce(Za),this.transform.getFreeCameraOptions()}setFreeCameraOptions(t,n){const i=this.transform;if(!i.projection.supportsFreeCamera)return e.warnOnce(Za),this;this.stop();const a=i.zoom,o=i.pitch,r=i.bearing;i.setFreeCameraOptions(t);const s=a!==i.zoom,l=o!==i.pitch,c=r!==i.bearing;return this.fire(new e.Event("movestart",n)).fire(new e.Event("move",n)),s&&this.fire(new e.Event("zoomstart",n)).fire(new e.Event("zoom",n)).fire(new e.Event("zoomend",n)),c&&this.fire(new e.Event("rotatestart",n)).fire(new e.Event("rotate",n)).fire(new e.Event("rotateend",n)),l&&this.fire(new e.Event("pitchstart",n)).fire(new e.Event("pitch",n)).fire(new e.Event("pitchend",n)),this.fire(new e.Event("moveend",n)),this}easeTo(t,n){this._stop(!1,t.easeId),(!1===(t=e.extend({offset:[0,0],duration:500,easing:e.ease},t)).animate||this._prefersReducedMotion(t))&&(t.duration=0);const i=this.transform,a=this.getZoom(),o=this.getBearing(),r=this.getPitch(),s=this.getPadding(),l="zoom"in t?+t.zoom:a,c="bearing"in t?this._normalizeBearing(t.bearing,o):o,u="pitch"in t?+t.pitch:r,d="padding"in t?t.padding:i.padding,p=e.Point.convert(t.offset);let f,m,h;if("globe"===i.projection.name){const n=e.MercatorCoordinate.fromLngLat(i.center),a=p.rotate(-i.angle);n.x+=a.x/i.worldSize,n.y+=a.y/i.worldSize;const o=n.toLngLat(),r=e.LngLat.convert(t.center||o);this._normalizeCenter(r),f=i.centerPoint.add(a),m=new e.Point(n.x,n.y).mult(i.worldSize),h=new e.Point(e.mercatorXfromLng(r.lng),e.mercatorYfromLat(r.lat)).mult(i.worldSize).sub(m)}else{f=i.centerPoint.add(p);const n=i.pointLocation(f),a=e.LngLat.convert(t.center||n);this._normalizeCenter(a),m=i.project(n),h=i.project(a).sub(m)}const g=i.zoomScale(l-a);let y,v;t.around&&(y=e.LngLat.convert(t.around),v=i.locationPoint(y));const b=this._zooming||l!==a,_=this._rotating||o!==c,w=this._pitching||u!==r,x=!i.isPaddingEqual(d),k=i=>k=>{if(b&&(i.zoom=e.number(a,l,k)),_&&(i.bearing=e.number(o,c,k)),w&&(i.pitch=e.number(r,u,k)),x&&(i.interpolatePadding(s,d,k),f=i.centerPoint.add(p)),y)i.setLocationAtPoint(y,v);else{const e=i.zoomScale(i.zoom-a),t=l>a?Math.min(2,g):Math.max(.5,g),n=Math.pow(t,1-k),o=i.unproject(m.add(h.mult(k*n)).mult(e));i.setLocationAtPoint(i.renderWorldCopies?o.wrap():o,f)}return t.preloadOnly||this._fireMoveEvents(n),i};if(t.preloadOnly){const e=this._emulate(k,t.duration,i);return this._preloadTiles(e),this}const O={moving:this._moving,zooming:this._zooming,rotating:this._rotating,pitching:this._pitching};return this._zooming=b,this._rotating=_,this._pitching=w,this._padding=x,this._easeId=t.easeId,this._prepareEase(n,t.noMoveStart,O),this._ease(k(i),e=>{i.recenterOnTerrain(),this._afterEase(n,e)},t),this}_prepareEase(t,n,i={}){this._moving=!0,this.transform.cameraElevationReference="sea",n||i.moving||this.fire(new e.Event("movestart",t)),this._zooming&&!i.zooming&&this.fire(new e.Event("zoomstart",t)),this._rotating&&!i.rotating&&this.fire(new e.Event("rotatestart",t)),this._pitching&&!i.pitching&&this.fire(new e.Event("pitchstart",t))}_fireMoveEvents(t){this.fire(new e.Event("move",t)),this._zooming&&this.fire(new e.Event("zoom",t)),this._rotating&&this.fire(new e.Event("rotate",t)),this._pitching&&this.fire(new e.Event("pitch",t))}_afterEase(t,n){if(this._easeId&&n&&this._easeId===n)return;this._easeId=void 0,this.transform.cameraElevationReference="ground";const i=this._zooming,a=this._rotating,o=this._pitching;this._moving=!1,this._zooming=!1,this._rotating=!1,this._pitching=!1,this._padding=!1,i&&this.fire(new e.Event("zoomend",t)),a&&this.fire(new e.Event("rotateend",t)),o&&this.fire(new e.Event("pitchend",t)),this.fire(new e.Event("moveend",t))}flyTo(t,n){if(this._prefersReducedMotion(t)){const i=e.pick(t,["center","zoom","bearing","pitch","around"]);return this.jumpTo(i,n)}this.stop(),t=e.extend({offset:[0,0],speed:1.2,curve:1.42,easing:e.ease},t);const i=this.transform,a=this.getZoom(),o=this.getBearing(),r=this.getPitch(),s=this.getPadding(),l="zoom"in t?e.clamp(+t.zoom,i.minZoom,i.maxZoom):a,c="bearing"in t?this._normalizeBearing(t.bearing,o):o,u="pitch"in t?+t.pitch:r,d="padding"in t?t.padding:i.padding,p=i.zoomScale(l-a),f=e.Point.convert(t.offset);let m=i.centerPoint.add(f);const h=i.pointLocation(m),g=e.LngLat.convert(t.center||h);this._normalizeCenter(g);const y=i.project(h),v=i.project(g).sub(y);let b=t.curve;const _=Math.max(i.width,i.height),w=_/p,x=v.mag();if("minZoom"in t){const n=e.clamp(Math.min(t.minZoom,a,l),i.minZoom,i.maxZoom),o=_/i.zoomScale(n-a);b=Math.sqrt(o/x*2)}const k=b*b;function O(e){const t=(w*w-_*_+(e?-1:1)*k*k*x*x)/(2*(e?w:_)*k*x);return Math.log(Math.sqrt(t*t+1)-t)}function T(e){return(Math.exp(e)-Math.exp(-e))/2}function C(e){return(Math.exp(e)+Math.exp(-e))/2}const E=O(0);let S=function(e){return C(E)/C(E+b*e)},P=function(e){return _*((C(E)*(T(t=E+b*e)/C(t))-T(E))/k)/x;var t},I=(O(1)-E)/b;if(Math.abs(x)<1e-6||!isFinite(I)){if(Math.abs(_-w)<1e-6)return this.easeTo(t,n);const e=w<_?-1:1;I=Math.abs(Math.log(w/_))/b,P=function(){return 0},S=function(t){return Math.exp(e*b*t)}}t.duration="duration"in t?+t.duration:1e3*I/("screenSpeed"in t?+t.screenSpeed/b:+t.speed),t.maxDuration&&t.duration>t.maxDuration&&(t.duration=0);const M=o!==c,A=u!==r,j=!i.isPaddingEqual(d),N=i=>p=>{const h=p*I,b=1/S(h);i.zoom=1===p?l:a+i.scaleZoom(b),M&&(i.bearing=e.number(o,c,p)),A&&(i.pitch=e.number(r,u,p)),j&&(i.interpolatePadding(s,d,p),m=i.centerPoint.add(f));const _=1===p?g:i.unproject(y.add(v.mult(P(h))).mult(b));return i.setLocationAtPoint(i.renderWorldCopies?_.wrap():_,m),i._updateCameraOnTerrain(),t.preloadOnly||this._fireMoveEvents(n),i};if(t.preloadOnly){const e=this._emulate(N,t.duration,i);return this._preloadTiles(e),this}return this._zooming=!0,this._rotating=M,this._pitching=A,this._padding=j,this._prepareEase(n,!1),this._ease(N(i),()=>this._afterEase(n),t),this}isEasing(){return!!this._easeFrameId}stop(){return this._stop()}_stop(e,t){if(this._easeFrameId&&(this._cancelRenderFrame(this._easeFrameId),this._easeFrameId=void 0,this._onEaseFrame=void 0),this._onEaseEnd){const e=this._onEaseEnd;this._onEaseEnd=void 0,e.call(this,t)}if(!e){const e=this.handlers;e&&e.stop(!1)}return this}_ease(t,n,i){!1===i.animate||0===i.duration?(t(1),n()):(this._easeStart=e.exported.now(),this._easeOptions=i,this._onEaseFrame=t,this._onEaseEnd=n,this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback))}_renderFrameCallback(){const t=Math.min((e.exported.now()-this._easeStart)/this._easeOptions.duration,1),n=this._onEaseFrame;n&&n(this._easeOptions.easing(t)),t<1?this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback):this.stop()}_normalizeBearing(t,n){t=e.wrap(t,-180,180);const i=Math.abs(t-n);return Math.abs(t-360-n)<i&&(t-=360),Math.abs(t+360-n)<i&&(t+=360),t}_normalizeCenter(e){const t=this.transform;if(!t.renderWorldCopies||t.maxBounds)return;const n=e.lng-t.center.lng;e.lng+=n>180?-360:n<-180?360:0}_prefersReducedMotion(t){return this._respectPrefersReducedMotion&&e.exported.prefersReducedMotion&&!(t&&t.essential)}_emulate(e,t,n){const i=Math.ceil(15*t/1e3),a=[],o=e(n.clone());for(let e=0;e<=i;e++){const t=o(e/i);a.push(t.clone())}return a}}class Ka{constructor(t={}){this.options=t,e.bindAll(["_toggleAttribution","_updateEditLink","_updateData","_updateCompact"],this)}getDefaultPosition(){return"bottom-right"}onAdd(e){const t=this.options&&this.options.compact;return this._map=e,this._container=o("div","mapboxgl-ctrl mapboxgl-ctrl-attrib"),this._compactButton=o("button","mapboxgl-ctrl-attrib-button",this._container),o("span","mapboxgl-ctrl-icon",this._compactButton).setAttribute("aria-hidden","true"),this._compactButton.type="button",this._compactButton.addEventListener("click",this._toggleAttribution),this._setElementTitle(this._compactButton,"ToggleAttribution"),this._innerContainer=o("div","mapboxgl-ctrl-attrib-inner",this._container),this._innerContainer.setAttribute("role","list"),t&&this._container.classList.add("mapboxgl-compact"),this._updateAttributions(),this._updateEditLink(),this._map.on("styledata",this._updateData),this._map.on("sourcedata",this._updateData),this._map.on("moveend",this._updateEditLink),void 0===t&&(this._map.on("resize",this._updateCompact),this._updateCompact()),this._container}onRemove(){this._container.remove(),this._map.off("styledata",this._updateData),this._map.off("sourcedata",this._updateData),this._map.off("moveend",this._updateEditLink),this._map.off("resize",this._updateCompact),this._map=void 0,this._attribHTML=void 0}_setElementTitle(e,t){const n=this._map._getUIString("AttributionControl."+t);e.setAttribute("aria-label",n),e.removeAttribute("title"),e.firstElementChild&&e.firstElementChild.setAttribute("title",n)}_toggleAttribution(){this._container.classList.contains("mapboxgl-compact-show")?(this._container.classList.remove("mapboxgl-compact-show"),this._compactButton.setAttribute("aria-expanded","false")):(this._container.classList.add("mapboxgl-compact-show"),this._compactButton.setAttribute("aria-expanded","true"))}_updateEditLink(){let t=this._editLink;t||(t=this._editLink=this._container.querySelector(".mapbox-improve-map"));const n=[{key:"owner",value:this.styleOwner},{key:"id",value:this.styleId},{key:"access_token",value:this._map._requestManager._customAccessToken||e.config.ACCESS_TOKEN}];if(t){const i=n.reduce((e,t,i)=>(t.value&&(e+=`${t.key}=${t.value}${i<n.length-1?"&":""}`),e),"?");t.href=`${e.config.FEEDBACK_URL}/${i}#${ea(this._map,!0)}`,t.rel="noopener nofollow",this._setElementTitle(t,"MapFeedback")}}_updateData(e){!e||"metadata"!==e.sourceDataType&&"visibility"!==e.sourceDataType&&"style"!==e.dataType||(this._updateAttributions(),this._updateEditLink())}_updateAttributions(){if(!this._map.style)return;let e=[];if(this._map.style.stylesheet){const e=this._map.style.stylesheet;this.styleOwner=e.owner,this.styleId=e.id}const t=this._map.style._sourceCaches;for(const n in t){const i=t[n];if(i.used){const t=i.getSource();t.attribution&&e.indexOf(t.attribution)<0&&e.push(t.attribution)}}e.sort((e,t)=>e.length-t.length),e=e.filter((t,n)=>{for(let i=n+1;i<e.length;i++)if(e[i].indexOf(t)>=0)return!1;return!0}),this.options.customAttribution&&(Array.isArray(this.options.customAttribution)?e=[...this.options.customAttribution,...e]:e.unshift(this.options.customAttribution));const n=e.join(" | ");n!==this._attribHTML&&(this._attribHTML=n,e.length?(this._innerContainer.innerHTML=n,this._container.classList.remove("mapboxgl-attrib-empty")):this._container.classList.add("mapboxgl-attrib-empty"),this._editLink=null)}_updateCompact(){this._map.getCanvasContainer().offsetWidth<=640?this._container.classList.add("mapboxgl-compact"):this._container.classList.remove("mapboxgl-compact","mapboxgl-compact-show")}}class $a{constructor(){e.bindAll(["_updateLogo","_updateCompact"],this)}onAdd(e){this._map=e,this._container=o("div","mapboxgl-ctrl");const t=o("a","mapboxgl-ctrl-logo");return t.target="_blank",t.rel="noopener nofollow",t.href="https://www.mapbox.com/",t.setAttribute("aria-label",this._map._getUIString("LogoControl.Title")),t.setAttribute("rel","noopener nofollow"),this._container.appendChild(t),this._container.style.display="none",this._map.on("sourcedata",this._updateLogo),this._updateLogo(),this._map.on("resize",this._updateCompact),this._updateCompact(),this._container}onRemove(){this._container.remove(),this._map.off("sourcedata",this._updateLogo),this._map.off("resize",this._updateCompact)}getDefaultPosition(){return"bottom-left"}_updateLogo(e){e&&"metadata"!==e.sourceDataType||(this._container.style.display=this._logoRequired()?"block":"none")}_logoRequired(){if(!this._map.style)return!0;const e=this._map.style._sourceCaches;if(0===Object.entries(e).length)return!0;for(const t in e){const n=e[t].getSource();if(n.hasOwnProperty("mapbox_logo")&&!n.mapbox_logo)return!1}return!0}_updateCompact(){const e=this._container.children;if(e.length){const t=e[0];this._map.getCanvasContainer().offsetWidth<250?t.classList.add("mapboxgl-compact"):t.classList.remove("mapboxgl-compact")}}}class Qa{constructor(){this._queue=[],this._id=0,this._cleared=!1,this._currentlyRunning=!1}add(e){const t=++this._id;return this._queue.push({callback:e,id:t,cancelled:!1}),t}remove(e){const t=this._currentlyRunning,n=t?this._queue.concat(t):this._queue;for(const t of n)if(t.id===e)return void(t.cancelled=!0)}run(e=0){const t=this._currentlyRunning=this._queue;this._queue=[];for(const n of t)if(!n.cancelled&&(n.callback(e),this._cleared))break;this._cleared=!1,this._currentlyRunning=!1}clear(){this._currentlyRunning&&(this._cleared=!0),this._queue=[]}}function eo(t,n,i){if(t=new e.LngLat(t.lng,t.lat),n){const a=new e.LngLat(t.lng-360,t.lat),o=new e.LngLat(t.lng+360,t.lat),r=360*Math.ceil(Math.abs(t.lng-i.center.lng)/360),s=i.locationPoint(t).distSqr(n),l=n.x<0||n.y<0||n.x>i.width||n.y>i.height;i.locationPoint(a).distSqr(n)<s&&(l||Math.abs(a.lng-i.center.lng)<r)?t=a:i.locationPoint(o).distSqr(n)<s&&(l||Math.abs(o.lng-i.center.lng)<r)&&(t=o)}for(;Math.abs(t.lng-i.center.lng)>180;){const e=i.locationPoint(t);if(e.x>=0&&e.y>=0&&e.x<=i.width&&e.y<=i.height)break;t.lng>i.center.lng?t.lng-=360:t.lng+=360}return t}const to={center:"translate(-50%,-50%)",top:"translate(-50%,0)","top-left":"translate(0,0)","top-right":"translate(-100%,0)",bottom:"translate(-50%,-100%)","bottom-left":"translate(0,-100%)","bottom-right":"translate(-100%,-100%)",left:"translate(0,-50%)",right:"translate(-100%,-50%)"};class no extends e.Evented{constructor(t,n){if(super(),(t instanceof e.window.HTMLElement||n)&&(t=e.extend({element:t},n)),e.bindAll(["_update","_onMove","_onUp","_addDragHandler","_onMapClick","_onKeyPress","_clearFadeTimer"],this),this._anchor=t&&t.anchor||"center",this._color=t&&t.color||"#3FB1CE",this._scale=t&&t.scale||1,this._draggable=t&&t.draggable||!1,this._clickTolerance=t&&t.clickTolerance||0,this._isDragging=!1,this._state="inactive",this._rotation=t&&t.rotation||0,this._rotationAlignment=t&&t.rotationAlignment||"auto",this._pitchAlignment=t&&t.pitchAlignment&&t.pitchAlignment||"auto",this._updateMoving=()=>this._update(!0),this._occludedOpacity=t&&t.occludedOpacity||.2,t&&t.element)this._element=t.element,this._offset=e.Point.convert(t&&t.offset||[0,0]);else{this._defaultMarker=!0,this._element=o("div");const n=41,i=27,a=r("svg",{display:"block",height:n*this._scale+"px",width:i*this._scale+"px",viewBox:`0 0 ${i} ${n}`},this._element),s=r("radialGradient",{id:"shadowGradient"},r("defs",{},a));r("stop",{offset:"10%","stop-opacity":.4},s),r("stop",{offset:"100%","stop-opacity":.05},s),r("ellipse",{cx:13.5,cy:34.8,rx:10.5,ry:5.25,fill:"url(#shadowGradient)"},a),r("path",{fill:this._color,d:"M27,13.5C27,19.07 20.25,27 14.75,34.5C14.02,35.5 12.98,35.5 12.25,34.5C6.75,27 0,19.22 0,13.5C0,6.04 6.04,0 13.5,0C20.96,0 27,6.04 27,13.5Z"},a),r("path",{opacity:.25,d:"M13.5,0C6.04,0 0,6.04 0,13.5C0,19.22 6.75,27 12.25,34.5C13,35.52 14.02,35.5 14.75,34.5C20.25,27 27,19.07 27,13.5C27,6.04 20.96,0 13.5,0ZM13.5,1C20.42,1 26,6.58 26,13.5C26,15.9 24.5,19.18 22.22,22.74C19.95,26.3 16.71,30.14 13.94,33.91C13.74,34.18 13.61,34.32 13.5,34.44C13.39,34.32 13.26,34.18 13.06,33.91C10.28,30.13 7.41,26.31 5.02,22.77C2.62,19.23 1,15.95 1,13.5C1,6.58 6.58,1 13.5,1Z"},a),r("circle",{fill:"white",cx:13.5,cy:13.5,r:5.5},a),this._offset=e.Point.convert(t&&t.offset||[0,-14])}this._element.hasAttribute("aria-label")||this._element.setAttribute("aria-label","Map marker"),this._element.classList.add("mapboxgl-marker"),this._element.addEventListener("dragstart",e=>{e.preventDefault()}),this._element.addEventListener("mousedown",e=>{e.preventDefault()});const i=this._element.classList;for(const e in to)i.remove("mapboxgl-marker-anchor-"+e);i.add("mapboxgl-marker-anchor-"+this._anchor),this._popup=null}addTo(e){return e===this._map||(this.remove(),this._map=e,e.getCanvasContainer().appendChild(this._element),e.on("move",this._updateMoving),e.on("moveend",this._update),e.on("remove",this._clearFadeTimer),e._addMarker(this),this.setDraggable(this._draggable),this._update(),e.on("click",this._onMapClick)),this}remove(){const e=this._map;return e&&(e.off("click",this._onMapClick),e.off("move",this._updateMoving),e.off("moveend",this._update),e.off("mousedown",this._addDragHandler),e.off("touchstart",this._addDragHandler),e.off("mouseup",this._onUp),e.off("touchend",this._onUp),e.off("mousemove",this._onMove),e.off("touchmove",this._onMove),e.off("remove",this._clearFadeTimer),e._removeMarker(this),this._map=void 0),this._clearFadeTimer(),this._element.remove(),this._popup&&this._popup.remove(),this}getLngLat(){return this._lngLat}setLngLat(t){return this._lngLat=e.LngLat.convert(t),this._pos=null,this._popup&&this._popup.setLngLat(this._lngLat),this._update(!0),this}getElement(){return this._element}setPopup(e){if(this._popup&&(this._popup.remove(),this._popup=null,this._element.removeAttribute("role"),this._element.removeEventListener("keypress",this._onKeyPress),this._originalTabIndex||this._element.removeAttribute("tabindex")),e){if(!("offset"in e.options)){const t=38.1,n=13.5,i=Math.sqrt(Math.pow(n,2)/2);e.options.offset=this._defaultMarker?{top:[0,0],"top-left":[0,0],"top-right":[0,0],bottom:[0,-t],"bottom-left":[i,-1*(t-n+i)],"bottom-right":[-i,-1*(t-n+i)],left:[n,-1*(t-n)],right:[-n,-1*(t-n)]}:this._offset}this._popup=e,e._marker=this,this._lngLat&&this._popup.setLngLat(this._lngLat),this._element.setAttribute("role","button"),this._originalTabIndex=this._element.getAttribute("tabindex"),this._originalTabIndex||this._element.setAttribute("tabindex","0"),this._element.addEventListener("keypress",this._onKeyPress),this._element.setAttribute("aria-expanded","false")}return this}_onKeyPress(e){const t=e.code,n=e.charCode||e.keyCode;"Space"!==t&&"Enter"!==t&&32!==n&&13!==n||this.togglePopup()}_onMapClick(e){const t=e.originalEvent.target,n=this._element;this._popup&&(t===n||n.contains(t))&&this.togglePopup()}getPopup(){return this._popup}togglePopup(){const e=this._popup;return e?(e.isOpen()?(e.remove(),this._element.setAttribute("aria-expanded","false")):this._map&&(e.addTo(this._map),this._element.setAttribute("aria-expanded","true")),this):this}_behindTerrain(){const e=this._map,t=this._pos;if(!e||!t)return!1;const n=e.unproject(t),i=e.getFreeCameraOptions();if(!i.position)return!1;const a=i.position.toLngLat();return a.distanceTo(n)<.9*a.distanceTo(this._lngLat)}_evaluateOpacity(){const t=this._map;if(!t)return;const n=this._pos;if(!n||n.x<0||n.x>t.transform.width||n.y<0||n.y>t.transform.height)return void this._clearFadeTimer();const i=t.unproject(n);let a;t._showingGlobe()&&e.isLngLatBehindGlobe(t.transform,this._lngLat)?a=0:(a=1-t._queryFogOpacity(i),t.transform._terrainEnabled()&&t.getTerrain()&&this._behindTerrain()&&(a*=this._occludedOpacity)),this._element.style.opacity=""+a,this._element.style.pointerEvents=a>0?"auto":"none",this._popup&&this._popup._setOpacity(a),this._fadeTimer=null}_clearFadeTimer(){this._fadeTimer&&(clearTimeout(this._fadeTimer),this._fadeTimer=null)}_updateDOM(){const e=this._pos;if(!e||!this._map)return;const t=this._offset.mult(this._scale);this._element.style.transform=`\n            translate(${e.x}px,${e.y}px)\n            ${to[this._anchor]}\n            ${this._calculateXYTransform()} ${this._calculateZTransform()}\n            translate(${t.x}px,${t.y}px)\n        `}_calculateXYTransform(){const t=this._pos,n=this._map,i=this.getPitchAlignment();if(!n||!t||"map"!==i)return"";if(!n._showingGlobe()){const e=n.getPitch();return e?`rotateX(${e}deg)`:""}const a=e.radToDeg(e.globeTiltAtLngLat(n.transform,this._lngLat)),o=t.sub(e.globeCenterToScreenPoint(n.transform)),r=Math.abs(o.x)+Math.abs(o.y);if(0===r)return"";const s=a/r;return`rotateX(${-o.y*s}deg) rotateY(${o.x*s}deg)`}_calculateZTransform(){const t=this._pos,n=this._map;if(!n||!t)return"";let i=0;const a=this.getRotationAlignment();if("map"===a)if(n._showingGlobe()){const t=n.project(new e.LngLat(this._lngLat.lng,this._lngLat.lat+.001)),a=n.project(new e.LngLat(this._lngLat.lng,this._lngLat.lat-.001)).sub(t);i=e.radToDeg(Math.atan2(a.y,a.x))-90}else i=-n.getBearing();else if("horizon"===a){const a=e.smoothstep(4,6,n.getZoom()),o=e.globeCenterToScreenPoint(n.transform);o.y+=a*n.transform.height;const r=t.sub(o),s=e.radToDeg(Math.atan2(r.y,r.x));i=(s>90?s-270:s+90)*(1-a)}return i+=this._rotation,i?`rotateZ(${i}deg)`:""}_update(t){e.window.cancelAnimationFrame(this._updateFrameId);const n=this._map;n&&(n.transform.renderWorldCopies&&(this._lngLat=eo(this._lngLat,this._pos,n.transform)),this._pos=n.project(this._lngLat),!0===t?this._updateFrameId=e.window.requestAnimationFrame(()=>{this._element&&this._pos&&this._anchor&&(this._pos=this._pos.round(),this._updateDOM())}):this._pos=this._pos.round(),n._requestDomTask(()=>{this._map&&(this._element&&this._pos&&this._anchor&&this._updateDOM(),(n._showingGlobe()||n.getTerrain()||n.getFog())&&!this._fadeTimer&&(this._fadeTimer=setTimeout(this._evaluateOpacity.bind(this),60)))}))}getOffset(){return this._offset}setOffset(t){return this._offset=e.Point.convert(t),this._update(),this}_onMove(t){const n=this._map;if(!n)return;const i=this._pointerdownPos,a=this._positionDelta;if(i&&a){if(!this._isDragging){const e=this._clickTolerance||n._clickTolerance;if(t.point.dist(i)<e)return;this._isDragging=!0}this._pos=t.point.sub(a),this._lngLat=n.unproject(this._pos),this.setLngLat(this._lngLat),this._element.style.pointerEvents="none","pending"===this._state&&(this._state="active",this.fire(new e.Event("dragstart"))),this.fire(new e.Event("drag"))}}_onUp(){this._element.style.pointerEvents="auto",this._positionDelta=null,this._pointerdownPos=null,this._isDragging=!1;const t=this._map;t&&(t.off("mousemove",this._onMove),t.off("touchmove",this._onMove)),"active"===this._state&&this.fire(new e.Event("dragend")),this._state="inactive"}_addDragHandler(e){const t=this._map,n=this._pos;t&&n&&this._element.contains(e.originalEvent.target)&&(e.preventDefault(),this._positionDelta=e.point.sub(n),this._pointerdownPos=e.point,this._state="pending",t.on("mousemove",this._onMove),t.on("touchmove",this._onMove),t.once("mouseup",this._onUp),t.once("touchend",this._onUp))}setDraggable(e){this._draggable=!!e;const t=this._map;return t&&(e?(t.on("mousedown",this._addDragHandler),t.on("touchstart",this._addDragHandler)):(t.off("mousedown",this._addDragHandler),t.off("touchstart",this._addDragHandler))),this}isDraggable(){return this._draggable}setRotation(e){return this._rotation=e||0,this._update(),this}getRotation(){return this._rotation}setRotationAlignment(e){return this._rotationAlignment=e||"auto",this._update(),this}getRotationAlignment(){return"auto"===this._rotationAlignment||"horizon"===this._rotationAlignment&&this._map&&!this._map._showingGlobe()?"viewport":this._rotationAlignment}setPitchAlignment(e){return this._pitchAlignment=e||"auto",this._update(),this}getPitchAlignment(){return"auto"===this._pitchAlignment?this.getRotationAlignment():this._pitchAlignment}setOccludedOpacity(e){return this._occludedOpacity=e||.2,this._update(),this}getOccludedOpacity(){return this._occludedOpacity}}const io={closeButton:!0,closeOnClick:!0,focusAfterOpen:!0,className:"",maxWidth:"240px"},ao=["a[href]","[tabindex]:not([tabindex='-1'])","[contenteditable]:not([contenteditable='false'])","button:not([disabled])","input:not([disabled])","select:not([disabled])","textarea:not([disabled])"].join(", ");function oo(t=new e.Point(0,0),n="bottom"){if("number"==typeof t){const i=Math.round(Math.sqrt(.5*Math.pow(t,2)));switch(n){case"top":return new e.Point(0,t);case"top-left":return new e.Point(i,i);case"top-right":return new e.Point(-i,i);case"bottom":return new e.Point(0,-t);case"bottom-left":return new e.Point(i,-i);case"bottom-right":return new e.Point(-i,-i);case"left":return new e.Point(t,0);case"right":return new e.Point(-t,0)}return new e.Point(0,0)}return t instanceof e.Point||Array.isArray(t)?e.Point.convert(t):e.Point.convert(t[n]||[0,0])}class ro{constructor(e){this.jumpTo(e)}getValue(t){if(t<=this._startTime)return this._start;if(t>=this._endTime)return this._end;const n=e.easeCubicInOut((t-this._startTime)/(this._endTime-this._startTime));return this._start*(1-n)+this._end*n}isEasing(e){return e>=this._startTime&&e<=this._endTime}jumpTo(e){this._startTime=-1/0,this._endTime=-1/0,this._start=e,this._end=e}easeTo(e,t,n){this._start=this.getValue(t),this._end=e,this._startTime=t,this._endTime=t+n}}const so={"AttributionControl.ToggleAttribution":"Toggle attribution","AttributionControl.MapFeedback":"Map feedback","FullscreenControl.Enter":"Enter fullscreen","FullscreenControl.Exit":"Exit fullscreen","GeolocateControl.FindMyLocation":"Find my location","GeolocateControl.LocationNotAvailable":"Location not available","LogoControl.Title":"Mapbox logo","Map.Title":"Map","NavigationControl.ResetBearing":"Reset bearing to north","NavigationControl.ZoomIn":"Zoom in","NavigationControl.ZoomOut":"Zoom out","ScrollZoomBlocker.CtrlMessage":"Use ctrl + scroll to zoom the map","ScrollZoomBlocker.CmdMessage":"Use ⌘ + scroll to zoom the map","TouchPanBlocker.Message":"Use two fingers to move the map"},lo={center:[0,0],zoom:0,bearing:0,pitch:0,minZoom:-2,maxZoom:22,minPitch:0,maxPitch:85,interactive:!0,scrollZoom:!0,boxZoom:!0,dragRotate:!0,dragPan:!0,keyboard:!0,doubleClickZoom:!0,touchZoomRotate:!0,touchPitch:!0,cooperativeGestures:!1,performanceMetricsCollection:!0,bearingSnap:7,clickTolerance:3,pitchWithRotate:!0,hash:!1,attributionControl:!0,failIfMajorPerformanceCaveat:!1,preserveDrawingBuffer:!1,trackResize:!0,optimizeForTerrain:!0,renderWorldCopies:!0,refreshExpiredTiles:!0,minTileCacheSize:null,maxTileCacheSize:null,localIdeographFontFamily:"sans-serif",localFontFamily:null,transformRequest:null,accessToken:null,fadeDuration:300,respectPrefersReducedMotion:!0,crossSourceCollisions:!0},co={showCompass:!0,showZoom:!0,visualizePitch:!1};class uo{constructor(t,n,i=!1){this._clickTolerance=10,this.element=n,this.mouseRotate=new xa({clickTolerance:t.dragRotate._mouseRotate._clickTolerance}),this.map=t,i&&(this.mousePitch=new ka({clickTolerance:t.dragRotate._mousePitch._clickTolerance})),e.bindAll(["mousedown","mousemove","mouseup","touchstart","touchmove","touchend","reset"],this),n.addEventListener("mousedown",this.mousedown),n.addEventListener("touchstart",this.touchstart,{passive:!1}),n.addEventListener("touchmove",this.touchmove),n.addEventListener("touchend",this.touchend),n.addEventListener("touchcancel",this.reset)}down(e,t){this.mouseRotate.mousedown(e,t),this.mousePitch&&this.mousePitch.mousedown(e,t),u()}move(e,t){const n=this.map,i=this.mouseRotate.mousemoveWindow(e,t),a=i&&i.bearingDelta;if(a&&n.setBearing(n.getBearing()+a),this.mousePitch){const i=this.mousePitch.mousemoveWindow(e,t),a=i&&i.pitchDelta;a&&n.setPitch(n.getPitch()+a)}}off(){const e=this.element;e.removeEventListener("mousedown",this.mousedown),e.removeEventListener("touchstart",this.touchstart,{passive:!1}),e.removeEventListener("touchmove",this.touchmove),e.removeEventListener("touchend",this.touchend),e.removeEventListener("touchcancel",this.reset),this.offTemp()}offTemp(){d(),e.window.removeEventListener("mousemove",this.mousemove),e.window.removeEventListener("mouseup",this.mouseup)}mousedown(t){this.down(e.extend({},t,{ctrlKey:!0,preventDefault:()=>t.preventDefault()}),m(this.element,t)),e.window.addEventListener("mousemove",this.mousemove),e.window.addEventListener("mouseup",this.mouseup)}mousemove(e){this.move(e,m(this.element,e))}mouseup(e){this.mouseRotate.mouseupWindow(e),this.mousePitch&&this.mousePitch.mouseupWindow(e),this.offTemp()}touchstart(e){1!==e.targetTouches.length?this.reset():(this._startPos=this._lastPos=h(this.element,e.targetTouches)[0],this.down({type:"mousedown",button:0,ctrlKey:!0,preventDefault:()=>e.preventDefault()},this._startPos))}touchmove(e){1!==e.targetTouches.length?this.reset():(this._lastPos=h(this.element,e.targetTouches)[0],this.move({preventDefault:()=>e.preventDefault()},this._lastPos))}touchend(e){0===e.targetTouches.length&&this._startPos&&this._lastPos&&this._startPos.dist(this._lastPos)<this._clickTolerance&&this.element.click(),this.reset()}reset(){this.mouseRotate.reset(),this.mousePitch&&this.mousePitch.reset(),delete this._startPos,delete this._lastPos,this.offTemp()}}const po={positionOptions:{enableHighAccuracy:!1,maximumAge:0,timeout:6e3},fitBoundsOptions:{maxZoom:15},trackUserLocation:!1,showAccuracyCircle:!0,showUserLocation:!0,showUserHeading:!1},fo={maxWidth:100,unit:"metric"},mo={kilometer:"km",meter:"m",mile:"mi",foot:"ft","nautical-mile":"nm"},ho={version:e.version,supported:n,setRTLTextPlugin:e.setRTLTextPlugin,getRTLTextPluginStatus:e.getRTLTextPluginStatus,Map:class extends Ja{constructor(t){if(e.LivePerformanceUtils.mark(e.PerformanceMarkers.create),null!=(t=e.extend({},lo,t)).minZoom&&null!=t.maxZoom&&t.minZoom>t.maxZoom)throw new Error("maxZoom must be greater than or equal to minZoom");if(null!=t.minPitch&&null!=t.maxPitch&&t.minPitch>t.maxPitch)throw new Error("maxPitch must be greater than or equal to minPitch");if(null!=t.minPitch&&t.minPitch<0)throw new Error("minPitch must be greater than or equal to 0");if(null!=t.maxPitch&&t.maxPitch>85)throw new Error("maxPitch must be less than or equal to 85");if(t.antialias&&e.isSafariWithAntialiasingBug(e.window)&&(t.antialias=!1,e.warnOnce("Antialiasing is disabled for this WebGL context to avoid browser bug: https://github.com/mapbox/mapbox-gl-js/issues/11609")),super(new Ki(t.minZoom,t.maxZoom,t.minPitch,t.maxPitch,t.renderWorldCopies),t),this._interactive=t.interactive,this._minTileCacheSize=t.minTileCacheSize,this._maxTileCacheSize=t.maxTileCacheSize,this._failIfMajorPerformanceCaveat=t.failIfMajorPerformanceCaveat,this._preserveDrawingBuffer=t.preserveDrawingBuffer,this._antialias=t.antialias,this._useWebGL2=t.useWebGL2,this._trackResize=t.trackResize,this._bearingSnap=t.bearingSnap,this._refreshExpiredTiles=t.refreshExpiredTiles,this._fadeDuration=t.fadeDuration,this._isInitialLoad=!0,this._crossSourceCollisions=t.crossSourceCollisions,this._collectResourceTiming=t.collectResourceTiming,this._optimizeForTerrain=t.optimizeForTerrain,this._language=this._parseLanguage(t.language),this._worldview=t.worldview,this._renderTaskQueue=new Qa,this._domRenderTaskQueue=new Qa,this._controls=[],this._markers=[],this._popups=[],this._mapId=e.uniqueId(),this._locale=e.extend({},so,t.locale),this._clickTolerance=t.clickTolerance,this._cooperativeGestures=t.cooperativeGestures,this._performanceMetricsCollection=t.performanceMetricsCollection,this._containerWidth=0,this._containerHeight=0,this._averageElevationLastSampledAt=-1/0,this._averageElevationExaggeration=0,this._averageElevation=new ro(0),this._interactionRange=[1/0,-1/0],this._visibilityHidden=0,this._useExplicitProjection=!1,this._requestManager=new e.RequestManager(t.transformRequest,t.accessToken,t.testMode),this._silenceAuthErrors=!!t.testMode,"string"==typeof t.container){if(this._container=e.window.document.getElementById(t.container),!this._container)throw new Error(`Container '${t.container}' not found.`)}else{if(!(t.container instanceof e.window.HTMLElement))throw new Error("Invalid type: 'container' must be a String or HTMLElement.");this._container=t.container}if(this._container.childNodes.length>0&&e.warnOnce("The map container element should be empty, otherwise the map's interactivity will be negatively impacted. If you want to display a message when WebGL is not supported, use the Mapbox GL Supported plugin instead."),t.maxBounds&&this.setMaxBounds(t.maxBounds),e.bindAll(["_onWindowOnline","_onWindowResize","_onVisibilityChange","_onMapScroll","_contextLost","_contextRestored"],this),this._setupContainer(),this._setupPainter(),void 0===this.painter)throw new Error("Failed to initialize WebGL.");this.on("move",()=>this._update(!1)),this.on("moveend",()=>this._update(!1)),this.on("zoom",()=>this._update(!0)),void 0!==e.window&&(e.window.addEventListener("online",this._onWindowOnline,!1),e.window.addEventListener("resize",this._onWindowResize,!1),e.window.addEventListener("orientationchange",this._onWindowResize,!1),e.window.addEventListener("webkitfullscreenchange",this._onWindowResize,!1),e.window.addEventListener("visibilitychange",this._onVisibilityChange,!1)),this.handlers=new Xa(this,t),this._localFontFamily=t.localFontFamily,this._localIdeographFontFamily=t.localIdeographFontFamily,t.style&&this.setStyle(t.style,{localFontFamily:this._localFontFamily,localIdeographFontFamily:this._localIdeographFontFamily}),t.projection&&this.setProjection(t.projection),this._hash=t.hash&&new Qi("string"==typeof t.hash&&t.hash||void 0).addTo(this),this._hash&&this._hash._onHashChange()||(this.jumpTo({center:t.center,zoom:t.zoom,bearing:t.bearing,pitch:t.pitch}),t.bounds&&(this.resize(),this.fitBounds(t.bounds,e.extend({},t.fitBoundsOptions,{duration:0})))),this.resize(),t.attributionControl&&this.addControl(new Ka({customAttribution:t.customAttribution})),this._logoControl=new $a,this.addControl(this._logoControl,t.logoPosition),this.on("style.load",()=>{this.transform.unmodified&&this.jumpTo(this.style.stylesheet)}),this.on("data",t=>{this._update("style"===t.dataType),this.fire(new e.Event(t.dataType+"data",t))}),this.on("dataloading",t=>{this.fire(new e.Event(t.dataType+"dataloading",t))})}_getMapId(){return this._mapId}addControl(t,n){if(void 0===n&&(n=t.getDefaultPosition?t.getDefaultPosition():"top-right"),!t||!t.onAdd)return this.fire(new e.ErrorEvent(new Error("Invalid argument to map.addControl(). Argument must be a control with onAdd and onRemove methods.")));const i=t.onAdd(this);this._controls.push(t);const a=this._controlPositions[n];return-1!==n.indexOf("bottom")?a.insertBefore(i,a.firstChild):a.appendChild(i),this}removeControl(t){if(!t||!t.onRemove)return this.fire(new e.ErrorEvent(new Error("Invalid argument to map.removeControl(). Argument must be a control with onAdd and onRemove methods.")));const n=this._controls.indexOf(t);return n>-1&&this._controls.splice(n,1),t.onRemove(this),this}hasControl(e){return this._controls.indexOf(e)>-1}getContainer(){return this._container}getCanvasContainer(){return this._canvasContainer}getCanvas(){return this._canvas}resize(t){if(this._updateContainerDimensions(),this._containerWidth===this.transform.width&&this._containerHeight===this.transform.height)return this;this._resizeCanvas(this._containerWidth,this._containerHeight),this.transform.resize(this._containerWidth,this._containerHeight),this.painter.resize(Math.ceil(this._containerWidth),Math.ceil(this._containerHeight));const n=!this._moving;return n&&this.fire(new e.Event("movestart",t)).fire(new e.Event("move",t)),this.fire(new e.Event("resize",t)),n&&this.fire(new e.Event("moveend",t)),this}getBounds(){return this.transform.getBounds()}getMaxBounds(){return this.transform.getMaxBounds()||null}setMaxBounds(t){return this.transform.setMaxBounds(e.LngLatBounds.convert(t)),this._update()}setMinZoom(t){if((t=null==t?-2:t)>=-2&&t<=this.transform.maxZoom)return this.transform.minZoom=t,this._update(),this.getZoom()<t?this.setZoom(t):this.fire(new e.Event("zoomstart")).fire(new e.Event("zoom")).fire(new e.Event("zoomend")),this;throw new Error("minZoom must be between -2 and the current maxZoom, inclusive")}getMinZoom(){return this.transform.minZoom}setMaxZoom(t){if((t=null==t?22:t)>=this.transform.minZoom)return this.transform.maxZoom=t,this._update(),this.getZoom()>t?this.setZoom(t):this.fire(new e.Event("zoomstart")).fire(new e.Event("zoom")).fire(new e.Event("zoomend")),this;throw new Error("maxZoom must be greater than the current minZoom")}getMaxZoom(){return this.transform.maxZoom}setMinPitch(t){if((t=null==t?0:t)<0)throw new Error("minPitch must be greater than or equal to 0");if(t>=0&&t<=this.transform.maxPitch)return this.transform.minPitch=t,this._update(),this.getPitch()<t?this.setPitch(t):this.fire(new e.Event("pitchstart")).fire(new e.Event("pitch")).fire(new e.Event("pitchend")),this;throw new Error("minPitch must be between 0 and the current maxPitch, inclusive")}getMinPitch(){return this.transform.minPitch}setMaxPitch(t){if((t=null==t?85:t)>85)throw new Error("maxPitch must be less than or equal to 85");if(t>=this.transform.minPitch)return this.transform.maxPitch=t,this._update(),this.getPitch()>t?this.setPitch(t):this.fire(new e.Event("pitchstart")).fire(new e.Event("pitch")).fire(new e.Event("pitchend")),this;throw new Error("maxPitch must be greater than or equal to minPitch")}getMaxPitch(){return this.transform.maxPitch}getRenderWorldCopies(){return this.transform.renderWorldCopies}setRenderWorldCopies(e){return this.transform.renderWorldCopies=e,this.transform.renderWorldCopies||this._forceMarkerAndPopupUpdate(!0),this._update()}getLanguage(){return this._language}_parseLanguage(t){return"auto"===t?e.window.navigator.language:Array.isArray(t)?0===t.length?void 0:t.map(t=>"auto"===t?e.window.navigator.language:t):t}setLanguage(e){const t=this._parseLanguage(e);if(!this.style||t===this._language)return this;this._language=t,this.style._reloadSources();for(const e of this._controls)e._setLanguage&&e._setLanguage(this._language);return this}getWorldview(){return this._worldview}setWorldview(e){return this.style&&e!==this._worldview?(this._worldview=e,this.style._reloadSources(),this):this}getProjection(){return this.transform.mercatorFromTransition?{name:"globe",center:[0,0]}:this.transform.getProjection()}_showingGlobe(){return"globe"===this.transform.projection.name}setProjection(e){return this._lazyInitEmptyStyle(),e?"string"==typeof e&&(e={name:e}):e=null,this._useExplicitProjection=!!e,this._prioritizeAndUpdateProjection(e,this.style.stylesheet?this.style.stylesheet.projection:null)}_updateProjectionTransition(){if("globe"!==this.getProjection().name)return;const t=this.transform,n=t.projection.name;let i;"globe"===n&&t.zoom>=e.GLOBE_ZOOM_THRESHOLD_MAX?(t.setMercatorFromTransition(),i=!0):"mercator"===n&&t.zoom<e.GLOBE_ZOOM_THRESHOLD_MAX&&(t.setProjection({name:"globe"}),i=!0),i&&(this.style.applyProjectionUpdate(),this.style._forceSymbolLayerUpdate())}_prioritizeAndUpdateProjection(e,t){return this._updateProjection(e||t||{name:"mercator"})}_updateProjection(t){let n;if(n="globe"===t.name&&this.transform.zoom>=e.GLOBE_ZOOM_THRESHOLD_MAX?this.transform.setMercatorFromTransition():this.transform.setProjection(t),this.style.applyProjectionUpdate(),n){this.painter.clearBackgroundTiles();for(const e in this.style._sourceCaches)this.style._sourceCaches[e].clearTiles();this._update(!0),this._forceMarkerAndPopupUpdate(!0)}return this}project(t){return this.transform.locationPoint3D(e.LngLat.convert(t))}unproject(t){return this.transform.pointLocation3D(e.Point.convert(t))}isMoving(){return this._moving||this.handlers&&this.handlers.isMoving()||!1}isZooming(){return this._zooming||this.handlers&&this.handlers.isZooming()||!1}isRotating(){return this._rotating||this.handlers&&this.handlers.isRotating()||!1}_isDragging(){return this.handlers&&this.handlers._isDragging()||!1}_createDelegatedListener(e,t,n){if("mouseenter"===e||"mouseover"===e){let i=!1;const a=a=>{const o=t.filter(e=>this.getLayer(e)),r=o.length?this.queryRenderedFeatures(a.point,{layers:o}):[];r.length?i||(i=!0,n.call(this,new ca(e,this,a.originalEvent,{features:r}))):i=!1},o=()=>{i=!1};return{layers:new Set(t),listener:n,delegates:{mousemove:a,mouseout:o}}}if("mouseleave"===e||"mouseout"===e){let i=!1;const a=a=>{const o=t.filter(e=>this.getLayer(e));(o.length?this.queryRenderedFeatures(a.point,{layers:o}):[]).length?i=!0:i&&(i=!1,n.call(this,new ca(e,this,a.originalEvent)))},o=t=>{i&&(i=!1,n.call(this,new ca(e,this,t.originalEvent)))};return{layers:new Set(t),listener:n,delegates:{mousemove:a,mouseout:o}}}{const i=e=>{const i=t.filter(e=>this.getLayer(e)),a=i.length?this.queryRenderedFeatures(e.point,{layers:i}):[];a.length&&(e.features=a,n.call(this,e),delete e.features)};return{layers:new Set(t),listener:n,delegates:{[e]:i}}}}on(e,t,n){if(void 0===n)return super.on(e,t);Array.isArray(t)||(t=[t]);const i=this._createDelegatedListener(e,t,n);this._delegatedListeners=this._delegatedListeners||{},this._delegatedListeners[e]=this._delegatedListeners[e]||[],this._delegatedListeners[e].push(i);for(const e in i.delegates)this.on(e,i.delegates[e]);return this}once(e,t,n){if(void 0===n)return super.once(e,t);Array.isArray(t)||(t=[t]);const i=this._createDelegatedListener(e,t,n);for(const e in i.delegates)this.once(e,i.delegates[e]);return this}off(e,t,n){if(void 0===n)return super.off(e,t);t=new Set(Array.isArray(t)?t:[t]);const i=(e,t)=>{if(e.size!==t.size)return!1;for(const n of e)if(!t.has(n))return!1;return!0},a=this._delegatedListeners?this._delegatedListeners[e]:void 0;return a&&(e=>{for(let a=0;a<e.length;a++){const o=e[a];if(o.listener===n&&i(o.layers,t)){for(const e in o.delegates)this.off(e,o.delegates[e]);return e.splice(a,1),this}}})(a),this}queryRenderedFeatures(t,n){return this.style?(void 0!==n||void 0===t||t instanceof e.Point||Array.isArray(t)||(n=t,t=void 0),this.style.queryRenderedFeatures(t=t||[[0,0],[this.transform.width,this.transform.height]],n=n||{},this.transform)):[]}querySourceFeatures(e,t){return this.style.querySourceFeatures(e,t)}isPointOnSurface(t){const{name:n}=this.transform.projection;return"globe"!==n&&"mercator"!==n&&e.warnOnce(n+" projection does not support isPointOnSurface, this API may behave unexpectedly."),this.transform.isPointOnSurface(e.Point.convert(t))}setStyle(t,n){return!1!==(n=e.extend({},{localIdeographFontFamily:this._localIdeographFontFamily,localFontFamily:this._localFontFamily},n)).diff&&n.localIdeographFontFamily===this._localIdeographFontFamily&&n.localFontFamily===this._localFontFamily&&this.style&&t?(this._diffStyle(t,n),this):(this._localIdeographFontFamily=n.localIdeographFontFamily,this._localFontFamily=n.localFontFamily,this._updateStyle(t,n))}_getUIString(e){const t=this._locale[e];if(null==t)throw new Error(`Missing UI string '${e}'`);return t}_updateStyle(e,t){return this.style&&(this.style.setEventedParent(null),this.style._remove(),this.style=void 0),e&&(this.style=new Qt(this,t||{}),this.style.setEventedParent(this,{style:this.style}),"string"==typeof e?this.style.loadURL(e):this.style.loadJSON(e)),this._updateTerrain(),this}_lazyInitEmptyStyle(){this.style||(this.style=new Qt(this,{}),this.style.setEventedParent(this,{style:this.style}),this.style.loadEmpty())}_diffStyle(t,n){if("string"==typeof t){const i=this._requestManager.normalizeStyleURL(t),a=this._requestManager.transformRequest(i,e.ResourceType.Style);e.getJSON(a,(t,i)=>{t?this.fire(new e.ErrorEvent(t)):i&&this._updateDiff(i,n)})}else"object"==typeof t&&this._updateDiff(t,n)}_updateDiff(t,n){try{this.style.setState(t)&&this._update(!0)}catch(i){e.warnOnce(`Unable to perform style diff: ${i.message||i.error||i}.  Rebuilding the style from scratch.`),this._updateStyle(t,n)}}getStyle(){if(this.style)return this.style.serialize()}isStyleLoaded(){return this.style?this.style.loaded():(e.warnOnce("There is no style added to the map."),!1)}addSource(e,t){return this._lazyInitEmptyStyle(),this.style.addSource(e,t),this._update(!0)}isSourceLoaded(e){return!!this.style&&this.style._isSourceCacheLoaded(e)}areTilesLoaded(){const e=this.style&&this.style._sourceCaches;for(const t in e){const n=e[t]._tiles;for(const e in n){const t=n[e];if("loaded"!==t.state&&"errored"!==t.state)return!1}}return!0}addSourceType(e,t,n){this._lazyInitEmptyStyle(),this.style.addSourceType(e,t,n)}removeSource(e){return this.style.removeSource(e),this._updateTerrain(),this._update(!0)}getSource(e){return this.style.getSource(e)}addImage(t,n,{pixelRatio:i=1,sdf:a=!1,stretchX:o,stretchY:r,content:s}={}){if(this._lazyInitEmptyStyle(),n instanceof e.window.HTMLImageElement||e.window.ImageBitmap&&n instanceof e.window.ImageBitmap){const{width:l,height:c,data:u}=e.exported.getImageData(n);this.style.addImage(t,{data:new e.RGBAImage({width:l,height:c},u),pixelRatio:i,stretchX:o,stretchY:r,content:s,sdf:a,version:0})}else if(void 0===n.width||void 0===n.height)this.fire(new e.ErrorEvent(new Error("Invalid arguments to map.addImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));else{const{width:l,height:c}=n,u=n;this.style.addImage(t,{data:new e.RGBAImage({width:l,height:c},new Uint8Array(u.data)),pixelRatio:i,stretchX:o,stretchY:r,content:s,sdf:a,version:0,userImage:u}),u.onAdd&&u.onAdd(this,t)}}updateImage(t,n){const i=this.style.getImage(t);if(!i)return void this.fire(new e.ErrorEvent(new Error("The map has no image with that id. If you are adding a new image use `map.addImage(...)` instead.")));const a=n instanceof e.window.HTMLImageElement||e.window.ImageBitmap&&n instanceof e.window.ImageBitmap?e.exported.getImageData(n):n,{width:o,height:r}=a;void 0!==o&&void 0!==r?o===i.data.width&&r===i.data.height?(i.data.replace(a.data,!(n instanceof e.window.HTMLImageElement||e.window.ImageBitmap&&n instanceof e.window.ImageBitmap)),this.style.updateImage(t,i)):this.fire(new e.ErrorEvent(new Error(`The width and height of the updated image (${o}, ${r})\n                must be that same as the previous version of the image\n                (${i.data.width}, ${i.data.height})`))):this.fire(new e.ErrorEvent(new Error("Invalid arguments to map.updateImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")))}hasImage(t){return t?!!this.style.getImage(t):(this.fire(new e.ErrorEvent(new Error("Missing required image id"))),!1)}removeImage(e){this.style.removeImage(e)}loadImage(t,n){e.getImage(this._requestManager.transformRequest(t,e.ResourceType.Image),(t,i)=>{n(t,i instanceof e.window.HTMLImageElement?e.exported.getImageData(i):i)})}listImages(){return this.style.listImages()}addLayer(e,t){return this._lazyInitEmptyStyle(),this.style.addLayer(e,t),this._update(!0)}moveLayer(e,t){return this.style.moveLayer(e,t),this._update(!0)}removeLayer(e){return this.style.removeLayer(e),this._update(!0)}getLayer(e){return this.style.getLayer(e)}setLayerZoomRange(e,t,n){return this.style.setLayerZoomRange(e,t,n),this._update(!0)}setFilter(e,t,n={}){return this.style.setFilter(e,t,n),this._update(!0)}getFilter(e){return this.style.getFilter(e)}setPaintProperty(e,t,n,i={}){return this.style.setPaintProperty(e,t,n,i),this._update(!0)}getPaintProperty(e,t){return this.style.getPaintProperty(e,t)}setLayoutProperty(e,t,n,i={}){return this.style.setLayoutProperty(e,t,n,i),this._update(!0)}getLayoutProperty(e,t){return this.style.getLayoutProperty(e,t)}setLight(e,t={}){return this._lazyInitEmptyStyle(),this.style.setLight(e,t),this._update(!0)}getLight(){return this.style.getLight()}setTerrain(e){return this._lazyInitEmptyStyle(),!e&&this.transform.projection.requiresDraping?this.style.setTerrainForDraping():this.style.setTerrain(e),this._averageElevationLastSampledAt=-1/0,this._update(!0)}getTerrain(){return this.style?this.style.getTerrain():null}setFog(e){return this._lazyInitEmptyStyle(),this.style.setFog(e),this._update(!0)}getFog(){return this.style?this.style.getFog():null}_queryFogOpacity(t){return this.style&&this.style.fog?this.style.fog.getOpacityAtLatLng(e.LngLat.convert(t),this.transform):0}setFeatureState(e,t){return this.style.setFeatureState(e,t),this._update()}removeFeatureState(e,t){return this.style.removeFeatureState(e,t),this._update()}getFeatureState(e){return this.style.getFeatureState(e)}_updateContainerDimensions(){if(!this._container)return;const t=this._container.getBoundingClientRect().width||400,n=this._container.getBoundingClientRect().height||300;let i,a,o,r=this._container;for(;r&&(!a||!o);){const t=e.window.getComputedStyle(r).transform;t&&"none"!==t&&(i=t.match(/matrix.*\((.+)\)/)[1].split(", "),i[0]&&"0"!==i[0]&&"1"!==i[0]&&(a=i[0]),i[3]&&"0"!==i[3]&&"1"!==i[3]&&(o=i[3])),r=r.parentElement}this._containerWidth=a?Math.abs(t/a):t,this._containerHeight=o?Math.abs(n/o):n}_detectMissingCSS(){"rgb(250, 128, 114)"!==e.window.getComputedStyle(this._missingCSSCanary).getPropertyValue("background-color")&&e.warnOnce("This page appears to be missing CSS declarations for Mapbox GL JS, which may cause the map to display incorrectly. Please ensure your page includes mapbox-gl.css, as described in https://www.mapbox.com/mapbox-gl-js/api/.")}_setupContainer(){const e=this._container;e.classList.add("mapboxgl-map"),(this._missingCSSCanary=o("div","mapboxgl-canary",e)).style.visibility="hidden",this._detectMissingCSS();const t=this._canvasContainer=o("div","mapboxgl-canvas-container",e);this._interactive&&t.classList.add("mapboxgl-interactive"),this._canvas=o("canvas","mapboxgl-canvas",t),this._canvas.addEventListener("webglcontextlost",this._contextLost,!1),this._canvas.addEventListener("webglcontextrestored",this._contextRestored,!1),this._canvas.setAttribute("tabindex","0"),this._canvas.setAttribute("aria-label",this._getUIString("Map.Title")),this._canvas.setAttribute("role","region"),this._updateContainerDimensions(),this._resizeCanvas(this._containerWidth,this._containerHeight);const n=this._controlContainer=o("div","mapboxgl-control-container",e),i=this._controlPositions={};["top-left","top-right","bottom-left","bottom-right"].forEach(e=>{i[e]=o("div","mapboxgl-ctrl-"+e,n)}),this._container.addEventListener("scroll",this._onMapScroll,!1)}_resizeCanvas(t,n){const i=e.exported.devicePixelRatio||1;this._canvas.width=i*Math.ceil(t),this._canvas.height=i*Math.ceil(n),this._canvas.style.width=t+"px",this._canvas.style.height=n+"px"}_addMarker(e){this._markers.push(e)}_removeMarker(e){const t=this._markers.indexOf(e);-1!==t&&this._markers.splice(t,1)}_addPopup(e){this._popups.push(e)}_removePopup(e){const t=this._popups.indexOf(e);-1!==t&&this._popups.splice(t,1)}_setupPainter(){const t=e.extend({},n.webGLContextAttributes,{failIfMajorPerformanceCaveat:this._failIfMajorPerformanceCaveat,preserveDrawingBuffer:this._preserveDrawingBuffer,antialias:this._antialias||!1}),i=this._useWebGL2&&this._canvas.getContext("webgl2",t),a=i||this._canvas.getContext("webgl",t)||this._canvas.getContext("experimental-webgl",t);a?(this._useWebGL2&&!i&&e.warnOnce("Failed to create WebGL 2 context. Using WebGL 1."),e.storeAuthState(a,!0),this.painter=new Bi(a,this.transform,!!i),this.on("data",e=>{"source"===e.dataType&&this.painter.setTileLoadedFlag(!0)}),e.exported$1.testSupport(a)):this.fire(new e.ErrorEvent(new Error("Failed to initialize WebGL")))}_contextLost(t){t.preventDefault(),this._frame&&(this._frame.cancel(),this._frame=null),this.fire(new e.Event("webglcontextlost",{originalEvent:t}))}_contextRestored(t){this._setupPainter(),this.resize(),this._update(),this.fire(new e.Event("webglcontextrestored",{originalEvent:t}))}_onMapScroll(e){if(e.target===this._container)return this._container.scrollTop=0,this._container.scrollLeft=0,!1}loaded(){return!this._styleDirty&&!this._sourcesDirty&&!!this.style&&this.style.loaded()}_update(e){return this.style?(this._styleDirty=this._styleDirty||e,this._sourcesDirty=!0,this.triggerRepaint(),this):this}_requestRenderFrame(e){return this._update(),this._renderTaskQueue.add(e)}_cancelRenderFrame(e){this._renderTaskQueue.remove(e)}_requestDomTask(e){!this.loaded()||this.loaded()&&!this.isMoving()?e():this._domRenderTaskQueue.add(e)}_render(t){let n;const i=this.painter.context.extTimerQuery,a=e.exported.now();if(this.listens("gpu-timing-frame")&&(n=i.createQueryEXT(),i.beginQueryEXT(i.TIME_ELAPSED_EXT,n)),this.painter.context.setDirty(),this.painter.setBaseState(),(this.isMoving()||this.isRotating()||this.isZooming())&&(this._interactionRange[0]=Math.min(this._interactionRange[0],e.window.performance.now()),this._interactionRange[1]=Math.max(this._interactionRange[1],e.window.performance.now())),this._renderTaskQueue.run(t),this._domRenderTaskQueue.run(t),this._removed)return;this._updateProjectionTransition();const o=this._isInitialLoad?0:this._fadeDuration;if(this.style&&this._styleDirty){this._styleDirty=!1;const t=this.transform.zoom,n=this.transform.pitch,i=e.exported.now(),a=new e.EvaluationParameters(t,{now:i,fadeDuration:o,pitch:n,transition:this.style.getTransition()});this.style.update(a)}this.style&&this.style.fog&&this.style.fog.hasTransition()&&(this.style._markersNeedUpdate=!0,this._sourcesDirty=!0);let r=!1;if(this.style&&this._sourcesDirty?(this._sourcesDirty=!1,this.painter._updateFog(this.style),this._updateTerrain(),r=this._updateAverageElevation(a),this.style._updateSources(this.transform),this._forceMarkerAndPopupUpdate()):r=this._updateAverageElevation(a),this._placementDirty=this.style&&this.style._updatePlacement(this.painter.transform,this.showCollisionBoxes,o,this._crossSourceCollisions),this.style&&this.painter.render(this.style,{showTileBoundaries:this.showTileBoundaries,showTerrainWireframe:this.showTerrainWireframe,showOverdrawInspector:this._showOverdrawInspector,showQueryGeometry:!!this._showQueryGeometry,showTileAABBs:this.showTileAABBs,rotating:this.isRotating(),zooming:this.isZooming(),moving:this.isMoving(),fadeDuration:o,isInitialLoad:this._isInitialLoad,showPadding:this.showPadding,gpuTiming:!!this.listens("gpu-timing-layer"),gpuTimingDeferredRender:!!this.listens("gpu-timing-deferred-render"),speedIndexTiming:this.speedIndexTiming}),this.fire(new e.Event("render")),this.loaded()&&!this._loaded&&(this._loaded=!0,this.fire(new e.Event("load"))),this.style&&this.style.hasTransitions()&&(this._styleDirty=!0),this.style&&!this._placementDirty&&this.style._releaseSymbolFadeTiles(),n){const t=e.exported.now()-a;i.endQueryEXT(i.TIME_ELAPSED_EXT,n),setTimeout(()=>{const o=i.getQueryObjectEXT(n,i.QUERY_RESULT_EXT)/1e6;i.deleteQueryEXT(n),this.fire(new e.Event("gpu-timing-frame",{cpuTime:t,gpuTime:o})),e.window.performance.mark("frame-gpu",{startTime:a,detail:{gpuTime:o}})},50)}if(this.listens("gpu-timing-layer")){const t=this.painter.collectGpuTimers();setTimeout(()=>{const n=this.painter.queryGpuTimers(t);this.fire(new e.Event("gpu-timing-layer",{layerTimes:n}))},50)}if(this.listens("gpu-timing-deferred-render")){const t=this.painter.collectDeferredRenderGpuQueries();setTimeout(()=>{const n=this.painter.queryGpuTimeDeferredRender(t);this.fire(new e.Event("gpu-timing-deferred-render",{gpuTime:n}))},50)}const s=this._sourcesDirty||this._styleDirty||this._placementDirty||r;if(s||this._repaint)this.triggerRepaint();else{const t=!this.isMoving()&&this.loaded();if(t&&(r=this._updateAverageElevation(a,!0)),r)this.triggerRepaint();else if(this._triggerFrame(!1),t&&(this.fire(new e.Event("idle")),this._isInitialLoad=!1,this.speedIndexTiming)){const t=this._calculateSpeedIndex();this.fire(new e.Event("speedindexcompleted",{speedIndex:t})),this.speedIndexTiming=!1}}!this._loaded||this._fullyLoaded||s||(this._fullyLoaded=!0,e.LivePerformanceUtils.mark(e.PerformanceMarkers.fullLoad),this._performanceMetricsCollection&&e.postPerformanceEvent(this._requestManager._customAccessToken,{width:this.painter.width,height:this.painter.height,interactionRange:this._interactionRange,visibilityHidden:this._visibilityHidden,terrainEnabled:!!this.painter.style.getTerrain(),fogEnabled:!!this.painter.style.getFog(),projection:this.getProjection().name,zoom:this.transform.zoom,renderer:this.painter.context.renderer,vendor:this.painter.context.vendor}),this._authenticate())}_forceMarkerAndPopupUpdate(e){for(const t of this._markers)e&&!this.getRenderWorldCopies()&&(t._lngLat=t._lngLat.wrap()),t._update();for(const t of this._popups)!e||this.getRenderWorldCopies()||t._trackPointer||(t._lngLat=t._lngLat.wrap()),t._update()}_updateAverageElevation(e,t=!1){const n=e=>(this.transform.averageElevation=e,this._update(!1),!0);if(!this.painter.averageElevationNeedsEasing())return 0!==this.transform.averageElevation&&n(0);if((t||e-this._averageElevationLastSampledAt>500)&&!this._averageElevation.isEasing(e)){const t=this.transform.averageElevation;let i=this.transform.sampleAverageElevation(),a=!1;this.transform.elevation&&(a=this.transform.elevation.exaggeration()!==this._averageElevationExaggeration,this._averageElevationExaggeration=this.transform.elevation.exaggeration()),isNaN(i)?i=0:this._averageElevationLastSampledAt=e;const o=Math.abs(t-i);if(o>1){if(this._isInitialLoad||a)return this._averageElevation.jumpTo(i),n(i);this._averageElevation.easeTo(i,e,300)}else if(o>1e-4)return this._averageElevation.jumpTo(i),n(i)}return!!this._averageElevation.isEasing(e)&&n(this._averageElevation.getValue(e))}_authenticate(){e.getMapSessionAPI(this._getMapId(),this._requestManager._skuToken,this._requestManager._customAccessToken,t=>{if(t&&(t.message===e.AUTH_ERR_MSG||401===t.status)){const t=this.painter.context.gl;e.storeAuthState(t,!1),this._logoControl instanceof $a&&this._logoControl._updateLogo(),t&&t.clear(t.DEPTH_BUFFER_BIT|t.COLOR_BUFFER_BIT|t.STENCIL_BUFFER_BIT),this._silenceAuthErrors||this.fire(new e.ErrorEvent(new Error("A valid Mapbox access token is required to use Mapbox GL JS. To create an account or a new access token, visit https://account.mapbox.com/")))}}),e.postMapLoadEvent(this._getMapId(),this._requestManager._skuToken,this._requestManager._customAccessToken,()=>{})}_updateTerrain(){const e=this._isDragging();this.painter.updateTerrain(this.style,e)}_calculateSpeedIndex(){const e=this.painter.canvasCopy(),t=this.painter.getCanvasCopiesAndTimestamps();t.timeStamps.push(performance.now());const n=this.painter.context.gl,i=n.createFramebuffer();function a(e){n.framebufferTexture2D(n.FRAMEBUFFER,n.COLOR_ATTACHMENT0,n.TEXTURE_2D,e,0);const t=new Uint8Array(n.drawingBufferWidth*n.drawingBufferHeight*4);return n.readPixels(0,0,n.drawingBufferWidth,n.drawingBufferHeight,n.RGBA,n.UNSIGNED_BYTE,t),t}return n.bindFramebuffer(n.FRAMEBUFFER,i),this._canvasPixelComparison(a(e),t.canvasCopies.map(a),t.timeStamps)}_canvasPixelComparison(e,t,n){let i=n[1]-n[0];const a=e.length/4;for(let o=0;o<t.length;o++){const r=t[o];let s=0;for(let t=0;t<r.length;t+=4)r[t]===e[t]&&r[t+1]===e[t+1]&&r[t+2]===e[t+2]&&r[t+3]===e[t+3]&&(s+=1);i+=(n[o+2]-n[o+1])*(1-s/a)}return i}remove(){this._hash&&this._hash.remove();for(const e of this._controls)e.onRemove(this);this._controls=[],this._frame&&(this._frame.cancel(),this._frame=null),this._renderTaskQueue.clear(),this._domRenderTaskQueue.clear(),this.style&&this.style.destroy(),this.painter.destroy(),this.handlers&&this.handlers.destroy(),this.handlers=void 0,this.setStyle(null),void 0!==e.window&&(e.window.removeEventListener("resize",this._onWindowResize,!1),e.window.removeEventListener("orientationchange",this._onWindowResize,!1),e.window.removeEventListener("webkitfullscreenchange",this._onWindowResize,!1),e.window.removeEventListener("online",this._onWindowOnline,!1),e.window.removeEventListener("visibilitychange",this._onVisibilityChange,!1));const t=this.painter.context.gl.getExtension("WEBGL_lose_context");t&&t.loseContext(),this._canvas.removeEventListener("webglcontextlost",this._contextLost,!1),this._canvas.removeEventListener("webglcontextrestored",this._contextRestored,!1),this._canvasContainer.remove(),this._controlContainer.remove(),this._missingCSSCanary.remove(),this._canvas=void 0,this._canvasContainer=void 0,this._controlContainer=void 0,this._missingCSSCanary=void 0,this._container.classList.remove("mapboxgl-map"),this._container.removeEventListener("scroll",this._onMapScroll,!1),e.removeAuthState(this.painter.context.gl),this._removed=!0,this.fire(new e.Event("remove"))}triggerRepaint(){this._triggerFrame(!0)}_triggerFrame(t){this._renderNextFrame=this._renderNextFrame||t,this.style&&!this._frame&&(this._frame=e.exported.frame(e=>{const t=!!this._renderNextFrame;this._frame=null,this._renderNextFrame=null,t&&this._render(e)}))}_preloadTiles(t){const n=this.style?Object.values(this.style._sourceCaches):[];return e.asyncAll(n,(e,n)=>e._preloadTiles(t,n),()=>{this.triggerRepaint()}),this}_onWindowOnline(){this._update()}_onWindowResize(e){this._trackResize&&this.resize({originalEvent:e})._update()}_onVisibilityChange(){"hidden"===e.window.document.visibilityState&&this._visibilityHidden++}get showTileBoundaries(){return!!this._showTileBoundaries}set showTileBoundaries(e){this._showTileBoundaries!==e&&(this._showTileBoundaries=e,this._update())}get showTerrainWireframe(){return!!this._showTerrainWireframe}set showTerrainWireframe(e){this._showTerrainWireframe!==e&&(this._showTerrainWireframe=e,this._update())}get speedIndexTiming(){return!!this._speedIndexTiming}set speedIndexTiming(e){this._speedIndexTiming!==e&&(this._speedIndexTiming=e,this._update())}get showPadding(){return!!this._showPadding}set showPadding(e){this._showPadding!==e&&(this._showPadding=e,this._update())}get showCollisionBoxes(){return!!this._showCollisionBoxes}set showCollisionBoxes(e){this._showCollisionBoxes!==e&&(this._showCollisionBoxes=e,e?this.style._generateCollisionBoxes():this._update())}get showOverdrawInspector(){return!!this._showOverdrawInspector}set showOverdrawInspector(e){this._showOverdrawInspector!==e&&(this._showOverdrawInspector=e,this._update())}get repaint(){return!!this._repaint}set repaint(e){this._repaint!==e&&(this._repaint=e,this.triggerRepaint())}get vertices(){return!!this._vertices}set vertices(e){this._vertices=e,this._update()}get showTileAABBs(){return!!this._showTileAABBs}set showTileAABBs(e){this._showTileAABBs!==e&&(this._showTileAABBs=e,e&&this._update())}_setCacheLimits(t,n){e.setCacheLimits(t,n)}get version(){return e.version}},NavigationControl:class{constructor(t){this.options=e.extend({},co,t),this._container=o("div","mapboxgl-ctrl mapboxgl-ctrl-group"),this._container.addEventListener("contextmenu",e=>e.preventDefault()),this.options.showZoom&&(e.bindAll(["_setButtonTitle","_updateZoomButtons"],this),this._zoomInButton=this._createButton("mapboxgl-ctrl-zoom-in",e=>{this._map&&this._map.zoomIn({},{originalEvent:e})}),o("span","mapboxgl-ctrl-icon",this._zoomInButton).setAttribute("aria-hidden","true"),this._zoomOutButton=this._createButton("mapboxgl-ctrl-zoom-out",e=>{this._map&&this._map.zoomOut({},{originalEvent:e})}),o("span","mapboxgl-ctrl-icon",this._zoomOutButton).setAttribute("aria-hidden","true")),this.options.showCompass&&(e.bindAll(["_rotateCompassArrow"],this),this._compass=this._createButton("mapboxgl-ctrl-compass",e=>{const t=this._map;t&&(this.options.visualizePitch?t.resetNorthPitch({},{originalEvent:e}):t.resetNorth({},{originalEvent:e}))}),this._compassIcon=o("span","mapboxgl-ctrl-icon",this._compass),this._compassIcon.setAttribute("aria-hidden","true"))}_updateZoomButtons(){const e=this._map;if(!e)return;const t=e.getZoom(),n=t===e.getMaxZoom(),i=t===e.getMinZoom();this._zoomInButton.disabled=n,this._zoomOutButton.disabled=i,this._zoomInButton.setAttribute("aria-disabled",n.toString()),this._zoomOutButton.setAttribute("aria-disabled",i.toString())}_rotateCompassArrow(){const e=this._map;if(!e)return;const t=this.options.visualizePitch?`scale(${1/Math.pow(Math.cos(e.transform.pitch*(Math.PI/180)),.5)}) rotateX(${e.transform.pitch}deg) rotateZ(${e.transform.angle*(180/Math.PI)}deg)`:`rotate(${e.transform.angle*(180/Math.PI)}deg)`;e._requestDomTask(()=>{this._compassIcon&&(this._compassIcon.style.transform=t)})}onAdd(e){return this._map=e,this.options.showZoom&&(this._setButtonTitle(this._zoomInButton,"ZoomIn"),this._setButtonTitle(this._zoomOutButton,"ZoomOut"),e.on("zoom",this._updateZoomButtons),this._updateZoomButtons()),this.options.showCompass&&(this._setButtonTitle(this._compass,"ResetBearing"),this.options.visualizePitch&&e.on("pitch",this._rotateCompassArrow),e.on("rotate",this._rotateCompassArrow),this._rotateCompassArrow(),this._handler=new uo(e,this._compass,this.options.visualizePitch)),this._container}onRemove(){const e=this._map;e&&(this._container.remove(),this.options.showZoom&&e.off("zoom",this._updateZoomButtons),this.options.showCompass&&(this.options.visualizePitch&&e.off("pitch",this._rotateCompassArrow),e.off("rotate",this._rotateCompassArrow),this._handler&&this._handler.off(),this._handler=void 0),this._map=void 0)}_createButton(e,t){const n=o("button",e,this._container);return n.type="button",n.addEventListener("click",t),n}_setButtonTitle(e,t){if(!this._map)return;const n=this._map._getUIString("NavigationControl."+t);e.setAttribute("aria-label",n),e.firstElementChild&&e.firstElementChild.setAttribute("title",n)}},GeolocateControl:class extends e.Evented{constructor(t){super(),this.options=e.extend({geolocation:e.window.navigator.geolocation},po,t),e.bindAll(["_onSuccess","_onError","_onZoom","_finish","_setupUI","_updateCamera","_updateMarker","_updateMarkerRotation","_onDeviceOrientation"],this),this._updateMarkerRotationThrottled=$i(this._updateMarkerRotation,20),this._numberOfWatches=0}onAdd(e){return this._map=e,this._container=o("div","mapboxgl-ctrl mapboxgl-ctrl-group"),this._checkGeolocationSupport(this._setupUI),this._container}onRemove(){void 0!==this._geolocationWatchID&&(this.options.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0),this.options.showUserLocation&&this._userLocationDotMarker&&this._userLocationDotMarker.remove(),this.options.showAccuracyCircle&&this._accuracyCircleMarker&&this._accuracyCircleMarker.remove(),this._container.remove(),this._map.off("zoom",this._onZoom),this._map=void 0,this._numberOfWatches=0,this._noTimeout=!1}_checkGeolocationSupport(t){const n=(e=!!this.options.geolocation)=>{this._supportsGeolocation=e,t(e)};void 0!==this._supportsGeolocation?t(this._supportsGeolocation):void 0!==e.window.navigator.permissions?e.window.navigator.permissions.query({name:"geolocation"}).then(e=>n("denied"!==e.state)).catch(()=>n()):n()}_isOutOfMapMaxBounds(e){const t=this._map.getMaxBounds(),n=e.coords;return!!t&&(n.longitude<t.getWest()||n.longitude>t.getEast()||n.latitude<t.getSouth()||n.latitude>t.getNorth())}_setErrorState(){switch(this._watchState){case"WAITING_ACTIVE":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error");break;case"ACTIVE_LOCK":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting");break;case"BACKGROUND":this._watchState="BACKGROUND_ERROR",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting")}}_onSuccess(t){if(this._map){if(this._isOutOfMapMaxBounds(t))return this._setErrorState(),this.fire(new e.Event("outofmaxbounds",t)),this._updateMarker(),void this._finish();if(this.options.trackUserLocation)switch(this._lastKnownPosition=t,this._watchState){case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case"BACKGROUND":case"BACKGROUND_ERROR":this._watchState="BACKGROUND",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background")}this.options.showUserLocation&&"OFF"!==this._watchState&&this._updateMarker(t),this.options.trackUserLocation&&"ACTIVE_LOCK"!==this._watchState||this._updateCamera(t),this.options.showUserLocation&&this._dotElement.classList.remove("mapboxgl-user-location-dot-stale"),this.fire(new e.Event("geolocate",t)),this._finish()}}_updateCamera(t){const n=new e.LngLat(t.coords.longitude,t.coords.latitude),i=t.coords.accuracy,a=this._map.getBearing(),o=e.extend({bearing:a},this.options.fitBoundsOptions);this._map.fitBounds(n.toBounds(i),o,{geolocateSource:!0})}_updateMarker(t){if(t){const n=new e.LngLat(t.coords.longitude,t.coords.latitude);this._accuracyCircleMarker.setLngLat(n).addTo(this._map),this._userLocationDotMarker.setLngLat(n).addTo(this._map),this._accuracy=t.coords.accuracy,this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()}else this._userLocationDotMarker.remove(),this._accuracyCircleMarker.remove()}_updateCircleRadius(){const t=this._map.transform,n=e.mercatorZfromAltitude(1,t._center.lat)*t.worldSize,i=Math.ceil(2*this._accuracy*n);this._circleElement.style.width=i+"px",this._circleElement.style.height=i+"px"}_onZoom(){this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()}_updateMarkerRotation(){this._userLocationDotMarker&&"number"==typeof this._heading?(this._userLocationDotMarker.setRotation(this._heading),this._dotElement.classList.add("mapboxgl-user-location-show-heading")):(this._dotElement.classList.remove("mapboxgl-user-location-show-heading"),this._userLocationDotMarker.setRotation(0))}_onError(t){if(this._map){if(this.options.trackUserLocation)if(1===t.code){this._watchState="OFF",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.disabled=!0;const e=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.setAttribute("aria-label",e),this._geolocateButton.firstElementChild&&this._geolocateButton.firstElementChild.setAttribute("title",e),void 0!==this._geolocationWatchID&&this._clearWatch()}else{if(3===t.code&&this._noTimeout)return;this._setErrorState()}"OFF"!==this._watchState&&this.options.showUserLocation&&this._dotElement.classList.add("mapboxgl-user-location-dot-stale"),this.fire(new e.Event("error",t)),this._finish()}}_finish(){this._timeoutId&&clearTimeout(this._timeoutId),this._timeoutId=void 0}_setupUI(t){if(void 0!==this._map){if(this._container.addEventListener("contextmenu",e=>e.preventDefault()),this._geolocateButton=o("button","mapboxgl-ctrl-geolocate",this._container),o("span","mapboxgl-ctrl-icon",this._geolocateButton).setAttribute("aria-hidden","true"),this._geolocateButton.type="button",!1===t){e.warnOnce("Geolocation support is not available so the GeolocateControl will be disabled.");const t=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.disabled=!0,this._geolocateButton.setAttribute("aria-label",t),this._geolocateButton.firstElementChild&&this._geolocateButton.firstElementChild.setAttribute("title",t)}else{const e=this._map._getUIString("GeolocateControl.FindMyLocation");this._geolocateButton.setAttribute("aria-label",e),this._geolocateButton.firstElementChild&&this._geolocateButton.firstElementChild.setAttribute("title",e)}this.options.trackUserLocation&&(this._geolocateButton.setAttribute("aria-pressed","false"),this._watchState="OFF"),this.options.showUserLocation&&(this._dotElement=o("div","mapboxgl-user-location"),this._dotElement.appendChild(o("div","mapboxgl-user-location-dot")),this._dotElement.appendChild(o("div","mapboxgl-user-location-heading")),this._userLocationDotMarker=new no({element:this._dotElement,rotationAlignment:"map",pitchAlignment:"map"}),this._circleElement=o("div","mapboxgl-user-location-accuracy-circle"),this._accuracyCircleMarker=new no({element:this._circleElement,pitchAlignment:"map"}),this.options.trackUserLocation&&(this._watchState="OFF"),this._map.on("zoom",this._onZoom)),this._geolocateButton.addEventListener("click",this.trigger.bind(this)),this._setup=!0,this.options.trackUserLocation&&this._map.on("movestart",t=>{t.geolocateSource||"ACTIVE_LOCK"!==this._watchState||t.originalEvent&&"resize"===t.originalEvent.type||(this._watchState="BACKGROUND",this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this.fire(new e.Event("trackuserlocationend")))})}}_onDeviceOrientation(e){this._userLocationDotMarker&&(e.webkitCompassHeading?this._heading=e.webkitCompassHeading:!0===e.absolute&&(this._heading=-1*e.alpha),this._updateMarkerRotationThrottled())}trigger(){if(!this._setup)return e.warnOnce("Geolocate control triggered before added to a map"),!1;if(this.options.trackUserLocation){switch(this._watchState){case"OFF":this._watchState="WAITING_ACTIVE",this.fire(new e.Event("trackuserlocationstart"));break;case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":case"BACKGROUND_ERROR":this._numberOfWatches--,this._noTimeout=!1,this._watchState="OFF",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),this.fire(new e.Event("trackuserlocationend"));break;case"BACKGROUND":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._lastKnownPosition&&this._updateCamera(this._lastKnownPosition),this.fire(new e.Event("trackuserlocationstart"))}switch(this._watchState){case"WAITING_ACTIVE":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case"ACTIVE_LOCK":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case"ACTIVE_ERROR":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error");break;case"BACKGROUND":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background");break;case"BACKGROUND_ERROR":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background-error")}if("OFF"===this._watchState&&void 0!==this._geolocationWatchID)this._clearWatch();else if(void 0===this._geolocationWatchID){let e;this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","true"),this._numberOfWatches++,this._numberOfWatches>1?(e={maximumAge:6e5,timeout:0},this._noTimeout=!0):(e=this.options.positionOptions,this._noTimeout=!1),this._geolocationWatchID=this.options.geolocation.watchPosition(this._onSuccess,this._onError,e),this.options.showUserHeading&&this._addDeviceOrientationListener()}}else this.options.geolocation.getCurrentPosition(this._onSuccess,this._onError,this.options.positionOptions),this._timeoutId=setTimeout(this._finish,1e4);return!0}_addDeviceOrientationListener(){const t=()=>{e.window.addEventListener("ondeviceorientationabsolute"in e.window?"deviceorientationabsolute":"deviceorientation",this._onDeviceOrientation)};void 0!==e.window.DeviceMotionEvent&&"function"==typeof e.window.DeviceMotionEvent.requestPermission?DeviceOrientationEvent.requestPermission().then(e=>{"granted"===e&&t()}).catch(console.error):t()}_clearWatch(){this.options.geolocation.clearWatch(this._geolocationWatchID),e.window.removeEventListener("deviceorientation",this._onDeviceOrientation),e.window.removeEventListener("deviceorientationabsolute",this._onDeviceOrientation),this._geolocationWatchID=void 0,this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","false"),this.options.showUserLocation&&this._updateMarker(null)}},AttributionControl:Ka,ScaleControl:class{constructor(t){this.options=e.extend({},fo,t),this._isNumberFormatSupported=function(){try{return new Intl.NumberFormat("en",{style:"unit",unitDisplay:"short",unit:"meter"}),!0}catch(e){return!1}}(),e.bindAll(["_update","_setScale","setUnit"],this)}getDefaultPosition(){return"bottom-left"}_update(){const e=this.options.maxWidth||100,t=this._map,n=t._containerHeight/2,i=t._containerWidth/2-e/2,a=t.unproject([i,n]),o=t.unproject([i+e,n]),r=a.distanceTo(o);if("imperial"===this.options.unit){const t=3.2808*r;t>5280?this._setScale(e,t/5280,"mile"):this._setScale(e,t,"foot")}else"nautical"===this.options.unit?this._setScale(e,r/1852,"nautical-mile"):r>=1e3?this._setScale(e,r/1e3,"kilometer"):this._setScale(e,r,"meter")}_setScale(e,t,n){this._map._requestDomTask(()=>{const i=function(e){const t=Math.pow(10,(""+Math.floor(e)).length-1);let n=e/t;return n=n>=10?10:n>=5?5:n>=3?3:n>=2?2:n>=1?1:function(e){const t=Math.pow(10,Math.ceil(-Math.log(e)/Math.LN10));return Math.round(e*t)/t}(n),t*n}(t),a=i/t;this._container.innerHTML=this._isNumberFormatSupported&&"nautical-mile"!==n?new Intl.NumberFormat(this._language,{style:"unit",unitDisplay:"short",unit:n}).format(i):`${i}&nbsp;${mo[n]}`,this._container.style.width=e*a+"px"})}onAdd(e){return this._map=e,this._language=e.getLanguage(),this._container=o("div","mapboxgl-ctrl mapboxgl-ctrl-scale",e.getContainer()),this._container.dir="auto",this._map.on("move",this._update),this._update(),this._container}onRemove(){this._container.remove(),this._map.off("move",this._update),this._map=void 0}_setLanguage(e){this._language=e,this._update()}setUnit(e){this.options.unit=e,this._update()}},FullscreenControl:class{constructor(t){this._fullscreen=!1,t&&t.container&&(t.container instanceof e.window.HTMLElement?this._container=t.container:e.warnOnce("Full screen control 'container' must be a DOM element.")),e.bindAll(["_onClickFullscreen","_changeIcon"],this),"onfullscreenchange"in e.window.document?this._fullscreenchange="fullscreenchange":"onwebkitfullscreenchange"in e.window.document&&(this._fullscreenchange="webkitfullscreenchange")}onAdd(t){return this._map=t,this._container||(this._container=this._map.getContainer()),this._controlContainer=o("div","mapboxgl-ctrl mapboxgl-ctrl-group"),this._checkFullscreenSupport()?this._setupUI():(this._controlContainer.style.display="none",e.warnOnce("This device does not support fullscreen mode.")),this._controlContainer}onRemove(){this._controlContainer.remove(),this._map=null,e.window.document.removeEventListener(this._fullscreenchange,this._changeIcon)}_checkFullscreenSupport(){return!(!e.window.document.fullscreenEnabled&&!e.window.document.webkitFullscreenEnabled)}_setupUI(){const t=this._fullscreenButton=o("button","mapboxgl-ctrl-fullscreen",this._controlContainer);o("span","mapboxgl-ctrl-icon",t).setAttribute("aria-hidden","true"),t.type="button",this._updateTitle(),this._fullscreenButton.addEventListener("click",this._onClickFullscreen),e.window.document.addEventListener(this._fullscreenchange,this._changeIcon)}_updateTitle(){const e=this._getTitle();this._fullscreenButton.setAttribute("aria-label",e),this._fullscreenButton.firstElementChild&&this._fullscreenButton.firstElementChild.setAttribute("title",e)}_getTitle(){return this._map._getUIString(this._isFullscreen()?"FullscreenControl.Exit":"FullscreenControl.Enter")}_isFullscreen(){return this._fullscreen}_changeIcon(){(e.window.document.fullscreenElement||e.window.document.webkitFullscreenElement)===this._container!==this._fullscreen&&(this._fullscreen=!this._fullscreen,this._fullscreenButton.classList.toggle("mapboxgl-ctrl-shrink"),this._fullscreenButton.classList.toggle("mapboxgl-ctrl-fullscreen"),this._updateTitle())}_onClickFullscreen(){this._isFullscreen()?e.window.document.exitFullscreen?e.window.document.exitFullscreen():e.window.document.webkitCancelFullScreen&&e.window.document.webkitCancelFullScreen():this._container.requestFullscreen?this._container.requestFullscreen():this._container.webkitRequestFullscreen&&this._container.webkitRequestFullscreen()}},Popup:class extends e.Evented{constructor(t){super(),this.options=e.extend(Object.create(io),t),e.bindAll(["_update","_onClose","remove","_onMouseEvent"],this),this._classList=new Set(t&&t.className?t.className.trim().split(/\s+/):[])}addTo(t){return this._map&&this.remove(),this._map=t,this.options.closeOnClick&&t.on("preclick",this._onClose),this.options.closeOnMove&&t.on("move",this._onClose),t.on("remove",this.remove),this._update(),t._addPopup(this),this._focusFirstElement(),this._trackPointer?(t.on("mousemove",this._onMouseEvent),t.on("mouseup",this._onMouseEvent),t._canvasContainer.classList.add("mapboxgl-track-pointer")):t.on("move",this._update),this.fire(new e.Event("open")),this}isOpen(){return!!this._map}remove(){this._content&&this._content.remove(),this._container&&(this._container.remove(),this._container=void 0);const t=this._map;return t&&(t.off("move",this._update),t.off("move",this._onClose),t.off("preclick",this._onClose),t.off("click",this._onClose),t.off("remove",this.remove),t.off("mousemove",this._onMouseEvent),t.off("mouseup",this._onMouseEvent),t.off("drag",this._onMouseEvent),t._canvasContainer&&t._canvasContainer.classList.remove("mapboxgl-track-pointer"),t._removePopup(this),this._map=void 0),this.fire(new e.Event("close")),this}getLngLat(){return this._lngLat}setLngLat(t){this._lngLat=e.LngLat.convert(t),this._pos=null,this._trackPointer=!1,this._update();const n=this._map;return n&&(n.on("move",this._update),n.off("mousemove",this._onMouseEvent),n._canvasContainer.classList.remove("mapboxgl-track-pointer")),this}trackPointer(){this._trackPointer=!0,this._pos=null,this._update();const e=this._map;return e&&(e.off("move",this._update),e.on("mousemove",this._onMouseEvent),e.on("drag",this._onMouseEvent),e._canvasContainer.classList.add("mapboxgl-track-pointer")),this}getElement(){return this._container}setText(t){return this.setDOMContent(e.window.document.createTextNode(t))}setHTML(t){const n=e.window.document.createDocumentFragment(),i=e.window.document.createElement("body");let a;for(i.innerHTML=t;a=i.firstChild,a;)n.appendChild(a);return this.setDOMContent(n)}getMaxWidth(){return this._container&&this._container.style.maxWidth}setMaxWidth(e){return this.options.maxWidth=e,this._update(),this}setDOMContent(e){let t=this._content;if(t)for(;t.hasChildNodes();)t.firstChild&&t.removeChild(t.firstChild);else t=this._content=o("div","mapboxgl-popup-content",this._container||void 0);if(t.appendChild(e),this.options.closeButton){const e=this._closeButton=o("button","mapboxgl-popup-close-button",t);e.type="button",e.setAttribute("aria-label","Close popup"),e.setAttribute("aria-hidden","true"),e.innerHTML="&#215;",e.addEventListener("click",this._onClose)}return this._update(),this._focusFirstElement(),this}addClassName(e){return this._classList.add(e),this._updateClassList(),this}removeClassName(e){return this._classList.delete(e),this._updateClassList(),this}setOffset(e){return this.options.offset=e,this._update(),this}toggleClassName(e){let t;return this._classList.delete(e)?t=!1:(this._classList.add(e),t=!0),this._updateClassList(),t}_onMouseEvent(e){this._update(e.point)}_getAnchor(e){if(this.options.anchor)return this.options.anchor;const t=this._map,n=this._container,i=this._pos;if(!t||!n||!i)return"bottom";const a=n.offsetWidth,o=n.offsetHeight,r=i.x<a/2,s=i.x>t.transform.width-a/2;if(i.y+e<o)return r?"top-left":s?"top-right":"top";if(i.y>t.transform.height-o){if(r)return"bottom-left";if(s)return"bottom-right"}return r?"left":s?"right":"bottom"}_updateClassList(){const e=this._container;if(!e)return;const t=[...this._classList];t.push("mapboxgl-popup"),this._anchor&&t.push("mapboxgl-popup-anchor-"+this._anchor),this._trackPointer&&t.push("mapboxgl-popup-track-pointer"),e.className=t.join(" ")}_update(t){const n=this._map,i=this._content;if(!n||!this._lngLat&&!this._trackPointer||!i)return;let a=this._container;if(a||(a=this._container=o("div","mapboxgl-popup",n.getContainer()),this._tip=o("div","mapboxgl-popup-tip",a),a.appendChild(i)),this.options.maxWidth&&a.style.maxWidth!==this.options.maxWidth&&(a.style.maxWidth=this.options.maxWidth),n.transform.renderWorldCopies&&!this._trackPointer&&(this._lngLat=eo(this._lngLat,this._pos,n.transform)),!this._trackPointer||t){const e=this._pos=this._trackPointer&&t?t:n.project(this._lngLat),i=oo(this.options.offset),a=this._anchor=this._getAnchor(i.y),o=oo(this.options.offset,a),r=e.add(o).round();n._requestDomTask(()=>{this._container&&a&&(this._container.style.transform=`${to[a]} translate(${r.x}px,${r.y}px)`)})}if(!this._marker&&n._showingGlobe()){const t=e.isLngLatBehindGlobe(n.transform,this._lngLat)?0:1;this._setOpacity(t)}this._updateClassList()}_focusFirstElement(){if(!this.options.focusAfterOpen||!this._container)return;const e=this._container.querySelector(ao);e&&e.focus()}_onClose(){this.remove()}_setOpacity(e){this._container&&(this._container.style.opacity=""+e),this._content&&(this._content.style.pointerEvents=e?"auto":"none")}},Marker:no,Style:Qt,LngLat:e.LngLat,LngLatBounds:e.LngLatBounds,Point:e.Point,MercatorCoordinate:e.MercatorCoordinate,FreeCameraOptions:Wi,Evented:e.Evented,config:e.config,prewarm:function(){ze().acquire(De)},clearPrewarmedResources:function(){const e=Be;e&&(e.isPreloaded()&&1===e.numActive()?(e.release(De),Be=null):console.warn("Could not clear WebWorkers since there are active Map instances that still reference it. The pre-warmed WebWorker pool can only be cleared when all map instances have been removed with map.remove()"))},get accessToken(){return e.config.ACCESS_TOKEN},set accessToken(t){e.config.ACCESS_TOKEN=t},get baseApiUrl(){return e.config.API_URL},set baseApiUrl(t){e.config.API_URL=t},get workerCount(){return Re.workerCount},set workerCount(e){Re.workerCount=e},get maxParallelImageRequests(){return e.config.MAX_PARALLEL_IMAGE_REQUESTS},set maxParallelImageRequests(t){e.config.MAX_PARALLEL_IMAGE_REQUESTS=t},clearStorage(t){e.clearTileCache(t)},workerUrl:"",workerClass:null,setNow:e.exported.setNow,restoreNow:e.exported.restoreNow};return ho})),i}()}).call(this,n("E0jC"))},d8k4:function(e,t,n){"use strict";var i=n("VkAN"),a=n.n(i),o=n("gcR/"),r=n.n(o),s=n("q1tI"),l=n.n(s),c=n("eFc+"),u=n.n(c),d=n("ZKN5"),p=n("lSNA"),f=n.n(p),m=n("QS0n"),h=n("Jqp9"),g=n("cr+I"),y=n.n(g),v=n("mczz"),b=n("lwsE"),_=n.n(b),w=n("W8MJ"),x=n.n(w),k=n("a1gu"),O=n.n(k),T=n("Nsbk"),C=n.n(T),E=n("7W2i"),S=n.n(E),P=n("hKI/"),I=n.n(P),M="Polyfill may not function in the presence of the `sandbox` attribute. Consider using the `force` option.",A=/\ballow-same-origin\b/,j=function(){return null};j=function(e){console.error("[srcdoc-polyfill] ".concat(e))};var N=function(e,t,n){if(e&&e.getAttribute&&(t?e.setAttribute("srcdoc",t):t=e.getAttribute("srcdoc"),t)){!function(e,t){var n=e.getAttribute("sandbox");"string"!=typeof n||A.test(n)||(t&&t.force?e.removeAttribute("sandbox"):t&&!1===t.force||(j(M),e.setAttribute("data-srcdoc-polyfill",M)))}(e,n);var i='javascript: window.frameElement.getAttribute("srcdoc");';e.contentWindow&&(e.contentWindow.location=i),e.setAttribute("src",i)}},L=function(){if(!!!("srcdoc"in document.createElement("iframe")))for(var e=document.getElementsByTagName("iframe"),t=e.length;t>0;t-=1)N(e[t])},D=Object(h.css)("border:0;overflow:hidden;width:1px;min-width:100%;");function R(e,t,n){return t=C()(t),O()(e,function(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return function(){return!!e}()}()?Reflect.construct(t,n||[],C()(e).constructor):t.apply(e,n))}var B=function(e){function t(){var e;_()(this,t);for(var n=arguments.length,i=new Array(n),a=0;a<n;a++)i[a]=arguments[a];return(e=R(this,t,[].concat(i))).observer=null,e.frameLoaded=!1,e.state={frameHeight:null},e.onFrameLoaded=function(t){if(t){!function n(){try{var i=t.contentWindow;if(!i)return void setTimeout(n,17);var a=t.contentDocument;if(!a||!a.body)return void setTimeout(n,17);if(""===a.body.innerHTML)return void setTimeout(n,17);var o=a.documentElement,r=function(){return o.offsetHeight+o.offsetTop},s=i.MutationObserver||i.WebKitMutationObserver||i.MozMutationObserver,l=function(){e.setState({frameHeight:r()})};if(e.props.onLoad(t),e.frameLoaded=!0,e.observer=new s(l),e.observer.observe(o,{attributes:!0,childList:!0,characterData:!0,subtree:!0}),!window.requestAnimationFrame)return;var c=I()((function(){e.state.frameHeight!==r()&&l()}),17);window.requestAnimationFrame((function t(){e.frameLoaded&&c(),window.requestAnimationFrame(t)}))}catch(e){console.warn("NYT Iframe error:",e),setTimeout(n,500)}}()}},e}return S()(t,e),x()(t,[{key:"componentDidMount",value:function(){this.props.srcDoc&&L()}},{key:"componentWillUnmount",value:function(){this.observer&&this.observer.disconnect(),this.frameLoaded=!1}},{key:"render",value:function(){var e=this.props,t=e.src,n=e.srcDoc,i=e.id,a=e.className,o=this.state.frameHeight,r={src:t};n&&(r={srcDoc:n,"data-src":t});var s=Object.assign(r,{className:Object(h.cx)(D,a),frameBorder:0,scrolling:"no",width:"100%",id:i,ref:this.onFrameLoaded},"number"==typeof o?{height:o}:{});return l.a.createElement("iframe",s)}}])}(s.Component);B.displayName="Iframe",B.defaultProps={src:null,srcDoc:null,id:null,className:void 0,onLoad:function(){}};var z,F=B,U=n("wXC7"),H=n.n(U),W=Object(h.css)("display:block;margin:0 auto;line-height:0;"),q=Object(h.css)("border-top:1px solid ",H.a.color.gray60,";border-bottom:1px solid ",H.a.color.gray60,";"),V=Object(h.css)("width:",H.a.breakpoint.mobileFullWidth,";max-width:",H.a.breakpoint.textBodyWidth,"px;margin-left:",H.a.grid.pageMargin,"px;margin-right:",H.a.grid.pageMargin,"px;@media (max-width:340px){width:calc(100% - 20px);}",H.a.breakpoint.small,"{margin-left:auto;margin-right:auto;}",H.a.breakpoint.mediumLarge,"{width:",H.a.breakpoint.textBodyWidth,"px;margin-left:0;}",H.a.breakpoint.extraLarge,"{width:",H.a.breakpoint.textBodyWidthExtralarge,"px;max-width:",H.a.breakpoint.textBodyWidthExtralarge,"px;}"),G=(new Date).getFullYear();function Y(e){var t,n=e.asset,i=e.styles,a=e.inStory,o=Object(h.useTheme)(),l=Object(m.useLocation)();if(Object(s.useEffect)((function(){window.location.hostname.match(/\.nytimes\.com/)&&(document.domain="nytimes.com")}),[]),!n.sourceId)return null;var c="",u="/interactive/".concat(G,"/uri/").concat(n.uri.split("nyt://")[1]),d="https://www.nytimes.com",p={},g=Object(v.d)(l,"GQL_HOST_SERVER"),b=Object(v.d)(l,"GQL_HOST_CLIENT"),_=Object(v.d)(l,"GQL_HOST");if("test"===vi.env.ENVIRONMENT&&(d="https://www.stg.nytimes.com"),("local"===vi.env.ENVIRONMENT||"dev"===vi.env.ENVIRONMENT||/-sbx$/.test(vi.env.ENVIRONMENT))&&(d="",g&&""!==g&&(p.GQL_HOST_SERVER=g),b&&""!==b&&(p.GQL_HOST_CLIENT=b),_&&""!==_&&(p.GQL_HOST=_)),function(e){var t=y.a.parse(e.search);return!(!t||void 0===t.scooppreview)||!!window.location.search.match(/scooppreview/)}(l)){switch(c="/resources/app/url/proxy/html?url=",vi.env.ENVIRONMENT){case"preview-development":d="http://alpha-preview.dev.nytimes.com";break;case"preview-staging":d="http://alpha-preview.stg.nytimes.com";break;default:d="http://alpha-preview.nytimes.com"}d=encodeURIComponent(d),u=encodeURIComponent(u),p.contentUri=encodeURIComponent(n.uri)}var w="?".concat(y.a.stringify(p)),x=n.displayProperties,k=(void 0===x?{}:x).maxWidth||0,O=n.headline&&!(n.displayProperties&&n.displayProperties.displayForPromotionOnly),T=a&&O&&!1,C={maxWidth:"100%",margin:"0 auto"},E={maxWidth:k};return r()("div",{style:C,className:Object(h.cx)(f()({},V,"medium"===(null===(t=o.tone)||void 0===t?void 0:t.toLowerCase())))},void 0,r()("div",{"data-id":n.sourceId,"data-slug":n.slug,className:Object(h.cx)(W,f()({},q,T),i),style:E},void 0,r()(F,{src:"".concat(c).concat(d).concat(u).concat(w)})))}Y.displayName="EmbeddedIframe",Y.defaultProps={styles:"",inStory:!1},Y.fragments={media:u()(z||(z=a()(["\n    fragment EmbeddedIframe_media on CreativeWork {\n      headline {\n        default\n      }\n      displayProperties {\n        displayOverrides\n        displayForPromotionOnly\n        maxWidth: maximumWidth\n      }\n      ... on Interactive {\n        id\n        slug\n      }\n      ... on EmbeddedInteractive {\n        id\n        slug\n      }\n      ... on Published {\n        sourceId\n        uri\n      }\n    }\n  "])))};var X,Z=Y,J=n("RKHt"),K=n.n(J),$=n("5g7D"),Q=n.n($),ee=n("SYzA"),te=Object(h.css)("margin:",H.a.font.size(37)," auto;width:calc(100% - 20px);@media (min-width:340px) and (max-width:630px){width:calc(100% - 40px);}"),ne=te,ie=Object(h.css)(te," max-width:",H.a.breakpoint.textBodyWidth,"px;"),ae=Object(h.css)(te," max-width:945px;",H.a.breakpoint.extraLarge,"{max-width:",H.a.breakpoint.mediaMaxWidth,"px;}"),oe=Object(h.css)("margin-top:0;position:relative;z-index:901;"),re=Object(h.css)("width:100%;@media (min-width:340px) and (max-width:630px){width:100%;}",H.a.breakpoint.small,"{width:calc(100% - 40px);#live-chat-feed &{width:100%;}}"),se={SMALL:ie,MEDIUM:ie,LARGE:ae,FULL:ne};function le(e){var t,n,i,a=e.media,o=e.locksmith,l=e.blockSize,c=e.children,u=e.inStory,d=e.isAboveH1,p=e.embeddedClass,m=e.manageScripts,g=e.enableInteractiveBridge,y=Object(ee.a)();Object(s.useEffect)((function(){if(null!=o&&o.lock){var e=a.slug;o.lock(e)}}),[]);var v,b=u?se[l]||ie:"",_=null===(t=a.displayProperties)||void 0===t?void 0:t.maxWidth;return r()(K.a,{interactive:a,className:Object(h.cx)(b,p,f()(f()(f()(f()({},(v=_,Object(h.css)("max-width:",v,"px;",H.a.breakpoint.extraLarge,"{max-width:",v,"px;}")),_),re,/grid|carousel/.test(null==a||null===(n=a.headline)||void 0===n?void 0:n.default)),oe,d),Q()(null==a||null===(i=a.displayProperties)||void 0===i?void 0:i.displayOverrides),y)),size:l,manageScripts:m,enableInteractiveBridge:g},void 0,c)}le.displayName="EmbeddedInline",le.defaultProps={blockSize:void 0,embeddedClass:void 0,inStory:!1,isAboveH1:!1,children:null,manageScripts:!1,locksmith:void 0,enableInteractiveBridge:!0},le.fragments={media:u()(X||(X=a()(["\n    fragment EmbeddedInline_media on CreativeWork {\n      headline {\n        default\n      }\n      advertisingProperties {\n        sensitivity\n      }\n      displayProperties {\n        displayForPromotionOnly\n        displayOverrides\n        maxWidth: maximumWidth\n        minWidth: minimumWidth\n      }\n      bylines {\n        prefix\n        creators {\n          ... on TimesTag {\n            displayName\n          }\n        }\n      }\n      ... on Published {\n        sourceId\n      }\n      ... on InteractiveWork {\n        credit\n        leadin\n        note\n        dataSource\n        html\n      }\n      ... on Interactive {\n        id\n        slug\n      }\n      ... on EmbeddedInteractive {\n        id\n        slug\n      }\n    }\n  "])))};var ce,ue=le,de=/^<iframe[^>]+>\s*<\/iframe>\s*$/;function pe(e){var t,n,i=e.media,a=e.styles,o=e.inStory,s=e.isAboveH1,l=e.blockSize,c=e.embeddedClass,u=e.manageScripts,d=e.locksmith,p=e.enableInteractiveBridge;if(!i||!i.html)return null;if(0===(null==i||null===(t=i.slug)||void 0===t?void 0:t.toLowerCase().indexOf("newsletter-signup-")))return null;if(de.test(i.html)){return r()("div",{className:a,style:{marginLeft:"auto",marginRight:"auto"},dangerouslySetInnerHTML:{__html:i.html}})}return i.compatibility&&"nyt5"!==i.compatibility.toLowerCase()?"inline"===(null===(n=i.compatibility)||void 0===n?void 0:n.toLowerCase())?r()(ue,{embeddedClass:c,media:i,blockSize:l,inStory:o,isAboveH1:s,manageScripts:u,locksmith:d,enableInteractiveBridge:p}):r()(Z,{styles:a,asset:i,inStory:o,blockSize:l}):r()(Z,{asset:i,styles:a,inStory:o,blockSize:l})}pe.displayName="EmbeddedInteractive",pe.defaultProps={styles:void 0,blockSize:void 0,embeddedClass:void 0,inStory:!1,isAboveH1:!1,manageScripts:!1,locksmith:void 0,enableInteractiveBridge:!0},pe.fragments={media:u()(ce||(ce=a()(["\n    fragment EmbeddedInteractive_media on EmbeddedInteractive {\n      id\n      appName\n      storyFormat\n      slug\n      html\n      compatibility\n      ...EmbeddedInline_media\n      ...EmbeddedIframe_media\n    }\n    ","\n    ","\n  "])),ue.fragments.media,Z.fragments.media)};t.a=Object(d.a)(pe)},d9qb:function(e,t,n){"use strict";var i=n("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=i(n("cDf5"));t.default=function(e,t){return e===t||"object"===(0,a.default)(e)&&null!==e&&"object"===(0,a.default)(t)&&null!==t&&Object.keys(e).every((function(n){return e[n]===t[n]}))}},dE6V:function(e,t,n){"use strict";var i=n("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=n("Jqp9"),o=n("3sMT"),r=(0,i(n("WThh")).default)(["small","medium","mediumLarge"]),s=(0,a.themeFn)("treatment",{none:(0,a.css)(),atHome:function(e){return(0,a.css)("border:0;border-top:1px solid ",o.color.stroke.tertiary,";",r(e,{margin:["30px 20px","30px 20px","30px auto"]}))}}),l=(0,a.styled)("hr",{target:"e1mu4ftr0"})("border:0;border-top:1px solid ",o.color.stroke.quaternary,";margin:30px auto;",s,";");t.default=l},dKsL:function(e,t,n){"use strict";var i=n("TqRt"),a=n("cDf5");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=i(n("lSNA")),r=(i(n("17x9")),i(n("q1tI"))),s=n("Jqp9"),l=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=a(e)&&"function"!=typeof e)return{default:e};var n=u(t);if(n&&n.has(e))return n.get(e);var i={__proto__:null},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var r in e)if("default"!==r&&{}.hasOwnProperty.call(e,r)){var s=o?Object.getOwnPropertyDescriptor(e,r):null;s&&(s.get||s.set)?Object.defineProperty(i,r,s):i[r]=e[r]}return i.default=e,n&&n.set(e,i),i}(n("eDf7")),c=n("D5MC");function u(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(u=function(e){return e?n:t})(e)}var d=function(e){var t=e.status;if(!t)return null;var n=c.PrimaryAssetStatusMap[t];return n?r.default.createElement("span",{className:(0,s.cx)(l.labelContainerClass,(0,o.default)({},l.labelEmphasisClass,n===c.PrimaryAssetStatusMap.LIVE)),"data-testid":"menu-link-label"},n):null};d.displayName="MenuLinkLabel",d.defaultProps={status:void 0};t.default=d},"dQ+W":function(e,t,n){"use strict";var i=n("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.twitterIconClass=t.mailIconClass=t.fbIconClass=void 0;var a=n("Jqp9"),o=i(n("wXC7")),r=(0,a.css)("border-radius:100%;padding:6px;width:18px;height:18px;display:block;");t.fbIconClass=(0,a.css)(r,";background-color:","#3B5998",";"),t.twitterIconClass=(0,a.css)(r,";background-color:","#1DA1F2",";"),t.mailIconClass=(0,a.css)(r,";background-color:",o.default.color.gray27,";")},dU4i:function(e,t,n){"use strict";var i=n("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"canStorylineComposeLatestUpdates",{enumerable:!0,get:function(){return m.canStorylineComposeLatestUpdates}}),t.default=void 0;var a=i(n("lSNA")),o=i(n("lwsE")),r=i(n("W8MJ")),s=i(n("a1gu")),l=i(n("Nsbk")),c=i(n("7W2i")),u=i(n("q1tI")),d=(i(n("17x9")),i(n("aY2f"))),p=n("mH4u"),f=i(n("kr/V")),m=(n("5YwL"),n("cCFw")),h=n("Wtq3");function g(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function y(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?g(Object(n),!0).forEach((function(t){(0,a.default)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):g(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function v(e,t,n){return t=(0,l.default)(t),(0,s.default)(e,function(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return function(){return!!e}()}()?Reflect.construct(t,n||[],(0,l.default)(e).constructor):t.apply(e,n))}var b=function(e){function t(e){var n;(0,o.default)(this,t),(n=v(this,t,[e])).state={displayData:{}},n.hasBeenSeen=!1,n.hasTrackedMessagingView=!1,n.wrapperRef=u.default.createRef(),n.trackImpression=n.trackImpression.bind(n);var i=e.storyline,a=e.parentUri;return n.state.displayData=(0,m.mapDataToProps)({storyline:i,parentUri:a}),n}return(0,c.default)(t,e),(0,r.default)(t,[{key:"componentDidMount",value:function(){var e,t,n;this.wrapperRef.current&&(this.observer=new IntersectionObserver(this.trackImpression,{threshold:.5}),this.observer.observe(this.wrapperRef.current)),this.annotateUrls();var i={componentName:"LatestUpdates",componentQuestion:"Is this helpful?",storylineName:null===(e=this.state)||void 0===e||null===(t=e.displayData)||void 0===t||null===(n=t.storylineDisplayName)||void 0===n?void 0:n.toLowerCase().replace(/[^a-zA-Z0-9]+(.)/g,(function(e,t){return t.toUpperCase()})),id:"storyline-survey-latest-updates"},a=window.location.href;window.parent.postMessage(i,a)}},{key:"componentDidUpdate",value:function(e){e.trackLink!==this.props.trackLink&&this.annotateUrls()}},{key:"componentWillUnmount",value:function(){this.observer&&this.observer.disconnect()}},{key:"annotateUrls",value:function(){var e=this.props.trackLink,t=this.state.displayData;if(!t||!e)return null;var n={},i=0;return null!=t&&t.storylineUrl&&(n.storylineUrl=e(t.storylineUrl,{index:i}),i+=1),null!=t&&t.url&&(n.url=e(null==t?void 0:t.url,{index:i}),i+=1),n.items=null==t?void 0:t.items.map((function(t){return y(y({},t),{},{url:e(null==t?void 0:t.url,{index:i})})})),this.setState({displayData:y(y({},t),n)})}},{key:"trackImpression",value:function(e){var t;if(!this.hasBeenSeen&&null!=e&&null!==(t=e[0])&&void 0!==t&&t.isIntersecting){this.hasBeenSeen=!0;var n=this.props.trackEvent;if(n){var i=this.state.displayData;i&&null!=i&&i.storylineUrl&&n()}}}},{key:"render",value:function(){var e,t,n,i;if(!(0,m.canStorylineComposeLatestUpdates)(this.props))return null;var a=this.props,o=a.renderTimestamp,r=a.children,s=a.ctaText,l=a.liveAlertTracking,c=a.trackLinkInteraction,g=this.state.displayData,y=l.trackImpression,v=l.onMessagingSubscribe,b=l.onMessagingUnSubscribe,_=g.displayName,w=g.url,x=g.lastMajorModification,k=g.items,O=g.unstructuredData,T=g.isActive,C=g.liveAssetUri,E=(0,p.getTimeFormat)(x),S=E.useElapsedTime,P=E.timestampFormatter,I=null==O||null===(e=O.messagingConfig)||void 0===e||null===(t=e.push)||void 0===t?void 0:t.segment,M=null==O?void 0:O.topicLabel,A=!(null!=O&&null!==(n=O.messagingConfig)&&void 0!==n&&null!==(i=n.push)&&void 0!==i&&i.enabled);return u.default.createElement("div",{role:"complementary","aria-labelledby":"storyline-latest-updates",className:h.containerClass,ref:this.wrapperRef},u.default.createElement("div",{className:h.innerClass},u.default.createElement("h2",{id:"storyline-latest-updates",className:h.headingStyleClass},u.default.createElement("a",{href:w,onClick:function(e){return null==c?void 0:c(e,w,{item:{url:w,uri:C},eventData:{type:"url-click",trigger:"item",url:w}})}},_)),u.default.createElement("div",{className:h.lastModClass},o?o(x):u.default.createElement(d.default,{showAbsoluteTime:!1,updatedText:!0,iso:x,formatter:S?P:"abbreviated-date"})),u.default.createElement("ul",{className:h.listClass},k.map((function(e,t){return u.default.createElement("li",{key:t.toString(),className:h.bulletStyleClass},u.default.createElement("a",{href:e.url,onClick:function(t){return null==c?void 0:c(t,e.url,{item:{url:e.url,uri:e.uri},eventData:{type:"url-click",trigger:"item",url:e.url}})}},e.text))}))),A&&T&&u.default.createElement("div",{className:h.hideOnWebClass},u.default.createElement(f.default,{segment:I,kicker:M,onView:y,onSubscribe:v,onUnsubscribe:b,ctaText:s})),u.default.createElement("div",{className:"styln-survey-component",id:"storyline-survey-latest-updates"})),r)}}])}(u.default.Component);b.displayName="StorylineLatestUpdates",b.defaultProps={storyline:null,parentUri:null,renderTimestamp:null,trackEvent:null,trackLink:null,children:null,ctaText:null,trackLinkInteraction:function(){},liveAlertTracking:{trackImpression:function(){},onMessagingSubscribe:function(){},onMessagingUnSubscribe:function(){}}};t.default=b},dbFP:function(e,t,n){"use strict";t.a="/vi-assets/static-assets/wordle-8d092f448c0acd0766b957aa068ab641.png"},dfdT:function(e,t,n){"use strict";var i=this&&this.__createBinding||(Object.create?function(e,t,n,i){void 0===i&&(i=n);var a=Object.getOwnPropertyDescriptor(t,n);a&&!("get"in a?!t.__esModule:a.writable||a.configurable)||(a={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,i,a)}:function(e,t,n,i){void 0===i&&(i=n),e[i]=t[n]}),a=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&i(t,e,n);return a(t,e),t},r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var s=o(n("q1tI")),l=n("X6oL"),c=r(n("5UIh")),u=o(n("qOgO")),d=n("syiw"),p=n("HDG5"),f=n("djNW"),m=n("FY2l"),h=n("6gWn");t.default=function(e){var t,n,i,a,o=e.unit,r=(0,s.useState)(!1),g=r[0],y=r[1],v=(0,d.useMessageSelection)({config:{name:"dock"}}),b=(0,p.useUserState)(),_=(0,l.useTracking)(),w="/"===(0,m.getPathName)()?"homepage":"article",x=s.default.createElement("div",{className:u.mainText},"Enjoy 25% off at The New York Times Store for a limited time."),k=function(e,t){_.trackEvent({event:"moduleInteraction",eventData:{pagetype:w,trigger:"module",type:"click"},module:{name:e,label:"MWD_NYT_STORE_DISCOUNT_PROMO_2311",element:{name:f.Action.Store,url:t}}})};if(v.loading)return null;if(!g){var O=null===(n=null===(t=null==v?void 0:v.response)||void 0===t?void 0:t.userstate())||void 0===n?void 0:n.messageSelectionMessageCaps,T=null;if(O)if((E=O).forEach((function(e){var t,n;"dock"===(null==e?void 0:e.unit)&&(null==e?void 0:e.campaign)===(null===(t=null==v?void 0:v.response)||void 0===t?void 0:t.campaign())&&(null==e?void 0:e.audience)===(null===(n=null==v?void 0:v.response)||void 0===n?void 0:n.audience())&&(T=e)})),null!==T){var C=T;C.viewCount+=1,C.lastSeenOn=(new Date).toISOString(),b.update({messageSelectionMessageCaps:E})}if(!T){var E=[];O&&(E=O),E.push({unit:"dock",campaign:null===(i=null==v?void 0:v.response)||void 0===i?void 0:i.campaign(),audience:null===(a=null==v?void 0:v.response)||void 0===a?void 0:a.audience(),lastSeenOn:(new Date).toISOString(),viewCount:1,dismissed:!1}),b.update({messageSelectionMessageCaps:E})}y(!0)}return s.default.createElement(c.default,{testId:"onsite-messaging-unit-".concat(null===h.config||void 0===h.config?void 0:h.config.name),"data-campaign":null==o?void 0:o.campaign,"data-audience":null==o?void 0:o.audience,unit:o,contentID:"MWD_NYT_STORE_DISCOUNT_PROMO_2311",dockID:"standard",header:x,headingClassName:u.headerContainer,onDockHeadingClick:function(){var e,t="".concat(null===(e=null==o?void 0:o.content)||void 0===e?void 0:e.url);k("mwdNytStoreDiscountPromo2311",t),k("dock",t),window.open(t,"_blank","noopener,noreferrer")},isDockDismissible:!0,isDockExpandable:!1,minimized:!0})}},dlfA:function(e,t,n){"use strict";var i=n("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.listItemSelector=t.default=void 0;var a=n("Jqp9"),o=i(n("wXC7")),r=(0,a.themeFn)("treatment",{none:(0,a.css)("margin-bottom:",o.default.font.size(16),";"),sponsored:(0,a.css)()}),s=(0,a.css)("list-style:disc;padding-left:0;margin-left:0.875rem;"),l=(t.listItemSelector=function(e){return(0,a.css)("li{",r(e),";",s,";}")},(0,a.styled)("li",{target:"eoqvrfo0"})(r,";",s,";"));t.default=l},dmwf:function(e,t,n){"use strict";var i=n("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.heading2Selector=t.default=void 0;var a=n("Jqp9"),o=n("3sMT"),r=i(n("wXC7")),s=n("6l8D"),l=(0,i(n("WThh")).default)(["medium"]),c=function(e){return(0,a.css)("color:",o.color.content.secondary,";font-weight:",r.default.font.weight.mediumBold,";",l(e,{fontSize:[23,28],lineHeight:[27,34]}),";")},u=(0,a.themeFn)("treatment",{none:function(e){return(0,a.css)("color:",o.color.content.primary,";font-family:",r.default.font.serifMedium,";font-weight:",r.default.font.weight.mediumBold,";",l(e,{fontSize:[26,28],lineHeight:[30,34]}),";")},feature:function(e){return(0,a.css)("color:",o.color.content.primary,";font-family:",r.default.font.serifMedium,";font-weight:",r.default.font.weight.book,";",l(e,{fontSize:[26,28],lineHeight:[30,34]}),";")},magazine:function(e){return(0,a.css)("color:",o.color.content.primary,";font-family:",r.default.font.magslab,";font-weight:",r.default.font.weight.book,";",l(e,{fontSize:[25,29],lineHeight:[28,35]}),";")},opinion:function(e){return(0,a.css)("color:",o.color.content.primary,";font-family:",r.default.font.serifMedium,";font-weight:",r.default.font.weight.book,";",l(e,{fontSize:[26,28],lineHeight:[30,34]}),";")},sponsored:function(e){return(0,a.css)(c(e),";font-family:",r.default.font.sponsoredBase,";")},sponsoredSensitive:function(e){return(0,a.css)(c(e),";font-family:",r.default.font.sponsoredSensitive,";")},"t-magazine":function(e){return(0,a.css)("color:",o.color.content.primary,";font-family:",r.default.font.tmagSerifDisplayBase,";font-weight:",r.default.font.weight.bold,";",l(e,{fontSize:[21,30],lineHeight:[28,36]}),";")},liveSplitLayout:(0,a.css)("color:",o.color.content.primary,";font-family:",r.default.font.serifMedium,";font-weight:",r.default.font.weight.mediumBold,";font-size:",r.default.font.size(26),";line-height:",r.default.font.size(30),";")}),d=(0,a.themeFn)("languageDirection",{rightToLeft:(0,a.css)("text-align:right;direction:rtl;unicode-bidi:isolate;")}),p=(0,a.themeFn)("language",{"zh-hans":(0,a.css)("font-family:",r.default.font.cheltenhamSCSerifBase,";font-weight:",r.default.font.weight.bold,";font-style:normal;"),"zh-hant":(0,a.css)("font-family:",r.default.font.cheltenhamTCSerifBase,";font-weight:",r.default.font.weight.bold,";font-style:normal;")}),f=(0,a.css)(".",s.linkClass,"{color:",o.color.signal.editorial,";text-decoration:underline;text-decoration-thickness:1px;text-underline-offset:3px;&:hover,&:focus{text-decoration:none;}}"),m=(t.heading2Selector=function(e){return(0,a.css)("h2{",u(e),";",f,";}")},(0,a.styled)("h2",{target:"eoo0vm40"})(u,";",f,";",d,";",p,";"));t.default=m},dn9S:function(e,t,n){"use strict";var i=n("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.default=r;var a=i(n("q1tI")),o=i(n("UHqw"));function r(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;return a.default.createElement(o.default,{key:n},t)}r.displayName="linkFormatFromOak"},dp42:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.italicClass=t.default=void 0;var i=n("Jqp9"),a=t.italicClass=(0,i.css)("font-style:italic;"),o=(0,i.styled)("em",{target:"e1gzwzxm0"})(a,";");t.default=o},dxVN:function(e,t,n){"use strict";var i=n("TqRt"),a=n("cDf5");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,t.shouldLoadEmbedsJs=y;var o=i(n("lwsE")),r=i(n("W8MJ")),s=i(n("a1gu")),l=i(n("Nsbk")),c=i(n("7W2i")),u=h(n("q1tI")),d=(i(n("17x9")),n("s5tu")),p=i(n("M4W2")),f=h(n("2t41"));function m(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(m=function(e){return e?n:t})(e)}function h(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=a(e)&&"function"!=typeof e)return{default:e};var n=m(t);if(n&&n.has(e))return n.get(e);var i={__proto__:null},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var r in e)if("default"!==r&&{}.hasOwnProperty.call(e,r)){var s=o?Object.getOwnPropertyDescriptor(e,r):null;s&&(s.get||s.set)?Object.defineProperty(i,r,s):i[r]=e[r]}return i.default=e,n&&n.set(e,i),i}function g(e,t,n){return t=(0,l.default)(t),(0,s.default)(e,function(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return function(){return!!e}()}()?Reflect.construct(t,n||[],(0,l.default)(e).constructor):t.apply(e,n))}function y(){return"undefined"==typeof window||(!window.instgrm||(!window.instgrm.Embeds||(!window.instgrm.Embeds.process||"function"!=typeof window.instgrm.Embeds.process)))}var v=function(e){function t(){return(0,o.default)(this,t),g(this,t,arguments)}return(0,c.default)(t,e),(0,r.default)(t,[{key:"componentDidMount",value:function(){y()?(0,p.default)("https://www.instagram.com/embed.js"):setTimeout((function(){window.instgrm.Embeds.process()}),0)}},{key:"render",value:function(){var e=(0,d.stripQueryParams)(this.props.instagramUrl);return u.default.createElement(f.default,{className:this.props.className},u.default.createElement("blockquote",{className:f.instagramClass,"data-instgrm-captioned":!0,"data-instgrm-permalink":e}))}}])}(u.Component);v.displayName="InstagramEmbed",v.defaultProps={className:void 0};t.default=v},dxmc:function(e,t,n){"use strict";var i=n("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=i(n("q1tI")),o=n("Jqp9"),r=(i(n("17x9")),n("C2Ll")),s=(0,o.css)("width:100%;"),l=function(e){var t=e.crops,n=e.rendition,i=e.mobileRendition,l=e.className,c=e.isInAMP,u=function(e,t,n,i){return e.crops?e.crops[t]?e.crops[t]:i&&(0,r.parseImageData)(e,n)||(0,r.parseImageData)(e,t):{}}({crops:t},n,i,c),d=u.url,p=u.width,f=u.height;return d?c?a.default.createElement("amp-img",{className:(0,o.cx)(l,s),src:d,width:p,height:f,layout:"responsive"}):a.default.createElement("img",{className:(0,o.cx)(l,s),alt:"",src:d}):null};l.defaultProps={isInAMP:!1,className:void 0,crops:void 0,rendition:"jumbo",mobileRendition:"mobileMasterAt3x"};t.default=l},e0Jg:function(e,t,n){"use strict";n.d(t,"a",(function(){return c})),n.d(t,"l",(function(){return u})),n.d(t,"c",(function(){return d})),n.d(t,"i",(function(){return p})),n.d(t,"b",(function(){return f})),n.d(t,"m",(function(){return m})),n.d(t,"o",(function(){return h})),n.d(t,"p",(function(){return g})),n.d(t,"k",(function(){return y})),n.d(t,"q",(function(){return v})),n.d(t,"g",(function(){return b})),n.d(t,"e",(function(){return _})),n.d(t,"h",(function(){return w})),n.d(t,"n",(function(){return x})),n.d(t,"d",(function(){return k})),n.d(t,"f",(function(){return O})),n.d(t,"j",(function(){return T}));var i=n("lSNA"),a=n.n(i),o=n("a9ya");function r(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function s(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?r(Object(n),!0).forEach((function(t){a()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):r(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var l=a()(a()(a()(a()(a()({},o.d.ALL,"all"),o.d.HIGHLIGHTED,"nyt-picks"),o.d.RECOMMENDED,"reader-picks"),o.d.REPORTER_REPLIES,"nyt-replies"),o.d.SINGLE_COMMENT,"permalink"),c={AUTOOPEN:"autoopen",AUTOOPEN_HOME:"autoopen-home",AUTOOPEN_PERMALINK:"autoopen-permalink",AUTOOPEN_EMAIL_LINK:"autoopen-email-link",HEADER:"header",FOOTER:"footer",C_COLUMN:"ccol",FOOTER_BOTTOM_BAR:"footer-bottom-bar",FOOTER_COMMENTS:"footer-comments",INLINE_COMMENTS:"inline-comments",INSTORYMASTHEAD:"masthead"},u=function(e){var t={name:"comments"},n=function(e){return l[e]||""}(e);return n&&(t.context=n),{eventData:{trigger:"module"},module:t}},d=function(e){return{comment:{id:e}}},p=function(e,t){return s(s({},{event:"moduleInteraction",eventData:{type:"click"}}),{},{module:{region:e,element:{name:t||"open"}}})},f=function(){return s(s({},{event:"moduleInteraction",eventData:{type:"click"}}),{},{module:{element:{name:"close"}}})},m=function(e,t){var n={name:e===o.d.SINGLE_COMMENT?"back-to-all-comments":t===o.d.SINGLE_COMMENT?"timestamp":"tab"},i=o.e[t];return i&&(n.label=i),s(s({},{event:"moduleInteraction",eventData:{type:"click"}}),{},{module:{element:n}})},h=function(e,t){return s(s({},{event:"moduleInteraction",eventData:{type:"click"}}),{},{module:{element:{region:t,name:"submit-new",label:e}}})},g=function(e){return s(s({},{event:"moduleInteraction",eventData:{type:"click"}}),{},{module:{element:{name:"submit-reply",label:e}}})},y=function(e){return s(s({},{event:"moduleInteraction",eventData:{type:"click"}}),{},{module:{element:{name:"user-recommend",label:e}}})},v=function(e){return s(s({},{event:"moduleInteraction",eventData:{type:"click"}}),{},{module:{element:{name:"user-unrecommend",label:e}}})},b=function(e){return s(s({},{event:"moduleInteraction",eventData:{type:"click"}}),{},{module:{element:{name:"user-flagged",label:e}}})},_=function(e){return s(s({},{event:"moduleInteraction",eventData:{type:"click"}}),{},{module:{element:{name:"replies-view-all",label:e}}})},w=function(e){return s(s({},{event:"moduleInteraction",eventData:{type:"click"}}),{},{module:{element:{name:"read-more",label:e}}})},x=function(e){return s(s({},{event:"moduleInteraction",eventData:{type:"click"}}),{},{module:{element:{name:"sort",label:o.b[e]}}})},k=function(e){return s(s({},{event:"moduleInteraction",eventData:{type:"click"}}),{},{module:{element:{name:"profile-edit",label:e}}})},O=function(e){return s(s({},{event:"moduleInteraction",eventData:{type:"click"}}),{},{module:{element:{name:"faq",label:e}}})},T=function(){return s(s(s({},u()),{event:"moduleInteraction",eventData:{type:"click"}}),{},{module:{name:"share-tools",region:"comments",element:{name:"share-permalink"}}})}},e8Mh:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.handleKeyNavigation=void 0;var i=n("7zGq");t.handleKeyNavigation=function(e){return function(t){39===t.keyCode&&(0,i.handleNavRight)(e),37===t.keyCode&&(0,i.handleNavLeft)(e)}}},e9RS:function(e,t,n){"use strict";n.d(t,"a",(function(){return p}));var i,a,o,r=n("VkAN"),s=n.n(r),l=n("eFc+"),c=n.n(l),u=c()(i||(i=s()(["\n  fragment StorylineTextInline_content on InlineUnion {\n    ... on TextInline {\n      text\n      formats {\n        __typename\n        ... on LinkFormat {\n          url\n          uri\n        }\n      }\n    }\n  }\n"]))),d=c()(a||(a=s()(["\n  fragment StorylineParagraphBlock_content on ParagraphBlock {\n    content {\n      ...StorylineTextInline_content\n    }\n  }\n  ","\n"])),u),p={textInline:u,paragraphBlock:d,listBlock:c()(o||(o=s()(["\n    fragment StorylineListBlock_content on ListBlock {\n      content {\n        content {\n          ...StorylineParagraphBlock_content\n        }\n      }\n    }\n    ","\n  "])),d)}},eCWu:function(e,t,n){"use strict";n.d(t,"b",(function(){return R}));var i,a,o,r,s,l,c,u,d=n("VkAN"),p=n.n(d),f=n("lSNA"),m=n.n(f),h=n("gcR/"),g=n.n(h),y=(n("q1tI"),n("vftj")),v=n("QS0n"),b=n("eFc+"),_=n.n(b),w=n("t0IW"),x=n("XMA8"),k=n("49re"),O=n("7FfI"),T=n("4mEQ"),C=n("/9TP"),E=n.n(C),S=n("HU5K"),P=n("hU1o"),I=n("EYBZ");function M(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.language,n=e.url;return null!=t&&t.code&&n?g()("link",{rel:"alternate",hrefLang:t.code,href:n},n):null}function A(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function j(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?A(Object(n),!0).forEach((function(t){m()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):A(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var N=["gift"],L="The New York Times";function D(e){var t,n,l,c,u,d,p,f,m,h,b,_,C,A,D,R,B,z,F,U,H=e.asset,W=e.children,q=e.skipCanonicalLink,V=Object(S.a)()&&"Article"===(null==H?void 0:H.__typename),G=Object(P.a)().socialVariant;if(!H)return g()(y.Helmet,{titleTemplate:"%s - ".concat(L),prioritizeSeoTags:!0},void 0,W);var Y=H.sourceId,X=H.uri,Z=H.eventId,J=H.summary,K=H.section,$=H.subsection,Q=H.timesTags,ee=H.bylines,te=H.firstPublished,ne=H.lastModified,ie=H.lastMajorModification,ae=H.headline,oe=H.collections,re=H.language,se=H.translations,le=H.column,ce=H.promotionalImage,ue=H.isAccessibleForFree,de=H.__typename,pe=H.url&&"null"!==H.url?H.url:"",fe=pe,me="",he=null,ge=ae.default,ye=ae.seo?ae.seo:ae.default;K&&(me=K.name,he=K.displayName),"Opinion"===he&&(ye="".concat(he," | ").concat(ye),ge="".concat(he," | ").concat(ge)),"Video"===H.__typename&&(ge="Video: ".concat(ye)),le&&le.name&&le.slug&&"the-weekly"===le.slug&&(ye="".concat(le.name," | ").concat(ye),ge="".concat(le.name," | ").concat(ge));var ve="";$&&(ve=$.name);var be=ue||(null==Q?void 0:Q.some((function(e){return"internal-open-access"===(null==e?void 0:e.displayName)}))),_e=Object(I.getPrimaryCollection)(oe),we=Object(I.getCollectionData)(_e),xe=null,ke=null;if(te){var Oe=Object(O.parseISODate)(te);Oe&&(xe="".concat(Oe.year).concat(Oe.month).concat(Oe.day),ke=te.replace(/\.([A-Z]+)$/,(function(e,t){return E()(t)})))}var Te=null;ie&&(Object(O.parseISODate)(ie)&&(Te=ie.replace(/\.([A-Z]+)$/,(function(e,t){return E()(t)}))));var Ce=null!=ee&&null!==(t=ee[0])&&void 0!==t&&t.creators?ee[0].creators.reduce((function(e,t){return t.url&&e.push(t.url),e}),[]):[],Ee=se||[],Se=Ee.map(M),Pe=(null==re||null===(n=re.code)||void 0===n||null===(l=n.split("-"))||void 0===l?void 0:l[0])||"en",Ie=(null==re?void 0:re.code)||"en",Me=Ie.startsWith("en")&&Ee.length>0&&Ee.some((function(e){var t,n;return null===(t=e.language)||void 0===t||null===(n=t.code)||void 0===n?void 0:n.startsWith("es")})),Ae=pe.match(/.*smarter-living\/wirecutter\/((\w+-?)+)/),je=new Date(te).getFullYear(),Ne=Ae&&je<2020?"https://www.nytimes.com/wirecutter/blog/".concat(Ae[1],"/"):pe,Le=Object(k.getStructuredData)({data:j(j({},H),{},V?{firstPublished:H.lastModified,isAccessibleForFree:be}:{isAccessibleForFree:be}),meteredContentClass:"meteredContent",platform:"vi",environment:vi.env.ENVIRONMENT}),De=Le?Le.map((function(e,t){if(e){var n="sd-".concat(t);return g()("script",{type:"application/ld+json"},n,"".concat(JSON.stringify(e)))}return null})):null,Re=(null==ce||null===(c=ce.image)||void 0===c||null===(u=c.caption)||void 0===u?void 0:u.text)||"",Be={url:x.b},ze={url:x.a},Fe=j({},(null==ce||null===(d=ce.socialMediaRendition)||void 0===d?void 0:d.rendition)||Be),Ue=j({},(null==ce||null===(p=ce.twitterRendition)||void 0===p?void 0:p.rendition)||ze);if(Fe.url!==x.b&&"Video"===H.__typename&&(Fe.url="".concat(Fe.url,"?video-overlay")),Ue.url!==x.a&&"Video"===H.__typename&&(Ue.url="".concat(Ue.url,"?video-overlay")),N.includes(G))Fe.url=Object(w.a)(Fe.url,{gift:1}),Ue.url=Object(w.a)(Ue.url,{gift:1,tw:1}),ge="".concat(ge," (Gift Article)"),fe=Object(w.a)(pe,{unlocked_article_code:1});else{var He,We=new Date;We.setFullYear(We.getFullYear()-1);var qe=new Date(te);"Interactive"!==de||pe.match(/interactive\/[0-9]{4}\/[0-9]{2}/i)||(qe=new Date(ie));var Ve=null!=ce&&null!==(He=ce.socialMediaRendition)&&void 0!==He&&He.parentPublishDate?new Date(ce.socialMediaRendition.parentPublishDate):qe;if(We>=Ve&&"Video"!==H.__typename&&!V){var Ge,Ye,Xe,Ze,Je,Ke,$e,Qe,et=Ve.getFullYear();if(ge="".concat(ge," (Published ").concat(et,")"),Fe.url!==x.b)Fe.url=Object(w.a)(Fe.url,{year:et,h:Fe.height,w:Fe.width,s:null==ce||null===(Ge=ce.socialMediaRendition)||void 0===Ge||null===(Ye=Ge.signature)||void 0===Ye?void 0:Ye.value,k:null==ce||null===(Xe=ce.socialMediaRendition)||void 0===Xe||null===(Ze=Xe.signature)||void 0===Ze?void 0:Ze.keyId});else Fe.url=Object(w.a)(Fe.url,{year:et});if(Ue.url!==x.a)Ue.url=Object(w.a)(Ue.url,{year:et,h:Ue.height,w:Ue.width,s:null==ce||null===(Je=ce.twitterRendition)||void 0===Je||null===(Ke=Je.signature)||void 0===Ke?void 0:Ke.value,k:null==ce||null===($e=ce.twitterRendition)||void 0===$e||null===(Qe=$e.signature)||void 0===Qe?void 0:Qe.keyId,tw:1});else Ue.url=Object(w.a)(Ue.url,{year:et})}}return g()(v.Route,{render:function(e){var t,n=e.staticContext;return n&&(n.xScoopLastModifiedHeader=ne),g()(y.Helmet,{titleTemplate:"%s - ".concat(L),prioritizeSeoTags:!0},void 0,f||(f=g()("html",{lang:Pe})),g()("title",{},void 0,ye),!V&&g()("meta",{property:"article:published_time",content:ke}),g()("meta",{property:"article:modified_time",content:Te}),m||(m=g()("meta",{httpEquiv:"Content-Language",content:Pe})),Se.length>0&&(h||(h=g()("link",{rel:"alternate",hrefLang:Ie,href:pe}))),Se,!q&&(b||(b=g()("link",{rel:"canonical",href:Ne}))),i||(i=g()("meta",{name:"robots",content:"noarchive, max-image-preview:large"})),Me&&(a||(a=g()("meta",{name:"googlebot",content:"notranslate"}))),_||(_=g()("meta",{name:"articleid",content:Y})),C||(C=g()("meta",{name:"nyt_uri",content:X})),A||(A=g()("meta",{name:"pubp_event_id",content:Z})),D||(D=g()("meta",{name:"description",content:J})),g()("meta",{name:"image",content:Fe.url}),g()("meta",{name:"byl",content:null==ee||null===(t=ee[0])||void 0===t?void 0:t.renderedRepresentation}),g()("meta",{name:"news_keywords",content:Q?Q.map((function(e){return e.vernacular})).join():null}),g()("meta",{name:"pdate",content:xe}),fe&&g()("meta",{property:"og:url",content:fe}),o||(o=g()("meta",{property:"og:type",content:"article"})),g()("meta",{property:"og:title",content:ge}),g()("meta",{property:"og:image",content:Fe.url}),R||(R=g()("meta",{property:"og:image:alt",content:Re})),B||(B=g()("meta",{property:"og:description",content:J})),pe&&(z||(z=g()("meta",{property:"twitter:url",content:pe}))),g()("meta",{property:"twitter:title",content:ge}),F||(F=g()("meta",{property:"twitter:description",content:J})),g()("meta",{property:"twitter:image",content:Ue.url}),U||(U=g()("meta",{property:"twitter:image:alt",content:Re})),r||(r=g()("meta",{property:"twitter:card",content:"summary_large_image"})),g()("meta",{property:"article:section",content:he}),Ce.map((function(e){return g()("meta",{property:"article:author",content:e},e)})),Q?Q.map((function(e){var t=e.displayName;return g()("meta",{property:"article:tag",content:t},t)})):null,g()("meta",{property:"article:opinion",content:Object(T.isOpinion)(me).toString()}),s||(s=g()("meta",{property:"article:content_tier",content:"metered"})),g()("meta",{name:"CG",content:me}),g()("meta",{name:"SCG",content:ve}),g()("meta",{name:"CN",content:we.slug}),g()("meta",{name:"CT",content:we.type}),W,De)}})}D.displayName="AssetHelmet",D.defaultProps={asset:void 0,children:null,skipCanonicalLink:!1};var R=_()(l||(l=p()(['\n  fragment AssetHelmet_promotionalImage on HasPromotionalProperties {\n    promotionalImage {\n      socialMediaRendition: signableRendition(\n        renditionPriority: ["facebookJumbo", "videoSixteenByNineJumbo1600", "articleLarge"]\n      ) {\n        ...AssetHelmet_signableRendition\n      }\n      twitterRendition: signableRendition(\n        renditionPriority: ["videoSixteenByNine3000", "videoSixteenByNineJumbo1600", "articleLarge"]\n      ) {\n        ...AssetHelmet_signableRendition\n      }\n      image {\n        id\n        credit\n        caption {\n          text\n        }\n      }\n    }\n  }\n\n  fragment AssetHelmet_signableRendition on SignableImageRendition {\n    parentPublishDate\n    parentPublishYear\n    signature {\n      value\n      keyId\n      __typename\n    }\n    rendition {\n      name\n      height\n      width\n      url\n      __typename\n    }\n    __typename\n  }\n']))),B=_()(c||(c=p()(['\n  fragment AssetHelmet_promoImage on Image {\n    id\n    assetCrops: crops(\n      renditionNames: [\n        "thumbStandard"\n        "thumbLarge"\n        "facebookJumbo"\n        "videoSixteenByNine3000"\n        "videoSixteenByNineJumbo1600"\n        "googleFourByThree"\n        "articleLarge"\n        "superJumbo"\n        "mediumSquareAt3X"\n      ]\n    ) {\n      name\n      renditions {\n        url\n        height\n        width\n        name\n      }\n    }\n    credit\n    caption {\n      text\n    }\n  }\n'])));D.fragments={asset:_()(u||(u=p()(["\n    fragment AssetHelmet_asset on HasPromotionalProperties {\n      ... on Linkable {\n        id\n        url\n      }\n      ... on Article {\n        id\n        translations {\n          language {\n            code\n          }\n        }\n        language {\n          code\n          name\n        }\n      }\n      ... on Audio {\n        id\n        translations {\n          language {\n            code\n          }\n        }\n        language {\n          code\n          name\n        }\n      }\n      ... on Video {\n        id\n        language {\n          code\n          name\n        }\n      }\n      ... on Interactive {\n        id\n        translations {\n          language {\n            code\n          }\n        }\n        language {\n          code\n          name\n        }\n      }\n      ... on Slideshow {\n        id\n        translations {\n          language {\n            code\n          }\n        }\n        language {\n          code\n          name\n        }\n      }\n      ... on CreativeWork {\n        collections @filterEmpty {\n          id\n          slug\n          collectionType\n        }\n        headline {\n          default @stripHtml\n          seo @stripHtml\n        }\n        summary\n        timesTags @filterEmpty {\n          displayName\n          vernacular\n        }\n        section {\n          id\n          displayName\n          name\n        }\n        subsection {\n          id\n          name\n        }\n        bylines {\n          renderedRepresentation\n          creators {\n            ... on Published {\n              url\n            }\n          }\n        }\n      }\n      ... on Published {\n        firstPublished\n        lastModified\n        lastMajorModification\n        sourceId\n        uri\n        eventId\n      }\n      promotionalMedia {\n        ...AssetHelmet_promoImage\n        ... on EmbeddedInteractive {\n          id\n          promotionalMedia {\n            ...AssetHelmet_promoImage\n          }\n        }\n        ... on Video {\n          id\n          promotionalMedia {\n            ...AssetHelmet_promoImage\n            ... on Video {\n              id\n              promotionalMedia {\n                ...AssetHelmet_promoImage\n              }\n            }\n          }\n        }\n        ... on Audio {\n          id\n          promotionalMedia {\n            ...AssetHelmet_promoImage\n          }\n        }\n      }\n      ...AssetHelmet_promotionalImage\n    }\n    ","\n    ","\n  "])),R,B)};t.a=D},eDf7:function(e,t,n){"use strict";var i=n("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.labelEmphasisClass=t.labelContainerClass=void 0;var a=n("Jqp9"),o=n("3sMT"),r=i(n("wXC7"));t.labelContainerClass=(0,a.css)("margin-right:5px;display:inline-block;letter-spacing:0.06em;text-transform:uppercase;font-size:",r.default.font.size(12),";line-height:",r.default.font.size(12),";font-weight:",r.default.font.weight.extraBold,";"),t.labelEmphasisClass=(0,a.css)("color:",o.color.signal.breaking,";")},eHD8:function(e,t,n){"use strict";t.a="/vi-assets/static-assets/icon-yourplaces-globalupdate_144x144-c25aba1c2904f301a08ad33183f723c6.webp"},eRNE:function(e,t,n){"use strict";var i=n("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=i(n("q1tI")),o=(i(n("17x9")),n("boCj")),r=i(n("0p19")),s=n("Xx18");function l(e){var t=e.storyline,n=e.parentUrl,i=e.isPeeking,l=e.trackLinkInteraction,c=e.internalLinkTrackingParams,u=e.trackImpressionEvent;if(!t.context)return null;var d=t.context,p=d.items,f=d.displayName;return a.default.createElement(o.InView,{as:"section",role:"complementary",className:s.contextContainerClass,"aria-label":f},a.default.createElement("div",{className:s.contextHeaderClass,"data-testid":"context-component-new"},a.default.createElement("h2",{className:s.titleClass},f)),a.default.createElement(r.default,{title:f,items:p,parentUrl:n,isPeeking:i,trackLinkInteraction:l,internalLinkTrackingParams:c,trackImpressionEvent:u}))}l.displayName="StorylineContextV2",l.defaultProps={isPeeking:!1,trackLinkInteraction:function(){},internalLinkTrackingParams:null,trackImpressionEvent:function(){}};t.default=l},eUG7:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.aspectRatioOuterClass=t.aspectRatioInnerClass=void 0;var i=n("Jqp9");t.aspectRatioOuterClass=(0,i.css)("height:0;width:100%;position:relative;background-color:transparent;"),t.aspectRatioInnerClass=(0,i.css)("position:absolute;top:0;left:0;width:100%;height:100%;")},ed9S:function(e,t,n){"use strict";var i=n("TqRt"),a=n("cDf5");Object.defineProperty(t,"__esModule",{value:!0}),t.balanceText=l,t.default=void 0;var o=i(n("q1tI")),r=(i(n("17x9")),function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=a(e)&&"function"!=typeof e)return{default:e};var n=s(t);if(n&&n.has(e))return n.get(e);var i={__proto__:null},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var r in e)if("default"!==r&&{}.hasOwnProperty.call(e,r)){var l=o?Object.getOwnPropertyDescriptor(e,r):null;l&&(l.get||l.set)?Object.defineProperty(i,r,l):i[r]=e[r]}return i.default=e,n&&n.set(e,i),i}(n("LOnR")));function s(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(s=function(e){return e?n:t})(e)}function l(e){if(e.length<15)return[e];for(var t,n=Math.floor(e.length/2),i=0;i<n;i+=1){var a=n-i,o=n+i;if(" "===e[a]){t=a;break}if(" "===e[o]){t=o;break}}return[e.substr(0,t),e.substr(t)]}var c=function(e){var t=e.className,n=e.text,i=e.disable;if(!n)return null;var a=i?[n]:l(n);return o.default.createElement("span",{className:t},a.map((function(e){return o.default.createElement("span",{key:e,className:r.textBalancerClass,"data-testid":"text-balancer"},e)})))};c.displayName="TextBalancer",c.defaultProps={className:void 0,disable:!1,text:null};t.default=c},eeq6:function(e,t,n){"use strict";var i=n("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.OnsiteSummary=void 0;var a=i(n("q1tI")),o=i(n("XlcC")),r=i(n("oKgi")),s=n("V6Yu"),l=(n("EVBM"),t.OnsiteSummary=function(e){var t=e.summary;if(!t||!(0,s.hasContent)(t))return null;var n=t.content.map(o.default);return a.default.createElement(r.default,{id:"article-summary","data-testid":"onsite-summary"},n)});l.displayName="OnsiteSummary",l.defaultProps={summary:null};t.default=l},eoAV:function(e,t,n){"use strict";var i=n("pVnL"),a=n.n(i),o=n("gcR/"),r=n.n(o),s=n("QILm"),l=n.n(s),c=n("lwsE"),u=n.n(c),d=n("W8MJ"),p=n.n(d),f=n("a1gu"),m=n.n(f),h=n("Nsbk"),g=n.n(h),y=n("7W2i"),v=n.n(y),b=n("q1tI"),_=n.n(b),w=n("aqT/"),x=n.n(w),k=n("Jqp9"),O=n("mczz"),T=["children","onLoad"];function C(e,t,n){return t=g()(t),m()(e,function(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return function(){return!!e}()}()?Reflect.construct(t,n||[],g()(e).constructor):t.apply(e,n))}var E=Object(k.css)("display:block;height:5px;"),S=function(e){function t(){var e;u()(this,t);for(var n=arguments.length,i=new Array(n),a=0;a<n;a++)i[a]=arguments[a];return(e=C(this,t,[].concat(i))).state={isVisible:!1},e.mounted=!1,e.onChange=function(t){e.mounted&&t&&!e.state.isVisible&&e.setState({isVisible:!0})},e}return v()(t,e),p()(t,[{key:"componentDidMount",value:function(){this.mounted=!0,Object(O.d)(Object(O.c)(),"forceLazy")&&this.setState({isVisible:!0})}},{key:"componentWillUnmount",value:function(){this.mounted=!1}},{key:"render",value:function(){var e=this.props,t=e.children,n=e.onLoad,i=l()(e,T);return this.state.isVisible?(n&&n(),t):_.a.createElement(x.a,a()({},i,{onChange:this.onChange}),r()("div",{className:E,"data-testid":"lazy-load-wrapper-".concat(JSON.stringify(this.props.offset))}))}}])}(b.Component);S.displayName="LazyLoadWrapper",S.defaultProps={partialVisibility:!0,scrollCheck:!0,offset:{bottom:-500},onLoad:null},t.a=S},"f/4F":function(e,t,n){"use strict";var i=n("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.linkImageClass=t.headshotSpaceBetween=t.headshotOpinionHeaderRedesignSize=t.headshotOpinionDesktopSize=t.headshotDesktopBreakpoint=t.getHeadshotSize=t.ampHeadshotClass=t.StyledHeadshot=t.NodeHeadshotContainer=t.HeadshotsContainer=void 0;var a=n("Jqp9"),o=i(n("wXC7")),r=t.headshotOpinionHeaderRedesignSize=40,s=t.headshotDesktopBreakpoint=o.default.breakpoint.mediumLarge,l=t.headshotOpinionDesktopSize=80,c=t.headshotSpaceBetween=10,u=t.getHeadshotSize=function(e){return"opinion"===e.theme.section?e.theme.opinionHeaderRedesign?r:60:50},d=function(e,t){return"opinion"===e.theme.section&&(0,a.css)(s,"{",t,";}")},p=(0,a.css)("display:inline-block;margin-bottom:auto;"),f=(0,a.css)("display:block;width:100%;margin-bottom:0.5rem;",s,"{display:inline-block;width:auto;margin-bottom:auto;}"),m=(0,a.css)("display:block;width:100%;margin-bottom:0.5rem;",s,"{display:inline-block;width:auto;}"),h=function(e){return(0,a.css)("min-width:",(u(e)+c)*e.headshotCount,"px;",1===e.headshotCount&&p,";",2===e.headshotCount&&("opinion"!==e.theme.section||!e.theme.opinionHeaderRedesign)&&f,";",e.headshotCount>2&&m,";",d(e,(0,a.css)("min-width:",(l+c)*e.headshotCount,"px;")))},g=(t.HeadshotsContainer=(0,a.styled)("div",{target:"ey68jwv0"})(h),(0,a.css)("margin-right:",c,"px;vertical-align:bottom;")),y=function(e){return(0,a.css)("width:",u(e),"px;",g,";",d(e,(0,a.css)("width:",l,"px;margin-bottom:0;")))},v=(t.NodeHeadshotContainer=(0,a.styled)("div",{target:"ey68jwv1"})("img,amp-img{",y,";margin-right:0;}",h,";"),t.StyledHeadshot=(0,a.styled)("img",{target:"ey68jwv2"})(y,";border-radius:50%;"),t.linkImageClass=(0,a.css)("width:100%;height:100%;"));t.ampHeadshotClass=(0,a.css)(g,";",v,";")},f3Il:function(e,t,n){"use strict";var i=n("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.titleUnderlineClass=t.titleLinkClass=t.titleClass=t.featureToneClass=t.caretClass=void 0;var a=n("Jqp9"),o=n("3sMT"),r=i(n("wXC7"));t.titleClass=(0,a.css)("font-family:",r.default.font.franklinBase,";font-size:",r.default.font.size(14),";line-height:",r.default.font.size(14),";font-weight:",r.default.font.weight.bold,";flex-shrink:0;width:auto;display:flex;margin-right:16px;padding-right:15px;color:",o.color.content.primary,";background-color:",o.color.background.elevated,";box-shadow:4px 0 7px 10px ",o.color.background.elevated,";border-right:1px solid ",o.color.stroke.quaternary,";",r.default.breakpoint.small,"{font-size:",r.default.font.size(15),";line-height:",r.default.font.size(15),";}"),t.caretClass=(0,a.css)("span:last-of-type::after{content:'›';font-weight:",r.default.font.weight.medium,";font-size:",r.default.font.size(18),";margin-left:4px;color:inherit;position:relative;bottom:-1px;",r.default.breakpoint.small,"{font-size:",r.default.font.size(19),";}}"),t.featureToneClass=(0,a.css)("font-family:",r.default.font.serifMedium,";font-weight:",r.default.font.weight.mediumBold,";font-size:",r.default.font.size(17),";line-height:",r.default.font.size(17),";",r.default.breakpoint.small,"{font-size:",r.default.font.size(18),";line-height:",r.default.font.size(18),";}span:last-of-type::after{font-size:",r.default.font.size(19),";font-weight:",r.default.font.weight.mediumBold,";",r.default.breakpoint.small,"{font-size:",r.default.font.size(20),";}}"),t.titleUnderlineClass=(0,a.css)("padding-bottom:0;",r.default.breakpoint.small,"{:hover,:focus,:active{padding-bottom:1px;color:",o.color.content.tertiary,";border-bottom:2px solid ",o.color.content.tertiary,";}}"),t.titleLinkClass=(0,a.css)("text-decoration:none;color:unset;")},f6wl:function(e,t){e.exports=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return'(function () { var _f=function(t={},e={}){window.AdSlot4=window.AdSlot4||{},window.AdSlot4.cmd=window.AdSlot4.cmd||[],window.AdSlot4.clientRequirements={mergeObjects:function(t,...e){return e.reduce(function(t,e){return Object.entries(e).reduce(function(t,[e,n]){return t[e]&&null==n?t:Object.assign({},t,{[e]:n})},t)},t)},isFunction:function(t){return"[object Function]"===Object.prototype.toString.call(t)},getAbraVariant:function(t){if(!(window.NYTD&&window.NYTD.Abra&&window.NYTD.Abra.getAbraSync&&this.isFunction(window.NYTD.Abra.getAbraSync)))return void console.warn("Abra does not exist or is not a function");const e=window.NYTD.Abra.getAbraSync(t);return e&&e.variant},shouldHaltDFP:function(t){return"1_block"===this.getAbraVariant(t)},isAdsDisabled:function(t={}){const{adTargeting:{section:e}={},adsDisabled:n,adUnitPath:i=""}=t,o=i&&i.toLowerCase&&i.toLowerCase().includes("tragedy");return n||"learning"===e||o},getSov:function(t={}){return t.sov=t.sov||(Math.floor(4*Math.random())+1).toString(),{sov:t.sov}},getPageViewId:function(t){return{page_view_id:t&&t.current}},getUserData:function(t="{}"){try{const e=JSON.parse(t).data;return e&&e.user}catch(t){console.warn("userinfo data unavailable")}},getEm:function(t){return t&&t.length?{em:t.toString().toLowerCase()}:{}},getWat:function(t){return t?{wat:t.toLowerCase()}:{}},getDemographics:function(t){return this.mergeObjects(this.getEm(t&&t.emailSubscriptions),this.getWat(t&&t.wat))},isValidDfpTest:function(t){return t.toLowerCase().indexOf("dfp")>-1},joinArgumentsForVariant:function(){if(arguments.length)return[].slice.call(arguments).join("_").toLowerCase()},reduceAbraConfigKeysToDfpVariants:function(t=[],e=""){const n=this.getAbraVariant(e),i=this.joinArgumentsForVariant(e,n);return n&&i?t.concat(i):t},reduceFastlyAbraToDfpVariants:function(t=[],[e,n]=[]){const i=this.isValidDfpTest(e)&&n&&this.joinArgumentsForVariant(e,n);return i?t.concat(i):t},getDFPTestNames:function(t={}){if(!t)return[];const e=this.isValidDfpTest;return Object.keys(t).filter(function(t){return e(t)})},getAbraDfpVariants:function(t={},e={}){let n=[],i=[];if(Object.keys(e).length&&(i=Object.entries(e).reduce(this.reduceFastlyAbraToDfpVariants,[])),t.config&&t.getAbraSync){n=this.getDFPTestNames(t.config).reduce(this.reduceAbraConfigKeysToDfpVariants,[])}return{abra_dfp:[...n,...i]}},isMobile:function(t){const e=t.matchMedia("(max-width: 739px)");return e&&e.matches},isManualRefresh:function(t={}){return!(!t.navigation||1!==t.navigation.type)},getAltLangFromPathname:function(t=""){return 0===t.indexOf("/es/")?"es":""},getAdTargetingProperty:function(t=!1,e=""){let n=t?"m":"";return{prop:(n+=e)+"nyt"}},getAdTargetingPlatform:function(t=!1){return{plat:(t?"m":"")+"web"}},getAdTargetingEdition:function(t=""){return t.length?{edn:t}:{}},getAdTargetingVersion:function(t=!1){return{ver:(t?"m":"")+"vi"}},getNYTA:function(){var t=window.document.cookie.split(";").find(t=>t.includes("nyt-a"))||null;return t&&t.split("=").pop()||null},getHash53:function(t,e){let n=3735928559^e,i=1103547991^e;for(let e,o=0;o<t.length;o++)e=t.charCodeAt(o),n=Math.imul(n^e,2654435761),i=Math.imul(i^e,1597334677);return n=Math.imul(n^n>>>16,2246822507),n^=Math.imul(i^i>>>13,3266489909),i=Math.imul(i^i>>>16,2246822507),4294967296*(2097151&(i^=Math.imul(n^n>>>13,3266489909)))+(n>>>0)},getHashNYTA:function(){var t=this.getNYTA();if(!t)return;let e=this.getHash53(t,64).toString();return e.length<22&&(e=parseInt(e).toString(36)+this.getHash53(t,32).toString(36)+this.getHash53(t,16).toString(36)),e},getAdTargetingHome:function(t,e,n){let i={},o={};return"hp"===t&&(i=e?{topRef:e}:{},o=n?{refresh:"manual"}:{}),this.mergeObjects(i,o)},getAdTargeting:function(t={},n={}){const i=this.isMobile(window),o=this.getAltLangFromPathname(window.location.pathname),r=this.isManualRefresh(performance);return this.mergeObjects(t,this.getDemographics(n),this.getAdTargetingProperty(i,o),this.getAdTargetingPlatform(i),this.getAdTargetingEdition(o),this.getAdTargetingVersion(i),this.getAdTargetingHome(t.typ,document.referrer,r),this.getAbraDfpVariants(window.NYTD.Abra,e),this.getSov(window),this.getPageViewId(window.NYTD.PageViewId))},init:function(t){window.AdSlot4.init&&this.isFunction(window.AdSlot4.init)?window.AdSlot4.init&&window.AdSlot4.init(t):console.warn("AdSlot4.init does not exist or is not a function")},reportExposure:function(t){window.NYTD.Abra&&this.isFunction(window.NYTD.Abra.reportExposure)?window.NYTD.Abra.reportExposure(t):console.warn("Abra.reportExposure does not exist or is not a function")},generateConfig:function(t={},e={},n={}){const i=n&&n.userInfo&&n.userInfo.demographics;return this.mergeObjects(t,e,{adTargeting:this.getAdTargeting(e.adTargeting,i),haltDFP:this.shouldHaltDFP(e.dfpToggleName||t.dfpToggleName),adsDisabled:this.isAdsDisabled(e)})}};for(let t in window.AdSlot4.clientRequirements)window.AdSlot4.clientRequirements[t]=window.AdSlot4.clientRequirements[t].bind(window.AdSlot4.clientRequirements);const n={adUnitPath:"/29390238/nyt/thisIsNotAPath",offset:400,hideTopAd:AdSlot4.clientRequirements.isMobile(window),lockdownAds:!1,enablePPID:AdSlot4.clientRequirements.getHashNYTA(),sizeMapping:{top:[[970,["fluid",[728,90],[970,90],[970,250],[1605,300]]],[728,["fluid",[728,90],[1605,300]]],[0,[]]],mobile_top:[[0,[320,50]]],fp1:[[0,[[195,250],[215,270]]]],fp2:[[0,[[195,250],[215,270]]]],fp3:[[0,[[195,250],[215,270]]]],feat1:[[0,["fluid"]]],feat2:[[0,["fluid"]]],feat3:[[0,["fluid"]]],feat4:[[0,["fluid"]]],mktg:[[1020,[300,250]],[0,[]]],pencil:[[728,[[336,46]],[0,[]]]],pp_edpick:[[0,["fluid"]]],pp_morein:[[0,["fluid"],[210,218]]],ribbon:[[0,["fluid"]]],sponsor:[[765,[150,50]],[0,[320,25]]],supplemental:[[1020,[[300,250],[300,600]]],[0,[]]],chat:[[0,[[300,250],[300,420]]]],column:[[0,[[300,250],[300,420]]]],ressint:[[600,["fluid"]],[0,[[300,250]]]],mobile_top:[[0,[[320,50]]]],default:[[970,["fluid",[728,90],[970,90],[970,250],[1605,300]]],[728,["fluid",[728,90],[300,250],[1605,300]]],[0,["fluid",[300,250],[300,420]]]]},adTargeting:{},haltDFP:!1,dfpToggleName:t.dfpToggleName,lazyApi:t.lazyApi||{},adsDisabled:!1};window.AdSlot4.cmd.push(function(){const e=window.AdSlot4.clientRequirements,i=e.getUserData(window&&window.userXhrObject&&window.userXhrObject.responseText),o=e.generateConfig(n,t,i);e.init(o),e.reportExposure("dfp_adslot4v2")})};;_f.apply(null, '.concat(JSON.stringify(t),"); })();")}},f81r:function(e,t,n){"use strict";var i,a=n("4Z/T");t.a={addAComment:"Add a comment",all:"All",anErrorOccurred:"An error occurred",couldNotSave:"An error has occurred and we cannot save your comment. Please copy what you’ve written and refresh the page to try again.",tooManySubmits:"User submitted a comment recently. Please wait before submitting another one.",backToAllComments:"Back to All Comments",commentNotFound:"The comment you are looking for is currently unavailable.",cancel:"Cancel",commentsClosed:'The comments section is closed.\n      To submit a letter to the editor for publication, write to\n      <a href="mailto:letters@nytimes.com">letters@nytimes.com</a>.',commentList:"List of Comments",commentPosted:"Your comment has been posted.",commentPromptPlaceholder:"Share your thoughts.",edit:"Edit",inReplyTo:"In Reply to",loading:"Loading...",moderationDisclaimer:"Comments are moderated for civility.",newest:"Newest",noComments:"No comments yet. Be the first to comment.",nytPicks:"NYT Picks",reporterReplies:"NYT Replies",oldest:"Oldest",pendingApproval:"Pending Approval",permalink:"Permalink",readerPicks:"Reader Picks",readMore:"Read More",recommend:"Recommend",recommended:"Recommended",reported:"Reported",reply:"Reply",replies:"Replies",requiredLabel:(i="%(fieldName)s (required)",function(e){return Object(a.sprintf)(i,e)}),save:"Save",submit:"Submit",submissionThanks:"Thank you for your submission.",waitingOnApproval:"Your comment will appear once it has been approved.",waitingOnApprovalNotify:"We'll notify you via email when your comment has been approved.",timesPick:"Times Pick",welcome:"The Times needs your voice. We welcome your on-topic commentary, criticism and expertise.",viewAllReplies:"View All Replies",writeAComment:"Write a comment",commentNotifyLabel:"Email me when my comment is published and if a journalist responds.",nameLabel:"Name",locationLabel:"Location",commentFormNameTooLong:"Name is too long.",commentFormEmailTooLong:"Location is too long.",commentFormNoEmail:"Please do not include your email.",commentFormAvatarTooBig:"Avatar must be smaller than 5mbs.",commentFormErrorBodyTooLong:"Comment body is too long.",commentFormProfileLabel:"This appears on your posts",flag:"Flag",share:"Share",reportInappropriateComment:"Report Inappropriate Comment",vulgar:"Vulgar",spam:"Spam",inflammatory:"Inflammatory",offTopic:"Off Topic",personalAttack:"Personal Attack",verifiedAccountAutoApproved:"Since you're signed into a verified account, your comment has been automatically approved. ",verifiedNote:"PLEASE NOTE: You are logged in with a verified New York Times staff account as part of the Reporter Reply program. Comments you leave will identify you as a staff member. Please keep that in mind when responding.",reporterReplyUrlLabel:"You can find more about the Reporter Reply program here"}},f9QA:function(e,t,n){"use strict";var i=n("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.paragraphClass=t.linkClass=void 0;var a=n("3sMT"),o=n("Jqp9"),r=i(n("wXC7")),s=(0,i(n("3Rk2")).default)([r.default.breakpoint.medium]);t.paragraphClass=(0,o.css)("font-family:",r.default.font.franklinBase,";font-weight:",r.default.font.weight.medium,";",s({fontSize:[r.default.font.size(16),r.default.font.size(17)],lineHeight:[r.default.font.size(22),r.default.font.size(24)]})),t.linkClass=(0,o.css)("color:",a.color.signal.editorial,";text-decoration:underline;text-decoration-thickness:1px;text-underline-offset:1px;&:visited{color:",a.color.signal.editorial,";}&:hover{text-decoration:none;}")},fRbn:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.navListClass=t.dotClass=t.activeClass=void 0;var i=n("Jqp9"),a=n("3sMT");t.navListClass=(0,i.css)("list-style:none;counter-reset:list-block-counter;display:inline-flex;flex-flow:row nowrap;align-items:center;"),t.dotClass=(0,i.css)("margin:0 6px 0 0;width:6px;height:6px;border-radius:50%;background-color:",a.color.background.quaternary,";transition:background-color 0.2s ease;"),t.activeClass=(0,i.css)("background-color:",a.color.background.inversePrimary,";")},fY8U:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=(0,n("q1tI").createContext)(0);t.default=i},fdns:function(e,t,n){"use strict";var i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){return a.default.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"23.7 -85.1 300 39.5",role:"img","aria-label":"The New York Times Logo"},a.default.createElement("path",{d:"m46.2-81c0-3.2-3-4.2-5.6-4v.5c1.5 0 2.7.5 2.7 1.6 0 .7-.5 1.6-2 1.6-1.2 0-3.5-.7-5.4-1.3-2.1-.7-4-1.4-5.6-1.4-3.2 0-5.6 2.4-5.6 5.3 0 2.4 1.8 3.2 2.5 3.5l.2-.4c-.5-.3-.9-.7-.9-1.6 0-.7.6-1.8 2.3-1.8 1.5 0 3.4.7 6 1.4 2.2.6 4.7 1.2 6 1.4v5l-2.5 2.1v.2l2.5 2.2v6.9c-1.3.7-2.8.9-4 .9-2.4 0-4.6-.6-6.4-2.6l6.7-3.2v-11.1l-8.2 3.6c.9-2.2 2.6-3.6 4.3-4.7l-.1-.4c-4.9 1.3-9.3 5.8-9.3 11.3 0 6.6 5.4 11.5 11.5 11.5 6.6 0 10.8-5.2 10.7-10.6h-.4c-1 2.1-2.4 4.1-4.2 5.1v-6.8l2.6-2.1v-.2l-2.6-2.1v-5c2.3-.1 4.8-1.8 4.8-4.8zm-14.2 18-2 1c-1.1-1.5-1.9-3.5-1.9-6.2 0-1.1.1-2.5.5-3.5l3.4-1.5zm17.3 3.6-2.2 1.6.3.3 1-.7 3.6 3.3 4.9-3.3-.2-.3-1.3.8-1.6-1.6v-11.2l1.3-1 2.8 2.3v9.9c0 6.2-1.4 7.2-4.2 8.2v.4c4.6.2 8.8-1.4 8.8-9.3v-10.6l1.5-1.2-.2-.2-1.3 1-4-3.5-4.6 3.5v-13.4h-.3l-5.8 3.9v.3c.6.4 1.6.6 1.6 2.5v18.3zm29.8-1.7-4 3.1-4.1-3.3v-1.9l7.7-5.2v-.2l-3.8-5.9-8.5 4.5v10.7l-1.7 1.3.3.3 1.5-1.2 5.5 4 7.4-5.8zm-8.1-2.7v-8l.3-.2 3.6 5.6zm39.3-18.7c0-.5-.1-.9-.3-1.5h-.4c-.5 1.4-1.1 2.1-2.7 2.1-1.4 0-2.5-.9-3.1-1.5l-4.7 5.4.4.4 1.3-1.5c1 .8 1.7 1.5 4 1.6v13.5l-9.5-16.5c-.7-1.2-2-3.1-4.3-3.1-2.6 0-4.9 2.2-4.6 5.9h.5c.1-1 .6-2.1 1.7-2.1.9 0 1.7.9 2.1 1.6v5.3c-3 0-4.9 1.4-4.9 3.8 0 1.2.6 3.3 2.7 3.7v-.4c-.3-.3-.5-.6-.5-1.1 0-.9.7-1.5 1.9-1.5.2 0 .7 0 .9.1v6.9c-3.5 0-6.1 1.9-6.1 5.2 0 3.1 2.7 4.6 5.5 4.4v-.4c-1.7-.2-2.7-1-2.7-2.1 0-1.4 1-2.1 2.3-2.1s2.5.8 3.3 1.7l4.7-5.2-.4-.4-1.2 1.4c-1.8-1.6-2.8-2.2-4.9-2.5v-16.3l13.2 22.9h.9v-22.9c2.5-.1 4.9-2 4.9-4.8zm11.8 21.4-4 3.1-4.2-3.3v-1.9l7.7-5.2v-.2l-3.8-5.9-8.4 4.5v10.7l-1.7 1.3.3.3 1.5-1.2 5.5 4 7.4-5.8zm-8.2-2.7v-8l.3-.2 3.6 5.6zm34.9-8.9-1.2.9-3.1-2.6-3.6 3.3 1.5 1.4v12.3l-4-2.5v-10l1.3-.9-3.8-3.5-3.5 3.3 1.5 1.4v11.7l-.5.3-3.5-2.4v-9.8c0-2.3-1.1-2.9-2.5-3.8-1.2-.7-1.7-1.4-1.7-2.5 0-.9.9-1.5 1.4-1.7v-.4c-1.2 0-4.7 1.3-4.8 4.5 0 1.6.7 2.3 1.6 3.1.8.8 1.6 1.5 1.6 2.9v9.4l-1.7 1.4.3.4 1.6-1.2 4.3 3.4 4.1-2.8 4.5 2.8 8.7-5v-10.9l2.1-1.6zm30.2-9-1.6 1.5-3.6-3.2-5.3 4v-3.7h-.5l.1 26.4c-.5-.1-1.9-.4-3.1-.6l-.1-22.1c0-1.6-1.2-3.9-4.1-3.9-3 0-4.9 2.3-4.9 4.6h.5c.2-1 .7-1.8 1.6-1.8 1 0 1.9.6 1.9 2.8v6.4c-3 .1-4.7 1.8-4.7 3.8 0 1.3.6 3.3 2.7 3.3l.1-.4c-.7-.3-.9-.7-.9-1.1 0-.9.9-1.3 2.1-1.3h.6v10.1c-2.4.8-3.5 2.6-3.5 4.5 0 2.7 2.2 4.8 5.4 4.8 2.3 0 4.2-.4 6.3-.9 1.7-.3 3.7-.7 4.7-.7 1.2 0 1.8.6 1.8 1.5 0 1.1-.5 1.6-1.2 1.7l.1.4c2.7-.5 4.2-2.1 4.2-4.5 0-2.5-2.4-4-5-4-1.4 0-4 .4-6.1.9-2.3.5-4.5.7-5.2.7-1.1 0-2.5-.5-2.5-2.1 0-1.4 1.1-2.4 3.9-2.4 1.5 0 3.2.2 5.1.7 2 .4 3.7 1 5.4 1 2.4 0 4.5-.9 4.5-4.3v-20.1l1.9-1.6zm-6.7 10.1c-.4.5-1.1.9-1.9.9-.9 0-1.6-.5-2-.9v-7.3l1.7-1.1 2.3 2.1v6.3zm0 4.8c-.4-.4-1.1-.8-1.9-.8s-1.6.5-2 .8v-4.3c.3.3 1.1.9 2 .9s1.6-.5 1.9-.9zm0 7.6c0 1.3-.9 2.6-2.6 2.6-.3 0-1 0-1.3-.1v-9.5c.4-.4 1.1-.9 2-.9.8 0 1.5.5 1.9.9zm22.3-11.5-5.3-3.8-7.9 4.5v10.6l-1.6 1.3.2.3 1.3-1 5.2 3.8 8.1-4.9zm-8.6 10.2v-11.6l4.1 3v11.6zm24.2-13.6h-.3c-.4.4-1 .7-1.4.7-.6 0-1.4-.4-1.8-.9h-.3l-2.8 3-2.8-3-4.8 3.3.2.4 1.3-.9 1.7 1.8v10.3l-2.2 1.6.3.3 1-.7 3.9 3.3 5.1-3.4-.2-.3-1.4.9-1.9-1.7v-11.5c.8.9 1.8 1.7 2.9 1.7 2.1 0 3.3-2.4 3.5-4.9zm19.6 15.7-5.6 3.6-7.5-11.4 5.3-8.3h.3c.6.6 1.7 1.3 2.7 1.3 1.1 0 1.9-.6 2.4-1.3h.3c-.2 3.3-2.4 5.2-4.1 5.2s-2.5-.8-3.4-1.3l-.5.7 8.2 12.1 1.6-1zm-17.9-1-2.2 1.6.3.3 1-.7 3.6 3.3 4.9-3.3-.3-.3-1.2.8-1.6-1.6v-25.2h-.3l-5.9 3.9v.3c.6.3 1.7.5 1.7 2.5zm45-21.6c0-3.2-3-4.2-5.6-4v.5c1.5 0 2.7.5 2.7 1.6 0 .7-.5 1.6-2 1.6-1.2 0-3.5-.7-5.4-1.3-2.1-.7-4-1.4-5.6-1.4-3.2 0-5.6 2.4-5.6 5.3 0 2.4 1.8 3.2 2.5 3.5l.2-.4c-.5-.3-.9-.7-.9-1.6 0-.7.6-1.8 2.3-1.8 1.5 0 3.4.7 6 1.4 2.2.6 4.7 1.2 6 1.4v5l-2.5 2.1v.2l2.5 2.2v6.9c-1.3.7-2.8.9-4 .9-2.4 0-4.6-.6-6.4-2.6l6.7-3.2v-11.1l-8.2 3.7c.9-2.2 2.6-3.6 4.3-4.7l-.1-.4c-4.9 1.3-9.3 5.8-9.3 11.3 0 6.6 5.4 11.5 11.5 11.5 6.6 0 10.8-5.2 10.7-10.6h-.4c-1 2.1-2.4 4.1-4.2 5.1v-6.8l2.6-2.1v-.2l-2.6-2.1v-5c2.2-.2 4.8-1.9 4.8-4.9zm-14.2 18-2 1c-1.1-1.5-1.9-3.5-1.9-6.2 0-1.1.1-2.5.5-3.5l3.4-1.5zm19.7-19.5h-.2l-3.3 2.8v.2l2.8 3.1h.3l3.3-2.7v-.2zm5 24.1-1.2.8-1.6-1.6v-11.3l1.6-1.2-.3-.4-1.2.9-2.8-3.4-4.7 3.3.3.4 1.2-.8 1.4 1.8v10.6l-2.1 1.6.2.3 1.1-.8 3.6 3.3 4.9-3.3zm27.2-.2-1.2.8-1.7-1.6v-11.1l1.7-1.2-.3-.4-1.4 1.1-3.7-3.5-4.8 3.4-3.7-3.4-4.7 3.4-2.9-3.4-4.7 3.3.2.4 1.2-.8 1.6 1.7v10.6l-1.3 1.3 3.7 3.1 3.6-3.3-1.5-1.4v-11l1.4-.9 2.5 2.3v9.9l-1.2 1.3 3.8 3.1 3.5-3.3-1.5-1.4v-11.1l1.2-.8 2.7 2.3v9.7l-1.1 1.1 3.8 3.5 5-3.4zm14.2-2.5-4 3.1-4.2-3.3v-1.9l7.7-5.2v-.2l-3.8-5.9-8.4 4.5v11.1l5.6 4.1 7.4-5.8zm-8.2-2.7v-8l.3-.2 3.6 5.6zm23.1-1.5-3.1-2.4c2.1-1.8 2.9-4.3 2.9-5.9 0-.2 0-.7-.1-1h-.4c-.3.9-.9 1.6-2.2 1.6-1.2 0-2.1-.7-2.9-1.6l-7.3 4v5.9l2.7 2.1c-2.8 2.4-3.3 4.2-3.3 5.4 0 1.6.7 2.8 2.1 3.3l.2-.4c-.3-.3-.7-.5-.7-1.2 0-.5.7-1.3 1.9-1.3 1.6 0 2.6 1.1 3.1 1.7l7.1-4.2zm-1.8-4.9c-1.1 1.9-3.6 3.8-5 4.9l-1.8-1.4v-5.8c.7 1.6 2.4 2.9 4.3 2.9 1.1 0 1.7-.2 2.5-.6zm-2.9 13c-.8-1.8-2.7-3.1-4.7-3.1-.5 0-1.8 0-3.1.8.7-1.2 2.9-3.6 5.7-5.2l2 1.6v5.9z",fill:"#000"}))};var a=i(n("q1tI"))},fdyL:function(e,t,n){"use strict";var i=n("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.productsWithSignupRedirectLookup=t.isSubOnlyWithFreeTrial=t.isSubOnly=t.isFreeNewsletter=t.handleRedirectForNewsletter=t.getNewsletterCardButtonStates=t.getInArticleSignupText=t.getInArticleConfirmationText=t.getInArticleConfirmationCTAText=t.createNewsletterSignupRedirectUrl=t.convertProductDefaultsToSamizdatData=t.MANAGE_YOUR_PLACES_PATH=void 0;var a=i(n("lSNA")),o=n("T25G"),r=n("5E+G"),s=i(n("Ds/+")),l=i(n("tPsl"));function c(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function u(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?c(Object(n),!0).forEach((function(t){(0,a.default)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):c(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}t.isFreeNewsletter=function(e){return e instanceof s.default};var d=t.isSubOnly=function(e){return e instanceof l.default},p=(t.isSubOnlyWithFreeTrial=function(e){return d(e)&&e.allowsFreeTrial()},t.getNewsletterCardButtonStates=function(e,t,n,i){var a=d(e)&&e.canTakeFreeTrial(t)&&!i&&!n;return{showTryFor4Weeks:a,showCircularPlusButton:!a||a&&(i||n),showCheckmark:i||n}},t.convertProductDefaultsToSamizdatData=function(e,t){var n=u(u({},e),{},{productCode:t});return{newsletterId:n.productCode||"",title:(null==n?void 0:n.title)||"",caption:(null==n?void 0:n.caption)||"",frequency:(null==n?void 0:n.frequency)||"",altText:(null==n?void 0:n.altText)||"",sampleUrl:(null==n?void 0:n.sampleUrl)||"",thumbImageUrl:(null==n?void 0:n.thumbImg)||"",allowedEntitlement:(null==n?void 0:n.allowedEntitlement)||"",subscriptionPageLink:(null==n?void 0:n.subscriptionPageLink)||"",isOnsiteFreeTrialEnabled:(null==n?void 0:n.isOnsiteFreeTrialEnabled)||0}},t.getInArticleSignupText=function(e,t){return d(e)?e.canTakeFreeTrial(t)?r.IN_ARTICLE_CTA_TEXT[r.SIGNUP_TYPE.FREE_TRIAL]:e.isEligible(t)?r.IN_ARTICLE_CTA_TEXT[r.SIGNUP_TYPE.SUBSCRIBER]:r.IN_ARTICLE_CTA_TEXT[r.SIGNUP_TYPE.NEED_SUBSCRIPTION]:r.IN_ARTICLE_CTA_TEXT[r.SIGNUP_TYPE.DEFAULT]},t.getInArticleConfirmationText=function(e){var t=e.getData().title,n=(0,o.nameWithArticle)(t);return d(e)?e.allowsFreeTrial()?t?"You are now signed up for 4 weeks of ".concat(n," newsletter."):"Thank you for signing up for 4 week complimentary access.":"You are now signed up for ".concat(n," newsletter. Thank you for being a Times subscriber."):"Thank you for signing up. We have other newsletters you may enjoy."},t.getInArticleConfirmationCTAText=function(e){return d(e)?e.allowsFreeTrial()?"Explore more subscriber-only newsletters.":"Explore more newsletters.":"Take a look."},t.MANAGE_YOUR_PLACES_PATH="/your-places-global-update",t.productsWithSignupRedirectLookup={YPGU:{name:"Your Places: Global Update",baseRedirectUrl:"https://nytimes.com/your-places-global-update"},YPEW:{name:"Your Places: Extreme Weather",baseRedirectUrl:"https://nytimes.com/interactive/2023/us/extreme-weather-forecast-maps.html"}}),f=t.createNewsletterSignupRedirectUrl=function(e){var t=e.productCode,n=e.signup_origin,i=(p[t]||{}).baseRedirectUrl;if(!i)return null;var a=new URL(i),o=n?"&signup_origin=".concat(n):"",r="?".concat("signup_redirect=true").concat(o);return"".concat(window.location.origin).concat(a.pathname).concat(r)};t.handleRedirectForNewsletter=function(e,t){var n=f({productCode:null==e?void 0:e.productCode,signup_origin:t});n&&window.location.assign(n)}},fmuu:function(e,t,n){"use strict";var i=n("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};if(!u[e.__typename])return console.warn('Unrecognized format "'.concat(e.__typename,'"')),t||null;return u[e.__typename](e,t,n,i)};var a=i(n("G03P")),o=i(n("HTGc")),r=i(n("3HYe")),s=i(n("SoJ3")),l=i(n("x4ns")),c=i(n("dn9S")),u={BoldFormat:o.default,ItalicFormat:r.default,LinkFormat:a.default,DropcapFormat:s.default,SuperscriptFormat:l.default,SubscriptFormat:c.default}},fpec:function(e,t,n){"use strict";var i=n("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=i(n("q1tI")),o=(i(n("17x9")),i(n("wXC7"))),r=n("Jqp9"),s=n("V6Yu"),l=i(n("3XBt")),c=i(n("TvEp")),u=function(e){var t,n=(0,r.useTheme)();if(!e)return null;var i=e.children,u=e.content,d=e.hangPunctuation,p=e.customOffset,f=e.textAlign,m=e.className,h=e.id,g={className:(0,r.cx)(m,"rightToLeft"===(null==n?void 0:n.languageDirection)?o.default.textAlign.right:o.default.textAlign[f.toLowerCase()])};h?g.id=h:u&&(g.id="link-".concat((0,s.createHexHash)((0,s.textFromOakContent)(u))));var y=a.default.createElement(c.default,null);if(y=a.default.createElement(c.default,{id:g.id,className:g.className,"data-testid":"headline"},i),d&&u&&null!==(t=u[0])&&void 0!==t&&t.text){var v=u[0].text;y=a.default.createElement(l.default,{customOffset:p,text:v},y)}return y};u.defaultProps={children:null,hangPunctuation:!1,content:null,customOffset:"",textAlign:"left",id:null};t.default=u},"g+Cy":function(e,t,n){"use strict";var i,a,o=n("gcR/"),r=n.n(o),s=(n("q1tI"),n("wXC7")),l=n.n(s),c=function(e){var t=e.className,n=e.fill;return r()("svg",{viewBox:"0 0 44 57",className:t,"aria-hidden":!0},void 0,i||(i=r()("defs",{})),r()("g",{stroke:"none",strokeWidth:"1",fill:"none",fillRule:"evenodd"},void 0,r()("g",{fill:n},void 0,a||(a=r()("path",{d:"M43.6284633,34.8996508 C41.83393,39.6379642 38.53153,43.2989842 33.7932167,45.2371375 L33.7932167,34.8996508 L39.46463,29.8027175 L33.7932167,24.7777375 L33.7932167,17.6709842 C38.9621033,17.3120775 42.5514567,13.5074375 42.5514567,8.84136417 C42.5514567,2.73966417 36.7369967,0.5859375 33.4345967,0.5859375 C32.71707,0.5859375 31.9270167,0.5859375 30.7789167,0.872890833 L30.7789167,1.16013083 C31.20949,1.16013083 31.8550633,1.08846417 32.0709233,1.08846417 C34.36827,1.08846417 36.0911367,2.16518417 36.0911367,4.2469575 C36.0911367,5.82620417 34.7988433,7.40545083 32.5017833,7.40545083 C26.83037,7.40545083 20.15419,2.81133083 12.9038167,2.81133083 C6.44292333,2.81133083 1.99242333,7.6207375 1.99242333,12.5023842 C1.99242333,17.3120775 4.79201,18.8913242 7.73521667,19.9680442 L7.80717,19.6808042 C6.87378333,19.1066108 6.22763667,18.1018442 6.22763667,16.5223108 C6.22763667,14.3688708 8.23774333,12.5743375 10.7503767,12.5743375 C16.8520767,12.5743375 26.68675,17.6709842 32.7887367,17.6709842 L33.36293,17.6709842 L33.36293,24.8496908 L27.6918033,29.8027175 L33.36293,34.8996508 L33.36293,45.3804708 C30.9942033,46.2416175 28.5532367,46.6010975 26.0406033,46.6010975 C16.5648367,46.6010975 10.53509,40.8577308 10.53509,31.3102975 C10.53509,29.0135242 10.8220433,26.7878442 11.46819,24.6341175 L16.20593,22.5526308 L16.20593,43.6576042 L25.8253167,39.4226775 L25.8253167,17.8146042 L11.6834767,24.1315908 C13.1191033,19.9680442 16.06231,16.9531708 19.5799967,15.2303042 L19.50833,15.0150175 C10.0322767,17.0967908 0.84375,24.2754975 0.84375,35.0432708 C0.84375,47.4622442 11.32457,56.0768642 23.5285433,56.0768642 C36.4497567,56.0768642 43.7720833,47.4622442 43.84375,34.8996508 L43.6284633,34.8996508 Z"})))))};c.displayName="TLogoIcon",c.defaultProps={className:void 0,fill:l.a.color.black},t.a=c},g4BQ:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.playbackAnimationClass=void 0;var i=n("Jqp9");t.playbackAnimationClass=(0,i.css)("height:14px;width:14px;margin-right:10px;")},gJ8K:function(e,t,n){"use strict";var i=this&&this.__createBinding||(Object.create?function(e,t,n,i){void 0===i&&(i=n);var a=Object.getOwnPropertyDescriptor(t,n);a&&!("get"in a?!t.__esModule:a.writable||a.configurable)||(a={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,i,a)}:function(e,t,n,i){void 0===i&&(i=n),e[i]=t[n]}),a=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&i(t,e,n);return a(t,e),t},r=this&&this.__awaiter||function(e,t,n,i){return new(n||(n=Promise))((function(a,o){function r(e){try{l(i.next(e))}catch(e){o(e)}}function s(e){try{l(i.throw(e))}catch(e){o(e)}}function l(e){var t;e.done?a(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(r,s)}l((i=i.apply(e,t||[])).next())}))},s=this&&this.__generator||function(e,t){var n,i,a,o,r={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(s){return function(l){return function(s){if(n)throw new TypeError("Generator is already executing.");for(;o&&(o=0,s[0]&&(r=0)),r;)try{if(n=1,i&&(a=2&s[0]?i.return:s[0]?i.throw||((a=i.return)&&a.call(i),0):i.next)&&!(a=a.call(i,s[1])).done)return a;switch(i=0,a&&(s=[2&s[0],a.value]),s[0]){case 0:case 1:a=s;break;case 4:return r.label++,{value:s[1],done:!1};case 5:r.label++,i=s[1],s=[0];continue;case 7:s=r.ops.pop(),r.trys.pop();continue;default:if(!(a=r.trys,(a=a.length>0&&a[a.length-1])||6!==s[0]&&2!==s[0])){r=0;continue}if(3===s[0]&&(!a||s[1]>a[0]&&s[1]<a[3])){r.label=s[1];break}if(6===s[0]&&r.label<a[1]){r.label=a[1],a=s;break}if(a&&r.label<a[2]){r.label=a[2],r.ops.push(s);break}a[2]&&r.ops.pop(),r.trys.pop();continue}s=t.call(e,r)}catch(e){s=[6,e],i=0}finally{n=a=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,l])}}},l=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.cancelBffMutationString=void 0;var c=o(n("q1tI")),u=n("Jqp9"),d=n("X6oL"),p=l(n("aV8g")),f=n("syiw"),m=n("K5H2"),h=n("FY2l"),g=l(n("5UIh")),y=n("HDG5"),v=n("6gWn"),b=n("BFLc"),_=o(n("xn+k")),w=n("etPP");t.cancelBffMutationString="mutation CreateComplimentarySubscription(\n  $data: CreateComplimentarySubscriptionInput!\n) {\n  createComplimentarySubscription(\n    createComplimentarySubscriptionInput: $data\n  ) {\n    success\n    message\n    newSubscriptionId\n    endDate\n  }\n}";t.default=function(e){var n,i,a,o,l,x,k,O,T,C,E=this,S=e.unit,P=(0,c.useState)(!1),I=P[0],M=P[1],A=(0,f.useMessageSelection)({config:{name:"dock"}}),j=(0,y.useUserState)(),N=(0,d.useTracking)(),L="/"===(0,h.getPathName)()?"homepage":"article",D=(0,c.useState)(!1),R=D[0],B=D[1],z=(0,c.useState)(!1),F=z[0],U=z[1],H=(0,c.useState)(!1),W=H[0],q=H[1],V=(0,c.useState)(""),G=V[0],Y=V[1],X=function(e){return"prd"===e?"https://myaccount.nytimes.com":"https://myaccount.stg.nytimes.com"}((0,m.useMessagingContext)().env),Z=null===(i=null===(n=null==A?void 0:A.response)||void 0===n?void 0:n.subInfo())||void 0===i?void 0:i.filter((function(e){return"ACTIVE"===e.status})),J=Z&&(null===(a=Z[0])||void 0===a?void 0:a.subscriptionID),K={currentSubscriptionId:J},$=(null===(o=S.content)||void 0===o?void 0:o.audience)||"",Q=(null===(l=null==A?void 0:A.response)||void 0===l?void 0:l.campaign())||"",ee=new URLSearchParams({conid:J||""}),te="".concat("https://nyt.qualtrics.com/jfe/form/SV_2sI6T8b9Z7r2zSS","?").concat(ee),ne=function(){r(E,void 0,void 0,(function(){var e,n,i,a,o,r,l,c,u;return s(this,(function(s){switch(s.label){case 0:B(!0),s.label=1;case 1:return s.trys.push([1,4,5,6]),[4,fetch("".concat(X,"/svc/cancel/query"),{method:"POST",credentials:"include",mode:"cors",headers:{"Content-Type":"application/json"},body:JSON.stringify({query:t.cancelBffMutationString,operationName:"CreateComplimentarySubscription",variables:{data:K}})})];case 2:return[4,s.sent().json()];case 3:return e=s.sent(),(null===(o=null===(a=null==e?void 0:e.data)||void 0===a?void 0:a.createComplimentarySubscription)||void 0===o?void 0:o.success)?(n=null===(l=null===(r=null==e?void 0:e.data)||void 0===r?void 0:r.createComplimentarySubscription)||void 0===l?void 0:l.newSubscriptionId,i=null===(u=null===(c=null==e?void 0:e.data)||void 0===c?void 0:c.createComplimentarySubscription)||void 0===u?void 0:u.endDate,q(!0),Y(i),(0,b.trackTransactionSuccess)(N,L,$,Q,n,i),(0,b.trackSubscriptionStartEvent)(N,n)):(U(!0),(0,b.trackTransactionError)(N,L,$,Q)),[3,6];case 4:return s.sent(),U(!0),(0,b.trackTransactionError)(N,L,$,Q),[3,6];case 5:return B(!1),[7];case 6:return[2]}}))})),(0,b.trackCTAClick)(N,L,$,Q)},ie=function(){(0,b.trackOnboardingClick)(N,L,$,Q,"/welcome-subscriber?allAccessUser=true"),window.location.href="/welcome-subscriber?allAccessUser=true"},ae=W?"All set. Your access begins now.":F?"Unable to start access.":"You’ve gained three months of free expanded access.",oe=c.default.createElement("div",{className:_.headerText}," ",ae),re=c.default.createElement("div",{className:_.descriptionBox},c.default.createElement("div",{className:_.confirmationTitle},"You have three months of expanded access at your current rate."),c.default.createElement("div",{className:_.confirmationSubtitleBox},c.default.createElement("div",{className:_.subscriptionText},"Trial expires: ",(C=new Date(G),Number.isNaN(C.valueOf())?"Invalid Date":new Intl.DateTimeFormat("en-US",{timeZone:"UTC",month:"long",day:"numeric",year:"numeric"}).format(C))),c.default.createElement("div",{className:_.subscriptionText},"You won't be charged at the end."))),se=c.default.createElement("div",{className:_.loaderBox},c.default.createElement("div",{className:_.spinner},c.default.createElement("div",{className:_.bar1}),c.default.createElement("div",{className:_.bar2}),c.default.createElement("div",{className:_.bar3}),c.default.createElement("div",{className:_.bar4}),c.default.createElement("div",{className:_.bar5}),c.default.createElement("div",{className:_.bar6}),c.default.createElement("div",{className:_.bar7}),c.default.createElement("div",{className:_.bar8}),c.default.createElement("div",{className:_.bar9}),c.default.createElement("div",{className:_.bar10}))),le=c.default.createElement("div",null,!F&&c.default.createElement("div",{className:_.descriptionBox},c.default.createElement("h3",{className:_.title1},"Thanks for being a news subscriber."),c.default.createElement("p",{className:_.title2},"Explore Games, Cooking and more - all at your current rate. You won't be charged more at the end."),c.default.createElement("div",{className:_.complianceLinksDesktop},c.default.createElement(w.Button,{component:"a",href:"https://www.nytimes.com/privacy/privacy-policy",testId:"privacy-policy-lnk-desktop",target:w.Target.Blank,className:_.complianceLink},"Privacy policy")," ",c.default.createElement(w.Button,{component:"a",href:"https://help.nytimes.com/hc/en-us/articles/115014893428-Terms-of-Service",testId:"terms-of-service-lnk-desktop",target:w.Target.Blank,className:_.complianceLink},"Terms of Service"))),F&&c.default.createElement("p",{className:_.header},"We’re having a technical issue right now and are unable to start your access.")),ce=W?c.default.createElement(w.Button,{className:_.actionButton,testId:"start-onboarding-btn",type:"button",onClick:ie},"Get started with All Access"):F?c.default.createElement(w.Button,{className:_.actionButton,testId:"try-again-btn",type:"button",onClick:ne,disabled:R},"Try again"):c.default.createElement(c.default.Fragment,null,c.default.createElement(w.Button,{className:_.offerButton,testId:"accept-offer-btn",type:"button",onClick:ne,disabled:R},"Access now"),c.default.createElement("div",{className:_.surveyText},"Not interested?"," ",c.default.createElement(w.Button,{component:"a",className:_.link,testId:"survey-lnk",href:te,target:w.Target.Blank,onClick:function(){return(0,b.trackSurveyClick)(N,L,$,Q,te)}},"Tell us why"),c.default.createElement("div",{className:_.complianceLinksMobile},c.default.createElement(w.Button,{component:"a",href:"https://www.nytimes.com/privacy/privacy-policy",testId:"privacy-policy-lnk-mobile",target:w.Target.Blank,className:_.complianceLink},"Privacy policy")," ",c.default.createElement(w.Button,{component:"a",href:"https://help.nytimes.com/hc/en-us",testId:"terms-of-service-lnk-mobile",target:w.Target.Blank,className:_.complianceLink},"Help")))),ue=c.default.createElement("div",{className:(0,u.cx)(_.mainContent)},c.default.createElement("div",{className:_.headerLogo},c.default.createElement(p.default,null)),W?re:le,c.default.createElement("div",{className:_.ctaContainer},ce));if(A.loading)return null;if(!I){var de=null===(k=null===(x=null==A?void 0:A.response)||void 0===x?void 0:x.userstate())||void 0===k?void 0:k.messageSelectionMessageCaps,pe=null;if(de)if((me=de).forEach((function(e){var t,n;"dock"===(null==e?void 0:e.unit)&&(null==e?void 0:e.campaign)===(null===(t=null==A?void 0:A.response)||void 0===t?void 0:t.campaign())&&(null==e?void 0:e.audience)===(null===(n=null==A?void 0:A.response)||void 0===n?void 0:n.audience())&&(pe=e)})),null!==pe){var fe=pe;fe.viewCount+=1,fe.lastSeenOn=(new Date).toISOString(),j.update({messageSelectionMessageCaps:me})}if(!pe){var me=[];de&&(me=de),me.push({unit:"dock",campaign:null===(O=null==A?void 0:A.response)||void 0===O?void 0:O.campaign(),audience:null===(T=null==A?void 0:A.response)||void 0===T?void 0:T.audience(),lastSeenOn:(new Date).toISOString(),viewCount:1,dismissed:!1}),j.update({messageSelectionMessageCaps:me})}M(!0)}return c.default.createElement(g.default,{testId:"onsite-messaging-unit-".concat(null===v.config||void 0===v.config?void 0:v.config.name),"data-campaign":null==S?void 0:S.campaign,"data-audience":null==S?void 0:S.audience,className:_.dockBorder,unit:S,contentID:"CH_AT-RISK_SUBSCRIBER_RETENTION_2312",dockID:"expand",header:oe,card:R?se:ue,isDockDismissible:W,isDockExpandable:!W,minimized:!0,headingClassStyle:_.headingClassStyle,headingInfoContainerStyle:_.headingInfoContainerStyle})}},"gJA+":function(e,t,n){"use strict";var i=this&&this.__makeTemplateObject||function(e,t){return Object.defineProperty?Object.defineProperty(e,"raw",{value:t}):e.raw=t,e};Object.defineProperty(t,"__esModule",{value:!0}),t.otherSubsHeaderWrapperStyle=t.otherSubsCtaIconWrapperStyle=t.otherSubsDividerStyle=t.otherSubsCtaActionTextContainerStyle=t.otherSubsCtaContainerStyle=t.otherSubsHeadingClassStyle=t.otherSubsHeadingClassName=t.otherSubsClassName=t.billingTerms=t.nowrap=t.subHeader=t.header=t.headerLogo=t.headerContainer=t.button=t.ctaContainer=t.mainContent=t.headerText=void 0;var a,o,r,s,l,c,u,d,p,f,m,h,g,y,v,b,_,w,x=n("Jqp9"),k=n("lVLo");t.headerText=(0,x.css)(a||(a=i(["\n  font-family: ",";\n  font-size: 16px;\n  font-weight: ",";\n  line-height: 130%;\n  text-align: left;\n  @media (min-width: ","px) {\n    text-align: center;\n  }\n  width: 100%;\n"],["\n  font-family: ",";\n  font-size: 16px;\n  font-weight: ",";\n  line-height: 130%;\n  text-align: left;\n  @media (min-width: ","px) {\n    text-align: center;\n  }\n  width: 100%;\n"])),k.fonts.franklin,k.fontWeights.medium,k.widths.medium),t.mainContent=(0,x.css)(o||(o=i(["\n  display: flex;\n  align-items: center;\n  background-color: ",";\n  font-family: ",";\n  border-radius: 5px;\n  padding: 20px;\n  flex-direction: column;\n  margin: 0 20px 24px;\n  align-self: flex-start;\n  max-width: 240px;\n  text-align: center;\n\n  @media (min-width: ","px) {\n    max-width: unset;\n    width: calc(100% - 80px);\n  }\n\n  @media (min-width: ","px) {\n    flex-direction: row;\n    max-width: 1180px;\n    justify-content: space-between;\n    gap: 40px;\n    width: calc(100% - 120px);\n    padding: 24px 40px;\n  }\n\n  @media (min-width: ","px) {\n    gap: 120px;\n    width: calc(100% - 168px);\n    margin: 0 auto 24px;\n    padding: 24px 64px;\n  }\n"],["\n  display: flex;\n  align-items: center;\n  background-color: ",";\n  font-family: ",";\n  border-radius: 5px;\n  padding: 20px;\n  flex-direction: column;\n  margin: 0 20px 24px;\n  align-self: flex-start;\n  max-width: 240px;\n  text-align: center;\n\n  @media (min-width: ","px) {\n    max-width: unset;\n    width: calc(100% - 80px);\n  }\n\n  @media (min-width: ","px) {\n    flex-direction: row;\n    max-width: 1180px;\n    justify-content: space-between;\n    gap: 40px;\n    width: calc(100% - 120px);\n    padding: 24px 40px;\n  }\n\n  @media (min-width: ","px) {\n    gap: 120px;\n    width: calc(100% - 168px);\n    margin: 0 auto 24px;\n    padding: 24px 64px;\n  }\n"])),k.colors.veryDarkGrey,k.fonts.franklin,k.widths.verySmall,k.widths.medium,k.widths.large),t.ctaContainer=(0,x.css)(r||(r=i(["\n  display: flex;\n  flex-direction: column;\n  width: 100%;\n\n  @media (min-width: ","px) {\n    width: 220px;\n    justify-content: center;\n    align-items: end;\n    flex: 0;\n    margin-top: 0;\n  }\n"],["\n  display: flex;\n  flex-direction: column;\n  width: 100%;\n\n  @media (min-width: ","px) {\n    width: 220px;\n    justify-content: center;\n    align-items: end;\n    flex: 0;\n    margin-top: 0;\n  }\n"])),k.widths.medium),t.button=(0,x.css)(s||(s=i(["\n  text-decoration: none;\n  font-size: 16px;\n  font-weight: ",";\n  line-height: 130%;\n  color: ",";\n  background-color: ",";\n  margin-bottom: 12px;\n\n  display: flex;\n  flex-direction: column;\n  text-align: center;\n  border-radius: 3px;\n  cursor: pointer;\n  width: 200px;\n  height: 44px;\n  padding: 10px 0;\n  letter-spacing: -0.05px;\n  flex: 0;\n\n  @media (min-width: ","px) {\n    width: 220px;\n    align-self: left;\n    flex: 1;\n  }\n"],["\n  text-decoration: none;\n  font-size: 16px;\n  font-weight: ",";\n  line-height: 130%;\n  color: ",";\n  background-color: ",";\n  margin-bottom: 12px;\n\n  display: flex;\n  flex-direction: column;\n  text-align: center;\n  border-radius: 3px;\n  cursor: pointer;\n  width: 200px;\n  height: 44px;\n  padding: 10px 0;\n  letter-spacing: -0.05px;\n  flex: 0;\n\n  @media (min-width: ","px) {\n    width: 220px;\n    align-self: left;\n    flex: 1;\n  }\n"])),k.fontWeights.semiBold,k.colors.veryDarkGrey,k.colors.white,k.widths.medium),t.headerContainer=(0,x.css)(l||(l=i(["\n  align-self: start;\n  color: ",";\n  margin: 0 auto;\n\n  @media (min-width: ","px) {\n    margin: 0;\n    align-self: center;\n  }\n"],["\n  align-self: start;\n  color: ",";\n  margin: 0 auto;\n\n  @media (min-width: ","px) {\n    margin: 0;\n    align-self: center;\n  }\n"])),k.colors.white,k.widths.medium),t.headerLogo=(0,x.css)(c||(c=i(["\n  display: none;\n\n  @media (min-width: 845px) {\n    display: block;\n    & > svg {\n      width: 176px;\n      height: 24px;\n    }\n  }\n"],["\n  display: none;\n\n  @media (min-width: 845px) {\n    display: block;\n    & > svg {\n      width: 176px;\n      height: 24px;\n    }\n  }\n"]))),t.header=(0,x.css)(u||(u=i(["\n  font-family: ",";\n  font-size: 16px;\n  font-weight: ",";\n  line-height: 130%;\n  margin-bottom: 16px;\n  text-align: left;\n  width: 100%;\n\n  @media (min-width: ","px) {\n    margin-bottom: 0px;\n    max-width: 640px;\n  }\n\n  @media (min-width: ","px) {\n    font-size: 18px;\n  }\n"],["\n  font-family: ",";\n  font-size: 16px;\n  font-weight: ",";\n  line-height: 130%;\n  margin-bottom: 16px;\n  text-align: left;\n  width: 100%;\n\n  @media (min-width: ","px) {\n    margin-bottom: 0px;\n    max-width: 640px;\n  }\n\n  @media (min-width: ","px) {\n    font-size: 18px;\n  }\n"])),k.fonts.franklin,k.fontWeights.semiBold,k.widths.medium,k.widths.mediumLarge),t.subHeader=(0,x.css)(d||(d=i(["\n  display: inline;\n  font-family: ",";\n  font-size: 16px;\n  line-height: 130%;\n  font-weight: ",";\n  @media (min-width: ","px) {\n    font-size: 18px;\n  }\n"],["\n  display: inline;\n  font-family: ",";\n  font-size: 16px;\n  line-height: 130%;\n  font-weight: ",";\n  @media (min-width: ","px) {\n    font-size: 18px;\n  }\n"])),k.fonts.franklin,k.fontWeights.medium,k.widths.mediumLarge),t.nowrap=(0,x.css)(p||(p=i(["\n  white-space: nowrap;\n"],["\n  white-space: nowrap;\n"]))),t.billingTerms=(0,x.css)(f||(f=i(["\n  font-family: ",";\n  font-weight: 500;\n  line-height: 130%;\n  font-size: 14px;\n  color: ",";\n  text-align: left;\n\n  @media (min-width: ","px) {\n    text-align: center;\n  }\n"],["\n  font-family: ",";\n  font-weight: 500;\n  line-height: 130%;\n  font-size: 14px;\n  color: ",";\n  text-align: left;\n\n  @media (min-width: ","px) {\n    text-align: center;\n  }\n"])),k.fonts.franklin,k.colors.gainsboro,k.widths.medium),t.otherSubsClassName=(0,x.css)(m||(m=i(["\n  border-top: 1px solid ",";\n  right: 0px;\n"],["\n  border-top: 1px solid ",";\n  right: 0px;\n"])),k.colors.veryDarkGrey),t.otherSubsHeadingClassName=(0,x.css)(h||(h=i(["\n  width: 100%;\n  font-family: ",";\n  border-radius: 0;\n  transition:\n    background-color 250ms linear,\n    0.15s padding ease-out;\n"],["\n  width: 100%;\n  font-family: ",";\n  border-radius: 0;\n  transition:\n    background-color 250ms linear,\n    0.15s padding ease-out;\n"])),k.fonts.franklin),t.otherSubsHeadingClassStyle=(0,x.css)(g||(g=i(["\n  display: flex;\n  align-items: center;\n  justify-content: space-between;\n  height: 100%;\n  min-width: 244px;\n  max-width: 1308px;\n  /* stylelint-disable-next-line declaration-no-important */\n  -webkit-font-smoothing: antialiased !important;\n\n  margin: 0 20px;\n\n  @media (min-width: ","px) {\n    margin: 0 23px;\n  }\n\n  @media (min-width: 1262px) {\n    margin: 0 auto;\n  }\n"],["\n  display: flex;\n  align-items: center;\n  justify-content: space-between;\n  height: 100%;\n  min-width: 244px;\n  max-width: 1308px;\n  /* stylelint-disable-next-line declaration-no-important */\n  -webkit-font-smoothing: antialiased !important;\n\n  margin: 0 20px;\n\n  @media (min-width: ","px) {\n    margin: 0 23px;\n  }\n\n  @media (min-width: 1262px) {\n    margin: 0 auto;\n  }\n"])),k.widths.medium),t.otherSubsCtaContainerStyle=(0,x.css)(y||(y=i(["\n  display: flex;\n  justify-content: space-between;\n  flex-direction: row;\n\n  width: 36px;\n\n  @media (min-width: ","px) {\n    width: 44.5px;\n  }\n\n  @media (min-width: 500px) {\n    width: 16px;\n  }\n"],["\n  display: flex;\n  justify-content: space-between;\n  flex-direction: row;\n\n  width: 36px;\n\n  @media (min-width: ","px) {\n    width: 44.5px;\n  }\n\n  @media (min-width: 500px) {\n    width: 16px;\n  }\n"])),k.widths.verySmall),t.otherSubsCtaActionTextContainerStyle=(0,x.css)(v||(v=i(["\n  display: none;\n"],["\n  display: none;\n"]))),t.otherSubsDividerStyle=(0,x.css)(b||(b=i(["\n  @media (min-width: 500px) {\n    display: none;\n  }\n"],["\n  @media (min-width: 500px) {\n    display: none;\n  }\n"]))),t.otherSubsCtaIconWrapperStyle=(0,x.css)(_||(_=i(["\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  background-color: transparent;\n\n  height: 55px;\n  z-index: 1;\n  border-width: 0px;\n  padding-inline: 0px;\n\n  svg {\n    height: 16px;\n    margin: auto 0px auto auto;\n    width: 16px;\n  }\n"],["\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  background-color: transparent;\n\n  height: 55px;\n  z-index: 1;\n  border-width: 0px;\n  padding-inline: 0px;\n\n  svg {\n    height: 16px;\n    margin: auto 0px auto auto;\n    width: 16px;\n  }\n"]))),t.otherSubsHeaderWrapperStyle=(0,x.css)(w||(w=i(["\n  width: 100%;\n"],["\n  width: 100%;\n"])))},gUwe:function(e,t,n){"use strict";t.a="/vi-assets/static-assets/icon-gameplay_144x144-b6cc5e2a7cc27a43096274a02921329c.webp"},gX7T:function(e,t,n){"use strict";var i=n("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=i(n("lSNA")),o=i(n("q1tI")),r=n("Jqp9"),s=i(n("XlcC")),l=i(n("i+0r")),c=i(n("fpec")),u=i(n("oKgi")),d=i(n("HMjI")),p=n("mH4u"),f=n("V6Yu"),m=i(n("/UXH")),h=i(n("95Yr")),g=i(n("XMNT")),y=i(n("ApQM")),v=n("gmXO"),b=i(n("lraK")),_=i(n("z8TD")),w=n("IBfC"),x=n("L1jB"),k=function(e){var t,n,i,w,k=e.article,O=e.headline,T=e.summary,C=e.label,E=e.timestampBlock,S=e.lastMajorModification,P=e.media,I=e.shareTools,M=e.translations,A=e.newsStatus,j=e.timesExclusive,N=e.sponsoredByAd,L=e.brandBar,D=e.associatedNewsletter,R=e.showReadingTime,B=e.readingTimeRef,z=e.featuredAudio,F=e.uri,U=e.granted,H=e.messageCap,W=e.useOverlayContext,q=e.truncated,V=e.isHybrid,G=e.isInPreloadedWebview,Y=(0,r.useTheme)(),X="t-magazine"===(null==k||null===(t=k.section)||void 0===t?void 0:t.name)||"magazine"===(null==k||null===(n=k.section)||void 0===n?void 0:n.name);if(D)return o.default.createElement(v.HeaderOnsiteNewsletter,e);var Z=(0,p.getBylineData)(e),J=(null==E?void 0:E.timestamp)&&o.default.createElement("div",{ref:B,"data-testid":"reading-time-module"},o.default.createElement("div",{className:(0,x.getTimestampContainerClass)({theme:Y})},o.default.createElement(g.default,{showUpdatedTimestamp:E.showUpdatedTimestamp,canShowTime:!0,lastMajorModification:S,showReadingTime:R},E.timestamp),R&&!X&&o.default.createElement(b.default,{wordCount:k.wordCount,className:(0,x.readTimeClass)({theme:Y})}))),K=Z&&o.default.createElement(d.default,{headshots:Z.headshots,Headshot:h.default,data:Z}),$="SYNTHETIC_NARRATION"===(null==z||null===(i=z.asset)||void 0===i?void 0:i.audioContentType);return o.default.createElement(_.default,{newsStatus:o.default.createElement(y.default,{newsStatus:A}),timesExclusive:j,headline:(0,f.hasContent)(O)&&o.default.createElement(c.default,{balanceText:!0,hangPunctuation:!0,content:O.content},O.content.map(s.default)),summary:(0,f.hasContent)(T)&&o.default.createElement(u.default,{id:"article-summary"},T.content.map(s.default)),label:(0,f.hasContent)(C)&&o.default.createElement(l.default,null,C.content.map(s.default)),translationLinks:o.default.createElement(m.default,{translations:M}),media:(null==P||null===(w=P.props)||void 0===w?void 0:w.data)&&P,byline:K,timestamp:J,sponsoredByAd:N,brandBar:L,shareTools:o.default.createElement("div",{className:(0,r.cx)(x.responsiveCenteringClass,(0,a.default)({},x.syntheticAudioActionClass,$))},I),featuredAudio:z,uri:F,granted:U,messageCap:H,useOverlayContext:W,truncated:q,isHybrid:V,isInPreloadedWebview:G})};k.displayName="HeaderBasic",k.defaultProps=w.defaultProps;t.default=k},giFd:function(e,t,n){"use strict";var i=n("TqRt"),a=n("cDf5");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=i(n("q1tI")),r=(i(n("17x9")),function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=a(e)&&"function"!=typeof e)return{default:e};var n=s(t);if(n&&n.has(e))return n.get(e);var i={__proto__:null},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var r in e)if("default"!==r&&{}.hasOwnProperty.call(e,r)){var l=o?Object.getOwnPropertyDescriptor(e,r):null;l&&(l.get||l.set)?Object.defineProperty(i,r,l):i[r]=e[r]}return i.default=e,n&&n.set(e,i),i}(n("UMeL")));function s(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(s=function(e){return e?n:t})(e)}var l=function(e){var t=e.podcastName,n=e.hideTranscript;return o.default.createElement("button",{type:"button",className:r.backToClass,onClick:n},o.default.createElement("div",{className:r.leftArrowClass}),o.default.createElement("span",null,t&&"Back to ".concat(t)||"Back"))};l.displayName="BackTo",l.defaultProps={podcastName:void 0,hideTranscript:void 0};t.default=l},gmXO:function(e,t,n){"use strict";var i=n("TqRt"),a=n("cDf5");Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.HeaderOnsiteNewsletter=void 0;var o=i(n("q1tI")),r=n("Jqp9"),s=n("mH4u"),l=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=a(e)&&"function"!=typeof e)return{default:e};var n=_(t);if(n&&n.has(e))return n.get(e);var i={__proto__:null},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var r in e)if("default"!==r&&{}.hasOwnProperty.call(e,r)){var s=o?Object.getOwnPropertyDescriptor(e,r):null;s&&(s.get||s.set)?Object.defineProperty(i,r,s):i[r]=e[r]}return i.default=e,n&&n.set(e,i),i}(n("L1jB")),c=i(n("OB6K")),u=i(n("/UXH")),d=n("/tXv"),p=n("LbdL"),f=n("D/my"),m=n("eeq6"),h=n("AF3j"),g=n("hsyQ"),y=n("z5jG"),v=n("IBfC"),b=n("AhCu");function _(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(_=function(e){return e?n:t})(e)}var w=t.HeaderOnsiteNewsletter=function(e){var t,n,i,a,v,_,w,x,k=e.associatedNewsletter,O=e.headline,T=e.summary,C=e.timestampBlock,E=e.lastMajorModification,S=e.media,P=e.shareTools,I=e.translations,M=e.brandBar,A=e.isInAMP,j=(0,r.useTheme)(),N=(0,s.getBylineData)(e),L=(null==k||null===(t=k.newsletterProduct)||void 0===t||null===(n=t.newsletterProductData)||void 0===n?void 0:n.name)||"",D=(null==k||null===(i=k.newsletterProduct)||void 0===i||null===(a=i.newsletterProductData)||void 0===a?void 0:a.code)||"",R=null!==(null==k||null===(v=k.newsletterProduct)||void 0===v||null===(_=v.newsletterProductData)||void 0===_?void 0:_.allowedEntitlement),B="https://www.nytimes.com/newsletters/signup/".concat(D),z="opinion"===(null==j?void 0:j.section);return j.opinionHeaderRedesign?o.default.createElement(c.default,{theme:{summary:T,media:S}},o.default.createElement(l.default,{id:"header-onsite-newsletter-container",className:b.headerContainerClass},o.default.createElement("a",{href:B},o.default.createElement(d.OnsiteKicker,{isSubOnly:R}),o.default.createElement(f.OnsiteNewsletterName,{isInAMP:A,newsletterName:L})),z&&o.default.createElement("div",{className:b.opinionClass},M),o.default.createElement(p.OnsiteHeadline,{headline:O}),o.default.createElement(m.OnsiteSummary,{summary:T}),!z&&o.default.createElement("div",{className:l.responsiveCenteringClass},P),z&&o.default.createElement(g.OnsiteTimestamp,{timestampBlock:C,lastMajorModification:E}),(null==S||null===(x=S.props)||void 0===x?void 0:x.data)&&S,z&&o.default.createElement("div",{className:l.responsiveCenteringClass},P),o.default.createElement(y.OnsiteByline,{bylineData:N}),!z&&o.default.createElement(g.OnsiteTimestamp,{timestampBlock:C,lastMajorModification:E}),o.default.createElement(u.default,{translations:I}))):o.default.createElement(c.default,{theme:{summary:T,media:S}},o.default.createElement(l.default,{id:"header-onsite-newsletter-container",className:b.headerContainerClass},o.default.createElement("a",{href:B},o.default.createElement(d.OnsiteKicker,{isSubOnly:R}),o.default.createElement(f.OnsiteNewsletterName,{newsletterName:L})),z&&o.default.createElement("span",{className:b.opinionClass},M),o.default.createElement(p.OnsiteHeadline,{headline:O}),o.default.createElement(m.OnsiteSummary,{summary:T}),z&&o.default.createElement(h.OnsiteBylineTimestamp,{bylineData:N,timestampBlock:C,lastMajorModification:E,translations:I}),o.default.createElement("div",{className:l.responsiveCenteringClass},P),(null==S||null===(w=S.props)||void 0===w?void 0:w.data)&&S,!z&&o.default.createElement(h.OnsiteBylineTimestamp,{bylineData:N,timestampBlock:C,lastMajorModification:E,translations:I})))};w.displayName="HeaderOnsiteNewsletter",w.defaultProps=v.defaultProps;t.default=w},gojR:function(e,t,n){"use strict";var i=n("cr+I"),a=n.n(i),o=n("rWB7"),r=n("bLpx"),s=n("MEHp");t.a=function(e){var t=Object(o.b)(),n=Object(r.a)("bottomsheet"),i=n.loading,l=Object(s.e)({article:e,isBrowser:t,targeting:n,messageName:"REGISTERED_RECIRCULATION"}),c=Object(s.e)({article:e,isBrowser:t,targeting:n,messageName:"REGISTERED_RECIRCULATION_CONTROL"});return function(e){if(e){var t=a.a.parse(window.location.search);if(t["test-drawer"])return"BottomSheetRegi"===t["test-drawer"]}return!1}(t)?{loading:!1,isInVariant:!0,isInControl:!1}:{loading:i,isInVariant:l,isInControl:c}}},gtCS:function(e,t,n){"use strict";var i=n("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=i(n("q1tI")),o=(i(n("17x9")),n("Jqp9"));function r(e){var t=e.interactive,n=e.footerClass,i=e.metaClass,r=t.note,s=t.dataSource,l=t.credit;return a.default.createElement("footer",{id:"interactive-footer",className:(0,o.cx)(n,"interactive-footer")},r&&a.default.createElement("p",{"data-testid":"note",id:"interactive-notes",className:(0,o.cx)(i,"interactive-notes"),dangerouslySetInnerHTML:{__html:r}}),s&&a.default.createElement("p",{"data-testid":"source",id:"interactive-source",className:(0,o.cx)(i,"interactive-source"),dangerouslySetInnerHTML:{__html:s}}),l&&a.default.createElement("p",{"data-testid":"credit",id:"interactive-credit",className:(0,o.cx)(i,"interactive-credit"),dangerouslySetInnerHTML:{__html:l}}))}r.displayName="Footer",r.defaultProps={footerClass:null};t.default=r},gxa1:function(e,t,n){"use strict";n.d(t,"a",(function(){return s})),n.d(t,"b",(function(){return l})),n.d(t,"c",(function(){return c})),n.d(t,"d",(function(){return u})),n.d(t,"e",(function(){return d})),n.d(t,"f",(function(){return p})),n.d(t,"g",(function(){return f}));var i=n("Jqp9"),a=n("wXC7"),o=n.n(a),r=n("3sMT"),s=Object(i.css)("width:8px;"),l=Object(i.css)("background:",o.a.color.white,";display:inline-block;text-transform:uppercase;transition:none;z-index:",o.a.zIndex.navigation,";margin-top:-5px;cursor:default;"),c=Object(i.css)("@media (min-width:","1277px","){position:static;}"),u=Object(i.css)("display:flex;align-items:center;justify-content:center;padding:0;@media (min-width:","1277px","){position:relative;}"),d=Object(i.css)("font-family:",o.a.font.franklinBase,";font-weight:",o.a.font.weight.medium,";font-size:",o.a.font.size(14),";line-height:",o.a.font.size(14),";padding:1rem 12px;:hover > a{text-decoration:underline;text-decoration-thickness:2px;text-underline-offset:4px;}"),p=Object(i.css)(d,";&:nth-child(7){padding-left:12px;&::before{content:'';height:20px;margin-right:20px;margin-left:-4px;border-left:1px solid ",r.color.stroke.quaternary,";}}"),f=Object(i.css)("padding:0 6px 0 0;display:inline-block;color:",r.color.content.primary,";letter-spacing:0.1px;")},"h+5M":function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var i=function(){var e=window.navigator.userAgent||window.navigator.vendor||window.opera,t=-1!==e.indexOf("nyt_android"),n=-1!==e.indexOf("nytios");return t||n}},h3Sg:function(e,t,n){"use strict";var i=n("TqRt"),a=n("cDf5");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=i(n("lwsE")),r=i(n("W8MJ")),s=i(n("a1gu")),l=i(n("Nsbk")),c=i(n("7W2i")),u=h(n("q1tI")),d=(i(n("17x9")),h(n("UMeL"))),p=i(n("qsmR")),f=i(n("rnec"));function m(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(m=function(e){return e?n:t})(e)}function h(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=a(e)&&"function"!=typeof e)return{default:e};var n=m(t);if(n&&n.has(e))return n.get(e);var i={__proto__:null},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var r in e)if("default"!==r&&{}.hasOwnProperty.call(e,r)){var s=o?Object.getOwnPropertyDescriptor(e,r):null;s&&(s.get||s.set)?Object.defineProperty(i,r,s):i[r]=e[r]}return i.default=e,n&&n.set(e,i),i}function g(e,t,n){return t=(0,l.default)(t),(0,s.default)(e,function(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return function(){return!!e}()}()?Reflect.construct(t,n||[],(0,l.default)(e).constructor):t.apply(e,n))}var y=function(e){function t(){return(0,o.default)(this,t),g(this,t,arguments)}return(0,c.default)(t,e),(0,r.default)(t,[{key:"componentDidUpdate",value:function(e){!e.isVisible&&this.props.isVisible&&this.playPauseButton&&this.playPauseButton.focus()}},{key:"render",value:function(){var e=this;return u.default.createElement("button",{tabIndex:"99",ref:function(t){e.playPauseButton=t},type:"button",className:d.playPauseClass,onClick:this.props.onPlayPause,"aria-label":this.props.isPlaying?"pause":"play"},this.props.isPlaying&&u.default.createElement(f.default,null)||u.default.createElement(p.default,null))}}])}(u.Component);y.displayName="PlayPause",y.defaultProps={isVisible:void 0,isPlaying:void 0,onPlayPause:void 0};t.default=y},h58Z:function(e,t,n){"use strict";var i=n("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.updatedClass=t.timeChunkClass=t.separatorClass=t.readTimeClass=t.liveBriefingDateClass=t.default=t.UpdatedTime=t.StyledTimeStampWithTimeWrap=t.StyledPubDate=t.PubbedTime=void 0;var a=n("Jqp9"),o=n("3sMT"),r=i(n("wXC7")),s=(0,a.themeFn)("section",{magazine:(0,a.css)("font-family:",r.default.font.magazineSansBase,";font-weight:",r.default.font.weight.medium,";color:",o.color.content.secondary,";"),"t-magazine":(0,a.css)("font-family:",r.default.font.tmagSansBase,";font-weight:",r.default.font.weight.book,";color:",o.color.content.secondary,";letter-spacing:0.02em;")}),l=(t.readTimeClass=(0,a.css)("time&.reading-time{margin:auto 0;}"),(0,a.styled)("time",{target:"e16638kd0"})("font-family:",r.default.font.franklinBase,";font-weight:",r.default.font.weight.medium,";color:",o.color.content.secondary,";margin-bottom:1rem;font-size:",r.default.font.size(13),";line-height:",r.default.font.size(16),";",(function(e){return e.useSection&&s(e)}),";")),c=(t.StyledPubDate=l.withComponent("div",{target:"e16638kd1"}),t.StyledTimeStampWithTimeWrap=(0,a.styled)(l,{target:"e16638kd2"})("margin-bottom:0;display:flex;flex-wrap:wrap;flex-shrink:1;"),t.timeChunkClass=(0,a.css)("white-space:nowrap;"),t.updatedClass=(0,a.css)("text-transform:capitalize;"),t.liveBriefingDateClass=(0,a.css)("text-transform:none;"),t.separatorClass=(0,a.css)("margin-left:10px;margin-right:10px;color:",o.color.stroke.quaternary,";"),(0,a.css)("color:",o.color.content.secondary,";")),u=(0,a.themeFn)("languageDirection",{none:(0,a.css)("padding-right:1em;"),rightToLeft:(0,a.css)("padding-right:0;padding-left:1em;")});t.PubbedTime=(0,a.styled)("span",{target:"e16638kd3"})("display:inline-block;",u,";"),t.UpdatedTime=(0,a.styled)("span",{target:"e16638kd4"})("display:inline-block;",(function(e){return e.isRecentModification?c:null}),";"),t.default=l},h6Ch:function(e,t,n){"use strict";var i=this&&this.__makeTemplateObject||function(e,t){return Object.defineProperty?Object.defineProperty(e,"raw",{value:t}):e.raw=t,e},a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.embeddedGatewayContainerClass=t.embeddedGatewayClass=t.snackbarContainerClass=t.deactivateScrollingClass=t.gatewayContainerClass=t.midHeightSaleClass=t.midHeightClass=t.fullHeightClass=t.fullWidthClass=t.animationComplete=t.showClass=t.gatewayClass=void 0;var o,r,s,l,c,u,d,p,f,m,h,g,y=n("Jqp9"),v=a(n("wXC7"));t.gatewayClass=(0,y.css)(o||(o=i(["\n  will-change: transform;\n  display: flex;\n  top: 100vh;\n  align-items: center;\n  background-color: ",";\n  box-shadow: 0px -2px 31px rgba(0, 0, 0, 0.22);\n  box-sizing: border-box;\n  flex-direction: column;\n  font-family: ",";\n  height: 300px;\n  margin: 0 auto;\n  opacity: 0;\n  padding: 20px;\n  position: fixed;\n  text-align: left;\n  width: 100%;\n  z-index: ",";\n  overflow: hidden;\n\n  "," {\n    padding: 20px 25px;\n  }\n"],["\n  will-change: transform;\n  display: flex;\n  top: 100vh;\n  align-items: center;\n  background-color: ",";\n  box-shadow: 0px -2px 31px rgba(0, 0, 0, 0.22);\n  box-sizing: border-box;\n  flex-direction: column;\n  font-family: ",";\n  height: 300px;\n  margin: 0 auto;\n  opacity: 0;\n  padding: 20px;\n  position: fixed;\n  text-align: left;\n  width: 100%;\n  z-index: ",";\n  overflow: hidden;\n\n  "," {\n    padding: 20px 25px;\n  }\n"])),v.default.color.white,v.default.font.franklinBase,v.default.zIndex.modal,v.default.breakpoint.mediumMediaExtralarge),t.showClass=(0,y.css)(r||(r=i(["\n  height: auto;\n  min-height: 42vh;\n  opacity: 1;\n  transform: translate(0, -42vh);\n  transition: transform 750ms ease-out;\n  overscroll-behavior: none;\n\n  @media screen and (min-width: 765px) {\n    min-height: 50vh;\n    transform: translate(0, -50vh);\n  }\n\n  @media print {\n    /* stylelint-disable-next-line declaration-no-important */\n    background-color: "," !important;\n    padding: 30px 25px;\n    border-top: 1px solid #e4e4e4;\n  }\n"],["\n  height: auto;\n  min-height: 42vh;\n  opacity: 1;\n  transform: translate(0, -42vh);\n  transition: transform 750ms ease-out;\n  overscroll-behavior: none;\n\n  @media screen and (min-width: 765px) {\n    min-height: 50vh;\n    transform: translate(0, -50vh);\n  }\n\n  @media print {\n    /* stylelint-disable-next-line declaration-no-important */\n    background-color: "," !important;\n    padding: 30px 25px;\n    border-top: 1px solid #e4e4e4;\n  }\n"])),v.default.color.white),t.animationComplete=(0,y.css)(s||(s=i(["\n  overscroll-behavior: unset;\n  position: absolute;\n"],["\n  overscroll-behavior: unset;\n  position: absolute;\n"]))),t.fullWidthClass=(0,y.css)(l||(l=i(["\n  padding: 0;\n  max-width: none;\n\n  "," {\n    max-width: none;\n  }\n"],["\n  padding: 0;\n  max-width: none;\n\n  "," {\n    max-width: none;\n  }\n"])),v.default.breakpoint.mediumMediaExtralarge),t.fullHeightClass=(0,y.css)(c||(c=i(["\n  min-height: 100%;\n  top: 0;\n  flex-grow: 1;\n  border-top: none;\n  transform: unset;\n\n  @media screen and (min-width: 765px) {\n    min-height: 100%;\n    top: 0;\n    transform: unset;\n  }\n"],["\n  min-height: 100%;\n  top: 0;\n  flex-grow: 1;\n  border-top: none;\n  transform: unset;\n\n  @media screen and (min-width: 765px) {\n    min-height: 100%;\n    top: 0;\n    transform: unset;\n  }\n"]))),t.midHeightClass=(0,y.css)(u||(u=i(["\n  height: auto;\n  min-height: 65vh;\n  transform: translate(0, -65vh);\n  transition: transform 750ms ease-out;\n  overscroll-behavior: none;\n\n  @media screen and (min-width: 375px) {\n    min-height: 55vh;\n    transform: translate(0, -55vh);\n  }\n"],["\n  height: auto;\n  min-height: 65vh;\n  transform: translate(0, -65vh);\n  transition: transform 750ms ease-out;\n  overscroll-behavior: none;\n\n  @media screen and (min-width: 375px) {\n    min-height: 55vh;\n    transform: translate(0, -55vh);\n  }\n"]))),t.midHeightSaleClass=(0,y.css)(d||(d=i(["\n  height: auto;\n  min-height: 85vh;\n  transform: translate(0, -85vh);\n  transition: transform 750ms ease-out;\n  overscroll-behavior: none;\n\n  @media screen and (min-width: 375px) {\n    min-height: 80vh;\n    transform: translate(0, -80vh);\n  }\n\n  @media screen and (min-width: 768px) {\n    min-height: 60vh;\n    transform: translate(0, -60vh);\n  }\n"],["\n  height: auto;\n  min-height: 85vh;\n  transform: translate(0, -85vh);\n  transition: transform 750ms ease-out;\n  overscroll-behavior: none;\n\n  @media screen and (min-width: 375px) {\n    min-height: 80vh;\n    transform: translate(0, -80vh);\n  }\n\n  @media screen and (min-width: 768px) {\n    min-height: 60vh;\n    transform: translate(0, -60vh);\n  }\n"]))),t.gatewayContainerClass=(0,y.css)(p||(p=i(["\n  align-items: center;\n  display: flex;\n  flex-direction: column;\n  justify-content: flex-start;\n  max-width: 420px;\n  min-height: 364px;\n  width: 100%;\n  -webkit-font-smoothing: antialiased;\n  overflow: hidden;\n\n  "," {\n    max-width: ","px;\n  }\n"],["\n  align-items: center;\n  display: flex;\n  flex-direction: column;\n  justify-content: flex-start;\n  max-width: 420px;\n  min-height: 364px;\n  width: 100%;\n  -webkit-font-smoothing: antialiased;\n  overflow: hidden;\n\n  "," {\n    max-width: ","px;\n  }\n"])),v.default.breakpoint.mediumMediaExtralarge,v.default.breakpoint.mediaMaxWidth),t.deactivateScrollingClass=(0,y.css)(f||(f=i(["\n  aria-hidden: true;\n  position: fixed;\n  height: 100%;\n  width: 100%;\n  overflow: hidden;\n"],["\n  aria-hidden: true;\n  position: fixed;\n  height: 100%;\n  width: 100%;\n  overflow: hidden;\n"]))),t.snackbarContainerClass=(0,y.css)(m||(m=i(["\n  z-index: ",";\n"],["\n  z-index: ",";\n"])),v.default.zIndex.interstitialModal),t.embeddedGatewayClass=(0,y.css)(h||(h=i(["\n  position: static;\n  transform: unset;\n  min-height: 0;\n  box-shadow: 0 -1px 114px 114px #f6f6f8;\n  padding: 24px 20px;\n  background-color: #f6f6f8;\n\n  @media screen and (min-width: 765px) {\n    position: static;\n    transform: unset;\n    min-height: 0;\n    box-shadow: 0 -1px 114px 114px #f6f6f8;\n    padding: 24px 20px;\n    background-color: #f6f6f8;\n  }\n"],["\n  position: static;\n  transform: unset;\n  min-height: 0;\n  box-shadow: 0 -1px 114px 114px #f6f6f8;\n  padding: 24px 20px;\n  background-color: #f6f6f8;\n\n  @media screen and (min-width: 765px) {\n    position: static;\n    transform: unset;\n    min-height: 0;\n    box-shadow: 0 -1px 114px 114px #f6f6f8;\n    padding: 24px 20px;\n    background-color: #f6f6f8;\n  }\n"]))),t.embeddedGatewayContainerClass=(0,y.css)(g||(g=i(["\n  border-radius: 12px;\n  background: #ffffff;\n  box-shadow: 2px 4px 12px 0 rgba(0, 0, 0, 0.12);\n"],["\n  border-radius: 12px;\n  background: #ffffff;\n  box-shadow: 2px 4px 12px 0 rgba(0, 0, 0, 0.12);\n"])))},hFCc:function(e,t,n){"use strict";var i=n("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.StyledRelatedLinks=t.RelatedLinksSeries=t.RelatedLinksHeadline=t.RelatedLinksDescription=void 0;var a=n("Jqp9"),o=i(n("wXC7")),r=n("6l8D"),s=i(n("WThh")),l=i(n("qp0C")),c=n("3sMT"),u=n("tLpV"),d=(0,s.default)(["medium","small","mediumLarge"]),p=(0,a.themeFn)("treatment",{none:function(e){var t=(0,a.css)("color:",c.color.content.secondary,";font-family:",o.default.font.franklinBase,";font-weight:",o.default.font.weight.bold,";",d(e,{fontSize:[15,16],lineHeight:[20,22]}),";a{text-decoration:underline;}a:hover{text-decoration:none;}");return"compact"===e.theme.displayStyle||"intentional"===e.theme.displayStyle?(0,a.css)("margin-right:0.4rem;",t,";"):t},sponsored:function(e){if("compact"===e.theme.displayStyle||"intentional"===e.theme.displayStyle){return(0,a.css)(d(e,{fontSize:[13.5,15],lineHeight:[16,24],fontWeight:[o.default.font.weight.mediumBold,o.default.font.weight.bold],letterSpacing:["".concat(.68/13.5,"em"),"".concat(1/15,"em")],marginRight:["".concat(8/13.5,"em"),"".concat(8/15,"em")]}),";color:",c.color.content.secondary,";font-family:",o.default.font.sponsoredBase,";text-transform:uppercase;")}return(0,a.css)("font-size:",o.default.font.size(17),";line-height:",o.default.font.size(22),";font-weight:",o.default.font.weight.bold,";color:",c.color.content.secondary,";font-family:",o.default.font.sponsoredBase,";")},atHome:(0,a.css)("font-size:19px;letter-spacing:0.4px;font-family:",o.default.font.franklinBase,";font-weight:bold;")}),f=(t.RelatedLinksHeadline=(0,a.styled)("div",{target:"epkadsg0"})((function(e){return("compact"===e.theme.displayStyle||"intentional"===e.theme.displayStyle)&&(0,a.css)("display:inline-block;")}),";",p),(0,a.themeFn)("treatment",{none:function(e){return(0,a.css)("color:",c.color.content.secondary,";font-family:",o.default.font.franklinBase,";",d(e,{fontSize:[15,16],lineHeight:[20,22]}),";")},sponsored:function(e){return"compact"===e.theme.displayStyle||"intentional"===e.theme.displayStyle?(0,a.css)(d(e,{fontSize:[13.5,19],lineHeight:[16,24]}),";color:",c.color.content.secondary,";font-family:",o.default.font.sponsoredBase,";font-style:italic;"):(0,a.css)("font-size:",o.default.font.size(17),";line-height:",o.default.font.size(24),";color:",c.color.content.secondary,";font-family:",o.default.font.sponsoredBase,";font-style:italic;")},atHome:function(e){return(0,a.css)("font-family:",l.default.cheltenham,";font-weight:100;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale;letter-spacing:0.2px;color:",c.color.content.secondary,";",d(e,{paddingRight:[0,0,"4%"],margin:[o.default.breakpoint.mobileBlockMargins,o.default.breakpoint.desktopStorylineMargins],fontSize:[27,27,45],lineHeight:[36,36,61]})," .",r.linkClass,"{text-decoration:underline;color:",c.color.content.primary,";&:hover,&:focus{text-decoration:none;}&:visited{color:",c.color.content.primary,";}}strong{color:inherit;font-weight:700;}")}})),m=(t.RelatedLinksDescription=(0,a.styled)("div",{target:"epkadsg1"})("font-weight:",o.default.font.weight.medium,";",(function(e){return("compact"===e.theme.displayStyle||"intentional"===e.theme.displayStyle)&&(0,a.css)("display:inline;")}),";.",r.linkClass,"{text-decoration:underline;&:hover{text-decoration:none;}&:focus{text-decoration:underline;}}",f,";"),(0,a.themeFn)("treatment",{none:function(e){return e.hasHeadlineorDescription&&(0,a.css)("margin-top:10px;padding-top:15px;border-top:1px solid ",c.color.stroke.quaternary,";")},atHome:function(e){return e.children.length>1||"group"===e.theme.displayStyle?(0,a.css)(d(e,{display:["block","flex"],marginBottom:"60px"}),";",u.StyledRelatedLink,":nth-child(3n-1){",d(e,{margin:["0 0 36px","0 0 36px","0 4%"]}),"}"):(0,a.css)("display:block;",u.StyledRelatedLink,":not(:first-child){display:none;}")}})),h=(0,a.themeFn)("displayStyle",{compact:function(e){return(0,a.css)("border-top:none;margin-top:0;padding:",e.hasHeadlineorDescription?"5px 0":"0",";")},intentional:function(e){return(0,a.css)("border-top:none;margin-top:0;padding:",e.hasHeadlineorDescription?"5px 0":"0",";")}}),g=(t.RelatedLinksSeries=(0,a.styled)("div",{target:"epkadsg2"})(m,";",h),(0,a.themeFn)("treatment",{none:function(e){return(0,a.css)("box-sizing:border-box;margin:",o.default.breakpoint.mobileBlockMargins,";padding:0.9375rem;border:1px solid ",c.color.stroke.quaternary,";",e.theme.breakpointMap.medium,"{padding:1.25rem;margin:",o.default.breakpoint.desktopStorylineMargins,";}")},atHome:function(e){return(0,a.css)(d(e,{padding:["0 22px","0 0"]}))}}));t.StyledRelatedLinks=(0,a.styled)("div",{target:"epkadsg3"})(o.default.printHide,";",g,";")},hG4R:function(e,t,n){"use strict";n.d(t,"b",(function(){return f}));var i,a=n("VkAN"),o=n.n(a),r=n("gcR/"),s=n.n(r),l=(n("q1tI"),n("eFc+")),c=n.n(l),u=n("KQYy"),d=n("B2Q+"),p={threeByTwoLargeAt2X:{initial:1080,safe:[600,1100,1620]},threeByTwoMediumAt2X:{initial:1080,safe:[600,1100]},threeByTwoSmallAt2X:{initial:400,safe:[400]},largeHorizontalJumbo:{initial:719,safe:[700]},square640:{initial:218,safe:[350]}},f=function(e,t,n){if(!(e&&(e.spanImageCrops&&e.spanImageCrops.length||e.crops&&e.crops.length)))return null;var i;if(!(i=e.spanImageCrops?e.spanImageCrops.reduce((function(e,t){return e.concat(t.renditions)}),[]):e.crops.reduce((function(e,t){return e.concat(t.renditions)}),[])).length)return null;var a=Array.isArray(n)?n:[n],o=t||a.find((function(e){return i.find((function(t){return t.name===e}))}));return i.find((function(e){return e.name===o}))||i[0]},m=function(e){var t=e.lazy,n=e.caption,i=e.media,a=e.preferredCrop,o=e.crop,r=e.metadataOptOut,l=f(i,a,o);if(!l)return null;var c=l.height,m=l.width,h={src:l.url,alt:n},g=p[l.name]?p[l.name]:null,y=g?g.safe:null,v=g?g.initial:null,b=m/c,_=Object(d.a)();return s()(u.a,{lazy:t,imageProps:h,initialAspectRatio:b,initialImageWidth:v,safeWidths:y,metadataOptOut:r,rootMargin:"smartphone"===_?200:400})};m.displayName="SpanImage",m.defaultProps={lazy:void 0,preferredCrop:"threeByTwoLargeAt2X",crop:"threeByTwoLargeAt2X",metadataOptOut:!1,caption:""},m.fragments={media:c()(i||(i=o()(['\n    fragment SpanImage_media on Image {\n      id\n      caption {\n        text @stripHtml\n      }\n      spanImageCrops: crops(\n        renditionNames: [\n          "videoLarge"\n          "largeHorizontalJumbo"\n          "articleLarge"\n          "master1050"\n          "square640"\n          "thumbLarge"\n          "threeByTwoSmallAt2X"\n          "threeByTwoMediumAt2X"\n          "threeByTwoLargeAt2X"\n        ]\n      ) {\n        name\n        renditions {\n          name\n          url\n          width\n          height\n        }\n      }\n    }\n  '])))},t.a=m},hKNt:function(e,t,n){"use strict";n.d(t,"a",(function(){return k})),n.d(t,"n",(function(){return O})),n.d(t,"l",(function(){return T})),n.d(t,"b",(function(){return C})),n.d(t,"h",(function(){return X})),n.d(t,"j",(function(){return Z})),n.d(t,"d",(function(){return J})),n.d(t,"e",(function(){return K})),n.d(t,"o",(function(){return $})),n.d(t,"f",(function(){return Q})),n.d(t,"g",(function(){return ee})),n.d(t,"i",(function(){return te})),n.d(t,"q",(function(){return ne})),n.d(t,"c",(function(){return ie})),n.d(t,"m",(function(){return oe})),n.d(t,"p",(function(){return re})),n.d(t,"k",(function(){return le}));var i=n("lSNA"),a=n.n(i),o=(n("8iTF"),n("kV2j")),r=n("2oaX"),s=n("+5AW"),l=function(e,t,n){return e(t),Object(s.a)(t).then((function(t){return n.response=t,t.json().then((function(e){n.payload=e}),(function(t){return n.payload=t,n.error=!0,e(n),Promise.reject(new Error)})).then((function(){var i,a,o=!(t.ok&&(i=n.payload,!(i.error||null!==(a=i.results)&&void 0!==a&&a.error||i.status&&"OK"!==i.status)));if(n.error=o,e(n),o){var r=n.payload.results,s=(null==r?void 0:r.error)||"";return Promise.reject(new Error(s))}return Promise.resolve()}))}),(function(t){return n.response=t,n.error=!0,e(n),Promise.reject(t instanceof Error?t:new Error)}))},c=n("ygvk"),u="url",d="commentID",p="commentLabels",f="userID",m=(n("JYoY"),"url"),h="commentSequence",g="parentID",y="recommend",v="userEmail",b="userID";function _(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function w(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?_(Object(n),!0).forEach((function(t){a()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):_(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var x=function(){return Promise.resolve({type:"@@NEXT"})},k=function(){return{type:c.a.CLEAR_ARTICLE}},O=function(e){return{type:c.a.SELECT_VIEW,viewId:e}},T=function(e){return{type:c.a.OPEN_COMMENT_ENTRY,replyToCommentId:e}},C=function(){return{type:c.a.CLOSE_COMMENT_ENTRY}},E=function(e){return{type:c.a.GET_SUMMARY_REQUEST,meta:e}},S=function(e){return{type:c.a.GET_SUMMARY_RESPONSE,meta:e}},P=function(e){return{type:c.a.GET_ARTICLE_REQUEST,meta:e}},I=function(e){return{type:c.a.GET_ARTICLE_RESPONSE,meta:e}},M=function(e){return{type:c.a.GET_COMMENT_LIST_REQUEST,meta:e}},A=function(e){return{type:c.a.GET_COMMENT_LIST_RESPONSE,meta:e}},j=function(e){return{type:c.a.GET_COMMENTS_REQUEST,meta:e}},N=function(e){return{type:c.a.GET_COMMENTS_RESPONSE,meta:e}},L=function(e){return{type:c.a.GET_REPLIES_REQUEST,meta:e}},D=function(e){return{type:c.a.GET_REPLIES_RESPONSE,meta:e}},R=function(e){return{type:c.a.GET_PROFILE_REQUEST,meta:e}},B=function(e){return{type:c.a.GET_PROFILE_RESPONSE,meta:e}},z=function(e){return{type:c.a.UPDATE_AVATAR_REQUEST,meta:e}},F=function(e){return{type:c.a.UPDATE_AVATAR_RESPONSE,meta:e}},U=function(e){return{type:c.a.CREATE_COMMENT_RESPONSE,meta:e}},H=function(e){return{type:c.a.RECOMMEND_COMMENT_REQUEST,meta:e}},W=function(e){return{type:c.a.RECOMMEND_COMMENT_RESPONSE,meta:e}},q=function(e){return{type:c.a.UNRECOMMEND_COMMENT_REQUEST,meta:e}},V=function(e){return{type:c.a.UNRECOMMEND_COMMENT_RESPONSE,meta:e}},G=function(e){return{type:c.a.FLAG_COMMENT_REQUEST,meta:e}},Y=function(e){return{type:c.a.FLAG_COMMENT_RESPONSE,meta:e}},X=function(e){return function(t,n){var i=n();if(i.profile.isFetching||i.profile.lastUpdatedMs)return x();if(!e)try{e=i.article.data.id}catch(t){e="unknownArticle"}var a={articleId:e},o=[R(a),B(a)];return l.apply(void 0,[t].concat(o))}},Z=function(e){return function(t,n){var i=n();if(i.panel.isFetching||i.panel.lastUpdatedMs)return x();var a={articleUrl:e},o=[E(a),S(a)];return l.apply(void 0,[t].concat(o))}},J=function(e){return function(t,n){var i=n();if(i.article.isFetching||i.article.lastUpdatedMs)return x();var a={articleUrl:e},o=[P(a),I(a)];return l.apply(void 0,[t].concat(o))}},K=function(e,t){return function(n){var i={articleId:e,listId:t},a=[M(i),A(i)];return l.apply(void 0,[n].concat(a))}},$=function(e,t,n){return function(i){var a={articleId:e,listId:t,sortType:n},o=[M(a),A(a)];return l.apply(void 0,[i].concat(o))}},Q=function(e,t){return function(n,i){var a=i(),o=function(e,t){var n=e.commentLists[t];return n?n.nextUrl:null}(a,t);if(!o)return x();var r=a.commentLists[t],s=r&&r.commentIds?r.commentIds.length-1:-1,c={articleId:e,listId:t,nextUrl:o,isPaginatedRequest:!0,sortType:r.selectedSortType,commentSequence:s>=0?r.commentIds[s]:0},u=[M(c),A(c)];return l.apply(void 0,[n].concat(u))}},ee=function(e,t){return function(n){var i={articleId:e,commentId:t},a=[j(i),N(i)];return l.apply(void 0,[n].concat(a))}},te=function(e,t,n){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:25;return function(a){var o={articleId:e,commentId:t,commentSequence:t,offset:n,limit:i,cmd:"GetRepliesBySequence"},r=[L(o),D(o)];return l.apply(void 0,[a].concat(r))}},ne=function(e){return function(t,n){if(!e)return x();var i=n(),a=new FormData;a.append("image",e);var o={values:{avatar:a,csrfToken:i.profile.csrfToken}},r=[z(o),F(o)];return l.apply(void 0,[t].concat(r))}},ie=function(e){return function(t){var n,i={values:e},a=[(n=i,{type:c.a.CREATE_COMMENT_REQUEST,meta:n}),U(i)];return l.apply(void 0,[t].concat(a))}},ae=function(e,t){var n=e.profile.data;return a()(a()(a()(a()(a()({},m,Object(o.a)(e)),h,t),g,Object(r.h)(e,t)||"0"),v,n.email),b,n.userID)},oe=function e(t){return function(n,i){var o=i();if(!o.profile.data)return n(X()).then((function(){return n(e(t))}));var r={commentId:t,values:w(w({},ae(o,t)),{},a()({},y,1))},s=[H(r),W(r)];return l.apply(void 0,[n].concat(s))}},re=function e(t){return function(n,i){var o=i();if(!o.profile.data)return n(X()).then((function(){return n(e(t))}));var r={commentId:t,values:w(w({},ae(o,t)),{},a()({},y,0))},s=[q(r),V(r)];return l.apply(void 0,[n].concat(s))}},se=function(e,t){var n=e.profile.data;return a()(a()(a()({},u,Object(o.a)(e)),d,t),f,n.userID)},le=function e(t,n){return function(i,o){var r=o();if(!r.profile.data)return i(X()).then((function(){return i(e(t,n))}));var s={values:w(w({},se(r,t)),{},a()({},p,n?n.join(","):""))},c=[G(s),Y(s)];return l.apply(void 0,[i].concat(c))}}},hMrr:function(e,t,n){"use strict";var i=n("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.summaryClass=t.pClass=t.oakClass=t.innerContainerTwoClass=t.innerContainerOneClass=t.imgClass=t.creditClass=t.containerClass=t.ampCreditClass=t.ampContainerItemClass=t.ampContainerClass=void 0;var a=n("Jqp9"),o=i(n("wXC7")),r=n("3sMT");t.innerContainerOneClass=(0,a.css)("width:100%;height:100vh;overflow-y:hidden;position:sticky;top:0;z-index:-1;"),t.innerContainerTwoClass=(0,a.css)("width:100%;height:100vh;overflow-y:hidden;top:0;position:relative;"),t.containerClass=function(e){return(0,a.css)("position:relative;z-index:901;margin-top:",e?"0px":o.default.font.size(50),";margin-bottom:",o.default.font.size(50),";",o.default.breakpoint.small,"{margin-top:",e?"0px":o.default.font.size(60),";margin-bottom:",o.default.font.size(60),";}.scrolly-image-0{opacity:1 !important;}")},t.imgClass=(0,a.css)("object-fit:cover;transition:all 0.35s ease-in-out;width:100%;height:100%;position:absolute;opacity:0;"),t.pClass=(0,a.css)("margin-bottom:100vh;font-family:",o.default.font.serifMedium,";font-weight:",o.default.font.weight.book,";font-size:24px;line-height:30px;max-width:600px;color:",r.dark.colors.content.primary.hex,";padding-left:40px;padding-right:40px;margin-left:auto;margin-right:auto;text-shadow:0 2px 4px ",r.dark.colors.background.primary.transform(o.default.setAlpha(.5)).rgba,";&:first-of-type{margin-top:-33vh;}&:last-of-type{padding-bottom:66vh;margin-bottom:0;}",o.default.breakpoint.small,"{font-size:28px;line-height:32px;}"),t.oakClass=(0,a.css)("background:",r.color.background.quaternary,";display:flex;height:400px;p{display:flex;margin:auto;font-family:",o.default.font.franklinBase,";font-weight:",o.default.font.weight.bold,";font-size:26px;line-height:1.2;max-width:600px;}"),t.creditClass=(0,a.css)("position:absolute;bottom:20px;left:40px;color:",r.dark.colors.content.primary.hex,";font-size:10px;opacity:0.5;font-family:",o.default.font.serifBase,";",o.default.breakpoint.small,"{font-size:11px;}",o.default.breakpoint.medium,"{left:20px;}"),t.ampContainerClass=(0,a.css)("margin-bottom:60px;margin-top:60px;"),t.summaryClass=(0,a.css)("width:calc(100% - 40px);margin-left:auto;margin-right:auto;margin-bottom:40px;max-width:600px;"),t.ampCreditClass=(0,a.css)("display:inline-block;margin-top:10px;margin-left:20px;"),t.ampContainerItemClass=(0,a.css)("margin-bottom:30px;")},hP1F:function(e,t,n){"use strict";n.d(t,"a",(function(){return f})),n.d(t,"b",(function(){return m})),n.d(t,"f",(function(){return h})),n.d(t,"d",(function(){return y})),n.d(t,"c",(function(){return v})),n.d(t,"e",(function(){return w}));var i,a=n("VkAN"),o=n.n(a),r=n("eFc+"),s=n.n(r),l=n("06b3"),c=n("GB3f"),u=n("solT"),d=n("ziu7"),p=n("EYBZ"),f=function(e){return e.advertisingProperties&&e.advertisingProperties.sensitivity?e.advertisingProperties.sensitivity:"SHOW_ADS"};f.fragments={article:s()(i||(i=o()(["\n    fragment getAdSensitivity_article on Article {\n      id\n      advertisingProperties {\n        sensitivity\n      }\n    }\n  "])))};var m=function(){var e,t,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return null!=n&&null!==(e=n.language)&&void 0!==e&&e.code&&null!=n&&null!==(t=n.language)&&void 0!==t&&t.code.startsWith("es")&&null!=n&&n.subsection?"/".concat("es","/"):l.a.load("NYT-Edition")===c.a.CA.value?c.a.CA.path:l.a.load("NYT-Edition")===c.a.INT.value?c.a.INT.path:"/"},h=function(e,t){var n=e.pathname.includes("/aponline")||e.pathname.includes("/reuters"),i=parseInt(t.params.year,10)<2018;return n&&i},g=function(e,t){return t&&t.displayName||e&&e.displayName||""},y=function(e){var t=e.collections,n=e.section,i=e.subsection,a=Object(p.getSectionUrlFromCollections)(n,t),o=Object(p.getSectionUrlFromCollections)(i,t);return{sectionName:n&&n.name,subsectionName:i&&i.name,displayName:g(n,i),url:o||a||""}},v=function(e,t){if(!e||!e.sprinkledBody)return{};var n,i,a,o=e.sprinkledBody.content.find((function(e){return"HeaderFullBleedHorizontalBlock"===e.__typename||"HeaderFullBleedVerticalBlock"===e.__typename||Object(u.b)(e,t)}));o&&(i=o.__typename,a=o.alignment?o.alignment:"",n=o.displayOverride?o.displayOverride:"",o.__typename===u.a&&(n="TRANSPARENT_MASTHEAD_WHITE_ICONS"));var r,s="HeaderFullBleedVerticalBlock"===i,l="HeaderFullBleedVerticalBlock"===i,c="HeaderFullBleedVerticalBlock"===i,p="HeaderFullBleedHorizontalBlock"===i||"HeaderFullBleedVerticalBlock"===i||Object(u.b)(o,t);r="TRANSPARENT_MASTHEAD_WHITE_ICONS"===n?"white":"black";var f,m="";return"HeaderFullBleedVerticalBlock"===i&&(m="verticalFullBleed"),Object(d.d)(e.sprinkledBody.content[0])&&(r="white",p=!0,f=!0),{hideSearch:s,semitransparentAtMobile:l,hideUsernameAtSmallViewport:c,transparent:p,iconStyle:r,alignment:a,variant:m,isVerticalFullBleed:"HeaderFullBleedVerticalBlock"===i,isFullBleed:f||"HeaderFullBleedHorizontalBlock"===i||"HeaderFullBleedVerticalBlock"===i||Object(u.b)(o,t)}},b=["feature","opinion"],_=["magazine","t-magazine","opinion"],w=function(e){var t,n=y(e),i=e.tone&&"no_tone_set"!==e.tone.toLowerCase()&&e.tone.toLowerCase(),a=null;return n&&_.indexOf(n.sectionName)>-1?a=n.sectionName:b.indexOf(i)>-1?a=i:"espanol"===(null==n?void 0:n.sectionName)&&"opinion"===(null==n?void 0:n.subsectionName)&&(a="opinion",i="opinion"),e.collections.find((function(e){return"us-morning-briefing"===e.slug||"europe-morning-briefing"===e.slug||"asia-australia-morning-briefing"===e.slug}))&&null!==(t=e.compatibility)&&void 0!==t&&t.isOak&&(a="morning-briefing"),{treatment:a,tone:i}}},hXGK:function(e,t,n){"use strict";var i=n("TqRt"),a=n("cDf5");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=i(n("q1tI")),r=(i(n("17x9")),i(n("H0lQ"))),s=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=a(e)&&"function"!=typeof e)return{default:e};var n=l(t);if(n&&n.has(e))return n.get(e);var i={__proto__:null},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var r in e)if("default"!==r&&{}.hasOwnProperty.call(e,r)){var s=o?Object.getOwnPropertyDescriptor(e,r):null;s&&(s.get||s.set)?Object.defineProperty(i,r,s):i[r]=e[r]}return i.default=e,n&&n.set(e,i),i}(n("UMeL"));function l(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(l=function(e){return e?n:t})(e)}var c=function(e){var t=e.currentTime,n=e.audioDuration;return o.default.createElement("div",null,o.default.createElement("div",{className:s.desktopDurationClass},(0,r.default)(1e3*t),"/",(0,r.default)(n)),o.default.createElement("div",{className:s.mobileDurationClass},"-",(0,r.default)(1e3*(n/1e3-t))))};c.displayName="Duration",c.defaultProps={audioDuration:void 0,currentTime:void 0};t.default=c},hZ4i:function(e,t,n){"use strict";var i=n("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.FEED_LEDE=t.FEED_FOOTER=void 0,t.findBriefingCollection=function(e){var t;return null!==(t=null==e?void 0:e.find((function(e){try{var t=JSON.parse(null==e?void 0:e.mobileHeader);return T(null==t?void 0:t.typeOfBlog)}catch(e){return!1}})))&&void 0!==t?t:null},t.getAdditionalItems=function(e){var t,n,i,o,r,s,l=(null===(t=b(e))||void 0===t||null===(n=t.find((function(e){return"additional content"===m(e)})))||void 0===n||null===(i=n.relations)||void 0===i?void 0:i.map((function(e){return e.asset})))||[],c=(0,a.default)(l,1)[0];if(!c)return{};var d=c.highlights,p=(null===(o=b(c))||void 0===o||null===(r=o.find((function(e){return"highlights"===m(e)})))||void 0===r||null===(s=r.relations)||void 0===s?void 0:s.map((function(e){return e.asset})))||[];if(null!=d&&d.edges){var f,h=b(e),g=x(w(_(e)));return u(u({allAdditionalItems:p},d),{},{edges:null===(f=d.edges)||void 0===f?void 0:f.map((function(t){return u(u({},t),{},{metadata:j(e,h,g,null==t?void 0:t.node)})}))})}return d},t.getBlockKey=function(e,t){var n,i,a=e.youTubeId||(null===(n=e.media)||void 0===n?void 0:n.sourceId)||(null===(i=e.media)||void 0===i?void 0:i.id)||t;return"".concat(e.__typename,"-").concat(a)},t.getBylinesFromPosts=function(e){var t,n,i,a,o=null==e?void 0:e.reduce((function(e,t){var n;return null==e||null===(n=e.concat)||void 0===n?void 0:n.call(e,null==t?void 0:t.bylines)}),[]);return null!==(t=null===(n=Object.values(null!==(i=null==o||null===(a=o.reduce)||void 0===a?void 0:a.call(o,(function(e,t){return null!=t&&t.renderedRepresentation&&(e[null==t?void 0:t.renderedRepresentation]=t),e}),{}))&&void 0!==i?i:{}))||void 0===n?void 0:n.filter(Boolean))&&void 0!==t?t:[]},t.getCapsuleFromContainers=function(e,t){var n,i,a=null==e?void 0:e.find((function(e){return m(e)===t}));a||t!==d||(a=null==e?void 0:e.find((function(e){return"highlights"===m(e)})));var o=null===(n=a)||void 0===n||null===(i=n.relations)||void 0===i?void 0:i.find((function(e){var t;return"Capsule"===(null==e||null===(t=e.asset)||void 0===t?void 0:t.__typename)}));return(null==o?void 0:o.asset)||null},t.getContainerIdentifier=m,t.getContainersFromCollection=b,t.getExplainerAsset=E,t.getHeadline=function(e,t){var n=g(e)||g(t)||{default:null==t?void 0:t.name};null!=t&&t.header&&(n.seo=null==t?void 0:t.header);return n},t.getHighlightArtPromoMedia=N,t.getHighlightArtPromoMediaCrops=function(e){var t,n,i=N(e);return(null==i||null===(t=i.promotionalMedia)||void 0===t?void 0:t.crops)||(null==i||null===(n=i.promotionalMedia)||void 0===n?void 0:n.spanImageCrops)||(null==i?void 0:i.crops)},t.getLastModifiedAsset=function(e,t){return h([].concat((0,o.default)(null==e?void 0:e.map((function(e){return null==e?void 0:e.lastModified}))),[null==t?void 0:t.lastModified]))},t.getLastModifiedAssetTime=h,t.getLiveAsset=L,t.getMenuFromContainers=function(e){var t;return(null==e||null===(t=e.find((function(e){return"header"===m(e)})))||void 0===t?void 0:t.relations)||[]},t.getMetadataForAsset=j,t.getNodesFromCollectionStream=function(e){var t,n,i;return(null==e||null===(t=e.stream)||void 0===t||null===(n=t.edges)||void 0===n||null===(i=n.map((function(e){return e.node})))||void 0===i?void 0:i.filter((function(e){return"Article"===(null==e?void 0:e.__typename)})))||[]},t.getNodesFromRelayConnection=function(e){var t;return(null==e||null===(t=e.edges)||void 0===t?void 0:t.map((function(e){return e.node})))||[]},t.getPostStatus=function(e){return(P(e)?"Breaking":I(e)&&"Live")||M(e)&&"Just now"||null},t.getPostTypeOverride=function(e){var t=e.metadata;return null!=t&&t.isFactCheck?"FACTCHECK":null},t.getPromotionalMediaFromOakBody=v,t.getRankedUpdatesFromContainers=function(e,t){var n,i,a=null!=e&&e.highlights?e.highlights.edges.map((function(e){return e.node})):null==t||null===(n=t.find((function(e){return"highlights"===m(e)})))||void 0===n||null===(i=n.relations)||void 0===i?void 0:i.map((function(e){return e.asset})),o=null==a?void 0:a.filter((function(e){return"Article"===(null==e?void 0:e.__typename)}));return null!=o?o:[]},t.getSectionItems=function(e,t,n){var i,r,l,c,u,d=(null===(i=b(e))||void 0===i||null===(r=i.find((function(e){return"additional content"===e.name})))||void 0===r||null===(l=r.relations)||void 0===l?void 0:l.map((function(e){return e.asset})))||[],p=b((0,a.default)(d,1)[0]).reduce((function(e,t){return e[t.name]=t,e}),{}),f=null===(c=t.find((function(e){return"top stories"===e.name})))||void 0===c||null===(u=c.relations)||void 0===u?void 0:u.filter((function(e){var t,n;return null===(t=e.asset)||void 0===t||null===(n=t.slug)||void 0===n?void 0:n.includes(s.VOX_POP_SLUG)}));return t.reduce((function(e,t){var i,a=t.name,r=(null===(i=p[a])||void 0===i?void 0:i.relations)||[],l="what were seeing"===a&&f||[],c=(null==r?void 0:r.length)||(null==l?void 0:l.length),u=[].concat((0,o.default)((null==t?void 0:t.relations)||[]),(0,o.default)(r),(0,o.default)(l)).filter((function(e){var t,n,i;return["Article","ReporterUpdate","EmbeddedInteractive","Interactive"].includes(null===(t=e.asset)||void 0===t?void 0:t.__typename)&&!("top stories"===a&&null!==(n=e.asset)&&void 0!==n&&null!==(i=n.slug)&&void 0!==i&&i.includes(s.VOX_POP_SLUG))})).map((function(e){var t=e.asset,n=t.__typename,i=t.id,a=t.uri,o=t.firstPublished;return{__typename:n,id:i,uri:a,firstPublished:o,firstPublishedTimestamp:new Date(o).getTime()}})).sort((function(e,t){return t.firstPublishedTimestamp-e.firstPublishedTimestamp}));if(c)return e[a]=u,e;var d=u.reduce((function(e,t){return e.set(t.id,t),e}),new Map),m=n.map((function(e){return e.id})).filter((function(e){return d.has(e)})),h=u.map((function(e){return e.id})),g=Array.from(new Set([].concat((0,o.default)(m),(0,o.default)(h))));return e[a]=g.map((function(e){return d.get(e)})),e}),{})},t.getSectionsFromContainers=function(e){var t,n,i,a=_(e).sections,o=a?Object.keys(a):[],r=null==e||null===(t=e.groupings)||void 0===t?void 0:t.find((function(e){return e.name===l.GROUPINGS.SUPPLEMENTAL})),s=null==e||null===(n=e.groupings)||void 0===n?void 0:n.find((function(e){return e.name===l.GROUPINGS.RANK})),c=(null==s||null===(i=s.containers)||void 0===i?void 0:i.map((function(e){var t,n=null==r||null===(t=r.containers)||void 0===t?void 0:t.find((function(t){return t.label===e.label}));return n?u(u({},e),{},{relations:n.relations}):e})))||[];return(null==c?void 0:c.filter((function(e){var t=e.name;return o.includes(t)})))||[]},t.getSubscriptionUris=function(e){var t,n,i,o=(null===(t=b(e))||void 0===t||null===(n=t.find((function(e){return"additional content"===m(e)})))||void 0===n||null===(i=n.relations)||void 0===i?void 0:i.map((function(e){return e.asset})))||[],r=(0,a.default)(o,1)[0];return r?r.uri:{}},t.getSummary=function(e,t){return(null==e?void 0:e.summary)||(null==e?void 0:e.promotionalSummary)||(null==t?void 0:t.summary)||(null==t?void 0:t.longDescription)||""},t.getSupplementalItems=void 0,t.getTypeOfBlog=w,t.getUnderhighlightItems=void 0,t.hasLabel=S,t.hideInteractiveMetaText=function(e){var t=(null==e?void 0:e.media)||e;if("EmbeddedInteractive"!==(null==t?void 0:t.__typename))return;null!=t&&t.displayProperties&&(t.displayProperties.displayForPromotionOnly=!0);t.credit=""},t.isExplainerAsset=t.isBreaking=void 0,t.isInExplainerAsset=function(e){return!!E(e)},t.isInLiveAsset=function(e){return!!L(e)},t.isLive=t.isJustNow=void 0,t.isNewLiveAsset=function(e){var t,n;return(null==e||null===(t=e.url)||void 0===t?void 0:t.includes("/live/"))&&(null==e||null===(n=e.__typename)||void 0===n?void 0:n.includes("LegacyCollection"))&&!function(e){return O(_(e).typeOfBlog)}(e)},t.isOldLiveBriefing=function(e){var t,n,i;if("Article"!==(null==e?void 0:e.__typename))return!1;var a=null==e||null===(t=e.sprinkledBody)||void 0===t||null===(n=t.content)||void 0===n?void 0:n.find((function(e){return"HeaderLiveBriefingBlock"===(null==e?void 0:e.__typename)}));return!!a&&"Right Now"===(null==a||null===(i=a.latestUpdate)||void 0===i?void 0:i.label)},t.isTypeOfBlogBriefing=T,t.isTypeOfBlogCoverageBriefing=function(e){return e===l.THEMES.COVERAGE_BRIEFING},t.isTypeOfBlogFactCheck=O,t.isTypeOfBlogNewsBriefing=function(e){return e===l.THEMES.NEWS_BRIEFING},t.isTypeOfBlogStorylineFeed=function(e){return e===l.THEMES.STORYLINE_FEED},t.mapTypeOfBlogToTypeOfFeedPublication=x,t.parseUnstructuredData=_,t.rewriteNodePermalinkToAnchor=f,t.sprinkleAdditionalItemsInFeed=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i=n.trim,a=void 0===i||i,r=n.allAdditionalItems,s=void 0===r?[]:r,c=n.loadMorePosts,u=(0,o.default)(e),d=(null==s?void 0:s.slice(t.length,t.length+l.INITIAL_ADDITIONAL_NUMBER_POSTS).filter(Boolean).map((function(e){return{node:e,__typename:"ReporterUpdatePlaceholder",loadMorePosts:c}})))||[],p={};if([].concat((0,o.default)(t),(0,o.default)(d)).forEach((function(e){if(null!=e&&e.node){var t=e.node.uri;if(!p[t]){t&&(p[t]=!0);var n=u.findIndex((function(t){var n=t.node,i=t.metadata;return!(null==n||!n.firstPublished)&&((null==i||!i.isRanked)&&new Date(n.firstPublished)<new Date(e.node.firstPublished))}));if(!(a&&n<0)){var i=n<0?u.length:n;u=k(u,i,e)}}}})),d.length){var f=u.findLastIndex((function(e){return"ReporterUpdatePlaceholder"===e.__typename}));return f>-1?u.splice(0,f+1):u}return u};var a=i(n("J4zp")),o=i(n("RIqP")),r=i(n("lSNA")),s=n("xeA1"),l=n("p3S2");function c(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function u(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?c(Object(n),!0).forEach((function(t){(0,r.default)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):c(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var d=t.FEED_LEDE="feed lede",p=(t.FEED_FOOTER="footer",["LIVE_BLOG","LIVE_BRIEFING","FACT_CHECK"]);function f(e,t){var n=null==e?void 0:e.url,i=(null==t?void 0:t.shareUrl)||(null==t?void 0:t.url)||"",a=(null==t?void 0:t.url)||"",o=a.split("/");if(!a.includes("#")&&null!=o&&o.length){var r=o.pop().replace(".html","");a="".concat(n,"#").concat(r)}return u(u({},t),{},{url:a,shareUrl:i})}function m(e){return(null==e?void 0:e.label)||(null==e?void 0:e.name)}function h(e){var t,n,i;return(null==e||null===(t=e.filter(Boolean))||void 0===t||null===(n=t.map((function(e){return new Date(e)})))||void 0===n||null===(i=n.sort((function(e,t){return t-e}))[0])||void 0===i?void 0:i.toISOString())||""}var g=function(e){var t;return(null==e||null===(t=e.headline)||void 0===t?void 0:t.default)&&(null==e?void 0:e.headline)};var y=function(e){return"HeaderBasicBlock"===(null==e?void 0:e.__typename)||"HeaderFullBleedHorizontalBlock"===(null==e?void 0:e.__typename)||"HeaderFullBleedVerticalBlock"===(null==e?void 0:e.__typename)||"HeaderLiveBriefingBlock"===(null==e?void 0:e.__typename)||"HeaderMultimediaBlock"===(null==e?void 0:e.__typename)};function v(e){var t,n,i,a,o,r,s,l=arguments.length>1&&void 0!==arguments[1]?arguments[1]:["ImageBlock","VideoBlock"],c=null==e||null===(t=e.body)||void 0===t||null===(n=t.content)||void 0===n?void 0:n.find((function(e){var t,n;return y(e)&&(null==e||null===(t=e.ledeMedia)||void 0===t?void 0:t.media)&&l.includes(null==e||null===(n=e.ledeMedia)||void 0===n?void 0:n.__typename)||l.includes(null==e?void 0:e.__typename)&&((null==e?void 0:e.media)||(null==e?void 0:e.ledeMedia))}));if("CardDeck"===(null==c||null===(i=c.ledeMedia)||void 0===i||null===(a=i.media)||void 0===a?void 0:a.__typename)){var u,d,p,f,m,h,g=null==c||null===(u=c.ledeMedia)||void 0===u||null===(d=u.media)||void 0===d||null===(p=d.asset)||void 0===p||null===(f=p.cards)||void 0===f||null===(m=f[0])||void 0===m||null===(h=m.assets)||void 0===h?void 0:h[0];s=g,"Video"===(null==g?void 0:g.__typename)&&(s=null==g?void 0:g.promotionalMedia)}return s||(null==c?void 0:c.postMedia)||(null==c||null===(o=c.postLedeMedia)||void 0===o?void 0:o.postMedia)||(null==c||null===(r=c.ledeMedia)||void 0===r?void 0:r.media)||(null==c?void 0:c.media)||null}function b(e){var t;return(null==e||null===(t=e.groupings)||void 0===t?void 0:t.reduce((function(e,t){return e.concat(null==t?void 0:t.containers)}),[]))||[]}function _(e){var t={};try{t=JSON.parse(null==e?void 0:e.mobileHeader)}catch(e){}return t}function w(e){return(null==e?void 0:e.typeOfBlog)||"UNSET"}function x(e){switch(e){case"FACTCHECK":return l.THEMES.FACT_CHECK;case"BRIEFING":return l.THEMES.LIVE_BRIEFING;case"COVERAGE_BRIEFING":return l.THEMES.COVERAGE_BRIEFING;case"EXPLAINER":return l.THEMES.EXPLAINER;case"NEWS_BRIEFING":return l.THEMES.NEWS_BRIEFING;case"LIVE_STORYLINE_FEED":return l.THEMES.STORYLINE_FEED;case"BLOG":default:return l.THEMES.LIVE_BLOG}}var k=function(e,t,n){return[].concat((0,o.default)(e.slice(0,t)),[n],(0,o.default)(e.slice(t)))};function O(e){return"FACTCHECK"===e||"FACT_CHECK"===e}function T(e){return"LIVE_BRIEFING"===e||"BRIEFING"===e}var C=t.isExplainerAsset=function(e){var t;return null==e||null===(t=e.url)||void 0===t?void 0:t.includes("/explain/")};function E(e){var t;return null==e||null===(t=e.collections)||void 0===t?void 0:t.find((function(e){return C(e)}))}function S(e){return function(t){var n,i;return null==t||null===(n=t.metadata)||void 0===n||null===(i=n.labels)||void 0===i?void 0:i.includes(e)}}var P=t.isBreaking=S(l.LABELS.BREAKING_UPDATES),I=t.isLive=S(l.LABELS.LIVE_UPDATES),M=t.isJustNow=S(l.LABELS.JUST_NOW);function A(e,t){var n;return null==e||null===(n=e.relations)||void 0===n?void 0:n.some((function(e){var n;return(null==e||null===(n=e.asset)||void 0===n?void 0:n.id)&&t&&e.asset.id===t}))}function j(e,t,n,i){var a,o=f(e,i).url,r=(null==t?void 0:t.filter((function(e){return"highlights"!==m(e)&&A(e,null==i?void 0:i.id)})).map(m))||[],s=A(null==t?void 0:t.find((function(e){return"highlights"===m(e)})),null==i?void 0:i.id),c={};n.includes("LIVE")&&(c={__typename:"LiveFeedItemMetadata_Beta",isRightNow:r.includes(l.LABELS.RIGHT_NOW),isMajorUpdate:r.includes(l.LABELS.MAJOR_UPDATES),hasArtHighlighted:r.includes(l.LABELS.ART_HIGHLIGHT),isRanked:s,isFactCheck:null==i||null===(a=i.slug)||void 0===a?void 0:a.includes("fact-check")});return u({__typename:"GenericFeedItemMetadata_Beta",labels:r,deepUrl:o},c)}t.getSupplementalItems=function(e){var t=b(e),n=null==t?void 0:t.filter((function(e){return l.LABELS.SUPPLEMENTAL_TAGS.includes(e.name)}));return(null==n?void 0:n.flatMap((function(e){var t;return null===(t=e.relations)||void 0===t?void 0:t.map((function(e){return{node:u({},e.asset),__typename:e.asset.__typename,isSupplemental:!0}}))})))||[]},t.getUnderhighlightItems=function(e){var t,n,i;return(null===(t=b(e))||void 0===t||null===(n=t.find((function(e){return e.name===l.LABELS.UNDERHIGHLIGHTS})))||void 0===n||null===(i=n.relations)||void 0===i?void 0:i.map((function(e){return e.asset})))||[]};function N(e){return v(e,["ImageBlock","VideoBlock","InteractiveBlock"])}function L(e){var t,n,i,a=null==e||null===(t=e.feedPublications)||void 0===t?void 0:t.find((function(e){return p.includes(null==e?void 0:e.feedPublicationType)}));if(a)return a;var o=/^live-blog-/,r=null==e||null===(n=e.collections)||void 0===n||null===(i=n.filter((function(e){return o.test(null==e?void 0:e.slug)})))||void 0===i?void 0:i.sort((function(e,t){return(null==t?void 0:t.firstPublished)>(null==e?void 0:e.firstPublished)?1:-1})),s=null==r?void 0:r.filter((function(e){return null==e?void 0:e.active}));return(null==s?void 0:s[0])||(null==r?void 0:r[0])}},hbBX:function(e,t,n){"use strict";var i,a,o,r,s=n("lSNA"),l=n.n(s),c=n("J4zp"),u=n.n(c),d=n("VkAN"),p=n.n(d),f=n("q1tI"),m=n.n(f),h=n("Kxyt"),g=n("eFc+"),y=n.n(g),v=n("X6oL"),b=n("GB3f"),_=n("+ClL"),w=n("ZKN5"),x=function(e){return function(t,n){var a=n.data;if(a){var o="addToReadingList"===e,r=a[e].url;t.writeFragment({id:"ReadingListStatus:".concat(r),fragment:y()(i||(i=p()(["\n        fragment ReadingListStatusSave on ReadingListStatus {\n          __typename\n          saved\n        }\n      "]))),data:{saved:o,__typename:"ReadingListStatus"}})}}},k=y()(a||(a=p()(["\n  query ReadingListStatusQuery($url: [String!]!) {\n    user {\n      readingListStatus(urls: $url) {\n        url\n        saved\n      }\n    }\n  }\n"]))),O=y()(o||(o=p()(["\n  mutation AddToReadingListMutation($readingListInput: ReadingListMutation!) {\n    addToReadingList(input: $readingListInput) {\n      clientMutationId\n      url\n    }\n  }\n"]))),T=y()(r||(r=p()(["\n  mutation RemoveFromReadingListMutation($readingListInput: ReadingListMutation!) {\n    removeFromReadingList(input: $readingListInput) {\n      clientMutationId\n      url\n    }\n  }\n"])));t.a=Object(w.a)((function(e){var t,n=e.url,i=e.urlSet,a=e.optimisticResponse,o=e.moduleName,r=e.buttonRegion,s=e.callback,c=void 0===s?function(){}:s,d=e.children,p=Object(v.useTracking)({event:"moduleInteraction",module:{name:o,region:r}}).trackEvent,g=n?[n]:i,y=Object(h.useQuery)(k,{variables:{url:g},ssr:!1,context:{queryDeduplication:!1},fetchPolicy:"cache-first"}),w=y.loading,C=y.error,E=y.data,S=Object(h.useMutation)(O,{update:x("addToReadingList")}),P=u()(S,2),I=P[0],M=P[1],A=Object(h.useMutation)(T,{update:x("removeFromReadingList")}),j=u()(A,2),N=j[0],L=j[1],D=M.loading||L.loading,R=Object(f.useCallback)((function(){var e;if(!(w||D||C))if(null!=E&&null!==(e=E.user)&&void 0!==e&&e.readingListStatus.length){var t=!E.user.readingListStatus.every((function(e){return e.saved})),n=t?I:N,i=E.user.readingListStatus.reduce((function(e,i){var o=i.url;if(i.saved===t)return e;var r=n({variables:{readingListInput:{url:o,clientMutationId:o}},optimisticResponse:a?l()({},t?"addToReadingList":"removeFromReadingList",{__typename:"ReadingListMutationResult",clientMutationId:o,url:o}):void 0});return r.then((function(e){return p({eventData:{trigger:"module",type:"click"},module:{element:{name:t?"save":"unsave",label:t?"Save":"Unsave",url:o}}}),e})),e.push(r),e}),[]);Promise.allSettled(i).then((function(){return c(t?"save":"unsave")})).catch((function(e){return Object(_.a)(e,{msg:"Save button mutation failed."})}))}else{var o=Object(b.b)();window.location.assign(o)}}),[E,C,D,w,I,N,p,c,a]),B=!(null==E||null===(t=E.user)||void 0===t||!t.readingListStatus.length)&&E.user.readingListStatus.every((function(e){return e.saved}));return m.a.cloneElement(d,{loading:w,error:C,mutationLoading:D,mutationError:M.error||L.error,saved:B,handleSave:R})}))},hkPW:function(e,t,n){"use strict";var i=n("J4zp"),a=n.n(i),o=n("q1tI"),r=n("X6oL"),s=n("Gl8y");t.a=function(e){var t=e.root,n=void 0===t?null:t,i=e.rootMargin,l=e.threshold,c=void 0===l?.1:l,u=e.data,d=Object(r.useTracking)(),p=Object(s.a)({root:n,rootMargin:i,threshold:c}),f=a()(p,2),m=f[0],h=f[1],g=Object(o.useState)(!1),y=a()(g,2),v=y[0],b=y[1];return Object(o.useEffect)((function(){h.isIntersecting&&(Array.isArray(u)?u.forEach((function(e){return d.trackEvent(e)})):d.trackEvent(u),b(!0))}),[h.isIntersecting]),{isTracked:v,ref:m,refEl:h}}},hsfg:function(e,t,n){"use strict";var i=this&&this.__makeTemplateObject||function(e,t){return Object.defineProperty?Object.defineProperty(e,"raw",{value:t}):e.raw=t,e},a=this&&this.__assign||function(){return(a=Object.assign||function(e){for(var t,n=1,i=arguments.length;n<i;n++)for(var a in t=arguments[n])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e}).apply(this,arguments)},o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.buttonClass=void 0;var r=o(n("q1tI")),s=n("X6oL"),l=n("Jqp9"),c=o(n("uewW"));t.buttonClass=(0,l.css)(u||(u=i(["\n  background: none;\n  border-radius: 10px;\n"],["\n  background: none;\n  border-radius: 10px;\n"])));var u,d=r.default.forwardRef((function(e,n){var i=e.className,o=e.trackingObject,u=e.children,d=e.redirectUri,p=e.handleClick,f=e.isLoggedIn,m=(0,s.useTracking)().trackEvent,h=r.default.useRef(null);return r.default.createElement(r.default.Fragment,null,r.default.createElement("button",{ref:n,type:"button",onClick:function(){var e,t=a({event:"moduleInteraction",eventData:{trigger:"module",type:"ob_click"},module:{element:{url:d}}},o);m(t),p&&p(),f&&h.current?h.current.submit():void 0!==window&&void 0!==(null===window||void 0===window?void 0:window.location)&&(null===(e=window.location)||void 0===e?void 0:e.href)&&(window.location.href=d)},className:(0,l.cx)(t.buttonClass,i),"data-testid":"magic-link-button"},u),r.default.createElement(c.default,{ref:h,redirectUri:d}))}));d.displayName="MagicLinkButton",t.default=d},hsyQ:function(e,t,n){"use strict";var i=n("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.OnsiteTimestamp=void 0;var a=i(n("q1tI")),o=(i(n("17x9")),n("Jqp9")),r=i(n("XMNT")),s=n("L1jB"),l=(n("EVBM"),t.OnsiteTimestamp=function(e){var t=e.timestampBlock,n=e.lastMajorModification,i=(0,o.useTheme)();return null!=t&&t.timestamp?a.default.createElement("div",{className:(0,s.getTimestampContainerClass)({theme:i}),"data-testid":"onsite-timestamp"},a.default.createElement(r.default,{showUpdatedTimestamp:t.showUpdatedTimestamp,canShowTime:!0,lastMajorModification:n},t.timestamp)):null});l.displayName="OnsiteTimestamp",l.defaultProps={timestampBlock:null,lastMajorModification:null};t.default=l},huET:function(e,t,n){"use strict";var i,a,o=n("gcR/"),r=n.n(o),s=n("J4zp"),l=n.n(s),c=n("q1tI"),u=n.n(c),d=n("Gl8y"),p=n("d3NK"),f=n("N/T0"),m=n("ZKN5"),h=n("Bk96"),g=n("zsRM");function y(e){var t=e.messageId,n=e.Content,o=e.showAds,s=e.dismissTruncator,m=e.tracking,y=Object(c.useState)(!1),v=l()(y,2),b=v[0],_=v[1],w=Object(d.a)({}),x=l()(w,2),k=x[0],O=x[1],T={name:g.c,context:"",label:t},C=Object(f.a)(Object.assign(T,m));return Object(c.useEffect)((function(){O.isIntersecting&&!b&&(_(!0),C.trackImpression())}),[O,t,C,b]),u.a.createElement("div",{className:h.e,ref:k},i||(i=r()("div",{className:h.c})),r()(n,{dismissTruncator:s,tracker:C}),o&&(a||(a=r()("div",{className:h.a},void 0,r()(p.a,{id:"acm"})))))}y.displayName="Truncator",y.defaultProps={dismissTruncator:function(){return null},tracking:{}},t.a=Object(m.a)(y)},"i+0r":function(e,t,n){"use strict";var i=n("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=i(n("IkF8"));t.default=a.default},i9lO:function(e,t,n){"use strict";var i,a,o,r,s,l,c,u=n("VkAN"),d=n.n(u),p=n("q1tI"),f=n.n(p),m=n("eFc+"),h=n.n(m),g=n("InUh"),y=n.n(g),v=n("9i1U"),b=n("solT"),_=y()((function(){return Promise.all([n.e(166),n.e(61)]).then(n.bind(null,"L1Rh"))}),{loadableGenerated:{webpack:function(){return["L1Rh"]},modules:["./AudioBlock"]}}),w=y()((function(){return Promise.all([n.e(190),n.e(194)]).then(n.bind(null,"3COf"))}),{loadableGenerated:{webpack:function(){return["3COf"]},modules:["./VideoBlock"]}}),x=function(e){var t=e.data;return Object(b.b)(t)?f.a.createElement(w,e):f.a.createElement(_,e)},k=h()(i||(i=d()(["\n  fragment HeaderMultimediaBlock_promoImage on Image {\n    id\n    crops(\n      cropNames: [\n        MEDIUM_SQUARE\n        THREE_BY_TWO\n        TWO_BY_THREE\n        SIXTEEN_BY_NINE\n        FIFTEEN_BY_SEVEN\n        MASTER\n      ]\n    ) {\n      name\n      renditions {\n        name\n        width\n        height\n        url\n      }\n    }\n  }\n"]))),O=h()(a||(a=d()(['\n  fragment HeaderMultimediaBlock_recircPromoImage on Image {\n    id\n    crops(renditionNames: ["thumbLarge"]) {\n      name\n      renditions {\n        url\n        height\n        width\n        name\n      }\n    }\n  }\n']))),T=h()(o||(o=d()(["\n  fragment HeaderMultimediaBlock_assetEdges on AssetsConnection {\n    ...Connection_pageInfo\n    edges {\n      node {\n        ... on Article {\n          id\n          headline {\n            subHeadline\n            seo\n            default\n          }\n          body {\n            content @take(first: 1) {\n              ... on HeaderMultimediaBlock {\n                media {\n                  ... on AudioBlock {\n                    media {\n                      id\n                      ... on Audio {\n                        id\n                        length\n                      }\n                    }\n                  }\n                }\n              }\n            }\n          }\n          episodeProperties {\n            episodeLabel\n          }\n          url\n          firstPublished\n          promotionalMedia {\n            ...HeaderMultimediaBlock_recircPromoImage\n            ... on Audio {\n              id\n              promotionalMedia {\n                ...HeaderMultimediaBlock_recircPromoImage\n              }\n            }\n            ... on Video {\n              id\n              promotionalMedia {\n                ...HeaderMultimediaBlock_recircPromoImage\n              }\n            }\n          }\n        }\n      }\n    }\n  }\n  ","\n  ","\n"])),O,v.a),C=h()(r||(r=d()(["\n  fragment HeaderMultimediaBlock_mostRecentAssets on Article {\n    id\n    column {\n      id\n      url\n      tagline\n      name\n      assets(first: 12) {\n        ...HeaderMultimediaBlock_assetEdges\n      }\n      __typename\n    }\n  }\n  ","\n"])),T),E=h()(s||(s=d()(["\n  fragment HeaderMultimediaBlock_oldestAssets on Article {\n    id\n    column {\n      id\n      url\n      tagline\n      name\n      stream(first: 12, streamQuery: { sort: oldest }) {\n        ...HeaderMultimediaBlock_assetEdges\n      }\n    }\n  }\n  ","\n"])),T);x.fragments={data:h()(l||(l=d()(['\n    fragment HeaderMultimediaBlock_data on HeaderMultimediaBlock {\n      headlineColor\n      backgroundColor\n      headline {\n        ... on Heading1Block {\n          content {\n            ... on TextInline {\n              text\n            }\n          }\n          textAlign\n        }\n      }\n      summary {\n        content {\n          ... on TextInline {\n            text\n          }\n        }\n        textAlign\n      }\n      media {\n        ... on VideoBlock {\n          size\n          promotionalOverride {\n            ...HeaderMultimediaBlock_promoImage\n            ... on Video {\n              id\n              renditions {\n                width\n                height\n                bitrate\n                url\n                type\n                aspectRatio\n              }\n              promotionalMedia {\n                ...HeaderMultimediaBlock_promoImage\n              }\n            }\n          }\n          media {\n            id\n            promotionalMedia {\n              ...HeaderMultimediaBlock_promoImage\n            }\n            ... on Video {\n              url\n              duration\n              sourceId\n              productionType\n              advertisingProperties {\n                sensitivity\n              }\n              firstPublished\n              promotionalMedia {\n                ... on Video {\n                  id\n                  renditions {\n                    width\n                    height\n                    bitrate\n                    url\n                    type\n                    aspectRatio\n                  }\n                  promotionalMedia {\n                    ...HeaderMultimediaBlock_promoImage\n                  }\n                }\n              }\n              renditions {\n                width\n                height\n                bitrate\n                url\n                type\n                aspectRatio\n              }\n              videoTranscript: transcript\n              playlist {\n                videos(first: 4) {\n                  ...Connection_pageInfo\n                  edges @filterEmpty {\n                    node {\n                      advertisingProperties {\n                        sensitivity\n                        sponsored\n                      }\n                      id\n                      sourceId\n                      duration\n                      section {\n                        id\n                        name\n                      }\n                      headline {\n                        default\n                      }\n                      renditions {\n                        url\n                        type\n                      }\n                      url\n                      promotionalMedia {\n                        ...HeaderMultimediaBlock_promoImage\n                        ... on Video {\n                          id\n                          promotionalMedia {\n                            ...HeaderMultimediaBlock_promoImage\n                          }\n                        }\n                      }\n                    }\n                  }\n                }\n                id\n                promotionalHeadline\n                url\n                sourceId\n              }\n            }\n          }\n        }\n        ... on AudioBlock {\n          media {\n            id\n            uri\n            sourceId\n            ... on Audio {\n              id\n              transcript {\n                __typename\n              }\n              id\n              headline {\n                default\n              }\n              summary\n              fileUrl\n              credit\n              firstPublished\n              length\n              subscribeUrls {\n                url\n                platform\n              }\n              promotionalImage {\n                image {\n                  id\n                  crops(renditionNames: ["threeByTwoLargeAt2X", "square640"]) {\n                    name\n                    renditions {\n                      url\n                      width\n                      height\n                    }\n                  }\n                }\n              }\n              promotionalMedia {\n                ... on Image {\n                  id\n                  crops(renditionNames: ["jumbo"]) {\n                    renditions {\n                      url\n                      width\n                      height\n                    }\n                  }\n                }\n              }\n              podcastSeries {\n                title\n                subtitle\n                name\n                itunesUrl\n                image {\n                  id\n                  crops(\n                    cropNames: [FIFTEEN_BY_SEVEN, THREE_BY_TWO, MASTER, MEDIUM_SQUARE, HORIZONTAL]\n                    renditionNames: [\n                      "videoLarge"\n                      "videoFifteenBySeven2610"\n                      "articleLarge"\n                      "square320"\n                      "square640"\n                    ]\n                  ) {\n                    name\n                    renditions {\n                      width\n                      url\n                      name\n                      height\n                      format\n                    }\n                  }\n                }\n                collection {\n                  id\n                  ... on LegacyCollection {\n                    name\n                  }\n                }\n              }\n              transcript {\n                transcriptFragment {\n                  text\n                  speaker\n                  timecode {\n                    start\n                    end\n                  }\n                }\n              }\n            }\n          }\n        }\n      }\n    }\n    ',"\n    ","\n  "])),k,v.a),article:h()(c||(c=d()(['\n    fragment HeaderMultimediaBlock_article on Article {\n      id\n      episodeProperties {\n        episodeLabel\n        linksLeadIn\n        links {\n          platformName\n          linkUrl\n          image {\n            id\n            crops(renditionNames: "master180") {\n              name\n              renditions {\n                name\n                url\n              }\n            }\n          }\n        }\n      }\n      promotionalImage {\n        image {\n          id\n          crops(renditionNames: ["threeByTwoLargeAt2X", "square640"]) {\n            name\n            renditions {\n              url\n              width\n              height\n            }\n          }\n        }\n      }\n      ...HeaderMultimediaBlock_mostRecentAssets @skip(if: $isTheWeekly)\n      ...HeaderMultimediaBlock_oldestAssets @include(if: $isTheWeekly)\n    }\n    ',"\n    ","\n  "])),C,E)},t.a=x},iDRl:function(e,t,n){"use strict";n.r(t);var i,a=n("VkAN"),o=n.n(a),r=n("gcR/"),s=n.n(r),l=n("lSNA"),c=n.n(l),u=n("q1tI"),d=n.n(u),p=n("eFc+"),f=n.n(p),m=n("boCj"),h=n("kbxR"),g=n.n(h),y=n("Uxaz"),v=n("fZdH"),b=n("YWmT"),_=n("4KZX"),w=n("e9RS"),x=n("2XMp");function k(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function O(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?k(Object(n),!0).forEach((function(t){c()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):k(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function T(e){var t,n=e.storyline,i=e.parentUri,a=e.pageType,o=e.testName,r=e.ruleName,l=e.region,c=Object(v.a)(),p=null==c||null===(t=c[y.STRUCTURED_INLINE_MODULES.name])||void 0===t?void 0:t.variant,f=Object(u.useMemo)((function(){return{region:l,block:"storyline_top_links_recirc",name:r,parentUri:i,pgtype:a,variant:"show"}}),[r,i,a,l]),h=Object(u.useMemo)((function(){return O(O({},n),{},{experimentalJsonBlob:Object(x.a)(O(O({},f),{},{html:null==n?void 0:n.experimentalJsonBlob}))})}),[n,f]);return s()(b.a,{componentName:"top_links",region:l,parentUri:i,testName:o,ruleName:r,pageType:a},void 0,(function(e){var t=e.trackImpression,i=e.trackInteraction;return t?s()(m.InView,{onChange:function(e){e&&t()},triggerOnce:!0},void 0,d.a.createElement(d.a.Fragment,null,s()(_.a,{uri:null==n?void 0:n.uri,name:"Top Links",isInlineModule:!0}),s()(g.a,{storyline:h,trackingParams:f,trackLinkInteraction:i,isUnstructuredInlineModule:!p||p===y.STRUCTURED_INLINE_MODULES.control}))):d.a.createElement(d.a.Fragment,null,s()(_.a,{uri:null==n?void 0:n.uri,name:"Top Links",isInlineModule:!0}),s()(g.a,{storyline:h,trackingParams:f,trackLinkInteraction:i,isUnstructuredInlineModule:!p||p===y.STRUCTURED_INLINE_MODULES.control}))}))}T.displayName="StorylinesTopLinks",T.defaultProps={testName:null},T.fragments={storyline:f()(i||(i=o()(["\n    fragment StorylinesTopLinks_storyline on CreativeWork {\n      ... on Published {\n        uri\n      }\n      storylines {\n        ruleName\n        testName\n        storyline {\n          uri\n          experimentalJsonBlob\n          topLinks {\n            displayName\n            leadIn\n            imageUrl\n            items {\n              ...StorylineListBlock_content\n            }\n          }\n        }\n      }\n    }\n    ","\n  "])),w.a.listBlock)},t.default=T},iGEk:function(e,t,n){"use strict";var i=n("gcR/"),a=n.n(i),o=n("lSNA"),r=n.n(o),s=n("q1tI"),l=n.n(s),c=n("X6oL"),u=n("Jqp9"),d=n("ZKN5"),p=n("eoAV"),f=n("jOYC"),m=n("jFEr"),h=n("lwsE"),g=n.n(h),y=n("W8MJ"),v=n.n(y),b=n("a1gu"),_=n.n(b),w=n("Nsbk"),x=n.n(w),k=n("7W2i"),O=n.n(k),T=n("369f"),C=n("wXC7"),E=n.n(C),S=Object(u.css)("display:none;",E.a.breakpoint.mediumLarge,"{display:flex;margin-right:0;margin-left:auto;width:130px;align-items:center;}",E.a.breakpoint.large,"{width:210px;}@media print{display:none;}"),P=Object(u.css)("display:flex;");function I(e,t,n){return t=x()(t),_()(e,function(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return function(){return!!e}()}()?Reflect.construct(t,n||[],x()(e).constructor):t.apply(e,n))}var M=function(){return null},A=function(e){function t(e){var n;return g()(this,t),(n=I(this,t,[e])).state={companionComponent:null},n.companionColumn=l.a.createRef(),n.hasRendered=l.a.createRef(!1),n}return O()(t,e),v()(t,[{key:"componentDidMount",value:function(){this.companionColumn.current&&this.props.adsTestDone&&this.props.addZone(this.companionColumn.current.offsetHeight)}},{key:"componentDidUpdate",value:function(){this.companionColumn.current&&this.props.adsTestDone&&!this.hasRendered.current&&(this.props.addZone(this.companionColumn.current.offsetHeight),this.hasRendered.current=!0)}},{key:"render",value:function(){var e=this.props.defaultOpts,t=this.state&&this.state.companionComponent?this.state.companionComponent:M;return l.a.createElement("aside",{className:Object(u.cx)(S,r()({},P,t.requirements&&t.requirements.appearsAtMobile)),ref:this.companionColumn,"aria-label":"companion column"},t.requirements&&t.requirements.lazyLoad&&a()(T.a,{offset:500},void 0,l.a.createElement(t,e)),t.requirements&&!t.requirements.lazyLoad&&l.a.createElement(t,e))}}],[{key:"getDerivedStateFromProps",value:function(e){return e.metadata||null}}])}(s.Component);A.displayName="CompanionColumn",A.defaultProps={defaultOpts:{},addZone:function(){},metadata:{},adsTestDone:!1};var j=A,N=n("nxVm"),L=n.n(N),D=Object(u.css)(E.a.breakpoint.mediumLarge,"{flex-direction:row;height:100%;width:945px;margin-left:auto;margin-right:auto;}",E.a.breakpoint.large,"{width:1110px;margin-left:auto;margin-right:auto;}@media (min-width:1280px){width:1170px;}",E.a.breakpoint.extraLarge,"{width:1200px;}"),R=Object(u.css)("display:flex;flex-direction:column;margin-bottom:1rem;",D,";",L.a,";@media print{margin-bottom:1em;display:block;}"),B=(E.a.breakpoint.mediumLarge,E.a.breakpoint.extraLarge,Object(u.css)("margin-left:auto;margin-right:auto;width:100%;",E.a.breakpoint.mediumLarge,"{margin-left:calc((100% - ",E.a.breakpoint.textBodyWidth,"px) / 2);margin-right:0;width:",E.a.breakpoint.textBodyWidth,"px;}",E.a.breakpoint.extraLarge,"{max-width:",E.a.breakpoint.textBodyWidthExtralarge,"px;width:",E.a.breakpoint.textBodyWidthExtralarge,"px;margin-left:calc((100% - ",E.a.breakpoint.textBodyWidthExtralarge,"px) / 2);}",L.a,";"));function z(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function F(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?z(Object(n),!0).forEach((function(t){r()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):z(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function U(e){var t=e.children,n=e.defaultOpts,i=e.supplementalCount,o=e.addZone,r=e.metadata,s=e.minWidthMatches,d=e.componentTypeMap,h=e.embeddedComponentTypeMap,g=e.isOldLiveBriefing,y=e.className,v=e.adsTestDone,b=Object(c.useTracking)({module:{region:""}}).Track,_={defaultOpts:n,addZone:o,metadata:r,adsTestDone:v};return a()(b,{},void 0,a()("div",{className:Object(u.cx)(R,"StoryBodyCompanionColumn",y)},i,a()("div",{className:B},void 0,t.map((function(e){var t=e.name,i=e.data,o=e.heading1Rendered,r=e.key,c=e.isFirstParagraph,u=e.isFirstTextAfterHeading2Block,y=e.shortFormHeadersCount;"Heading1Block"===t&&(n.replaceHeading1=o),"ImageBlock"===t&&(n.usePhotoViewer=!0,n.useMobileCrop=!0,n.lazyLoad=!0),g&&"Heading2Block"===t&&(n.isOldLiveBriefing=!0),n.firstHeading3Block="Heading3Block"===t&&1===y;var v=d[t],b=F(F({},n),{},{isFirstParagraph:c,isFirstTextAfterHeading2Block:u,data:i,key:r,minWidthMatches:s,className:f.b.layout.nonInterrupterTextElementBaseClass});return r>m.b&&h[t]?a()(p.a,{offset:{},partialVisibility:!0,scrollCheck:!0,scrollThrottle:m.c,intervalCheck:!0,intervalDelay:m.a},r.toString(16),l.a.createElement(v,b)):l.a.createElement(v,b)}))),l.a.createElement(j,_)))}U.displayName="StoryBodyCompanionColumn",U.defaultProps={defaultOpts:{},children:[],supplementalCount:0,addZone:function(){},minWidthMatches:function(){return null},metadata:{},isOldLiveBriefing:!1,className:void 0,adsTestDone:!1};t.a=Object(d.a)(U)},iPKY:function(e,t,n){"use strict";var i=n("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.topRuleClass=t.titleClass=t.sectionRuleClass=t.paragraphClass=t.listItemClass=t.leadInClass=t.guideContainerClass=t.electionLogoClass=void 0;var a=n("Jqp9"),o=i(n("3Rk2")),r=i(n("wXC7")),s=n("3sMT"),l=(0,o.default)([r.default.breakpoint.medium]);t.guideContainerClass=(0,a.css)(r.default.printHide," font-family:",r.default.font.franklinBase,";color:",s.color.content.secondary,";background-color:",s.color.background.primary,";max-width:600px;width:",r.default.breakpoint.mobileFullWidth,";margin:0 auto 1.5rem;font-size:",r.default.font.size(17),";line-height:",r.default.font.size(24),";"),t.topRuleClass=(0,a.css)("border-top:2px solid ",s.color.stroke.primary,";margin-top:1.25rem;margin-bottom:1.25rem;"),t.sectionRuleClass=(0,a.css)("margin-top:1rem;margin-bottom:1rem;"),t.listItemClass=(0,a.css)("list-style:disc;padding-left:0;margin-bottom:0;margin-left:12px;"),t.titleClass=(0,a.css)("font-family:",r.default.font.serifMedium,";font-weight:",r.default.font.weight.bold,";color:",s.color.content.primary,";margin:0;",l({fontSize:[r.default.font.size(24),r.default.font.size(28)],lineHeight:[r.default.font.size(28),r.default.font.size(32)]})),t.leadInClass=(0,a.css)("font-size:inherit;font-weight:",r.default.font.weight.medium,";padding-top:",r.default.font.size(12),";"),t.paragraphClass=(0,a.css)(l({fontSize:[r.default.font.size(17),r.default.font.size(17)],lineHeight:[r.default.font.size(24),r.default.font.size(24)],marginBottom:[r.default.font.size(12.5),r.default.font.size(15)]})),t.electionLogoClass=(0,a.css)("display:block;margin-bottom:10px;")},iSgW:function(e,t,n){"use strict";var i=n("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=i(n("J4zp")),o=n("q1tI"),r=i(n("hKI/"));t.default=function(){var e=(0,o.useState)(!1),t=(0,a.default)(e,2),n=t[0],i=t[1];return(0,o.useEffect)((function(){var e=(0,r.default)((function(){i(Boolean(window.scrollY))}),1e3,{leading:!0});return window.addEventListener("scroll",e),function(){window.removeEventListener("scroll",e)}}),[]),n}},ibW7:function(e,t,n){"use strict";var i=n("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=i(n("q1tI")),o=function(){return a.default.createElement("svg",{width:"26",height:"26",viewBox:"0 0 26 26",fill:"none"},a.default.createElement("rect",{width:"26",height:"26",fill:"black",fillOpacity:"0"}),a.default.createElement("mask",{id:"mask1","mask-type":"alpha",maskUnits:"userSpaceOnUse",x:"6",y:"9",width:"14",height:"9"},a.default.createElement("path",{d:"M18.2918 17.8262L13.3193 12.8645L8.34684 17.8262L6.81934 16.2987L13.3193 9.79867L19.8193 16.2987L18.2918 17.8262Z",fill:"white"})),a.default.createElement("g",{mask:"url(#mask1)"},a.default.createElement("rect",{width:"26",height:"26",fill:"black",fillOpacity:"0"}),a.default.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M0 0H26V26H0V0Z",fill:"black",fillOpacity:"0.54"})))};o.displayName="UpArrow";t.default=o},icOM:function(e,t,n){"use strict";var i=n("TqRt"),a=n("cDf5");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=i(n("J4zp")),r=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=a(e)&&"function"!=typeof e)return{default:e};var n=c(t);if(n&&n.has(e))return n.get(e);var i={__proto__:null},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var r in e)if("default"!==r&&{}.hasOwnProperty.call(e,r)){var s=o?Object.getOwnPropertyDescriptor(e,r):null;s&&(s.get||s.set)?Object.defineProperty(i,r,s):i[r]=e[r]}return i.default=e,n&&n.set(e,i),i}(n("q1tI")),s=(i(n("17x9")),n("Jqp9")),l=n("ybjx");function c(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(c=function(e){return e?n:t})(e)}var u=function(e){var t=e.className,n=e.bio,i=n.displayName,a=n.bioUrl,c=(null==n?void 0:n.legacyData).htmlShortBiography,u=(0,r.useState)(c),d=(0,o.default)(u,2),p=d[0],f=d[1],m=(0,r.useCallback)((function(e){return e.includes(i)&&(e=e.replace(i,"<span class=".concat(l.authorNameClass,'><a class="authorPageLinkClass overrideLinkStyles" href=').concat(a,">").concat(i,"</a></span>"))),e}),[a,i]);if((0,r.useEffect)((function(){var e=document.createElement("textarea");e.innerHTML=c;var t=e.value;f(m(t))}),[c,m]),!a||!i||!c)return null;var h,g,y;return r.default.createElement(l.Bio,{className:(0,s.cx)(t)},r.default.createElement("div",{className:l.moreAboutClass,dangerouslySetInnerHTML:{__html:(h=p,g="<span class=".concat(l.moreAboutClass,'> <a class="authorPageLinkClass overrideLinkStyles" href=').concat(a,">More about ").concat(i,"</a></span>"),y=h.trim().split("</p>"),y.splice(y.length-1,0,g),y.push("</p>"),y.join(""))}}))};u.displayName="Bio",u.defaultProps={bio:null,className:void 0};t.default=u},icfT:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.mediaFigureContainerSizeStyles=t.default=void 0;var i=n("Jqp9"),a=t.mediaFigureContainerSizeStyles=(0,i.themeFn)("mediaSize",{small:function(e){return(0,i.css)("width:50%;",e.theme.breakpointMap.small,"{width:300px;}",e.theme.breakpointMap.medium,"{max-width:300px;}",e.theme.breakpointMap.mediumLarge,"{width:300px;}",e.theme.breakpointMap.extraLarge,"{width:300px;}")}}),o=(0,i.styled)("div",{target:"erfvjey0"})(a,";");t.default=o},ifco:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getPreferredSection=void 0;t.getPreferredSection=function(e){var t=e.section,n=e.subsection;return"Opinion"!==(null==t?void 0:t.displayName)&&n&&""!==(null==n?void 0:n.displayName)?n:t}},"j/0i":function(e,t,n){"use strict";var i=n("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.darkModeMediaInsetClass=t.TimesTagsPropType=void 0;var a=n("Jqp9"),o=n("3sMT"),r=i(n("17x9")),s=i(n("wXC7")),l="\n    background-color: ".concat(o.light.colors.background.primary.hsla,";\n\n    img {\n      transform: scale(0.9);\n    }\n"),c=t.darkModeMediaInsetClass=function(e){var t=e.timesTags;return(0,a.css)(function(e){return null==e?void 0:e.some((function(e){return"internal-dark-mode-incompatible-image"===(null==e?void 0:e.vernacular)}))}(t)&&s.default.darkColorPreference(l))},u=(0,a.styled)("picture",{target:"e18g54np0"})(c);t.TimesTagsPropType=r.default.arrayOf(r.default.shape({vernacular:r.default.string})),t.default=u},jFEr:function(e,t,n){"use strict";n.d(t,"b",(function(){return i})),n.d(t,"c",(function(){return a})),n.d(t,"a",(function(){return o}));var i=8,a=100,o=3e3},jOYC:function(e,t,n){"use strict";n.d(t,"a",(function(){return p})),n.d(t,"c",(function(){return g}));var i=n("Jqp9"),a=n("wXC7"),o=n.n(a),r=n("nxVm"),s=n.n(r),l=n("TvEp"),c=n.n(l),u=n("dmwf"),d=n.n(u),p=Object(i.css)("width:","calc(100% - 40px)",";max-width:",o.a.breakpoint.textBodyWidth,"px;margin-left:","20px",";margin-right:","20px",";",o.a.breakpoint.small,"{margin-left:auto;margin-right:auto;}",o.a.breakpoint.mediumLarge,"{width:",o.a.breakpoint.textBodyWidth,"px;}",o.a.breakpoint.extraLarge,"{width:",o.a.breakpoint.textBodyWidthExtralarge,"px;max-width:",o.a.breakpoint.textBodyWidthExtralarge,"px;}",s.a,";"),f={left:Object(i.css)("text-align:left;"),center:Object(i.css)("text-align:center;"),right:Object(i.css)("text-align:right;")},m=Object(i.css)("margin-left:","20px",";margin-right:","20px",";width:","calc(100% - 40px)",";max-width:",o.a.breakpoint.textBodyWidth,"px;&:first-child{margin-top:0;}&:last-child{margin-bottom:0;}&",c.a,"{&:last-child{margin-bottom:0.75rem;}}&",d.a,"{&:first-child{margin-top:0.8125rem;}}",o.a.breakpoint.small,"{margin-left:auto;margin-right:auto;}",o.a.breakpoint.mediumLarge,"{margin-left:0;margin-right:0;width:100%;max-width:100%;&",d.a,"{&:first-child{margin-top:1.1875rem;}}}",s.a,";"),h=Object(i.css)("width:100%;margin-left:0;",o.a.breakpoint.small,"{width:","calc(100% - 40px)",";max-width:unset;}",o.a.breakpoint.mediumLarge,"{width:100%;max-width:unset;}"),g=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:15,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:12,i="15px",a=20,o=n-1,r=o*t+2*a;return"calc(".concat(e," * (((100vw - ").concat(r,"px) - ").concat(i,") / ").concat(n,") + (").concat(e," - 1) * ").concat(t,"px)")};t.b={layout:{feature:p,news:p,opinion:p,magazine:p,"t-magazine":p,textAlign:f,nonInterrupterTextElementBaseClass:m,largeWidthClass:h},grid:{pageMargin:"20px",mobileFullWidth:"calc(100% - 40px)"}}},jP6B:function(e,t,n){"use strict";t.a="/vi-assets/static-assets/icon-five-weeknight-dishes_144x144-97d51c5d4ba98233667b4057e3d852ab.webp"},jVmZ:function(e,t,n){"use strict";var i=n("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.getSectionWithCanonicalUrl=void 0;var a=i(n("lSNA")),o=n("EYBZ");function r(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function s(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?r(Object(n),!0).forEach((function(t){(0,a.default)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):r(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}t.getSectionWithCanonicalUrl=function(e,t){return s(s({},t),{},{url:e?(0,o.getSectionUrlFromCollections)(t,e):t.url})}},jcbH:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;t.default='\nfragment onCardDeckCarousel on Carousel {\n  __typename\n  data\n  cards {\n    key\n    data\n    text {\n      key\n      content {\n        ... on TextInline {\n          text\n          __typename\n        }\n      }\n    }\n    assets {\n      ... on CreativeWork {\n        ... on Published {\n          uri\n          url\n          sourceId\n          __typename\n        }\n        ... on Image {\n          id\n          uri\n          credit\n          sourceId\n          altText\n          crops(\n            renditionNames: [\n              "videoSixteenByNine1050"\n              "videoSixteenByNine600"\n              "threeByTwoMediumAt2X"\n              "verticalTwoByThree735"\n              "square640"\n              "threeByTwoMediumAt2X"\n            ]\n          ) {\n            name\n            renditions {\n              name\n              url\n              width\n              height\n            }\n          }\n        }\n        ... on Video {\n          id\n          uri\n          advertisingProperties {\n            sensitivity\n          }\n          bylines {\n            renderedRepresentation\n          }\n          transcript\n          duration\n          renditions {\n            aspectRatio\n            type\n            url\n            width\n            height\n          }\n          isCinemagraph\n          promotionalMedia {\n            ... on Image {\n              id\n              credit\n              crops(\n                renditionNames: [\n                  "videoSixteenByNine1050"\n                  "videoSixteenByNine600"\n                  "threeByTwoMediumAt2X"\n                  "verticalTwoByThree735"\n                  "square640"\n                  "threeByTwoMediumAt2X"\n                ]\n              ) {\n                name\n                renditions {\n                  name\n                  url\n                  width\n                  height\n                }\n              }\n            }\n          }\n          summary\n        }\n      }\n    }\n  }\n}\n'},jt2X:function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));var i=n("lSNA"),a=n.n(i),o=n("q1tI"),r=n("txtk");function s(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function l(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?s(Object(n),!0).forEach((function(t){a()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function c(){return l(l({data:null},Object(o.useContext)(r.a)),{},{loading:!1})}},k1X0:function(e,t,n){"use strict";n.d(t,"a",(function(){return h})),n.d(t,"b",(function(){return v})),n.d(t,"c",(function(){return b})),n.d(t,"d",(function(){return _}));var i=n("lSNA"),a=n.n(i),o=n("RIqP"),r=n.n(o),s=n("ZT1T"),l=n("lGVM"),c=n("QPid"),u=n("LWxt"),d=n("vudT"),p=n("dbFP");function f(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function m(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?f(Object(n),!0).forEach((function(t){a()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):f(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var h=function(){var e=new Date,t=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"][e.getDay()],n=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"][e.getMonth()],i=e.getDate();return"".concat(t,", ").concat(n," ").concat(i)},g={spellingBee:{id:"spellingBee",name:"Spelling Bee",tileName:"Spelling Bee",url:"https://www.nytimes.com/puzzles/spelling-bee",description:"Make as many words as you can with 7 letters.",mobileDescription:"Wrangle as many words as you can.",tileDescription:"Wrangle words",author:"By SAM EZERSKY",color:"#f7da21",iconUrl:c.a},wordle:{id:"wordle",name:"Wordle",tileName:"Wordle",url:"https://www.nytimes.com/games/wordle/index.html",description:"Create words using letters around the square.",mobileDescription:"Guess your way to the correct word.",tileDescription:"Untangle terms",author:"By TRACY BENNETT",color:"#e3e3e1",iconUrl:p.a},connections:{id:"connections",name:"Connections",tileName:"Connections",url:"https://www.nytimes.com/games/connections",description:"Group words that share a common thread.",mobileDescription:"Group words that share common thread.",tileDescription:"Group words",author:"By WYNA LIU",color:"#b4a8ff",iconUrl:s.a},tiles:{id:"tiles",name:"Tiles",tileName:"Tiles",url:"https://www.nytimes.com/puzzles/tiles",description:"Match tiles to keep your chain going.",mobileDescription:"Match motifs",tileDescription:"Match motifs",author:"By ROBERT VINLUAN",color:"#b5e352",iconUrl:d.a},crossword:{id:"crossword",name:"The Crossword",tileName:"Crossword",url:"https://www.nytimes.com/crosswords/game/daily",description:"Crack the clues in today’s puzzle.",mobileDescription:"Crack the clues in today’s puzzle.",tileDescription:"Crack clues",author:"By HEMANT MEHTA",color:"#6493e6",iconUrl:l.a},theMini:{id:"mini",name:"The Mini",tileName:"Mini",url:"https://www.nytimes.com/crosswords/game/mini",description:"Solve the puzzle in seconds.",mobileDescription:"Solve the puzzle in seconds.",tileDescription:"Solve in seconds",author:"By JOEL FAGLIANO",color:"#95befa",iconUrl:u.a}},y=["spellingBee","connections","crossword","wordle","theMini","tiles"],v=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=y.reduce((function(t,n){return e&&e[n]?t.userKeys.push(n):t.defaultKeys.push(n),t}),{userKeys:[],defaultKeys:[]}),n=t.userKeys,i=t.defaultKeys;return[].concat(r()(n),r()(i)).map((function(e,t){return m(m({},g[e]),{},{index:t})}))},b=function(e){var t=new Date,n=t.toISOString().split("T")[0],i=e.map((function(e){return new Date(e)})).sort((function(e,t){return e-t})),a=i.filter((function(e){return e.toISOString().split("T")[0]===n})).length,o=i.filter((function(e){return e>=new Date(t.getTime()-5184e5)})).length;return a<4&&o<28},_=function(e){var t;return Array.isArray(null==e||null===(t=e.welcomeBannerGames)||void 0===t?void 0:t.views)?e.welcomeBannerGames.views:[]}},kBkf:function(e,t,n){"use strict";n.r(t),n.d(t,"internationalData",(function(){return I})),n.d(t,"IntDataProvider",(function(){return M}));var i=n("q1tI"),a=n.n(i),o=n("cRkx"),r=n("wNME"),s=n("NByq"),l=n("05yZ"),c=n("83Mo"),u=n("YawQ"),d=n("jP6B"),p=n("nM+O"),f=n("gUwe"),m=n("Ow4k"),h=n("ULBD"),g=n("z4uL"),y=n("y1T0"),v=n("IVQz"),b=n("KIO/"),_=n("Ikdi"),w=n("7HgC"),x=n("WJy1"),k=n("PlW/"),O=n("IvQ5"),T=n("4KWU"),C=n("eHD8"),E=n("3VDn"),S=n("H0B8"),P=n("EXHk"),I=[{url:"https://www.nytimes.com/international/section/us",name:"U.S.",dropdown:[{columnWidth:2,heading:"Sections",type:"links",links:[{copy:"U.S.",link:"https://www.nytimes.com/international/section/us"},{copy:"Politics",link:"https://www.nytimes.com/international/section/politics"},{copy:"New York",link:"https://www.nytimes.com/international/section/nyregion"},{copy:"California",link:"https://www.nytimes.com/column/california-today"},{copy:"Education",link:"https://www.nytimes.com/international/section/education"},{copy:"Health",link:"https://www.nytimes.com/international/section/health"},{copy:"Obituaries",link:"https://www.nytimes.com/international/section/obituaries"},{copy:"Science",link:"https://www.nytimes.com/international/section/science"}]},{columnWidth:2,hamburgerColumnWidth:3,heading:"Sections",hideHeading:!0,type:"links",links:[{copy:"Climate",link:"https://www.nytimes.com/international/section/climate"},{copy:"Weather",link:"https://www.nytimes.com/international/section/weather"},{copy:"Sports",link:"https://www.nytimes.com/international/section/sports"},{copy:"Business",link:"https://www.nytimes.com/international/section/business"},{copy:"Tech",link:"https://www.nytimes.com/international/section/technology"},{copy:"The Upshot",link:"https://www.nytimes.com/international/section/upshot"},{copy:"The Magazine",link:"https://www.nytimes.com/international/section/magazine"}]},{columnWidth:4,heading:"U.S. Politics",type:"links",style:{marginLeft:"2rem"},links:[{copy:"2024 Elections",link:"https://www.nytimes.com/news-event/2024-election"},{copy:"Primary Results",link:"https://www.nytimes.com/interactive/2024/us/elections/republican-primary-delegates-tracker-calendar.html"},{copy:"Supreme Court",link:"https://www.nytimes.com/topic/organization/us-supreme-court"},{copy:"Congress",link:"https://www.nytimes.com/topic/organization/us-congress"},{copy:"Biden Administration",link:"https://www.nytimes.com/spotlight/joe-biden"}]},{columnWidth:4,heading:"Top Stories",type:"links",links:[{copy:"Trump Investigations",link:"https://www.nytimes.com/news-event/donald-trump-investigations"},{copy:"Immigration",link:"https://www.nytimes.com/news-event/immigration-us"},{copy:"Abortion",link:"https://www.nytimes.com/spotlight/abortion-news"},{copy:"Campus Protests",link:"https://www.nytimes.com/news-event/college-campus-gaza-protests"}]},{columnWidth:4,heading:"Newsletters",footer:{copy:"See all newsletters",link:"https://www.nytimes.com/newsletters"},type:"thumbnailContent",items:[{title:"The Morning",description:"Make sense of the day’s news and ideas.",link:"https://www.nytimes.com/newsletters/morning-briefing",thumbnailImage:v.a},{title:"The Upshot",description:"Analysis that explains politics, policy and everyday life.",link:"https://www.nytimes.com/newsletters/upshot",thumbnailImage:_.a}]},{type:"hamburgerSpacer",hamburgerColumnWidth:1,columnWidth:0},{columnWidth:4,heading:"Podcasts",footer:{copy:"See all podcasts",link:"https://www.nytimes.com/spotlight/podcasts"},type:"thumbnailContent",items:[{title:"The Daily",description:"The biggest stories of our time, in 20 minutes a day.",link:"https://www.nytimes.com/column/the-daily",thumbnailImage:"https://static01.nyt.com/images/2017/01/29/podcasts/the-daily-album-art/the-daily-album-art-mediumSquare149-v3.jpg?quality=75&auto=webp&disable=upscale"},{title:"The Run-Up",description:"On the campaign trail with Astead Herndon.",link:"https://www.nytimes.com/column/election-run-up-podcast",thumbnailBorder:!0,thumbnailImage:"https://static01.nyt.com/images/2022/08/29/podcasts/the-run-up-album-art/the-run-up-album-art-thumbLarge.jpg?quality=75&auto=webp&disable=upscale"}]}]},{url:"https://www.nytimes.com/international/section/world",name:"World",dropdown:[{columnWidth:1},{columnWidth:4,hamburgerColumnWidth:5,heading:"Sections",type:"links",innerGridColumnCount:2,columns:[[{copy:"World",link:"https://www.nytimes.com/international/section/world"},{copy:"Africa",link:"https://www.nytimes.com/international/section/world/africa"},{copy:"Americas",link:"https://www.nytimes.com/international/section/world/americas"},{copy:"Asia",link:"https://www.nytimes.com/international/section/world/asia"},{copy:"Australia",link:"https://www.nytimes.com/international/section/world/australia"},{copy:"Canada",link:"https://www.nytimes.com/international/section/world/canada"}],[{copy:"Europe",link:"https://www.nytimes.com/international/section/world/europe"},{copy:"Middle East",link:"https://www.nytimes.com/international/section/world/middleeast"},{copy:"Science",link:"https://www.nytimes.com/international/section/science"},{copy:"Climate",link:"https://www.nytimes.com/international/section/climate"},{copy:"Weather",link:"https://www.nytimes.com/international/section/weather"},{copy:"Health",link:"https://www.nytimes.com/international/section/health"},{copy:"Obituaries",link:"https://www.nytimes.com/international/section/obituaries"}]]},{columnWidth:1},{columnWidth:5,heading:"Top Stories",type:"links",links:[{copy:"Israel-Hamas War",link:"https://www.nytimes.com/news-event/israel-hamas-gaza"},{copy:"Russia-Ukraine War",link:"https://www.nytimes.com/news-event/ukraine-russia"}]},{columnWidth:4,heading:"Newsletters",type:"thumbnailContent",items:[{title:"Morning Briefing: Europe",description:"Get what you need to know to start your day.",link:"https://www.nytimes.com/newsletters/morning-briefing-europe",thumbnailImage:u.a},{title:"The Interpreter",description:"Original analysis on the week’s biggest global stories.",link:"https://www.nytimes.com/newsletters/the-interpreter",thumbnailImage:y.a}]},{columnWidth:4,heading:"Newsletters",hideHeading:!0,footer:{copy:"See all newsletters",link:"https://www.nytimes.com/newsletters"},type:"thumbnailContent",items:[{title:"Your Places: Global Update",description:"The latest news for any part of the world you select.",link:"https://www.nytimes.com/newsletters/your-places-global-update",thumbnailImage:C.a},{title:"Canada Letter",description:"Backstories and analysis from our Canadian correspondents.",link:"https://www.nytimes.com/newsletters/canada-letter",thumbnailImage:r.a}]}]},{url:"https://www.nytimes.com/international/section/business",name:"Business",dropdown:[{columnWidth:1},{columnWidth:2,heading:"Sections",type:"links",links:[{copy:"Business",link:"https://www.nytimes.com/international/section/business"},{copy:"Tech",link:"https://www.nytimes.com/international/section/technology"},{copy:"Economy",link:"https://www.nytimes.com/international/section/business/economy"},{copy:"Media",link:"https://www.nytimes.com/international/section/business/media"},{copy:"Finance and Markets",link:"https://www.nytimes.com/section/markets-overview"}]},{columnWidth:3,heading:"Sections",hideHeading:!0,type:"links",links:[{copy:"DealBook",link:"https://www.nytimes.com/international/section/business/dealbook"},{copy:"Personal Tech",link:"https://www.nytimes.com/international/section/technology/personaltech"},{copy:"Energy Transition",link:"https://www.nytimes.com/international/section/business/energy-environment"},{copy:"Your Money",link:"https://www.nytimes.com/international/section/your-money"}]},{columnWidth:5,heading:"Top Stories",type:"links",links:[{copy:"U.S. Economy",link:"https://www.nytimes.com/news-event/economy-business-us"},{copy:"Stock Market",link:"https://www.nytimes.com/section/markets-overview"},{copy:"Artificial Intelligence",link:"https://www.nytimes.com/spotlight/artificial-intelligence"}]},{columnWidth:4,heading:"Newsletters",footer:{copy:"See all newsletters",link:"https://www.nytimes.com/newsletters"},type:"thumbnailContent",items:[{title:"DealBook",description:"The most crucial business and policy news you need to know.",link:"https://www.nytimes.com/newsletters/dealbook",thumbnailImage:c.a}]},{columnWidth:4,heading:"Podcasts",footer:{copy:"See all podcasts",link:"https://www.nytimes.com/spotlight/podcasts"},type:"thumbnailContent",items:[{title:"Hard Fork",description:"Our tech journalists help you make sense of the rapidly changing tech world.",link:"https://www.nytimes.com/column/hard-fork",thumbnailImage:"https://static01.nyt.com/images/2022/09/28/podcasts/hard-fork-album-art/hard-fork-album-art-mediumSquare149-v2.png?quality=75&auto=webp&disable=upscale"}]}]},{url:"https://www.nytimes.com/international/section/arts",name:"Arts",dropdown:[{columnWidth:1},{columnWidth:2,heading:"Sections",type:"links",links:[{copy:"Today's Arts",link:"https://www.nytimes.com/international/section/arts"},{copy:"Books",link:"https://www.nytimes.com/international/section/books"},{copy:"Best Sellers",link:"https://www.nytimes.com/books/best-sellers"},{copy:"Dance",link:"https://www.nytimes.com/international/section/arts/dance"},{copy:"Movies",link:"https://www.nytimes.com/international/section/movies"},{copy:"Music",link:"https://www.nytimes.com/international/section/arts/music"}]},{columnWidth:3,heading:"Sections",hideHeading:!0,type:"links",links:[{copy:"Television",link:"https://www.nytimes.com/international/section/arts/television"},{copy:"Theater",link:"https://www.nytimes.com/international/section/theater"},{copy:"Pop Culture",link:"https://www.nytimes.com/spotlight/pop-culture"},{copy:"T Magazine",link:"https://www.nytimes.com/international/section/t-magazine"},{copy:"Visual Arts",link:"https://www.nytimes.com/international/section/arts/design"}]},{columnWidth:5,heading:"Recommendations",type:"links",links:[{copy:"Critic’s Picks",link:"https://www.nytimes.com/spotlight/critics-picks"},{copy:"What to Read",link:"https://www.nytimes.com/spotlight/books-to-read"},{copy:"What to Watch",link:"https://www.nytimes.com/spotlight/what-to-watch"},{copy:"What to Listen To",link:"https://www.nytimes.com/column/playlist"},{copy:"5 Minutes to Make You Love Music",link:"https://www.nytimes.com/interactive/2023/10/27/arts/music/music-fivemins-collection.html"}]},{columnWidth:4,heading:"Newsletters",footer:{copy:"See all newsletters",link:"https://www.nytimes.com/newsletters"},type:"thumbnailContent",items:[{title:"Read Like the Wind",description:"Book recommendations from our critics.",link:"https://www.nytimes.com/newsletters/read-like-the-wind",thumbnailImage:g.a},{title:"Watching",description:"Streaming TV and movie recommendations.",link:"https://www.nytimes.com/newsletters/watching",thumbnailImage:x.a}]},{columnWidth:4,heading:"Podcasts",footer:{copy:"See all podcasts",link:"https://www.nytimes.com/spotlight/podcasts"},type:"thumbnailContent",items:[{title:"Book Review",description:"The podcast that takes you inside the literary world.",link:"https://www.nytimes.com/column/book-review-podcast",thumbnailImage:"https://static01.nyt.com/images/2018/03/27/books/book-review-album-art-v2/book-review-album-art-v2-thumbLarge-v3.jpg?quality=75&auto=webp&disable=upscale"},{title:"Popcast",description:"Pop music news, new songs and albums, and artists of note.",link:"https://www.nytimes.com/column/popcast-pop-music-podcast",thumbnailImage:"https://static01.nyt.com/images/2011/05/20/multimedia/music-popcast/music-popcast-thumbLarge-v3.jpg?quality=75&auto=webp&disable=upscale"}]}]},{url:"https://www.nytimes.com/spotlight/lifestyle",name:"Lifestyle",dropdown:[{columnWidth:1},{columnWidth:2,heading:"Sections",type:"links",links:[{copy:"All Lifestyle",link:"https://www.nytimes.com/spotlight/lifestyle"},{copy:"Well",link:"https://www.nytimes.com/international/section/well"},{copy:"Travel",link:"https://www.nytimes.com/international/section/travel"},{copy:"Style",link:"https://www.nytimes.com/international/section/style"},{copy:"Real Estate",link:"https://www.nytimes.com/international/section/realestate"}]},{columnWidth:3,heading:"Sections",hideHeading:!0,type:"links",links:[{copy:"Food",link:"https://www.nytimes.com/international/section/food"},{copy:"Love",link:"https://www.nytimes.com/international/section/fashion/weddings"},{copy:"Your Money",link:"https://www.nytimes.com/international/section/your-money"},{copy:"Personal Tech",link:"https://www.nytimes.com/international/section/technology/personaltech"},{copy:"T Magazine",link:"https://www.nytimes.com/international/section/t-magazine"}]},{columnWidth:5,heading:"Columns",type:"links",innerGridColumnCount:2,columns:[[{copy:"36 Hours",link:"https://www.nytimes.com/column/36-hours"},{copy:"Ask Well",link:"https://www.nytimes.com/column/ask-well"},{copy:"The Hunt",link:"https://www.nytimes.com/column/the-hunt"},{copy:"Modern Love",link:"https://www.nytimes.com/column/modern-love"}],[{copy:"Where to Eat",link:"https://www.nytimes.com/spotlight/best-restaurants"},{copy:"Vows",link:"https://www.nytimes.com/column/vows"},{copy:"Social Q’s",link:"https://www.nytimes.com/column/social-qs"},{copy:"The Ethicist",link:"https://www.nytimes.com/column/the-ethicist"}]]},{columnWidth:4,heading:"Newsletters",footer:{copy:"See all newsletters",link:"https://www.nytimes.com/newsletters"},type:"thumbnailContent",items:[{title:"Open Thread",description:"The latest news on what we wear, by our chief fashion critic.",link:"https://www.nytimes.com/newsletters/open-thread-fashion",thumbnailImage:m.a},{title:"Well",description:"Essential news and guidance to live your healthiest life.",link:"https://www.nytimes.com/newsletters/well",thumbnailImage:k.a}]},{columnWidth:4,heading:"Podcasts",footer:{copy:"See all podcasts",link:"https://www.nytimes.com/spotlight/podcasts"},type:"thumbnailContent",items:[{title:"Modern Love",description:"The complicated love lives of real people.",link:"https://www.nytimes.com/column/modern-love-podcast",thumbnailImage:"https://static01.nyt.com/images/2020/09/21/podcasts/modernlove-logo/modernlove-logo-thumbLarge-v3.jpg?quality=75&auto=webp&disable=upscale"}]}]},{url:"https://www.nytimes.com/international/section/opinion",name:"Opinion",dropdown:[{columnWidth:1},{columnWidth:2,hamburgerColumnWidth:3,heading:"Sections",type:"links",links:[{copy:"Opinion",link:"https://www.nytimes.com/international/section/opinion"},{copy:"Guest Essays",link:"https://www.nytimes.com/international/section/opinion/contributors"},{copy:"Editorials",link:"https://www.nytimes.com/international/section/opinion/editorials"},{copy:"Op-Docs",link:"https://www.nytimes.com/column/op-docs"},{copy:"Videos",link:"https://www.nytimes.com/spotlight/opinion-video"},{copy:"Letters",link:"https://www.nytimes.com/international/section/opinion/letters"}]},{columnWidth:2,hamburgerColumnWidth:3,heading:"Topics",type:"links",links:[{copy:"Politics",link:"https://www.nytimes.com/international/section/opinion/politics"},{copy:"World",link:"https://www.nytimes.com/international/section/opinion/international-world"},{copy:"Business",link:"https://www.nytimes.com/international/section/opinion/business-economics"},{copy:"Tech",link:"https://www.nytimes.com/international/section/opinion/technology"},{copy:"Climate",link:"https://www.nytimes.com/international/section/opinion/environment"},{copy:"Health",link:"https://www.nytimes.com/international/section/opinion/health"},{copy:"Culture",link:"https://www.nytimes.com/international/section/opinion/culture"}]},{columnWidth:1},{columnWidth:9,heading:"Columnists",type:"links",innerGridColumnCount:3,columns:[[{copy:"Charles M. Blow",link:"https://www.nytimes.com/by/charles-m-blow"},{copy:"Jamelle Bouie",link:"https://www.nytimes.com/by/jamelle-bouie"},{copy:"David Brooks",link:"https://www.nytimes.com/by/david-brooks"},{copy:"Gail Collins",link:"https://www.nytimes.com/by/gail-collins"},{copy:"Ross Douthat",link:"https://www.nytimes.com/by/ross-douthat"},{copy:"Maureen Dowd",link:"https://www.nytimes.com/by/maureen-dowd"},{copy:"David French",link:"https://www.nytimes.com/by/david-french"}],[{copy:"Thomas L. Friedman",link:"https://www.nytimes.com/by/thomas-l-friedman"},{copy:"Michelle Goldberg",link:"https://www.nytimes.com/by/michelle-goldberg"},{copy:"Ezra Klein",link:"https://www.nytimes.com/by/ezra-klein"},{copy:"Nicholas Kristof",link:"https://www.nytimes.com/by/nicholas-kristof"},{copy:"Paul Krugman",link:"https://www.nytimes.com/by/paul-krugman"},{copy:"Carlos Lozada",link:"https://www.nytimes.com/by/carlos-lozada"}],[{copy:"Tressie McMillan Cottom",link:"https://www.nytimes.com/by/tressie-mcmillan-cottom"},{copy:"Pamela Paul",link:"https://www.nytimes.com/by/pamela-paul"},{copy:"Lydia Polgreen",link:"https://www.nytimes.com/by/lydia-polgreen"},{copy:"Bret Stephens",link:"https://www.nytimes.com/by/bret-stephens"},{copy:"Zeynep Tufekci",link:"https://www.nytimes.com/by/zeynep-tufekci"}]]},{columnWidth:4,heading:"Podcasts",footer:{copy:"See all podcasts",link:"https://www.nytimes.com/spotlight/podcasts"},type:"thumbnailContent",items:[{title:"Matter of Opinion",description:"Thoughts, aloud. With Michelle Cottle, Ross Douthat, Carlos Lozada and Lydia Polgreen.",link:"https://www.nytimes.com/column/matter-of-opinion",thumbnailImage:"https://static01.nyt.com/images/2023/05/08/podcasts/matter-of-opinion-album-art/matter-of-opinion-album-art-thumbLarge-v2.jpg?quality=75&auto=webp&disable=upscale"},{title:"The Ezra Klein Show",description:"Discussions of ideas that matter, plus book recommendations.",link:"https://www.nytimes.com/column/ezra-klein-podcast",thumbnailImage:"https://static01.nyt.com/images/2021/01/12/podcasts/ezra-klein-album-art/ezra-klein-album-art-mediumSquare149-v2.jpg?quality=75&auto=webp&disable=upscale"}]}]},{url:"https://www.nytimes.com/spotlight/podcasts",name:"Audio",productType:"standalone",dropdown:[{columnWidth:1},{columnWidth:4,heading:"Audio",type:"brand",link:"https://www.nytimes.com/spotlight/podcasts",description:"Podcasts and narrated articles covering news, tech, culture and more.",footer:{copy:"Download the Audio app on iOS.",link:"https://www.nytimes.com/audio/app"}},{columnWidth:6,heading:"Listen",type:"links",innerGridColumnCount:2,footer:{copy:"See all audio",link:"https://www.nytimes.com/spotlight/podcasts"},columns:[[{copy:"The Headlines",link:"https://www.nytimes.com/column/the-headlines"},{copy:"The Daily",link:"https://www.nytimes.com/column/the-daily"},{copy:"Hard Fork",link:"https://www.nytimes.com/column/hard-fork"},{copy:"The Ezra Klein Show",link:"https://www.nytimes.com/column/ezra-klein-podcast"},{copy:"Matter of Opinion",link:"https://www.nytimes.com/column/matter-of-opinion"},{copy:"Serial Productions",link:"https://www.nytimes.com/interactive/2022/podcasts/serial-productions.html"}],[{copy:"The Book Review Podcast",link:"https://www.nytimes.com/column/book-review-podcast"},{copy:"Modern Love",link:"https://www.nytimes.com/column/modern-love-podcast"},{copy:"The Run-Up",link:"https://www.nytimes.com/column/election-run-up-podcast"},{copy:"Popcast",link:"https://www.nytimes.com/column/popcast-pop-music-podcast"},{copy:"Reporter Reads",link:"https://www.nytimes.com/spotlight/reporter-reads"},{copy:"The Sunday Read",link:"https://www.nytimes.com/spotlight/the-sunday-read"},{copy:"The Culture Desk",link:"https://www.nytimes.com/column/the-culture-desk"},{copy:"The Interview",link:"https://www.nytimes.com/column/the-interview"}]]},{columnWidth:4,heading:"Featured",type:"thumbnailContent",items:[{title:"The Interview",description:"Conversations with the world’s most fascinating people.",link:"https://www.nytimes.com/column/the-interview",thumbnailImage:P.a},{title:"The Headlines",description:"Your morning listen. Top stories, in 5 minutes.",link:"https://www.nytimes.com/column/the-headlines",thumbnailImage:"https://static01.nyt.com/images/2022/10/12/podcasts/headlines-albumartwork-audioapp-2/headlines-albumartwork-audioapp-2-thumbLarge.png?quality=75&auto=webp&disable=upscale"},{title:"Serial Season 4: Guantánamo",description:"What it was really like, from people who lived it.",link:"https://www.nytimes.com/interactive/2024/podcasts/serial-season-four-guantanamo.html",thumbnailImage:S.a}]},{columnWidth:4,heading:"Newsletters",type:"thumbnailContent",footer:{copy:"See all newsletters",link:"https://www.nytimes.com/newsletters"},items:[{title:"Audio",description:"Our editors share their favorite listens from the New York Times Audio app.",link:"https://www.nytimes.com/newsletters/audio",thumbnailImage:o.a}]}]},{url:"https://www.nytimes.com/crosswords",name:"Games",productType:"standalone",dropdown:[{columnWidth:1},{columnWidth:4,heading:"Games",type:"brand",link:"https://www.nytimes.com/crosswords",description:"Word games, logic puzzles and crosswords, including an extensive archive."},{columnWidth:3,heading:"Play",type:"linksWithIcons",links:[{copy:"Spelling Bee",icon:"https://www.nytimes.com/games-assets/v2/assets/icons/spelling-bee.svg",link:"https://www.nytimes.com/puzzles/spelling-bee"},{copy:"The Mini Crossword",icon:"https://www.nytimes.com/games-assets/v2/assets/icons/mini.svg",link:"https://www.nytimes.com/crosswords/game/mini"},{copy:"Wordle",icon:"https://www.nytimes.com/games-assets/v2/assets/icons/wordle.svg",link:"https://www.nytimes.com/games/wordle/index.html"},{copy:"The Crossword",icon:"https://www.nytimes.com/games-assets/v2/assets/icons/daily.svg",link:"https://www.nytimes.com/crosswords/game/daily/"},{copy:"Vertex",icon:"https://www.nytimes.com/games-assets/v2/assets/icons/vertex.svg",link:"https://www.nytimes.com/puzzles/vertex"}]},{columnWidth:3,heading:"Play",hideHeading:!0,type:"linksWithIcons",links:[{copy:"Strands",icon:"https://www.nytimes.com/games-assets/v2/assets/icons/strands.svg",link:"https://www.nytimes.com/games/strands"},{copy:"Connections",icon:"https://www.nytimes.com/games-assets/v2/assets/icons/connections.svg",link:"https://www.nytimes.com/games/connections"},{copy:"Sudoku",icon:"https://www.nytimes.com/games-assets/v2/assets/expansion-games/sudoku-card-icon.svg",link:"https://www.nytimes.com/puzzles/sudoku"},{copy:"Letter Boxed",icon:"https://www.nytimes.com/games-assets/v2/assets/icons/letter-boxed.svg",link:"https://www.nytimes.com/puzzles/letter-boxed"},{copy:"Tiles",icon:"https://www.nytimes.com/games-assets/v2/assets/icons/tiles.svg",link:"https://www.nytimes.com/puzzles/tiles"}]},{columnWidth:4,heading:"Community",type:"links",links:[{copy:"Spelling Bee Forum",link:"https://www.nytimes.com/spotlight/spelling-bee-forum"},{copy:"Wordplay Column",link:"https://www.nytimes.com/spotlight/daily-crossword-column"},{copy:"Wordle Review",link:"https://www.nytimes.com/spotlight/wordle-review"},{copy:"Submit a Crossword",link:"https://www.nytimes.com/article/submit-crossword-puzzles-the-new-york-times.html"},{copy:"Meet Our Crossword Constructors",link:"https://www.nytimes.com/spotlight/puzzle-making"},{copy:"Mini to Maestro",link:"https://www.nytimes.com/2022/09/19/crosswords/mini-to-maestro-part-1.html"},{copy:"Wordlebot",link:"https://www.nytimes.com/interactive/2022/upshot/wordle-bot.html"},{copy:"Take the Puzzle Personality Quiz",link:"https://www.nytimes.com/puzzle-personality"}]},{columnWidth:4,heading:"Newsletters",footer:{copy:"See all newsletters",link:"https://www.nytimes.com/newsletters"},type:"thumbnailContent",items:[{title:"Gameplay",description:"Puzzles, brain teasers, solving tips and more.",link:"https://www.nytimes.com/newsletters/gameplay",thumbnailImage:f.a},{title:"Easy Mode",description:"Get an easy version of one of the hardest crossword puzzles of the week.",link:"https://www.nytimes.com/newsletters/easy-mode",thumbnailImage:E.a}]}]},{url:"https://cooking.nytimes.com/",name:"Cooking",productType:"standalone",dropdown:[{columnWidth:1},{columnWidth:4,heading:"Cooking",type:"brand",link:"https://cooking.nytimes.com/",description:"Recipes, advice and inspiration for everyday cooking, special occasions and more."},{columnWidth:3,hamburgerColumnWidth:4,heading:"Recipes",type:"links",innerGridColumnCount:2,columns:[[{copy:"Easy",link:"https://cooking.nytimes.com/topics/easy-recipes"},{copy:"Dinner",link:"https://cooking.nytimes.com/topics/dinner-recipes"},{copy:"Quick",link:"https://cooking.nytimes.com/68861692-nyt-cooking/43843372-quick-recipes"},{copy:"Healthy",link:"https://cooking.nytimes.com/topics/healthy-recipes"},{copy:"Breakfast",link:"https://cooking.nytimes.com/topics/breakfast"}],[{copy:"Vegetarian",link:"https://cooking.nytimes.com/topics/vegetarian"},{copy:"Vegan",link:"https://cooking.nytimes.com/topics/vegan-recipes"},{copy:"Chicken",link:"https://cooking.nytimes.com/topics/our-best-chicken-recipes"},{copy:"Pasta",link:"https://cooking.nytimes.com/topics/our-best-pasta-recipes"},{copy:"Dessert",link:"https://cooking.nytimes.com/topics/desserts"}]]},{columnWidth:3,heading:"Editors' Picks",type:"links",links:[{copy:"Soups and Stews",link:"https://cooking.nytimes.com/68861692-nyt-cooking/638891-best-soup-stew-recipes"},{copy:"Easy Weeknight",link:"https://cooking.nytimes.com/topics/easy-weeknight"},{copy:"Newest Recipes",link:"https://cooking.nytimes.com/68861692-nyt-cooking/32998034-our-newest-recipes"},{copy:"One-Pot Meals",link:"https://cooking.nytimes.com/68861692-nyt-cooking/2370458-one-pot-dinner-recipes"},{copy:"Slow Cooker Recipes",link:"https://cooking.nytimes.com/68861692-nyt-cooking/950138-amazing-slow-cooker-recipes"},{copy:"Comfort Food",link:"https://cooking.nytimes.com/topics/comfort-food"},{copy:"Party Recipes",link:"https://cooking.nytimes.com/topics/entertaining"}]},{columnWidth:4,heading:"Newsletters",type:"thumbnailContent",items:[{title:"The Cooking Newsletter",description:"New recipes, easy dinner ideas and smart kitchen tips from Melissa Clark, Sam Sifton and our New York Times Cooking editors.",link:"https://www.nytimes.com/newsletters/cooking",thumbnailImage:l.a},{title:"The Veggie",description:"Delicious vegetarian recipes and tips from Tanya Sichynsky.",link:"https://www.nytimes.com/newsletters/the-veggie",thumbnailImage:w.a}]},{columnWidth:4,heading:"Newsletters",hideHeading:!0,type:"thumbnailContent",footer:{copy:"See all newsletters",link:"https://www.nytimes.com/newsletters"},items:[{title:"Five Weeknight Dishes",description:"Dinner ideas for busy people from Emily Weinstein.",link:"https://www.nytimes.com/newsletters/five-weeknight-dishes",thumbnailImage:d.a}]}]},{url:"https://www.nytimes.com/wirecutter/",name:"Wirecutter",productType:"standalone",dropdown:[{columnWidth:1},{columnWidth:4,heading:"Wirecutter",type:"brand",link:"https://www.nytimes.com/wirecutter",description:"Reviews and recommendations for thousands of products."},{columnWidth:3,heading:"Reviews",type:"links",links:[{copy:"Kitchen",link:"https://www.nytimes.com/wirecutter/kitchen-dining/"},{copy:"Tech",link:"https://www.nytimes.com/wirecutter/electronics/"},{copy:"Sleep",link:"https://www.nytimes.com/wirecutter/sleep/"},{copy:"Appliances",link:"https://www.nytimes.com/wirecutter/appliances/"},{copy:"Home and Garden",link:"https://www.nytimes.com/wirecutter/home-garden/"},{copy:"Moving",link:"https://www.nytimes.com/wirecutter/make-a-plan/moving/"}]},{columnWidth:3,heading:"Reviews",hideHeading:!0,type:"links",links:[{copy:"Travel",link:"https://www.nytimes.com/wirecutter/travel/"},{copy:"Gifts",link:"https://www.nytimes.com/wirecutter/gifts/"},{copy:"Deals",link:"https://www.nytimes.com/wirecutter/deals/"},{copy:"Baby and Kid",link:"https://www.nytimes.com/wirecutter/baby-kid/"},{copy:"Health and Fitness",link:"https://www.nytimes.com/wirecutter/health-fitness/"}]},{columnWidth:4,heading:"The Best...",type:"links",links:[{copy:"Air Purifier",link:"https://www.nytimes.com/wirecutter/reviews/best-air-purifier/"},{copy:"Electric Toothbrush",link:"https://www.nytimes.com/wirecutter/reviews/best-electric-toothbrush/"},{copy:"Pressure Washer",link:"https://www.nytimes.com/wirecutter/reviews/best-pressure-washer/"},{copy:"Cordless Stick Vacuum",link:"https://www.nytimes.com/wirecutter/reviews/best-cordless-stick-vacuum/"},{copy:"Office Chair",link:"https://www.nytimes.com/wirecutter/reviews/best-office-chair/"},{copy:"Robot Vacuum",link:"https://www.nytimes.com/wirecutter/reviews/best-robot-vacuum/"}]},{columnWidth:4,heading:"Newsletters",footer:{copy:"See all newsletters",link:"https://www.nytimes.com/newsletters"},type:"thumbnailContent",items:[{title:"The Recommendation",description:"The best independent reviews, expert advice and intensively researched deals.",link:"https://www.nytimes.com/newsletters/the-recommendation",thumbnailImage:b.a},{title:"Clean Everything",description:"Step-by-step advice on how to keep everything in your home squeaky clean.",link:"https://www.nytimes.com/newsletters/clean-everything",thumbnailImage:s.a}]}]},{url:"https://www.nytimes.com/athletic/",name:"The Athletic",productType:"standalone",dropdown:[{columnWidth:1},{columnWidth:4,heading:"The Athletic",type:"brand",link:"https://www.nytimes.com/athletic/",description:"Personalized coverage of your sports teams and leagues."},{columnWidth:3,hamburgerColumnWidth:5,heading:"Leagues",type:"links",innerGridColumnCount:2,columns:[[{copy:"NFL",link:"https://www.nytimes.com/athletic/nfl/"},{copy:"MLB",link:"https://www.nytimes.com/athletic/mlb/"},{copy:"NBA",link:"https://www.nytimes.com/athletic/nba/"},{copy:"Premier League",link:"https://www.nytimes.com/athletic/football/premier-league/"},{copy:"NCAAF",link:"https://www.nytimes.com/athletic/college-football/"},{copy:"NCAAM",link:"https://www.nytimes.com/athletic/college-basketball/"},{copy:"NHL",link:"https://www.nytimes.com/athletic/nhl/"}],[{copy:"NCAAW",link:"https://www.nytimes.com/athletic/womens-college-basketball/ "},{copy:"MLS",link:"https://www.nytimes.com/athletic/football/mls/"},{copy:"Tennis",link:"https://www.nytimes.com/athletic/tennis/"},{copy:"NWSL",link:"https://www.nytimes.com/athletic/football/nwsl/"},{copy:"Golf",link:"https://www.nytimes.com/athletic/golf/"}]]},{columnWidth:3,heading:"Top Stories",type:"links",links:[{copy:"European Championship",link:"https://www.nytimes.com/athletic/football/european-championship/"},{copy:"Copa America",link:"https://www.nytimes.com/athletic/football/copa-america/"},{copy:"MLB Standings",link:"https://www.nytimes.com/athletic/mlb/standings/"},{copy:"Olympics",link:"https://www.nytimes.com/athletic/olympics/"}]},{columnWidth:4,heading:"Newsletters",type:"thumbnailContent",items:[{title:"The Pulse",description:"Delivering the top stories in sports, Sunday to Friday.",link:"https://www.nytimes.com/athletic/newsletters/the-pulse/",thumbnailImage:h.a},{title:"Scoop City",description:"The top stories in the NFL, from Jacob Robinson with Dianna Russini.",link:"https://www.nytimes.com/athletic/newsletters/scoop-city/",thumbnailImage:O.a}]},{columnWidth:4,type:"thumbnailContent",heading:"Newsletters",hideHeading:!0,items:[{title:"The Windup",description:"The biggest stories in baseball, by Levi Weaver with Ken Rosenthal.",link:"https://www.nytimes.com/athletic/newsletters/the-windup/",thumbnailImage:T.a},{title:"The Athletic FC",description:"Renowned soccer writer Phil Hay's daily newsletter unpacks the truth behind the game's biggest stories.",link:"https://www.nytimes.com/athletic/newsletters/the-athletic-fc/",thumbnailImage:p.a}]}]}],M=function(e){var t=e.children;return a.a.Children.only(a.a.cloneElement(t,{data:I}))}},kCKD:function(e,t,n){"use strict";var i=n("gcR/"),a=n.n(i),o=(n("q1tI"),n("wXC7")),r=n.n(o),s=function(e){var t=e.className,n=e.fill;return a()("svg",{"aria-hidden":"true",width:"23",height:"18",viewBox:"0 0 23 18",className:t},void 0,a()("path",{d:"M1.357 17.192a.663.663 0 0 1-.642-.81c1.82-7.955 6.197-12.068 12.331-11.68V1.127a.779.779 0 0 1 .42-.653.726.726 0 0 1 .78.106l8.195 6.986a.81.81 0 0 1 .253.557.82.82 0 0 1-.263.547l-8.196 6.955a.83.83 0 0 1-.779.105.747.747 0 0 1-.42-.663V11.29c-8.418-.905-10.974 5.177-11.08 5.45a.662.662 0 0 1-.6.453Zm10.048-7.26a16.37 16.37 0 0 1 2.314.158.81.81 0 0 1 .642.726v3.02l6.702-5.682-6.702-5.692v2.883a.767.767 0 0 1-.242.536.747.747 0 0 1-.547.18c-4.808-.537-8.364 1.85-10.448 6.922a11.679 11.679 0 0 1 8.28-3.093v.042Z",fill:n,fillRule:"nonzero"}))};s.displayName="ArrowV2",s.defaultProps={className:void 0,fill:r.a.color.black},t.a=s},kIGo:function(e,t,n){"use strict";var i=this&&this.__createBinding||(Object.create?function(e,t,n,i){void 0===i&&(i=n);var a=Object.getOwnPropertyDescriptor(t,n);a&&!("get"in a?!t.__esModule:a.writable||a.configurable)||(a={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,i,a)}:function(e,t,n,i){void 0===i&&(i=n),e[i]=t[n]}),a=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&i(t,e,n);return a(t,e),t},r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t,n,i,a,o,r,b,_,w,x,k,O,T,C=e.unit,E=(0,s.useState)(!1),S=E[0],P=E[1],I=(0,s.useState)(!1),M=I[0],A=I[1],j=(0,p.useMessageSelection)({config:{name:"dock"}}),N=(0,f.useUserState)(),L=(0,c.useTracking)(),D="/"===(0,h.getPathName)()?"homepage":"article",R=null===(t=C.content)||void 0===t?void 0:t.subscriptionURI,B={event:"moduleInteraction",eventData:{pagetype:D,trigger:"module",type:"click"},module:{name:"dock",label:null===(n=null==j?void 0:j.response)||void 0===n?void 0:n.campaign(),element:{name:m.Action.Subscribe,url:R}}};if(null==j?void 0:j.loading)return null;if(!S){var z=null===(a=null===(i=null==j?void 0:j.response)||void 0===i?void 0:i.userstate())||void 0===a?void 0:a.messageSelectionMessageCaps,F=null;if(z)if((V=z).forEach((function(e){var t,n;"dock"===(null==e?void 0:e.unit)&&(null==e?void 0:e.campaign)===(null===(t=null==j?void 0:j.response)||void 0===t?void 0:t.campaign())&&(null==e?void 0:e.audience)===(null===(n=null==j?void 0:j.response)||void 0===n?void 0:n.audience())&&(F=e)})),F){var U=F,H=new Date(null==U?void 0:U.lastSeenOn).getTime(),W=(new Date).getTime(),q=Math.abs(Math.round(W-H)/6e4);U.viewCount+=1,q>2880?(U.viewCount=1,U.lastSeenOn=(new Date).toISOString(),A(!1)):U.viewCount>2?A(!0):A(!1),N.update({messageSelectionMessageCaps:V})}if(!F){var V=[];z&&(V=z),V.push({unit:"dock",campaign:null===(o=null==j?void 0:j.response)||void 0===o?void 0:o.campaign(),audience:null===(r=null==j?void 0:j.response)||void 0===r?void 0:r.audience(),lastSeenOn:(new Date).toISOString(),viewCount:1,dismissed:!1}),N.update({messageSelectionMessageCaps:V}),A(!1)}P(!0)}if(M)return s.default.createElement(u.default,{testId:"onsite-messaging-unit-".concat(null===g.config||void 0===g.config?void 0:g.config.name),"data-campaign":null==C?void 0:C.campaign,"data-audience":null==C?void 0:C.audience,className:(0,l.cx)(d.dockWrapper),unit:C,contentID:"SUBCON__BAU_ALL_ACCESS_ACQUISITION_234",dockID:"standard",header:s.default.createElement("div",{className:(0,l.cx)(d.dockHeaderHed)},null===(b=null==C?void 0:C.content)||void 0===b?void 0:b.headerText),headerCollapsedCTA:null===(_=C.content)||void 0===_?void 0:_.headerCta,onDockHeadingClick:function(){L.trackEvent(B),window.open(R,"_blank","noopener,noreferrer")},isDockDismissible:!1,isDockExpandable:!1,minimized:!0});return s.default.createElement(u.default,{testId:"onsite-messaging-unit-".concat(null===g.config||void 0===g.config?void 0:g.config.name),"data-campaign":null==C?void 0:C.campaign,"data-audience":null==C?void 0:C.audience,className:(0,l.cx)(d.dockWrapper),unit:C,contentID:"SUBCON__BAU_ALL_ACCESS_ACQUISITION_234",dockID:"expand",header:s.default.createElement("div",{className:(0,l.cx)(d.dockHeaderHed)},null===(w=null==C?void 0:C.content)||void 0===w?void 0:w.headerText),card:s.default.createElement("div",{className:(0,l.cx)(d.dockContentWrapper)},s.default.createElement("div",{className:(0,l.cx)(d.dockContentKicker)},null===(x=null==C?void 0:C.content)||void 0===x?void 0:x.kickerText),s.default.createElement("div",{className:(0,l.cx)(d.dockContentHeadline)},s.default.createElement(y.default,{oldPrice:null===(k=null==C?void 0:C.content)||void 0===k?void 0:k.fullPrice,currentPrice:null===(O=null==C?void 0:C.content)||void 0===O?void 0:O.bodyPriceExpression})),s.default.createElement(v.Button,{component:"a",testId:"learn-more-button",className:(0,l.cx)(d.ctaButton),href:null===(T=null==C?void 0:C.content)||void 0===T?void 0:T.subscriptionURI,onClick:function(){L.trackEvent(B)}},"Learn more")),isDockDismissible:!1,isDockExpandable:!0,minimized:!1,dividerStyle:d.dividerStyle,headingClassStyle:d.headingClassStyle,headingInfoContainerStyle:d.headingInfoContainerStyle,headingMessageClassStyle:d.headingMessageClassStyle,ctaIconWrapperStyle:d.ctaIconWrapperStyle,ctaContainerStyle:d.ctaContainerStyle,ctaActionTextClassStyle:d.ctaActionTextClassStyle})};var s=o(n("q1tI")),l=n("Jqp9"),c=n("X6oL"),u=r(n("5UIh")),d=o(n("Rpp7")),p=n("syiw"),f=n("HDG5"),m=n("djNW"),h=n("FY2l"),g=n("6gWn"),y=r(n("XvvG")),v=n("etPP")},kJEd:function(e,t,n){"use strict";var i=n("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=i(n("lSNA")),o=i(n("q1tI")),r=(i(n("17x9")),n("Jqp9")),s=n("bLcY"),l=n("AKP5");function c(e){var t=e.index,n=e.length;return o.default.createElement("ul",{className:s.navListClass},(0,l.times)(n,(function(e){return o.default.createElement("li",{key:e,className:(0,r.cx)(s.dotClass,(0,a.default)({},s.activeClass,e===t)),"data-active":e===t})})))}c.displayName="DotNav",c.defaultProps={index:0};t.default=c},kTfh:function(e,t,n){"use strict";var i=n("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.disabledClass=t.arrowsNavClass=t.arrowRightClass=t.arrowLeftClass=void 0;var a=n("Jqp9"),o=i(n("wXC7")),r=n("3sMT"),s=(t.arrowsNavClass=(0,a.css)("justify-content:space-between;position:absolute;display:none;z-index:1;div &{right:0;}",o.default.breakpoint.small,"{display:flex;}"),(0,a.css)("display:inline-flex;justify-content:center;align-items:center;white-space:nowrap;width:26px;height:26px;border-radius:50%;background-color:",r.color.background.primary,";border:1px solid ",r.color.stroke.quaternary,";cursor:pointer;outline:none;::after{content:'';display:inline-block;margin-left:2px;margin-bottom:1;width:7px;height:7px;line-height:0;border-top:2px solid ",r.color.content.primary,";border-right:2px solid ",r.color.content.primary,";border-color:",r.color.content.primary,";}&:hover{background-color:",r.color.stroke.quaternary,";}"));t.arrowLeftClass=(0,a.css)(s," left:0;margin-right:10px;&::after{transform:rotate(-135deg);}"),t.arrowRightClass=(0,a.css)(s," right:0;&::after{margin-left:-2px;transform:rotate(45deg);}"),t.disabledClass=(0,a.css)("cursor:default;:hover{background-color:",r.color.background.primary,";}::after{border-color:",r.color.stroke.quaternary,";}")},kV2j:function(e,t,n){"use strict";n.d(t,"b",(function(){return i})),n.d(t,"a",(function(){return a}));var i=function(e){var t,n;return null!==(t=e.article)&&void 0!==t&&t.data?e.article.data.attributes.approvedCount:null!==(n=e.article)&&void 0!==n&&n.approvedCount?e.article.approvedCount:null},a=function(e){var t,n;return null!==(t=e.article)&&void 0!==t&&t.data?e.article.data.attributes.url:null!==(n=e.article)&&void 0!==n&&n.url?e.article.url:null}},kVbu:function(e,t,n){"use strict";var i=n("TqRt"),a=n("cDf5");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=i(n("q1tI")),r=n("Ap7T"),s=n("Jqp9"),l=i(n("XlcC")),c=i(n("OB6K")),u=i(n("WG9L")),d=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=a(e)&&"function"!=typeof e)return{default:e};var n=h(t);if(n&&n.has(e))return n.get(e);var i={__proto__:null},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var r in e)if("default"!==r&&{}.hasOwnProperty.call(e,r)){var s=o?Object.getOwnPropertyDescriptor(e,r):null;s&&(s.get||s.set)?Object.defineProperty(i,r,s):i[r]=e[r]}return i.default=e,n&&n.set(e,i),i}(n("W9dX")),p=i(n("yEZI")),f=i(n("s6ck")),m=i(n("7IP+"));function h(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(h=function(e){return e?n:t})(e)}var g=function(e){var t=e.title,n=e.caption,i=e.content,a=e.source,h=e.pageNumber,g=e.sourceUrl,y=(0,s.useTheme)(),v=(0,r.v4)();if(null==i||!i.length)return null;var b=g?o.default.createElement(u.default,{url:h?"".concat(g,"#page-").concat(h):g,title:"Read the full document.",opts:{}},null!=a?a:""):a;return o.default.createElement(c.default,{theme:y},o.default.createElement("section",{className:(0,s.cx)(d.containerClass,"g-document-tear")},t||n?o.default.createElement("header",{className:(0,s.cx)(d.headerClass,"g-document-tear-header"),"data-testid":"document-tear-header"},t&&o.default.createElement(f.default,{className:(0,s.cx)(d.titleClass)},t),n&&o.default.createElement(m.default,{className:(0,s.cx)(d.captionClass)},n)):null,o.default.createElement("blockquote",{className:(0,s.cx)(d.excerptWrapperClass,"g-document-tear-excerpt"),"data-testid":"document-tear-excerpt"},i.map((function(e,t){return o.default.createElement(p.default,{className:(0,s.cx)(d.excerptParagraphClass),key:"".concat(v,"-").concat(t.toString())},e.content.map(l.default))}))),b&&o.default.createElement(m.default,{className:(0,s.cx)(d.sourceDetailClass,"g-document-tear-source"),"data-testid":"document-tear-source"},"Source: ",b)))};g.displayName="DocumentTear";t.default=g},kbxR:function(e,t,n){"use strict";var i=n("TqRt"),a=n("cDf5");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=i(n("q1tI")),r=(i(n("17x9")),i(n("oCqg"))),s=n("xHA4"),l=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=a(e)&&"function"!=typeof e)return{default:e};var n=c(t);if(n&&n.has(e))return n.get(e);var i={__proto__:null},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var r in e)if("default"!==r&&{}.hasOwnProperty.call(e,r)){var s=o?Object.getOwnPropertyDescriptor(e,r):null;s&&(s.get||s.set)?Object.defineProperty(i,r,s):i[r]=e[r]}return i.default=e,n&&n.set(e,i),i}(n("OGvp"));function c(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(c=function(e){return e?n:t})(e)}function u(e){var t,n=e.storyline,i=e.trackingParams,a=e.trackLinkInteraction;if(!e.isUnstructuredInlineModule&&n.topLinks)return o.default.createElement(r.default,{storyline:n,trackingParams:i,trackLinkInteraction:a});var c=(0,s.getExperimentalAssetDataFromStoryline)({storyline:n,block:s.STORYLINE_BLOCKS.toplinks});if(!(null!=c&&c.title||null!=c&&null!==(t=c.bulletedList)&&void 0!==t&&t.length))return null;var u=c.title,d=c.imageUrl,p=c.leadIn,f=c.bulletedList;return o.default.createElement("section",{role:"complementary","aria-labelledby":"styln-toplinks-title",className:l.containerClass},d&&o.default.createElement("img",{src:d,alt:"",className:l.imageClass}),o.default.createElement("header",{className:l.headerClass},o.default.createElement("h2",{id:"styln-toplinks-title",className:l.titleClass},u),p&&o.default.createElement("h3",{className:l.leadInClass},p)),o.default.createElement("ul",{className:l.listClass},f.map((function(e){return o.default.createElement("li",{key:e},o.default.createElement("span",{dangerouslySetInnerHTML:{__html:e}}))}))))}u.displayName="StorylineTopLinks",u.defaultProps={storyline:{experimentalJsonBlob:null,topLinks:null},trackingParams:null,trackLinkInteraction:function(){},isUnstructuredInlineModule:!0};t.default=u},kekP:function(e,t,n){"use strict";var i=this&&this.__createBinding||(Object.create?function(e,t,n,i){void 0===i&&(i=n);var a=Object.getOwnPropertyDescriptor(t,n);a&&!("get"in a?!t.__esModule:a.writable||a.configurable)||(a={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,i,a)}:function(e,t,n,i){void 0===i&&(i=n),e[i]=t[n]}),a=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&i(t,e,n);return a(t,e),t},r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var s=o(n("q1tI")),l=r(n("5UIh")),c=n("syiw"),u=n("HDG5"),d=o(n("IHwD")),p=n("etPP"),f=n("6gWn"),m=d.StyledMainContent;t.default=function(e){var t,n,i,a,o,r,h,g,y,v,b,_,w,x,k,O,T,C,E,S,P,I,M,A,j=e.unit,N=(0,s.useState)(!1),L=N[0],D=N[1],R=(0,c.useMessageSelection)({config:{name:"dock"}}),B=(0,u.useUserState)(),z=s.default.createElement("p",{className:d.headerTextClass},s.default.createElement("div",{className:null===(t=j.content)||void 0===t?void 0:t.classDockBody},s.default.createElement("div",{className:d.giftingDockShowDesktop},s.default.createElement("strong",null,null===(n=j.content)||void 0===n?void 0:n.urgency,":")," ",null===(i=j.content)||void 0===i?void 0:i.topHeadline),s.default.createElement("div",{className:d.giftingDockShowMobile},s.default.createElement("strong",null,null===(a=j.content)||void 0===a?void 0:a.urgency,":"),s.default.createElement("br",null),null===(o=j.content)||void 0===o?void 0:o.topSubHeadline))),F=s.default.createElement(m,null,s.default.createElement("div",{className:null===(r=j.content)||void 0===r?void 0:r.classDockBody},s.default.createElement("div",{className:d.logosDockDesktop},s.default.createElement("img",{className:"logoClass",alt:null===(h=j.content)||void 0===h?void 0:h.alt})),s.default.createElement("div",{className:d.contentDockDesktop},s.default.createElement("div",{className:"wrapRedBoxClass"},s.default.createElement("img",{className:"imageClass",alt:"NYT Box Gift"})),s.default.createElement("div",{className:"wrapHeadline"},s.default.createElement("h2",{className:"headlineGiftingBF"},null===(g=j.content)||void 0===g?void 0:g.headLine," ",s.default.createElement("span",{className:"subHeadlineGiftingBF"},null===(y=j.content)||void 0===y?void 0:y.subHeadLine)),s.default.createElement("div",null,s.default.createElement("p",{className:"subHeadlineGiftingBFG"},s.default.createElement("strong",{className:"urgencyGiftingBFG"},null===(v=j.content)||void 0===v?void 0:v.urgency,".")," ",null===(b=j.content)||void 0===b?void 0:b.giftCopy," ",s.default.createElement("span",{className:"subHeadlineGiftingBFG20off"},null===(_=j.content)||void 0===_?void 0:_.giftCopyM),s.default.createElement("br",null),s.default.createElement("strong",{className:"urgencyGiftingBFGM"},null===(w=j.content)||void 0===w?void 0:w.urgency,"."))),s.default.createElement("div",null,s.default.createElement("p",{className:"subHeadlineGiftingBFGM"},null===(x=j.content)||void 0===x?void 0:x.giftCopyM," ",s.default.createElement("strong",null,null===(k=j.content)||void 0===k?void 0:k.urgency,"."))),s.default.createElement("div",{className:d.giftingDockShowMobile},s.default.createElement(p.Button,{href:null===(O=null==j?void 0:j.content)||void 0===O?void 0:O.url,className:"giftingButtonClass",testId:"gifting-button-mob",component:"a"},null===(T=j.content)||void 0===T?void 0:T.ctaCopy)))),s.default.createElement("div",{className:d.giftingDockButtonDesktop},s.default.createElement(p.Button,{href:null===(C=null==j?void 0:j.content)||void 0===C?void 0:C.url,className:"giftingButtonClass",testId:"gifting-button",component:"a"},null===(E=j.content)||void 0===E?void 0:E.ctaCopy))));if(R.loading)return null;if(!L){var U=null===(P=null===(S=null==R?void 0:R.response)||void 0===S?void 0:S.userstate())||void 0===P?void 0:P.messageSelectionMessageCaps,H=null;if(U)if((G=U).forEach((function(e){var t,n;"dock"===(null==e?void 0:e.unit)&&(null==e?void 0:e.campaign)===(null===(t=null==R?void 0:R.response)||void 0===t?void 0:t.campaign())&&(null==e?void 0:e.audience)===(null===(n=null==R?void 0:R.response)||void 0===n?void 0:n.audience())&&(H=e)})),null!==H){var W=H,q=new Date(null==W?void 0:W.lastSeenOn).getTime(),V=(new Date).getTime();Math.abs(Math.round(V-q)/6e4)>1440?(W.viewCount=1,W.lastSeenOn=(new Date).toISOString()):W.viewCount+=1,B.update({messageSelectionMessageCaps:G})}if(!H){var G=[];U&&(G=U),G.push({unit:"dock",campaign:null===(I=null==R?void 0:R.response)||void 0===I?void 0:I.campaign(),audience:null===(M=null==R?void 0:R.response)||void 0===M?void 0:M.audience(),lastSeenOn:(new Date).toISOString(),viewCount:1,dismissed:!1}),B.update({messageSelectionMessageCaps:G})}D(!0)}return s.default.createElement(l.default,{testId:"onsite-messaging-unit-".concat(null===f.config||void 0===f.config?void 0:f.config.name),"data-campaign":null==j?void 0:j.campaign,"data-audience":null==j?void 0:j.audience,unit:j,contentID:null===(A=j.content)||void 0===A?void 0:A.classDock,dockID:"Gifting Dock Sale - 0424",header:z,card:F,isDockDismissible:!0,minimized:!1})}},"kr/V":function(e,t,n){"use strict";var i=n("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=i(n("q1tI")),o=(i(n("17x9")),i(n("Youu"))),r=function(e){var t=e.className,n=e.showTooltip,i=e.ctaText,r=e.ariaLabel,s=e.storageKey,l=e.segment,c=e.onView,u=e.onSubscribe,d=e.onUnsubscribe,p=e.tooltipArrowPosition,f=e.buttonWrapperClassName,m=e.showToggle,h=e.errorAlertClassName,g=e.tooltipOverrideClassName,y=e.alertWrapperClassName,v=e.testingInBrowser;return a.default.createElement(o.default,{className:t,showTooltip:n,ctaText:i,ariaLabel:r,storageKey:s,segment:l,onView:c,onSubscribe:u,onUnsubscribe:d,tooltipArrowPosition:p,buttonWrapperClassName:f,showToggle:m,errorAlertClassName:h,tooltipOverrideClassName:g,alertWrapperClassName:y,testingInBrowser:v})};r.displayName="NotificationToggle",r.defaultProps={className:void 0,ariaLabel:void 0,ctaText:void 0,showTooltip:!1,storageKey:void 0,tooltipArrowPosition:"bottom",onView:void 0,onSubscribe:void 0,onUnsubscribe:void 0,buttonWrapperClassName:void 0,showToggle:!0,errorAlertClassName:void 0,tooltipOverrideClassName:void 0,alertWrapperClassName:void 0,segment:void 0,testingInBrowser:!1};t.default=r},ktkx:function(e,t,n){"use strict";n.d(t,"b",(function(){return v})),n.d(t,"a",(function(){return b}));var i,a=n("VkAN"),o=n.n(a),r=n("yXPU"),s=n.n(r),l=n("o0o1"),c=n.n(l),u=(n("ls82"),n("eFc+")),d=n.n(u),p=n("06b3"),f=(n("NW2b"),n("HChe")),m=n("mczz"),h=n("0O4q"),g=n("Rb+W");function y(){return(y=s()(c.a.mark((function e(t){var n,i,a,o,r,s;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=new TextEncoder,o=a.encode(t),e.next=4,null===(n=crypto)||void 0===n||null===(i=n.subtle)||void 0===i?void 0:i.digest("SHA-256",o);case 4:return r=e.sent,s=Array.from(new Uint8Array(r)),e.abrupt("return",s.map((function(e){return e.toString(16).padStart(2,"0")})).join(""));case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function v(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:void 0;if(!e)return t;var i=e.targetUrl,a=e.timesTags,o=e.collections,r=e.adTargetingParams,s=Object(f.a)()||"smartphone",l=n||Object(g.q)(s);return i||(r?t=Object(g.t)(r,l,t):(t=Object(g.c)(t,e,l),a&&(t=Object(g.j)(a,t)),o&&(t=Object(g.h)(o,t)))),t}function b(e,t){var n,i,a=t.tracking,o=t.getPageviewId,r=t.getReferrer,s=Object(f.a)()||"smartphone",l=Object(g.d)(p.a),c=a?function(e){var t=e.getTrackingData;return"function"==typeof t?t():null}(a):null,u=Object(m.c)(),d=Object(h.b)(),y={ver:Object(g.p)(s),sov:Object(g.o)(),vp:Object(g.q)(s),test:"projectvi",ref:Object(g.k)(),refdom:Object(g.l)(),abra_dfp:Object(g.b)(),"gpt-beta":"vqwdtftx"};return u&&(i=Object(m.d)(u,"ad-keywords")),o&&(y.page_view_id=o()),r&&(y.topref=r()),"1"===Object(g.i)(p.a)&&(y.gdprUser=!0),"out"===(null==l?void 0:l.toString().toLowerCase())&&(y.noTracking=!0),null!=c&&null!==(n=c.interaction)&&void 0!==n&&n.page&&(y.page=c.interaction.page),i&&(y.adv=i),y=function(e,t){if(null!=e&&e.subscriptionDetails&&Array.isArray(e.subscriptionDetails)&&e.subscriptionDetails.length>=1){var n=e.subscriptionDetails[0];n.billingSource&&(t.subsrc=n.billingSource)}return t}(d,y),"smartphone"===s?Object(g.s)(y):Object(g.a)(y)}new Promise((function(e,t){var n=!1;h.a.subscribe({next:function(t){var i,a={user:t};(function(e){return y.apply(this,arguments)})(null==a||null===(i=a.user)||void 0===i?void 0:i.email).then((function(e){var t,n;null===(t=window)||void 0===t||null===(n=t.ats)||void 0===n||n.setAdditionalData({id:[e],type:"emailHashes"})})),n=!0,e(a)},error:function(e){t(e)},complete:function(){n||t(new Error("stream closed"))}})})).catch((function(e){console.error(e)})),v.fragments={data:d()(i||(i=o()(['\n    fragment getTargetingParams_data on WorkOrLocation {\n      ... on RelocatedWork {\n        targetUrl\n      }\n      ... on CreativeWork {\n        adTargetingParams(clientAdParams: { edn: "us", plat: "web", prop: "nyt" }) {\n          key\n          value\n        }\n        ...getAdLibraryFallback_data\n        ...getCollections_collections\n        ...getNewsKeywords_keywords\n      }\n    }\n    ',"\n    ","\n    ","\n  "])),g.c.fragments.data,g.h.fragments.collections,g.j.fragments.keywords)}},kvrv:function(e,t,n){"use strict";var i=n("TqRt"),a=n("cDf5");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=a(e)&&"function"!=typeof e)return{default:e};var n=d(t);if(n&&n.has(e))return n.get(e);var i={__proto__:null},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var r in e)if("default"!==r&&{}.hasOwnProperty.call(e,r)){var s=o?Object.getOwnPropertyDescriptor(e,r):null;s&&(s.get||s.set)?Object.defineProperty(i,r,s):i[r]=e[r]}return i.default=e,n&&n.set(e,i),i}(n("q1tI")),r=(i(n("17x9")),n("Jqp9")),s=i(n("Vcud")),l=n("7DZV"),c=n("e8Mh"),u=n("7zGq");function d(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(d=function(e){return e?n:t})(e)}var p=o.default.forwardRef((function(e,t){var n=e.a11yLabel,i=e.children,a=e.id,d=e.onSwipe,p=e.scrolledIndex,f=e.isPeeking,m=(0,u.debounce)((function(e){var t=f?1.2:1,n=(0,u.getScrolledIndex)(e,t);d(n)}));return(0,o.useEffect)((function(){var e=null!=t&&t.current?(0,c.handleKeyNavigation)(t.current):u.noop;return document.addEventListener("keyup",e,!0),function(){document.removeEventListener("keyup",e,!0)}}),[t]),o.default.createElement("div",{id:a,"aria-live":"polite","aria-atomic":!0},o.default.createElement(s.default,null,n),o.default.createElement("div",{ref:t,"data-scrolled-index":p,className:(0,r.cx)("swiper",l.swiperClass),onScroll:function(e){return m(e.target)}},o.default.Children.map(i,(function(e,t){return o.default.createElement("div",{className:l.peekingSlideContainerClass},o.default.createElement("div",{className:l.slideClass,"aria-hidden":t!==p},e))}))))}));p.defaultProps={a11yLabel:void 0,id:void 0};t.default=p},kz9X:function(e,t,n){"use strict";var i=n("TqRt"),a=n("cDf5");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=a(e)&&"function"!=typeof e)return{default:e};var n=u(t);if(n&&n.has(e))return n.get(e);var i={__proto__:null},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var r in e)if("default"!==r&&{}.hasOwnProperty.call(e,r)){var s=o?Object.getOwnPropertyDescriptor(e,r):null;s&&(s.get||s.set)?Object.defineProperty(i,r,s):i[r]=e[r]}return i.default=e,n&&n.set(e,i),i}(n("q1tI")),r=(n("17x9"),n("45t3")),s=n("QDH1"),l=i(n("Ivf9")),c=n("To3l");function u(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(u=function(e){return e?n:t})(e)}t.default=function(e){var t=e.article,n=(0,s.getHeadingData)(t),i=(0,r.useBulletBriefLocationContext)(),a=i.boldItems,u=i.setboldItems;return(0,o.useEffect)((function(){var e=function(){var e=window.pageYOffset+20,t=(0,s.getBoldNavMap)(n,e);u(t)};return window.addEventListener("scroll",e,{passive:!0}),function(){window.removeEventListener("scroll",e)}}),[n,u]),o.default.createElement(o.default.Fragment,null,o.default.createElement(c.GuideNavHeading,null,t.headline.default),o.default.createElement(c.GuideNavItems,null,n.map((function(e){return o.default.createElement(l.default,{item:e,boldLocation:a})}))))}},l24T:function(e,t,n){"use strict";n.d(t,"a",(function(){return i})),n.d(t,"b",(function(){return o})),n.d(t,"e",(function(){return l})),n.d(t,"c",(function(){return c})),n.d(t,"d",(function(){return u}));var i={name:"MAPS_OnsiteNL_RecircOptimize_0401",control:"0_control",mapsVariant:"1_MAPS_Cards",sujoVariant:"2_SuJoMoreNewsletters"},a=i.name,o=function(e){var t;return null==e||null===(t=e[a])||void 0===t?void 0:t.allocated},r=function(e){var t;return null==e||null===(t=e[a])||void 0===t?void 0:t.variant},s=function(e,t){return!(null==e||!e.allowedEntitlement)&&o(t)},l=function(e,t){return s(e,t)&&[i.mapsVariant,i.sujoVariant].includes(r(t))},c=function(e,t){return s(e,t)&&r(t)===i.mapsVariant},u=function(e,t){return s(e,t)&&r(t)===i.sujoVariant}},l2po:function(e,t,n){"use strict";var i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var a=i(n("q1tI")),o=n("iolA"),r=n("tHll"),s=n("6gWn");function l(){var e=(0,r.useUnit)(s.config).unit;return(null==e?void 0:e.canShow)&&(null==e?void 0:e.component)?a.default.createElement(e.component,{unit:e}):null}l.propTypes={},t.default=(0,o.withErrorBoundary)(l)},lGVM:function(e,t,n){"use strict";t.a="/vi-assets/static-assets/crossword-9f01570ba9e44c1cf6a957bdd41e9461.png"},lJVC:function(e,t,n){"use strict";var i=n("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.default=r;var a=i(n("q1tI")),o=(i(n("17x9")),i(n("wXC7")));function r(e){var t=e.className,n=e.fill;return a.default.createElement("svg",{className:t,viewBox:"0 0 15 18",fill:"none"},a.default.createElement("path",{d:"M2.0243 1.84397H12.7936L14.6964 0H0V3.80563L2.0243 1.84397Z",fill:n}),a.default.createElement("path",{d:"M12.976 2.23315H7.71278V15.1801L5.68848 17.1418H5.70872H9.61562V4.07711H15.0003V0.271484L12.976 2.23315Z",fill:n}),a.default.createElement("path",{d:"M2.18605 2.23633L0.283203 4.08029H5.10104L7.00388 2.23633H2.18605Z",fill:n}),a.default.createElement("path",{d:"M7.28761 2.5293L5.38477 4.37326V16.8495L7.28761 15.0055V2.5293Z",fill:n}))}r.displayName="TMagMobileLogo",r.defaultProps={className:void 0,fill:o.default.color.black}},lMaV:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){if(["ar-AR","az-AZ","fa-IR","he-IL","ku-TR","ps-AF","ur-PK","yi-DE"].includes(null==e?void 0:e.code))return!0;return!1}},lQyp:function(e,t,n){"use strict";var i=n("TqRt"),a=n("cDf5");Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.BaseEmailSignup=void 0;var o=i(n("q1tI")),r=i(n("Ys1a")),s=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=a(e)&&"function"!=typeof e)return{default:e};var n=l(t);if(n&&n.has(e))return n.get(e);var i={__proto__:null},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var r in e)if("default"!==r&&{}.hasOwnProperty.call(e,r)){var s=o?Object.getOwnPropertyDescriptor(e,r):null;s&&(s.get||s.set)?Object.defineProperty(i,r,s):i[r]=e[r]}return i.default=e,n&&n.set(e,i),i}(n("vqZQ"));function l(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(l=function(e){return e?n:t})(e)}var c=t.BaseEmailSignup=function(e){var t=e.newsletter,n=e.user,i=e.signupOptions,a=e.LoggedOut,r=e.LoggedInSignup,l=e.AlreadyReceiving,c=e.SignupSuccess,u=e.onSignupStart,d=e.onSignupComplete,p=e.onSignupFail,f=e.extraProps,m=void 0===f?{}:f,h=(0,s.default)({newsletter:t,user:n,signupOptions:i,onSignupStart:u,onSignupComplete:d,onSignupFail:p}),g=h.handleSignup,y=h.loading,v=h.error,b=h.viewState,_=h.loggedOut,w=h.alreadyReceiving;return b.type===s.View.SignupSuccess?o.default.createElement(c,{user:n,newsletter:t,signupResult:b.result,extraProps:m}):_?o.default.createElement(a,{user:n,newsletter:t,handleSignup:g,loading:y,error:v,extraProps:m}):w?o.default.createElement(l,{user:n,newsletter:t,extraProps:m}):o.default.createElement(r,{user:n,newsletter:t,handleSignup:g,loading:y,error:v,extraProps:m})};c.displayName="BaseEmailSignup";t.default=(0,r.default)(c)},lbJX:function(e,t,n){"use strict";var i=n("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=i(n("q1tI")),o=i(n("+nHC")),r=function(){var e=(0,o.default)();return a.default.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 40 36",id:"el_0kpS9qL_S"},a.default.createElement("title",null,"bars"),a.default.createElement("g",{id:"el_oZ84Hna1GC_65hRV2Qwn",className:e.fourthBarParentClass,"data-animator-group":"true","data-animator-type":"0"},a.default.createElement("g",{id:"el_oZ84Hna1GC_ILVvi2tqx",className:e.fourthBarClass,"data-animator-group":"true","data-animator-type":"2"},a.default.createElement("g",{id:"el_oZ84Hna1GC"},a.default.createElement("rect",{x:"34",width:"6",height:"36",id:"el_qw_T_tngXw"})))),a.default.createElement("g",{id:"el_mYVjkduhMU_p_9Pm85Ac",className:e.thirdBarParentClass,"data-animator-group":"true","data-animator-type":"0"},a.default.createElement("g",{id:"el_mYVjkduhMU_WxG3R40yd",className:e.thirdBarClass,"data-animator-group":"true","data-animator-type":"2"},a.default.createElement("g",{id:"el_mYVjkduhMU"},a.default.createElement("rect",{x:"22.67",width:"6",height:"36",id:"el_lf9GrROk6j"})))),a.default.createElement("g",{id:"el_o-EuxhgoAw_kYNRGDfcw",className:e.secondBarParentClass,"data-animator-group":"true","data-animator-type":"0"},a.default.createElement("g",{id:"el_o-EuxhgoAw_3c3bzSjOJ",className:e.secondBarClass,"data-animator-group":"true","data-animator-type":"2"},a.default.createElement("g",{id:"el_o-EuxhgoAw"},a.default.createElement("rect",{x:"11.33",width:"6",height:"36",id:"el_-iueO8klO0"})))),a.default.createElement("g",{id:"el_F7mSMPhqpC_y_fKcpSxn",className:e.firstBarParentClass,"data-animator-group":"true","data-animator-type":"0"},a.default.createElement("g",{id:"el_F7mSMPhqpC_R6bNB6_Ys",className:e.firstBarClass,"data-animator-group":"true","data-animator-type":"2"},a.default.createElement("g",{id:"el_F7mSMPhqpC"},a.default.createElement("rect",{width:"6",height:"36",id:"el_dS5TKNZZ5w"})))))};r.displayName="PlaybackIcon";t.default=r},ljg4:function(e,t,n){"use strict";var i=n("TqRt"),a=n("cDf5");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=i(n("o0o1")),r=i(n("yXPU")),s=i(n("J4zp")),l=f(n("q1tI")),c=(i(n("17x9")),i(n("d4gE"))),u=i(n("v2Y2")),d=f(n("zt4Q"));function p(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(p=function(e){return e?n:t})(e)}function f(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=a(e)&&"function"!=typeof e)return{default:e};var n=p(t);if(n&&n.has(e))return n.get(e);var i={__proto__:null},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var r in e)if("default"!==r&&{}.hasOwnProperty.call(e,r)){var s=o?Object.getOwnPropertyDescriptor(e,r):null;s&&(s.get||s.set)?Object.defineProperty(i,r,s):i[r]=e[r]}return i.default=e,n&&n.set(e,i),i}var m=function(e){var t=e.latitude,n=e.longitude,i=(0,l.useRef)(null),a=(0,l.useRef)(null),p=(0,l.useState)(!1),f=(0,s.default)(p,2),m=f[0],h=f[1];return(0,l.useEffect)((function(){return function(){var e=(0,r.default)(o.default.mark((function e(){var r;return o.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,(0,u.default)("https://api.mapbox.com/mapbox-gl-js/v2.14.1/mapbox-gl.css");case 3:c.default.accessToken="pk.eyJ1Ijoibnl0Z3JhcGhpY3MiLCJhIjoiY2swcXlvbmMwMDByMjNjdDh3c3Y1NnRrbSJ9.ObcEsDUY5vaOZEszZVFqDg",a.current=new c.default.Map({container:i.current,style:"mapbox://styles/nytgraphics/cjtrnt4vr27bh1go46ussni44",center:[n,t],zoom:13}),(new c.default.Marker).setLngLat([n,t]).addTo(a.current),e.next=15;break;case 8:e.prev=8,e.t0=e.catch(0),h(!0),(r=new Error(e.t0)).name="Error loading mapbox instance",console.error(r),"undefined"!=typeof window&&window.Sentry&&window.Sentry.captureException&&window.Sentry.captureException(r);case 15:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(){return e.apply(this,arguments)}}()(),function(){var e;null===(e=a.current)||void 0===e||e.remove()}}),[t,n]),m?null:l.default.createElement("div",{className:d.mapWrapperClass},l.default.createElement("div",{className:d.mapClass,ref:i}))};m.displayName="Map";t.default=m},lraK:function(e,t,n){"use strict";var i=n("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=i(n("q1tI")),o=n("3sMT"),r=n("Jqp9"),s=(0,r.css)("text-align:center;");t.default=function(e){var t=e.wordCount,n=e.center,i=e.mt,r=e.deviceType,l=e.className,c=e.useMobileBottomSpacing,u=void 0!==c&&c,d=t?Math.ceil(t/270):null;if(!d)return null;var p="".concat(d," min read");return p?a.default.createElement(o.Text,{fontSize:"smartphone"===r?11:10,fontFamily:"franklinAllCaps",color:"quaternary",className:n?s:l,mt:i||("smartphone"===r?1:.5),mb:u&&"smartphone"===r?2:0,"data-ttr":"1"},p):null}},lvXV:function(e,t,n){"use strict";var i=n("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=i(n("q1tI")),o=n("HzU6"),r=function(e){var t=e.width,n=void 0===t?"55":t,i=e.height,r=void 0===i?"55":i,s=e.fill,l=void 0===s?"#5A5A5A":s,c=e.strokeColor,u=void 0===c?"#DFDFDF":c;return a.default.createElement("svg",{"aria-hidden":"true",className:o.iconClass,id:"pauseIcon",width:n,height:r,viewBox:"0 0 ".concat(n," ").concat(r),fill:"none",xmlns:"http://www.w3.org/2000/svg"},a.default.createElement("path",{d:"M54.25 27.5C54.25 42.2736 42.2736 54.25 27.5 54.25C12.7264 54.25 0.75 42.2736 0.75 27.5C0.75 12.7264 12.7264 0.75 27.5 0.75C42.2736 0.75 54.25 12.7264 54.25 27.5Z",stroke:u,strokeWidth:"1.5"}),a.default.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M20 18H25V38H20V18Z",fill:l}),a.default.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M30 18H35V38H30V18Z",fill:l}))};r.displayName="PauseCircle";t.default=r},m9ia:function(e,t,n){"use strict";var i=this&&this.__createBinding||(Object.create?function(e,t,n,i){void 0===i&&(i=n);var a=Object.getOwnPropertyDescriptor(t,n);a&&!("get"in a?!t.__esModule:a.writable||a.configurable)||(a={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,i,a)}:function(e,t,n,i){void 0===i&&(i=n),e[i]=t[n]}),a=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&i(t,e,n);return a(t,e),t},r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var s=o(n("q1tI")),l=r(n("17x9")),c=n("Jqp9"),u=r(n("6bIn")),d=o(n("b2Qg")),p=r(n("3Rcv"));function f(e){var t=e.className,n=e.contentID,i=e.dockID,a=e.isDockDismissible,o=e.isDockExpandable,r=e.dockExpanded,l=e.header,f=e.onDockHeadingClick,m=e.onDockCTAClick,h=e.headerCollapsedCTA,g=e.headerExpandedCTA,y=e.onResize,v=e.overrideHeaderStyles,b=e.overrideHeaderWidth,_=e.hideVerticleRuleInHeader,w=e.headingClassStyle,x=e.headingInfoContainerStyle,k=e.headingMessageClassStyle,O=e.ctaIconWrapperStyle,T=e.ctaContainerStyle,C=e.ctaActionTextContainerStyle,E=e.dividerStyle,S=e.ctaActionTextClassStyle,P=e.headerWrapperStyle,I=e.ctaButtonStyles,M=s.default.useRef(null),A="".concat(i,"-dock-heading-selector");return(0,u.default)((function(){M.current&&y&&y(M.current.clientHeight)}),300),(0,s.useEffect)((function(){M.current&&y&&y(M.current.clientHeight)}),[M,y]),s.default.createElement("div",{ref:M,className:(0,c.cx)(v?"":d.dockHeadingContainer,t),onClick:f,onKeyUp:f,role:"button",tabIndex:0,"data-testid":A},s.default.createElement("div",{className:w||(0,c.cx)(b?d.headingWidthClass:d.headingClass,v?"":d.headingPaddingClass)},v?s.default.createElement("div",{className:P||""}," ",l):s.default.createElement("div",{className:x||d.infoContainer},s.default.createElement("div",{className:(0,c.cx)(d.messageContainer)},s.default.createElement("div",{className:k||d.messageClass},l))),s.default.createElement(p.default,{contentID:n,dockExpanded:r,dockID:i,isDockDismissible:a,isDockExpandable:o,headerExpandedCTA:g,headerCollapsedCTA:h,onDockCTAClick:m,onDockHeadingClick:f,hideVerticleRuleInHeader:_,ctaIconWrapperStyle:O,ctaContainerStyle:T,ctaActionTextContainerStyle:C,dividerStyle:E,ctaActionTextClassStyle:S,ctaButtonStyles:I})))}f.propTypes={className:l.default.string,contentID:l.default.string,dockID:l.default.string,dockExpanded:l.default.bool,header:l.default.node,headerCollapsedCTA:l.default.string,isDockDismissible:l.default.bool,isDockExpandable:l.default.bool,headerExpandedCTA:l.default.string,onDockCTAClick:l.default.func,onDockHeadingClick:l.default.func,onResize:l.default.func,overrideHeaderStyles:l.default.bool,overrideHeaderWidth:l.default.bool,headingClassStyle:l.default.string,headingInfoContainerStyle:l.default.string,headingMessageClassStyle:l.default.string,ctaIconWrapperStyle:l.default.string,ctaContainerStyle:l.default.string,ctaActionTextContainerStyle:l.default.string,dividerStyle:l.default.string,ctaActionTextClassStyle:l.default.string,headerWrapperStyle:l.default.string},f.defaultProps={className:"",contentID:"",dockID:"standard",dockExpanded:!1,header:null,headerCollapsedCTA:null,headerExpandedCTA:null,isDockDismissible:void 0,isDockExpandable:!0,onDockHeadingClick:function(){},onDockCTAClick:function(){},onResize:function(){},overrideHeaderStyles:!1,overrideHeaderWidth:!1},t.default=f},mAfr:function(e,t,n){"use strict";var i=n("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.thumbnailClass=t.headingClass=t.figureMediaClass=t.figureClass=t.figcaptionClass=t.captionSpanClass=t.audioBlockPromoClass=void 0;var a=n("Jqp9"),o=n("3sMT"),r=i(n("wXC7"));t.figureClass=(0,a.css)("border-bottom:1px solid ",o.color.stroke.quaternary,";border-top:1px solid ",o.color.stroke.quaternary,";margin:",r.default.breakpoint.mobileBlockMargins,";max-width:",r.default.breakpoint.textBodyWidth,"px;padding:20px 0px 10px 0;width:",r.default.breakpoint.mobileFullWidth,";",r.default.breakpoint.medium,"{margin:",r.default.breakpoint.desktopMediaMargins,";}",r.default.printHide,";"),t.figcaptionClass=(0,a.css)("font-family:",r.default.font.franklinBase,";margin:0 auto;"),t.headingClass=(0,a.css)("color:",o.color.content.primary,";font-size:",r.default.font.size(15),";font-weight:",r.default.font.weight.bold,";line-height:",r.default.font.size(20),";"),t.captionSpanClass=(0,a.css)("color:",o.color.content.primary,";display:block;font-size:",r.default.font.size(14),";font-weight:",r.default.font.weight.medium,";line-height:",r.default.font.size(20),";margin-top:3px;margin-bottom:5px;",r.default.breakpoint.medium,"{margin-bottom:3px;}"),t.thumbnailClass=(0,a.css)("min-height:",r.default.font.size(54),";"),t.figureMediaClass=(0,a.css)("float:right;height:75px;margin:0 0 16px 32px;width:75px;"),t.audioBlockPromoClass=(0,a.css)("margin-top:1.75rem;",r.default.breakpoint.medium,"{margin-top:2rem;}")},mAwq:function(e,t,n){"use strict";var i=n("gcR/"),a=n.n(i),o=(n("q1tI"),n("NQ6n")),r=function(e){var t=e.className,n=e.share,i=e.isShareMenuOpen,r=e.hideShareMenu,s=n.url,l=n.uri,c=n.label,u=n.name,d={url:s,headline:{default:n.headline||""},uri:l,label:c,name:u};return a()("div",{style:{height:0}},void 0,a()(o.b,{share:d,className:t,setAriaLabel:!0,trackingRegion:"mid-video",forceOpen:i,handleClose:r,setUpModalStyles:function(e){e.content.height="unset",e.content.width="100%",e.content.top="unset",e.content.bottom="0px",e.content.left="0px",e.content.outline="none"},hasGiftArticleButtonSibling:!1,pageType:n.pageType||"article",buttonContent:function(){return null},stroke:void 0,fill:void 0,loadingButtonContent:void 0,isGiftArticle:void 0,handleOpen:void 0,mediaTitle:void 0,modalContent:void 0,ariaDescribedBy:void 0,suppressForcedFocus:void 0,toggleGiftArticleMenu:void 0,forceCloseModal:void 0,giftLinksRemainingCount:void 0,forcePopOver:void 0,menuDefaultHeight:void 0,dataTestid:void 0,buttonHoverClass:void 0,modalArrowPosition:void 0,forceArrowPosition:void 0,isCarouselButton:void 0}))};r.displayName="VideoShareButton",t.a=r},mFeT:function(e,t,n){"use strict";var i=n("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=i(n("cDf5")),o=i(n("q1tI")),r=n("boCj"),s=n("f9QA"),l=n("s5tu");function c(e,t,n,i){var c,u,d=e.url,p=(0,l.isInternalLink)(d);if(p||(c="noopener noreferrer",u="_blank"),p&&i.internalLinkTrackingParams&&"object"===(0,a.default)(i.internalLinkTrackingParams)){var f=-1===d.indexOf("?")?"?":"&";d="".concat(d).concat(f).concat((0,l.objectToQueryParams)(i.internalLinkTrackingParams))}return o.default.createElement(r.InView,{as:"a",threshold:1,onChange:function(t){t&&i.trackEvent&&i.trackEvent(e.url)},triggerOnce:!0,className:s.linkClass,href:d,key:n,rel:c,target:u,onClick:function(t){var n;return null==i||null===(n=i.trackLinkInteraction)||void 0===n?void 0:n.call(i,t,null==e?void 0:e.url,{item:{uri:e.uri,url:e.url},eventData:{type:"url-click",trigger:"item",url:e.url}})}},t)}c.displayName="StorylineLinkFormat";t.default=c},mGV9:function(e,t,n){"use strict";var i=n("VkAN"),a=n.n(i),o=n("lSNA"),r=n.n(o),s=n("gcR/"),l=n.n(s),c=n("q1tI"),u=n.n(c),d=n("eFc+"),p=n.n(d),f=n("Jqp9"),m=n("i+0r"),h=n.n(m),g=n("XlcC"),y=n.n(g),v=n("jOYC"),b=n("HTd6"),_=n("w4n4"),w=n("wXC7"),x=n.n(w),k=Object(f.css)("width:auto;margin-left:auto;margin-right:auto;",x.a.breakpoint.mediumLarge,"{width:auto;}"),O=Object(f.css)(v.b.layout.news,";display:inline-block;color:",x.a.color.developingColor,";&::after{content:'  ';white-space:pre;}"),T=Object(f.css)("color:",x.a.color.breakingColor,";"),C=Object(f.css)(x.a.breakpoint.small,"{",v.b.layout.news,";}margin-left:auto !important;margin-right:auto !important;"),E=function(e){var t=e.newsStatus,n=e.adjacentToLabel;if(!function(e){return"string"==typeof e&&["BREAKING","DEVELOPING"].includes(e.toUpperCase())}(t))return null;var i=l()("span",{className:Object(f.cx)(O,r()(r()({},k,n),T,"string"==typeof t&&"breaking"===t.toLowerCase()))},void 0,t);return n?i:l()(h.a,{className:C},void 0,i)};E.defaultProps={newsStatus:"DEFAULT",adjacentToLabel:!1};var S,P,I=E,M=Object(f.css)("text-transform:none;"),A=function(e){var t,n,i=e.data,a=e.className,o=e.signalOpinion,s=e.newsStatus,c=e.timesExclusive,d=e.isVisualStacks,p=e.labelOverride,m=Object(f.useTheme)(),g=i&&i.content?i.content.map(y.a):"",b=i&&i.textAlign?i.textAlign.toLowerCase():null,w="rightToLeft"===(null==m?void 0:m.languageDirection)?_.b:null,x=null==i||null===(t=i.content)||void 0===t||null===(n=t[0])||void 0===n?void 0:n.text,k=o&&Boolean(x),O=l()("span",{className:a},void 0,x),T=o?S||(S=l()("a",{href:"/section/opinion"},void 0,"Opinion")):g;return l()(h.a,{className:Object(f.cx)(_.a,v.b.layout.textAlign[b]||v.b.layout.textAlign.left,a,w,r()({},M,d||!!p))},void 0,null!=p?p:u.a.createElement(u.a.Fragment,null,null!=c?c:null,u.a.createElement(u.a.Fragment,null,l()(I,{newsStatus:s,adjacentToLabel:!0}),T,k&&O)))};A.displayName="LabelBlock",A.defaultProps={data:null,className:void 0,signalOpinion:void 0,newsStatus:void 0,timesExclusive:null,isVisualStacks:!1,labelOverride:void 0},A.fragments={data:p()(P||(P=a()(["\n    fragment LabelBlock_data on LabelBlock {\n      textAlign\n      content {\n        ...TextInline_content\n      }\n    }\n    ","\n  "])),b.a.fragments.content)};t.a=A},mH4u:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getTimestampData=t.getTimeFormat=t.getElapsedMinutes=t.getBylineData=void 0;var i=n("6qvD"),a=n("t7vg"),o=t.getElapsedMinutes=function(e){var t=((new Date).getTime()-e.getTime())/1e3;return Math.floor(t/60)},r=(t.getTimeFormat=function(e){var t="abbreviated-date",n=!1;if(e){var i=o(new Date(e));i<360&&(t="elapsed-with-label",n=!0),i<1&&(t="elapsed")}return{timestampFormatter:t,useElapsedTime:n}},t.getTimestampData=function(e,t){return{updatedText:e,time:t}});t.getBylineData=function(e){var t=e.byline,n=e.updatedText,o=e.firstPublished,s=e.isOak,l=e.section,c=e.includeTimestamp;if(!t)return null;var u=t.bylines,d=t.hideHeadshots,p=t.role,f=s||"opinion"===l,m=(u||[]).map(i.fetchHeadshots),h=(0,i.getHeadshotCount)(m),g={headshots:(0,i.showHeadshotsTest)({hideHeadshots:d,headshotCandidate:f,bylines:u,section:l,headshotCount:h})?m:null,bylines:u,role:(null==p?void 0:p.length)>0?(0,a.getFormattedText)(p):null};return c&&(g.timestamp=r(n,o)),g}},mbYo:function(e,t,n){"use strict";n.d(t,"c",(function(){return i})),n.d(t,"e",(function(){return a})),n.d(t,"d",(function(){return o})),n.d(t,"a",(function(){return r})),n.d(t,"b",(function(){return s})),n.d(t,"h",(function(){return l})),n.d(t,"g",(function(){return c})),n.d(t,"f",(function(){return u}));var i="SJ_disrupter_V2_increased_cadence",a="1_medium_intensity",o="2_high_intensity",r="SJ_RegiAppDownloadDisrupter_0424",s="1_disrupter",l="SUBX_regi_alloc_holdout_2024H1",c="0_holdout",u="1_best_experience"},msCe:function(e,t,n){"use strict";var i=n("gcR/"),a=n.n(i),o=n("lSNA"),r=n.n(o),s=(n("q1tI"),n("Jqp9")),l=n("X6oL"),c=n("PgO9"),u=n("HUmG"),d=n("kPjT"),p=n("wXC7"),f=n.n(p),m=n("3sMT"),h=Object(s.css)("h3{color:",m.color.content.primary,";font-family:",f.a.font.karnakBase,";font-weight:",f.a.font.weight.book,";font-size:",f.a.font.size(20),";line-height:",f.a.font.size(24),";margin:-0.3125rem 0 0.4375rem 0;}p{color:",m.color.content.secondary,";max-width:11rem;}a:hover h3,a:hover p{color:",m.color.content.tertiary,";}"),g=Object(s.css)("margin-left:0;margin-top:1rem;"),y=function(e){var t=e.columnId,n=e.description,i=e.footer,o=e.handleNestedLinkClick,r=e.link,s=e.parentName,l=e.title;return a()("div",{id:t,className:h},void 0,a()("a",{href:r,onClick:function(e){return o(e,r,s,l,l)}},void 0,a()("h3",{},void 0,l),a()("p",{},void 0,n)),a()(d.a,{className:g,footer:i,handleNestedLinkClick:o,heading:s,parentName:s}))};y.displayName="BrandColumn",y.defaultProps={handleNestedLinkClick:function(){},footer:{}};var v=y,b=n("pYsa"),_=n("cMFZ"),w=n("coi8"),x=n("Gfev");function k(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function O(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?k(Object(n),!0).forEach((function(t){r()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):k(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var T="https://www.nytimes.com/subscription/all-access",C=function(e){var t=e.className,n=e.dropdownData,i=e.isFloatingNav,o=e.isFullWidth,d=e.item,p=e.setVisibleNestedNav,f=e.visibleNestedNav,m=e.regionForTracking,h=e.pagetype,g=Object(c.a)().user,y=Object(u.c)(g),k=Object(l.useTracking)({eventData:{pagetype:h},module:{context:"standard",region:"masthead"}}),C=function(e){return e.toLowerCase().split(" ").join("-")},E={event:"moduleInteraction",eventData:{trigger:"module",type:"click"},module:{name:"nested-navigation",label:"masthead-navigation",region:m}},S=function(e){window.location.assign(e)},P=function(e,t,n,i,a){e.preventDefault();var o=E;o.module.element={name:C("go-to-".concat(n,"-").concat(i,"-").concat(a)),label:C("clicked-".concat(n,"-").concat(i,"-").concat(a)),url:t},k.trackEvent(O(O({},o),{},{eventCallback:S(t)}))},I=function(e,t,n){var i=t?"".concat(C(t),"-column"):n;return"".concat(e,"-").concat(i)};return a()("div",{"aria-hidden":f!==d.name,"aria-label":"".concat(d.name," submenu"),className:Object(s.cx)(x.r,r()(r()(r()({},x.t,f===d.name),x.n,i),x.a,o),t),"data-testid":"nav-dropdown-".concat(d.name),onKeyDown:function(e){return function(e){"Escape"===e.key&&(e.currentTarget.parentElement.getElementsByTagName("a")[0].focus(),p(null))}(e)}},void 0,a()("div",{className:Object(s.cx)(x.o,r()({},x.a,!o))},void 0,n.map((function(e,t){var n;return a()("div",{className:Object(s.cx)(x.m,(n={},r()(r()(r()(r()(r()(r()(r()(r()(r()(r()(n,x.b,0===e.columnWidth),x.d,1===e.columnWidth),x.e,2===e.columnWidth),x.f,3===e.columnWidth),x.g,4===e.columnWidth),x.h,5===e.columnWidth),x.i,6===e.columnWidth),x.j,7===e.columnWidth),x.k,8===e.columnWidth),x.l,9===e.columnWidth),r()(n,x.c,10===e.columnWidth)))},"".concat(d.name," ").concat(e.heading||"column ".concat(t)).concat(e.hideHeading?" hide heading":""),"brand"===e.type&&a()(v,{title:e.heading,description:e.description,link:e.link,columnId:I(d.name,e.name,"brand-column"),parentName:d.name,handleNestedLinkClick:P,footer:e.footer}),"links"===e.type&&a()(_.a,{footer:e.footer,heading:e.heading,hideHeading:e.hideHeading,innerColumnCount:e.innerGridColumnCount||1,columns:e.columns||[],links:e.links||[],columnId:I(d.name,e.name,"links-column"),parentName:d.name,handleNestedLinkClick:P,style:e.style}),"linksWithIcons"===e.type&&a()(w.a,{heading:e.heading,hideHeading:e.hideHeading,links:e.links||[],columnId:I(d.name,e.name,"links-icons-column"),parentName:d.name,handleNestedLinkClick:P}),"thumbnailContent"===e.type&&a()(b.a,{heading:e.heading,hideHeading:e.hideHeading,footer:e.footer,items:e.items,columnId:I(d.name,e.name,"thumbnail-column"),parentName:d.name,handleNestedLinkClick:P}))}))),"standalone"===d.productType&&!y&&a()("div",{className:x.s},void 0,d.name," is included in an All Access subscription."," ",a()("a",{href:T,onClick:function(e){return function(e,t,n){e.preventDefault();var i=E;i.module.element={name:C("go-to-".concat(n,"-learn-more")),label:C("clicked-".concat(n,"-learn-more")),url:t},k.trackEvent(O(O({},i),{},{eventCallback:S(t)}))}(e,T,d.name)}},void 0,"Learn more.")),"standalone"===d.productType&&y&&a()("div",{className:x.s},void 0,d.name," is included in your All Access subscription."))};C.displayName="DropDownPanel",C.defaultProps={className:void 0,isFloatingNav:!1,visibleNestedNav:null,regionForTracking:"masthead",pagetype:"home",isFullWidth:!1};t.a=C},"n+OA":function(e,t,n){"use strict";var i=n("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.topRuleClass=t.titleClass=t.sectionRuleClass=t.paragraphClass=t.listItemClass=t.leadInClass=t.guideContainerClass=t.electionLogoClass=void 0;var a=n("Jqp9"),o=i(n("3Rk2")),r=i(n("wXC7")),s=n("3sMT"),l=(0,o.default)([r.default.breakpoint.medium]);t.guideContainerClass=(0,a.css)("font-family:",r.default.font.franklinBase,";color:",s.color.content.secondary,";background-color:",s.color.background.primary,";max-width:600px;width:",r.default.breakpoint.mobileFullWidth,";margin:0 auto 1.5rem;font-size:",r.default.font.size(17),";line-height:",r.default.font.size(24),";",r.default.printHide," strong{font-weight:",r.default.font.weight.bold,";}em{font-style:italic;}a{color:",s.color.signal.editorial,";text-decoration:underline;text-decoration-thickness:1px;text-underline-offset:1px;&:hover{text-decoration:none;}}"),t.topRuleClass=(0,a.css)("border-top:2px solid ",s.color.stroke.primary,";margin-top:1.25rem;margin-bottom:1.25rem;"),t.sectionRuleClass=(0,a.css)("margin-top:1rem;margin-bottom:1rem;"),t.listItemClass=(0,a.css)("list-style:disc;padding-left:0;margin-bottom:0;margin-left:12px;"),t.titleClass=(0,a.css)("font-family:",r.default.font.serifMedium,";font-weight:",r.default.font.weight.bold,";color:",s.color.content.primary,";margin:0;",l({fontSize:[r.default.font.size(24),r.default.font.size(28)],lineHeight:[r.default.font.size(28),r.default.font.size(32)]})),t.leadInClass=(0,a.css)("font-size:inherit;font-weight:",r.default.font.weight.medium,";padding-top:",r.default.font.size(12),";"),t.paragraphClass=(0,a.css)("font-family:",r.default.font.franklinBase,";font-weight:",r.default.font.weight.medium,";",l({fontSize:[r.default.font.size(17),r.default.font.size(17)],lineHeight:[r.default.font.size(24),r.default.font.size(24)]})),t.electionLogoClass=(0,a.css)("display:block;margin-bottom:10px;")},"nGF/":function(e,t,n){"use strict";var i=n("TqRt"),a=n("cDf5");Object.defineProperty(t,"__esModule",{value:!0}),t.default=p,t.useAutoPlay=d;var o=i(n("J4zp")),r=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=a(e)&&"function"!=typeof e)return{default:e};var n=u(t);if(n&&n.has(e))return n.get(e);var i={__proto__:null},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var r in e)if("default"!==r&&{}.hasOwnProperty.call(e,r)){var s=o?Object.getOwnPropertyDescriptor(e,r):null;s&&(s.get||s.set)?Object.defineProperty(i,r,s):i[r]=e[r]}return i.default=e,n&&n.set(e,i),i}(n("q1tI")),s=n("Jqp9"),l=i(n("x9rc")),c=n("vOGy");function u(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(u=function(e){return e?n:t})(e)}function d(){var e=(0,r.useState)(!0),t=(0,o.default)(e,2),n=t[0],i=t[1],a=function(e){var t=e.success,n=e.values;t&&!1===(null==n?void 0:n.autoPlay)&&i(!1)};return(0,r.useEffect)((function(){var e,t;null!==(e=window)&&void 0!==e&&null!==(t=e.NativeBridge)&&void 0!==t&&t.getAutoPlay?window.NativeBridge.getAutoPlay().then(a):function(){try{i(!window.matchMedia("(prefers-reduced-motion)").matches)}catch(e){i(!1)}}()}),[]),n}function p(e){var t=(0,r.useState)(!1),n=(0,o.default)(t,2),i=n[0],a=n[1],u=(0,r.useState)(!1),p=(0,o.default)(u,2),f=p[0],m=p[1],h=(0,r.useState)(!1),g=(0,o.default)(h,2),y=g[0],v=g[1],b=(0,r.useRef)(null),_=d(),w=e.onError,x=e.src,k=e.imgFallback,O=e.onLoad,T=(0,r.useCallback)((function(){a(!0)}),[]),C=(0,r.useCallback)((function(){x||k||T()}),[x,k,T]),E=(0,r.useCallback)((function(){null==O||O()}),[O]),S=(0,r.useCallback)((function(){null==w||w()}),[w]),P=(0,r.useCallback)((function(){var t,n;null!=b&&null!==(t=b.current)&&void 0!==t&&t.complete&&((null==b?void 0:b.current.naturalHeight)>0?E():S());var i=null===(n=e.videoRef)||void 0===n?void 0:n.current;i&&(i.onplaying=function(){return v(!0)},i.onpause=function(){return v(!1)})}),[e.videoRef,b,E,S]),I=(0,r.useCallback)((function(){var t;e.useVideoReducedMotionFallback?(null!==(t=e.videoRef)&&void 0!==t&&t.current&&(e.videoRef.current.pause(),e.videoRef.current.currentTime=0),m(!0)):a(!0)}),[e.useVideoReducedMotionFallback,e.videoRef]),M=(0,r.useCallback)((function(){var t=function(){var t,n,i,a;_?null===(t=e.videoRef)||void 0===t||null===(n=t.current)||void 0===n||n.play():null===(i=e.videoRef)||void 0===i||null===(a=i.current)||void 0===a||a.pause()};"complete"===document.readyState?t():window.addEventListener("load",t),E()}),[_,e.videoRef,E]),A=(0,r.useCallback)((function(){_?"undefined"!=typeof window&&M():I(),P()}),[_,I,M,P]);(0,r.useEffect)((function(){var t,n,i,a;e.playVideo&&!f&&(null===(t=e.videoRef)||void 0===t||null===(n=t.current)||void 0===n||n.play());e.pauseVideo&&y&&(null===(i=e.videoRef)||void 0===i||null===(a=i.current)||void 0===a||a.pause())}),[e.playVideo,e.pauseVideo,f,y,e.videoRef]),(0,r.useEffect)((function(){setTimeout(C,500),A()}),[C,A,_]);var j=!i&&e.imgLoading,N=r.default.createElement(r.default.Fragment,null,r.default.createElement("img",{src:e.imgFallback||e.imgLoading,onLoad:E,onError:S,className:c.mediaClass,alt:e.imgFallbackAltText,ref:b,"data-testid":"cinemagraph_image"}),_&&!i&&e.src&&r.default.createElement("video",{"data-testid":"cinemagraph","data-play":e.playVideo,poster:j?e.imgLoading:void 0,src:e.src,ref:e.videoRef,className:(0,s.cx)("cinemagraph_video",c.mediaClass),muted:!0,loop:!0,autoPlay:_,controls:f,playsInline:!0,onPlay:E,onError:T,preload:_?void 0:"metadata"}),e.textOverlay);return e.renderAspectRatioPlaceholder?r.default.createElement(l.default,{className:(0,s.cx)(e.className,e.containerClass),ratio:e.ratio,style:{overflow:"hidden"}},N):N}p.defaultProps={src:void 0,onLoad:function(){},onError:function(){},ratio:"16:9",imgFallback:void 0,imgLoading:void 0,className:void 0,containerClass:"",textOverlay:void 0,playVideo:void 0,pauseVideo:void 0,useVideoReducedMotionFallback:!0,videoRef:void 0,renderAspectRatioPlaceholder:!0}},"nM+O":function(e,t,n){"use strict";t.a="/vi-assets/static-assets/icon-athletic-fc_144x144-a673fb497a7a58fd0a80b3d007b73b2f.webp"},nosR:function(e,t,n){"use strict";var i=n("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.commonPrioritizedVideoRenditions=void 0,t.computeAspectRatioFromRendition=y,t.findVideoRenditionOfBestFitUrl=t.findVideoRenditionOfBestFit=t.findRenditionsByRatio=t.findImageRenditionOfBestFitUrl=t.findImageRenditionOfBestFit=t.findCropsByRatio=t.findCommonPrioritizedVideoRendition=t.filterVideoRenditionsByPreferredRatio=void 0,t.parseRatio=g,t.sortByQuality=t.preferredMobileRatios=t.preferredDesktopRatios=void 0,t.sortRenditionsByTargetRatioAndFit=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1080;if(!e)return[];var i=e.filter(Boolean);if(i.length<1)return[];if(!i.some((function(e){return!(null==e||!e.aspectRatio)||(null==e?void 0:e.height)&&(null==e?void 0:e.width)})))return i;var o=i.filter((function(e){return"thumbs"!==e.type})),r=(0,a.default)(new Set(o.map(y)));r.sort((function(e,n){return Math.abs(t-e)-Math.abs(t-n)}));var s=r[0],l=o.filter((function(e){return Math.abs(y(e)-s)<.01})),c=o.filter((function(e){return Math.abs(y(e)-s)>.01}));return[].concat((0,a.default)(v(l,n)),(0,a.default)(v(c,n)))};var a=i(n("RIqP")),o=n("vFws"),r=function(e){return/_mobile/.test(e.type)},s=function(e){return!/_mobile/.test(e.type)},l=function(e){return/\.mp4$/.test(e.url)};function c(e,t){var n=e.filter(l);return function(e,t){var n;(e=e.filter((function(e){return"number"==typeof e.width}))).sort((function(e,t){return e.width-t.width}));for(var i=0;i<e.length&&(n=e[i],!(e[i].width>t));i+=1);return n}(n.length>0?n:e,t)}var u=t.findVideoRenditionOfBestFit=function(e,t){var n,i=arguments.length>2&&void 0!==arguments[2]&&arguments[2];try{if(e=(0,a.default)(e),i){var o=e.filter(r);n=c(o,t)}else{var l=e.filter(s);n=c(l,t)}n||(n=c(e,t))}catch(e){return null}return n},d=(t.findImageRenditionOfBestFit=u,t.findVideoRenditionOfBestFitUrl=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],i=u(e,t,n);return i?i.url:null}),p=(t.findImageRenditionOfBestFitUrl=d,t.findCropsByRatio=function(e,t){if(null!=e&&e.find){var n=e.find((function(e){return e.name===o.RATIOS[t]}));if(n)return n;var i=e.find((function(e){return"MASTER"===e.name}));if(i)return i}return null}),f=(t.findRenditionsByRatio=function(e,t){var n=p(e,t);return null!=n&&n.renditions?n.renditions:null},t.commonPrioritizedVideoRenditions={smartphone:["video_1080p_mp4_mobile","video_720p_mp4_mobile","video_480p_mp4_mobile","video_360p_mp4_mobile","video_240p_mp4_mobile","video_1080p_mp4","video_720p_mp4","video_480p_mp4","video_360p_mp4","video_240p_mp4"],tablet:["video_1080p_mp4","video_720p_mp4","video_480p_mp4","video_360p_mp4","video_240p_mp4"],desktop:["video_1080p_mp4","video_720p_mp4","video_480p_mp4","video_360p_mp4","video_240p_mp4"]}),m=(t.findCommonPrioritizedVideoRendition=function(e,t){for(var n,i=0;i<f[t].length&&!n;i+=1)for(var a=0;a<e.length&&!n;a+=1){var o=f[t][i],r=e[a];o===r.type&&(n=r)}return n?[n]:e},t.preferredDesktopRatios=["16:9","3:2"]),h=t.preferredMobileRatios=["1:1","2:3","9:16","4:5","16:9","3:2"];t.filterVideoRenditionsByPreferredRatio=function(e,t){var n=m;"smartphone"===t&&(n=h);var i=n.reduce((function(t,n){return 0===t.length?t.concat(e.filter((function(e){return e.aspectRatio===n}))):t}),[]);return i.length>0?i:e};function g(e){if(!e)return 0;var t=e.split(":");return parseInt(t[0],10)/parseInt(t[1],10)}function y(e){return e.aspectRatio?g(e.aspectRatio):parseInt(e.width,10)/parseInt(e.height,10)}var v=t.sortByQuality=function(e,t){return(0,a.default)(e).sort((function(e,n){return Math.abs(t-(e.height&&parseInt(e.height,10)))-Math.abs(t-(n.height&&parseInt(n.height,10)))}))}},nqWJ:function(e,t,n){"use strict";var i=n("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.titleClass=t.readerContextClass=t.labelClass=t.containerClass=t.bodyClass=t.arrowClass=void 0;var a=n("Jqp9"),o=i(n("wXC7")),r=n("3sMT");t.readerContextClass=(0,a.css)("background-color:",r.color.background.secondary,";margin-bottom:1rem;transition:opacity 0.2s ease-out;.hide{opacity:0;display:none;}.show{opacity:1;display:block;}"),t.labelClass=(0,a.css)("font-family:",o.default.font.franklinBase,";font-weight:",o.default.font.weight.medium,";font-size:0.75rem;line-height:1;margin-bottom:5px;cursor:pointer;"),t.titleClass=(0,a.css)("font-family:",o.default.font.serifMedium,";font-weight:",o.default.font.weight.medium,";font-size:1.3rem;line-height:1;cursor:pointer;margin:0 auto;transition:text-decoration 0.2s ease-out;"),t.bodyClass=(0,a.css)("transition:opacity 1s ease-out;padding:0 1.5rem 1.5rem;font-size:15px;margin-bottom:0;a{text-decoration:underline;color:",r.color.signal.editorial,";&:hover{text-decoration:none;}}",o.default.breakpoint.small,"{line-height:1.47rem;}"),t.containerClass=(0,a.css)("display:flex;justify-content:space-between;padding:1.5rem;"),t.arrowClass=(0,a.css)("display:flex;align-items:center;")},nxD0:function(e,t,n){"use strict";var i=n("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.playIconDisplayStyles=t.StyledAudioRelatedLink=t.AudioRelatedLinkTextWrapper=t.AudioRelatedLinkSummary=t.AudioRelatedLinkPlayIconWrapper=t.AudioRelatedLinkMediaWrapper=t.AudioRelatedLinkLabel=t.AudioRelatedLinkImage=t.AudioRelatedLinkHeadline=t.AudioRelatedLinkDuration=t.AudioRelatedLinkCaption=t.AudioRelatedLinkAudioTag=t.AudioRelatedLinkAudioSignalWrapper=void 0;var a=n("Jqp9"),o=i(n("wXC7")),r=i(n("WThh")),s=n("6l8D"),l=n("3sMT"),c=(0,r.default)(["medium","small","mediumLarge"]),u=(0,a.themeFn)("displayStyle",{standard:function(e){return(0,a.css)("margin-right:10px;width:75px;min-width:75px;",e.theme.breakpointMap.medium,"{margin-right:15px;width:135px;min-width:135px;}")},expanded:function(e){return(0,a.css)("margin-bottom:15px;min-width:285px;",e.theme.breakpointMap.small,"{max-width:400px;margin-left:auto;margin-right:auto;}",e.theme.breakpointMap.medium,"{max-width:285px;margin-bottom:0;margin-right:15px;}")},compact:(0,a.css)("display:none;")}),d=(t.AudioRelatedLinkMediaWrapper=(0,a.styled)("div",{target:"eilw6ym0"})(u,";"),(0,a.themeFn)("displayStyle",{standard:(0,a.css)("min-width:75px;"),expanded:(0,a.css)("min-width:285px;")})),p=(t.AudioRelatedLinkImage=(0,a.styled)("img",{target:"eilw6ym1"})("width:100%;",d,";"),t.AudioRelatedLinkCaption=(0,a.styled)("p",{target:"eilw6ym2"})("display:block;color:",l.color.content.quaternary,";min-height:",o.default.font.size(12),";font-size:",o.default.font.size(10),";line-height:",o.default.font.size(12),";letter-spacing:0.2px;text-align:right;"),(0,a.themeFn)("displayStyle",{compact:(0,a.css)("color:",l.color.signal.editorial,";text-decoration:underline;margin-bottom:7px;&:hover,&:focus{text-decoration:none;}"),standard:(0,a.css)("color:",l.color.content.primary,";"),expanded:function(e){return(0,a.css)("color:",l.color.content.primary,";",e.theme.breakpointMap.medium,"{margin-bottom:7px;}")}})),f=(0,a.themeFn)("displayStyle",{compact:function(e){return(0,a.css)("font-family:",o.default.font.serifBase,";font-weight:",o.default.font.weight.medium,";",c(e,{fontSize:[16,17],lineHeight:[22,23]}),";")},standard:function(e){return(0,a.css)("font-family:",o.default.font.serifMedium,";font-weight:",o.default.font.weight.medium,";",c(e,{fontSize:[16,19],lineHeight:[19,23]}),";")},expanded:function(e){return(0,a.css)("font-family:",o.default.font.serifMedium,";font-weight:",o.default.font.weight.bold,";",c(e,{fontSize:[18,19],lineHeight:[22,23]}),";")}}),m=t.AudioRelatedLinkHeadline=(0,a.styled)("div",{target:"eilw6ym3"})("display:inline;",p,";",f,";"),h=(0,a.themeFn)("displayStyle",{expanded:function(e){return(0,a.css)(e.theme.breakpointMap.medium,"{margin-bottom:2px;}")}}),g=(t.AudioRelatedLinkSummary=(0,a.styled)("div",{target:"eilw6ym4"})("color:",l.color.content.tertiary,";font-weight:",o.default.font.weight.book,";font-family:",o.default.font.serifBase,";font-size:",o.default.font.size(15),";line-height:",o.default.font.size(20),";margin-top:0.4rem;",h,";"),(0,a.css)("flex-grow:1;")),y=(t.AudioRelatedLinkTextWrapper=(0,a.styled)("div",{target:"eilw6ym5"})(g),function(e){return(0,a.css)("color:",l.color.content.primary,";font-family:",o.default.font.franklinBase,";font-weight:",o.default.font.weight.mediumBold,";letter-spacing:0.1em;text-transform:uppercase;",c(e,{fontSize:[11,12],lineHeight:[16,18]}))}),v=(t.AudioRelatedLinkLabel=(0,a.styled)("div",{target:"eilw6ym6"})((function(e){return"compact"===e.theme.displayStyle&&(0,a.css)("display:block;margin-right:0.3em;")}),";",y),t.AudioRelatedLinkAudioTag=(0,a.styled)("span",{target:"eilw6ym7"})((0,a.css)("color:",l.color.content.quaternary,";margin-left:0.2rem;"),";"),function(){return(0,a.css)("margin-top:8px;display:flex;align-items:center;")}),b=(t.AudioRelatedLinkAudioSignalWrapper=(0,a.styled)("div",{target:"eilw6ym8"})(v),t.playIconDisplayStyles=(0,a.themeFn)("displayStyle",{standard:function(e){return(0,a.css)(c(e,{marginRight:[8,12]})," svg{",c(e,{height:[20,24],width:[20,24]}),";}")},expanded:(0,a.css)("margin-right:12px;svg{height:24px;width:24px;}"),compact:(0,a.css)("display:none;")})),_=(t.AudioRelatedLinkPlayIconWrapper=(0,a.styled)("div",{target:"eilw6ym9"})(b),(0,a.themeFn)("displayStyle",{none:(0,a.css)("svg{margin-left:10px;}")})),w=(0,a.themeFn)("displayStyle",{none:function(e){return(0,a.css)("color:",l.color.content.quaternary,";font-family:",o.default.font.franklinBase,";font-weight:",o.default.font.weight.medium,";letter-spacing:0.1em;text-transform:uppercase;",c(e,{fontSize:[11,12],lineHeight:[16,18]}))}}),x=(t.AudioRelatedLinkDuration=(0,a.styled)("div",{target:"eilw6ym10"})(_,";",w,";"),(0,a.themeFn)("displayStyle",{standard:(0,a.css)("display:flex;align-items:flex-start;"),expanded:function(e){return(0,a.css)("display:flex;flex-direction:column;",e.theme.breakpointMap.medium,"{flex-direction:row;align-items:center;}")}})),k=function(e){return"compact"===e.theme.displayStyle?(0,a.css)(":not(:last-child){margin-bottom:0.75rem;}"):(0,a.css)(":not(:last-child){margin-bottom:1rem;}")},O=function(e){return"compact"===e.theme.displayStyle?(0,a.css)("color:",l.color.signal.editorial,";"):(0,a.css)("color:",l.color.content.quaternary,";")};t.StyledAudioRelatedLink=(0,a.styled)("div",{target:"eilw6ym11"})("&:hover,&:visited{",m,"{",O,";}}.",s.linkClass,"{",x,";}",k,";")},"o+dK":function(e,t,n){"use strict";var i=n("VkAN"),a=n.n(i),o=n("gcR/"),r=n.n(o),s=(n("q1tI"),n("eFc+")),l=n.n(s),c=n("InUh"),u=n.n(c),d=n("Jqp9"),p=n("Ymd4"),f=n("WPUH"),m=n("uoyi"),h=n("jOYC"),g=n("534C"),y=n.n(g),v=n("1rl3"),b=n("4uw1"),_=n("pCca"),w=n("wXC7"),x=n.n(w),k=n("3sMT"),O=n("nosR"),T=n("nGF/"),C=n.n(T),E=n("139F"),S=n.n(E),P=n("y1Vo"),I=Object(d.css)(x.a.breakpoint.mediumLarge,"{height:100vh;padding-bottom:0;}padding-bottom:66.6666666666%;"),M=Object(d.css)("@media (max-width:",x.a.breakpoint.width.mediumLarge-1,"px){padding-bottom:0 !important;height:","calc(100vh - ".concat(v.VI_NAV_BAR_HEIGHT,")")," !important;}",I,";"),A=Object(d.css)("position:relative;",x.a.breakpoint.small,"{margin-bottom:43px;}margin-bottom:37px;"),j=Object(d.css)("display:block;margin-right:7px;color:",k.color.content.quaternary,";font-family:",x.a.font.serifBase,";font-size:0.875rem;line-height:1.125rem;");function N(e){var t,n,i,a,o=e.data,s=e.containerClass,l=e.textOverlay,c=e.isMobileBelowLede,u=Object(_.a)().breakpoint,p=(t=o.media.renditions,i=(n=u)<=600,a=t.filter((function(e){return/\.mp4$/.test(e.url)})),Object(O.findVideoRenditionOfBestFitUrl)(a,n,i)),f=o.media.promotionalMedia&&o.media.promotionalMedia.promotionalMedia||o.media.promotionalMedia,m=function(e,t){var n=t<=600,i=e.filter((function(e){return/\.mp4$/.test(e.url)}));if(0===i.length)throw new Error("An mp4 video is required");return Object(O.findVideoRenditionOfBestFit)(i,t,n)}(o.media.renditions,u),h=(null==m?void 0:m.aspectRatio)||o.media.aspectRatio||"".concat(m.width,":").concat(m.height),g=function(e,t,n){var i=n<=600,a=Object(O.findRenditionsByRatio)(e,t);return Object(O.findVideoRenditionOfBestFitUrl)(a,n,i)}(f.crops,h,u),y="",v=o.media.summary;if(o.media.bylines&&o.media.bylines.length){var b=o.media.bylines.find((function(e){return e.renderedRepresentation}));y=b&&b.renderedRepresentation}return r()("div",{className:Object(d.cx)(s,A,"sizeFull")},void 0,r()(C.a,{src:p,imgFallback:g,imgLoading:g,className:c?I:M,ratio:u<1024?h:"",textOverlay:l}),(y||v)&&r()(P.Caption,{},void 0,v&&r()("span",{className:Object(d.cx)(j),dangerouslySetInnerHTML:{__html:v}}),y&&r()(S.a,{dangerouslySetInnerHTML:{__html:y}})))}N.displayName="HeaderCinemagraphWrapper",N.defaultProps={textOverlay:null,isMobileBelowLede:!1};var L,D=N,R=n("mGV9"),B=Object(d.css)("margin-top:0;",x.a.breakpoint.small,"{margin-top:0;}",x.a.breakpoint.mediumLarge,"{max-width:none;width:100%;}"),z=Object(d.css)(x.a.breakpoint.mediumLarge,"{display:flex;flex-direction:column;right:0;padding:50px 50px 70px 0;}"),F=Object(d.css)("position:relative;",x.a.breakpoint.mediumLarge,"{height:100vh;}"),U=Object(d.css)("display:block;",x.a.breakpoint.mediumLarge,"{text-align:left;}"),H=u()((function(){return Promise.all([n.e(176),n.e(108)]).then(n.bind(null,"l+kF"))}),{loadableGenerated:{webpack:function(){return["l+kF"]},modules:["./HeaderFullBleedHorizontalVi"]}}),W={ImageBlock:f.a,VideoBlock:D},q=function(e){var t,n=Object(d.useTheme)(),i=Object(b.a)(),a=e.data,o=e.collections,s=e.labelOverride,l=e.headlineClass,c=e.className,u=e.storyMetaOverrideClass,f=e.lastModified,g=!1;a.ledeMedia&&(g=Object.prototype.hasOwnProperty.call(W,a.ledeMedia.__typename),t=W[a.ledeMedia.__typename]);var _=a.ledeMedia&&g&&r()(t,{className:B,data:a.ledeMedia,containerClass:F,isFullBleed:!0,showCaption:!1,lede:!0,useResponsiveMedia:!0,useMobileCrop:!0,isMobileBelowLede:a&&a.textPosition&&"MOBILE_BELOW_LEDE"===a.textPosition.mobile})||null,w=a.headline&&r()(p.a,{data:a.headline,className:l}),x=a.summary&&r()(m.a,{data:a.summary}),k=n&&"opinion"===n.section,O=r()(y.a,{collections:o}),T="Visual Stacks"===(n&&n.storyFormat),C=(a.label||k||O)&&r()(R.a,{data:a.label,signalOpinion:k,timesExclusive:O,isVisualStacks:T,className:U,labelOverride:s}),E=Object(v.shouldUseHeaderV2Position)({textPosition:null==a?void 0:a.textPosition,lastModified:f,isVertical:!1});return r()(H,{headerMedia:_,label:C,headline:w,summary:x,content:a,baseColumnStyle:h.a,storyMetaClass:Object(d.cx)("rightToLeft"===(null==n?void 0:n.languageDirection)?z:void 0,u),textPosition:null==a?void 0:a.textPosition,className:c,isVisualStacks:T,isVi:!i,isHybrid:i,useHeaderV2Position:E})};q.displayName="HeaderFullBleedHorizontalBlock",q.fragments={data:l()(L||(L=a()(['\n    fragment HeaderFullBleedHorizontalBlock_data on HeaderFullBleedHorizontalBlock {\n      headlineColor\n      displayOverride\n      gradientEnabled\n      label {\n        ...LabelBlock_data\n      }\n      headline {\n        ...Heading1Block_data\n      }\n      summary {\n        ...SummaryBlock_data\n      }\n      textPosition {\n        mobile\n        desktop\n      }\n      ledeMedia {\n        __typename\n        ... on ImageBlock {\n          size\n          media {\n            id\n            crops(renditionNames: ["articleLarge", "jumbo", "superJumbo", "mobileMasterAt3x"]) {\n              bleed {\n                percentTop\n                percentLeft\n                percentRight\n                percentBottom\n              }\n              renditions {\n                url\n                name\n                width\n                height\n              }\n            }\n            legacyHtmlCaption\n            altText\n            credit\n          }\n        }\n        ... on VideoBlock {\n          media {\n            id\n            aspectRatio\n            renditions {\n              width\n              height\n              url\n              aspectRatio\n              type\n            }\n            summary\n            bylines {\n              renderedRepresentation\n            }\n            promotionalMedia {\n              ... on Image {\n                id\n                crops {\n                  name\n                  renditions {\n                    width\n                    height\n                    url\n                  }\n                }\n              }\n              ... on Video {\n                id\n                promotionalMedia {\n                  ... on Image {\n                    id\n                    crops {\n                      name\n                      renditions {\n                        width\n                        height\n                        url\n                      }\n                    }\n                  }\n                }\n              }\n            }\n          }\n        }\n      }\n    }\n    ',"\n    ","\n    ","\n  "])),p.a.fragments.data,R.a.fragments.data,m.a.fragments.data)},q.defaultProps={collections:null,data:null,labelOverride:void 0,headlineClass:void 0,className:void 0,storyMetaOverrideClass:void 0,lastModified:void 0};t.a=q},o6DT:function(e,t,n){"use strict";function i(e){var t,n,i=e.shareUrl,a=void 0===i?"":i,o=e.uri,r=void 0===o?"":o,s=e.pagetype,l=void 0===s?"article":s,c=window.dataLayer||[],u={event:"moduleInteraction",eventData:{pagetype:l,trigger:"module",type:"click"},module:{region:"mid-video",name:"share-tools",element:{name:"share-url",label:"permalink",url:a,uri:r}}};window.UnifiedTracking?null===(t=(n=window.UnifiedTracking).sendAnalytic)||void 0===t||t.call(n,"moduleInteraction",u):c.push(u)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t,n=e.shareUrl,a=void 0===n?"":n,o=e.title,r=void 0===o?"":o,s=e.uri,l=void 0===s?"":s,c=e.pagetype,u=void 0===c?"article":c,d={url:a,title:r};window.navigator.canShare&&window.navigator.canShare({url:"https://www.nytimes.com"})?window.navigator.share(d).then((function(){i({shareUrl:a,uri:l,pagetype:u})})).catch((function(e){console.error("share failed",e)})):null!==(t=window.NativeBridge)&&void 0!==t&&t.share&&(window.NativeBridge.share(d),i({shareUrl:a,uri:l,pagetype:u}))}},oCqg:function(e,t,n){"use strict";var i=n("TqRt"),a=n("cDf5");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=i(n("q1tI")),r=(i(n("17x9")),i(n("AfrD"))),s=i(n("Pmun")),l=i(n("TB7k")),c=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=a(e)&&"function"!=typeof e)return{default:e};var n=u(t);if(n&&n.has(e))return n.get(e);var i={__proto__:null},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var r in e)if("default"!==r&&{}.hasOwnProperty.call(e,r)){var s=o?Object.getOwnPropertyDescriptor(e,r):null;s&&(s.get||s.set)?Object.defineProperty(i,r,s):i[r]=e[r]}return i.default=e,n&&n.set(e,i),i}(n("vubr"));function u(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(u=function(e){return e?n:t})(e)}function d(e){var t,n=e.storyline.topLinks,i=e.trackingParams,a=e.trackLinkInteraction,u=n.displayName,d=n.leadIn,p=n.imageUrl,f=n.items;return u&&null!=f&&null!==(t=f.content)&&void 0!==t&&t.length?o.default.createElement("section",{role:"complementary","aria-labelledby":"styln-toplinks-title",className:c.containerClass},p&&o.default.createElement("img",{src:p,alt:"",className:c.imageClass}),o.default.createElement("header",{className:c.headerClass},o.default.createElement("h2",{id:"styln-toplinks-title",className:c.titleClass},u),d&&o.default.createElement("h3",{className:c.leadInClass},d)),o.default.createElement(r.default,{className:c.listClass},f.content.map((function(e,t){return o.default.createElement(s.default,{key:t.toString(),className:c.listItemClass},e.content.map((function(e,n){return o.default.createElement(l.default,{key:(t+n).toString(),text:e,internalLinkTrackingParams:i,trackLinkInteraction:a})})))})))):null}d.displayName="StorylineTopLinksV2",d.defaultProps={trackingParams:null,trackLinkInteraction:function(){}};t.default=d},oEA4:function(e,t,n){"use strict";var i=n("pVnL"),a=n.n(i),o=n("QILm"),r=n.n(o),s=n("q1tI"),l=n.n(s),c=["children","onClickOutside"];function u(e){var t=e.children,n=e.onClickOutside,i=r()(e,c),o=Object(s.useRef)(!1),u=Object(s.useRef)(null);return Object(s.useEffect)((function(){var e=function(e){var t;"touchend"===e.type&&(o.current=!0),"click"===e.type&&o.current||null!=u&&null!==(t=u.current)&&void 0!==t&&t.contains(e.target)||n(e)};return document.addEventListener("touchend",e,!0),document.addEventListener("click",e,!0),function(){document.removeEventListener("touchend",e,!0),document.removeEventListener("click",e,!0)}}),[n]),l.a.createElement("div",a()({},i,{ref:u}),t)}u.displayName="ClickOutside",u.defaultProps={children:null},t.a=u},oKgi:function(e,t,n){"use strict";var i=n("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=i(n("6/jP"));t.default=a.default},oRP5:function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));var i=n("gcR/"),a=n.n(i),o=(n("q1tI"),n("3sMT"));function r(e){var t=e.size,n=40,i=40;return"medium"===t?(n=30,i=30):"small"===t?(n=20,i=20):"extrasmall"===t&&(n=14,i=14),a()("svg",{width:i,height:n,viewBox:"0 0 40 40"},void 0,a()("path",{d:"M3 40V0l34 20z",fill:o.dark.colors.content.primary.hex,fillRule:"evenodd"}),"small"!==t&&"extrasmall"!==t&&a()("circle",{cx:"20",cy:"20",r:"19",stroke:o.dark.colors.stroke.primary.hex,fill:"transparent",strokeWidth:"2px"}))}r.displayName="PlayButton",r.defaultProps={size:"medium"}},oXTd:function(e,t,n){"use strict";n.d(t,"i",(function(){return i})),n.d(t,"p",(function(){return a})),n.d(t,"q",(function(){return o})),n.d(t,"k",(function(){return r})),n.d(t,"n",(function(){return s})),n.d(t,"a",(function(){return l})),n.d(t,"l",(function(){return c})),n.d(t,"o",(function(){return u})),n.d(t,"j",(function(){return d})),n.d(t,"f",(function(){return p})),n.d(t,"h",(function(){return f})),n.d(t,"g",(function(){return m})),n.d(t,"b",(function(){return h})),n.d(t,"c",(function(){return g})),n.d(t,"d",(function(){return y})),n.d(t,"e",(function(){return v})),n.d(t,"m",(function(){return b}));var i={newsletterIndividualPage:"EmailSignup_NL_indiv_page",newsletterGridIndexPage:"EmailSignup_NL_index_page",newsletterSubOnlyIndexPage:"EmailSignup_NL_sub_only_index_page",onboardingAutoOptin:"Vi_Onboarding_auto_opt_v1",onboardingNewslettersGetStarted:"Vi_Onboarding_newsletters_getStarted",onboardingNewslettersGetStartedSub:"Vi_SubOnboarding_newsletters_getStarted",articleInline:"Vi_article_inline_v1",dynamicArticleInline:"Dynamic_article_inline_v1",onsiteNLTop:"OnsiteNL_top_v1",onsiteNLBottom:"OnsiteNL_bottom_v1",liveBlogPage:"LiveBlog_v1",emailSignupDock:"Vi_dock_v1",targetedNewsletterSignup:"Vi_article_recirc_v1"},a="SUBSCRIBER-ONLY NEWSLETTER",o="".concat(a,"S"),r="HIDDEN",s={BN:"es"},l={default:"default",alert:"alert"},c={seeSample:{"en-US":"Read the Latest",es:"Lee el más reciente"},sendFrequency:{"en-US":"Sent to Your Inbox",es:"Se envía a tu buzón"},contactUs:{"en-US":"Contact us",es:"Contáctenos"},privacyPolicy:{"en-US":"Privacy Policy",es:"Política de privacidad"}},u="Read the latest.",d={newsletterIndividualPage:"individual",newsletterGridIndexPage:"index",newsletterSubOnlyIndexPage:"subonly-index",article:"inline"},p="Thank you for signing up for 4 week complimentary access.",f="Thank you for signing up for this newsletter.",m="Thank you for signing up for these newsletters.",h="We’ve sent you a confirmation email.",g="We’ve sent you confirmation emails.",y="Thank you for signing up for this alert.",v="Thank you for signing up for these alerts.",b={NA:{kicker:"Stay up to date",caption:"Get informed as important news breaks around the world."},NN:{kicker:"Start your day",caption:"Make sense of the day’s news and ideas."},NE:{kicker:"Wind down",caption:"Find out the 10 most important things that happened today."},WG:{kicker:"What to watch",caption:"Discover streaming TV and movie recommendations from critic Margaret Lyons and friends."},RLW:{kicker:"What to read",caption:"Book recommendations from our critic Molly Young."},NC:{kicker:"Expert political analysis",caption:"Making sense of elections, politics and polling."},CLIM:{kicker:"Get clear-eyed analysis",caption:"Your must-read guide to the climate crisis."},TE:{kicker:"Your questions answered",caption:"Expert advice on life’s trickiest situations and moral dilemmas. "},PTG:{kicker:"Opinion Voice",caption:"Analyzing the American family, culture, politics and the way we live now."},DF:{kicker:"Opinion Voice",caption:"Reflections on law and culture, war and peace, and the deeper trends that define and divide America."},JBO:{kicker:"Opinion Voice",caption:"Historical context for present-day events."},PK:{kicker:"Opinion Voice",caption:"A guide to U.S. politics and the economy — from the mainstream to the wonkish."},INT:{kicker:"Decoding global events",caption:"Exploring the ideas and context behind major world events."},WTE:{kicker:"Find new favorites",caption:"Restaurant recommendations, from new places to beloved classics."},THW:{kicker:"Opinion Voice",caption:"Reflecting on matters of faith in private life and public discourse."},TMC:{kicker:"Opinion Voice",caption:"A sociologist’s perspective on culture, politics and the economics of our everyday lives."},RS:{kicker:"Keep up with the sport",caption:"News and analysis, on and off the pitch."},PW:{kicker:"Read reviews early",caption:"Get reviews of New York City restaurants sent to you directly — a day before everyone else."},PC:{kicker:"Opinion Voice",caption:"Offering sensible thinking on economics and the business issues that matter."},HH:{kicker:"Improve your well-being",caption:"Essential news and guidance to live your healthiest life."},DWW:{kicker:"Opinion Voice",caption:"Exploring climate change, technology, the future of the planet and how we live on it."},RD:{kicker:"Opinion Voice",caption:"The columnist reflects on culture and politics, but mostly culture."},AMP:{kicker:"Find your favorite song",caption:"Your alternative to the algorithm — a real, live human helps you discover songs you’ll love."},JM:{kicker:"Opinion Voice",caption:"Examining how race and language shape our politics and culture."},FB:{kicker:"Opinion Voice",caption:"Reflections on the mess (and magic) of politics and life."},WKDR:{kicker:"Our best weekend reads",caption:"Get stories handpicked by Times editors for you to enjoy each weekend."},FORY:{kicker:"A personal daily digest",caption:"Receive a roundup of the best stories for you, based on your interests."},TY:{kicker:"Gain perspective",caption:"Get expert analysis of the news and a guide to the big ideas shaping the world."},CK:{kicker:"What to cook",caption:"Feast on recipes, food writing and culinary inspiration from Sam Sifton and NYT Cooking."}}},oZ2M:function(e,t,n){"use strict";var i=n("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.spanClass=t.default=t.compoundBylineClass=t.BylineLink=void 0;var a=n("Jqp9"),o=n("3sMT"),r=i(n("wXC7")),s=(0,a.themeFn)("section",{none:(0,a.css)("font-family:",r.default.font.franklinBase,";font-weight:",r.default.font.weight.bold,";color:",o.color.content.secondary,";"),magazine:(0,a.css)("font-family:",r.default.font.magazineSansBase,";font-weight:",r.default.font.weight.bold,";color:",o.color.content.secondary,";"),"t-magazine":(0,a.css)("font-family:",r.default.font.tmagSansBase,";font-weight:",r.default.font.weight.medium,";color:",o.color.content.secondary,";")}),l=(t.BylineLink=(0,a.styled)("a",{target:"e1jsehar0"})("color:inherit;text-decoration:underline;text-underline-offset:1px;text-decoration-thickness:1px;text-decoration-color:",o.color.content.quaternary,";&:hover,&:focus{text-decoration:none;}"),t.spanClass=(0,a.css)("display:inline-block;"),t.compoundBylineClass=(0,a.css)("text-align:inherit;padding-right:12px;&:last-child{padding-right:0;}"),(0,a.css)("font-size:",r.default.font.size(14),";line-height:",r.default.font.size(18),";",r.default.breakpoint.medium,"{font-size:",r.default.font.size(15),";line-height:",r.default.font.size(20),";}")),c=(0,a.css)("font-size:",r.default.font.size(13),";line-height:",r.default.font.size(17),";margin-top:",r.default.font.size(3),";",r.default.breakpoint.mediumLarge,"{font-size:",r.default.font.size(16),";line-height:",r.default.font.size(21),";}"),u=(0,a.themeFn)("section",{none:l,opinion:(0,a.themeFn)("opinionHeaderRedesign",{none:l,true:c})}),d=(0,a.styled)("p",{target:"e1jsehar1"})("display:inline-block;margin:0;",u,";",s,";");t.default=d},p1Mg:function(e,t,n){"use strict";var i=n("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=i(n("q1tI")),o=(i(n("17x9")),function(e){var t=e.className,n=e.fill;return a.default.createElement("svg",{className:t,viewBox:"0 0 7 15",width:"7",height:"15",xmlns:"http://www.w3.org/2000/svg"},a.default.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M4.775 14.163V7.08h1.923l.255-2.441H4.775l.004-1.222c0-.636.06-.977.958-.977H6.94V0H5.016c-2.31 0-3.123 1.184-3.123 3.175V4.64H.453v2.44h1.44v7.083h2.882z",fill:n}))});o.displayName="Facebook",o.defaultProps={className:void 0,fill:"#000"};t.default=o},p1Tn:function(e,t,n){"use strict";n.d(t,"h",(function(){return i})),n.d(t,"g",(function(){return a})),n.d(t,"f",(function(){return o})),n.d(t,"c",(function(){return r})),n.d(t,"e",(function(){return s})),n.d(t,"b",(function(){return l})),n.d(t,"d",(function(){return c})),n.d(t,"a",(function(){return u})),n.d(t,"i",(function(){return d})),n.d(t,"j",(function(){return p})),n.d(t,"k",(function(){return f}));var i=["nyt://per/personalized-list/welcome-banner-newsletter-rec","nyt://per/personalized-list/welcome-banner-newsletter-rec-subs","nyt://per/personalized-list/welcome-banner-newsletter-rec-clicks"],a=10,o=3,r=6,s="getStartedLater",l=9,c="welcomeBannerRegi",u="welcome-banner",d="SJ_regi_welcome_1123",p="1_old",f="2_new"},p3S2:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.USER_STATE_API_TEST=t.THEMES=t.LIVE_ALERT_TOGGLE_DEFAULTS=t.LAZY_LOAD_OFFSET=t.LABELS=t.INITIAL_NUMBER_POSTS=t.INITIAL_ADDITIONAL_NUMBER_POSTS=t.GROUPINGS=t.COLLECTION_POSTS_LIMIT=void 0;t.INITIAL_NUMBER_POSTS=10,t.INITIAL_ADDITIONAL_NUMBER_POSTS=22,t.COLLECTION_POSTS_LIMIT=100,t.LAZY_LOAD_OFFSET=500,t.THEMES={LIVE_BLOG:"LIVE_BLOG",LIVE_BRIEFING:"LIVE_BRIEFING",COVERAGE_BRIEFING:"COVERAGE_BRIEFING",FACT_CHECK:"FACT_CHECK",EXPLAINER:"EXPLAINER",NEWS_BRIEFING:"NEWS_BRIEFING",STORYLINE_FEED:"LIVE_STORYLINE_FEED"},t.LABELS={RIGHT_NOW:"right now",MAJOR_UPDATES:"major updates",ART_HIGHLIGHT:"art highlight",BREAKING_UPDATES:"breaking",LIVE_UPDATES:"live",JUST_NOW:"just now",SUPPLEMENTAL_TAGS:["supplemental","Supplemental Graphic","Supplemental Promo"],UNDERHIGHLIGHTS:"underhighlights"},t.GROUPINGS={SUPPLEMENTAL:"supplemental",RANK:"rank"},t.USER_STATE_API_TEST={name:"STYLN_user_state_api_1122",control:"0_Control",variant:"1_User_State"},t.LIVE_ALERT_TOGGLE_DEFAULTS={cta:"Get notifications for updates on this story.",ariaLabel:"Subscribe to alerts toggle button",tooltipStorageKey:"styln_live_signup_alert_tooltip",notifications:function(e){return{subscribed:{title:e?"Live Update: ".concat(e):"Live Update",body:e?"You will receive alerts as this story develops.":"You will receive alerts for a live story."},unsubscribed:{title:"Unsubscribed",body:e?"You will no longer receive live update alerts for ".concat(e,"."):"You will no longer receive live update alerts."}}}}},pVYW:function(e,t,n){"use strict";n.d(t,"a",(function(){return r})),n.d(t,"b",(function(){return s})),n.d(t,"c",(function(){return l}));var i=n("Jqp9"),a=n("wXC7"),o=n.n(a),r=Object(i.css)(".sizeSmall &{width:50%;",o.a.breakpoint.small,"{width:300px;}",o.a.breakpoint.extraLarge,"{width:300px;}@media (max-width:",o.a.breakpoint.width.small,"px){width:50%;}}.sizeSmall.sizeSmallNoCaption &{margin-left:auto;margin-right:auto;}.sizeSmall.layoutVertical &{",o.a.breakpoint.medium,"{max-width:250px;}",o.a.breakpoint.mediumLarge,"{width:250px;}@media (max-width:",o.a.breakpoint.width.medium,"px){max-width:250px;}}.sizeSmall.layoutHorizontal &{",o.a.breakpoint.medium,"{max-width:300px;}",o.a.breakpoint.mediumLarge,"{width:300px;}@media (max-width:",o.a.breakpoint.width.medium,"px){max-width:300px;}}.sizeMedium.layoutVertical.verticalVideo &{",o.a.breakpoint.small,"{width:420px;}}"),s=Object(i.css)("margin:0 auto 37px auto;",o.a.breakpoint.medium,"{margin:0 auto;}"),l=Object(i.css)("margin:",o.a.breakpoint.mobileBlockMargins,";strong{font-weight:",o.a.font.weight.bold,";}em{font-style:italic;}&.sizeSmall{width:",o.a.breakpoint.mobileFullWidth,";display:flex;",o.a.breakpoint.small,"{max-width:",o.a.breakpoint.textBodyWidth,"px;margin-left:auto;margin-right:auto;}",o.a.breakpoint.mediumLarge,"{width:100%;}",o.a.breakpoint.extraLarge,"{max-width:",o.a.breakpoint.textBodyWidthExtralarge,"px;}&.sizeSmallNoCaption{display:block;@media print{display:none;}}}&.sizeMedium{width:100%;max-width:",o.a.breakpoint.textBodyWidth,"px;margin-right:auto;margin-left:auto;",o.a.breakpoint.small,"{width:",o.a.breakpoint.mobileFullWidth,";}",o.a.breakpoint.medium,"{max-width:",o.a.breakpoint.textBodyWidthExtralarge,"px;}&.layoutVertical{",o.a.breakpoint.small,"{width:420px;}&.verticalVideo{width:100%;",o.a.breakpoint.small,"{width:420px;}}}}&.sizeLarge{width:100%;max-width:",o.a.breakpoint.mediaMaxWidth,"px;margin-left:auto;margin-right:auto;",o.a.breakpoint.small,"{width:auto;}",o.a.breakpoint.medium,"{&.layoutVertical{width:",o.a.breakpoint.textBodyWidthExtralarge,"px;&.verticalVideo{width:",o.a.breakpoint.textBodyWidth,"px;}}}",o.a.breakpoint.mediumLarge,"{width:945px;}",o.a.breakpoint.extraLarge,"{width:",o.a.breakpoint.mediaMaxWidth,"px;&.layoutVertical{width:",o.a.breakpoint.mediumMediaExtralarge,"px;&.verticalVideo{width:",o.a.breakpoint.textBodyWidthExtralarge,"px;}}}}",o.a.breakpoint.medium,"{margin:",o.a.breakpoint.desktopMediaMargins,";}@media print{display:none;}")},paWp:function(e,t,n){"use strict";n.d(t,"b",(function(){return u})),n.d(t,"a",(function(){return d})),n.d(t,"c",(function(){return p})),n.d(t,"d",(function(){return f}));var i=n("Jqp9"),a=n("wXC7"),o=n.n(a),r=n("3Rk2"),s=n.n(r),l=n("3sMT"),c=s()(["@media (min-width: ".concat(o.a.breakpoint.maxMobileContentWidth,"px)"),o.a.breakpoint.medium,o.a.breakpoint.mediumLarge,o.a.breakpoint.large]),u=Object(i.css)("margin-left:25px;margin-right:25px;",o.a.breakpoint.large,"{width:calc(100% - 50px);max-width:1200px;margin-left:auto;margin-right:auto;}"),d=Object(i.css)("background-color:",l.dark.colors.background.primary.transform(o.a.setAlpha(.6)).rgba,";border:1px solid ",l.dark.colors.stroke.primary.hex,";border-radius:3px;height:30px;left:10px;position:absolute;width:30px;",c({bottom:["35px","35px","35px","25px"]}),";"),p=Object(i.css)("background-image:url(","/vi-assets/static-assets/icon-media-slideshow-16x14-ffffff-dad880e7cfaac5facf5a03b3a4a1bdd3.svg",");height:14px;margin-top:7px;margin-left:7px;width:16px;"),f=Object(i.css)("border-right:11.9px inset transparent;border-top:7px inset transparent;border-bottom:7px inset transparent;border-left:11.9px solid ",o.a.color.white,";margin-top:8px;margin-left:9px;width:18px;")},pq3b:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){return(e||"").replace(/"([\w,.?!)])/g,"“$1").replace(/"/g,"”").replace(/([^a-zA-Z\d]|^|\s+)'([\w,.?!)])/g,"$1‘$2").replace(/'/g,"’").replace(/(-{2})/g,"—")}},"q94/":function(e,t,n){"use strict";var i=n("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};if(!s[e.__typename])return console.error('Unrecognized format "'.concat(e.__typename,'"')),t||null;return s[e.__typename](e,t,n,i)};var a=i(n("HTGc")),o=i(n("3HYe")),r=i(n("mFeT")),s={BoldFormat:a.default,ItalicFormat:o.default,LinkFormat:r.default}},qCfC:function(e,t,n){"use strict";n.d(t,"a",(function(){return p}));var i,a=n("VkAN"),o=n.n(a),r=n("gcR/"),s=n.n(r),l=(n("q1tI"),n("eFc+")),c=n.n(l),u=n("Jqp9"),d=n("HO7F");function p(e){var t=e.data,n=e.className,i=t.capsuleContent,a=i.uri,o=i.sourceId,r=i.body;return r&&r.content?s()("section",{className:Object(u.cx)(n,"capsule-content"),"data-id":o,"data-uri":a,"data-testid":"capsule-block"},void 0,s()(d.a,{body:r,uri:a})):null}p.displayName="CapsuleBlock",p.defaultProps={componentTypemapExtension:{},className:void 0},p.fragments={data:c()(i||(i=o()(["\n    fragment CapsuleBlock_data on CapsuleBlock {\n      capsuleContent: content {\n        ... on Capsule {\n          sourceId\n          slug\n          lastMajorModification\n          ...Capsule_data\n        }\n      }\n    }\n    ","\n  "])),d.a.fragments.data)}},qGEe:function(e,t,n){"use strict";var i=n("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=i(n("Vgop")),o=i(n("xPyS")),r=i(n("sg0Q")),s=i(n("AWWW")),l=i(n("TMfO")),c=i(n("I4yQ")),u=i(n("Ma1Z")),d=i(n("X4Xf")),p=i(n("UqQm")),f=i(n("r5E/")),m=i(n("zkhZ")),h=i(n("HNZC"));t.default={Reveal:a.default,PhotoQuote:o.default,ReaderContext:r.default,Ask:s.default,Aml:l.default,AdHint:c.default,BulletBriefing:u.default,TableOfContents:d.default,FeaturedReporter:p.default,Scrolly:f.default,MediaWithWriteThrough:m.default,DocPromo:h.default}},qOgO:function(e,t,n){"use strict";var i=this&&this.__makeTemplateObject||function(e,t){return Object.defineProperty?Object.defineProperty(e,"raw",{value:t}):e.raw=t,e};Object.defineProperty(t,"__esModule",{value:!0}),t.mainText=t.headerContainer=void 0;var a,o,r=n("Jqp9"),s=n("lVLo");t.headerContainer=(0,r.css)(a||(a=i(["\n  cursor: pointer;\n"],["\n  cursor: pointer;\n"]))),t.mainText=(0,r.css)(o||(o=i(["\n  font-family: ",";\n  font-size: 15px;\n  font-weight: ",";\n  line-height: 17px;\n  padding-left: 20px;\n  text-decoration: underline;\n\n  @media (min-width: ","px) {\n    padding-left: unset;\n  }\n"],["\n  font-family: ",";\n  font-size: 15px;\n  font-weight: ",";\n  line-height: 17px;\n  padding-left: 20px;\n  text-decoration: underline;\n\n  @media (min-width: ","px) {\n    padding-left: unset;\n  }\n"])),s.fonts.franklin,s.fontWeights.bold,s.widths.medium)},qYyE:function(e,t,n){"use strict";var i=this&&this.__makeTemplateObject||function(e,t){return Object.defineProperty?Object.defineProperty(e,"raw",{value:t}):e.raw=t,e},a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.bodyNoScrollClass=t.blackoutUnderlayClass=void 0;var o,r,s=n("Jqp9"),l=a(n("wXC7"));t.blackoutUnderlayClass=(0,s.css)(o||(o=i(["\n  display: block;\n  position: fixed;\n  top: 0;\n  bottom: 0;\n  right: 0;\n  left: 0;\n  background: rgba(0, 0, 0, 0.5);\n  z-index: ",";\n  transition: background 2s;\n"],["\n  display: block;\n  position: fixed;\n  top: 0;\n  bottom: 0;\n  right: 0;\n  left: 0;\n  background: rgba(0, 0, 0, 0.5);\n  z-index: ",";\n  transition: background 2s;\n"])),l.default.zIndex.dock-1),t.bodyNoScrollClass=(0,s.css)(r||(r=i(["\n  overflow: hidden;\n"],["\n  overflow: hidden;\n"])))},qdb9:function(e,t,n){"use strict";var i=n("TqRt"),a=n("cDf5");Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t=e.audioDeepLink,n=(0,s.useState)(!1),i=(0,r.default)(n,2),a=i[0],f=i[1];return(0,s.useEffect)((function(){var e=document.querySelector("#audio-header-play"),t=(0,c.default)((function(){var t=((null==e?void 0:e.getBoundingClientRect())||{}).bottom<0,n=window.pageYOffset>=50;f(n&&(t||!e))}),300,{leading:!0});return window.addEventListener("scroll",t),t(),function(){window.removeEventListener("scroll",t)}}),[]),s.default.createElement(s.default.Fragment,null,s.default.createElement(u.default,{hideShadow:!0,audioDeepLink:t}),s.default.createElement("div",{className:(0,l.cx)(d.hybridAudioPromoBannerClass,(0,o.default)({},p.navHiddenClass,!a))},s.default.createElement(u.default,{audioDeepLink:t})))};var o=i(n("lSNA")),r=i(n("J4zp")),s=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=a(e)&&"function"!=typeof e)return{default:e};var n=f(t);if(n&&n.has(e))return n.get(e);var i={__proto__:null},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var r in e)if("default"!==r&&{}.hasOwnProperty.call(e,r)){var s=o?Object.getOwnPropertyDescriptor(e,r):null;s&&(s.get||s.set)?Object.defineProperty(i,r,s):i[r]=e[r]}return i.default=e,n&&n.set(e,i),i}(n("q1tI")),l=n("Jqp9"),c=i(n("hKI/")),u=i(n("FfMl")),d=n("rJzx"),p=(i(n("17x9")),n("BHh2"));function f(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(f=function(e){return e?n:t})(e)}},qf1F:function(e,t,n){"use strict";var i=n("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=i(n("q1tI")),o=(i(n("17x9")),i(n("7502"))),r=n("AteQ"),s=function(e){var t=e.alternateRating,n=e.children,i=e.claim,s=e.claimDate,l=e.claimReviewUrl,c=e.claimUrl,u=e.className,d=e.content,p=e.contentMetadata,f=e.firstPublished,m=e.hideClaim,h=e.hideSchema,g=e.rating,y=e.source,v=a.default.createElement(o.default,{alternateRating:t,claim:i,claimDate:s,claimReviewUrl:l,claimUrl:c,contentMetadata:p,firstPublished:f,rating:g,source:y});return m?v:a.default.createElement("div",{className:u},a.default.createElement(r.Claim,null,""!==c?a.default.createElement("a",{href:c},i):i),a.default.createElement(r.ClaimAttr,null,"— ",""!==c?a.default.createElement("a",{href:c},y):y),a.default.createElement(r.ClaimRating,null,t),a.default.createElement(r.ClaimContent,null,n||d),h?null:v)};s.displayName="ClaimReview",s.defaultProps={contentMetadata:"",alternateRating:"",className:void 0,children:null,hideSchema:!1};t.default=s},qrZX:function(e,t,n){"use strict";var i=n("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=n("Jqp9"),o=i(n("wXC7")),r=n("3sMT"),s=(0,a.styled)("span",{target:"ezdmqqa0"})("margin-right:10px;padding:6px 7px 3px;display:none;white-space:nowrap;align-items:center;border-radius:3px;font-family:",o.default.font.franklinBase,";font-weight:",o.default.font.weight.bold,";letter-spacing:0.03rem;font-size:",o.default.font.size(13),";line-height:",o.default.font.size(13),";color:",r.color.content.primary,";text-transform:uppercase;");t.default=s},qsmR:function(e,t,n){"use strict";var i=n("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=i(n("q1tI")),o=n("3sMT");t.default=function(){return a.default.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 20 20",fill:"none"},a.default.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M8 13.7683V6L14.5 9.88415L8 13.7683Z",fill:o.color.content.secondary}),a.default.createElement("circle",{cx:"10",cy:"10",r:"9.25",stroke:o.color.stroke.primary,strokeWidth:"1.5"}))}},r0tw:function(e,t,n){"use strict";n.d(t,"d",(function(){return l})),n.d(t,"f",(function(){return c})),n.d(t,"e",(function(){return u})),n.d(t,"a",(function(){return d})),n.d(t,"b",(function(){return p})),n.d(t,"c",(function(){return f})),n.d(t,"g",(function(){return m})),n.d(t,"h",(function(){return h}));var i=n("Jqp9"),a=n("wXC7"),o=n.n(a),r=n("3sMT"),s=o.a.breakpoint,l=Object(i.css)("background-color:",r.color.background.primary,";height:25px;.hiddenClass{display:none;}"),c=Object(i.css)("height:auto;width:auto;border:solid 1px ",r.color.stroke.quaternary,";background-color:",r.color.background.primary,";border-radius:30px;font-size:",o.a.font.size(12),";font-family:",o.a.font.franklinBase,";text-transform:uppercase;&:hover{background-color:",r.color.background.tertiary,";border:1px solid ",r.color.background.tertiary,";}.hiddenClass{display:none;}&[aria-checked='true']{.saved-fill{fill:",r.color.stroke.primary,";}.saved-stroke{fill:",r.color.stroke.primary,";}}&[aria-checked='false']{.saved-fill{fill:none;}.saved-stroke{fill:",r.color.stroke.primary,";}}&[aria-busy='true']{cursor:default;background-color:",r.color.background.tertiary,";}"),u=Object(i.css)("cursor:not-allowed;",s.large,"{&:hover g,&:focus g{stroke:",r.color.stroke.secondary,";opacity:1;}}"),d=Object(i.css)("padding-left:10px;"),p=Object(i.css)(s.large,"{&:hover g,&:focus g{stroke:",r.color.stroke.primary,";opacity:0.4;}}"),f=Object(i.css)(s.large,"{&:hover g,&:focus g{stroke:",r.color.stroke.primary,";}}"),m=Object(i.css)(s.large,"{&:hover g,&:focus g{opacity:0.5;}}"),h=Object(i.css)(s.large,"{&:hover g,&:focus g{opacity:1;}}")},"r5E/":function(e,t,n){"use strict";var i=n("TqRt"),a=n("cDf5");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=i(n("pVnL")),r=i(n("RIqP")),s=i(n("lwsE")),l=i(n("W8MJ")),c=i(n("a1gu")),u=i(n("Nsbk")),d=i(n("7W2i")),p=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=a(e)&&"function"!=typeof e)return{default:e};var n=v(t);if(n&&n.has(e))return n.get(e);var i={__proto__:null},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var r in e)if("default"!==r&&{}.hasOwnProperty.call(e,r)){var s=o?Object.getOwnPropertyDescriptor(e,r):null;s&&(s.get||s.set)?Object.defineProperty(i,r,s):i[r]=e[r]}return i.default=e,n&&n.set(e,i),i}(n("q1tI")),f=(i(n("17x9")),n("Jqp9")),m=n("abzs"),h=n("hMrr"),g=i(n("IFOt")),y=i(n("2cNn"));function v(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(v=function(e){return e?n:t})(e)}function b(e,t,n){return t=(0,u.default)(t),(0,c.default)(e,function(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return function(){return!!e}()}()?Reflect.construct(t,n||[],(0,u.default)(e).constructor):t.apply(e,n))}var _=function(e){function t(){var e;(0,s.default)(this,t);for(var n=arguments.length,i=new Array(n),a=0;a<n;a++)i[a]=arguments[a];return(e=b(this,t,[].concat(i))).media=[],e.id="",e.state={mobile:!0,isIE11:!1},e}return(0,d.default)(t,e),(0,l.default)(t,[{key:"componentDidMount",value:function(){var e,t,n=this;if(this.props.isInEditor)return null;if(11===(e=window.navigator.userAgent,(t=e.indexOf("MSIE"))>0?parseInt(e.substring(t+5,e.indexOf(".",t)),10):navigator.userAgent.match(/Trident\/7\./)?11:0))return this.setState({isIE11:!0}),null;window.matchMedia("(min-width: 750px)").matches&&this.setState({mobile:!1});var i=(0,r.default)(document.querySelectorAll(".scrolly-text-".concat(this.id))).map((function(e,t){return{el:e,mediaEl:document.getElementById("scrolly-image-".concat(t,"-").concat(n.id)),credit:n.media[t].credit,active:!1}})),a=document.getElementById("scrolly-credit-".concat(this.id));var o=new IntersectionObserver((function(e){e.forEach((function(e){var t,n=parseInt(e.target.id.split("-")[1],10);i[n].active=e.isIntersecting,e.intersectionRatio>0&&(a.innerHTML=i[n].credit),t=i.findLastIndex((function(e){return e.active})),i.forEach((function(e,n){e.mediaEl.style.opacity=n<=t?"1":"0"}))}))}));return i.forEach((function(e){return o.observe(e.el)})),null}},{key:"render",value:function(){for(var e=this,t=this.props,n=t.article,i=t.isInAMP,a=t.isInEditor,r=n.content||n.sprinkledBody&&n.sprinkledBody.content,s=!1,l=0,c=0;c<r.length;c+=1)if("UnstructuredBlock"===r[c].__typename&&"ExperimentalBlock_Scrolly"===r[c].dataType&&(l+=1,JSON.stringify(this.props.media)===JSON.stringify(r[c].mediaRefs))){0===c&&(s=!0);break}if(i)return p.default.createElement(g.default,(0,o.default)({},this.props,{scrollyIndex:l}));if(a)return p.default.createElement("div",{className:h.oakClass},p.default.createElement("p",null,"SCROLLING SLIDESHOW"));if(this.id=this.props.index,this.media=this.props.media.map((function(e,t){if("Image"===e.__typename){var n=((0,m.getCrop)(e.crops,"MASTER")&&(0,m.getCrop)(e.crops,"MASTER").renditions).length;return{url:(0,m.getCrop)(e.crops,"MASTER").renditions[n-1].url,mobileUrl:(0,m.getCrop)(e.crops,"MOBILE_MASTER")?(0,m.getCrop)(e.crops,"MOBILE_MASTER").renditions[0].url:(0,m.getCrop)(e.crops,"MASTER").renditions[n-1].url,text:e.legacyHtmlCaption||e.caption.text,credit:e.credit,index:t,__typename:"Image"}}if("Video"===e.__typename){var i,a=e.renditions.find((function(e){return"video_720p_mp4_mobile"===e.type}));return i=a&&a.url?a.url:e.renditions.find((function(e){return"video_480p_mp4"===e.type})).url,{url:e.renditions.find((function(e){return"video_1080p_mp4"===e.type})).url,mobileUrl:i,text:e.headline.default,credit:e.summary,index:t,__typename:"Video"}}return null})),this.state.isIE11)return p.default.createElement(y.default,{media:this.media});var u={muted:!0,loop:!0,autoPlay:!0,playsInline:!0};return p.default.createElement("div",{id:"".concat("scrolly-instance","-").concat(l),className:(0,f.cx)((0,h.containerClass)(s),"scrolly-container")},p.default.createElement("div",{className:h.innerContainerOneClass},p.default.createElement("div",{className:h.innerContainerTwoClass},this.media.map((function(t,n){return"Image"===t.__typename?p.default.createElement("img",{className:(0,f.cx)(h.imgClass,"scrolly-image-".concat(n)),alt:"photo",id:"scrolly-image-".concat(n,"-").concat(e.id),src:e.state.mobile?t.mobileUrl:t.url,"data-credit":t.credit}):p.default.createElement("video",(0,o.default)({className:(0,f.cx)(h.imgClass,"scrolly-image-".concat(n)),alt:"video",id:"scrolly-image-".concat(n,"-").concat(e.id),src:e.state.mobile?t.mobileUrl:t.url,"data-credit":t.credit},u))})),p.default.createElement("p",{id:"scrolly-credit-".concat(this.id),className:h.creditClass},this.media[0].credit))),this.media.map((function(t,n){return p.default.createElement("p",{id:"scrolly-".concat(n),"data-credit":t.credit,className:(0,f.cx)(h.pClass,"scrolly-text-".concat(e.id)),dangerouslySetInnerHTML:{__html:t.text}})})))}}])}(p.Component);_.displayName="Scrolly",_.defaultProps={isInEditor:!1,isInAMP:!1};t.default=(0,f.withTheme)(_)},r6lX:function(e,t,n){"use strict";var i=n("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.convertTrackingParams=t.coerceTrackingParams=void 0,t.initHybridUnifiedTracking=u,t.initUnifiedTracking=function(e){var t;e=e||("undefined"!=typeof window?window:void 0);var n=(null===(t=e)||void 0===t?void 0:t.UnifiedTracking)||{};if(!e)return n;e.UnifiedTracking=n;var i=function(){var t,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null===(t=e.navigator)||void 0===t?void 0:t.userAgent,i=/(?!Chrom.*OPR)wv\).*Chrom(?:e|ium)\/([0-9.]+)(:?\s|$)/i;return i.test(n)},o=function(){var t,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null===(t=e.navigator)||void 0===t?void 0:t.userAgent,i=/nyt[-_]?ios/i;return i.test(n)},s={success:!1,error:!0,errorDetails:"No valid context, no analytic sent"};(null===(l=e)||void 0===l?void 0:l.vi)?n.context="web":function(){var t,n,a,r,s,l,c=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null===(t=e.navigator)||void 0===t?void 0:t.userAgent;return(i(c)||o(c)||Boolean(null===(n=e)||void 0===n||null===(a=n.NYTG)||void 0===a?void 0:a.enqueue)||Boolean(null===(r=e)||void 0===r||null===(s=r.navigator)||void 0===s?void 0:s.native)||Boolean(null===(l=e)||void 0===l?void 0:l.config))&&!!e.NativeBridge}()&&(n.context="hybrid");var l;return n.sendAnalytic=function(){var t=(0,r.default)(a.default.mark((function t(i,o){var r;return a.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if("web"!==n.context){t.next=4;break}return e.dataLayer=e.dataLayer||[],Array.isArray(e.dataLayer)&&(o.event=o.event||i,e.dataLayer.push(o)),t.abrupt("return",new Promise((function(e){return e({success:!0})})));case 4:if("hybrid"!==n.context){t.next=17;break}if(null===(r=e.NativeBridge)||void 0===r||!r.sendAnalytic){t.next=16;break}return t.prev=6,t.next=9,e.NativeBridge.sendAnalytic(i,o);case 9:return t.abrupt("return",t.sent);case 12:return t.prev=12,t.t0=t.catch(6),console.log(t.t0),t.abrupt("return",new Promise((function(e){return e({success:!1,error:!0,errorDetails:t.t0})})));case 16:case 17:return t.abrupt("return",new Promise((function(e){return e(s)})));case 18:case"end":return t.stop()}}),t,null,[[6,12]])})));return function(e,n){return t.apply(this,arguments)}}(),n},t.unifiedTrackingSnippet=t.trackLinkInteraction=t.trackImpression=void 0;var a=i(n("o0o1")),o=i(n("lSNA")),r=i(n("yXPU"));function s(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function l(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?s(Object(n),!0).forEach((function(t){(0,o.default)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function c(e){var t,n=(null===(t=e=e||("undefined"!=typeof window?window:void 0))||void 0===t?void 0:t.UnifiedTracking)||{};return n.context="web",e?(e.UnifiedTracking=n,n.sendAnalytic=function(t,n){return e.dataLayer=e.dataLayer||[],Array.isArray(e.dataLayer)&&(n.event=n.event||t,e.dataLayer.push(n)),Promise.resolve({success:!0})},n):n}function u(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=["performance","pageDataReady","scrollComplete","error","heartbeat"],a={moduleInteraction:"interaction","ab-expose":"ab_expose","ab-alloc":"ab_alloc"},o=(null===(t=e=e||("undefined"!=typeof window?window:void 0))||void 0===t?void 0:t.UnifiedTracking)||{};if(o.context="hybrid",!e)return o;e.UnifiedTracking=o;var r={success:!1,error:!0,errorDetails:"No valid context, no analytic sent"};return o.sendAnalytic=function(t,o){return new Promise((function(s){if(n.sendAnalytic){if(!i.includes(t)){var l=a[t]||t;e.NativeBridge.sendAnalytic(l,o).then((function(e){return s(e)})).catch((function(e){console.log(e,t),s({success:!1,error:!0,errorDetails:e})}))}}else s(r)}))},o}t.unifiedTrackingSnippet=function(e){return e?"(".concat(u,")(window, window.NativeBridge)"):"(".concat(c,")(window)")};var d=t.convertTrackingParams=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return null==e?void 0:e.reduce((function(e,t){return e[t.key]=t.value,e}),{})},p=t.coerceTrackingParams=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return null==e?void 0:e.reduce((function(e,t){var n="imp_id"===(null==t?void 0:t.key)||"req_id"===(null==t?void 0:t.key),i="fellback"===(null==t?void 0:t.key);return e[null==t?void 0:t.key]=n?Number(null==t?void 0:t.value):i?"true"===(null==t?void 0:t.value):null==t?void 0:t.value,e}),{})};t.trackLinkInteraction=function(e,t,n,i){if("undefined"!=typeof window&&window.UnifiedTracking){var a="web"===window.UnifiedTracking.context,o=a?"moduleInteraction":"interaction";if(e.target.closest("a")||e.target.closest("button")){var r,s,c,u=t.node,f=void 0===u?{}:u,m=t.trackingParams,h=d(void 0===m?[]:m),g={event_data:l(l({type:a?"ob_click":"tap"},a&&{trigger:"item"}),{},{pagetype:i}),module:{label:n.label,name:"".concat(i," tap"),context:n.context,element:{url:null!==(r=f.url||f.targetUrl)&&void 0!==r?r:"",uri:null!==(s=f.uri)&&void 0!==s?s:"",index:null!==(c=t.index)&&void 0!==c?c:null,type:i}},algos:h,package:{algos_meta:p(null==n?void 0:n.trackingParams)}};window.UnifiedTracking.sendAnalytic(o,g)}}},t.trackImpression=function(e,t,n){var i,a,o;if("undefined"!=typeof window&&window.UnifiedTracking){var r=e.node,s=void 0===r?{}:r,l=e.trackingParams,c={algos:d(void 0===l?[]:l),card:{url:null!==(i=s.url||s.targetUrl)&&void 0!==i?i:"",uri:null!==(a=s.uri)&&void 0!==a?a:"",index:null!==(o=e.index)&&void 0!==o?o:null,type:n},block:{label:t.label,name:t.context,index:t.index},package:{algos_meta:p(null==t?void 0:t.trackingParams)}};window.UnifiedTracking.sendAnalytic("impression",c)}}},rCSJ:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=!("undefined"==typeof window||!window.document||!window.document.createElement);t.default=i},rHUa:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.textAreaClass=t.oakClass=void 0;var i=n("Jqp9");t.oakClass=(0,i.css)("background:rgba(0,0,0,0.05);height:100%;padding:15px;font-family:'Consolas','Courier New',monospace;"),t.textAreaClass=(0,i.css)("height:400px;width:100%;")},rJzx:function(e,t,n){"use strict";var i=n("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.withBorderClass=t.storylinesMenuShadowClass=t.storylinesMenuApplyShadowClass=t.logoOnRightClass=t.logoClass=t.linkClass=t.hybridAudioPromoBannerClass=t.hideOnAndroidClass=t.hasAudioDeepLinkClass=t.bannerWrapperClass=t.audioTextClass=t.audioPromoWrapperClass=t.audioAppAsBannerClass=void 0;var a=n("Jqp9"),o=i(n("qp0C")),r=n("3sMT"),s=i(n("DxDJ")),l=i(n("wXC7"));t.audioPromoWrapperClass=(0,a.css)("display:flex;gap:0.75rem;align-items:center;margin:0 auto;width:100%;max-width:550px;"),t.logoOnRightClass=(0,a.css)("flex-direction:row-reverse;max-width:600px;"),t.hasAudioDeepLinkClass=(0,a.css)("margin:auto;& > a > div{justify-content:center;}"),t.audioTextClass=(0,a.css)("color:",r.color.content.secondary,";font-size:",o.default.size(14),";line-height:",o.default.size(18),";font-weight:",o.default.weight.medium,";font-family:",o.default.franklinBase,";",s.default.small,"{font-size:",o.default.size(15),";line-height:",o.default.size(20),";}"),t.logoClass=(0,a.css)("flex-shrink:0;width:50px;height:50px;",s.default.small,"{width:40px;height:40px;}"),t.linkClass=(0,a.css)("font-weight:",o.default.weight.bold,";text-decoration:underline 1px;text-underline-offset:2px;@media (hover:hover){&:hover{text-decoration:none;}}"),t.storylinesMenuShadowClass=(0,a.css)("&::after{content:'';position:absolute;top:0;left:0;height:100%;width:100%;z-index:-1;box-shadow:0 0 transparent,0 0 transparent,1px 3px 6px #00000026;opacity:0;transition:opacity 200ms ease-out;@media (prefers-color-scheme:dark){.NYTApp &{box-shadow:none;}}}"),t.storylinesMenuApplyShadowClass=(0,a.css)("border-bottom:1px solid transparent;&::after{opacity:1;}@media (prefers-color-scheme:dark){.NYTApp &{border-bottom:1px solid ",r.color.stroke.quaternary,";}}"),t.audioAppAsBannerClass=(0,a.css)("width:calc(100% - 40px);max-width:600px;margin:0 auto;min-height:75px;display:flex;align-items:center;border-bottom:1px solid transparent;"),t.hybridAudioPromoBannerClass=(0,a.css)("position:fixed;width:100%;top:env(safe-area-inset-top,0);left:0;z-index:",l.default.zIndex.navigation,";background-color:",r.color.background.elevated,";"),t.bannerWrapperClass=(0,a.css)("border-bottom:1px solid transparent;"),t.withBorderClass=(0,a.css)("border-bottom:1px solid ",r.color.stroke.quaternary,";"),t.hideOnAndroidClass=(0,a.css)(".NYTApp.ANDROID &{display:none;}")},rNEd:function(e,t,n){"use strict";n.d(t,"a",(function(){return _}));var i,a=n("VkAN"),o=n.n(a),r=n("gcR/"),s=n.n(r),l=n("lSNA"),c=n.n(l),u=(n("q1tI"),n("eFc+")),d=n.n(u),p=n("XlcC"),f=n("yEZI"),m=n.n(f),h=n("Jqp9"),g=n("HTd6"),y=n("wXC7"),v=n.n(y),b=Object(h.css)("font-family:",v.a.font.karnakBase,";font-weight:",v.a.font.weight.medium,";",v.a.breakpoint.medium,"{font-size:1.8rem;line-height:1.33;}");function _(e){var t=e.data,n=e.className,i=e.isFirstParagraph,a=e.isFirstTextAfterHeading2Block,o=Object(h.useTheme)(),r=o.treatment,l=o.noFollowExternalLinks,u=o.onPageDeeplinks,d="guide"===r&&(i||a),f=Object(h.cx)(n,c()({},b,d)),g=Object(p.createMapInlineUnionWithOptions)({noFollowExternalLinks:l,onPageDeeplinks:u});return s()(m.a,{className:f},void 0,t.content.map(g))}_.displayName="ParagraphBlock",_.defaultProps={data:null,className:void 0,isFirstParagraph:!1,isFirstTextAfterHeading2Block:!1},_.fragments={data:d()(i||(i=o()(["\n    fragment ParagraphBlock_data on ParagraphBlock {\n      textAlign\n      content {\n        ...TextInline_content\n      }\n    }\n    ","\n  "])),g.a.fragments.content)}},raa0:function(e,t,n){"use strict";var i=n("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.voxPopImageOverrideClass=t.paragraphOverrideClass=t.opinionLabelOverrideClass=t.linkPostChildrenClass=t.interactiveOverrideClass=t.BlockClasses=void 0;var a=i(n("lSNA")),o=n("Jqp9"),r=n("3sMT"),s=i(n("wXC7")),l=n("p3S2");t.paragraphOverrideClass=(0,o.css)("margin-left:26px;margin-right:26px;"),t.interactiveOverrideClass=(0,o.css)(".interactive-content,.margins-v{margin:1rem auto;",s.default.breakpoint.medium,"{margin:1.5rem auto 2rem;}}"),t.voxPopImageOverrideClass=(0,o.css)("width:calc(100% - 40px);> figcaption{margin-left:0;}",s.default.breakpoint.small,"{margin-left:auto;margin-right:auto;max-width:600px;}"),t.linkPostChildrenClass=(0,o.css)("cursor:pointer;"),t.opinionLabelOverrideClass=(0,o.css)("font-size:",s.default.font.size(15),";line-height:",s.default.font.size(30),";color:",r.color.content.tertiary,";margin-bottom:0;",s.default.breakpoint.medium,"{font-size:",s.default.font.size(16),";line-height:",s.default.font.size(30),";}"),t.BlockClasses={ParagraphBlock:(0,a.default)({},l.THEMES.STORYLINE_FEED,{carousel:(0,o.css)("&:first-of-type{display:inline;}")}),Heading3Block:{FACT_CHECK:(0,o.css)("& span{background-color:",r.color.signal.highlight,";padding:6px 9px 4px 9px;}"),default:null},DetailBlock:{FACT_CHECK:{default:(0,o.css)("&:first-of-type{margin-bottom:30px;font-size:",s.default.font.size(18),";}"),liveSplitLayout:(0,o.css)("&:first-of-type{margin-bottom:30px;font-size:",s.default.font.size(18),";line-height:",s.default.font.size(20),";}")},default:null}}},rjmw:function(e,t,n){"use strict";var i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.config=void 0;var a=i(n("FY2l")),o=n("djNW");t.config={name:"gatewayTopperLoginPrompt",onlyTrackWhenVisible:!1,fallback:null,campaigns:{DEFAULT:{content:function(){return{loggedOut:!0}}},LOGGED_IN:{content:function(){return{loggedOut:!1}}},LOGGED_OUT:{content:function(){return{loggedOut:!0,clickThroughURI:(0,a.default)("https://myaccount.nytimes.com/auth/login?response_type=cookie&client_id=freex&asset=RegiWallStandalone&application=Free_Experience&reload=3").withCampaignID({defaultCampaignID:"7JFJX"}).withRedirectUri({uri:(0,a.default)("https://www.nytimes.com/subscription/onboarding-offer").withCampaignID({defaultCampaignID:"7JFJX"}).withRedirectUri().withExitUri().toString()}).toString()}},tracking:{module:{name:"gatewayTopper",context:"GatewayTopperLoginPrompt",label:"LOGGED_OUT",element:{name:o.Action.LogIn,label:"Log in",url:"https://myaccount.nytimes.com/auth/login?response_type=cookie&client_id=freex&asset=RegiWallStandalone&application=Free_Experience&reload=3&redirect_uri=https%3A%2F%2Fwww.nytimes.com%2Fsubscription%2Fonboarding-offer%3FcampaignID%3D7JFJX%26EXIT_URI%3Dhttps%253A%252F%252F"}}}},LOGGED_OUT_WEBVIEW:{content:function(){return{loggedOut:!0,clickThroughURI:"nytxwd://login"}},tracking:{module:{name:"gatewayTopper",context:"GatewayTopperLoginPrompt",label:"LOGGED_OUT_WEBVIEW",element:{name:o.Action.LogIn,label:"Log in",url:"nytxwd://login"}}}}}}},rleM:function(e,t,n){"use strict";var i,a=n("gcR/"),o=n.n(a),r=n("J4zp"),s=n.n(r),l=n("VkAN"),c=n.n(l),u=n("MlQP"),d=n("T25G"),p=n("C/YW"),f=n.n(p),m=n("eFc+"),h=n.n(m),g=n("PgO9"),y=n("q1tI"),v=n("Kxyt"),b=n("HUmG"),_=n("5DNu"),w=n("X6oL"),x=n("oXTd"),k=n("+zxi");var O=h()(i||(i=c()(["\n  query NewsletterAutoSignupQuery($productCode: String) {\n    newsletterConfig(newsletterId: $productCode) {\n      id\n      title\n      newsletterId\n      allowedEntitlement\n      isOnsiteFreeTrialEnabled\n      subscriptionPageLink\n    }\n  }\n"]))),T=function(e){var t=e.newsletter,n=e.onSignup;t.signup({signupFormVersion:x.i.newsletterGridIndexPage}).then((function(e){var i=t.getData().subscriptionPageLink;if(e.subscriptionNeeded&&i){var a=Object(k.a)(i,{ref:x.j.newsletterGridIndexPage});window.location.assign(a)}else e.success&&n(e,t)}))};t.a=function(e){var t=e.onSignup,n=e.pageLoading,i=Object(v.useApolloClient)(),a=Object(y.useRef)(t);a.current=t;var r=Object(g.a)().user,l=!r,c=function(e){var t=e.user;return null!==t&&!Object(b.d)(t)}({user:r}),p=Object(y.useState)(!1),m=s()(p,2),h=m[0],x=m[1],k=Object(y.useRef)({handleSignup:null}),C=Object(y.useState)(null),E=s()(C,2),S=E[0],P=E[1],I=Object(w.useTracking)().trackEvent;Object(y.useEffect)((function(){var e=function(){var e,t=new URLSearchParams(window.location.search),n="true"===t.get("newsletter_signup"),i=decodeURIComponent(null!==(e=t.get("product_code"))&&void 0!==e?e:"");return n&&Object(d.isValidNewsletterCode)(i)?i:null}();e&&(I(Object(_.a)({clientId:"",newsletterName:"",productCode:e,label:"one click"})),i.query({query:O,variables:{productCode:e}}).then((function(e){var t=e.data,n=null==t?void 0:t.newsletterConfig;n&&P(Object(u.getNewsletterProduct)(n))})))}),[i,I]);var M=Object(y.useRef)(!1);return Object(y.useEffect)((function(){l||!S||n||M.current||(M.current=!0,c?(k.current={handleSignup:T},x(!0)):T({newsletter:S,onSignup:a.current}))}),[c,S,l,n]),{loginModal:Object(y.useMemo)((function(){return c&&S?o()(f.a,{isOpen:h,handleClose:function(){return x(!1)},onLogin:function(){window.location.reload()},host:vi.env.AUTH_HOST,newsletter:S}):null}),[c,h,S])}}},rnec:function(e,t,n){"use strict";var i=n("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=i(n("q1tI")),o=n("3sMT");t.default=function(){return a.default.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 20 20",fill:"none"},a.default.createElement("path",{d:"M19.25 10C19.25 15.1086 15.1086 19.25 10 19.25C4.89137 19.25 0.75 15.1086 0.75 10C0.75 4.89137 4.89137 0.75 10 0.75C15.1086 0.75 19.25 4.89137 19.25 10Z",stroke:o.color.stroke.primary,strokeWidth:"1.5"}),a.default.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M11 5.66699H13.3333V14.3337H11V5.66699Z",fill:o.color.content.secondary}),a.default.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M6.66797 5.66699H9.0013V14.3337H6.66797V5.66699Z",fill:o.color.content.secondary}))}},s2os:function(e,t,n){"use strict";n.d(t,"b",(function(){return a})),n.d(t,"a",(function(){return o}));var i=n("Jqp9"),a=Object(i.css)("display:none;"),o=Object(i.css)("&::before,&::after{display:table;clear:both;content:'';line-height:0;}")},s6ck:function(e,t,n){"use strict";var i=n("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.Heading3AsH2=void 0;var a=i(n("Bi8q"));t.Heading3AsH2=a.default.withComponent("h2",{target:"e12nqm5i0"}),t.default=a.default},sCLo:function(e,t,n){"use strict";var i=this&&this.__makeTemplateObject||function(e,t){return Object.defineProperty?Object.defineProperty(e,"raw",{value:t}):e.raw=t,e};Object.defineProperty(t,"__esModule",{value:!0}),t.dockBorder=t.button=t.subHeader=t.smallSubHeader=t.header=t.mainContent=t.headerText=void 0;var a,o,r,s,l,c,u,d=n("Jqp9"),p=n("lVLo");t.headerText=(0,d.css)(a||(a=i(["\n  font-family: ",";\n  font-size: 15px;\n  font-weight: ",";\n  line-height: 11px;\n  margin: auto 0;\n  margin-left: 20px;\n"],["\n  font-family: ",";\n  font-size: 15px;\n  font-weight: ",";\n  line-height: 11px;\n  margin: auto 0;\n  margin-left: 20px;\n"])),p.fonts.franklin,p.fontWeights.bold),t.mainContent=(0,d.css)(o||(o=i(["\n  display: flex;\n  background-color: ",";\n  font-family: ",";\n  max-width: 240px;\n  border-radius: 4px;\n  height: 166px;\n  padding: 20px;\n  flex-direction: column;\n  margin: 0 auto 20px;\n  align-self: flex-start;\n\n  @media (min-width: ","px) {\n    max-width: unset;\n    width: calc(100% - 80px);\n  }\n\n  @media (min-width: ","px) {\n    flex-direction: row;\n    max-width: 1180px;\n    height: 100px;\n    justify-content: space-between;\n  }\n\n  @media (min-width: ","px) {\n    margin: 0 auto 20px auto;\n  }\n"],["\n  display: flex;\n  background-color: ",";\n  font-family: ",";\n  max-width: 240px;\n  border-radius: 4px;\n  height: 166px;\n  padding: 20px;\n  flex-direction: column;\n  margin: 0 auto 20px;\n  align-self: flex-start;\n\n  @media (min-width: ","px) {\n    max-width: unset;\n    width: calc(100% - 80px);\n  }\n\n  @media (min-width: ","px) {\n    flex-direction: row;\n    max-width: 1180px;\n    height: 100px;\n    justify-content: space-between;\n  }\n\n  @media (min-width: ","px) {\n    margin: 0 auto 20px auto;\n  }\n"])),p.colors.whiteDarkContentPrimary,p.fonts.franklin,p.widths.verySmall,p.widths.mediumLarge,p.widths.large),t.header=(0,d.css)(r||(r=i(["\n  font-size: 14px;\n  font-weight: ",";\n  line-height: 18.2px;\n  color: ",";\n  margin: 0;\n  width: 240px;\n\n  @media (min-width: ","px) {\n    width: 100%;\n    margin: 5px auto 0;\n  }\n\n  @media (min-width: ","px) {\n    font-size: 18px;\n    line-height: 27px;\n  }\n"],["\n  font-size: 14px;\n  font-weight: ",";\n  line-height: 18.2px;\n  color: ",";\n  margin: 0;\n  width: 240px;\n\n  @media (min-width: ","px) {\n    width: 100%;\n    margin: 5px auto 0;\n  }\n\n  @media (min-width: ","px) {\n    font-size: 18px;\n    line-height: 27px;\n  }\n"])),p.fontWeights.semiBold,p.colors.veryDarkGrey,p.widths.verySmall,p.widths.mediumLarge),t.smallSubHeader=(0,d.css)(s||(s=i(["\n  font-size: 10px;\n  line-height: 14px;\n"],["\n  font-size: 10px;\n  line-height: 14px;\n"]))),t.subHeader=(0,d.css)(l||(l=i(["\n  font-size: 11px;\n  line-height: 15.4px;\n  font-weight: ",";\n  max-width: 694px;\n  color: ",";\n  margin: 20px 0;\n  width: 240px;\n\n  @media (min-width: ","px) {\n    width: 100%;\n  }\n\n  @media (min-width: ","px) {\n    font-size: 13px;\n    line-height: 19.5px;\n    margin: 0;\n  }\n"],["\n  font-size: 11px;\n  line-height: 15.4px;\n  font-weight: ",";\n  max-width: 694px;\n  color: ",";\n  margin: 20px 0;\n  width: 240px;\n\n  @media (min-width: ","px) {\n    width: 100%;\n  }\n\n  @media (min-width: ","px) {\n    font-size: 13px;\n    line-height: 19.5px;\n    margin: 0;\n  }\n"])),p.fontWeights.medium,p.colors.veryDarkGrey,p.widths.verySmall,p.widths.mediumLarge),t.button=(0,d.css)(c||(c=i(["\n  text-decoration: none;\n  font-size: 12px;\n  font-weight: ",";\n  line-height: 14.4px;\n  color: ",";\n  background-color: ",";\n  margin-top: 10px;\n  display: flex;\n  flex-direction: column;\n  justify-content: center;\n  text-align: center;\n  border-radius: 4px;\n  cursor: pointer;\n  width: 220px;\n  height: 38px;\n  padding: 11.8px 10px;\n  margin: 0 0 20px 0;\n  letter-spacing: -0.05px;\n  flex: 0;\n\n  @media (min-width: ","px) and (max-width: ","px) {\n    align-self: center;\n  }\n\n  @media (min-width: ","px) {\n    max-width: 191px;\n    height: 32px;\n    flex: 1;\n    padding: 0;\n    margin-top: 16px;\n    align-self: center;\n    font-size: 14px;\n    line-height: 18.2px;\n    font-weight: ",";\n  }\n"],["\n  text-decoration: none;\n  font-size: 12px;\n  font-weight: ",";\n  line-height: 14.4px;\n  color: ",";\n  background-color: ",";\n  margin-top: 10px;\n  display: flex;\n  flex-direction: column;\n  justify-content: center;\n  text-align: center;\n  border-radius: 4px;\n  cursor: pointer;\n  width: 220px;\n  height: 38px;\n  padding: 11.8px 10px;\n  margin: 0 0 20px 0;\n  letter-spacing: -0.05px;\n  flex: 0;\n\n  @media (min-width: ","px) and (max-width: ","px) {\n    align-self: center;\n  }\n\n  @media (min-width: ","px) {\n    max-width: 191px;\n    height: 32px;\n    flex: 1;\n    padding: 0;\n    margin-top: 16px;\n    align-self: center;\n    font-size: 14px;\n    line-height: 18.2px;\n    font-weight: ",";\n  }\n"])),p.fontWeights.bold,p.colors.white,p.colors.black,p.widths.verySmall,p.widths.medium,p.widths.mediumLarge,p.fontWeights.semiBold),t.dockBorder=(0,d.css)(u||(u=i(["\n  border-top: 1px solid ",";\n"],["\n  border-top: 1px solid ",";\n"])),p.colors.veryDarkGrey)},sKBQ:function(e,t,n){"use strict";var i=n("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=i(n("q1tI")),o=function(){return a.default.createElement("svg",{width:"26",height:"26",viewBox:"0 0 26 26",fill:"none"},a.default.createElement("rect",{width:"26",height:"26",fill:"black",fillOpacity:"0"}),a.default.createElement("mask",{id:"mask0","mask-type":"alpha",maskUnits:"userSpaceOnUse",x:"6",y:"9",width:"14",height:"9"},a.default.createElement("path",{d:"M8.0275 9.30566L13 14.2673L17.9725 9.30566L19.5 10.8332L13 17.3332L6.5 10.8332L8.0275 9.30566Z",fill:"white"})),a.default.createElement("g",{mask:"url(#mask0)"},a.default.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M0 0H26V26H0V0Z",fill:"black",fillOpacity:"0.54"})))};o.displayName="DownArrow";t.default=o},sQQE:function(e,t,n){"use strict";var i=n("gcR/"),a=n.n(i),o=(n("q1tI"),n("wXC7")),r=n.n(o),s=function(e){var t=e.className,n=e.ariaHidden;return a()("svg",{"aria-hidden":n,width:"19",height:"19",viewBox:"0 0 19 19",className:t},void 0,a()("path",{d:"M18.04 5.293h-2.725c.286-.34.493-.74.606-1.17a2.875 2.875 0 0 0-.333-2.322A2.906 2.906 0 0 0 13.64.48a3.31 3.31 0 0 0-2.372.464 3.775 3.775 0 0 0-1.534 2.483l-.141.797-.142-.847A3.745 3.745 0 0 0 7.927.923 3.31 3.31 0 0 0 5.555.459 2.907 2.907 0 0 0 3.607 1.78a2.877 2.877 0 0 0-.333 2.321c.117.429.324.828.606 1.171H1.155a.767.767 0 0 0-.757.757v3.674a.767.767 0 0 0 .757.757h.424v7.53A1.01 1.01 0 0 0 2.588 19h14.13a1.01 1.01 0 0 0 1.01-.959v-7.56h.424a.758.758 0 0 0 .757-.757V6.05a.759.759 0 0 0-.868-.757Zm-7.196-1.625a2.665 2.665 0 0 1 1.01-1.736 2.24 2.24 0 0 1 1.574-.313 1.817 1.817 0 0 1 1.211.818 1.857 1.857 0 0 1 .202 1.453 2.2 2.2 0 0 1-.838 1.191h-3.431l.272-1.413ZM4.576 2.386a1.837 1.837 0 0 1 1.221-.817 2.23 2.23 0 0 1 1.565.313 2.624 2.624 0 0 1 1.01 1.736l.242 1.453H5.182a2.2 2.2 0 0 1-.838-1.19 1.857 1.857 0 0 1 .202-1.495h.03ZM1.548 6.424h7.54V9.39h-7.58l.04-2.967Zm1.181 4.128h6.359v7.287H2.729v-7.287Zm13.777 7.287h-6.348v-7.307h6.348v7.307Zm1.181-8.468h-7.53V6.404h7.53V9.37Z",fill:r.a.color.gray10,fillRule:"nonzero"}))};s.displayName="GiftV2",s.defaultProps={className:void 0,ariaHidden:void 0},t.a=s},sTKe:function(e,t,n){"use strict";var i=n("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.checkAlreadyReceiving=void 0;var a=i(n("2ePO")),o=t.checkAlreadyReceiving=function(e,t){var n,i,o,r=t.productCode,s=t.allowedEntitlement,l=!(null==e||null===(n=e.userInfo)||void 0===n||null===(i=n.entitlements)||void 0===i||!i.length),c=(0,a.default)(null==e||null===(o=e.newsletterSubscriptions)||void 0===o?void 0:o.newsletters)[r];return!!c&&(!s||(!!l||!(null==c||!c.isFreeTrial)))};t.default=o},sWm8:function(e,t,n){"use strict";var i=n("TqRt"),a=n("cDf5");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=i(n("J4zp")),r=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=a(e)&&"function"!=typeof e)return{default:e};var n=m(t);if(n&&n.has(e))return n.get(e);var i={__proto__:null},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var r in e)if("default"!==r&&{}.hasOwnProperty.call(e,r)){var s=o?Object.getOwnPropertyDescriptor(e,r):null;s&&(s.get||s.set)?Object.defineProperty(i,r,s):i[r]=e[r]}return i.default=e,n&&n.set(e,i),i}(n("q1tI")),s=n("boCj"),l=(i(n("17x9")),i(n("kvrv"))),c=i(n("cc1G")),u=i(n("RxXP")),d=i(n("M8e9")),p=n("tDj8"),f=n("7zGq");function m(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(m=function(e){return e?n:t})(e)}function h(e){var t=e.items,n=e.trackEvent,i=e.parentUrl,a=e.title,m=e.isPeeking,h=e.trackLinkInteraction,g=(0,r.useState)(0),y=(0,o.default)(g,2),v=y[0],b=y[1],_=(0,r.useState)(new Set),w=(0,o.default)(_,2),x=w[0],k=w[1],O=(0,r.useRef)(null),T=t.length,C=(0,r.useCallback)((function(e){h(e,v,T)}),[v,T,h]),E=function(e){e&&!x.has(v)&&n&&(n({event:"impression",module:{label:i},card:{index:v+1},block:{length:T}}),k((function(e){return e.add(v)})))};return r.default.createElement(r.default.Fragment,null,r.default.createElement(l.default,{ref:O,id:"storyline-context-container",a11yLabel:"Card ".concat(v+1," of ").concat(T),onSwipe:b,scrolledIndex:v,isPeeking:m},t.map((function(e){return r.default.createElement(s.InView,{onChange:E,threshold:1,key:e.text},r.default.createElement(c.default,{title:a,items:[e],trackLink:C}))}))),r.default.createElement("div",{className:p.swiperNavClass},r.default.createElement(u.default,{index:v,length:T}),r.default.createElement(d.default,{ariaControls:"storyline-context-container",index:v,length:T,handleNavLeft:function(){return(0,f.handleNavLeft)(O.current)},handleNavRight:function(){return(0,f.handleNavRight)(O.current)}})))}h.defaultProps={trackEvent:null};t.default=h},sg0Q:function(e,t,n){"use strict";var i=n("TqRt"),a=n("cDf5");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=i(n("lwsE")),r=i(n("W8MJ")),s=i(n("a1gu")),l=i(n("Nsbk")),c=i(n("7W2i")),u=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=a(e)&&"function"!=typeof e)return{default:e};var n=v(t);if(n&&n.has(e))return n.get(e);var i={__proto__:null},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var r in e)if("default"!==r&&{}.hasOwnProperty.call(e,r)){var s=o?Object.getOwnPropertyDescriptor(e,r):null;s&&(s.get||s.set)?Object.defineProperty(i,r,s):i[r]=e[r]}return i.default=e,n&&n.set(e,i),i}(n("q1tI")),d=(i(n("17x9")),n("Jqp9")),p=i(n("yEZI")),f=i(n("0oBV")),m=i(n("HvIc")),h=i(n("sKBQ")),g=i(n("ibW7")),y=n("nqWJ");function v(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(v=function(e){return e?n:t})(e)}function b(e,t,n){return t=(0,l.default)(t),(0,s.default)(e,function(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return function(){return!!e}()}()?Reflect.construct(t,n||[],(0,l.default)(e).constructor):t.apply(e,n))}var _=function(e){function t(){var e;(0,o.default)(this,t);for(var n=arguments.length,i=new Array(n),a=0;a<n;a++)i[a]=arguments[a];return(e=b(this,t,[].concat(i))).state={isRevealed:e.props.isInEditor},e.toggleReveal=function(){var t=e.props,n=t.handleEvent,i=t.contentType;e.setState((function(e){return{isRevealed:!e.isRevealed}})),n&&n("click",{eventData:{trigger:i}})},e.handleKeyPress=function(t){"Enter"===t.key&&e.toggleReveal()},e}return(0,c.default)(t,e),(0,r.default)(t,[{key:"render",value:function(){var e=this.props,t=e.isInAMP,n=e.className,i=e.contentType;if(t)return null;var a=this.state.isRevealed?"show":"hide",o=m.default.filter((function(e){return e.key===i}))[0]||{};return u.default.createElement("div",{className:(0,d.cx)(n,y.readerContextClass)},u.default.createElement("div",{className:y.containerClass,contentEditable:!1,onClick:this.toggleReveal,onKeyPress:this.handleKeyPress},u.default.createElement("div",null,u.default.createElement("div",{className:y.labelClass},o.label),u.default.createElement("div",{className:y.titleClass},o.title)),u.default.createElement("div",{className:y.arrowClass,tabIndex:"0",role:"button","aria-label":"expand","aria-expanded":this.state.isRevealed?"true":"false"},this.state.isRevealed?u.default.createElement(g.default,null):u.default.createElement(h.default,null))),u.default.createElement(p.default,{className:(0,d.cx)(y.bodyClass,a),dangerouslySetInnerHTML:{__html:o.body}}))}}])}(u.Component);_.displayName="ReaderContext",_.defaultProps={className:void 0,contentType:"",isInEditor:!1,isInAMP:!1,handleEvent:void 0};t.default=(0,f.default)(_)},shGR:function(e,t,n){"use strict";var i=n("VkAN"),a=n.n(i),o=n("gcR/"),r=n.n(o),s=(n("q1tI"),n("eFc+")),l=n.n(s),c=n("InUh"),u=n.n(c),d=n("Jqp9"),p=n("534C"),f=n.n(p),m=n("wXC7"),h=n.n(m),g=n("1rl3"),y=n("B0Ek"),v=n("Ymd4"),b=n("WPUH"),_=n("uoyi"),w=n("6NOd"),x=n("jOYC"),k=n("4uw1"),O=n("pCca"),T=n("3sMT"),C=n("nosR"),E=n("nGF/"),S=n.n(E),P=n("139F"),I=n.n(P),M=n("y1Vo"),A=Object(d.css)(h.a.breakpoint.mediumLarge,"{height:100vh;padding-bottom:0;}padding-bottom:150%;"),j=Object(d.css)("@media (max-width:",h.a.breakpoint.width.mediumLarge-1,"px){padding-bottom:0 !important;height:","calc(100vh - ".concat(g.VI_NAV_BAR_HEIGHT,")")," !important;}",A,";"),N=Object(d.css)(h.a.breakpoint.small,"{margin-bottom:43px;}margin-bottom:37px;"),L=Object(d.css)("display:block;margin-right:7px;color:",T.color.content.quaternary,";font-family:",h.a.font.serifBase,";font-size:0.875rem;line-height:1.125rem;");function D(e){var t,n,i,a,o=e.data,s=e.containerClass,l=e.imageLoadedHandler,c=e.textOverlay,u=e.isMobileBelowLede,p=Object(O.a)().breakpoint,f=(t=o.media.renditions,i=(n=p)<=600,a=t.filter((function(e){return/\.mp4$/.test(e.url)})),Object(C.findVideoRenditionOfBestFitUrl)(a,n,i)),m=o.media.promotionalMedia&&o.media.promotionalMedia.promotionalMedia||o.media.promotionalMedia,h=function(e,t){var n=t<=600,i=e.filter((function(e){return/\.mp4$/.test(e.url)}));if(0===i.length)throw new Error("An mp4 video is required");return Object(C.findVideoRenditionOfBestFit)(i,t,n)}(o.media.renditions,p),g=(null==h?void 0:h.aspectRatio)||o.media.aspectRatio||"".concat(h.width,":").concat(h.height),y=function(e,t,n){var i=n<=600,a=Object(C.findRenditionsByRatio)(e,t);return Object(C.findVideoRenditionOfBestFitUrl)(a,n,i)}(m.crops,g,p),v="",b=o.media.summary;if(o.media.bylines&&o.media.bylines.length){var _=o.media.bylines.find((function(e){return e.renderedRepresentation}));v=_&&_.renderedRepresentation}return r()("div",{className:Object(d.cx)(s,N,"sizeFull")},void 0,r()(S.a,{src:f,imgFallback:y,imgLoading:y,className:u?A:j,ratio:p<1024?g:"",onLoad:l,textOverlay:c}),(v||b)&&r()(M.Caption,{},void 0,b&&r()("span",{className:Object(d.cx)(L),dangerouslySetInnerHTML:{__html:b}}),v&&r()(I.a,{dangerouslySetInnerHTML:{__html:v}})))}D.displayName="HeaderCinemagraphWrapper",D.defaultProps={textOverlay:null,isMobileBelowLede:!1};var R,B=D,z=n("mGV9"),F=Object(d.css)("margin-top:0;",h.a.breakpoint.small,"{margin-top:0;}",h.a.breakpoint.mediumLarge,"{max-width:none;width:100%;}"),U=Object(d.css)("position:relative;",h.a.breakpoint.mediumLarge,"{background-color:#fff;height:100vh;}"),H=Object(d.css)("display:block;"),W=u()((function(){return Promise.all([n.e(177),n.e(109)]).then(n.bind(null,"swNt"))}),{loadableGenerated:{webpack:function(){return["swNt"]},modules:["./HeaderFullBleedVerticalVi"]}}),q="\n  ".concat(h.a.breakpoint.mediumLarge," {\n    &::first-letter {\n      margin-left: 0;\n    }\n\n    .balancedHeadline {\n      &::first-letter {\n        margin-left: 0;\n      }\n    }\n  }\n"),V={ImageBlock:b.a,VideoBlock:B},G=function(e){var t,n=e.data,i=e.collections,a=e.showMasthead,o=e.lastModified,s=Object(w.b)().mastheadStyleProps,l=Object(d.useTheme)(),c=Object(k.a)(),u=!1;n.ledeMedia&&(u=Object.prototype.hasOwnProperty.call(V,n.ledeMedia.__typename),t=V[n.ledeMedia.__typename]);var p=n.ledeMedia&&u&&r()(t,{className:F,data:n.ledeMedia,containerClass:U,isFullBleed:!0,showCaption:!1,lede:!0,useResponsiveMedia:!0,useMobileCrop:!0,isMobileBelowLede:n&&n.textPosition&&"MOBILE_BELOW_LEDE"===n.textPosition.mobile})||null,m=n.headline&&r()(v.a,{data:n.headline,customOffset:q,honorAlignment:!1}),h=l&&l.section||"default",b=s||{},O=b.hideSearch,T=b.semitransparentAtMobile,C=b.hideUsernameAtSmallViewport,E=b.transparent,S=b.iconStyle,P=b.alignment,I=b.variant,M=b.isVerticalFullBleed,A=b.isFullBleed,j=a?r()(y.a,{section:h,hideSearch:O,semitransparentAtMobile:T,hideUsernameAtSmallViewport:C,transparent:E,iconStyle:S,alignment:P,variant:I,isVerticalFullBleed:M,isFullBleed:A}):null,N=r()(f.a,{collections:i}),L="opinion"===h,D="Visual Stacks"===(l&&l.storyFormat),R=(n.label||L||N)&&r()(z.a,{data:n.label,signalOpinion:L,timesExclusive:N,isVisualStacks:D,className:H}),B=n.summary&&r()(_.a,{data:n.summary}),G=Object(g.shouldUseHeaderV2Position)({textPosition:null==n?void 0:n.textPosition,lastModified:o,isVertical:!0});return r()(W,{headerMedia:p,masthead:j,label:R,headline:m,summary:B,content:n,baseColumnStyle:x.a,textPosition:null==n?void 0:n.textPosition,isVisualStacks:D,isVi:!c,isHybrid:c,useHeaderV2Position:G})};G.displayName="HeaderFullBleedVerticalBlock",G.defaultProps={data:null,collections:null,showMasthead:!0,lastModified:void 0},G.fragments={data:l()(R||(R=a()(['\n    fragment HeaderFullBleedVerticalBlock_data on HeaderFullBleedVerticalBlock {\n      headlineColor\n      backgroundColor\n      displayOverride\n      alignment\n      gradientEnabled\n      mobileHeadlineColor\n      label {\n        ...LabelBlock_data\n      }\n      headline {\n        ...Heading1Block_data\n      }\n      summary {\n        ...SummaryBlock_data\n      }\n      textPosition {\n        mobile\n        desktop\n      }\n      ledeMedia {\n        __typename\n        ... on ImageBlock {\n          size\n          media {\n            id\n            crops(renditionNames: ["articleLarge", "jumbo", "superJumbo", "mobileMasterAt3x"]) {\n              bleed {\n                percentTop\n                percentLeft\n                percentRight\n                percentBottom\n              }\n              renditions {\n                url\n                name\n                width\n                height\n              }\n            }\n            legacyHtmlCaption\n            altText\n            credit\n          }\n        }\n        ... on VideoBlock {\n          media {\n            id\n            summary\n            aspectRatio\n            renditions {\n              width\n              height\n              url\n              aspectRatio\n              type\n            }\n            bylines {\n              renderedRepresentation\n            }\n            promotionalMedia {\n              ... on Image {\n                id\n                crops {\n                  name\n                  renditions {\n                    width\n                    height\n                    url\n                  }\n                }\n              }\n              ... on Video {\n                id\n                promotionalMedia {\n                  ... on Image {\n                    id\n                    crops {\n                      name\n                      renditions {\n                        width\n                        height\n                        url\n                      }\n                    }\n                  }\n                }\n              }\n            }\n          }\n        }\n      }\n    }\n    ',"\n    ","\n    ","\n  "])),v.a.fragments.data,z.a.fragments.data,_.a.fragments.data)};t.a=G},sj7d:function(e,t,n){"use strict";var i=n("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.overlayClass=t.modalClass=t.dismissIconClass=t.dismissClass=t.bodyOpenClass=void 0;var a=n("Jqp9"),o=i(n("wXC7"));t.bodyOpenClass=(0,a.css)("position:fixed;width:100%;overflow:hidden;"),t.overlayClass=(0,a.css)("display:block;position:fixed;box-sizing:border-box;top:0;right:0;bottom:0;left:0;width:100%;height:100%;z-index:",o.default.zIndex.overlay,";background-color:rgba(0,0,0,0.5);opacity:1;"),t.modalClass=(0,a.css)("position:fixed;top:0;left:0;right:0;bottom:0;overflow:auto;width:100%;box-shadow:none;border-radius:0;background-color:",o.default.color.white,";font-family:",o.default.font.franklinBase,";-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale;color:",o.default.color.black,";z-index:",o.default.zIndex.interstitialModal,";",o.default.breakpoint.small,"{width:450px;left:50%;top:50%;right:unset;bottom:unset;transform:translate(-50%,-50%);margin:0 auto;overflow:unset;position:absolute;border-radius:3px;box-shadow:0 0 8px rgba(0,0,0,0.2);}"),t.dismissClass=(0,a.css)("position:absolute;top:1px;right:0;padding:16px;cursor:pointer;background-color:",o.default.color.white,";"),t.dismissIconClass=(0,a.css)("display:block;width:15px;height:15px;")},sn4R:function(e,t,n){"use strict";n.d(t,"a",(function(){return g}));var i,a=n("gcR/"),o=n.n(a),r=n("q1tI"),s=n("g+Cy"),l=n("GB3f"),c=n("boCj"),u=n("bFSk"),d=n("Jqp9"),p=n("wXC7"),f=n.n(p),m=Object(d.css)("width:25px;height:25px;",f.a.button.transparent," padding:10px;"),h=Object(d.css)("padding:0 10px;height:55px;position:absolute;left:0;top:0;align-items:center;justify-content:center;background:",f.a.color.white,";display:none;",f.a.breakpoint.large,"{display:flex;}");function g(e){var t=e.pageType,n=e.region,a=e.ruleName,d=e.parentUri,p=Object(l.d)(),f="https://www.nytimes.com".concat(p),g=Object(u.a)({name:a,template:"storyline_menu_home_logo",region:n,parentUri:d,pageType:t}),y=Object(r.useMemo)((function(){return g.trackImpression()}),[g]),v=Object(r.useMemo)((function(){return g.trackInteraction()}),[g]);return o()("span",{className:h},void 0,o()(c.InView,{as:"a",onChange:function(e){e&&y({card:{url:f}})},triggerOnce:!0,href:p,"data-testid":"tlogo-home-link","aria-label":"The New York Times Home Page",onClick:function(e){v(e,p,{eventData:{type:"url-click",trigger:"item"},item:{url:f,uri:null}})}},void 0,i||(i=o()(s.a,{className:m}))))}g.displayName="HomepageLink"},solT:function(e,t,n){"use strict";n.d(t,"a",(function(){return i})),n.d(t,"b",(function(){return a}));var i="HeaderMultimediaBlock";function a(e){try{return e.__typename===i&&"VideoBlock"===e.media.__typename}catch(e){return!1}}},stgn:function(e,t,n){"use strict";var i=n("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.widths=t.isSpotifyPodcastUrl=t.heights=t.getSpotifyPlayerType=t.getSpotifyIframeAttributes=t.createSpotifyEmbedUrl=void 0;var a=i(n("SA+Z")),o=t.widths={DEFAULT:"600px",VISUAL:"300px"},r=t.heights={music:{DEFAULT:"80px",VISUAL:"380px"},podcast:{DEFAULT:"152px",VISUAL:"232px"}},s=t.isSpotifyPodcastUrl=function(e){return/\b\/episode|show\b/.test(e)},l=t.getSpotifyPlayerType=function(e){return s(e)?"podcast":"music"},c=t.createSpotifyEmbedUrl=function(e){if(/\b\/embed(-podcast)?\/\b/.test(e))return e;var t=e.split(/\/\/?/),n=(0,a.default)(t),i=n[0],o=n[1],r=n.slice(2);return"".concat(i,"//").concat(o,"/embed/").concat(r.join("/"))};t.getSpotifyIframeAttributes=function(e){var t=e.spotifyEmbedUrl,n=e.playerStyle;return{src:c(t),width:o[n],height:r[l(t)][n]}}},t7Wz:function(e,t,n){"use strict";var i=n("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t=e.block,n=e.storyline;return!!(t&&n&&(0,a.default)({storyline:n,block:t}))};var a=i(n("uJd7"))},t7vg:function(e,t,n){"use strict";var i=n("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.getFormattedText=t.default=void 0,t.hasLink=function(e){if("TextInline"!==e.__typename)return!1;return e.formats.some((function(e){return"LinkFormat"===e.__typename}))};var a=i(n("lSNA")),o=i(n("QILm")),r=i(n("q1tI")),s=(i(n("17x9")),i(n("WG9L"))),l=i(n("Jfsd")),c=i(n("RemB")),u=i(n("0Fvw")),d=i(n("PcXc")),p=i(n("7TTU")),f=i(n("H6qo")),m=["__typename"];function h(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function g(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?h(Object(n),!0).forEach((function(t){(0,a.default)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):h(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var y=/(\r|\n|\t|[\s]{2,})/g,v={LinkFormat:s.default,BoldFormat:l.default,ItalicFormat:c.default,DropcapFormat:u.default,SuperscriptFormat:d.default,SubscriptFormat:p.default},b=function(e){var t=e.content,n=t.text,i=t.formats,a=t.__typename,s=e.opts;if("LineBreakInline"===a)return r.default.createElement("br",null);var l=n.split(y).map((function(e){return y.test(e)?r.default.createElement(f.default,{key:e},e):e}));return(null==i?void 0:i.length)>0&&i.forEach((function(e){l=function(e,t){var n=e.__typename,i=(0,o.default)(e,m);return v[n]?r.default.createElement(v[n],i,t):null}(g(g({},e),{},{opts:s}),l)})),l};t.getFormattedText=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return void 0===t.blank&&(t.blank=!0),e?e.map((function(e,n){return r.default.createElement(b,{key:n.toString(),content:e,opts:t})})):null};b.defaultProps={opts:{},content:{}};t.default=b},tA6d:function(e,t,n){"use strict";var i=n("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=i(n("q1tI")),o=(i(n("17x9")),i(n("Kn2l"))),r=function(e){var t=e.children,n=e.related,i=e.displayStyle,r=e.className;return n?a.default.createElement(o.default,{related:n,displayStyle:i,className:r},t):null};r.displayName="EditableRelatedLinks",r.defaultProps={children:null,related:null,displayStyle:"STANDARD",className:void 0};t.default=r},tDj8:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.swiperNavClass=void 0;var i=n("Jqp9");t.swiperNavClass=(0,i.css)("display:flex;flex-direction:row;justify-content:center;position:relative;min-height:40px;")},tLpV:function(e,t,n){"use strict";var i=n("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.StyledRelatedLink=t.RelatedLinkTextWrapper=t.RelatedLinkSummary=t.RelatedLinkMediaWrapper=t.RelatedLinkLabel=t.RelatedLinkImage=t.RelatedLinkHeadline=t.RelatedLinkCaption=void 0;var a=n("Jqp9"),o=i(n("wXC7")),r=n("h58Z"),s=i(n("WThh")),l=n("6l8D"),c=n("3sMT"),u=(0,s.default)(["medium","small","mediumLarge"]),d=(0,a.themeFn)("displayStyle",{standard:function(e){return(0,a.css)("margin-right:10px;width:75px;min-width:75px;",e.theme.breakpointMap.medium,"{margin-right:15px;width:135px;min-width:135px;}")},expanded:function(e){return(0,a.css)("margin-bottom:15px;min-width:285px;",e.theme.breakpointMap.small,"{max-width:400px;margin-left:auto;margin-right:auto;}",e.theme.breakpointMap.medium,"{max-width:285px;margin-bottom:0;margin-right:15px;}")},compact:(0,a.css)("display:none;")}),p=(0,a.themeFn)("treatment",{none:(0,a.css)(),sponsored:function(e){return"standard"===e.theme.displayStyle?(0,a.css)("width:120px;min-width:120px;",e.theme.breakpointMap.medium,"{width:165px;min-width:165px;}"):(0,a.css)()},atHome:function(e){return 1===e.siblings||"single"===e.theme.displayStyle?(0,a.css)(u(e,{minWidth:[0,0,"360px"],maxWidth:["none","none","48%"],marginRight:[0,0,"4%"],marginLeft:["auto","auto",0]})," align-self:flex-start;margin-bottom:3px;",e.theme.breakpointMap.medium,"{margin-bottom:8px;}"):(0,a.css)(u(e,{minWidth:[0,0,"200px"],maxWidth:["none","none","none"],marginRight:[0,0,0]})," margin-bottom:3px;")}}),f=(t.RelatedLinkMediaWrapper=(0,a.styled)("div",{target:"e16ij5yr0"})(d,";",p,";"),(0,a.themeFn)("displayStyle",{standard:(0,a.css)("min-width:75px;"),expanded:(0,a.css)("min-width:285px;")})),m=(0,a.themeFn)("treatment",{none:(0,a.css)(),sponsored:(0,a.css)("min-width:120px;"),atHome:(0,a.css)("width:100%;min-width:0;")}),h=(t.RelatedLinkImage=(0,a.styled)("img",{target:"e16ij5yr1"})("width:100%;",f,";",m,";"),(0,a.themeFn)("treatment",{atHome:(0,a.css)("display:block;")})),g=(t.RelatedLinkCaption=(0,a.styled)("p",{target:"e16ij5yr2"})("display:none;color:",c.color.content.quaternary,";min-height:",o.default.font.size(12),";font-size:",o.default.font.size(10),";line-height:",o.default.font.size(12),";letter-spacing:0.2px;text-align:right;",h,";"),(0,a.themeFn)("displayStyle",{compact:(0,a.css)("color:",c.color.signal.editorial,";text-decoration:underline;&:hover,&:focus{text-decoration:none;}"),standard:(0,a.css)("color:",c.color.content.primary,";"),expanded:function(e){return(0,a.css)("color:",c.color.content.primary,";",e.theme.breakpointMap.medium,"{margin-bottom:7px;}")}})),y=(0,a.themeFn)("displayStyle",{compact:function(e){return"sponsored"===e.theme.treatment?(0,a.css)("font-family:",o.default.font.sponsoredBase,";line-height:",o.default.font.size(22),";",u(e,{fontSize:[18,19]}),";"):(0,a.css)("font-family:",o.default.font.serifBase,";font-weight:",o.default.font.weight.medium,";",u(e,{fontSize:[16,17],lineHeight:[22,23]}),";")},standard:function(e){return"sponsored"===e.theme.treatment?(0,a.css)("font-size:",o.default.font.size(18),";font-family:",o.default.font.sponsoredBase,";line-height:",o.default.font.size(22),";font-weight:",o.default.font.weight.mediumBold,";"):(0,a.css)("font-family:",o.default.font.serifMedium,";font-weight:",o.default.font.weight.medium,";",u(e,{fontSize:[16,19],lineHeight:[19,23]}),";")},expanded:function(e){return"sponsored"===e.theme.treatment?(0,a.css)("font-size:",o.default.font.size(18),";font-family:",o.default.font.sponsoredBase,";line-height:",o.default.font.size(22),";font-weight:",o.default.font.weight.bold,";"):(0,a.css)("font-family:",o.default.font.serifMedium,";font-weight:",o.default.font.weight.bold,";",u(e,{fontSize:[18,19],lineHeight:[22,23]}),";")}}),v=(0,a.themeFn)("treatment",{sponsored:function(e){return"compact"===e.theme.displayStyle?(0,a.css)("color:",c.color.signal.editorial,";"):(0,a.css)("color:",c.color.content.secondary,";transition:opacity 0.6s;")},atHome:function(e){return(0,a.css)("font-style:normal;font-weight:bold;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale;font-family:",o.default.font.cheltenham,";color:",c.color.content.primary,";display:inline;margin-right:8px;",u(e,{fontSize:[20,20,21],lineHeight:[26,26,28]})," .",l.linkClass,"{text-decoration:underline;color:",c.color.content.secondary,";&:focus,&:visited{color:",c.color.content.secondary,";}&:focus{text-decoration:none;}}")}}),b=t.RelatedLinkHeadline=(0,a.styled)("div",{target:"e16ij5yr3"})("display:inline;",g,";",y,";",v,";"),_=(0,a.themeFn)("displayStyle",{expanded:function(e){return(0,a.css)(e.theme.breakpointMap.medium,"{margin-bottom:2px;}")}}),w=(0,a.themeFn)("treatment",{none:(0,a.css)("color:",c.color.content.tertiary,";font-family:",o.default.font.serifBase,";font-size:",o.default.font.size(15),";line-height:",o.default.font.size(20),";"),sponsored:(0,a.css)("color:",c.color.content.secondary,";font-family:",o.default.font.sponsoredBase,";font-size:",o.default.font.size(14),";line-height:",o.default.font.size(19),";"),atHome:function(e){return(0,a.css)("font-family:",o.default.font.imperial,";font-style:normal;display:inline;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale;color:",c.color.content.secondary,";",u(e,{fontSize:[18,18,19],lineHeight:[26,26,28]})," .",l.linkClass,"{text-decoration:underline;color:",c.color.content.secondary,";&:focus,&:visited{color:",c.color.content.secondary,";}&:focus{text-decoration:none;}}strong{color:",c.color.content.primary,";font-weight:700;font-family:",o.default.font.cheltenham,";",u(e,{fontSize:[20,20,21]}),"}")}}),x=(t.RelatedLinkSummary=(0,a.styled)("div",{target:"e16ij5yr4"})("font-weight:",o.default.font.weight.book,";margin-top:0.4rem;",_,";",w,";"),(0,a.themeFn)("treatment",{none:(0,a.css)(),atHome:function(e){return(0,a.css)("align-self:flex-start;margin-top:0;flex-basis:",1===e.siblings||"single"===e.theme.displayStyle?"31%":"auto",";flex-grow:0;")}})),k=(t.RelatedLinkTextWrapper=(0,a.styled)("div",{target:"e16ij5yr5"})("flex-grow:1;",x,";"),(0,a.themeFn)("treatment",{none:function(e){return(0,a.css)("color:",c.color.content.secondary,";font-family:",o.default.font.franklinBase,";font-weight:",o.default.font.weight.bold,";letter-spacing:0.05em;text-transform:uppercase;",u(e,{fontSize:[11,12],lineHeight:[16,18]}))},sponsored:(0,a.css)("color:",c.color.content.secondary,";font-family:",o.default.font.sponsoredBase,";font-size:",o.default.font.size(14),";font-weight:",o.default.font.weight.medium,";line-height:",o.default.font.size(18),";letter-spacing:0.03rem;text-transform:uppercase;"),atHome:(0,a.css)("display:none;")})),O=(0,a.themeFn)("displayStyle",{compact:(0,a.css)("color:",o.default.color.opinionGray,";"),standard:(0,a.css)("color:",o.default.color.opinionGray,";"),expanded:(0,a.css)("color:",o.default.color.opinionGray,";")}),T=(t.RelatedLinkLabel=(0,a.styled)("div",{target:"e16ij5yr6"})((function(e){return"compact"===e.theme.displayStyle&&(0,a.css)("display:block;margin-right:0.3em;")}),";",(function(e){return e.isOpinion?O:k(e)}),";",(function(e){return e.isOpinion&&y}),";"),(0,a.themeFn)("treatment",{none:function(e){return(0,a.css)("color:",c.color.content.quaternary,";",u(e,{fontSize:[12,13],lineHeight:[19,23],marginTop:["2px",0]}),";")},sponsored:(0,a.css)("display:none;"),atHome:(0,a.css)("display:none;")})),C=(0,a.themeFn)("treatment",{none:function(e){return"compact"===e.theme.displayStyle?(0,a.css)("color:",c.color.signal.editorial,";"):(0,a.css)("color:",c.color.content.quaternary,";")},sponsored:function(e){return"compact"===e.theme.displayStyle?(0,a.css)():(0,a.css)("opacity:0.8;")},atHome:(0,a.css)("color:",c.color.content.secondary,";")}),E=(0,a.themeFn)("displayStyle",{standard:(0,a.css)("display:flex;align-items:center;"),expanded:function(e){return(0,a.css)("display:flex;flex-direction:column;",e.theme.breakpointMap.medium,"{flex-direction:row;align-items:center;}")}}),S=(0,a.themeFn)("treatment",{none:function(e){return"compact"===e.theme.displayStyle?(0,a.css)(":not(:last-child){margin-bottom:0.75rem;}"):(0,a.css)(":not(:last-child){margin-bottom:1rem;}")},atHome:function(e){return e.siblings>1||"group"===e.theme.displayStyle?(0,a.css)("flex-grow:1;flex-basis:31%;",u(e,{margin:["0 0 36px","0 0 36px","0 0"]})," .",l.linkClass,"{",e.theme.breakpointMap.medium,"{flex-direction:column;}}"):(0,a.css)(o.default.breakpoint.medium,"{margin:0 0 50px;}.",l.linkClass,"{align-items:stretch;justify-content:flex-start;}")}});t.StyledRelatedLink=(0,a.styled)("div",{target:"e16ij5yr7"})(r.StyledPubDate,"{margin-bottom:0;display:block;",T,";}&:hover,&:visited{",b,"{",C,";}}.",l.linkClass,"{",E,";}",S,";")},tOSR:function(e,t,n){"use strict";var i,a=n("lSNA"),o=n.n(a),r=n("gcR/"),s=n.n(r),l=(n("q1tI"),n("Jqp9")),c=n("/KYJ"),u=n("rWB7"),d=n("r0tw"),p=function(e){var t=e.handleSave,n=e.saved,a=void 0!==n&&n,r=e.loading,p=void 0===r||r,f=e.mutationLoading,m=e.error,h=e.children,g=e.buttonClass,y=e.childrenStyleClass,v=e.svgStyleClass,b=e.tabIndex,_=Object(u.b)(),w=Boolean(!_||m||p);return s()("button",{type:"button",role:"switch",onClick:t,className:Object(l.cx)(d.f,g),"data-testid":"save-article-button","aria-label":"Save article for reading later...","aria-checked":a&&_,disabled:w,"aria-disabled":f||void 0,"aria-busy":f,"aria-live":"polite",tabIndex:b},void 0,f?s()(c.Spinner,{size:16,className:v}):s()("svg",{width:"12",height:"18",viewBox:"0 0 12 18",className:Object(l.cx)(v,o()(o()(o()({},d.h,a&&_),d.c,!a&&_),d.e,w))},void 0,i||(i=s()("g",{fillRule:"nonzero"},void 0,s()("path",{className:"saved-fill",d:"M1.157 1.268v14.288l4.96-3.813 4.753 3.843V1.268z"}),s()("path",{className:"saved-stroke",d:"m12 18-5.9-4.756L0 17.98V1.014C0 .745.095.487.265.297.435.107.664 0 .904 0h10.192c.24 0 .47.107.64.297.169.19.264.448.264.717V18ZM1.157 1.268v14.288l4.96-3.813 4.753 3.843V1.268H1.158Z"})))),h&&s()("span",{className:Object(l.cx)(d.a,y)},void 0,h))};p.displayName="SaveBanner",t.a=p},tXdy:function(e,t,n){"use strict";var i=n("TqRt"),a=n("cDf5");Object.defineProperty(t,"__esModule",{value:!0}),t.interactiveShape=t.default=void 0;var o=i(n("lwsE")),r=i(n("W8MJ")),s=i(n("a1gu")),l=i(n("Nsbk")),c=i(n("7W2i")),u=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=a(e)&&"function"!=typeof e)return{default:e};var n=h(t);if(n&&n.has(e))return n.get(e);var i={__proto__:null},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var r in e)if("default"!==r&&{}.hasOwnProperty.call(e,r)){var s=o?Object.getOwnPropertyDescriptor(e,r):null;s&&(s.get||s.set)?Object.defineProperty(i,r,s):i[r]=e[r]}return i.default=e,n&&n.set(e,i),i}(n("q1tI")),d=i(n("17x9")),p=n("Jqp9"),f=n("QgjT"),m=i(n("xW/B"));function h(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(h=function(e){return e?n:t})(e)}function g(e,t,n){return t=(0,l.default)(t),(0,s.default)(e,function(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return function(){return!!e}()}()?Reflect.construct(t,n||[],(0,l.default)(e).constructor):t.apply(e,n))}var y=function(e){function t(){var e;(0,o.default)(this,t);for(var n=arguments.length,i=new Array(n),a=0;a<n;a++)i[a]=arguments[a];return(e=g(this,t,[].concat(i))).state={},e.htmlWrapperRef=function(t){if(e.props.manageScripts&&t){var n=Array.prototype.slice.call(t.querySelectorAll("script"));if(n.length){var i=[];n.forEach((function(e){i.push({html:e.innerHTML,parentNode:e.parentNode,attributes:e.attributes}),e.parentNode.removeChild(e)})),e.setState({html:t.innerHTML},(function(){i.forEach((function(e){var t=e.html,n=e.parentNode,i=e.attributes,a=document.createElement("script");t&&(a.innerHTML=t),i&&Array.from(i).forEach((function(e){var t=e.name,n=e.value;a.setAttribute(t,n)})),n&&n.appendChild(a)}))}))}}},e}return(0,c.default)(t,e),(0,r.default)(t,[{key:"render",value:function(){var e=this.props,t=e.interactive,n=e.maxWidth,i=e.className,a=e.children,o=e.Header,r=e.Footer,s=e.enableInteractiveBridge,l=t.slug,c=t.sourceId,d=this.state.html||t.html,h=n?"scoop":"medium";return u.default.createElement("section",{"data-testid":"inline-interactive",id:l,"data-id":c,"data-source-id":c,className:(0,p.cx)((0,f.sectionClass)({maxWidth:n}),i,"interactive-content interactive-size-".concat(h))},o,s?u.default.createElement(m.default,{html:d,id:c}):u.default.createElement("div",{className:(0,p.cx)(f.interactiveDivClass,"interactive-body"),ref:this.htmlWrapperRef,dangerouslySetInnerHTML:{__html:d}}),r,a)}}])}(u.Component);y.displayName="InlineInteractive";t.interactiveShape=d.default.shape({sourceId:d.default.string,leadin:d.default.string,note:d.default.string,kicker:d.default.string,firstPublished:d.default.string,updatedText:d.default.string,bylines:d.default.arrayOf(d.default.object),credit:d.default.string,dataSource:d.default.string,slug:d.default.string,html:d.default.string,displayProperties:d.default.shape({maximumWidth:d.default.number,minimumWidth:d.default.number,displayForPromotionOnly:d.default.bool,displayOverrides:d.default.arrayOf(d.default.string)}),headline:d.default.oneOfType([d.default.shape({default:d.default.string}),d.default.string])});y.defaultProps={Header:null,Footer:null,interactive:{html:null,displayProperties:{},headline:{default:""}},className:void 0,children:null,maxWidth:0,manageScripts:!1,enableInteractiveBridge:!1};t.default=y},taqW:function(e,t,n){"use strict";var i,a,o,r,s,l,c,u,d,p,f=n("gcR/"),m=n.n(f),h=n("lSNA"),g=n.n(h),y=n("q1tI"),v=n.n(y),b=n("Jqp9"),_=Object(b.css)("display:flex;justify-content:center;align-items:center;"),w=Object(b.css)("position:fixed;width:100%;height:100%;top:0;z-index:1;"),x=Object(b.keyframes)("100%{transform:rotate(360deg);transform-origin:center;}"),k=Object(b.css)("opacity:1;width:50px;animation:",x," 0.8s steps(10,end) infinite;");function O(e){var t=e.wrapperClass,n=e.iconClass,f=e.color,h=e.fixed;return m()("div",{className:Object(b.cx)(_,g()({},w,h),t),"data-testid":"loading-spinner"},void 0,m()("svg",{className:Object(b.cx)(k,n),alt:"Loading spinner icon",version:"1.1",width:"198px",height:"198px",viewBox:"-50 -50 100 100"},void 0,m()("g",{stroke:f,strokeWidth:"3.75",strokeLinecap:"round"},void 0,i||(i=m()("line",{x1:0,y1:-14,x2:0,y2:-30,opacity:"1"})),a||(a=m()("line",{x1:-8.229,y1:-11.33,x2:-17.63,y2:-24.27,opacity:"0.87"})),o||(o=m()("line",{x1:-13.31,y1:-4.326,x2:-28.53,y2:-9.271,opacity:"0.74"})),r||(r=m()("line",{x1:-13.31,y1:4.326,x2:-28.53,y2:9.271,opacity:"0.61"})),s||(s=m()("line",{x1:-8.23,y1:11.33,x2:-17.63,y2:24.27,opacity:"0.48"})),l||(l=m()("line",{x1:0,y1:14,x2:0,y2:30,opacity:"0.37"})),c||(c=m()("line",{x1:8.23,y1:11.33,x2:17.63,y2:24.27,opacity:"0.26"})),u||(u=m()("line",{x1:13.31,y1:4.33,x2:28.53,y2:9.27,opacity:"0.17"})),d||(d=m()("line",{x1:13.31,y1:-4.33,x2:28.53,y2:-9.27,opacity:"0.09"})),p||(p=m()("line",{x1:8.23,y1:-11.33,x2:17.63,y2:-24.27,opacity:"0.02"})))))}O.displayName="LoadingSpinner",O.defaultProps={wrapperClass:void 0,iconClass:void 0,color:"black",fixed:!0};t.a=v.a.memo(O)},tl88:function(e,t){e.exports=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return'(function () { var _f=function(e={}){const i=window&&window.AdSlot4,t=window.adClientUtils.getAbraVar("DFP_Prebid_0624");function o(){const e=window.matchMedia("(max-width: 739px)");return e&&e.matches}try{const{adToggleMap:n,pageType:d,prebidOverrides:r,section:a,isSectionHbEligible:s,setFastFetch:w,headerBidding:c={}}=e,{useAmazon:l,usePrebid:p}=c,g=Object.keys(n).reduce((e,i)=>{const t=n[i]||"";return e[i]=function(e){return!!(window&&window.adClientUtils&&window.adClientUtils.hasActiveToggle)&&window.adClientUtils.hasActiveToggle(e)}(t),e},{}),{amazon:u,geoedge:b}=g,T=r&&r.positionsToFilter||[],h=o()?T.concat(["top"]):T,m=["appnexus","medianet","rubicon","openx","triplelift","ix","pubmatic"];t&&window.adClientUtils.reportExposure("DFP_Prebid_0624"),"1_Criteo"===t&&m.push("criteo"),"function"==typeof i.loadScripts&&i.loadScripts({loadAmazon:l&&u&&s,loadPrebid:p&&s,setFastFetch:w&&!o(),section:a,prebidOverrides:{...r,positionsToFilter:h,activeBidders:m},pageType:d,pageViewId:window&&window.NYTD&&window.NYTD.PageViewId&&window.NYTD.PageViewId.current?window.NYTD.PageViewId.current:"",loadGeoEdge:b})}catch(e){console.error(e)}};;_f.apply(null, '.concat(JSON.stringify(t),"); })();")}},tn1d:function(e,t,n){"use strict";var i=n("TqRt"),a=n("cDf5");Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"MediaFigCaption",{enumerable:!0,get:function(){return f.MediaFigCaptionComponent}}),Object.defineProperty(t,"MediaFigureContainer",{enumerable:!0,get:function(){return p.default}}),t.default=void 0;var o=i(n("lSNA")),r=i(n("q1tI")),s=(i(n("17x9")),n("Jqp9")),l=i(n("OB6K")),c=i(n("Vcud")),u=i(n("MKiQ")),d=(n("QLXK"),h(n("HvhO"))),p=i(n("icfT")),f=h(n("6RhY"));function m(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(m=function(e){return e?n:t})(e)}function h(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=a(e)&&"function"!=typeof e)return{default:e};var n=m(t);if(n&&n.has(e))return n.get(e);var i={__proto__:null},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var r in e)if("default"!==r&&{}.hasOwnProperty.call(e,r)){var s=o?Object.getOwnPropertyDescriptor(e,r):null;s&&(s.get||s.set)?Object.defineProperty(i,r,s):i[r]=e[r]}return i.default=e,n&&n.set(e,i),i}var g=function(e){var t=e.size,n=e.media,i=e.mediaTypeLabel,a=e.orientation,m=e.className,h=e.smallNoCaptionClassName,g=e.children,y=e.textOverlay,v=e.containerClass,b=e.isFullBleed,_=(0,s.useTheme)(),w="small"===t&&!r.default.Children.toArray(g).find((function(e){return e.type===u.default}));return r.default.createElement(l.default,{theme:{mediaSize:t,mediaOrientation:a,isFullBleed:b}},r.default.createElement(d.default,{className:(0,s.cx)((0,o.default)({},(0,d.mediaFigureSmallNoCreditStyles)({theme:_}),w),m,(0,o.default)({},h,w&&h)),"aria-label":"media",role:"group"},r.default.createElement(p.default,{className:v,"data-testid":"photoviewer-children-figure"},r.default.createElement(c.default,null,i),r.default.cloneElement(r.default.Children.only(n),{className:(0,s.cx)(d.mediaElementClass,n.props.className)}),y),r.default.createElement(f.default,{"data-testid":"photoviewer-children-caption"},g)))};g.displayName="MediaFigure",g.defaultProps={className:void 0,smallNoCaptionClassName:void 0,media:null,mediaTypeLabel:"",children:null,size:null,orientation:"horizontal",textOverlay:null,containerClass:"",isFullBleed:!1};t.default=g},toO0:function(e,t,n){"use strict";var i=n("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=i(n("ALE8")),o=i(n("MzAb")),r=i(n("pfWQ"));t.default=function(e,t){(0,a.default)()&&(0,o.default)((function(){(0,r.default)().initializeAd(e,t)}))}},tqOg:function(e,t,n){"use strict";var i=n("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=i(n("q1tI")),o=(i(n("17x9")),n("Jqp9")),r=i(n("2Sf2")),s=function(e){var t=e.html,n=e.className;return a.default.createElement("div",{className:(0,o.cx)(r.default,n),dangerouslySetInnerHTML:{__html:t}})};s.displayName="ReviewInformation",s.defaultProps={html:null,className:void 0};t.default=s},uCIn:function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));var i=n("Zhpy");function a(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:90,n=Object(i.a)(),a=n.data,o=n.loading,r=(null==a||null===(e=a.regi_data)||void 0===e?void 0:e.subscriber_info)||{},s=r.news_entitlement_tenure_days;if(o)return{loading:!0};var l=null!==s&&s<=t;return{loading:!1,value:l}}},uJd7:function(e,t,n){"use strict";function i(e){try{return JSON.parse(e.experimentalJsonBlob||null)}catch(e){return null}}function a(e,t,n){if(!e)return null;if(e.type===t&&e.version===n)return e;if(!(e.data instanceof Array))return a(e.data,t,n);for(var i=0;i<e.data.length;i+=1){var o=a(e.data[i],t,n);if(o)return o}return null}Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t=e.storyline,n=e.block;try{if(!n)return null;var o=n.type,r=n.version;return a(i(t),o,r).data}catch(e){return null}},t.deserializeExperimentalJsonBlob=i,t.getExperimentalAssetBlock=a},uLdf:function(e,t,n){"use strict";var i=n("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=n("Jqp9"),o=n("3sMT"),r=i(n("wXC7")),s=(0,a.css)("color:",o.color.signal.breaking,";border:none;text-transform:none;letter-spacing:0;font-size:",r.default.font.size(12),";font-weight:",r.default.font.weight.medium,";padding:4px 4px 0 4px;");t.default=s},uVKy:function(e,t,n){"use strict";var i=n("TqRt"),a=n("cDf5");Object.defineProperty(t,"__esModule",{value:!0}),t.canStorylineComposeMenu=h,t.default=void 0,t.isElectionStoryline=g;var o=i(n("lSNA")),r=i(n("q1tI")),s=(i(n("17x9")),n("Jqp9")),l=i(n("vJhq")),c=i(n("wFfY")),u=i(n("Y3E+")),d=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=a(e)&&"function"!=typeof e)return{default:e};var n=f(t);if(n&&n.has(e))return n.get(e);var i={__proto__:null},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var r in e)if("default"!==r&&{}.hasOwnProperty.call(e,r)){var s=o?Object.getOwnPropertyDescriptor(e,r):null;s&&(s.get||s.set)?Object.defineProperty(i,r,s):i[r]=e[r]}return i.default=e,n&&n.set(e,i),i}(n("ZB1J")),p=n("ATQY");n("D5MC");function f(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(f=function(e){return e?n:t})(e)}var m=function(e){return e};function h(e){var t;return(null==e?void 0:e.displayName)&&(null==e||null===(t=e.primaryAssets)||void 0===t?void 0:t.length)>0}function g(e){return"nyt://storyline/894481b3-768d-4cd7-8eba-6fbfb73390d7"===e}function y(e){var t=e.children,n=e.storyline,i=e.uriOfActiveMenuLink,a=e.trackEvent,f=e.trackInteraction,m=e.className,y=e.HomepageLink,v=e.storylineMenuBlockRef,b=e.isLiveRoute,_=g(null==n?void 0:n.uri);if(!h(n))return null;var w=n.displayName,x=n.tone,k=n.primaryAssets,O=n.hubAssets,T=function(e,t){return function(n){f(n,t,{eventData:{type:"url-click",trigger:"item"},item:{uri:null==e?void 0:e.uri,url:(null==e?void 0:e.url)||(null==e?void 0:e.publicUrl)}})}};return r.default.createElement("div",{className:(0,s.cx)(d.menuContainerClass,m),ref:v},y,r.default.createElement("nav",{className:d.scrollContainerClass,"aria-labelledby":"storyline-menu-title",role:"navigation"},r.default.createElement(u.default,{onVisible:function(){var e,t,n,i,o,r;null!=O&&null!==(e=O[0])&&void 0!==e&&null!==(t=e.asset)&&void 0!==t&&t.url&&(null==a||a({event:"impression",card:{index:0,type:"title",id:null==O||null===(n=O[0])||void 0===n||null===(i=n.asset)||void 0===i?void 0:i.uri,url:null==O||null===(o=O[0])||void 0===o||null===(r=o.asset)||void 0===r?void 0:r.url,label:w}}))}},(function(e){var t,n,i,a,c,u=e.ref;return r.default.createElement("p",{id:"storyline-menu-title",ref:u,className:(0,s.cx)((0,o.default)({},d.electionTitleClass,_))},r.default.createElement(l.default,{url:null==O||null===(t=O[0])||void 0===t||null===(n=t.asset)||void 0===n?void 0:n.url,text:w,tone:x,className:(0,s.cx)(d.preventInteractivesFromTurningLinksBlueClass),trackInteraction:T(null==O||null===(i=O[0])||void 0===i?void 0:i.asset,null==O||null===(a=O[0])||void 0===a||null===(c=a.asset)||void 0===c?void 0:c.url),isElectionStoryline:_}))})),r.default.createElement("ul",{className:d.listClass,role:"menu"},(0,p.withDerivedLiveStatus)(k).filter((function(e){return null==e?void 0:e.asset})).map((function(e,t){return r.default.createElement(u.default,{key:(null==e?void 0:e.asset.uri)||t,onVisible:function(){var n,i;return null==a?void 0:a({event:"impression",card:{index:null!=O&&null!==(n=O[0])&&void 0!==n&&null!==(i=n.asset)&&void 0!==i&&i.url?t+1:t,type:(null==e?void 0:e.status)||"UNSET",id:null==e?void 0:e.asset.uri,url:null==e?void 0:e.asset.url,label:null==e?void 0:e.displayName,is_new:null==e?void 0:e.isNew}})}},(function(t){var n,a,o,s,l,u=t.ref;return r.default.createElement("li",{ref:u,className:d.listSpacingClass},r.default.createElement(c.default,{status:null==e?void 0:e.status,displayName:null==e?void 0:e.displayName,key:null==e||null===(n=e.asset)||void 0===n?void 0:n.uri,url:null==e?void 0:e.asset.url,isLiveRoute:b,lastModified:null==e||null===(a=e.asset)||void 0===a?void 0:a.lastModified,isActive:null==e||null===(o=e.asset)||void 0===o||null===(s=o.uri)||void 0===s||null===(l=s.includes)||void 0===l?void 0:l.call(s,i),isNew:null==e?void 0:e.isNew,className:d.preventInteractivesFromTurningLinksBlueClass,trackInteraction:T(null==e?void 0:e.asset,null==e?void 0:e.asset.url)}))}))})))),t)}y.displayName="StorylineMenu",y.defaultProps={storyline:null,storylineMenuBlockRef:null,trackEvent:m,trackInteraction:m,uriOfActiveMenuLink:null,className:void 0,children:null,HomepageLink:null,isLiveRoute:!1};t.default=y},uW2s:function(e,t,n){"use strict";var i=n("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.metaClass=t.leadinClass=t.headlineClass=t.headerClass=t.fullbleedHeaderFooterContainerClass=t.fullbleedClass=t.footerClass=void 0;var a=n("Jqp9"),o=i(n("wXC7")),r=n("3sMT"),s=n("wiOm"),l=o.default.font;t.headerClass=(0,a.css)("margin:0 auto 1rem;"),t.headlineClass=(0,a.css)("color:",r.color.content.primary,";font-family:",l.serifMedium,";font-size:",l.size(21),";font-weight:",l.weight.mediumBold,";line-height:",l.size(24),";margin-bottom:5px;",s.onDarkModeInset,"{color:",r.light.colors.content.primary.hex,";}"),t.leadinClass=(0,a.css)("color:",r.color.content.quaternary,";font-family:",l.serifBase,";font-size:",l.size(15),";line-height:",l.size(20),";",s.onDarkModeInset,"{color:",r.light.colors.content.quaternary.hex,";}"),t.footerClass=(0,a.css)("margin:10px auto 20px;max-width:100%;line-height:0;a{color:",r.color.content.primary,";",s.onDarkModeInset,"{color:",r.light.colors.content.primary.hex,";}}"),t.fullbleedClass=(0,a.css)("width:100% !important;max-width:100% !important;margin:0 auto !important;"),t.fullbleedHeaderFooterContainerClass=function(e){var t=e.maxWidth;return(0,a.css)("width:calc(100% - 40px);",t?"max-width: ".concat(t,"px;"):null)},t.metaClass=(0,a.css)("margin:0;display:inline;color:",r.color.content.quaternary,";font-family:",l.serifBase,";font-size:",l.size(12),";line-height:",l.size(16),";letter-spacing:0.01em;",o.default.breakpoint.large,"{font-size:",l.size(13),";line-height:",l.size(17),";}&:not(:last-child)::after{content:'•';color:",r.color.stroke.quaternary,";margin:0 10px;font-size:10px;white-space:no-wrap;",s.onDarkModeInset,"{color:",r.light.colors.stroke.quaternary.hex,";}}",s.onDarkModeInset,"{color:",r.light.colors.content.quaternary.hex,";}")},"uc/3":function(e,t,n){"use strict";var i=n("VkAN"),a=n.n(i),o=n("gcR/"),r=n.n(o),s=n("lSNA"),l=n.n(s),c=n("q1tI"),u=n.n(c),d=n("eFc+"),p=n.n(d),f=n("Jqp9"),m=n("wXC7"),h=n.n(m),g=n("MKiQ"),y=n.n(g),v=n("42vy"),b=n.n(v),_=n("c106"),w=n("nGF/"),x=n.n(w),k=n("pCca"),O=n("ZKN5"),T=n("nosR");function C(e){var t,n,i=e.media,a=Object(k.a)().breakpoint;if(!i.promotionalMedia)return null;var o=i.renditions,s=i.aspectRatio,l=i.promotionalMedia.crops||(null===(t=i.promotionalMedia)||void 0===t||null===(n=t.promotionalMedia)||void 0===n?void 0:n.crops),c=function(e,t){var n=600===t,i=e.filter((function(e){return/\.mp4$/.test(e.url)}));if(0===i.length)throw new Error("An mp4 video is required");return Object(T.findVideoRenditionOfBestFit)(i,t,n)}(o,a),u=(null==c?void 0:c.aspectRatio)||s||"".concat(c.width,":").concat(c.height),d=Object(T.findCropsByRatio)(l,u),p=600===a,f=Object(T.findVideoRenditionOfBestFit)(null==d?void 0:d.renditions,a,p);return r()(x.a,{src:null==c?void 0:c.url,imgFallback:null==f?void 0:f.url,ratio:u,imgLoading:null==f?void 0:f.url})}C.displayName="SpanCinemagraph";var E,S=Object(O.a)(C),P=n("pVYW"),I=n("y1Vo"),M=n("xGNk"),A=n.n(M),j=n("caSQ"),N=n("M5Mg"),L=n("FQbI"),D=n.n(L),R=n("F77t"),B=n("PgO9"),z=n("HUmG"),F=n("8npY"),U=n.n(F),H=Object(f.css)("@media print{display:none;}"),W=Object(f.css)("display:flex;width:100%;padding:20px 0;border-top:1px solid #dfdfdf;border-bottom:1px solid #dfdfdf;margin:0;outline:none;.vhs-playIcon{width:56px;min-width:56px;height:56px;}"),q=Object(f.css)("display:inline-block;> *{display:inline;margin-right:0;}"),V=Object(f.css)("font-size:1.25rem;line-height:1.5rem;",h.a.breakpoint.medium,"{font-size:1.25rem;line-height:1.5rem;}"),G=Object(f.css)("& *{:not([class*='vhs-icon']){font-family:",h.a.font.sponsoredBase," !important;}}& .vhs-times-logo{display:none;}"),Y=Object(f.css)("margin-left:0;margin-right:7px;");function X(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function Z(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?X(Object(n),!0).forEach((function(t){l()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):X(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function J(e){var t,n,i,a=e.data,o=e.autoplayOverride,s=e.videoOptionOverrides,c=e.className,d=e.lede,p=e.showCaption,m=e.creditClass,g=Object(j.a)(),v=Object(B.a)().user,w=Object(f.useTheme)(),x=Object(k.a)().breakpoint,O=u.a.useRef();if(!a||!a.media)return null;var C="guide"===w.treatment,E=a.media,M=E.summary,L=E.aspectRatio,F=E.advertisingProperties,X=a.promotionalOverride||a.media.promotionalMedia,J=a.controls,K=void 0===J?"":J,$=a.muted,Q=void 0!==$&&$,ee=a.looping,te=void 0!==ee&&ee,ne=a.size,ie="SMALL"===ne,ae=null===(t=a.media)||void 0===t||null===(n=t.headline)||void 0===n?void 0:n.default,oe=(null==X?void 0:X.credit)||"",re="TRAGEDY"===(null==F?void 0:F.sensitivity),se=null==F?void 0:F.sponsored,le=U.a[ne],ce=a.media.isLive||!0===o&&!re||a.autoplay&&!0===a.autoplay&&!re,ue=!!L&&function(e){if(!e)return 0;var t=e.split(":");return parseInt(t[0],10)/parseInt(t[1],10)}(L)<1,de=!re&&"STANDARD_MUTED_AUTOPLAY"===K||!!a.media.isLive,pe=a.muted&&a.looping&&a.autoplay&&a.hideControls&&!de,fe="production";"test"===vi.env.ENVIRONMENT&&(fe="test");var me=Z(Z({ads:!se,api:!1,autoplay:ce,contextualMenu:!0,controls:!a.media.isLive,controlsOverlay:{mode:"clean"},cover:{mode:"article"},endSlate:{autoplayNext:!0,hasRecommendation:!0},env:fe,type:d?"article-lede":"article-embedded",ratio:L,muted:Q,loop:te,mutedAutoplayOverlay:de},s),{},{playerRef:function(e){O.current=e,s.playerRef&&s.playerRef(e)}}),he="";if(pe&&a.media.bylines&&a.media.bylines.length){var ge=a.media.bylines.find((function(e){return e.renderedRepresentation}));he=ge&&ge.renderedRepresentation}var ye,ve,be="rightToLeft"===(null==w?void 0:w.languageDirection)?Y:null,_e={data:{media:a},sectionStyle:null===(i=a.media.section)||void 0===i?void 0:i.name},we=Object(R.hasRegionLock)(_e).hasRegionLock,xe=Object(R.hasSubscriberLock)(_e).hasSubscriberLock,ke=g?Object(R.isRegionLocked)(Z(Z({},_e),{},{geolocation:g})).isRegionLocked:void 0,Oe=v?Object(R.isSubscriberLocked)(_e,Object(z.f)(v)).isSubscriberLocked:void 0,Te=Z(Z({},a.media),{},{promotionalMedia:X,size:ne});if(ie&&(Te.headline={default:""}),we&&void 0===ke||xe&&void 0===Oe)ye=r()(N.a,{isLoading:!0,aspectRatio:L});else if(we&&ke||xe&&Oe){var Ce,Ee=ke?R.getRegionLockedMessage:R.getSubscriberLockedMessage,Se=Object(T.findCropsByRatio)(X.crops,L),Pe=Object(T.findVideoRenditionOfBestFit)(Se.renditions,x);ve=u.a.createElement(u.a.Fragment,null,r()(D.a,{width:"100%",message:Ee(null===(Ce=Te.section)||void 0===Ce?void 0:Ce.displayName)}),r()("img",{alt:"Promotion for locked video",src:Pe.url}))}else ye=pe?r()(S,{media:Te}):r()(_.a,{media:Te,videoOptions:me});var Ie=Object(f.cx)(H,P.c,le,c,C&&P.b,{layoutVertical:ue,verticalVideo:ue}),Me=Object(f.cx)(q,m),Ae=function(){O.current};return r()("figure",{className:Ie,"aria-label":"media",role:"group","data-testid":"VideoBlock"},void 0,ie&&!C&&r()("div",{className:W,role:"button",onClick:Ae,onKeyDown:Ae,tabIndex:0},void 0,r()("div",{className:Object(f.cx)(P.a,l()({},G,se))},void 0,r()("span",{className:h.a.a11y.visuallyHidden},void 0,"Video"),ve,ye),r()(I.Caption,{},void 0,r()(b.a,{className:V},void 0,ae))),!ie&&r()("div",{className:Object(f.cx)(P.a,l()({},G,se))},void 0,r()("span",{className:h.a.a11y.visuallyHidden},void 0,"Video"),ve,ye),!C&&!ie&&r()(I.Caption,{},void 0,p&&M&&r()(y.a,{className:be,"data-testid":"video-summary"},void 0,M),(oe||pe)&&r()("span",{className:Me},void 0,r()("span",{className:h.a.a11y.visuallyHidden},void 0,"Credit"),r()(A.a,{dangerouslySetInnerHTML:{__html:"".concat(pe&&he||oe)}}))))}J.displayName="VideoBlock",J.fragments={data:p()(E||(E=a()(["\n    fragment VideoBlock_data on VideoBlock {\n      size\n      autoplay\n      muted\n      hideControls\n      hideSummary\n      looping\n      controls\n      media {\n        id\n        summary\n        firstPublished\n        aspectRatio\n        transcript\n        productionType\n        promotionalMedia {\n          ... on Image {\n            id\n            credit\n          }\n        }\n        advertisingProperties {\n          sensitivity\n          sponsored\n        }\n        ...SpanVideo_media\n      }\n      promotionalOverride {\n        ...Video_promoVideo\n        ...Video_promoImage\n      }\n    }\n    ","\n  "])),_.a.fragments.media)},J.defaultProps={autoplayOverride:!1,videoOptionOverrides:{playerRef:void 0},className:void 0,lede:!1,showCaption:!0,creditClass:""};t.a=J},udJG:function(e,t,n){"use strict";n.d(t,"a",(function(){return O})),n.d(t,"b",(function(){return C}));var i=n("J4zp"),a=n.n(i),o=n("q1tI"),r=n("cr+I"),s=n("PgO9"),l=n("rWB7"),c=n("MLAy"),u=n("hNYz"),d="MM",p=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:d;if(null===e||Array.isArray(e)&&0===e.length)return null;var n=e.filter((function(e){return"ACTIVE"===e.status&&-1!==e.entitlements.indexOf(t)}));return n.pop()||null},f=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:d,n=p(e,t);return!(null==n||!n.isFreeTrial)},m=n("ipDA"),h=n("SYzA"),g=n("Zhpy"),y=n("Tonn"),v=n("mczz"),b=n("eJDT"),_=n("2ccF"),w=n("fZdH"),x=n("NW2b"),k=n("mbYo"),O={scope:"disrupterReadInAppDock",limit:2,frequency:c.b,limitDuration:c.c},T={scope:"disrupterReadInAppViews",maxStored:12};function C(){var e,t,n,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},d=i.article,p=Object(l.b)(),C=Object(h.a)(),E=Object(s.a)(),S=E.user,P=E.subscriptionDetails,I=Object(c.e)(O),M=Object(o.useState)(null),A=a()(M,2),j=A[0],N=A[1],L=Object(w.a)(),D=(null==L?void 0:L[k.c])||{},R=D.allocated,B=void 0===R||R,z=D.variant,F=void 0===z?null:z,U=(null==L?void 0:L[k.a])||{},H=U.allocated,W=void 0===H||H,q=U.variant,V=void 0===q?null:q,G=(null==L?void 0:L[k.h])||{},Y=G.allocated,X=void 0===Y||Y,Z=G.variant,J=void 0===Z?null:Z,K=Object(_.c)(T),$=K.error,Q=K.loaded,ee=K.hasAtMostViews,te=Object(g.a)(),ne=te.data,ie=te.loading,ae=(null==ne||null===(e=ne.regi_data)||void 0===e||null===(t=e.engagement)||void 0===t?void 0:t.num_days_since_last_app_view)||{},oe=ae.core,re=(null==ne||null===(n=ne.regi_data)||void 0===n?void 0:n.signals)||{},se=re.last_seen_segment_label,le=re.risk_category_core_sub,ce=null!==S&&!I.loading()&&!ie&&B&&W&&X&&Q,ue=Object(u.isLoggedIn)(S)&&Object(u.isSubscriber)(S),de=Object(u.isLoggedIn)(S)&&!Object(u.isSubscriber)(S);if(ce&&null===j){var pe=p&&null!==Object(m.b)(),fe="Article"===(null==d?void 0:d.__typename),me=Object(v.c)(),he=null!=me&&me.origin?Object(r.parse)(me.search):"",ge=null!==oe&&oe<=30,ye=fe&&!Object(b.i)(he,me.origin)&&!f(P)&&!C&&!Object(y.a)(C,null==me?void 0:me.pathname)&&p&&pe&&!ge,ve=ye&&ue,be=ye&&de&&J!==k.g&&J!==k.f;ve&&F&&Object(x.e)(k.c),be&&V&&Object(x.e)(k.a);var _e=I.canShow();$||(ue&&F===k.e?_e="DORMANT"===se||"HIGH"===le?ee(2,_.a)&&ee(6,_.b):ee(1,_.a)&&ee(3,_.b):ue&&F===k.d?_e="DORMANT"===se||"HIGH"===le?ee(2,_.a)&&ee(10,_.b):ee(1,_.a)&&ee(5,_.b):de&&V===k.b&&(_e=ee(2,_.a)&&ee(10,_.b))),N((ve||be&&V===k.b)&&_e)}return{readyAppDownloadTarget:ce,inAppDownloadTarget:j}}},uewW:function(e,t,n){"use strict";var i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var a=i(n("q1tI")),o=n("K5H2"),r=a.default.forwardRef((function(e,t){var n=e.redirectUri,i=(0,o.useMessagingContext)().authHost;return a.default.createElement("form",{ref:t,style:{visibility:"hidden"},method:"post",action:"".concat(i,"/oauth/authorize"),"data-testid":"MagicLinkForm"},a.default.createElement("input",{value:"web.fwk.vi",name:"client_id",type:"hidden"}),a.default.createElement("input",{value:n,name:"redirect_uri",type:"hidden"}),a.default.createElement("input",{value:"code",name:"response_type",type:"hidden"}),a.default.createElement("input",{value:"no-state",name:"state",type:"hidden"}),a.default.createElement("input",{value:"default",name:"scope",type:"hidden"}))}));r.displayName="MagicLinkForm",t.default=r},uf0L:function(e,t,n){"use strict";var i=n("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=i(n("lSNA")),o=i(n("J4zp")),r=i(n("lwsE")),s=i(n("W8MJ"));function l(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function c(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?l(Object(n),!0).forEach((function(t){(0,a.default)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):l(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var u=function(e){return"function"==typeof(null==e?void 0:e.getStructuredData)?e.getStructuredData():e},d=function(){return(0,s.default)((function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=t["@id"],i=t.description,a=t.image,o=t.mainEntityOfPage,s=t.url,l=t.inLanguage,c=t.name,u=t.alternateName,d=t.sameAs,p=t.potentialAction;(0,r.default)(this,e),this["@context"]="https://schema.org",this["@type"]="Thing",this["@id"]=n,this.description=i,this.image=a,this.mainEntityOfPage=o,this.url=s,this.inLanguage=l,this.name=c,this.alternateName=u,this.sameAs=d,this.potentialAction=p}),[{key:"getStructuredData",value:function(){return Object.entries(this).reduce((function(e,t){var n=(0,o.default)(t,2),i=n[0],r=n[1];return Array.isArray(r)?c(c({},e),{},(0,a.default)({},i,r.map(u))):c(c({},e),{},(0,a.default)({},i,u(r)))}),{})}}])}();t.default=d},uo7y:function(e,t,n){"use strict";var i=this&&this.__createBinding||(Object.create?function(e,t,n,i){void 0===i&&(i=n);var a=Object.getOwnPropertyDescriptor(t,n);a&&!("get"in a?!t.__esModule:a.writable||a.configurable)||(a={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,i,a)}:function(e,t,n,i){void 0===i&&(i=n),e[i]=t[n]}),a=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&i(t,e,n);return a(t,e),t},r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var s=o(n("q1tI")),l=r(n("17x9")),c=n("qYyE"),u=function(e){var t=e.onClick,n=e.visible;return(0,s.useEffect)((function(){return n?document.body.classList.add(c.bodyNoScrollClass):document.body.classList.remove(c.bodyNoScrollClass),function(){document.body.classList.remove(c.bodyNoScrollClass)}}),[n]),n?s.default.createElement("div",{className:c.blackoutUnderlayClass,onClick:t,"aria-hidden":!0}):null};u.propTypes={onClick:l.default.func,visible:l.default.bool},u.defaultProps={onClick:function(){},visible:!1},t.default=u},uoyi:function(e,t,n){"use strict";var i,a=n("VkAN"),o=n.n(a),r=n("gcR/"),s=n.n(r),l=n("lSNA"),c=n.n(l),u=(n("q1tI"),n("eFc+")),d=n.n(u),p=n("Jqp9"),f=n("oKgi"),m=n.n(f),h=n("XlcC"),g=n.n(h),y=n("jOYC"),v=n("HTd6"),b=n("wXC7"),_=n.n(b),w=Object(p.css)("margin:0 ",y.b.grid.pageMargin," 1.6rem;"),x=Object(p.css)("text-align:right;direction:rtl;unicode-bidi:isolate;"),k=Object(p.css)("font-family:",_.a.font.karnakBase,";font-weight:",_.a.font.weight.medium,";text-align:left;",_.a.breakpoint.medium,"{font-size:1.8rem;line-height:1.33;}"),O=function(e){var t=e.data,n=e.className,i=e.isFirstTextAfterHeading2Block,a=Object(p.useTheme)(),o=t.textAlign?t.textAlign.toLowerCase():null,r=Object(p.cx)(y.b.layout.textAlign[o]||y.b.layout.textAlign.left,w,n,c()(c()({},x,"rightToLeft"===a.languageDirection),k,"guide"===a.treatment&&i));return s()(m.a,{className:r},void 0,t.content.map(g.a))};O.displayName="SummaryBlock",O.defaultProps={className:void 0,isFirstTextAfterHeading2Block:!1},O.fragments={data:d()(i||(i=o()(["\n    fragment SummaryBlock_data on SummaryBlock {\n      textAlign\n      content {\n        ...TextInline_content\n      }\n    }\n    ","\n  "])),v.a.fragments.content)};t.a=O},uwQJ:function(e,t,n){"use strict";n.d(t,"b",(function(){return i})),n.d(t,"a",(function(){return a}));var i={themeID:"smallDockTheme",dockContentHeight:{mobileSmall:185,mobileLarge:185,small:185,mediumLarge:185},dockHeaderHeight:{mobileSmall:65,mobileLarge:65,small:55,mediumLarge:55},dockHeaderOffset:{mobileSmall:5,mobileLarge:5,small:0,mediumLarge:0},dockExpandSpeed:"200ms"},a={themeID:"disrupterDockTheme",dockContentHeight:{mobileSmall:230,mobileLarge:230,small:230,mediumLarge:230},dockHeaderHeight:{mobileSmall:0,mobileLarge:0,small:0,mediumLarge:0},dockHeaderOffset:{mobileSmall:0,mobileLarge:0,small:0,mediumLarge:0},dockExpandSpeed:"200ms"}},v2SN:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.timestampCapitalizeClass=t.timeContainerClass=t.timeClass=t.showClass=t.sharedTransformClass=t.relClass=t.hideClass=t.absClass=void 0;var i=n("Jqp9");t.showClass=(0,i.css)("transform:translateY(0);display:inline-block;"),t.sharedTransformClass=(0,i.css)("transition:transform 0.3s ease-in-out;display:inline-block;"),t.relClass=(0,i.css)("transform:translateY(110%);left:0;position:absolute;@media (max-width:600px){display:block;left:unset;top:0;}"),t.absClass=(0,i.css)("transform:translateY(-110%);"),t.timeContainerClass=(0,i.css)("overflow:hidden;position:relative;display:inline-block;"),t.timeClass=(0,i.css)("display:flex;white-space:nowrap;"),t.timestampCapitalizeClass=(0,i.css)("text-transform:capitalize;"),t.hideClass=(0,i.css)("display:none;")},v2Y2:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;t.default=function(e){return new Promise((function(t,n){var i=function(e){return e.addEventListener("load",(function(){e.dataset.loaded=!0,t(e)})),e.addEventListener("error",(function(t){e.dataset.loaded=!0,e.dataset.error=!0,n(t)})),e},a=document.querySelector('link[href="'.concat(e,'"]'));if(a)return a.dataset.loaded?a.dataset.error?n():t(a):i(a);var o=document.createElement("link");return o.href=e,o.rel="stylesheet",o.type="text/css",o.media="all",document.head.appendChild(o),i(o)}))}},v466:function(e,t,n){"use strict";var i=n("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.wrapperClass=t.websiteLinkClass=t.updatedClass=t.timestampClass=t.starsClass=t.reviewFooterClass=t.reviewClass=t.reviewButtonClass=t.ratingClass=t.poweredByClass=t.phoneLinkClass=t.metadataClass=t.logoClass=t.linkWithoutDisclaimerClass=t.linkWithDisclaimerClass=t.disclaimerClass=t.criticsPickClass=void 0;var a=n("Jqp9"),o=i(n("wXC7")),r=n("BHcd"),s=n("3sMT"),l=(t.reviewFooterClass=(0,a.css)("margin-top:40px;"),t.wrapperClass=(0,a.css)("width:calc(100% - 40px);max-width:",o.default.breakpoint.textBodyWidth,"px;margin:0 auto;",o.default.print,";"));t.reviewClass=(0,a.css)("margin:0 auto 1rem;padding:0 0 1rem;width:100%;font-family:",o.default.font.franklinBase,";font-size:",o.default.font.size(14),";line-height:",o.default.font.size(20),";border-bottom:1px solid ",s.color.stroke.quaternary,";",o.default.breakpoint.medium,"{margin-bottom:0;}.",l," + .",l,"{border-top:1px solid ",s.color.stroke.quaternary,";}",o.default.print,";h4{color:",s.color.content.secondary,";display:inline-block;font-family:",o.default.font.franklinBase,";font-size:",o.default.font.size(14),";font-weight:",o.default.font.weight.bold,";line-height:",o.default.font.size(18),";margin-right:0.5rem;}dl{display:flex;flex-direction:column;justify-content:center;}address{display:block;margin-bottom:8px;}dt{color:",s.color.content.secondary,";display:inline;font-size:",o.default.font.size(14),";font-weight:",o.default.font.weight.bold,";line-height:",o.default.font.size(20),";margin-right:4px;}dd{color:",s.color.content.secondary,";display:inline;font-weight:",o.default.font.weight.medium,";}address dt,address dd{display:block;}address a:hover,address a:focus{text-decoration:none;}div[itemprop='starRating']{margin-top:8px;}dd[itemprop='showtimes']{table{max-width:300px;}}"),t.phoneLinkClass=(0,a.css)("color:",s.color.content.secondary,";text-decoration:none;"),t.websiteLinkClass=(0,a.css)("color:",s.color.content.secondary,";text-decoration:underline;"),t.starsClass=(0,a.css)("color:",o.default.color.reviewCritPickGold,";"),t.ratingClass=(0,a.css)("display:inline-block;"),t.criticsPickClass=(0,a.css)("margin-left:-1px;margin-right:8px;i{display:inline-block;vertical-align:middle;background-image:url('data:image/svg+xml;utf8,",r.criticsPick,"');height:16px;width:16px;margin-top:-3px;margin-right:4px;}"),t.reviewButtonClass=(0,a.css)("background-color:transparent;border:1px ",s.color.stroke.quaternary," solid;color:",s.color.content.secondary,";font-size:",o.default.font.size(12),";line-height:",o.default.font.size(12),";font-weight:",o.default.font.weight.medium,";padding:10px;text-transform:unset;border-radius:30px;&:active,&.active{background-color:",o.default.color.gray90,";}",o.default.breakpoint.medium,"{&:hover{background-color:",o.default.color.gray90,";}}"),t.metadataClass=(0,a.css)(o.default.breakpoint.small,"{columns:2;column-gap:30px;display:block;}& > *{display:block;margin-bottom:8px;",o.default.breakpoint.small,"{page-break-inside:avoid;break-inside:avoid;display:inline-block;width:100%;}}"),t.linkWithDisclaimerClass=(0,a.css)("display:flex;justify-content:flex-start;align-items:center;margin-bottom:1rem;margin-top:0.5rem;button{white-space:nowrap;}@media print{display:none;}"),t.linkWithoutDisclaimerClass=(0,a.css)("display:flex;margin-bottom:1rem;margin-top:0.75rem;button{white-space:nowrap;}@media print{display:none;}"),t.disclaimerClass=(0,a.css)("color:",s.color.content.quaternary,";font-family:",o.default.font.franklinBase,";font-size:",o.default.font.size(11),";font-weight:",o.default.font.weight.medium,";line-height:",o.default.font.size(14),";letter-spacing:0.03em;",o.default.breakpoint.medium,"{font-size:",o.default.font.size(12),";line-height:",o.default.font.size(15),";}margin-left:12px;max-width:360px;"),t.poweredByClass=(0,a.css)("margin-top:0.5rem;display:flex;align-items:center;height:20px;@media print{display:none;}p{font-family:",o.default.font.franklinBase,";font-size:",o.default.font.size(12),";font-weight:",o.default.font.weight.medium,";line-height:",o.default.font.size(16),";color:",s.color.content.quaternary,";}a{display:block;}"),t.logoClass=(0,a.css)("margin-right:8px;background-size:contain;background-repeat:no-repeat;height:20px;&.imdb{width:41px;background-image:url('data:image/svg+xml;utf8,",r.imdb,"');}&.ticketmaster{height:15px;width:112px;background-image:url('data:image/svg+xml;utf8,",r.ticketmaster,"');& + p{margin-top:0.3rem;}}&.opentable{width:86px;background-image:url('data:image/svg+xml;utf8,",r.opentable,"');}&.resy{width:50px;background-image:url('data:image/svg+xml;utf8,",r.resy,"');}"),t.updatedClass=(0,a.css)("color:",s.color.content.quaternary,";font-family:",o.default.font.franklinBase,";font-size:",o.default.font.size(12),";font-weight:",o.default.font.weight.medium,";line-height:",o.default.font.size(16),";"),t.timestampClass=(0,a.css)("color:",s.color.content.quaternary,";font-size:",o.default.font.size(12),";")},vAfh:function(e,t,n){"use strict";n.d(t,"b",(function(){return i})),n.d(t,"a",(function(){return a}));var i="recirc_sub",a="recirc_regi"},vFws:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.VIDEO_HEADER_LAYOUTS=t.RATIOS=void 0;t.VIDEO_HEADER_LAYOUTS={MOBILE:"mobile",DESKTOP:"desktop"},t.RATIOS={"1:1":"MEDIUM_SQUARE","3:2":"THREE_BY_TWO","2:3":"TWO_BY_THREE","16:9":"SIXTEEN_BY_NINE","15:7":"FIFTEEN_BY_SEVEN"}},vJhq:function(e,t,n){"use strict";var i=n("TqRt"),a=n("cDf5");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=i(n("lSNA")),r=i(n("q1tI")),s=(i(n("17x9")),n("Jqp9")),l=i(n("ed9S")),c=i(n("1jzN")),u=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=a(e)&&"function"!=typeof e)return{default:e};var n=p(t);if(n&&n.has(e))return n.get(e);var i={__proto__:null},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var r in e)if("default"!==r&&{}.hasOwnProperty.call(e,r)){var s=o?Object.getOwnPropertyDescriptor(e,r):null;s&&(s.get||s.set)?Object.defineProperty(i,r,s):i[r]=e[r]}return i.default=e,n&&n.set(e,i),i}(n("f3Il")),d=n("D5MC");function p(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(p=function(e){return e?n:t})(e)}var f=function(e){var t=e.url,n=e.tone,i=e.text,a=e.className,p=e.isAmp,f=e.trackInteraction,m=e.isElectionStoryline;return i?t?r.default.createElement("a",{href:t,onClick:f,className:(0,s.cx)(u.titleLinkClass,u.titleClass,a,(0,o.default)({},u.featureToneClass,n===d.StorylineTone.Feature))},m?r.default.createElement(c.default,null):r.default.createElement(l.default,{className:(0,s.cx)(u.titleUnderlineClass,u.caretClass),text:i,disable:p})):r.default.createElement("span",{className:(0,s.cx)(u.titleClass,a,(0,o.default)({},u.featureToneClass,n===d.StorylineTone.Feature))},r.default.createElement(l.default,{text:i,disable:p})):null};f.displayName="MenuTitle",f.defaultProps={url:null,className:void 0,isAmp:!1,text:null,tone:void 0,trackInteraction:function(e){return e},isElectionStoryline:!1};t.default=f},vOGy:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.mediaClass=void 0;var i=n("Jqp9");t.mediaClass=(0,i.css)("position:absolute;top:0;left:0;width:100%;height:100%;background-color:transparent;object-fit:cover;color:rgba(0,0,0,0);&::after{content:'';display:block;background-color:transparent;position:absolute;top:0;left:0;width:100%;height:100%;text-align:center;min-height:50px;}")},vkfW:function(e,t,n){"use strict";var i=this&&this.__createBinding||(Object.create?function(e,t,n,i){void 0===i&&(i=n);var a=Object.getOwnPropertyDescriptor(t,n);a&&!("get"in a?!t.__esModule:a.writable||a.configurable)||(a={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,i,a)}:function(e,t,n,i){void 0===i&&(i=n),e[i]=t[n]}),a=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&i(t,e,n);return a(t,e),t},r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var s=o(n("q1tI")),l=n("Jqp9"),c=n("X6oL"),u=r(n("5UIh")),d=o(n("6Y/s")),p=n("syiw"),f=n("HDG5"),m=n("djNW"),h=r(n("EhNO")),g=n("FY2l"),y=n("6gWn"),v=r(n("XvvG")),b=n("etPP");t.default=function(e){var t,n,i,a,o,r,_,w,x=e.unit,k=(0,s.useState)(!1),O=k[0],T=k[1],C=(0,p.useMessageSelection)({config:{name:"dock"}}),E=(0,f.useUserState)(),S=(0,c.useTracking)(),P="/"===(0,g.getPathName)()?"homepage":"article",I=s.default.createElement("h2",{className:d.headerText},"Thanks for reading The Times."),M=s.default.createElement("div",{className:(0,l.cx)(d.mainContent)},s.default.createElement("div",{className:d.headerLogo},s.default.createElement(h.default,null)),s.default.createElement("div",{className:d.headerContainer},s.default.createElement("h3",{className:d.header},"Complete your Times experience."),s.default.createElement("p",{className:d.subHeader},"Upgrade your subscription.")),s.default.createElement("div",{className:d.ctaContainer},(null===(t=null==x?void 0:x.content)||void 0===t?void 0:t.priceDisplay)?s.default.createElement(v.default,{oldPriceClassname:d.strikeThroughExpression,currentPriceClassname:d.salePriceExpression,oldPrice:null===(n=null==x?void 0:x.content)||void 0===n?void 0:n.strikeThroughPriceDisplay,currentPrice:"".concat(null===(i=null==x?void 0:x.content)||void 0===i?void 0:i.priceDisplay,"/week more")}):null,s.default.createElement("div",{className:d.subscriptionText},"compared to your current subscription"),s.default.createElement(b.Button,{testId:"dock-upgrade-now",component:"a",className:d.button,href:null===(a=x.content)||void 0===a?void 0:a.clickThroughURI,onClick:function(){var e,t;S.trackEvent({event:"moduleInteraction",eventData:{pagetype:P,trigger:"module",type:"click"},module:{name:"dock",context:"expanded",audience:(null===(e=x.content)||void 0===e?void 0:e.audience)||"",label:"ACT_CONV_NEWS_SUB_ALL_ACCESS_UPGRADE_2310",region:"",element:{name:m.Action.ProductSwitch,label:"Upgrade now",url:null===(t=x.content)||void 0===t?void 0:t.clickThroughURI}}})}},"Upgrade now")));if(C.loading)return null;if(!O){var A=null===(r=null===(o=null==C?void 0:C.response)||void 0===o?void 0:o.userstate())||void 0===r?void 0:r.messageSelectionMessageCaps,j=null;if(A)if((L=A).forEach((function(e){var t,n;"dock"===(null==e?void 0:e.unit)&&(null==e?void 0:e.campaign)===(null===(t=null==C?void 0:C.response)||void 0===t?void 0:t.campaign())&&(null==e?void 0:e.audience)===(null===(n=null==C?void 0:C.response)||void 0===n?void 0:n.audience())&&(j=e)})),null!==j){var N=j;N.viewCount+=1,N.lastSeenOn=(new Date).toISOString(),E.update({messageSelectionMessageCaps:L})}if(!j){var L=[];A&&(L=A),L.push({unit:"dock",campaign:null===(_=null==C?void 0:C.response)||void 0===_?void 0:_.campaign(),audience:null===(w=null==C?void 0:C.response)||void 0===w?void 0:w.audience(),lastSeenOn:(new Date).toISOString(),viewCount:1,dismissed:!1}),E.update({messageSelectionMessageCaps:L})}T(!0)}return s.default.createElement(u.default,{testId:"onsite-messaging-unit-".concat(null===y.config||void 0===y.config?void 0:y.config.name),"data-campaign":null==x?void 0:x.campaign,"data-audience":null==x?void 0:x.audience,className:d.dockBorder,unit:x,contentID:"ACT_CONV_NEWS_SUB_ALL_ACCESS_UPGRADE_2310",dockID:"expand",header:I,card:M,isDockDismissible:!0,isDockExpandable:!1,minimized:!1,overrideHeaderWidth:!0})}},voDd:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.addReferringSource=function(e){var t=new URL(e);return t.searchParams.set("referringSource","audioAppPromo"),t.toString()},t.getAudioDeepLink=function(e){return null==e?void 0:e.replace("nytimes.com","nytimes.com/audio/app")},t.getAudioFromBody=void 0,t.shouldRenderAudioAppPromoAsBanner=function(e){return!!function(e){var t;return!!((null==e||null===(t=e.collections)||void 0===t?void 0:t.map((function(e){return(null==e?void 0:e.slug)||""})))||[]).some((function(e){return!!i.some((function(t){return e.startsWith(t)}))}))}(e)&&!!function(e){return!!a(e)}(e)&&!!function(e){var t,n=(null==e?void 0:e.body)||(null==e?void 0:e.sprinkledBody);return!(null==n||null===(t=n.content)||void 0===t||!t.some((function(e){return"HeaderMultimediaBlock"===e.__typename})))}(e)};var i=["audio-app-publisher-","audio-app-show-"],a=t.getAudioFromBody=function(e){var t,n,i=(null==e?void 0:e.body)||(null==e?void 0:e.sprinkledBody);return null==i||null===(t=i.content)||void 0===t||t.forEach((function(e){var t;"AudioBlock"===(null===(t=e.media)||void 0===t?void 0:t.__typename)&&(n=e.media.media),n||"AudioBlock"!==e.__typename||(n=e.media)})),n}},vqZQ:function(e,t,n){"use strict";var i=n("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.View=void 0,t.default=function(e){var t,n=e.user,i=e.newsletter,u=e.signupOptions,d=e.onSignupStart,p=e.onSignupComplete,f=e.onSignupFail,m=(0,s.useState)({type:c.Initial}),h=(0,r.default)(m,2),g=h[0],y=h[1],v=function(){var e=(0,o.default)(a.default.mark((function e(){var t;return a.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return y({type:c.Loading}),null==d||d(),e.prev=2,e.next=5,i.signup(u);case 5:(t=e.sent).success&&y({type:c.SignupSuccess,result:t}),null==p||p(t),e.next=14;break;case 10:e.prev=10,e.t0=e.catch(2),y({type:c.Error,error:e.t0}),null==f||f(e.t0);case 14:case"end":return e.stop()}}),e,null,[[2,10]])})));return function(){return e.apply(this,arguments)}}(),b=(0,s.useCallback)((function(){return y({type:c.Initial})}),[]),_=g.type===c.Loading,w=g.type===c.Error?g.error:null,x=(null==n||null===(t=n.profile)||void 0===t?void 0:t.email)||(null==n?void 0:n.email);return{handleSignup:v,loading:_,error:w,viewState:g,loggedOut:!x,alreadyReceiving:(0,l.checkAlreadyReceiving)(n,i),resetViewState:b}};var a=i(n("o0o1")),o=i(n("yXPU")),r=i(n("J4zp")),s=n("q1tI"),l=n("sTKe"),c=t.View=function(e){return e[e.Initial=0]="Initial",e[e.Loading=1]="Loading",e[e.SignupSuccess=2]="SignupSuccess",e[e.Error=3]="Error",e}({})},vubr:function(e,t,n){"use strict";var i=n("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.titleClass=t.listItemClass=t.listClass=t.leadInClass=t.imageClass=t.headerClass=t.containerClass=void 0;var a=n("Jqp9"),o=i(n("3Rk2")),r=i(n("wXC7")),s=n("3sMT"),l=(0,o.default)([r.default.breakpoint.medium]);t.containerClass=(0,a.css)(r.default.printHide," border:1px solid ",s.color.stroke.quaternary,";color:",s.color.content.secondary,";background-color:",s.color.background.primary,";max-width:600px;box-sizing:border-box;",l({width:[r.default.breakpoint.mobileFullWidth,"100%"],padding:["15px 15px 20px","25px"],margin:[r.default.breakpoint.mobileBlockMargins,r.default.breakpoint.desktopStorylineMargins]})),t.headerClass=(0,a.css)("border-bottom:1px solid ",s.color.stroke.quaternary,";padding-bottom:12px;margin-bottom:0;"),t.titleClass=(0,a.css)("font-family:",r.default.font.franklinBase,";font-weight:",r.default.font.weight.bold,";margin-top:0;margin-bottom:0;",l({fontSize:[r.default.font.size(16),r.default.font.size(17)],lineHeight:[r.default.font.size(22),r.default.font.size(24)]})),t.leadInClass=(0,a.css)("font-family:",r.default.font.franklinBase,";font-weight:",r.default.font.weight.medium,";",l({fontSize:[r.default.font.size(16),r.default.font.size(17)],lineHeight:[r.default.font.size(22),r.default.font.size(24)]})),t.imageClass=(0,a.css)("height:14px;padding-top:5px;",l({marginBottom:["5px","10px"]})),t.listClass=(0,a.css)("list-style:disc;display:flex;flex-direction:column;",l({marginTop:["0.75rem","1rem"],gap:["10px","15px"]})),t.listItemClass=(0,a.css)("margin-bottom:0;")},vudT:function(e,t,n){"use strict";t.a="/vi-assets/static-assets/tiles-c4238dd0ccfb5ff450b12e8ba7cf757d.png"},w1Qc:function(e,t,n){"use strict";var i=this&&this.__makeTemplateObject||function(e,t){return Object.defineProperty?Object.defineProperty(e,"raw",{value:t}):e.raw=t,e};Object.defineProperty(t,"__esModule",{value:!0}),t.continueWebTextClass=t.continueWebLinkClass=t.caretClass=t.buttonClass=t.contentTextClass=t.contentClass=t.containerClass=t.headerTextClass=void 0;var a,o,r,s,l,c,u,d,p=n("Jqp9"),f=n("lVLo");t.headerTextClass=(0,p.css)(a||(a=i(["\n  font-family: ",";\n  font-size: 15px;\n  font-weight: ",";\n  margin: auto 0;\n  @media (max-width: ","px) {\n    margin: 0 0 0 20px;\n  }\n"],["\n  font-family: ",";\n  font-size: 15px;\n  font-weight: ",";\n  margin: auto 0;\n  @media (max-width: ","px) {\n    margin: 0 0 0 20px;\n  }\n"])),f.fonts.franklin,f.fontWeights.bold,f.widths.medium),t.containerClass=(0,p.css)(o||(o=i(["\n  width: 100%;\n"],["\n  width: 100%;\n"]))),t.contentClass=(0,p.css)(r||(r=i(["\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  width: auto;\n  border-radius: 6px;\n  padding: 24px;\n  margin: 0 20px 20px;\n  background-color: ",";\n\n  @media (min-width: ","px) {\n    flex-direction: row;\n    justify-content: space-between;\n    padding: 24px 32px;\n  }\n"],["\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  width: auto;\n  border-radius: 6px;\n  padding: 24px;\n  margin: 0 20px 20px;\n  background-color: ",";\n\n  @media (min-width: ","px) {\n    flex-direction: row;\n    justify-content: space-between;\n    padding: 24px 32px;\n  }\n"])),f.colors.grayLightBackgroundTertiary,f.widths.mediumLarge),t.contentTextClass=(0,p.css)(s||(s=i(["\n  width: 232px;\n  margin: 0 0 16px 0;\n  font-family: ",";\n  font-size: 16px;\n  line-height: 20.8px;\n  font-weight: ",";\n  text-align: center;\n  color: #363636;\n\n  strong {\n    display: block;\n  }\n\n  @media (min-width: ","px) {\n    width: 290px;\n    margin: 0;\n    font-size: 20px;\n    text-align: left;\n  }\n"],["\n  width: 232px;\n  margin: 0 0 16px 0;\n  font-family: ",";\n  font-size: 16px;\n  line-height: 20.8px;\n  font-weight: ",";\n  text-align: center;\n  color: #363636;\n\n  strong {\n    display: block;\n  }\n\n  @media (min-width: ","px) {\n    width: 290px;\n    margin: 0;\n    font-size: 20px;\n    text-align: left;\n  }\n"])),f.fonts.franklin,f.fontWeights.medium,f.widths.mediumLarge),t.buttonClass=(0,p.css)(l||(l=i(["\n  display: flex;\n  align-items: center;\n  height: 44px;\n  box-sizing: border-box;\n  padding: 16px;\n  margin: 0 0 12px 0;\n  border-radius: 3px;\n  border-style: none;\n  font-family: ",";\n  font-weight: ",";\n  font-size: 16px;\n  line-height: 16px;\n  text-decoration: none;\n  letter-spacing: 0.3px;\n  background-color: ",";\n  color: ",";\n"],["\n  display: flex;\n  align-items: center;\n  height: 44px;\n  box-sizing: border-box;\n  padding: 16px;\n  margin: 0 0 12px 0;\n  border-radius: 3px;\n  border-style: none;\n  font-family: ",";\n  font-weight: ",";\n  font-size: 16px;\n  line-height: 16px;\n  text-decoration: none;\n  letter-spacing: 0.3px;\n  background-color: ",";\n  color: ",";\n"])),f.fonts.franklin,f.fontWeights.semiBold,f.colors.black,f.colors.white),t.caretClass=(0,p.css)(c||(c=i(["\n  height: 14px;\n  padding: 0 0 0 8px;\n"],["\n  height: 14px;\n  padding: 0 0 0 8px;\n"]))),t.continueWebLinkClass=(0,p.css)(u||(u=i(["\n  text-decoration: underline;\n  text-underline-offset: 5px;\n"],["\n  text-decoration: underline;\n  text-underline-offset: 5px;\n"]))),t.continueWebTextClass=(0,p.css)(d||(d=i(["\n  font-family: ",";\n  font-weight: ",";\n  font-size: 16px;\n  line-height: 16px;\n  text-align: center;\n"],["\n  font-family: ",";\n  font-weight: ",";\n  font-size: 16px;\n  line-height: 16px;\n  text-align: center;\n"])),f.fonts.franklin,f.fontWeights.semiBold)},w4n4:function(e,t,n){"use strict";n.d(t,"a",(function(){return s})),n.d(t,"b",(function(){return l}));var i=n("Jqp9"),a=n("nxVm"),o=n.n(a),r=n("jOYC"),s=Object(i.css)("margin:35px ",r.b.grid.pageMargin," 3px;",o.a,";"),l=Object(i.css)("text-align:right;direction:rtl;unicode-bidi:isolate;")},"w6U+":function(e,t,n){"use strict";var i=n("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.enableBodyScroll=t.disableBodyScroll=t.clearAllBodyScrollLocks=void 0;var a=i(n("RIqP")),o=!1;if("undefined"!=typeof window){var r={get passive(){o=!0}};window.addEventListener("testPassive",null,r),window.removeEventListener("testPassive",null,r)}var s,l,c="undefined"!=typeof window&&window.navigator&&window.navigator.platform&&/iP(ad|hone|od)/.test(window.navigator.platform),u=[],d=!1,p=-1,f=function(e){return u.some((function(t){return!(!t.options.allowTouchMove||!t.options.allowTouchMove(e))}))},m=function(e){var t=e||window.event;return!!f(t.target)||(t.touches.length>1||(t.preventDefault&&t.preventDefault(),!1))},h=function(){setTimeout((function(){void 0!==l&&(document.body.style.paddingRight=l,l=void 0),void 0!==s&&(document.body.style.overflow=s,s=void 0)}))};t.disableBodyScroll=function(e,t){if(c){if(!e)return void console.error("disableBodyScroll unsuccessful - targetElement must be provided when calling disableBodyScroll on IOS devices.");if(e&&!u.some((function(t){return t.targetElement===e}))){var n={targetElement:e,options:t||{}};u=[].concat((0,a.default)(u),[n]),e.ontouchstart=function(e){1===e.targetTouches.length&&(p=e.targetTouches[0].clientY)},e.ontouchmove=function(t){1===t.targetTouches.length&&function(e,t){var n=e.targetTouches[0].clientY-p;!f(e.target)&&(0===(null==t?void 0:t.scrollTop)&&n>0||function(e){return!!e&&e.scrollHeight-e.scrollTop<=e.clientHeight}(t)&&n<0?m(e):e.stopPropagation())}(t,e)},d||(document.addEventListener("touchmove",m,o?{passive:!1}:void 0),d=!0)}}else{!function(e){setTimeout((function(){if(void 0===l){var t=!0==!(null==e||!e.reserveScrollBarGap),n=window.innerWidth-document.documentElement.clientWidth;t&&n>0&&(l=document.body.style.paddingRight,document.body.style.paddingRight="".concat(n,"px"))}void 0===s&&(s=document.body.style.overflow,document.body.style.overflow="hidden")}))}(t);var i={targetElement:e,options:t||{}};u=[].concat((0,a.default)(u),[i])}},t.clearAllBodyScrollLocks=function(){c?(u.forEach((function(e){e.targetElement.ontouchstart=null,e.targetElement.ontouchmove=null})),d&&(document.removeEventListener("touchmove",m,o?{passive:!1}:void 0),d=!1),u=[],p=-1):(h(),u=[])},t.enableBodyScroll=function(e){if(c){if(!e)return void console.error("enableBodyScroll unsuccessful - targetElement must be provided when calling enableBodyScroll on IOS devices.");e.ontouchstart=null,e.ontouchmove=null,u=u.filter((function(t){return t.targetElement!==e})),d&&0===u.length&&(document.removeEventListener("touchmove",m,o?{passive:!1}:void 0),d=!1)}else 1===u.length&&u[0].targetElement===e?(h(),u=[]):u=u.filter((function(t){return t.targetElement!==e}))}},wB9J:function(e,t,n){"use strict";var i,a,o=n("VkAN"),r=n.n(o),s=n("gcR/"),l=n.n(s),c=(n("q1tI"),n("InUh")),u=n.n(c),d=n("eFc+"),p=n.n(d),f=n("oXTd"),m=n("+zxi"),h=n("aFeP"),g=n("MlQP"),y=n("fdyL"),v=n("5E+G"),b=n("KMmm"),_=n.n(b),w=n("jOYC").b.layout.nonInterrupterTextElementBaseClass,x=u()((function(){return Promise.all([n.e(171),n.e(21),n.e(89)]).then(n.bind(null,"u3o0"))}),{loadableGenerated:{webpack:function(){return["u3o0"]},modules:["./InlineEmailSignup"]}}),k=function(e){var t,n,i=e.data,a=e.isOnsiteNewsletter,o=e.isTopOfStory,r=Object(h.a)();if(!i||!r)return null;var s=i.productDefaults,c=i.newsletterHeading,u=i.newsletterSummary,d=i.productCode;if(!!_()(r,{productCode:d})&&!o)return null;var p=(null==s?void 0:s.title)||"",b=(null==c||null===(t=c[0])||void 0===t?void 0:t.text)||p,k=(null==u||null===(n=u[0])||void 0===n?void 0:n.text)||(null==s?void 0:s.caption)||"";if(!b||!k)return null;var O=f.i.articleInline,T=f.i.onsiteNLTop,C=a?T:O,E=Object(y.convertProductDefaultsToSamizdatData)(s,d),S=Object(g.getNewsletterProduct)(E),P=(null==s?void 0:s.subscriptionPageLink)||v.SUBSCRIPTIONS_SPLASH_PAGE_DEFAULT;return l()("div",{className:w},void 0,l()(x,{newsletter:S,user:r,signupOptions:{signupFormVersion:C},onSignupComplete:function(e){if(null!=e&&e.subscriptionNeeded){var t=Object(m.a)(P,{ref:f.j.article});window.location.assign(t)}},heading:b,summary:k}))};k.displayName="EmailSignupBlock",k.defaultProps={data:null,isOnsiteNewsletter:!1,isTopOfStory:!1},k.fragments={article:p()(i||(i=r()(["\n    fragment EmailSignupBlock_article on Article {\n      id\n      timesTags @filterEmpty {\n        displayName\n        ... on Published {\n          uri\n        }\n      }\n    }\n  "]))),data:p()(a||(a=r()(["\n    fragment EmailSignupBlock_data on EmailSignupBlock {\n      productCode\n      newsletterSummary: summary {\n        ... on TextInline {\n          text\n        }\n      }\n      newsletterHeading: heading {\n        ... on TextInline {\n          text\n        }\n      }\n      productDefaults {\n        title\n        caption\n        allowedEntitlement\n        subscriptionPageLink\n        isOnsiteFreeTrialEnabled\n        altText\n        frequency\n        caption\n        sampleUrl\n        thumbImg\n      }\n    }\n  "])))};t.a=k},wFfY:function(e,t,n){"use strict";var i=n("TqRt"),a=n("cDf5");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=i(n("lSNA")),r=i(n("q1tI")),s=(i(n("17x9")),n("Jqp9")),l=i(n("aY2f")),c=i(n("dKsL")),u=i(n("/Kb5")),d=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=a(e)&&"function"!=typeof e)return{default:e};var n=p(t);if(n&&n.has(e))return n.get(e);var i={__proto__:null},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var r in e)if("default"!==r&&{}.hasOwnProperty.call(e,r)){var s=o?Object.getOwnPropertyDescriptor(e,r):null;s&&(s.get||s.set)?Object.defineProperty(i,r,s):i[r]=e[r]}return i.default=e,n&&n.set(e,i),i}(n("y9tx"));function p(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(p=function(e){return e?n:t})(e)}var f=function(e){var t=e.displayName,n=e.status,i=e.url,a=e.lastModified,p=e.isActive,f=e.className,m=e.isNew,h=e.trackInteraction,g=e.isLiveRoute;if(!i||!t)return null;var y="live"===(null==n?void 0:n.toLowerCase()),v=a&&Date.now()-Number(new Date(a)),b=!g&&y&&v<=18e5;return r.default.createElement("span",{className:(0,s.cx)(d.menuLinkContainerClass,f),"data-testid":"menu-link"},!p&&r.default.createElement(c.default,{status:n}),r.default.createElement("a",{className:(0,s.cx)(d.menuLinkClass,(0,o.default)({},d.underlineClass,p)),role:"menuitem",href:i,onClick:h},r.default.createElement("span",{className:d.hoverUnderlineClass},t),m&&r.default.createElement(u.default,null)),b&&r.default.createElement("div",{className:d.placeholderClass},r.default.createElement(l.default,{autoUpdate:!0,showAbsoluteTime:!1,iso:a,formatter:"elapsed",className:d.timestampClass})))};f.displayName="MenuLink",f.defaultProps={displayName:void 0,className:void 0,status:void 0,url:void 0,lastModified:void 0,isActive:!1,isNew:!1,trackInteraction:void 0};t.default=f},wNME:function(e,t,n){"use strict";t.a="/vi-assets/static-assets/icon-canada-letter_144x144-65d899377edbcce9773d31fd03a77e8d.webp"},wRre:function(e,t,n){"use strict";n.d(t,"d",(function(){return r})),n.d(t,"a",(function(){return s})),n.d(t,"c",(function(){return l})),n.d(t,"b",(function(){return c}));var i=n("QLXK"),a=n("XMA8"),o=["UnstructuredBlock","HeaderFullBleedHorizontalBlock","HeaderFullBleedVerticalBlock","HeaderLegacyBlock","HeaderBasicBlock","HeaderLiveBriefingBlock","TwitterEmbedBlock","YouTubeEmbedBlock","SoundcloudEmbedBlock","AudioBlock","VideoBlock","InteractiveBlock","InstagramEmbedBlock","RelatedLinksBlock","DiptychBlock","HeaderMultimediaBlock","VisualStackBlock","CardDeckBlock","DocumentTearBlock"],r=function(e){var t,n=e.__typename;return n||(n=e.name),!!o.includes(n)||(!("Dropzone"!==n||!e.adsDesktop)||("ImageBlock"!==n||!e.media||!Object(a.n)(null==e||null===(t=e.media)||void 0===t?void 0:t.crops))&&!(!e.size||e.size!==i.SIZE.FULL&&e.size!==i.SIZE.LARGE&&e.size!==i.SIZE.MEDIUM))},s=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=["HeaderBasicBlock","HeaderLegacyBlock","HeaderFullBleedHorizontalBlock","HeaderFullBleedVerticalBlock","HeaderLiveBriefingBlock","HeaderMultimediaBlock"];return t&&t.length>0&&(n=t),e.find((function(e){return-1!==n.indexOf(e.__typename)}))||!1},l=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return!!e&&Boolean(1===t)};function c(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"Image";return e?e.__typename===t?e:c(e.promotionalMedia,t):null}},wXpe:function(e,t,n){"use strict";(function(e){var i=this&&this.__makeTemplateObject||function(e,t){return Object.defineProperty?Object.defineProperty(e,"raw",{value:t}):e.raw=t,e},a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var o,r=n("Jqp9"),s=a(n("wXC7")),l=n("lVLo"),c=r.styled.div(o||(o=i(["\n  position: fixed;\n\n  height: ",";\n  z-index: ",";\n  bottom: ",");\n\n  width: 100%;\n  border-top: 1px solid ",";\n  transition: transform 200ms ease-out;\n  background-color: ",";\n  will-change: transform;\n\n  @media print {\n    display: none;\n  }\n\n  .NYTApp & {\n    display: none;\n  }\n\n  &.GMQ4HOLIDAYGIFTINGDOCKS2312Wirecutter {\n    background-color: #edeae8;\n  }\n\n  &.shown {\n    transform: ",");\n  }\n\n  &.expanded {\n    transform: ",");\n  }\n\n  &.closed {\n    display: none;\n  }\n"],["\n  position: fixed;\n\n  height: ",";\n  z-index: ",";\n  bottom: ",");\n\n  width: 100%;\n  border-top: 1px solid ",";\n  transition: transform 200ms ease-out;\n  background-color: ",";\n  will-change: transform;\n\n  @media print {\n    display: none;\n  }\n\n  .NYTApp & {\n    display: none;\n  }\n\n  &.GMQ4HOLIDAYGIFTINGDOCKS2312Wirecutter {\n    background-color: #edeae8;\n  }\n\n  &.shown {\n    transform: ",");\n  }\n\n  &.expanded {\n    transform: ",");\n  }\n\n  &.closed {\n    display: none;\n  }\n"])),e.env.SCREENSHOT_TESTS?"0":"calc(var(--heading-height) + var(--body-height))",s.default.zIndex.dock,e.env.SCREENSHOT_TESTS?"0":"calc(-1px - var(--heading-height) - var(--body-height)",l.colors.veryDarkGray,l.colors.white,e.env.SCREENSHOT_TESTS?"none":"translateY(calc(0px - var(--heading-height) - 1px)",e.env.SCREENSHOT_TESTS?"none":"translateY(calc(1px - var(--body-height) - var(--heading-height))");t.default=c}).call(this,n("E0jC"))},wiOm:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.onDarkModeInset=t.noDarkModeInsetClass=t.alwaysLightClass=void 0;var i=n("Jqp9"),a=n("3sMT"),o=n("DxDJ");t.alwaysLightClass=(0,i.css)("color:",a.light.colors.content.primary.hex,";background:",a.light.colors.background.primary.hex,";"),t.noDarkModeInsetClass=(0,i.css)("@media (prefers-color-scheme:dark){box-shadow:20px 0 0 8px ",a.light.colors.background.primary.hex,",-20px 0 0 8px ",a.light.colors.background.primary.hex,";",o.breakpointMap.small,"{box-shadow:0 0 0 8px ",a.light.colors.background.primary.hex,";}}"),t.onDarkModeInset=".noDarkModeInsetClass &"},wnaz:function(e,t,n){"use strict";var i=n("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.listSelectorClass=t.listNavbarClass=t.default=void 0;var a=n("Jqp9"),o=i(n("wXC7")),r=n("3sMT"),s=(0,a.css)("list-style:none;"),l=(t.listSelectorClass=(0,a.css)("ul{",s,";}"),t.listNavbarClass=(0,a.css)("display:flex;width:100%;justify-content:space-between;border-bottom:1px solid ",r.color.stroke.primary,";li{list-style-type:none;margin-bottom:0;text-decoration:none;font-size:10px;",o.default.breakpoint.small,"{font-size:17px;}a:hover{text-decoration:underline;}a{color:",r.color.content.quaternary,";border:0;}}"),(0,a.styled)("ul",{target:"ez3869y0"})(s,";"));t.default=l},x04V:function(e,t,n){"use strict";n.d(t,"b",(function(){return d}));var i=n("lSNA"),a=n.n(i),o=n("RIqP"),r=n.n(o),s=n("CsDw"),l=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(null==e||!e.getTargetingKeys||!t.getTargetingKeys)return{};var n=t.getTargetingKeys(),i=e.getTargetingKeys(),o=[].concat(r()(n),r()(i)),l=s.c.every((function(e){return o.includes(e)}));return a()(a()(a()({},s.g,o.indexOf(s.b)>-1),s.e,o.indexOf(s.a)>-1),s.i,l)},c=function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(!t.getTargeting)return!1;var n=null===(e=t.getTargeting(s.a))||void 0===e?void 0:e[0];return"string"==typeof n&&n.startsWith("ls-")},u=function(e){if(!e||!e.getTargeting||"function"!=typeof e.getTargeting)return!1;var t=e.getTargeting(s.b);return!(!t||!t.length)&&""===t[0]},d=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=l(e,t);return 0===Object.keys(n).length?{}:a()(a()(a()(a()(a()({},s.f,!!n[s.e]),s.h,!!n[s.g]),s.j,!!n[s.i]),s.k,c(t)),s.l,u(t))};t.a=l},x4ns:function(e,t,n){"use strict";var i=n("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.default=r;var a=i(n("q1tI")),o=i(n("yxLZ"));function r(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;return a.default.createElement(o.default,{key:n},t)}r.displayName="linkFormatFromOak"},x9rc:function(e,t,n){"use strict";var i=n("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.default=p;var a=i(n("lSNA")),o=i(n("J4zp")),r=i(n("q1tI")),s=(i(n("17x9")),n("Jqp9")),l=n("eUG7");function c(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function u(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?c(Object(n),!0).forEach((function(t){(0,a.default)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):c(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function d(e){var t=e.split(":"),n=(0,o.default)(t,2),i=n[0];return n[1]/i}function p(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.ratio?{paddingBottom:"".concat(100*d(e.ratio),"%")}:{};return r.default.createElement("div",{className:(0,s.cx)(l.aspectRatioOuterClass,e.className),style:u(u({width:"100%"},t),e.style)},r.default.createElement("div",{className:l.aspectRatioInnerClass},e.children))}p.displayName="AspectRatio",p.defaultProps={className:void 0,ratio:"16:9",style:{},children:null}},xBez:function(e,t,n){"use strict";n.d(t,"b",(function(){return je})),n.d(t,"a",(function(){return Ne}));var i=n("pn57"),a=n("TdMD"),o=n.n(a),r=n("lSNA"),s=n.n(r),l=n("ygvk"),c=n("8iTF"),u=function(){return Date.now()},d="articles",p="comments",f=function(e){return Boolean(e.commentID)&&e.commentType!==d};function m(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function h(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?m(Object(n),!0).forEach((function(t){s()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):m(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var g={isFetching:!1},y=function(e,t){var n=t.payload.results,i={lastUpdatedMs:u()};return t.error?i.error=t.payload:i.data={type:d,id:n.url,attributes:{sourceId:n.url,url:n.url,approvedCount:n.totalCommentsFound,highlightedCount:n.totalEditorsSelectionFound,recommendedCount:n.totalRecommendationsFound,reporterReplyCount:n.totalReporterReplyCommentsFound}},h({isFetching:!1},i)},v=function(e,t){if(t.error)return e;var n=t.payload.results||{};return{commentStatus:1===n.canSubmit?c.a.ACCEPT_AND_DISPLAY_COMMENTS:c.a.DISPLAY_COMMENTS_ONLY,taxonomy:n.taxonomy,approvedCount:n.totalCommentsFound,url:t.meta&&t.meta.articleUrl}},b=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:g,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case l.a.CLEAR_ARTICLE:return g;case l.a.GET_ARTICLE_REQUEST:return h(h({},e),{},{isFetching:!0});case l.a.GET_ARTICLE_RESPONSE:return h(h({},e),y(0,t));case l.a.GET_SUMMARY_RESPONSE:return h(h({},e),v(e,t));default:return e}};function _(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function w(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?_(Object(n),!0).forEach((function(t){s()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):_(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var x={replyToCommentId:null,submittedComments:{}},k=function(e,t){if(t.error)return{};var n=t.meta.values;return{replyToCommentId:null,submittedComments:w(w({},e.submittedComments),{},s()({},n.parentID,n.commentBody))}},O=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:x,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case l.a.CLEAR_ARTICLE:return x;case l.a.OPEN_COMMENT_ENTRY:return w(w({},e),{},{replyToCommentId:t.replyToCommentId});case l.a.CLOSE_COMMENT_ENTRY:return w(w({},e),{},{replyToCommentId:null});case l.a.CREATE_COMMENT_RESPONSE:return w(w({},e),k(e,t));default:return e}},T=n("a9ya"),C=n("+5AW"),E=n("7sTW");function S(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function P(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?S(Object(n),!0).forEach((function(t){s()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):S(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var I=s()({},T.a.ALL,{isFetching:!1,isFetchingNext:!1,sortTypes:[T.c.NEWEST,T.c.OLDEST],selectedSortType:T.c.NEWEST}),M=function(e,t){var n=t.meta,i=n.listId;return n.nextUrl?s()({},i,P(P({},e[i]),{},{isFetchingNext:!0})):s()({},i,P(P({},e[i]),{},{isFetching:!0}))},A=function(e){var t=e.payload,n=t.results,i=n.comments,a=n.page,o=t.results,r={};r.commentIds=i.map((function(e){return f(e)&&e.commentID.toString()}));var s=r.commentIds.length>0?r.commentIds[r.commentIds.length-1]:0,l=function(e,t,n,i){var a=t+25;if(a<i){var o=new URL(e),r=new URLSearchParams(o.search);return r.set("offset",a),r.set("limit",25),r.set("commentSequence",n),o.search=r,o.toString()}return null}(Object(E.b)(e.meta,Object(C.b)()),a-1,s||0,function(e,t){switch(e){case T.a.HIGHLIGHTED:return t.totalEditorsSelectionFound;case T.a.RECOMMENDED:return t.totalRecommendationsFound;case T.a.REPORTER_REPLIES:return t.totalReporterReplyCommentsFound;default:return t.totalParentCommentsFound}}(e.meta.listId,o));return l&&(r.links={next:l}),r},j=function(e,t){var n,i=A(t),a=t.meta,o=a.listId,r=a.sortType,l=void 0===r?null:r,c=a.isPaginatedRequest,d=void 0!==c&&c,p=e[o],f=(null===(n=i.links)||void 0===n?void 0:n.next)||null,m=i.commentIds;return d&&(m=p.commentIds.concat(m)),s()({},o,P(P({},p),{},{isFetching:!1,isFetchingNext:!1,lastUpdatedMs:u(),commentIds:m,nextUrl:f,selectedSortType:l||(null==p?void 0:p.selectedSortType)||null}))},N=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:I,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case l.a.CLEAR_ARTICLE:return I;case l.a.GET_COMMENT_LIST_REQUEST:return P(P({},e),M(e,t));case l.a.GET_COMMENT_LIST_RESPONSE:return P(P({},e),j(e,t));default:return e}},L=n("RIqP"),D=n.n(L);function R(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function B(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?R(Object(n),!0).forEach((function(t){s()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):R(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var z={},F=new RegExp(/<br(\s?)(\/?)>/),U=function(e){var t,n={name:e.userDisplayName,location:(t=e.userLocation,"string"==typeof t?t.replace(F,""):"")};return e.picURL&&(n.avatar=e.picURL),"NULL"!==e.userTitle&&(n.title=e.userTitle),n},H=function(e){return e.replies.map((function(e){return{type:p,id:e.commentID.toString()}}))},W=function(e){return{type:p,id:e.commentID.toString(),attributes:{sourceId:e.commentID.toString(),replyToSourceId:e.parentID||0,authorSourceId:e.userID.toString(),text:e.commentBody,authorPanel:U(e),isAccepted:"approved"===e.status,isHighlighted:e.editorsSelection,sourceApprovedAt:(t=e.approveDate,new Date(1e3*parseInt(t,10)).toISOString()),recommendedCount:e.recommendedFlag?e.recommendations-1:e.recommendations,replyId:e.parentID||null,replyToAuthorPanel:e.parentID?{name:e.parentUserDisplayName}:null,isReporterReply:"reporterReply"===e.commentType},relationships:{replies:{data:H(e),isFetchingReplies:!1,replyCount:e.replyCount},replyTo:{data:{type:p,id:e.parentID?e.parentID.toString():""}}}};var t},q=function(e){var t=e.payload.results.comments,n=t.filter((function(e){return f(e)})).map((function(e){return W(e)})),i=t.reduce((function(e,t){var n=t.replies?t.replies:[];return e.concat(n.map((function(e){return W(e)})))}),[]);return[].concat(D()(n),D()(i)).reduce((function(e,t){return e[t.id]=t,e}),{})},V=function(e,t){if(t.error)return{};var n=e[t.meta.commentId];return n.relationships.replies.isFetchingReplies=!0,n},G=function(e,t){if(t.error)return e;var n=q(t),i=B(B({},n),e),a=t.meta.commentId,o=i[a].relationships.replies;o.isFetchingReplies=!1;var r=n[a].relationships.replies.data;return o.data=o.data.concat(r),i},Y=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:z,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case l.a.CLEAR_ARTICLE:return z;case l.a.GET_COMMENTS_RESPONSE:case l.a.GET_COMMENT_LIST_RESPONSE:return B(B({},e),q(t));case l.a.GET_REPLIES_REQUEST:return B(B({},e),V(e,t));case l.a.GET_REPLIES_RESPONSE:return G(e,t);default:return e}},X=n("2SQs"),Z=n.n(X);function J(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function K(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?J(Object(n),!0).forEach((function(t){s()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):J(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var $={flaggedComments:{},shortUrls:{},recommended:{}},Q=function(e,t){return t.error?{}:{flaggedComments:K(K({},e.flaggedComments),{},s()({},t.meta.values.commentID,!0))}},ee=function(e,t){return t.error?{}:{shortUrls:K(K({},e.shortUrls),{},s()({},t.meta.commentId,t.payload.payload.short_url))}},te=function(e,t){if(t.error)return{};try{var n=t.payload.results.activity.recommendations,i={};return n.forEach((function(e){i[e]=!0})),{recommended:i}}catch(e){return{}}},ne=function(e,t){if(t.error)return{};var n=t.meta.commentId,i=K({},e.recommended);return i[n]=!0,{recommended:i}},ie=function(e,t){return t.error?{}:{recommended:Z()(e.recommended,t.meta.commentId)}},ae=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:$,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case l.a.CLEAR_ARTICLE:return $;case l.a.FLAG_COMMENT_RESPONSE:return K(K({},e),Q(e,t));case l.a.GET_SHORT_URL_RESPONSE:return K(K({},e),ee(e,t));case l.a.GET_PROFILE_RESPONSE:return K(K({},e),te(0,t));case l.a.UNRECOMMEND_COMMENT_RESPONSE:return K(K({},e),ie(e,t));case l.a.RECOMMEND_COMMENT_RESPONSE:return K(K({},e),ne(e,t));default:return e}};function oe(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function re(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?oe(Object(n),!0).forEach((function(t){s()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):oe(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var se=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{renderSignal:!1},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case l.a.READ_COMMENTS:return re(re({},e),{},{renderSignal:!1});case l.a.UNREAD_COMMENTS:return re(re({},e),{},{renderSignal:!0});default:return e}},le=n("Lkij");function ce(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function ue(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ce(Object(n),!0).forEach((function(t){s()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ce(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var de={"comment-list-sort-editors":T.d.HIGHLIGHTED,"comment-list-sort-recommended":T.d.RECOMMENDED,"comment-list-sort-replies":T.d.REPORTER_REPLIES},pe={viewId:null,isFetching:!1},fe=function(e){return{viewId:e,label:T.e[e]}},me=function(e,t){if(t.error)return e;var n=t.payload.results,i=[];return n&&(n.totalEditorsSelectionFound>0&&i.push(fe(T.d.HIGHLIGHTED)),n.totalRecommendationsFound>0&&i.push(fe(T.d.RECOMMENDED)),n.totalReporterReplyCommentsFound>0&&i.push(fe(T.d.REPORTER_REPLIES))),i.push(fe(T.d.ALL)),{tabs:i}},he=function(e,t){if(t.error)return{isUnderMaintenance:!0};var n=t.payload.results||{};return{isUnderMaintenance:(n.isUnderMaintenance||Object(le.a)("MAINT_MODE","ON"))&&!("1"===Object(c.d)("NYT-COM-MMB")),lastUpdatedMs:u(),isFetching:!1,commentQuestion:n.commentQuestion,viewId:de[n.sortBy]||T.d.ALL}},ge=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:pe,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case l.a.CLEAR_ARTICLE:return pe;case l.a.GET_ARTICLE_RESPONSE:return ue(ue({},e),me(e,t));case l.a.SELECT_VIEW:return ue(ue({},e),{},{viewId:t.viewId});case l.a.GET_SUMMARY_REQUEST:return ue(ue({},e),{},{isFetching:!0});case l.a.GET_SUMMARY_RESPONSE:return ue(ue({},e),he(0,t));default:return e}},ye=n("X7zQ"),ve=n("JYoY");function be(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function _e(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?be(Object(n),!0).forEach((function(t){s()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):be(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var we={isFetching:!1},xe=function(e,t){var n={lastUpdatedMs:u(),isFetching:!1},i=t.response.headers.get("X-Csrf-Token");return i&&(n.csrfToken=i),t.error?n.error=t.payload:n.data=t.payload.results,n},ke=function(e,t){if(t.error)return{};var n=t.meta.values;return{data:_e(_e({},e.data),{},{displayName:n[ye.a.DISPLAY_NAME],location:n[ye.a.LOCATION],comment_notify:n[ye.a.COMMENT_NOTIFY]})}},Oe=function(e,t){var n=t.payload.results;return _e(_e({},e.data),{},{data:s()({},ve.a.AVATAR_URL,n)})},Te=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:we,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case l.a.GET_PROFILE_REQUEST:return _e(_e({},e),{},{isFetching:!0});case l.a.GET_PROFILE_RESPONSE:case l.a.UPDATE_PROFILE_RESPONSE:return _e(_e({},e),xe(0,t));case l.a.UPDATE_AVATAR_RESPONSE:return _e(_e({},e),Oe(e,t));case l.a.CREATE_COMMENT_RESPONSE:return _e(_e({},e),ke(e,t));default:return e}};function Ce(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function Ee(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ce(Object(n),!0).forEach((function(t){s()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ce(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Se=s()(s()(s()(s()(s()({},T.d.ALL,{listId:T.a.ALL,numPreviewReplies:2}),T.d.HIGHLIGHTED,{listId:T.a.HIGHLIGHTED}),T.d.RECOMMENDED,{listId:T.a.RECOMMENDED}),T.d.REPORTER_REPLIES,{listId:T.a.REPORTER_REPLIES,numPreviewReplies:1}),T.d.SINGLE_COMMENT,{commentId:null}),Pe=function(e,t){var n=null,i=null;return t.viewId===T.d.SINGLE_COMMENT&&(n=t.commentId,i=t.replyCommentId),s()({},T.d.SINGLE_COMMENT,Ee(Ee({},e[T.d.SINGLE_COMMENT]),{},{commentId:n,replyCommentId:i}))},Ie={article:b,commentActions:ae,commentEntry:O,commentLists:N,comments:Y,panel:ge,profile:Te,views:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Se,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case l.a.CLEAR_ARTICLE:return Se;case l.a.SELECT_VIEW:return Ee(Ee({},e),Pe(e,t));default:return e}},reporterSignal:se},Me=[o.a],Ae=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||i.compose,je=Object(i.createStore)(Object(i.combineReducers)(Ie),Ae(i.applyMiddleware.apply(void 0,Me)));function Ne(e){Ie.form=e,je.replaceReducer(Object(i.combineReducers)(Ie))}},xCAf:function(e,t,n){"use strict";var i=n("TqRt"),a=n("cDf5");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=i(n("q1tI")),r=(i(n("17x9")),function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=a(e)&&"function"!=typeof e)return{default:e};var n=u(t);if(n&&n.has(e))return n.get(e);var i={__proto__:null},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var r in e)if("default"!==r&&{}.hasOwnProperty.call(e,r)){var s=o?Object.getOwnPropertyDescriptor(e,r):null;s&&(s.get||s.set)?Object.defineProperty(i,r,s):i[r]=e[r]}return i.default=e,n&&n.set(e,i),i}(n("xXO4"))),s=i(n("0bZC")),l=i(n("64gi")),c=i(n("cFZn"));function u(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(u=function(e){return e?n:t})(e)}var d=function(e){var t=e.headline,n=e.credits,i=e.summary,a=e.date,u=e.transcript,d=(0,c.default)("string"==typeof u?[{speaker:"",text:u}]:null==u?void 0:u.transcriptFragment)||[];return null!=d&&d.length?o.default.createElement("div",{className:r.transcriptBodyClass},o.default.createElement(s.default,{episodeTitle:t,hostedBy:n,summary:i,pubDate:a}),o.default.createElement(l.default,{blocks:d})):null};d.defaultProps={headline:void 0,credits:void 0,summary:void 0,date:void 0,transcript:void 0};t.default=d},xGNk:function(e,t,n){"use strict";var i=n("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=n("Jqp9"),o=i(n("wXC7")),r=i(n("139F")),s=(0,a.styled)(r.default,{target:"e3ywr310"})(".sizeSmall.sizeSmallNoCaption &{",o.default.breakpoint.small,"{margin-left:5px;}",o.default.breakpoint.mediumLarge,"{margin-left:5px;}",o.default.breakpoint.extraLarge,"{margin-left:40px;}@media (max-width:",o.default.breakpoint.width.small,"px){margin-left:-8px;}}@media print{display:none;}");t.default=s},xHA4:function(e,t,n){"use strict";var i=n("TqRt"),a=n("cDf5");Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"LATEST_UPDATES_BLOCK",{enumerable:!0,get:function(){return l.LATEST_UPDATES_BLOCK}}),Object.defineProperty(t,"STORYLINE_BLOCKS",{enumerable:!0,get:function(){return c.default}}),Object.defineProperty(t,"canPlaceBlock",{enumerable:!0,get:function(){return d.default}}),Object.defineProperty(t,"canStorylineComposeBlock",{enumerable:!0,get:function(){return s.default}}),Object.defineProperty(t,"canStorylineComposeExperimentalAsset",{enumerable:!0,get:function(){return r.default}}),Object.defineProperty(t,"getComposableStorylineBlocks",{enumerable:!0,get:function(){return l.default}}),Object.defineProperty(t,"getExperimentalAssetDataFromStoryline",{enumerable:!0,get:function(){return o.default}}),Object.defineProperty(t,"hideInlineModule",{enumerable:!0,get:function(){return u.default}}),t.storyPageTests=void 0;var o=i(n("uJd7")),r=i(n("D3tI")),s=i(n("t7Wz")),l=m(n("4Qil")),c=i(n("XtfB")),u=i(n("OmBZ")),d=i(n("+rdV")),p=m(n("Uxaz"));function f(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(f=function(e){return e?n:t})(e)}function m(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=a(e)&&"function"!=typeof e)return{default:e};var n=f(t);if(n&&n.has(e))return n.get(e);var i={__proto__:null},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var r in e)if("default"!==r&&{}.hasOwnProperty.call(e,r)){var s=o?Object.getOwnPropertyDescriptor(e,r):null;s&&(s.get||s.set)?Object.defineProperty(i,r,s):i[r]=e[r]}return i.default=e,n&&n.set(e,i),i}t.storyPageTests=p},xMcn:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=n("q1tI"),a=n("7hBp");t.default=function(){var e={addImages:function(){},addSubresources:function(){},addInlinedInteractives:function(){}};try{e=(0,i.useContext)(a.Context)}catch(e){}return e}},xPyS:function(e,t,n){"use strict";var i=n("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=i(n("pVnL")),o=i(n("q1tI")),r=(i(n("17x9")),i(n("139F"))),s=n("Jqp9"),l=i(n("0oBV")),c=n("E2S6"),u=i(n("dxmc")),d=function(e){var t=e.isInAMP,n=e.overText,i=e.leadPhoto,l=e.attribution,d=e.rendition,p=e.size;return i?o.default.createElement("div",{className:(0,s.cx)((0,c.containerClass)(t),"exp-pq-size-".concat(p))},o.default.createElement("div",{className:t?c.ampContainerClass:void 0},o.default.createElement(u.default,(0,a.default)({},i,{rendition:d,isInAMP:t})),o.default.createElement(r.default,{className:c.imageCreditClass},i.credit)),o.default.createElement(c.StyledQuoteContainer,null,o.default.createElement("p",null,n),o.default.createElement(c.StyledAttribution,null,l))):null};d.displayName="PhotoQuote",d.defaultProps={overText:"",leadPhoto:void 0,rendition:"jumbo",attribution:"",isInAMP:!1,size:"medium"};t.default=(0,l.default)(d)},"xW/B":function(e,t,n){"use strict";var i=n("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=i(n("q1tI")),o=n("Jqp9"),r=(i(n("17x9")),i(n("xMcn"))),s=i(n("RG0N")),l=n("QgjT"),c=/<script type="text\/plain" data\x2Dattr="nyt\x2Dasset\x2Dmanifest">([\s\S]*?)<\/script>/;function u(e){return"https:"===new URL(e).protocol}function d(e,t){var n,i=e;try{var a=null==e?void 0:e.match(c),o=null==a?void 0:a[1];if(!o||null==a||!a[0])return i;if(t){var r=JSON.parse(o);r&&((n=r)&&(Array.isArray(null==n?void 0:n.css)||Array.isArray(null==n?void 0:n.images)))&&(r.images&&r.images.forEach((function(e){u(e)&&t.addImages([{target:e,minViewportWidth:1}])})),r.css&&r.css.forEach((function(e){u(e)&&t.addSubresources(e)})))}return e.replace(a[0],"")}catch(e){console.error("Unable to extract interactive asset manifest:",e)}return i}var p=function(e){var t=e.html,n=e.id;return t=d(t,(0,r.default)()),a.default.createElement(s.default,{className:(0,o.cx)(l.interactiveDivClass,"interactive-body"),html:t,id:n})};p.displayName="BodyWrapper";t.default=p},xXO4:function(e,t,n){"use strict";var i=n("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.transcriptBodyClass=t.transcriptBlocksClass=t.textClass=t.speakerClass=t.paragraphClass=t.kickerClass=t.hostedByClass=t.episodeTitleClass=t.episodeSummaryClass=t.episodePubdateClass=t.episodeMetadataClass=t.archivedBlocksClass=void 0;var a=n("Jqp9"),o=n("3sMT"),r=i(n("wXC7")),s=(t.transcriptBodyClass=(0,a.css)("position:relative;padding:0 20px;border-top:1px solid ",o.color.stroke.quaternary,";height:calc(100% - 40px);overflow-y:scroll;*{-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale;text-rendering:optimizeLegibility;-webkit-touch-callout:none;}",r.default.breakpoint.medium,"{padding:0 50px;}",r.default.breakpoint.mediumLarge,"{margin:0 4px;padding:0 74px 0 112px;}"),t.episodeMetadataClass=(0,a.css)("padding:25px 0 20px;border-bottom:1px solid ",o.color.stroke.quaternary,";"),t.kickerClass=(0,a.css)("font-size:13px;text-transform:uppercase;font-family:",r.default.font.franklinBase,";font-weight:",r.default.font.weight.bold,";letter-spacing:0.04em;color:",o.color.content.secondary,";margin-bottom:15px;",r.default.breakpoint.large,"{display:none;}"),t.episodeTitleClass=(0,a.css)("font-size:40px;line-height:48px;font-family:",r.default.font.serifMedium,";margin-bottom:14px;"),t.hostedByClass=(0,a.css)("font-family:",r.default.font.franklinBase,";font-weight:",r.default.font.weight.bold,";font-size:15px;line-height:22px;margin-bottom:5px;"),t.episodeSummaryClass=(0,a.css)("font-family:",r.default.font.franklinBase,";font-size:15px;line-height:22px;margin-bottom:10px;"),t.episodePubdateClass=(0,a.css)("font-family:",r.default.font.franklinBase,";font-size:15px;line-height:22px;padding:4px 0;display:block;"),t.transcriptBlocksClass=(0,a.css)("padding-top:30px;",r.default.breakpoint.medium,"{padding-bottom:35px;}"),t.speakerClass=(0,a.css)("font-family:",r.default.font.franklinBase,";font-size:14px;line-height:16px;color:",r.default.color.gray40,";text-transform:capitalize;padding-bottom:5px;"),t.textClass=(0,a.css)("font-family:",r.default.font.serifBase,";font-size:17px;line-height:26px;color:",o.color.content.secondary,";",r.default.breakpoint.large,"{font-size:18px;line-height:28px;}margin-bottom:25px;",r.default.breakpoint.medium,"{margin-bottom:33px;}"));t.paragraphClass=(0,a.css)("margin-bottom:0.9375rem;"),t.archivedBlocksClass=(0,a.css)("border-left:3px solid ",o.color.stroke.tertiary,";padding-left:20px;.",s,"{font-style:italic;}",r.default.breakpoint.small,"{padding-left:40px;}")},xeA1:function(e,t,n){"use strict";var i=n("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.isHeaderBlock=t.default=t.VOX_POP_SLUG=t.NUM_VISIBLE_POST_BLOCKS=void 0;var a=i(n("pVnL")),o=i(n("lSNA")),r=(i(n("17x9")),n("Jqp9")),s=i(n("q1tI")),l=n("hZ4i"),c=n("raa0");function u(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function d(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?u(Object(n),!0).forEach((function(t){(0,o.default)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):u(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var p=t.NUM_VISIBLE_POST_BLOCKS=3,f=t.VOX_POP_SLUG="vox-pop",m=["ParagraphBlock","ListBlock","Heading1Block","Heading2Block","Heading3Block","SummaryBlock","CapsuleBlock"],h=["AudioBlock","BlockquoteBlock","DetailBlock","DiptychBlock","ImageBlock","TwitterEmbedBlock","VideoBlock","YouTubeEmbedBlock","SlideshowBlock","PullquoteBlock","InteractiveBlock"],g=t.isHeaderBlock=function(e){return["HeaderBasicBlock","HeaderFullBleedHorizontalBlock","HeaderFullBleedVerticalBlock","HeaderLiveBriefingBlock","HeaderMultimediaBlock"].includes(e.__typename)},y=function(e){var t=e.addendum,n=e.body,i=e.bylines,o=e.componentProps,u=e.componentTypeMap,y=e.isAMP,v=e.isInWebview,b=e.renderHeader,_=e.renderReadMore,w=e.deepUrl,x=e.numVisibleBlocks,k=e.metadata,O=e.isSplitLayout,T=e.isInCarousel,C=e.slug,E=(0,r.useTheme)(),S=E.typeOfBlog,P=E.treatment,I=E.shouldRender,M=null==C?void 0:C.includes(f),A=0,j=(null==n?void 0:n.content.filter((function(e){switch(e.__typename){case"ParagraphBlock":return(null==(t=e)||null===(n=t.content)||void 0===n?void 0:n.length)>0;default:return!0}var t,n})).map((function(e,t){var n=(0,l.getBlockKey)(e,t),i=function(e){var t,n,i=e.blogType,a=e.dataType,o=e.treatment,r="FACTCHECK"===i?"FACT_CHECK":i,s=null;(c.BlockClasses[a]&&(s=c.BlockClasses[a][r]||c.BlockClasses[a].default||null),s instanceof Object)&&(s=(null===(t=s)||void 0===t?void 0:t[o])||(null===(n=s)||void 0===n?void 0:n.default));return s}({blogType:(0,l.getPostTypeOverride)({metadata:k})||S,dataType:e.__typename,treatment:"ParagraphBlock"===e.__typename&&T?"carousel":P});if(g(e))return b?b(e):null;var p=u[e.__typename];if(!p)return null;var f=d(d({},o),{},{className:(0,r.cx)(i,o.className)});return y&&("ImageBlock"===e.__typename?(e.size="full",f.useMobileCrop=!0):"ParagraphBlock"===e.__typename?f.className=c.paragraphOverrideClass:"InteractiveBlock"===e.__typename&&(f.articleURL=w)),(v||O)&&"DiptychBlock"===e.__typename&&(f.usePhotoViewer=!1),"InteractiveBlock"===e.__typename?s.default.createElement("div",{key:n,className:c.interactiveOverrideClass},s.default.createElement(p,(0,a.default)({data:e},f))):("PullquoteBlock"===e.__typename&&(f.isVoxPopPost=M),"ImageBlock"===e.__typename&&M&&(f.imageBlockClass=c.voxPopImageOverrideClass),"VideoBlock"===e.__typename&&M&&(f.isVoxPopPost=M),"DetailBlock"===e.__typename&&null!=I&&I.opinionHeader&&(f.className=(0,r.cx)(f.className,c.opinionLabelOverrideClass)),"UnstructuredBlock"===e.__typename&&(f.article={}),s.default.createElement(p,(0,a.default)({key:n,data:e},f)))})).filter((function(e){return e})))||[];if(t||i){var N,L=null==j||null===(N=j.map((function(e){var t,n,i,a,o,r,s;return m.includes(null==e||null===(t=e.props)||void 0===t||null===(n=t.data)||void 0===n?void 0:n.__typename)&&(null==e||null===(i=e.props)||void 0===i||null===(a=i.data)||void 0===a||null===(o=a.content)||void 0===o?void 0:o.length)>0||h.includes(null==e||null===(r=e.props)||void 0===r||null===(s=r.data)||void 0===s?void 0:s.__typename)})))||void 0===N?void 0:N.lastIndexOf(!0),D=L<0?null==j?void 0:j.length:L+1;i&&(j.splice(D,0,i),A+=1),t&&(j.splice(D,0,t),A+=1)}for(var R=["DetailBlock","LabelBlock"],B=x||p,z=j[B-1];null!==(F=z)&&void 0!==F&&null!==(U=F.props)&&void 0!==U&&U.data&&R.includes(z.props.data.__typename);){var F,U;z=j[(B+=1)-1]}var H=j.slice(B).length-A>1;if(_&&H&&j.length>B){var W=j.splice(B);j.push(_(W))}return j};y.defaultProps={addendum:void 0,body:[],bylines:null,componentProps:{},componentTypeMap:{},isAMP:!1,isInWebview:!1,metadata:{},renderHeader:null,renderReadMore:null,isSplitLayout:!1,isInCarousel:!1,deepUrl:"",slug:null,numVisibleBlocks:0};t.default=y},xf5d:function(e,t,n){"use strict";n.d(t,"b",(function(){return s})),n.d(t,"a",(function(){return l}));var i=n("Jqp9"),a=n("wXC7"),o=n.n(a),r=n("3sMT"),s=Object(i.css)("font-family:",o.a.font.franklinBase,";font-size:",o.a.font.size(14),";line-height:",o.a.font.size(20),";display:block;width:auto;margin:5px auto 0 auto;",o.a.breakpoint.small,"{display:inline-block;width:auto;margin-top:0;}@media print{display:none;}"),l=Object(i.css)("position:relative;display:inline-block;color:",r.color.signal.editorial,";",o.a.breakpoint.small,"{margin-top:0;}&:hover{color:",r.color.signal.editorial,";}&:visited{color:",r.color.signal.editorial,";}&::after{color:",r.color.stroke.quaternary,";content:'•';margin-left:6px;margin-right:7px;font-size:8px;}&:last-child::after{content:none;}")},"xn+k":function(e,t,n){"use strict";var i=this&&this.__makeTemplateObject||function(e,t){return Object.defineProperty?Object.defineProperty(e,"raw",{value:t}):e.raw=t,e};Object.defineProperty(t,"__esModule",{value:!0}),t.bar10=t.bar9=t.bar8=t.bar7=t.bar6=t.bar5=t.bar4=t.bar3=t.bar2=t.bar1=t.spinner=t.loaderBox=t.complianceLink=t.complianceLinksMobile=t.complianceLinksDesktop=t.dockBorder=t.actionButton=t.offerButton=t.link=t.subscriptionText=t.surveyText=t.ctaContainer=t.confirmationSubtitleBox=t.confirmationTitle=t.title2=t.title1=t.descriptionBox=t.header=t.headerContainer=t.headerLogo=t.mainContent=t.headerText=t.headingInfoContainerStyle=t.headingClassStyle=void 0;var a,o,r,s,l,c,u,d,p,f,m,h,g,y,v,b,_,w,x,k,O,T,C,E,S,P,I,M,A,j,N,L,D,R,B=n("Jqp9"),z=n("lVLo");t.headingClassStyle=(0,B.css)(a||(a=i(["\n  display: flex;\n  flex-direction: row;\n  align-items: center;\n  text-align: center;\n  justify-content: space-between;\n  height: 100%;\n  width: 100%;\n  margin: auto;\n  /* stylelint-disable-next-line declaration-no-important */\n  -webkit-font-smoothing: antialiased !important;\n  outline: ",";\n\n  strong {\n    font-weight: ",";\n  }\n"],["\n  display: flex;\n  flex-direction: row;\n  align-items: center;\n  text-align: center;\n  justify-content: space-between;\n  height: 100%;\n  width: 100%;\n  margin: auto;\n  /* stylelint-disable-next-line declaration-no-important */\n  -webkit-font-smoothing: antialiased !important;\n  outline: ",";\n\n  strong {\n    font-weight: ",";\n  }\n"])),z.colors.blue,z.fontWeights.bold),t.headingInfoContainerStyle=(0,B.css)(o||(o=i(["\n  width: 100%;\n  font-family: ",";\n  text-align: left;\n  color: ",";\n\n  span {\n    display: inline;\n  }\n\n  @media (min-width: ","px) {\n    text-align: center;\n  }\n"],["\n  width: 100%;\n  font-family: ",";\n  text-align: left;\n  color: ",";\n\n  span {\n    display: inline;\n  }\n\n  @media (min-width: ","px) {\n    text-align: center;\n  }\n"])),z.fonts.franklin,z.colors.blackDarkBackgroundPrimary,z.widths.medium),t.headerText=(0,B.css)(r||(r=i(["\n  font-family: ",";\n  font-size: 18px;\n  font-weight: ",";\n  line-height: 130%;\n  margin: auto 0 auto 20px;\n  text-align: center;\n  justify-content: center;\n  padding: 10px 0 10px 90px;\n\n  @media (max-width: 500px) {\n    font-size: 15px;\n    font-weight: ",";\n    line-height: 15px;\n    text-align: left;\n    padding: 10px 0;\n  }\n"],["\n  font-family: ",";\n  font-size: 18px;\n  font-weight: ",";\n  line-height: 130%;\n  margin: auto 0 auto 20px;\n  text-align: center;\n  justify-content: center;\n  padding: 10px 0 10px 90px;\n\n  @media (max-width: 500px) {\n    font-size: 15px;\n    font-weight: ",";\n    line-height: 15px;\n    text-align: left;\n    padding: 10px 0;\n  }\n"])),z.fonts.franklin,z.fontWeights.semiBold,z.fontWeights.medium),t.mainContent=(0,B.css)(s||(s=i(["\n  align-self: flex-start;\n  display: flex;\n  flex-direction: row;\n  align-items: flex-start;\n  justify-content: space-between;\n  flex: 1 0 0;\n\n  background-color: ",";\n  font-family: ",";\n  border-radius: 5px;\n  padding: 20px;\n  margin: 0 auto 20px;\n  max-width: 240px;\n  column-gap: 24px;\n\n  @media (min-width: ","px) {\n    max-width: unset;\n    width: calc(100% - 80px);\n  }\n\n  @media (min-width: ","px) {\n    flex-direction: row;\n    max-width: 1176px;\n    padding: 32px;\n    width: calc(100% - 114px);\n    justify-content: space-between;\n    text-align: left;\n  }\n\n  @media (max-width: 500px) {\n    flex-direction: column;\n    align-items: stretch;\n  }\n"],["\n  align-self: flex-start;\n  display: flex;\n  flex-direction: row;\n  align-items: flex-start;\n  justify-content: space-between;\n  flex: 1 0 0;\n\n  background-color: ",";\n  font-family: ",";\n  border-radius: 5px;\n  padding: 20px;\n  margin: 0 auto 20px;\n  max-width: 240px;\n  column-gap: 24px;\n\n  @media (min-width: ","px) {\n    max-width: unset;\n    width: calc(100% - 80px);\n  }\n\n  @media (min-width: ","px) {\n    flex-direction: row;\n    max-width: 1176px;\n    padding: 32px;\n    width: calc(100% - 114px);\n    justify-content: space-between;\n    text-align: left;\n  }\n\n  @media (max-width: 500px) {\n    flex-direction: column;\n    align-items: stretch;\n  }\n"])),z.colors.whiteDarkContentPrimary,z.fonts.franklin,z.widths.verySmall,z.widths.medium),t.headerLogo=(0,B.css)(l||(l=i(["\n  align-self: start;\n  display: none;\n\n  @media (min-width: ","px) {\n    display: block;\n    & > svg {\n      width: 154px;\n      height: 20px;\n    }\n  }\n"],["\n  align-self: start;\n  display: none;\n\n  @media (min-width: ","px) {\n    display: block;\n    & > svg {\n      width: 154px;\n      height: 20px;\n    }\n  }\n"])),z.widths.medium),t.headerContainer=(0,B.css)(c||(c=i(["\n  align-self: start;\n  color: ",";\n  margin: 0 auto;\n  padding: 0 20px;\n\n  @media (min-width: ","px) {\n    margin: 0;\n  }\n"],["\n  align-self: start;\n  color: ",";\n  margin: 0 auto;\n  padding: 0 20px;\n\n  @media (min-width: ","px) {\n    margin: 0;\n  }\n"])),z.colors.white,z.widths.medium),t.header=(0,B.css)(u||(u=i(["\n  font-family: ",";\n  font-size: 16px;\n  font-weight: ",";\n  line-height: 25px;\n  margin-bottom: 16px;\n\n  @media (min-width: ","px) {\n    font-size: 21px;\n  }\n"],["\n  font-family: ",";\n  font-size: 16px;\n  font-weight: ",";\n  line-height: 25px;\n  margin-bottom: 16px;\n\n  @media (min-width: ","px) {\n    font-size: 21px;\n  }\n"])),z.fonts.franklin,z.fontWeights.bold,z.widths.medium),t.descriptionBox=(0,B.css)(d||(d=i(["\n  @media (min-width: ","px) {\n    max-width: 548px;\n  }\n"],["\n  @media (min-width: ","px) {\n    max-width: 548px;\n  }\n"])),z.widths.mediumLarge),t.title1=(0,B.css)(p||(p=i(["\n  font-family: ",";\n  font-size: 21px;\n  font-style: normal;\n  font-weight: ",";\n  line-height: 25px;\n  margin-top: 0;\n  margin-bottom: 0;\n\n  @media (max-width: 500px) {\n    font-size: 16px;\n  }\n"],["\n  font-family: ",";\n  font-size: 21px;\n  font-style: normal;\n  font-weight: ",";\n  line-height: 25px;\n  margin-top: 0;\n  margin-bottom: 0;\n\n  @media (max-width: 500px) {\n    font-size: 16px;\n  }\n"])),z.fonts.franklin,z.fontWeights.medium),t.title2=(0,B.css)(f||(f=i(["\n  font-family: ",";\n  font-size: 21px;\n  font-style: normal;\n  font-weight: ",";\n  line-height: 25px;\n  margin-top: 0;\n  margin-bottom: 0;\n\n  @media (max-width: 500px) {\n    font-size: 16px;\n    line-height: 21px;\n  }\n"],["\n  font-family: ",";\n  font-size: 21px;\n  font-style: normal;\n  font-weight: ",";\n  line-height: 25px;\n  margin-top: 0;\n  margin-bottom: 0;\n\n  @media (max-width: 500px) {\n    font-size: 16px;\n    line-height: 21px;\n  }\n"])),z.fonts.franklin,z.fontWeights.bold),t.confirmationTitle=(0,B.css)(m||(m=i(["\n  font-family: ",";\n  font-size: 21px;\n  font-style: normal;\n  font-weight: ",";\n  line-height: 25px;\n  margin-bottom: 16px;\n\n  @media (max-width: 500px) {\n    font-size: 16px;\n    line-height: 21px;\n  }\n"],["\n  font-family: ",";\n  font-size: 21px;\n  font-style: normal;\n  font-weight: ",";\n  line-height: 25px;\n  margin-bottom: 16px;\n\n  @media (max-width: 500px) {\n    font-size: 16px;\n    line-height: 21px;\n  }\n"])),z.fonts.franklin,z.fontWeights.bold),t.confirmationSubtitleBox=(0,B.css)(h||(h=i(["\n  display: flex;\n  flex-direction: column;\n  row-gap: 8px;\n"],["\n  display: flex;\n  flex-direction: column;\n  row-gap: 8px;\n"]))),t.ctaContainer=(0,B.css)(g||(g=i(["\n  display: flex;\n  flex-direction: column;\n  align-items: flex-start;\n\n  @media (min-width: 501px) {\n    row-gap: 12px;\n  }\n\n  @media (max-width: 500px) {\n    align-items: center;\n  }\n"],["\n  display: flex;\n  flex-direction: column;\n  align-items: flex-start;\n\n  @media (min-width: 501px) {\n    row-gap: 12px;\n  }\n\n  @media (max-width: 500px) {\n    align-items: center;\n  }\n"]))),t.surveyText=(0,B.css)(y||(y=i(["\n  font-family: ",";\n  font-size: 14px;\n  font-weight: ",";\n  font-style: normal;\n  line-height: 150%;\n  color: ",";\n"],["\n  font-family: ",";\n  font-size: 14px;\n  font-weight: ",";\n  font-style: normal;\n  line-height: 150%;\n  color: ",";\n"])),z.fonts.franklin,z.fontWeights.medium,z.colors.blackDarkBackgroundPrimary),t.subscriptionText=(0,B.css)(v||(v=i(["\n  font-family: ",";\n  font-size: 14px;\n  font-weight: ",";\n  font-style: normal;\n  line-height: 150%;\n  color: ",";\n"],["\n  font-family: ",";\n  font-size: 14px;\n  font-weight: ",";\n  font-style: normal;\n  line-height: 150%;\n  color: ",";\n"])),z.fonts.franklin,z.fontWeights.semiBold,z.colors.blackDarkBackgroundPrimary),t.link=(0,B.css)(b||(b=i(["\n  color: ",";\n  text-decoration: underline;\n  white-space: nowrap;\n  font-weight: ",";\n"],["\n  color: ",";\n  text-decoration: underline;\n  white-space: nowrap;\n  font-weight: ",";\n"])),z.colors.blackDarkBackgroundPrimary,z.fontWeights.bold),t.offerButton=(0,B.css)(_||(_=i(["\n  font-family: ",";\n  text-decoration: none;\n  font-size: 16px;\n  font-weight: ",";\n  line-height: 150%;\n  color: ",";\n  background-color: ",";\n  border-radius: 3px;\n  cursor: pointer;\n  border-width: 0;\n\n  width: 100%;\n  height: 44px;\n  padding: 0 16px;\n\n  @media (max-width: 500px) {\n    margin: 16px 0;\n  }\n\n  @media (min-width: 501px) {\n    width: 150px;\n    height: 44px;\n  }\n"],["\n  font-family: ",";\n  text-decoration: none;\n  font-size: 16px;\n  font-weight: ",";\n  line-height: 150%;\n  color: ",";\n  background-color: ",";\n  border-radius: 3px;\n  cursor: pointer;\n  border-width: 0;\n\n  width: 100%;\n  height: 44px;\n  padding: 0 16px;\n\n  @media (max-width: 500px) {\n    margin: 16px 0;\n  }\n\n  @media (min-width: 501px) {\n    width: 150px;\n    height: 44px;\n  }\n"])),z.fonts.franklin,z.fontWeights.semiBold,z.colors.whiteDarkContentPrimary,z.colors.blackDarkBackgroundPrimary),t.actionButton=(0,B.css)(w||(w=i(["\n  height: 44px;\n  padding: 0 16px;\n  width: 100%;\n  border-radius: 3px;\n  border: 1px solid ",";\n  background-color: inherit;\n  cursor: pointer;\n  font-family: ",";\n  white-space: nowrap;\n\n  @media (max-width: 500px) {\n    margin-top: 16px;\n  }\n"],["\n  height: 44px;\n  padding: 0 16px;\n  width: 100%;\n  border-radius: 3px;\n  border: 1px solid ",";\n  background-color: inherit;\n  cursor: pointer;\n  font-family: ",";\n  white-space: nowrap;\n\n  @media (max-width: 500px) {\n    margin-top: 16px;\n  }\n"])),z.colors.blackDarkBackgroundPrimary,z.fonts.franklin),t.dockBorder=(0,B.css)(x||(x=i(["\n  border-top: 1px solid ",";\n  background-color: ",";\n"],["\n  border-top: 1px solid ",";\n  background-color: ",";\n"])),z.colors.veryDarkGrey,z.colors.white),t.complianceLinksDesktop=(0,B.css)(k||(k=i(["\n  margin-top: 10px;\n  display: block;\n\n  @media (max-width: 500px) {\n    display: none;\n  }\n"],["\n  margin-top: 10px;\n  display: block;\n\n  @media (max-width: 500px) {\n    display: none;\n  }\n"]))),t.complianceLinksMobile=(0,B.css)(O||(O=i(["\n  margin-top: 10px;\n  text-align: center;\n  display: none;\n  color: ",";\n\n  @media (max-width: 500px) {\n    display: block;\n  }\n"],["\n  margin-top: 10px;\n  text-align: center;\n  display: none;\n  color: ",";\n\n  @media (max-width: 500px) {\n    display: block;\n  }\n"])),z.colors.black),t.complianceLink=(0,B.css)(T||(T=i(["\n  font-size: 11px;\n  font-family: ",";\n  text-decoration: underline;\n  font-weight: 300;\n  color: ",";\n\n  &:first-of-type {\n    margin-right: 10px;\n  }\n"],["\n  font-size: 11px;\n  font-family: ",";\n  text-decoration: underline;\n  font-weight: 300;\n  color: ",";\n\n  &:first-of-type {\n    margin-right: 10px;\n  }\n"])),z.fonts.franklin,z.colors.black),t.loaderBox=(0,B.css)(C||(C=i(["\n  background: ",";\n  min-height: 140px;\n  width: 100%;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n"],["\n  background: ",";\n  min-height: 140px;\n  width: 100%;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n"])),z.colors.white),t.spinner=(0,B.css)(E||(E=i(["\n  position: relative;\n  width: 34px;\n  height: 44px;\n  padding: 10px;\n  margin-bottom: 40px;\n\n  @keyframes fade {\n    from {\n      opacity: 1;\n    }\n    to {\n      opacity: 0.25;\n    }\n  }\n\n  & > div {\n    width: 4%;\n    height: 16%;\n    background: #121212;\n    position: absolute;\n    left: 48%;\n    top: 43%;\n    opacity: 0;\n    border-radius: 50px;\n  }\n"],["\n  position: relative;\n  width: 34px;\n  height: 44px;\n  padding: 10px;\n  margin-bottom: 40px;\n\n  @keyframes fade {\n    from {\n      opacity: 1;\n    }\n    to {\n      opacity: 0.25;\n    }\n  }\n\n  & > div {\n    width: 4%;\n    height: 16%;\n    background: #121212;\n    position: absolute;\n    left: 48%;\n    top: 43%;\n    opacity: 0;\n    border-radius: 50px;\n  }\n"]))),t.bar1=(0,B.css)(S||(S=i(["\n  transform: rotate(0deg) translate(0, -100%);\n  animation: fade 1s linear 0s infinite;\n"],["\n  transform: rotate(0deg) translate(0, -100%);\n  animation: fade 1s linear 0s infinite;\n"]))),t.bar2=(0,B.css)(P||(P=i(["\n  transform: rotate(36deg) translate(0, -100%);\n  animation: fade 1s linear -0.9s infinite;\n"],["\n  transform: rotate(36deg) translate(0, -100%);\n  animation: fade 1s linear -0.9s infinite;\n"]))),t.bar3=(0,B.css)(I||(I=i(["\n  transform: rotate(72deg) translate(0, -100%);\n  animation: fade 1s linear -0.8s infinite;\n"],["\n  transform: rotate(72deg) translate(0, -100%);\n  animation: fade 1s linear -0.8s infinite;\n"]))),t.bar4=(0,B.css)(M||(M=i(["\n  transform: rotate(108deg) translate(0, -100%);\n  animation: fade 1s linear -0.7s infinite;\n"],["\n  transform: rotate(108deg) translate(0, -100%);\n  animation: fade 1s linear -0.7s infinite;\n"]))),t.bar5=(0,B.css)(A||(A=i(["\n  transform: rotate(144deg) translate(0, -100%);\n  animation: fade 1s linear -0.6s infinite;\n"],["\n  transform: rotate(144deg) translate(0, -100%);\n  animation: fade 1s linear -0.6s infinite;\n"]))),t.bar6=(0,B.css)(j||(j=i(["\n  transform: rotate(180deg) translate(0, -100%);\n  animation: fade 1s linear -0.5s infinite;\n"],["\n  transform: rotate(180deg) translate(0, -100%);\n  animation: fade 1s linear -0.5s infinite;\n"]))),t.bar7=(0,B.css)(N||(N=i(["\n  transform: rotate(216deg) translate(0, -100%);\n  animation: fade 1s linear -0.4s infinite;\n"],["\n  transform: rotate(216deg) translate(0, -100%);\n  animation: fade 1s linear -0.4s infinite;\n"]))),t.bar8=(0,B.css)(L||(L=i(["\n  transform: rotate(252deg) translate(0, -100%);\n  animation: fade 1s linear -0.3s infinite;\n"],["\n  transform: rotate(252deg) translate(0, -100%);\n  animation: fade 1s linear -0.3s infinite;\n"]))),t.bar9=(0,B.css)(D||(D=i(["\n  transform: rotate(288deg) translate(0, -100%);\n  animation: fade 1s linear -0.2s infinite;\n"],["\n  transform: rotate(288deg) translate(0, -100%);\n  animation: fade 1s linear -0.2s infinite;\n"]))),t.bar10=(0,B.css)(R||(R=i(["\n  transform: rotate(324deg) translate(0, -100%);\n  animation: fade 1s linear -0.1s infinite;\n"],["\n  transform: rotate(324deg) translate(0, -100%);\n  animation: fade 1s linear -0.1s infinite;\n"])))},xn0n:function(e,t,n){"use strict";var i,a=n("VkAN"),o=n.n(a),r=n("gcR/"),s=n.n(r),l=(n("q1tI"),n("eFc+")),c=n.n(l),u=n("/jA0"),d=n.n(u),p=n("B2Q+"),f=n("InUh"),m=n.n(f),h=m()((function(){return n.e(84).then(n.bind(null,"kMnh"))}),{loadableGenerated:{webpack:function(){return["kMnh"]},modules:["./DealBook"]}}),g=m()((function(){return n.e(119).then(n.bind(null,"VXKL"))}),{loadableGenerated:{webpack:function(){return["VXKL"]},modules:["./Lens"]}}),y=m()((function(){return n.e(137).then(n.bind(null,"cDcs"))}),{loadableGenerated:{webpack:function(){return["cDcs"]},modules:["./Opinion"]}}),v={DealBook:h,Lens:g,Opinion:y,"Opinión":y,"The Upshot":m()((function(){return n.e(161).then(n.bind(null,"W7ou"))}),{loadableGenerated:{webpack:function(){return["W7ou"]},modules:["./Upshot"]}}),"World Cup 2019":m()((function(){return n.e(201).then(n.bind(null,"JxK2"))}),{loadableGenerated:{webpack:function(){return["JxK2"]},modules:["./WorldCup2019"]}})},b=function(e){var t=e.asset,n=e.position,i=Object(p.a)();return s()(d.a,{collections:null==t?void 0:t.collections,logos:v,position:n,section:null==t?void 0:t.section,size:"smartphone"===i?"small":"standard",subsection:null==t?void 0:t.subsection,withLink:!0})};b.displayName="BrandBar",b.defaultProps={asset:void 0,position:void 0},b.fragments={asset:c()(i||(i=o()(["\n    fragment BrandBar_asset on CreativeWork {\n      section {\n        id\n        displayName\n        url\n      }\n      subsection {\n        id\n        displayName\n        url\n      }\n      collections {\n        id\n        slug\n        header\n        url\n      }\n    }\n  "])))};t.a=b},xvFu:function(e,t,n){"use strict";var i,a,o=n("VkAN"),r=n.n(o),s=n("gcR/"),l=n.n(s),c=n("q1tI"),u=n.n(c),d=n("Jqp9"),p=n("eFc+"),f=n.n(p),m=n("wXC7"),h=n.n(m),g=n("j/0i"),y=n.n(g),v=n("5dFD"),b=n("NVP0"),_=n("coEv"),w=n("paWp"),x=n("3sMT"),k=Object(d.themeFn)("treatment",{none:Object(d.css)("float:none;margin-left:0;margin-bottom:5px;",h.a.breakpoint.medium,"{margin-bottom:15px;}"),"custom-features":Object(d.css)()}),O=Object(d.styled)("figure",{target:"e759ksq0"})(k,";position:relative;width:100%;img{width:100%;vertical-align:top;}"),T=Object(d.themeFn)("treatment",{none:Object(d.css)("text-align:right;"),"custom-features":Object(d.css)("text-align:right;",h.a.breakpoint.medium,"{text-align:left;}")}),C=Object(d.styled)("figcaption",{target:"e759ksq1"})(T,";"),E=Object(d.themeFn)("treatment",{none:Object(d.css)("color:",x.color.content.quaternary,";font-family:",h.a.font.franklinBase,";text-transform:uppercase;"),magazine:Object(d.css)("color:",x.color.content.quaternary,";font-family:",h.a.font.magazineSansBase,";margin-bottom:4px;letter-spacing:0.03em;margin-top:8px;"),"custom-features":Object(d.css)("color:",x.color.content.quaternary,";font-family:",h.a.font.franklinBase,";text-transform:uppercase;"),"t-magazine":Object(d.css)("color:",x.color.content.quaternary,";font-family:",h.a.font.franklinBase,";")}),S=Object(d.styled)("span",{target:"e759ksq2"})("font-size:",h.a.font.size(10),";display:inline-block;font-weight:",h.a.font.weight.medium,";line-height:",h.a.font.size(12),";margin-top:2px;",E,";"),P=function(e){return Object(d.css)("aspect-ratio:",e,";")},I=["videoLarge","mediumThreeByTwo440","mediumThreeByTwo225","hpSmall","thumbLarge"],M=["videoLarge","mediumThreeByTwo440"],A=y.a.withComponent("div",{target:"e1y9711p0"});function j(e){var t=e.asset,n=e.crops,i=e.imgSizes,a=e.imgAspectRatio,o=e.className,r=e.captionClass,s=e.creditClass,c=e.timesTags,p=e.shouldHaveLink,f=e.lazyLoad,m=null;"Slideshow"===t.__typename?m=w.c:"Video"===t.__typename&&(m=w.d);var g=t.promotionalMedia;g&&"Image"!==g.__typename&&(g=g.promotionalMedia);var y=g&&g.crops,x=y?Object(b.i)(g,n||M):null,k=y?Object(b.c)(g,n||I):null,T=P(a||"auto ".concat(null==k?void 0:k.width,"/").concat(null==k?void 0:k.height)),E=function(){var e,t;return u.a.createElement(u.a.Fragment,null,l()(A,{timesTags:c},void 0,l()("img",{src:Object(b.a)(null==k?void 0:k.url),srcSet:x,sizes:i||void 0,loading:f?"lazy":"auto",alt:(null===(e=g)||void 0===e||null===(t=e.caption)||void 0===t?void 0:t.text)||"",className:T})),m&&l()("div",{className:w.a},void 0,l()("i",{className:Object(d.cx)(_.b,m)})))};return l()(O,{className:Object(d.cx)("photo",o),role:"group"},void 0,k&&p&&l()(v.a,{link:t,"data-tracking-index":null,"data-rref":""},void 0,E()),k&&!p&&u.a.createElement(u.a.Fragment,null,E()),l()(C,{className:r},void 0,l()(S,{className:s},void 0,l()("span",{className:h.a.a11y.visuallyHidden},void 0,"Credit"),t.promotionalMedia.credit)))}j.displayName="Image",j.defaultProps={crops:void 0,imgSizes:void 0,imgAspectRatio:void 0,className:void 0,captionClass:void 0,creditClass:void 0,timesTags:[],shouldHaveLink:!0,lazyLoad:!1};var N=f()(i||(i=r()(['\n  fragment ImageFragment_data on Image {\n    id\n    caption {\n      text\n    }\n    credit\n    crops(\n      renditionNames: [\n        "videoLarge"\n        "mediumThreeByTwo440"\n        "mediumThreeByTwo225"\n        "threeByTwoMediumAt2X"\n        "hpSmall"\n        "thumbLarge"\n        "thumbStandard"\n        "jumbo"\n      ]\n    ) {\n      renditions {\n        name\n        url\n        width\n        height\n      }\n    }\n    timesTags {\n      vernacular\n    }\n  }\n'])));j.fragments={data:f()(a||(a=r()(["\n    fragment Image_data on HasPromotionalProperties {\n      __typename\n      ... on Published {\n        url\n      }\n      promotionalMedia {\n        __typename\n        ... on Video {\n          id\n          promotionalMedia {\n            ... on Image {\n              id\n              ...ImageFragment_data\n            }\n          }\n        }\n        ... on Audio {\n          id\n          promotionalMedia {\n            ... on Image {\n              id\n              ...ImageFragment_data\n            }\n          }\n        }\n        ... on Slideshow {\n          id\n          promotionalMedia {\n            ... on Image {\n              id\n              ...ImageFragment_data\n            }\n          }\n        }\n        ... on Interactive {\n          id\n          promotionalMedia {\n            ... on Image {\n              id\n              ...ImageFragment_data\n            }\n          }\n        }\n        ... on EmbeddedInteractive {\n          id\n          promotionalMedia {\n            ... on Image {\n              id\n              ...ImageFragment_data\n            }\n          }\n        }\n        ... on Image {\n          id\n          ...ImageFragment_data\n        }\n      }\n    }\n    ","\n  "])),N)};t.a=j},y1T0:function(e,t,n){"use strict";t.a="/vi-assets/static-assets/icon-the-interpreter_144x144-b29b74b2ebedb8e74823f33b16fb8167.webp"},y1Vo:function(e,t,n){"use strict";var i=n("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.RightToLeftCaption=t.Caption=void 0;var a=n("Jqp9"),o=n("3sMT"),r=i(n("wXC7"));t.Caption=(0,a.styled)("figcaption",{target:"e3rygrp0"})("color:",o.color.content.quaternary,";font-family:",r.default.font.serifBase,";margin:10px ",r.default.grid.pageMargin,"px 0;text-align:left;a{color:",o.color.signal.editorial,";text-decoration:none;&:hover,&:focus{text-decoration:underline;}}",r.default.breakpoint.small,"{margin-left:0;}.sizeSmall &{display:flex;flex-direction:column;width:calc(50% - 15px);margin:auto 0 15px 15px;",r.default.breakpoint.small,"{width:260px;margin-left:15px;}",r.default.breakpoint.medium,"{margin-left:15px;}",r.default.breakpoint.extraLarge,"{width:330px;margin-left:15px;}@media (max-width:",r.default.breakpoint.width.small,"px){margin:auto 0 0 15px;}}.sizeSmall.sizeSmallNoCaption &{margin-left:auto;margin-right:auto;margin-top:10px;}.sizeMedium &{max-width:900px;}.sizeSmall.layoutVertical.verticalVideo &{margin:0 0 auto 16px;",r.default.breakpoint.medium,"{margin:auto 0 auto 16px;}}.sizeMedium.layoutVertical.verticalVideo &{margin-left:auto;margin-right:auto;width:",r.default.breakpoint.mobileFullWidth,";",r.default.breakpoint.small,"{width:100%;}}.sizeLarge &{max-width:none;",r.default.breakpoint.small,"{margin-left:",r.default.grid.pageMargin,"px;}",r.default.breakpoint.medium,"{margin-left:",r.default.grid.pageMargin,"px;max-width:900px;}",r.default.breakpoint.mediumLarge,"{margin-left:0;max-width:",r.default.breakpoint.mediumMediaExtralarge,"px;}",r.default.breakpoint.extraLarge,"{margin-left:0;max-width:900px;}}.sizeLarge.layoutVertical &{",r.default.breakpoint.medium,"{margin-left:0;}}.sizeFull &{margin-left:",r.default.grid.pageMargin,"px;",r.default.breakpoint.small,"{max-width:900px;}",r.default.breakpoint.medium,"{max-width:900px;}",r.default.breakpoint.extraLarge,"{max-width:900px;}}@media print{display:none;}"),t.RightToLeftCaption=(0,a.styled)("figcaption",{target:"e3rygrp1"})("color:",o.color.content.quaternary,";font-family:",r.default.font.serifBase,";margin:7px ",r.default.grid.pageMargin,"px 0;text-align:right;direction:rtl;unicode-bidi:isolate;a{color:",o.color.signal.editorial,";text-decoration:none;&:hover,&:focus{text-decoration:underline;}}",r.default.breakpoint.small,"{margin-right:0;}.sizeSmall &{display:flex;flex-direction:column;width:calc(50% - 15px);margin:auto 0 15px 15px;",r.default.breakpoint.small,"{width:260px;margin-left:15px;}",r.default.breakpoint.medium,"{margin-left:15px;}",r.default.breakpoint.extraLarge,"{width:330px;margin-left:15px;}@media (max-width:",r.default.breakpoint.width.small,"px){margin:auto 0 0 15px;}}.sizeSmall.sizeSmallNoCaption &{margin-left:auto;margin-right:auto;margin-top:10px;}.sizeMedium &{max-width:900px;}.sizeMedium.layoutVertical.verticalVideo &{margin-left:0;margin-right:0;}.sizeLarge &{max-width:none;",r.default.breakpoint.small,"{margin-left:",r.default.grid.pageMargin,"px;}",r.default.breakpoint.medium,"{margin-left:",r.default.grid.pageMargin,"px;max-width:900px;}",r.default.breakpoint.mediumLarge,"{margin-left:0;max-width:",r.default.breakpoint.mediumMediaExtralarge,"px;}",r.default.breakpoint.extraLarge,"{margin-left:0;max-width:900px;}}.sizeLarge.layoutVertical &{",r.default.breakpoint.medium,"{margin-left:0;}}.sizeFull &{margin-left:",r.default.grid.pageMargin,"px;",r.default.breakpoint.small,"{max-width:900px;}",r.default.breakpoint.medium,"{max-width:900px;}",r.default.breakpoint.extraLarge,"{max-width:900px;}}@media print{display:none;}")},y9tx:function(e,t,n){"use strict";var i=n("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.underlineClass=t.timestampClass=t.placeholderClass=t.menuLinkContainerClass=t.menuLinkClass=t.hoverUnderlineClass=void 0;var a=n("Jqp9"),o=n("3sMT"),r=i(n("wXC7"));t.menuLinkContainerClass=(0,a.css)("font-family:",r.default.font.franklinBase,";flex-shrink:0;font-size:",r.default.font.size(13),";font-weight:",r.default.font.weight.medium,";",r.default.breakpoint.small,"{font-size:",r.default.font.size(14),";}"),t.underlineClass=(0,a.css)("padding-bottom:1px;border-bottom:1px solid ",o.color.content.primary,";"),t.hoverUnderlineClass=(0,a.css)("padding-bottom:1px;",r.default.breakpoint.small,"{:hover{color:",o.color.content.tertiary,";border-bottom:1px solid ",o.color.content.tertiary,";}}"),t.menuLinkClass=(0,a.css)("text-decoration:none;color:",o.color.content.primary,";"),t.placeholderClass=(0,a.css)("width:auto;min-width:40px;position:relative;margin-left:4px;display:inline-block;"),t.timestampClass=(0,a.css)("color:",o.color.signal.breaking,";font-size:",r.default.font.size(11),";font-family:",r.default.font.franklinBase,";span[data-time='rel']{position:relative;}span[data-time='abs']{display:none;}")},yEZI:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=n("Mzrn");t.default=i.Paragraph},yFJX:function(e,t,n){"use strict";var i=n("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.boldClass=void 0;var a=n("Jqp9"),o=i(n("wXC7")),r=t.boldClass=(0,a.css)("font-weight:",o.default.font.weight.bold,";"),s=(0,a.styled)("strong",{target:"ebyp5n10"})(r,";");t.default=s},yQsP:function(e,t,n){"use strict";var i=n("TqRt");Object.defineProperty(t,"__esModule",{value:!0});var a={};t.default=d;var o=i(n("lSNA")),r=i(n("q1tI")),s=n("Jqp9"),l=i(n("YgNI")),c=n("rJzx"),u=n("voDd");function d(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{logoPosition:"left"},t=e.logoPosition,n=e.className,i=e.audioDeepLink,a=(0,u.addReferringSource)(i||"https://www.nytimes.com/audio/app");return r.default.createElement("div",{className:(0,s.cx)((0,o.default)({},c.hasAudioDeepLinkClass,!!i))},r.default.createElement("a",{href:a},r.default.createElement("div",{className:(0,s.cx)(c.audioPromoWrapperClass,n,(0,o.default)({},c.logoOnRightClass,"right"===t))},r.default.createElement(l.default,{className:c.logoClass}),!i&&r.default.createElement("p",{className:c.audioTextClass},"For more audio journalism and storytelling,"," ",r.default.createElement("span",{className:c.linkClass},"download New York Times Audio"),", a new iOS app available for news subscribers."),!!i&&r.default.createElement("p",{className:c.audioTextClass},r.default.createElement("span",{className:c.linkClass},"Open this article")," in the New York Times Audio app on iOS."))))}Object.keys(u).forEach((function(e){"default"!==e&&"__esModule"!==e&&(Object.prototype.hasOwnProperty.call(a,e)||e in t&&t[e]===u[e]||Object.defineProperty(t,e,{enumerable:!0,get:function(){return u[e]}}))})),d.displayName="AudioAppPromo"},ybjx:function(e,t,n){"use strict";var i=n("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.moreAboutClass=t.bioTreatmentStyles=t.authorNameClass=t.Bio=void 0;var a=n("3sMT"),o=n("Jqp9"),r=i(n("WThh")),s=i(n("wXC7")),l=(0,r.default)(["medium"]),c=t.bioTreatmentStyles=(0,o.themeFn)("treatment",{none:function(e){return(0,o.css)("color:",a.color.content.secondary,";font-family:",s.default.font.franklinBase,";font-weight:",s.default.font.weight.medium,";",l(e,{fontSize:[15,16],lineHeight:[20,22]}),";")},magazine:function(e){return(0,o.css)("color:",a.color.content.secondary,";font-family:",s.default.font.magazineSansBase,";font-weight:",s.default.font.weight.medium,";",l(e,{fontSize:[15,16],lineHeight:[20,22]}),";")}});t.moreAboutClass=(0,o.css)("font-weight:",s.default.font.weight.medium,";a.authorPageLinkClass.overrideLinkStyles{text-decoration:underline;color:",a.color.content.primary,";text-decoration-thickness:1px;text-underline-offset:2px;}a.authorPageLinkClass.overrideLinkStyles:hover,a.authorPageLinkClass.overrideLinkStyles:focus{text-decoration:none;color:",a.color.content.primary,";}"),t.authorNameClass=(0,o.css)("a.authorPageLinkClass.overrideLinkStyles,a.authorPageLinkClass.overrideLinkStyles:visited,a.authorPageLinkClass.overrideLinkStyles:hover a.authorPageLinkClass.overrideLinkStyles:focus{font-weight:",s.default.font.weight.bold,";color:",a.color.content.primary,";}a.authorPageLinkClass.overrideLinkStyles:hover a.authorPageLinkClass.overrideLinkStyles:focus{text-decoration:none;}"),t.Bio=(0,o.styled)("div",{target:"eqi4ubu0"})(c,";color:",a.color.content.secondary,";p{margin-bottom:",s.default.font.size(12),";}a,a:visited{color:",a.color.content.primary,";text-decoration:underline;}a:hover,a:focus{color:",a.color.content.primary,";text-decoration:none;}",s.default.print,";")},ygvk:function(e,t,n){"use strict";t.a={CLEAR_ARTICLE:"CLEAR_ARTICLE",OPEN_COMMENT_ENTRY:"OPEN_COMMENT_ENTRY",CLOSE_COMMENT_ENTRY:"CLOSE_COMMENT_ENTRY",SELECT_VIEW:"SELECT_VIEW",GET_ARTICLE_REQUEST:"GET_ARTICLE_REQUEST",GET_ARTICLE_RESPONSE:"GET_ARTICLE_RESPONSE",GET_COMMENT_LIST_REQUEST:"GET_COMMENT_LIST_REQUEST",GET_COMMENT_LIST_RESPONSE:"GET_COMMENT_LIST_RESPONSE",GET_COMMENTS_REQUEST:"GET_COMMENTS_REQUEST",GET_COMMENTS_RESPONSE:"GET_COMMENTS_RESPONSE",GET_REPLIES_REQUEST:"GET_REPLIES_REQUEST",GET_REPLIES_RESPONSE:"GET_REPLIES_RESPONSE",GET_SUMMARY_REQUEST:"GET_SUMMARY_REQUEST",GET_SUMMARY_RESPONSE:"GET_SUMMARY_RESPONSE",GET_PROFILE_REQUEST:"GET_PROFILE_REQUEST",GET_PROFILE_RESPONSE:"GET_PROFILE_RESPONSE",UPDATE_PROFILE_REQUEST:"UPDATE_PROFILE_REQUEST",UPDATE_PROFILE_RESPONSE:"UPDATE_PROFILE_RESPONSE",UPDATE_AVATAR_REQUEST:"UPDATE_AVATAR_REQUEST",UPDATE_AVATAR_RESPONSE:"UPDATE_AVATAR_RESPONSE",CREATE_COMMENT_REQUEST:"CREATE_COMMENT_REQUEST",CREATE_COMMENT_RESPONSE:"CREATE_COMMENT_RESPONSE",RECOMMEND_COMMENT_REQUEST:"RECOMMEND_COMMENT_REQUEST",RECOMMEND_COMMENT_RESPONSE:"RECOMMEND_COMMENT_RESPONSE",UNRECOMMEND_COMMENT_REQUEST:"UNRECOMMEND_COMMENT_REQUEST",UNRECOMMEND_COMMENT_RESPONSE:"UNRECOMMEND_COMMENT_RESPONSE",FLAG_COMMENT_REQUEST:"FLAG_COMMENT_REQUEST",FLAG_COMMENT_RESPONSE:"FLAG_COMMENT_RESPONSE",GET_SHORT_URL_REQUEST:"GET_SHORT_URL_REQUEST",GET_SHORT_URL_RESPONSE:"GET_SHORT_URL_RESPONSE",READ_COMMENTS:"READ_COMMENTS",UNREAD_COMMENTS:"UNREAD_COMMENTS"}},yhyO:function(e,t,n){"use strict";var i=this&&this.__createBinding||(Object.create?function(e,t,n,i){void 0===i&&(i=n);var a=Object.getOwnPropertyDescriptor(t,n);a&&!("get"in a?!t.__esModule:a.writable||a.configurable)||(a={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,i,a)}:function(e,t,n,i){void 0===i&&(i=n),e[i]=t[n]}),a=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&i(t,e,n);return a(t,e),t},r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var s=r(n("q1tI")),l=n("X6oL"),c=o(n("w1Qc")),u=n("FY2l"),d=r(n("RSCB")),p=r(n("hsfg")),f=n("6gWn"),m=r(n("5UIh")),h=r(n("DWJt"));t.default=function(e){var t,n,i,a,o,r,g,y=e.unit,v=(0,l.useTracking)(),b="";if(void 0!==window&&void 0!==(null===window||void 0===window?void 0:window.location)){var _=new URL(null===(t=window.location)||void 0===t?void 0:t.href);_.searchParams.append("open-in-app","logged-out-dock"),b=(0,u.getDynamicLink)(_.toString())}var w=s.default.createElement("p",{className:c.headerTextClass},null===(n=y.content)||void 0===n?void 0:n.headerText),x=s.default.createElement("div",{className:c.containerClass},s.default.createElement("div",{className:c.contentClass},s.default.createElement("p",{className:c.contentTextClass},null===(i=y.content)||void 0===i?void 0:i.contentText),s.default.createElement("div",null,s.default.createElement(p.default,{trackingObject:null===(a=y.content)||void 0===a?void 0:a.ctaLogAppTrackObj,redirectUri:b,isLoggedIn:!1,className:c.buttonClass},null===(o=null==y?void 0:y.content)||void 0===o?void 0:o.ctaLogApp," ",s.default.createElement(h.default,{className:c.caretClass,fill:"#f8f8f8"})),s.default.createElement(d.default,{testId:"dock-content-log-in",url:null===(r=null==y?void 0:y.content)||void 0===r?void 0:r.authUri,onClick:function(){var e;v.trackEvent(null===(e=y.content)||void 0===e?void 0:e.ctaContinueWebTrackObj)},className:c.continueWebLinkClass},s.default.createElement("span",{className:c.continueWebTextClass},null===(g=null==y?void 0:y.content)||void 0===g?void 0:g.ctaContinueWeb)))));return(null==y?void 0:y.canShow)?s.default.createElement(m.default,{testId:"onsite-messaging-unit-".concat(null===f.config||void 0===f.config?void 0:f.config.name),"data-campaign":null==y?void 0:y.campaign,"data-audience":null==y?void 0:y.audience,unit:y,contentID:"SUJO_AUTH_KNOWN_SUB_LOG_IN_224",dockID:"Logged Out Sub - 224",header:w,card:x,isDockDismissible:!1,minimized:!1,headerCollapsedCTA:"EXPAND",headerExpandedCTA:"COLLAPSE"}):null}},yxLZ:function(e,t,n){"use strict";var i=n("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=i(n("Ybk9"));t.default=a.default},z0L9:function(e,t,n){"use strict";var i=n("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=i(n("J4zp")),o=n("q1tI"),r=i(n("AWLv")),s="STYLN_reading_time",l="1_reading_time";t.default=function(e){var t,n,i=e.abra,c=e.reportExposure,u=(0,r.default)({}),d=(0,a.default)(u,2),p=d[0],f=d[1],m=(0,o.useRef)(!1),h=null==i||null===(t=i.STYLN_reading_time)||void 0===t?void 0:t.allocated,g=(null==i||null===(n=i.STYLN_reading_time)||void 0===n?void 0:n.variant)===l;return(0,o.useEffect)((function(){h&&f.isIntersecting&&!m.current&&(c(s),m.current=!0)}),[h,f,c]),[p,g]}},z4uL:function(e,t,n){"use strict";t.a="/vi-assets/static-assets/icon-read-like-the-wind_144x144-5bcf9faf41d0b49df1df29e59a868b36.webp"},z5jG:function(e,t,n){"use strict";var i=n("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.OnsiteByline=void 0;var a=i(n("q1tI")),o=i(n("HMjI")),r=i(n("95Yr")),s=(n("EVBM"),t.OnsiteByline=function(e){var t=e.bylineData;return t?a.default.createElement(o.default,{headshots:t.headshots,Headshot:r.default,data:t}):null});s.displayName="OnsiteByline",s.defaultProps={bylineData:null};t.default=s},z8TD:function(e,t,n){"use strict";var i=n("TqRt"),a=n("cDf5");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=i(n("lSNA")),r=i(n("J4zp")),s=f(n("q1tI")),l=(i(n("17x9")),n("Jqp9")),c=i(n("OB6K")),u=i(n("JZVe")),d=f(n("L1jB"));function p(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(p=function(e){return e?n:t})(e)}function f(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=a(e)&&"function"!=typeof e)return{default:e};var n=p(t);if(n&&n.has(e))return n.get(e);var i={__proto__:null},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var r in e)if("default"!==r&&{}.hasOwnProperty.call(e,r)){var s=o?Object.getOwnPropertyDescriptor(e,r):null;s&&(s.get||s.set)?Object.defineProperty(i,r,s):i[r]=e[r]}return i.default=e,n&&n.set(e,i),i}var m=function(e){var t,n,i=(0,l.useTheme)(),a=e.label,p=e.byline,f=e.headline,m=e.summary,h=e.media,g=e.children,y=e.timestamp,v=e.shareTools,b=e.translationLinks,_=e.newsStatus,w=e.timesExclusive,x=e.sponsoredByAd,k=e.brandBar,O=e.className,T=e.featuredAudio,C=e.isHybrid,E=e.firstPublished,S=e.promotionalImage,P=e.audioHeadline,I=e.url,M=e.uri,A=e.granted,j=e.messageCap,N=e.useOverlayContext,L=e.abra,D=e.truncated,R=e.isInPreloadedWebview,B=(0,s.useState)(!1),z=(0,r.default)(B,2),F=z[0],U=z[1],H=(0,s.useState)(!1),W=(0,r.default)(H,2),q=W[0],V=W[1],G=(0,s.useState)(!1),Y=(0,r.default)(G,2),X=Y[0],Z=Y[1],J="SYNTHETIC_NARRATION"===(null==T||null===(t=T.asset)||void 0===t?void 0:t.audioContentType);if((0,s.useEffect)((function(){var e="STYLN_synth_voice_app",t="1_synth",n=null==L?void 0:L.isAllocated(e),i=null==L?void 0:L.getVariant(e),a=i===t||["58030422","74647511","67978205","125277322","69857327","63037764","60151443","49472044","71007804","74836878","158650957","78181135","63422375","106815618","4689","140549806","6397993","84087167","5351307","76571320","194977678","27610908","61085380","136875758","72317470","86064670","164949627","92990944","92990944","147723546","206403665","64325786","216182727","148756396","119964690","183157596","73363795","86431400","76627686","168057521","69081245","51198367","56698457","192553263","134284685","136085954","152770934","166411008","60533930","2294040","30795765","69042659","66961263","77042322","65247823","35208363","50264772","75168044","69625748","157722357","192971481","11055412","87639332","63491756","63511194","29621942","142982","212621510","80308301","82899654","63037764","61654658","186969446","69255515","212630323","86359234","167306496","179335504","90353806","43314583","69465897","91448800","4493107","89374979","73049435","206707916","88488806","132630080","95145233","68518207","214439118","68931752","96811102","179183171","83038487","144854878","63421643","141004927","42938022","106153019","76272483","19290935","84322202","131006314","142117911","93597719"].includes(null==L?void 0:L.overrideId);Z(a||R);var o=null==L?void 0:L.isAllocated("SUBX_regi_alloc_holdout_2024H1"),r=null==L?void 0:L.getVariant("SUBX_regi_alloc_holdout_2024H1");o&&r&&J&&!q&&(V(!0),null==L||L.reportExposure("SUBX_regi_alloc_holdout_2024H1")),n&&i&&J&&!F&&(U(!0),null==L||L.reportExposure(e))}),[L,F,q,C,J,R]),i.opinionHeaderRedesign){var K,$=s.default.createElement(s.default.Fragment,null,h,p,y,v),Q=C?J&&X:J,ee={url:I,uri:M,headline:P,promotionalImage:S,firstPublished:E},te=s.default.createElement(s.default.Fragment,null,Q&&s.default.createElement("div",{className:(0,l.cx)(d.responsiveCenteringClass,d.syntheticNarrationContainerClass)},s.default.createElement("div",{className:(0,l.cx)(d.audioContainerClass,(0,o.default)({},d.extraSpacingClass,!h&&C))},s.default.createElement(u.default,{articleData:ee,audioAsset:T.asset,isHybrid:C,granted:!!C||A,messageCap:j,useOverlayContext:C?function(){return null}:N})),v),"opinion"!==(null==i?void 0:i.section)&&!Q&&v,"opinion"===(null==i?void 0:i.section)&&y,h,"opinion"===(null==i?void 0:i.section)&&v,p,"opinion"!==(null==i?void 0:i.section)&&y);return s.default.createElement(c.default,{theme:{summary:m,media:h}},s.default.createElement(d.default,{className:O},k,x,("DEFAULT"!==(null==_||null===(K=_.props)||void 0===K?void 0:K.newsStatus)||a||w)&&s.default.createElement(d.LabelContainer,null,w,_,a),f,D?null:s.default.createElement(s.default.Fragment,null,m,i.isShortForm?$:te,b,g)))}return s.default.createElement(c.default,{theme:{summary:m,media:h}},s.default.createElement(d.default,{className:O},k,x,("DEFAULT"!==(null==_||null===(n=_.props)||void 0===n?void 0:n.newsStatus)||a||w)&&s.default.createElement(d.LabelContainer,null,w,_,a),f,D?null:s.default.createElement(s.default.Fragment,null,m,"opinion"===(null==i?void 0:i.section)&&s.default.createElement(s.default.Fragment,null,p,y,b),v,h,"opinion"!==(null==i?void 0:i.section)&&s.default.createElement(s.default.Fragment,null,p,y,b),g)))};m.displayName="HeaderBasic",m.defaultProps={byline:null,children:null,label:null,media:null,summary:null,timestamp:null,shareTools:null,translationLinks:null,newsStatus:null,timesExclusive:null,sponsoredByAd:null,brandBar:null,className:void 0,featuredAudio:void 0,isHybrid:void 0,firstPublished:null,promotionalImage:null,audioHeadline:null,uri:null,url:null,granted:null,messageCap:null,useOverlayContext:null,abra:null,truncated:!1,isInPreloadedWebview:!1};t.default=m},z9xE:function(e,t,n){"use strict";n.d(t,"p",(function(){return r})),n.d(t,"a",(function(){return s})),n.d(t,"s",(function(){return l})),n.d(t,"r",(function(){return c})),n.d(t,"h",(function(){return u})),n.d(t,"c",(function(){return d})),n.d(t,"l",(function(){return p})),n.d(t,"o",(function(){return f})),n.d(t,"f",(function(){return m})),n.d(t,"e",(function(){return h})),n.d(t,"d",(function(){return g})),n.d(t,"k",(function(){return y})),n.d(t,"i",(function(){return v})),n.d(t,"n",(function(){return b})),n.d(t,"b",(function(){return _})),n.d(t,"q",(function(){return w})),n.d(t,"g",(function(){return x})),n.d(t,"m",(function(){return k})),n.d(t,"j",(function(){return O}));var i=n("Jqp9"),a=n("wXC7"),o=n.n(a),r=Object(i.css)("display:none;",o.a.breakpoint.extraSmall,"{display:flex;width:16px;height:31px;}",o.a.breakpoint.medium,"{display:flex;width:16px;height:31px;}",o.a.breakpoint.mediumLarge,"{display:none;}",o.a.printHide),s=Object(i.css)("height:23px;margin-top:6px;"),l=Object(i.css)("width:220px;margin-top:3px;"),c=Object(i.css)("margin-top:10.5px;"),u=Object(i.css)("height:23px;margin-top:6px;"),d=Object(i.css)("display:none;",o.a.breakpoint.mediumLarge,"{display:flex;margin-top:0;}@media print{display:block;}"),p=Object(i.css)("display:flex;"),f=Object(i.css)("display:none;",o.a.breakpoint.extraSmall,"{position:fixed;display:flex;opacity:0;z-index:1;transition:all 0.2s ease-in-out;width:100%;height:32.063px;background:white;padding:5px 0;top:0;text-align:center;font-family:",o.a.font.serifMedium,";box-shadow:rgba(0,0,0,0.08) 0 0 5px 1px;border-bottom:1px solid ",o.a.color.gray60,";}@media print{position:relative;border:none;display:inline-block;opacity:1 !important;visibility:visible !important;}.NYTApp &{@media (max-width:",o.a.breakpoint.width.medium-1,"px){display:none;}}"),m=Object(i.css)("margin-left:20px;margin-right:20px;max-width:",o.a.breakpoint.mastheadMaxWidth,"px;display:flex;flex-direction:column;position:relative;width:100%;@media (min-width:1360px){margin-left:20px;margin-right:20px;}@media (min-width:1780px){margin-left:auto;margin-right:auto;}",o.a.print),h=Object(i.css)("display:none;",o.a.breakpoint.medium,"{display:flex;flex-direction:row;max-width:",o.a.breakpoint.mastheadMaxWidth,"px;overflow:hidden;position:absolute;width:45%;margin-left:calc((100% - 45%) / 2);",o.a.breakpoint.mediumLarge,"{width:50%;margin-left:calc((100% - 50%) / 2);}}.NYTApp &{",o.a.breakpoint.medium,"{width:90%;margin-left:calc((100% - 90%) / 2);",o.a.breakpoint.mediumLarge,"{width:63%;margin-left:calc((100% - 63%) / 2);}}}",o.a.printHide),g=Object(i.css)("font-family:",o.a.font.serifSmall,";font-weight:",o.a.font.weight.book,";font-size:13px;letter-spacing:0.015em;margin-top:10.5px;margin-bottom:10.5px;margin-right:auto;white-space:nowrap;text-overflow:ellipsis;"),y=Object(i.css)("font-family:",o.a.font.franklinBase,";font-weight:",o.a.font.weight.bold,";font-size:",o.a.font.size(12),";text-transform:uppercase;letter-spacing:0;margin-top:12.5px;margin-bottom:auto;margin-left:auto;white-space:nowrap;&:hover{text-decoration:underline;}"),v=Object(i.css)("display:inline-block;padding-left:7px;padding-right:7px;font-size:13px;margin-top:10px;margin-bottom:auto;color:",o.a.color.gray50,";"),b=Object(i.css)("margin-top:-1px;margin-bottom:auto;margin-left:auto;z-index:50;box-shadow:-14px 2px 7px -2px rgba(255,255,255,0.7);"),_=Object(i.css)("margin-top:1px;",o.a.breakpoint.mediumLarge,"{margin-top:0;}"),w=Object(i.css)(o.a.breakpoint.medium,"{margin-top:2px;}",o.a.breakpoint.mediumLarge,"{margin-top:0;}"),x=Object(i.css)("margin-left:auto;"),k=Object(i.css)("margin-bottom:0;"),O=Object(i.css)("font-family:",o.a.font.franklinBase,";color:",o.a.color.gray50," !important;border-left:1px solid ",o.a.color.gray50,";margin-left:10px;padding:10px;display:none;@media print{display:inline-block;}")},zC1O:function(e,t,n){"use strict";var i=n("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=i(n("q1tI")),o=i(n("YCta")),r=function(){var e=(0,o.default)();return a.default.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 40 36",id:"el_0kpS9qL_S"},a.default.createElement("title",null,"bars"),a.default.createElement("g",{id:"el_oZ84Hna1GC_65hRV2Qwn",className:e.fourthBarParentCollapsedClass,"data-animator-group":"true","data-animator-type":"0"},a.default.createElement("g",{id:"el_oZ84Hna1GC_ILVvi2tqx",className:e.fourthBarCollapsedClass,"ata-animator-group":"true","data-animator-type":"2"},a.default.createElement("g",{id:"el_oZ84Hna1GC"},a.default.createElement("rect",{x:"34",width:"6",height:"36",id:"el_qw_T_tngXw"})))),a.default.createElement("g",{id:"el_mYVjkduhMU_p_9Pm85Ac",className:e.thirdBarParentCollapsedClass,"data-animator-group":"true","data-animator-type":"0"},a.default.createElement("g",{id:"el_mYVjkduhMU_WxG3R40yd",className:e.thirdBarCollapsedClass,"data-animator-group":"true","data-animator-type":"2"},a.default.createElement("g",{id:"el_mYVjkduhMU"},a.default.createElement("rect",{x:"22.67",width:"6",height:"36",id:"el_lf9GrROk6j"})))),a.default.createElement("g",{id:"el_o-EuxhgoAw_kYNRGDfcw",className:e.secondBarParentCollapsedClass,"data-animator-group":"true","data-animator-type":"0"},a.default.createElement("g",{id:"el_o-EuxhgoAw_3c3bzSjOJ",className:e.secondBarCollapsedClass,"ata-animator-group":"true","data-animator-type":"2"},a.default.createElement("g",{id:"el_o-EuxhgoAw"},a.default.createElement("rect",{x:"11.33",width:"6",height:"36",id:"el_-iueO8klO0"})))),a.default.createElement("g",{id:"el_F7mSMPhqpC_y_fKcpSxn",className:e.firstBarParentCollapsedClass,"data-animator-group":"true","data-animator-type":"0"},a.default.createElement("g",{id:"el_F7mSMPhqpC_R6bNB6_Ys",className:e.firstBarCollapsedClass,"ata-animator-group":"true","data-animator-type":"2"},a.default.createElement("g",{id:"el_F7mSMPhqpC"},a.default.createElement("rect",{width:"6",height:"36",id:"el_dS5TKNZZ5w"})))))};r.displayName="PlaylistIconCollapsed";t.default=r},zIxd:function(e,t,n){"use strict";n.d(t,"a",(function(){return E}));var i,a,o,r,s,l=n("gcR/"),c=n.n(l),u=(n("q1tI"),n("/KYJ")),d=n("huET"),p=n("zsRM"),f=function(e,t){e.trackInteraction(t,{name:Object(p.e)(t.currentTarget),label:t.currentTarget.textContent,url:t.currentTarget.href})},m=function(e,t){e.trackInteraction(t,{name:"goto-subscribe",label:t.currentTarget.textContent,url:t.currentTarget.href})},h=n("Jqp9"),g=n("wXC7"),y=n.n(g),v=n("u1H9"),b=n("hU1o"),_=Object(h.css)("height:170px;"),w=Object(h.css)("@keyframes fadeIn{0%{opacity:0;}50%{opacity:0;}100%{opacity:1;}}animation:fadeIn 2s ease;overflow:hidden;"),x=Object(h.css)("display:grid;grid-row-gap:24px;justify-items:center;margin-left:20px;margin-right:20px;padding:32px 0 40px 0;"),k=Object(h.css)("display:grid;grid-row-gap:8px;text-align:center;"),O=Object(h.css)("color:",y.a.color.gray10,";text-decoration:underline;"),T=function(e){var t=e.tracker,n=Object(b.a)(),l=(null==n?void 0:n.requestPath)||"",d="https://www.nytimes.com".concat(l);"undefined"!=typeof window&&(d=window.location.href||d||"");var p=Object(v.b)({returnURL:d,clientId:"vi",extraParams:{asset:"opttrunc"}}),g=Object(v.c)({returnURL:d,campaignId:"89WYR"});return c()("div",{className:_},void 0,i||(i=c()("noscript",{},void 0,c()("div",{className:x,"data-testid":"optimistic-truncator-noscript"},void 0,c()(u.AlertIcon,{"aria-hidden":!0,size:24}),c()("div",{"data-testid":"optimistic-truncator-noscript-message",className:k},void 0,c()(u.Text,{as:"p",size:16,color:"secondaryDim"},void 0,"We are having trouble retrieving the article content."),c()(u.Text,{as:"p",size:16,color:"secondaryDim"},void 0,"Please enable JavaScript in your browser settings."))))),c()("div",{className:y.a.a11y.visuallyHidden,id:"optimistic-truncator-a11y",tabIndex:-1},void 0,a||(a=c()("hr",{})),c()("p",{},void 0,"Thank you for your patience while we verify access. If you are in Reader mode please exit and ",c()("a",{href:p,onClick:function(e){return f(t,e)}},void 0,"log into")," your Times account, or ",c()("a",{href:g,onClick:function(e){return m(t,e)}},void 0,"subscribe")," for all of The Times."),o||(o=c()("hr",{}))),c()("div",{className:Object(h.cx)(w,x)},void 0,r||(r=c()(u.Spinner,{"data-testid":"optimistic-truncator-spinner",size:24,"aria-hidden":"true"})),c()("div",{"data-testid":"optimistic-truncator-message",className:k},void 0,s||(s=c()(u.Text,{as:"p",size:16,color:"secondaryDim"},void 0,"Thank you for your patience while we verify access.")),c()(u.Text,{as:"p",size:16,color:"secondaryDim"},void 0,"Already a subscriber? ",c()("a",{"data-testid":"log-in-link",className:O,href:p,onClick:function(e){return f(t,e)}},void 0,"Log in"),"."),c()(u.Text,{as:"p",size:16,color:"secondaryDim"},void 0,"Want all of The Times? ",c()("a",{"data-testid":"subscribe-link",className:O,href:g,onClick:function(e){return m(t,e)}},void 0,"Subscribe"),"."))))};T.displayName="Content";var C=function(e,t){return t?e?"fallback":t.dropzone.toString():""},E=function(e){var t=e.dropzoneCount,n=e.fallbackTruncation,i=e.truncated,a={name:"optimisticTruncator",context:t?"".concat(t):"",label:C(n,i)};return c()(u.Root,{darkMode:!1},void 0,c()(d.a,{messageId:"optimistic",Content:T,showAds:!1,tracking:a}))};E.displayName="Optimistic"},zS3r:function(e,t,n){"use strict";var i=n("pVnL"),a=n.n(i),o=n("gcR/"),r=n.n(o),s=n("J4zp"),l=n.n(s),c=n("q1tI"),u=n.n(c),d=n("Jqp9"),p=n("f81r"),f=n("rI8Z"),m=n("fZdH"),h=n("boCj"),g=n("NW2b"),y=n("wXC7"),v=n.n(y),b=n("3sMT"),_="@media (max-width: ".concat(v.a.breakpoint.maxMobileContentWidth,"px)"),w=(v.a.color.gray30,v.a.font.franklinBase,v.a.font.size(12),v.a.font.weight.medium,v.a.font.size(16),v.a.color.gray50,v.a.color.gray30,v.a.color.gray30,v.a.color.white,v.a.color.white,v.a.color.gray50,Object(d.css)("font-size:",v.a.font.size(12),";line-height:",v.a.font.size(12),";margin-top:auto;")),x=Object(d.css)("background-color:",v.a.color.blue30,";border:1px solid ",v.a.color.blue20,";border-radius:3px;color:white;display:block;font-family:",v.a.font.franklinBase,";font-size:",v.a.font.size(13),";font-weight:",v.a.font.weight.mediumBold,";letter-spacing:0.05em;line-height:1.5rem;margin-left:auto;margin-right:auto;padding:5px 0;text-transform:uppercase;transition:background-color 0.6s ease;width:100%;&:active,&:focus,&:hover{background-color:",v.a.color.blue20,";}",v.a.printHide,";"),k=Object(d.css)("border-radius:30px;padding:6px;padding:8px 10px 7px;display:inline-block;",_,"{padding:8px 7px 7px;}svg path{fill:",b.color.content.primary,";}"),O=Object(d.css)("vertical-align:middle;margin-top:-1px;margin-right:5px;overflow:visible;"),T=Object(d.css)("line-height:0;"),C=Object(d.css)("align-self:center;vertical-align:initial;border-radius:30px;background-color:transparent;border:none;bottom:0.05rem;cursor:pointer;display:inline-flex;flex-direction:column;font-family:",v.a.font.franklinBase,";font-size:",v.a.font.size(12),";font-weight:",v.a.font.weight.medium,";height:auto;width:auto;line-height:",v.a.font.size(16),";overflow:visible;position:relative;text-transform:uppercase;&:hover,&:focus{text-decoration:none;border-color:",v.a.color.gray50,";}"),E=Object(d.css)("width:8px;height:8px;background-color:#0098fe;border:solid 1.5px white;border-radius:50%;position:absolute;top:4px;left:42px;"),S=function(e){var t=e.onClick,n=e.label,i=e.position,a=e.content,o=e.buttonClass;return r()("button",{type:"button",className:Object(d.cx)(x,o),onClick:t,"aria-label":Object(f.a)(n),"data-testid":"comments-speech-bubble".concat(i?"-".concat(i):""),id:"comments-speech-bubble".concat(i?"-".concat(i):"")},void 0,a)};S.displayName="BlockButton",S.defaultProps={label:"",position:"",content:null,buttonClass:void 0};var P=S,I=function(e){var t=e.onClick,n=e.label,i=e.position,a=e.content,o=e.buttonClass,s=Object(c.useState)(!1),u=l()(s,2),p=u[0],m=u[1];return r()("button",{type:"button",className:Object(d.cx)(C,o),onClick:function(){p||(m(!0),t())},onFocus:function(){p&&m(!1)},"aria-label":Object(f.a)(n),"aria-haspopup":"dialog","aria-expanded":p,"aria-controls":"comments-panel","data-testid":"comments-speech-bubble".concat(i?"-".concat(i):""),id:"comments-speech-bubble".concat(i?"-".concat(i):"")},void 0,a)};I.displayName="SpeechBubbleButton",I.defaultProps={label:"",position:"",content:null,buttonClass:void 0};var M=I,A=Object(d.css)("height:18px;margin-bottom:-4px;margin-right:3px;border-radius:30px;"),j=function(e){var t=e.reporterHeadshotUrl;return r()("img",{alt:"",src:t||"/vi-assets/static-assets/fallbackImage-0ef4edead9adae0368cf4643ebd3b136.svg",className:Object(d.cx)(A),"aria-hidden":!0})};j.displayName="ReporterHeadshot",j.defaultProps={reporterHeadshotUrl:""};var N,L=j,D=function(e){if(!Number.isNaN(e)&&e>=1e3){var t=Math.round(e/100),n=Number.parseFloat(t).toFixed(1)/10;return"".concat(e>1e4?Math.round(n):n,"k")}return e},R="comment",B="comments",z="There are no comments",F=function(e){var t,n,i,o,s,y=e.children,v=e.onClick,b=e.viewCommentsInNewWindow,_=e.commentCount,x=e.position,S=e.url,I=e.buttonClass,A=e.reporterReplies,j=e.renderSignal,F=e.newTimestamp,U=Object(m.a)(),H=Object(c.useState)(""),W=l()(H,2),q=W[0],V=W[1],G="bigBottom"===x;s=0===_?p.a.addAComment:"Read ".concat(y&&y,1===_?" Comment":" Comments");var Y=U&&(null==U||null===(t=U.SP_RepReplyV2_0624)||void 0===t?void 0:t.allocated)&&(null==U||null===(n=U.SP_RepReplyV2_0624)||void 0===n?void 0:n.variant),X=Y&&"1_Headshot"===(null==U||null===(i=U.SP_RepReplyV2_0624)||void 0===i?void 0:i.variant),Z=Y&&"2_Blue"===(null==U||null===(o=U.SP_RepReplyV2_0624)||void 0===o?void 0:o.variant),J=Object(h.useInView)({onChange:function(e){e&&Object(g.e)("SP_RepReplyV2_0624")}}),K=l()(J,1)[0],$=(A?Object.keys(A).length>2:null)&&(null==A?void 0:A.some((function(e){return!0===e.author.isAssetAuthor}))),Q=$&&j,ee=$&&F;Object(c.useEffect)((function(){!function(){if($){var e=Object.values(A).reduceRight((function(e,t){return t.author.isAssetAuthor?t:e}),null);e&&e.author.avatarUrl&&V(e.author.avatarUrl)}}()}),[$,A]);var te=r()("div",{className:Object(d.cx)(E)}),ne=Q||ee,ie=ne&&(X||Z)?"bold":"normal",ae=ne?X?"6px 8px":"6px 8px 7px":"8px 10px 7px",oe=u.a.createElement("div",{className:k,style:{padding:ae,fontWeight:ie},ref:K},ne&&(X||Z)?r()(L,{reporterHeadshotUrl:q}):null,r()("svg",{"aria-hidden":"true",width:"21",height:"18",viewBox:"0 0 21 18",className:O},void 0,N||(N=r()("path",{d:"m14.52 17.831-5.715-4.545H2.4a1.468 1.468 0 0 1-1.468-1.469V1.894A1.471 1.471 0 0 1 2.4.405h16.583a1.469 1.469 0 0 1 1.469 1.469v9.923a1.469 1.469 0 0 1-1.47 1.47H14.58l-.06 4.564ZM2.4 1.645a.228.228 0 0 0-.228.229v9.923a.228.228 0 0 0 .228.229h6.811l4.06 3.235v-3.235h5.652a.228.228 0 0 0 .229-.229V1.874a.228.228 0 0 0-.229-.229H2.4Z",fill:"#121212",fillRule:"nonzero"}))),r()("span",{className:w},void 0,y&&D(y)),ne&&Z?te:null),re=z;if(_>0&&(re="Read ".concat(_," ").concat(1===_?R:B)),b&&S)return r()("a",{href:"".concat(S,"#commentsContainer"),target:"_blank",rel:"noreferrer","aria-label":Object(f.a)(re),className:Object(d.cx)({commentStyleClass:0===_},C,T,I),"data-testid":"comments-new-window-button"},void 0,oe);if(!v)return r()("span",{className:Object(d.cx)({commentStyleClass:0===_},C,I)},void 0,oe);var se={onClick:v,label:re,position:x,content:oe,buttonClass:I};return G?u.a.createElement(P,a()({},se,{content:s})):u.a.createElement(M,se)};F.displayName="OpenCommentsButton",F.defaultProps={children:null,onClick:null,commentCount:null,position:"",viewCommentsInNewWindow:!1,url:void 0,buttonClass:void 0,reporterReplies:null,renderSignal:!1,newTimestamp:!1};t.a=F},zWrI:function(e,t,n){"use strict";t.a={COMMENTS_PANEL:"commentsContainer",PERM_ID:"permid"}},ziu7:function(e,t,n){"use strict";n.d(t,"c",(function(){return i})),n.d(t,"a",(function(){return a})),n.d(t,"b",(function(){return o})),n.d(t,"d",(function(){return r})),n.d(t,"e",(function(){return s}));var i=function(e,t){var n=t||e;return"t-magazine"===e&&(n=e),"media"===n?"":n},a=function(e){return e&&e[0].ledeMedia?e[0].ledeMedia:""},o=function(e,t){return t&&e&&e.media&&e.media[t]||""},r=function(e){if(!e)return null;var t=e.__typename||e.name;return"InteractiveBlock"===t||"UnstructuredBlock"===t&&(e.dataType&&"ExperimentalBlock_Scrolly"===e.dataType||e.data&&e.data.dataType&&"ExperimentalBlock_Scrolly"===e.data.dataType)},s=function(e){var t;if(null==e||null===(t=e.capsuleContent)||void 0===t||!t.slug)return!1;var n=e.capsuleContent.slug;return!!["NL_SEG_","SO_NL_NATIVE_AD"].filter((function(e){return n.toUpperCase().startsWith(e)})).length}},zkhZ:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=n("RRh/");t.default=i.MediaWithWriteThrough},zl8J:function(e,t,n){"use strict";n.r(t);var i,a=n("VkAN"),o=n.n(a),r=n("gcR/"),s=n.n(r),l=n("lSNA"),c=n.n(l),u=n("J4zp"),d=n.n(u),p=n("q1tI"),f=n.n(p),m=n("eFc+"),h=n.n(m),g=n("9/5/"),y=n.n(g),v=n("wXC7"),b=n.n(v),_=n("Uxaz"),w=n("E8oU"),x=n.n(w),k=n("YWmT"),O=n("xHA4"),T=n("pCca"),C=n("2XMp"),E=n("e9RS"),S=n("fZdH"),P=n("4KZX");function I(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function M(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?I(Object(n),!0).forEach((function(t){c()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):I(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function A(e){var t,n=e.storyline,i=e.parentUri,a=e.parentUrl,o=e.pageType,r=e.testName,l=e.ruleName,c=e.region,u=e.isOpinion,m=Object(S.a)(),h=null==m||null===(t=m[_.STRUCTURED_INLINE_MODULES.name])||void 0===t?void 0:t.variant,g=Object(p.useMemo)((function(){return Object(O.getExperimentalAssetDataFromStoryline)({storyline:n,block:O.STORYLINE_BLOCKS.context})}),[n]),v=Object(p.useMemo)((function(){return function(e,t){var n,i=(null==e||null===(n=e.items)||void 0===n?void 0:n.length)>2,a=t?"opinion":"levelup";return{BLOCK_NAME:"storyline_".concat(a,"_").concat(i?"swipe_":"","recirc"),BLOCK_COMPONENT_NAME:"".concat(a).concat(i?"_swipe":"")}}(g,u)}),[g,u]),w=v.BLOCK_NAME,E=v.BLOCK_COMPONENT_NAME,I={region:c,block:w,name:l,variant:"show",pgtype:o},A=Object(T.a)().maxWidthMatches,j=Object(p.useState)(A(b.a.breakpoint.width.small)),N=d()(j,2),L=N[0],D=N[1];Object(p.useEffect)((function(){var e=y()((function(){D(A(b.a.breakpoint.width.small))}),250);return window.addEventListener("resize",e),function(){window.removeEventListener("resize",e)}}),[A]);var R=Object(p.useMemo)((function(){return M(M({},n),{},{experimentalJsonBlob:Object(C.a)({region:c,block:w,name:l,variant:"show",pgtype:o,html:n.experimentalJsonBlob})})}),[n,c,l,o,w]);return s()(k.a,{componentName:E,region:c,parentUri:i,testName:r,ruleName:l,pageType:o},void 0,(function(e){var t=e.trackImpression,i=e.trackInteraction;return f.a.createElement(f.a.Fragment,null,s()(P.a,{uri:n.uri,name:"Context",isInlineModule:!0}),s()(x.a,{parentUrl:a,storyline:R,trackEvent:t,trackLinkInteractionV2:i,internalLinkTrackingParams:I,isPeeking:L,isUnstructuredInlineModule:!h||h===_.STRUCTURED_INLINE_MODULES.control},t))}))}A.displayName="ContextBlock",A.defaultProps={testName:null},A.fragments={storyline:h()(i||(i=o()(["\n    fragment ContextBlock_storyline on CreativeWork {\n      ... on Published {\n        uri\n        url\n      }\n      storylines {\n        ruleName\n        testName\n        storyline {\n          experimentalJsonBlob\n          context {\n            displayName\n            items {\n              subtitle\n              text {\n                ...StorylineParagraphBlock_content\n              }\n            }\n          }\n        }\n      }\n    }\n    ","\n  "])),E.a.paragraphBlock)},t.default=A},znWy:function(e,t,n){"use strict";var i=this&&this.__makeTemplateObject||function(e,t){return Object.defineProperty?Object.defineProperty(e,"raw",{value:t}):e.raw=t,e};Object.defineProperty(t,"__esModule",{value:!0}),t.loginLink=t.longHorizontalRule=t.topperWrapClass=t.topperClass=void 0;var a,o,r,s,l=n("Jqp9"),c=n("lVLo");t.topperClass=(0,l.css)(a||(a=i(["\n  font-family: ",";\n  font-weight: 500;\n  padding-top: 24px;\n  padding-bottom: 16px;\n  text-align: center;\n  line-height: 1.2;\n  font-size: 14px;\n  color: ",";\n"],["\n  font-family: ",";\n  font-weight: 500;\n  padding-top: 24px;\n  padding-bottom: 16px;\n  text-align: center;\n  line-height: 1.2;\n  font-size: 14px;\n  color: ",";\n"])),c.fonts.franklin,c.colors.black),t.topperWrapClass=(0,l.css)(o||(o=i(["\n  display: inline;\n\n  @media (min-width: ","px) {\n    display: block;\n  }\n\n  @media (min-width: ","px) {\n    display: inline;\n  }\n"],["\n  display: inline;\n\n  @media (min-width: ","px) {\n    display: block;\n  }\n\n  @media (min-width: ","px) {\n    display: inline;\n  }\n"])),c.widths.verySmall,c.widths.small),t.longHorizontalRule=(0,l.css)(r||(r=i(["\n  border: 0;\n  background-color: ",";\n  height: 1px;\n  width: 100%;\n"],["\n  border: 0;\n  background-color: ",";\n  height: 1px;\n  width: 100%;\n"])),c.colors.lineGrey),t.loginLink=(0,l.css)(s||(s=i(["\n  color: ",";\n  font-weight: 700;\n  text-decoration: none;\n"],["\n  color: ",";\n  font-weight: 700;\n  text-decoration: none;\n"])),c.colors.veryDarkGrey)},zrfs:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;t.default=function(e,t){if("function"==typeof requirejs)requirejs([e],(function(e){return t(e)}));else{var n=document.getElementsByTagName("head")[0],i=document.createElement("script");i.loaded=!1,i.async=1;var a=function(){i.readyState&&!/^c|loade/.test(i.readyState)||i.loaded||(i.loaded=!0,i.onerror=null,i.onreadystatechange=null,i.onload=null,t())};i.onload=a,i.onerror=a,i.src=e,n.insertBefore(i,n.lastChild)}}},zsRM:function(e,t,n){"use strict";n.d(t,"d",(function(){return i})),n.d(t,"c",(function(){return a})),n.d(t,"a",(function(){return p})),n.d(t,"b",(function(){return f})),n.d(t,"f",(function(){return m})),n.d(t,"e",(function(){return h})),n.d(t,"h",(function(){return g})),n.d(t,"g",(function(){return y}));var i={dropzone:2},a="truncator",o=/log in/i,r=/(register)|(create .*account)/i,s=/update .*payment/i,l=/(nytimes\.com\/get-started)|(nytimes\.com\/subscription)/,c=/((click|follow) (here|this link))/i,u=/grace/i,d=/(continue reading)|(dismiss)|(show .*article)/i,p={test:"AMS_FrictionCircumventionDesktop_cwv",control:"0_control",variant1:"1_high-mid-truncation",variant2:"2_low-mid-truncation"},f={test:"AMS_FrictionCircumventionMobile_cwv",control:"0_control",variant1:"1_high-mid-truncation",variant2:"2_low-mid-truncation"},m=function(e){var t,n;return(null===(t=e[p.test])||void 0===t?void 0:t.variant)===p.variant1||(null===(n=e[f.test])||void 0===n?void 0:n.variant)===f.variant1?{dropzone:4}:{dropzone:6}},h=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=e.textContent,i=void 0===n?"":n,a=e.href,p=void 0===a?"":a;return o.test(i)?"goto-login":r.test(i)?"goto-register":s.test(i)||c.test(i)&&u.test(t)?"goto-manage-billing":d.test(i)?"do-continue-reading":l.test(p)?"goto-subscribe":""},g=function(e){var t=e.shouldTruncate,n=e.minimumTruncation,i=e.elementCounter,a=e.dropzoneCounter,o=e.allowShortTruncate;if(!(void 0!==o&&o)&&i<=3)return!1;if(t){if(t.dropzone&&a>=t.dropzone)return!0;if(i>n)return!0}return!1},y=function(e,t,n){return!!e||t<n}},zt4Q:function(e,t,n){"use strict";var i=n("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.mapWrapperClass=t.mapClass=void 0;var a=n("Jqp9"),o=i(n("wXC7"));t.mapWrapperClass=(0,a.css)("max-width:",o.default.breakpoint.textBodyWidth,"px;margin-bottom:1.5rem;@media print{display:none;}"),t.mapClass=(0,a.css)("width:100%;height:200px;padding-bottom:",100/3,"%;",o.default.breakpoint.medium,"{height:90px;}")}}]);
//# sourceMappingURL=story-fbcee8fe750683336bb5.js.map